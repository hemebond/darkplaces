<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DarkPlaces: model_shared.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-customisations.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="darkplaces48x48.png"/></td>
  <td id="projectalign">
   <div id="projectname">DarkPlaces
   </div>
   <div id="projectbrief">Game engine based on the Quake 1 engine by id Software, developed by LadyHavoc</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('model__shared_8c_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">model_shared.c</div></div>
</div><!--header-->
<div class="contents">
<a href="model__shared_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">Copyright (C) 1996-1997 Id Software, Inc.</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"></span> </div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">This program is free software; you can redistribute it and/or</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">modify it under the terms of the GNU General Public License</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">as published by the Free Software Foundation; either version 2</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">of the License, or (at your option) any later version.</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"></span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment"></span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">See the GNU General Public License for more details.</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"></span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">along with this program; if not, write to the Free Software</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment"></span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment">*/</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment">// models.c -- model loading and caching</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="comment">// models are the only shared resource between a client and server running</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment">// on the same machine.</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;<a class="code" href="quakedef_8h.html">quakedef.h</a>&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="image_8h.html">image.h</a>&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;<a class="code" href="r__shadow_8h.html">r_shadow.h</a>&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;<a class="code" href="polygon_8h.html">polygon.h</a>&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno"><a class="line" href="model__shared_8c.html#acda3baede969704dd1c551d24033c6aa">   30</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#acda3baede969704dd1c551d24033c6aa">r_mipskins</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_mipskins&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;mipmaps model skins so they render faster in the distance and do not display noise artifacts, can cause discoloration of skins if they contain undesirable border colors&quot;</span>};</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a413acff425980e03159052b58f538cbd">   31</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#a413acff425980e03159052b58f538cbd">r_mipnormalmaps</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_mipnormalmaps&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;mipmaps normalmaps (turning it off looks sharper but may have aliasing)&quot;</span>};</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ae0d9355deaba10dacf0ea5bd325c221d">   32</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#ae0d9355deaba10dacf0ea5bd325c221d">mod_generatelightmaps_unitspersample</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;mod_generatelightmaps_unitspersample&quot;</span>, <span class="stringliteral">&quot;8&quot;</span>, <span class="stringliteral">&quot;lightmap resolution&quot;</span>};</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a21b90d5ad89fcecc68ead5509c8dd85e">   33</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#a21b90d5ad89fcecc68ead5509c8dd85e">mod_generatelightmaps_borderpixels</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;mod_generatelightmaps_borderpixels&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;extra space around polygons to prevent sampling artifacts&quot;</span>};</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a499f933ba033669ca67cea8a8b9351f6">   34</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#a499f933ba033669ca67cea8a8b9351f6">mod_generatelightmaps_texturesize</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;mod_generatelightmaps_texturesize&quot;</span>, <span class="stringliteral">&quot;1024&quot;</span>, <span class="stringliteral">&quot;size of lightmap textures&quot;</span>};</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ad795742131a032a7a1ee611990d79d59">   35</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#ad795742131a032a7a1ee611990d79d59">mod_generatelightmaps_lightmapsamples</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;mod_generatelightmaps_lightmapsamples&quot;</span>, <span class="stringliteral">&quot;16&quot;</span>, <span class="stringliteral">&quot;number of shadow tests done per lightmap pixel&quot;</span>};</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ab800e60ac9897a359da21d16f842679d">   36</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#ab800e60ac9897a359da21d16f842679d">mod_generatelightmaps_vertexsamples</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;mod_generatelightmaps_vertexsamples&quot;</span>, <span class="stringliteral">&quot;16&quot;</span>, <span class="stringliteral">&quot;number of shadow tests done per vertex&quot;</span>};</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a333c56a919ff09edad1477b17503a76d">   37</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#a333c56a919ff09edad1477b17503a76d">mod_generatelightmaps_gridsamples</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;mod_generatelightmaps_gridsamples&quot;</span>, <span class="stringliteral">&quot;64&quot;</span>, <span class="stringliteral">&quot;number of shadow tests done per lightgrid cell&quot;</span>};</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a93bf405698b289908d28a150f04f0318">   38</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#a93bf405698b289908d28a150f04f0318">mod_generatelightmaps_lightmapradius</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;mod_generatelightmaps_lightmapradius&quot;</span>, <span class="stringliteral">&quot;16&quot;</span>, <span class="stringliteral">&quot;sampling area around each lightmap pixel&quot;</span>};</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="model__shared_8c.html#af88e07f57fba40d3a55cb9f8b40ba9c2">   39</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#af88e07f57fba40d3a55cb9f8b40ba9c2">mod_generatelightmaps_vertexradius</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;mod_generatelightmaps_vertexradius&quot;</span>, <span class="stringliteral">&quot;16&quot;</span>, <span class="stringliteral">&quot;sampling area around each vertex&quot;</span>};</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno"><a class="line" href="model__shared_8c.html#afce66a9fd24e9b70739e12074b32c9c8">   40</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#afce66a9fd24e9b70739e12074b32c9c8">mod_generatelightmaps_gridradius</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;mod_generatelightmaps_gridradius&quot;</span>, <span class="stringliteral">&quot;64&quot;</span>, <span class="stringliteral">&quot;sampling area around each lightgrid cell center&quot;</span>};</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">   42</a></span><a class="code hl_struct" href="structmodel__t.html">model_t</a> *<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>;</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="comment">// Supported model formats</span></div>
<div class="foldopen" id="foldopen00045" data-start="{" data-end="};">
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a603c933678c63e166ac16b9ac3de3f58">   45</a></span><span class="keyword">static</span> <a class="code hl_struct" href="structmodloader__t.html">modloader_t</a> <a class="code hl_variable" href="model__shared_8c.html#a603c933678c63e166ac16b9ac3de3f58">loader</a>[] =</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>{</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    {<span class="stringliteral">&quot;obj&quot;</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code hl_function" href="model__brush_8c.html#a32aeae94a304b29fc3a77825b7a5e90a">Mod_OBJ_Load</a>},</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;IDPO&quot;</span>, 4, <a class="code hl_function" href="model__alias_8c.html#a9b264487ef89eca32099f4fc1b5679d0">Mod_IDP0_Load</a>},</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;IDP2&quot;</span>, 4, <a class="code hl_function" href="model__alias_8c.html#af78a405dfcc7b23d611f459ca05384d0">Mod_IDP2_Load</a>},</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;IDP3&quot;</span>, 4, <a class="code hl_function" href="model__alias_8c.html#ac9b161947e395e4f59c9d83c4c7c8a1c">Mod_IDP3_Load</a>},</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;IDSP&quot;</span>, 4, <a class="code hl_function" href="model__shared_8h.html#a56da538dec485ebc98d5ebf90fc80646">Mod_IDSP_Load</a>},</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;IDS2&quot;</span>, 4, <a class="code hl_function" href="model__shared_8h.html#af3d1870b405c945508ec03aa53209b0f">Mod_IDS2_Load</a>},</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;\035&quot;</span>, 1, <a class="code hl_function" href="model__brush_8c.html#ac7951bc8a426acde1bd108694921f5b7">Mod_Q1BSP_Load</a>},</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;\036&quot;</span>, 1, <a class="code hl_function" href="model__brush_8c.html#a5cd83c676ff52b646e89101e869cddcc">Mod_HLBSP_Load</a>},</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;BSP2&quot;</span>, 4, <a class="code hl_function" href="model__brush_8c.html#ad4918d0f5972eb3e651d72159402522a">Mod_BSP2_Load</a>},</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;2PSB&quot;</span>, 4, <a class="code hl_function" href="model__brush_8c.html#aa97ba64018e81191a09ab52702cbd9c0">Mod_2PSB_Load</a>},</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;IBSP&quot;</span>, 4, <a class="code hl_function" href="model__brush_8c.html#a6e96d9f6e37f9c538f2961e1cacb97ce">Mod_IBSP_Load</a>},</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;VBSP&quot;</span>, 4, <a class="code hl_function" href="model__brush_8c.html#abdc9a01bfdaf7e92e836ddbf7b75fe4e">Mod_VBSP_Load</a>},</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;ZYMOTICMODEL&quot;</span>, 13, <a class="code hl_function" href="model__alias_8c.html#a27c1ae3dc36c14a7480f9c579276079e">Mod_ZYMOTICMODEL_Load</a>},</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;DARKPLACESMODEL&quot;</span>, 16, <a class="code hl_function" href="model__alias_8c.html#ae2df02cdb10cd1da1528c8dd22e5f63a">Mod_DARKPLACESMODEL_Load</a>},</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;PSKMODEL&quot;</span>, 9, <a class="code hl_function" href="model__alias_8c.html#a5a91517e5f7d0174dd4bfbb94425237b">Mod_PSKMODEL_Load</a>},</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;INTERQUAKEMODEL&quot;</span>, 16, <a class="code hl_function" href="model__alias_8c.html#a81564eb5fc47d198419e89d49f5db553">Mod_INTERQUAKEMODEL_Load</a>},</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    {<span class="stringliteral">&quot;map&quot;</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code hl_function" href="model__brush_8c.html#aea213b0a4358054ff491119b61352274">Mod_MAP_Load</a>},</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    {<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>}</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>};</div>
</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ad231ab1e0d7281ff9fd3bcc6ab0ad615">   67</a></span><span class="keyword">static</span> <a class="code hl_struct" href="structmempool__t.html">mempool_t</a> *<a class="code hl_variable" href="model__shared_8c.html#ad231ab1e0d7281ff9fd3bcc6ab0ad615">mod_mempool</a>;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">   68</a></span><span class="keyword">static</span> <a class="code hl_struct" href="structmemexpandablearray__t.html">memexpandablearray_t</a> <a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aad0500eca89bdf3928091895b0ae35e3">   70</a></span><span class="keyword">static</span> <a class="code hl_struct" href="structmempool__t.html">mempool_t</a>* <a class="code hl_variable" href="model__shared_8c.html#aad0500eca89bdf3928091895b0ae35e3">q3shaders_mem</a>;</div>
<div class="foldopen" id="foldopen00071" data-start="{" data-end="};">
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="structq3shader__hash__entry__t.html">   71</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q3shader_hash_entry_s</a></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>{</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="structq3shader__hash__entry__t.html#a51abd5afda8d865102c9347c21e7926d">   73</a></span>  <a class="code hl_struct" href="structshader__t.html">shader_t</a> <a class="code hl_variable" href="structq3shader__hash__entry__t.html#a51abd5afda8d865102c9347c21e7926d">shader</a>;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno"><a class="line" href="structq3shader__hash__entry__t.html#a1bd5bc74c956144bc754962eafe2c452">   74</a></span>  <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q3shader_hash_entry_s</a>* <a class="code hl_variable" href="structq3shader__hash__entry__t.html#a1bd5bc74c956144bc754962eafe2c452">chain</a>;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>} <a class="code hl_struct" href="structq3shader__hash__entry__t.html">q3shader_hash_entry_t</a>;</div>
</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a4f0df7ee2d7f6abd898e01abe365f373">   76</a></span><span class="preprocessor">#define Q3SHADER_HASH_SIZE  1021</span></div>
<div class="foldopen" id="foldopen00077" data-start="{" data-end="};">
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno"><a class="line" href="structq3shader__data__t.html">   77</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q3shader_data_s</a></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>{</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno"><a class="line" href="structq3shader__data__t.html#ac6f932972d7f821a276dc2ed3bfd38b4">   79</a></span>  <a class="code hl_struct" href="structmemexpandablearray__t.html">memexpandablearray_t</a> <a class="code hl_variable" href="structq3shader__data__t.html#ac6f932972d7f821a276dc2ed3bfd38b4">hash_entries</a>;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno"><a class="line" href="structq3shader__data__t.html#a6f14ea99b141eb62ffd3461552c646fa">   80</a></span>  <a class="code hl_struct" href="structq3shader__hash__entry__t.html">q3shader_hash_entry_t</a> hash[<a class="code hl_define" href="model__shared_8c.html#a4f0df7ee2d7f6abd898e01abe365f373">Q3SHADER_HASH_SIZE</a>];</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="structq3shader__data__t.html#a7410df7a4f8a667d1c2f90f88242887e">   81</a></span>  <a class="code hl_struct" href="structmemexpandablearray__t.html">memexpandablearray_t</a> <a class="code hl_variable" href="structq3shader__data__t.html#a7410df7a4f8a667d1c2f90f88242887e">char_ptrs</a>;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>} <a class="code hl_struct" href="structq3shader__data__t.html">q3shader_data_t</a>;</div>
</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a83e42554be1ced79f6523bb26ef38fd1">   83</a></span><span class="keyword">static</span> <a class="code hl_struct" href="structq3shader__data__t.html">q3shader_data_t</a>* <a class="code hl_variable" href="model__shared_8c.html#a83e42554be1ced79f6523bb26ef38fd1">q3shader_data</a>;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span> </div>
<div class="foldopen" id="foldopen00085" data-start="{" data-end="}">
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aa1289b05ae97fb1c4089173f2e38ebd9">   85</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aa1289b05ae97fb1c4089173f2e38ebd9">mod_start</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>{</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a> = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>);</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <a class="code hl_function" href="cl__screen_8c.html#a867f4d465569723a04e4533559ad9698">SCR_PushLoadingScreen</a>(<span class="stringliteral">&quot;Loading models&quot;</span>, 1.0);</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a> = 0;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        <span class="keywordflow">if</span> ((mod = (<a class="code hl_struct" href="structmodel__t.html">model_t</a>*) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0] &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0] != <span class="charliteral">&#39;*&#39;</span>)</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>            <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">used</a>)</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>                ++<a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>;</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        <span class="keywordflow">if</span> ((mod = (<a class="code hl_struct" href="structmodel__t.html">model_t</a>*) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0] &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0] != <span class="charliteral">&#39;*&#39;</span>)</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>            <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">used</a>)</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>            {</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>                <a class="code hl_function" href="cl__screen_8c.html#a867f4d465569723a04e4533559ad9698">SCR_PushLoadingScreen</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, 1.0 / <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>);</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>                <a class="code hl_function" href="model__shared_8c.html#ac8a3648cf663195b29236e4c9034e57d">Mod_LoadModel</a>(mod, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>                <a class="code hl_function" href="cl__screen_8c.html#a5baf9557078472ea02b5e75f5ccb6bb4">SCR_PopLoadingScreen</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>            }</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    <a class="code hl_function" href="cl__screen_8c.html#a5baf9557078472ea02b5e75f5ccb6bb4">SCR_PopLoadingScreen</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>}</div>
</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="foldopen" id="foldopen00108" data-start="{" data-end="}">
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aa1a590e584125316a8e58ba42954d527">  108</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aa1a590e584125316a8e58ba42954d527">mod_shutdown</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>{</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a> = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>);</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        <span class="keywordflow">if</span> ((mod = (<a class="code hl_struct" href="structmodel__t.html">model_t</a>*) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp;&amp; (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a> || mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>))</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>            <a class="code hl_function" href="model__shared_8c.html#ab7bdd43d79cd365c41dc0903c8d3da9f">Mod_UnloadModel</a>(mod);</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <a class="code hl_function" href="model__shared_8c.html#ac09a298601daeda3aa5d20b005b5ddcd">Mod_FreeQ3Shaders</a>();</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <a class="code hl_function" href="model__alias_8c.html#a6616ff718610f10ecc36d7137e7046ab">Mod_Skeletal_FreeBuffers</a>();</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>}</div>
</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="foldopen" id="foldopen00122" data-start="{" data-end="}">
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a321b1980cf168303fb8e38f3676a8f41">  122</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a321b1980cf168303fb8e38f3676a8f41">mod_newmap</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>{</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>;</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacenum</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ssize</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tsize</a>;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a> = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>);</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    {</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        <span class="keywordflow">if</span> ((mod = (<a class="code hl_struct" href="structmodel__t.html">model_t</a>*) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>)</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        {</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#abbf1bba30697f7bf6cfb28c79adfefe6">num_textures</a> &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ac30e13239504da645c5e835eef8f559e">data_textures</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>            {</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>                <span class="comment">// note that materialshaderpass and backgroundshaderpass point to shaderpasses[] and so do the pre/post shader ranges, so this catches all of them...</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>                <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a722bc59e32d2f51daac962c7d0af6647">Q3SHADER_MAXLAYERS</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>++)</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>                    <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ac30e13239504da645c5e835eef8f559e">data_textures</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structtexture__t.html#a16e0e9e04e623cfdfcc47724e4fc2731">shaderpasses</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>])</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>                        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ac30e13239504da645c5e835eef8f559e">data_textures</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structtexture__t.html#a16e0e9e04e623cfdfcc47724e4fc2731">shaderpasses</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>]-&gt;<a class="code hl_variable" href="structtexture__shaderpass__t.html#ac4f878094f06ddd8a7cf035b0282e12b">numframes</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>++)</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>                            <a class="code hl_function" href="gl__rmain_8c.html#ac068333f6656190ddd5836765acdffe0">R_SkinFrame_MarkUsed</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ac30e13239504da645c5e835eef8f559e">data_textures</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structtexture__t.html#a16e0e9e04e623cfdfcc47724e4fc2731">shaderpasses</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>]-&gt;<a class="code hl_variable" href="structtexture__shaderpass__t.html#a9202519684b0bc068010eed98acba93d">skinframes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>]);</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>            }</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>            <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a5c0c32e777355c585bbab198d78dc6cc">solidskyskinframe</a>)</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>                <a class="code hl_function" href="gl__rmain_8c.html#ac068333f6656190ddd5836765acdffe0">R_SkinFrame_MarkUsed</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a5c0c32e777355c585bbab198d78dc6cc">solidskyskinframe</a>);</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>            <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a37a1567e8699fb01ef28871444c93d9c">alphaskyskinframe</a>)</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>                <a class="code hl_function" href="gl__rmain_8c.html#ac068333f6656190ddd5836765acdffe0">R_SkinFrame_MarkUsed</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a37a1567e8699fb01ef28871444c93d9c">alphaskyskinframe</a>);</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        }</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    }</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="cl__main_8c.html#a4464d836d1ac899355ae8c3092ffaf77">cl_stainmaps_clearonload</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    {</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>        <span class="keywordflow">if</span> ((mod = (<a class="code hl_struct" href="structmodel__t.html">model_t</a>*) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a> &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>)</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        {</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacenum</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacenum</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacenum</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>++)</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>            {</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;lightmapinfo &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;lightmapinfo-&gt;stainsamples)</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>                {</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ssize</a> = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;lightmapinfo-&gt;extents[0] &gt;&gt; 4) + 1;</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tsize</a> = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;lightmapinfo-&gt;extents[1] &gt;&gt; 4) + 1;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;lightmapinfo-&gt;stainsamples, 255, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ssize</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tsize</a> * 3);</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>                    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a53c32e4598e37e8256175c6112425af1">brushq1</a>.<a class="code hl_variable" href="structmodel__brushq1__t.html#a66c2d707bc47f544a31c80fa74ea8516">lightmapupdateflags</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacenum</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>                }</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>            }</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>        }</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    }</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>}</div>
</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span> </div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span><span class="comment">/*</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span><span class="comment">===============</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span><span class="comment">Mod_Init</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span><span class="comment">===============</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span><span class="comment">*/</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a011a07f2c9ef46e41b9ba88dfbbafd92">Mod_Print_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd);</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aee760e8b76be876398bee57d6b973c12">Mod_Precache_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd);</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aab4dd6a29cd4b0b1fb521bc4a067a45c">Mod_Decompile_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd);</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a4eaa08a8f4735ab687cf8856faaa5cec">Mod_GenerateLightmaps_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd);</div>
<div class="foldopen" id="foldopen00178" data-start="{" data-end="}">
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno"><a class="line" href="model__shared_8c.html#af9b95e6ed1ab3283c17917424413e16a">  178</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#af9b95e6ed1ab3283c17917424413e16a">Mod_Init</a> (<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>{</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <a class="code hl_variable" href="model__shared_8c.html#ad231ab1e0d7281ff9fd3bcc6ab0ad615">mod_mempool</a> = <a class="code hl_define" href="zone_8h.html#a7da6ffdd01b3d31cb7c89e68fad87d0d">Mem_AllocPool</a>(<span class="stringliteral">&quot;modelinfo&quot;</span>, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <a class="code hl_function" href="zone_8c.html#a211e7367323b1791e87715797bdee714">Mem_ExpandableArray_NewArray</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>, <a class="code hl_variable" href="model__shared_8c.html#ad231ab1e0d7281ff9fd3bcc6ab0ad615">mod_mempool</a>, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structmodel__t.html">model_t</a>), 16);</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <a class="code hl_function" href="model__brush_8c.html#a5881b3f28f05bc619c7847536733031f">Mod_BrushInit</a>();</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <a class="code hl_function" href="model__alias_8c.html#a11050e6c5c4cb4aadd76c62a1ed0b5ac">Mod_AliasInit</a>();</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <a class="code hl_function" href="model__shared_8h.html#a59ed29c41f877614448b0a651c2f2597">Mod_SpriteInit</a>();</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#acda3baede969704dd1c551d24033c6aa">r_mipskins</a>);</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a413acff425980e03159052b58f538cbd">r_mipnormalmaps</a>);</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#ae0d9355deaba10dacf0ea5bd325c221d">mod_generatelightmaps_unitspersample</a>);</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a21b90d5ad89fcecc68ead5509c8dd85e">mod_generatelightmaps_borderpixels</a>);</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a499f933ba033669ca67cea8a8b9351f6">mod_generatelightmaps_texturesize</a>);</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span> </div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#ad795742131a032a7a1ee611990d79d59">mod_generatelightmaps_lightmapsamples</a>);</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#ab800e60ac9897a359da21d16f842679d">mod_generatelightmaps_vertexsamples</a>);</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a333c56a919ff09edad1477b17503a76d">mod_generatelightmaps_gridsamples</a>);</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a93bf405698b289908d28a150f04f0318">mod_generatelightmaps_lightmapradius</a>);</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#af88e07f57fba40d3a55cb9f8b40ba9c2">mod_generatelightmaps_vertexradius</a>);</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#afce66a9fd24e9b70739e12074b32c9c8">mod_generatelightmaps_gridradius</a>);</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;modellist&quot;</span>, <a class="code hl_function" href="model__shared_8c.html#a011a07f2c9ef46e41b9ba88dfbbafd92">Mod_Print_f</a>, <span class="stringliteral">&quot;prints a list of loaded models&quot;</span>);</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;modelprecache&quot;</span>, <a class="code hl_function" href="model__shared_8c.html#aee760e8b76be876398bee57d6b973c12">Mod_Precache_f</a>, <span class="stringliteral">&quot;load a model&quot;</span>);</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;modeldecompile&quot;</span>, <a class="code hl_function" href="model__shared_8c.html#aab4dd6a29cd4b0b1fb521bc4a067a45c">Mod_Decompile_f</a>, <span class="stringliteral">&quot;exports a model in several formats for editing purposes&quot;</span>);</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;mod_generatelightmaps&quot;</span>, <a class="code hl_function" href="model__shared_8c.html#a4eaa08a8f4735ab687cf8856faaa5cec">Mod_GenerateLightmaps_f</a>, <span class="stringliteral">&quot;rebuilds lighting on current worldmodel&quot;</span>);</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>}</div>
</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="foldopen" id="foldopen00206" data-start="{" data-end="}">
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ad3ef7e9c8dc2cb1a2156d13b08d5ecec">  206</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#ad3ef7e9c8dc2cb1a2156d13b08d5ecec">Mod_RenderInit</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>{</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    <a class="code hl_function" href="r__modules_8c.html#a7f982eee49a26b26f015596ac96edea0">R_RegisterModule</a>(<span class="stringliteral">&quot;Models&quot;</span>, <a class="code hl_function" href="model__shared_8c.html#aa1289b05ae97fb1c4089173f2e38ebd9">mod_start</a>, <a class="code hl_function" href="model__shared_8c.html#aa1a590e584125316a8e58ba42954d527">mod_shutdown</a>, <a class="code hl_function" href="model__shared_8c.html#a321b1980cf168303fb8e38f3676a8f41">mod_newmap</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>}</div>
</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="foldopen" id="foldopen00211" data-start="{" data-end="}">
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ab7bdd43d79cd365c41dc0903c8d3da9f">  211</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#ab7bdd43d79cd365c41dc0903c8d3da9f">Mod_UnloadModel</a> (<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod)</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>{</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> used;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *parentmodel;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span> </div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a67a57130da6bf0ad0eb133c0b8bc7642">developer_loading</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;unloading model %s\n&quot;</span>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span> </div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>));</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    parentmodel = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ac4d9fbdd0eee8dd6822be206eb245cc3">parentmodel</a>;</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    used = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">used</a>;</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>    <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>)</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>    {</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>        <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a85cf7a011550b759899f963c1f68c98b">data_element3i_indexbuffer</a> &amp;&amp; !mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a85cf7a011550b759899f963c1f68c98b">data_element3i_indexbuffer</a>-&gt;<a class="code hl_variable" href="structr__meshbuffer__t.html#aa3e0e0f5c67b56d5589a8a183641c7cf">isdynamic</a>)</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>            <a class="code hl_function" href="gl__backend_8c.html#aaaba6ef1e8b54d0694de07639072286d">R_Mesh_DestroyMeshBuffer</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a85cf7a011550b759899f963c1f68c98b">data_element3i_indexbuffer</a>);</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a85cf7a011550b759899f963c1f68c98b">data_element3i_indexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af47d08768f0e0a846c272a9a8d443d03">data_element3s_indexbuffer</a> &amp;&amp; !mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af47d08768f0e0a846c272a9a8d443d03">data_element3s_indexbuffer</a>-&gt;<a class="code hl_variable" href="structr__meshbuffer__t.html#aa3e0e0f5c67b56d5589a8a183641c7cf">isdynamic</a>)</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>            <a class="code hl_function" href="gl__backend_8c.html#aaaba6ef1e8b54d0694de07639072286d">R_Mesh_DestroyMeshBuffer</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af47d08768f0e0a846c272a9a8d443d03">data_element3s_indexbuffer</a>);</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af47d08768f0e0a846c272a9a8d443d03">data_element3s_indexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>        <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> &amp;&amp; !mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a>-&gt;<a class="code hl_variable" href="structr__meshbuffer__t.html#aa3e0e0f5c67b56d5589a8a183641c7cf">isdynamic</a>)</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>            <a class="code hl_function" href="gl__backend_8c.html#aaaba6ef1e8b54d0694de07639072286d">R_Mesh_DestroyMeshBuffer</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a>);</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a0064f2925b91731163e286f6ff0f5a76">data_svector3f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7fc323b763071fa72a24bd51b88e1f0c">data_tvector3f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a1fc3a10501c13b8da40b66116d8818b7">data_normal3f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7767026390ac39c88f7ce4d6f6432bfd">data_texcoordtexture2f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#acc34f19933b25ec4138101d2da7c0402">data_texcoordlightmap2f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a14978807f299ff4eb08fbc95f12f4390">data_lightmapcolor4f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7acee012733eb5e093982690193053ed">data_skeletalindex4ub_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ae20f7ffe94f47df81dac465ec2888d2f">data_skeletalweight4ub_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    }</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    <span class="comment">// free textures/memory attached to the model</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    <a class="code hl_function" href="gl__textures_8c.html#a114f2477dc7b969704fce4025b2a4b1b">R_FreeTexturePool</a>(&amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a6d207a080d8ca69eecb6ca4ceb4cd98b">texturepool</a>);</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>    <a class="code hl_define" href="zone_8h.html#a07374e605d328a588d2d738a56608ead">Mem_FreePool</a>(&amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>);</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    <span class="comment">// clear the struct to make it available</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(mod, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structmodel__t.html">model_t</a>));</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <span class="comment">// restore the fields we want to preserve</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keyword">sizeof</span>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>));</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ac4d9fbdd0eee8dd6822be206eb245cc3">parentmodel</a> = parentmodel;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">used</a> = used;</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>}</div>
</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="foldopen" id="foldopen00255" data-start="{" data-end="}">
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a364e4fc7a1d2e7bff3e49e09e4d6a719">  255</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a364e4fc7a1d2e7bff3e49e09e4d6a719">R_Model_Null_Draw</a>(<a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *ent)</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>{</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>}</div>
</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span> </div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span> </div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno"><a class="line" href="model__shared_8c.html#af79386e486e807d61ba39e57380fe868">  261</a></span><span class="keyword">typedef</span> <a class="code hl_function" href="glquake_8h.html#afa45fc0640b31002c1792c59eb062c59">void</a> (*<a class="code hl_typedef" href="model__shared_8c.html#af79386e486e807d61ba39e57380fe868">mod_framegroupify_parsegroups_t</a>) (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keywordtype">int</span> start, <span class="keywordtype">int</span> len, <span class="keywordtype">float</span> fps, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> loop, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keywordtype">void</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pass</a>);</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span> </div>
<div class="foldopen" id="foldopen00263" data-start="{" data-end="}">
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ad45bc36f36df1333ab57922a9a684bd3">  263</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_function" href="model__shared_8c.html#ad45bc36f36df1333ab57922a9a684bd3">Mod_FrameGroupify_ParseGroups</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>, <a class="code hl_typedef" href="model__shared_8c.html#af79386e486e807d61ba39e57380fe868">mod_framegroupify_parsegroups_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cb</a>, <span class="keywordtype">void</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pass</a>)</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>{</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a>;</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    <span class="keywordtype">int</span> start, len;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    <span class="keywordtype">float</span> fps;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> loop;</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[64];</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span> </div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a> = <a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>;</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    <span class="keywordflow">while</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a>)</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    {</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>        <span class="comment">// an anim scene!</span></div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>        <span class="comment">// REQUIRED: fetch start</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        <a class="code hl_function" href="common_8c.html#acc99aea15e3d929ef5cfac822ee7040d">COM_ParseToken_Simple</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a>)</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>            <span class="keywordflow">break</span>; <span class="comment">// end of file</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;\n&quot;</span>))</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>            <span class="keywordflow">continue</span>; <span class="comment">// empty line</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>        start = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>);</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span> </div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>        <span class="comment">// REQUIRED: fetch length</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        <a class="code hl_function" href="common_8c.html#acc99aea15e3d929ef5cfac822ee7040d">COM_ParseToken_Simple</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a> || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;\n&quot;</span>))</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        {</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;framegroups file: missing number of frames\n&quot;</span>);</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        }</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        len = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>);</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> </div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>        <span class="comment">// OPTIONAL args start</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        <a class="code hl_function" href="common_8c.html#acc99aea15e3d929ef5cfac822ee7040d">COM_ParseToken_Simple</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        <span class="comment">// OPTIONAL: fetch fps</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>        fps = 20;</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;\n&quot;</span>))</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>        {</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>            fps = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>);</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>            <a class="code hl_function" href="common_8c.html#acc99aea15e3d929ef5cfac822ee7040d">COM_ParseToken_Simple</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>        }</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span> </div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        <span class="comment">// OPTIONAL: fetch loopflag</span></div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>        loop = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;\n&quot;</span>))</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>        {</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>            loop = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>) != 0);</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>            <a class="code hl_function" href="common_8c.html#acc99aea15e3d929ef5cfac822ee7040d">COM_ParseToken_Simple</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>        }</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span> </div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        <span class="comment">// OPTIONAL: fetch name</span></div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>        <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[0] = 0;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;\n&quot;</span>))</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        {</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>            <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>));</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>            <a class="code hl_function" href="common_8c.html#acc99aea15e3d929ef5cfac822ee7040d">COM_ParseToken_Simple</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        }</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>        <span class="comment">// OPTIONAL: remaining unsupported tokens (eat them)</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        <span class="keywordflow">while</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;\n&quot;</span>))</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>            <a class="code hl_function" href="common_8c.html#acc99aea15e3d929ef5cfac822ee7040d">COM_ParseToken_Simple</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufptr</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        <span class="comment">//Con_Printf(&quot;data: %d %d %d %f %d (%s)\n&quot;, i, start, len, fps, loop, name);</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span> </div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cb</a>)</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cb</a>(<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, start, len, fps, loop, (<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[0] ? <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a> : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pass</a>);</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>        ++<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    }</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>}</div>
</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="foldopen" id="foldopen00336" data-start="{" data-end="}">
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a7febcbf270f44712591b217f88204764">  336</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a7febcbf270f44712591b217f88204764">Mod_FrameGroupify_ParseGroups_Store</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keywordtype">int</span> start, <span class="keywordtype">int</span> len, <span class="keywordtype">float</span> fps, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> loop, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keywordtype">void</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pass</a>)</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>{</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod = (<a class="code hl_struct" href="structmodel__t.html">model_t</a> *) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pass</a>;</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    <a class="code hl_struct" href="structanimscene__t.html">animscene_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">anim</a> = &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>)</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>        <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">anim</a>-&gt;name, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">anim</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].name));</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>        <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">anim</a>-&gt;name, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">anim</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].name), <span class="stringliteral">&quot;groupified_%d_anim&quot;</span>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">anim</a>-&gt;firstframe = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0, start, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a826df8b699b02cf7e338bd939779c80c">num_poses</a> - 1);</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">anim</a>-&gt;framecount = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(1, len, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a826df8b699b02cf7e338bd939779c80c">num_poses</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">anim</a>-&gt;firstframe);</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">anim</a>-&gt;framerate = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(1, fps);</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">anim</a>-&gt;loop = !!loop;</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    <span class="comment">//Con_Printf(&quot;frame group %d is %d %d %f %d\n&quot;, i, start, len, fps, loop);</span></div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>}</div>
</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="foldopen" id="foldopen00351" data-start="{" data-end="}">
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno"><a class="line" href="model__shared_8c.html#af1ea3bed58541715eebdc351ea1b9292">  351</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#af1ea3bed58541715eebdc351ea1b9292">Mod_FrameGroupify</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>)</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>{</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cnt</a>;</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span> </div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <span class="comment">// 0. count</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cnt</a> = <a class="code hl_function" href="model__shared_8c.html#ad45bc36f36df1333ab57922a9a684bd3">Mod_FrameGroupify_ParseGroups</a>(<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    <span class="keywordflow">if</span>(!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cnt</a>)</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    {</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;no scene found in framegroups file, aborting\n&quot;</span>);</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    }</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a9c3577006a252ce407c3b204a05be9e4">numframes</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cnt</a>;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    <span class="comment">// 1. reallocate</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    <span class="comment">// (we do not free the previous animscenes, but model unloading will free the pool owning them, so it&#39;s okay)</span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a> = (<a class="code hl_struct" href="structanimscene__t.html">animscene_t</a> *) <a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structanimscene__t.html">animscene_t</a>) * mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a9c3577006a252ce407c3b204a05be9e4">numframes</a>);</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span> </div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    <span class="comment">// 2. parse</span></div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    <a class="code hl_function" href="model__shared_8c.html#ad45bc36f36df1333ab57922a9a684bd3">Mod_FrameGroupify_ParseGroups</a>(<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>, <a class="code hl_function" href="model__shared_8c.html#a7febcbf270f44712591b217f88204764">Mod_FrameGroupify_ParseGroups_Store</a>, mod);</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>}</div>
</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span> </div>
<div class="foldopen" id="foldopen00372" data-start="{" data-end="}">
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a4dfd5430092c30e91579e94abe395547">  372</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a4dfd5430092c30e91579e94abe395547">Mod_FindPotentialDeforms</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod)</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>{</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    <a class="code hl_struct" href="structtexture__t.html">texture_t</a> *<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>;</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#afe7dbcb7f10ae5fe91bd0cb6dcbdefaf">wantnormals</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a39476ca3d4067da3024e2e52860baa9c">wanttangents</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#abbf1bba30697f7bf6cfb28c79adfefe6">num_textures</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    {</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ac30e13239504da645c5e835eef8f559e">data_textures</a> + <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass-&gt;tcgen.tcgen == <a class="code hl_enumvalue" href="r__qshader_8h.html#a9c334491e333d0667b0d7b9a1620fbabac05a81197f54f77e3a6ad88280c0746f">Q3TCGEN_ENVIRONMENT</a>)</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>            mod-&gt;<a class="code hl_variable" href="structmodel__t.html#afe7dbcb7f10ae5fe91bd0cb6dcbdefaf">wantnormals</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass-&gt;tcgen.tcgen == <a class="code hl_enumvalue" href="r__qshader_8h.html#a9c334491e333d0667b0d7b9a1620fbabac05a81197f54f77e3a6ad88280c0746f">Q3TCGEN_ENVIRONMENT</a>)</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>            mod-&gt;<a class="code hl_variable" href="structmodel__t.html#afe7dbcb7f10ae5fe91bd0cb6dcbdefaf">wantnormals</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a46c099e9db2adbf9f39f399a83948c1d">Q3MAXDEFORMS</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>        {</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;deforms[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].deform == <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa2c88373243199cdc8ab4a67be0e9d96e">Q3DEFORM_AUTOSPRITE</a>)</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>            {</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>                mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a39476ca3d4067da3024e2e52860baa9c">wanttangents</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>                mod-&gt;<a class="code hl_variable" href="structmodel__t.html#afe7dbcb7f10ae5fe91bd0cb6dcbdefaf">wantnormals</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>            }</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;deforms[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].deform != <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaab1a1c15957e617b5a85acaa18e1e1c18">Q3DEFORM_NONE</a>)</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>                mod-&gt;<a class="code hl_variable" href="structmodel__t.html#afe7dbcb7f10ae5fe91bd0cb6dcbdefaf">wantnormals</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        }</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    }</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>}</div>
</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span> </div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span><span class="comment">/*</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span><span class="comment">==================</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span><span class="comment">Mod_LoadModel</span></div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span><span class="comment"></span> </div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span><span class="comment">Loads a model</span></div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span><span class="comment">==================</span></div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen00406" data-start="{" data-end="}">
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ac8a3648cf663195b29236e4c9034e57d">  406</a></span><a class="code hl_struct" href="structmodel__t.html">model_t</a> *<a class="code hl_function" href="model__shared_8c.html#ac8a3648cf663195b29236e4c9034e57d">Mod_LoadModel</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">crash</a>, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">checkdisk</a>)</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>{</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crc;</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <span class="keywordtype">void</span> *<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>;</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    <a class="code hl_typedef" href="fs_8h.html#a5bcbce6d6c29888adf596671d6acd44b">fs_offset_t</a> filesize = 0;</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>[1024];</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span> </div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">used</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span> </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>    <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0] == <span class="charliteral">&#39;*&#39;</span>) <span class="comment">// submodel</span></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>        <span class="keywordflow">return</span> mod;</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <span class="stringliteral">&quot;null&quot;</span>))</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    {</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        <span class="keywordflow">if</span>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a>)</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>            <span class="keywordflow">return</span> mod;</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span> </div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>        <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a> || mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>)</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>            <a class="code hl_function" href="model__shared_8c.html#ab7bdd43d79cd365c41dc0903c8d3da9f">Mod_UnloadModel</a>(mod);</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span> </div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a67a57130da6bf0ad0eb133c0b8bc7642">developer_loading</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;loading model %s\n&quot;</span>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>);</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span> </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">used</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a8edb4ba664126b79bff8d23eaa8133c3">crc</a> = (<span class="keywordtype">unsigned</span> <a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)-1;</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span> </div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>);</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>);</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a90f05444c8d96adeaec3beffe4fed932">yawmins</a>);</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a3324a3bec6a016ede4ee308695500bf9">yawmaxs</a>);</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a2c2034d2a113cadab48c388065c65335">rotatedmins</a>);</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a42b76bd94570c0130a33e4dae79f03e5">rotatedmaxs</a>);</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span> </div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#abbf92c31375e570dba8224c43a8a5617">modeldatatypestring</a> = <span class="stringliteral">&quot;null&quot;</span>;</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a0fb268c443d4c9dd629e3af746878fec">type</a> = <a class="code hl_enumvalue" href="model__shared_8h.html#ae8881adaf7dff7ff012ef751075434f4a5399b3f76f42a4a0855f65069c711abc">mod_null</a>;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4ad54aab83aca1c9ec564054f4019609">Draw</a> = <a class="code hl_function" href="model__shared_8c.html#a364e4fc7a1d2e7bff3e49e09e4d6a719">R_Model_Null_Draw</a>;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a9c3577006a252ce407c3b204a05be9e4">numframes</a> = 2;</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a092a26ea0346fc90b6bc82a33289ed82">numskins</a> = 1;</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span> </div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>        <span class="comment">// no fatal errors occurred, so this model is ready to use.</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span> </div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>        <span class="keywordflow">return</span> mod;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>    }</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span> </div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>    crc = 0;</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    <a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span> </div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    <span class="comment">// even if the model is loaded it still may need reloading...</span></div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span> </div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>    <span class="comment">// if it is not loaded or checkdisk is true we need to calculate the crc</span></div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    <span class="keywordflow">if</span> (!mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">checkdisk</a>)</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    {</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">checkdisk</a> &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a>)</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>            <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;checking model %s\n&quot;</span>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>);</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>        <a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a> = <a class="code hl_function" href="fs_8c.html#a46b9b5ad3cc14f77ae63016505163128">FS_LoadFile</a> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, <span class="keyword">false</span>, &amp;filesize);</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>)</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>        {</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>            crc = <a class="code hl_function" href="com__crc16_8c.html#aa9ba811c20537ebd01898928be2de439">CRC_Block</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>, filesize);</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>            <span class="comment">// we need to reload the model if the crc does not match</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>            <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a8edb4ba664126b79bff8d23eaa8133c3">crc</a> != crc)</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>                mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>        }</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>    }</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span> </div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>    <span class="comment">// if the model is already loaded and checks passed, just return</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a>)</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>    {</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>)</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>);</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>        <span class="keywordflow">return</span> mod;</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    }</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span> </div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a67a57130da6bf0ad0eb133c0b8bc7642">developer_loading</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;loading model %s\n&quot;</span>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>);</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    </div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <a class="code hl_function" href="cl__screen_8c.html#a867f4d465569723a04e4533559ad9698">SCR_PushLoadingScreen</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, 1);</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span> </div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>    <span class="comment">// LadyHavoc: unload the existing model in this slot (if there is one)</span></div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>    <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a> || mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>)</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>        <a class="code hl_function" href="model__shared_8c.html#ab7bdd43d79cd365c41dc0903c8d3da9f">Mod_UnloadModel</a>(mod);</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span> </div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>    <span class="comment">// load the model</span></div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">used</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a8edb4ba664126b79bff8d23eaa8133c3">crc</a> = crc;</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>    <span class="comment">// errors can prevent the corresponding mod-&gt;loaded = true;</span></div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span> </div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    <span class="comment">// default lightmap scale</span></div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a77a8ed6f65207e003b1675a05b1bfc5e">lightmapscale</a> = 1;</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span> </div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    <span class="comment">// default model radius and bounding box (mainly for missing models)</span></div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a> = 16;</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>, -mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>, -mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>, -mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>);</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>);</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a90f05444c8d96adeaec3beffe4fed932">yawmins</a>, -mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>, -mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>, -mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>);</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a3324a3bec6a016ede4ee308695500bf9">yawmaxs</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>);</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a2c2034d2a113cadab48c388065c65335">rotatedmins</a>, -mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>, -mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>, -mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>);</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a42b76bd94570c0130a33e4dae79f03e5">rotatedmaxs</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a>);</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span> </div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="model__shared_8c.html#aad0500eca89bdf3928091895b0ae35e3">q3shaders_mem</a>)</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>    {</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>        <span class="comment">// load q3 shaders for the first time, or after a level change</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>        <a class="code hl_function" href="model__shared_8c.html#ad71d07321aafc07206c4853276ed4a69">Mod_LoadQ3Shaders</a>();</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>    }</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span> </div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>)</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    {</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ext</a> = <a class="code hl_function" href="fs_8c.html#a03ffae625c1150af52b17342c57425ac">FS_FileExtension</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>);  </div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufend</a> = (<span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a> + filesize;</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        <span class="comment">// all models use memory, so allocate a memory pool</span></div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a> = <a class="code hl_define" href="zone_8h.html#a7da6ffdd01b3d31cb7c89e68fad87d0d">Mem_AllocPool</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>        <span class="comment">// We need to have a reference to the base model in case we&#39;re parsing submodels</span></div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a> = mod;</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span> </div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>        <span class="comment">// Call the appropriate loader. Try matching magic bytes.</span></div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="model__shared_8c.html#a603c933678c63e166ac16b9ac3de3f58">loader</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structmodloader__t.html#a24e17d69b4c85a828dc78bec28664a94">Load</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>        {</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>            <span class="comment">// Headerless formats can just load based on extension. Otherwise match the magic string.</span></div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>            <span class="keywordflow">if</span>((<a class="code hl_variable" href="model__shared_8c.html#a603c933678c63e166ac16b9ac3de3f58">loader</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].extension &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ext</a>, <a class="code hl_variable" href="model__shared_8c.html#a603c933678c63e166ac16b9ac3de3f58">loader</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].extension) &amp;&amp; !<a class="code hl_variable" href="model__shared_8c.html#a603c933678c63e166ac16b9ac3de3f58">loader</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].header) ||</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>               (<a class="code hl_variable" href="model__shared_8c.html#a603c933678c63e166ac16b9ac3de3f58">loader</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].header &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcmp</a>(<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>, <a class="code hl_variable" href="model__shared_8c.html#a603c933678c63e166ac16b9ac3de3f58">loader</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].header, <a class="code hl_variable" href="model__shared_8c.html#a603c933678c63e166ac16b9ac3de3f58">loader</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].headersize)))</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>            {</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>                <span class="comment">// Matched. Load it.</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>                <a class="code hl_variable" href="model__shared_8c.html#a603c933678c63e166ac16b9ac3de3f58">loader</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structmodloader__t.html#a24e17d69b4c85a828dc78bec28664a94">Load</a>(mod, <a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufend</a>);</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>                <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>);</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span> </div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>                <a class="code hl_function" href="model__shared_8c.html#a4dfd5430092c30e91579e94abe395547">Mod_FindPotentialDeforms</a>(mod);</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span> </div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>                <a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a> = <a class="code hl_function" href="fs_8c.html#a46b9b5ad3cc14f77ae63016505163128">FS_LoadFile</a>(<a class="code hl_function" href="common_8c.html#a4a8220fa88226bf9cf39b12a051a20d7">va</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>), <span class="stringliteral">&quot;%s.framegroups&quot;</span>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>), <a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, <span class="keyword">false</span>, &amp;filesize);</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>                <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>)</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>                {</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>                    <a class="code hl_function" href="model__shared_8c.html#af1ea3bed58541715eebdc351ea1b9292">Mod_FrameGroupify</a>(mod, (<span class="keyword">const</span> <span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>);</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>                    <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>);</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>                }</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span> </div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>                <a class="code hl_function" href="model__shared_8c.html#af5bb8e6dccd0096a95cca1db54d8cdc7">Mod_SetDrawSkyAndWater</a>(mod);</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>                <a class="code hl_function" href="model__shared_8c.html#a7c7a5f1ce32faf220d25380eb24bd1ad">Mod_BuildVBOs</a>();</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>            }</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>        }</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>        <span class="keywordflow">if</span>(!<a class="code hl_variable" href="model__shared_8c.html#a603c933678c63e166ac16b9ac3de3f58">loader</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].Load)</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<a class="code hl_define" href="console_8h.html#ae151ed35a905aff75d5f5dc32cd965bb">CON_ERROR</a> <span class="stringliteral">&quot;Mod_LoadModel: model \&quot;%s\&quot; is of unknown/unsupported type\n&quot;</span>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>);</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    }</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">crash</a>)</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>        <span class="comment">// LadyHavoc: Sys_Error was *ANNOYING*</span></div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a> (<a class="code hl_define" href="console_8h.html#ae151ed35a905aff75d5f5dc32cd965bb">CON_ERROR</a> <span class="stringliteral">&quot;Mod_LoadModel: %s not found\n&quot;</span>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>);</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span> </div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    <span class="comment">// no fatal errors occurred, so this model is ready to use.</span></div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span> </div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <a class="code hl_function" href="cl__screen_8c.html#a5baf9557078472ea02b5e75f5ccb6bb4">SCR_PopLoadingScreen</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span> </div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    <span class="keywordflow">return</span> mod;</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>}</div>
</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span> </div>
<div class="foldopen" id="foldopen00564" data-start="{" data-end="}">
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a086413ffb031836ef17e4ca586422fc6">  564</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a086413ffb031836ef17e4ca586422fc6">Mod_ClearUsed</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>{</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a> = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>);</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod;</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        <span class="keywordflow">if</span> ((mod = (<a class="code hl_struct" href="structmodel__t.html">model_t</a>*) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0])</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>            mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">used</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>}</div>
</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span> </div>
<div class="foldopen" id="foldopen00574" data-start="{" data-end="}">
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a555e39411377f91b5a715673fc7d58c3">  574</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a555e39411377f91b5a715673fc7d58c3">Mod_PurgeUnused</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>{</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a> = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>);</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod;</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>    {</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>        <span class="keywordflow">if</span> ((mod = (<a class="code hl_struct" href="structmodel__t.html">model_t</a>*) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0] &amp;&amp; !mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">used</a>)</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>        {</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>            <a class="code hl_function" href="model__shared_8c.html#ab7bdd43d79cd365c41dc0903c8d3da9f">Mod_UnloadModel</a>(mod);</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>            <a class="code hl_function" href="zone_8c.html#a6809e6e38abd59c5583dc9b83843a7ee">Mem_ExpandableArray_FreeRecord</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>, mod);</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>        }</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>    }</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>}</div>
</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span> </div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span><span class="comment">/*</span></div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span><span class="comment">==================</span></div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span><span class="comment">Mod_FindName</span></div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span><span class="comment"></span> </div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span><span class="comment">==================</span></div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen00595" data-start="{" data-end="}">
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a9b0e709a676fe0bd42548fcf0a45042e">  595</a></span><a class="code hl_struct" href="structmodel__t.html">model_t</a> *<a class="code hl_function" href="model__shared_8c.html#a9b0e709a676fe0bd42548fcf0a45042e">Mod_FindName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parentname</a>)</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>{</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a>;</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod;</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span> </div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parentname</a>)</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parentname</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span> </div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a> = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>);</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span> </div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[0])</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>        <a class="code hl_function" href="host_8c.html#a6207a721d43b13be42aa21a2bb4d3350">Host_Error</a> (<span class="stringliteral">&quot;Mod_ForName: empty name&quot;</span>);</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span> </div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>    <span class="comment">// search the currently loaded models</span></div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>    {</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>        <span class="keywordflow">if</span> ((mod = (<a class="code hl_struct" href="structmodel__t.html">model_t</a>*) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0] &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>) &amp;&amp; ((!mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ac4d9fbdd0eee8dd6822be206eb245cc3">parentmodel</a> &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parentname</a>[0]) || (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ac4d9fbdd0eee8dd6822be206eb245cc3">parentmodel</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parentname</a>[0] &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ac4d9fbdd0eee8dd6822be206eb245cc3">parentmodel</a>-&gt;name, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parentname</a>))))</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>        {</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>            mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">used</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>            <span class="keywordflow">return</span> mod;</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>        }</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    }</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span> </div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    <span class="comment">// no match found, create a new one</span></div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    mod = (<a class="code hl_struct" href="structmodel__t.html">model_t</a> *) <a class="code hl_function" href="zone_8c.html#a6e8351ce990cc9c3c7eb1c6ac8c91921">Mem_ExpandableArray_AllocRecord</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>);</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keyword">sizeof</span>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>));</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parentname</a>[0])</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ac4d9fbdd0eee8dd6822be206eb245cc3">parentmodel</a> = <a class="code hl_function" href="model__shared_8c.html#a9b0e709a676fe0bd42548fcf0a45042e">Mod_FindName</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parentname</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ac4d9fbdd0eee8dd6822be206eb245cc3">parentmodel</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">used</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="keywordflow">return</span> mod;</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>}</div>
</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span> </div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span><span class="keyword">extern</span> <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="model__shared_8c.html#a1cffd3fe0d4f339cbc89948a2c405984">vid_opened</a>;</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span> </div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span><span class="comment">/*</span></div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span><span class="comment">==================</span></div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span><span class="comment">Mod_ForName</span></div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span><span class="comment"></span> </div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span><span class="comment">Loads in a model for the given name</span></div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span><span class="comment">==================</span></div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen00640" data-start="{" data-end="}">
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a3e102ef2a7eaa95f89ea4fa0f518b7c7">  640</a></span><a class="code hl_struct" href="structmodel__t.html">model_t</a> *<a class="code hl_function" href="model__shared_8c.html#a3e102ef2a7eaa95f89ea4fa0f518b7c7">Mod_ForName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">crash</a>, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">checkdisk</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parentname</a>)</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>{</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *model;</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span> </div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    <span class="comment">// FIXME: So we don&#39;t crash if a server is started early.</span></div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    <span class="keywordflow">if</span>(!<a class="code hl_variable" href="model__shared_8c.html#a1cffd3fe0d4f339cbc89948a2c405984">vid_opened</a>)</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>        <a class="code hl_function" href="cl__main_8c.html#a6dddf897835e844872c2f3c9f97117f1">CL_StartVideo</a>();</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span> </div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    model = <a class="code hl_function" href="model__shared_8c.html#a9b0e709a676fe0bd42548fcf0a45042e">Mod_FindName</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parentname</a>);</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    <span class="keywordflow">if</span> (!model-&gt;<a class="code hl_variable" href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">loaded</a> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">checkdisk</a>)</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>        <a class="code hl_function" href="model__shared_8c.html#ac8a3648cf663195b29236e4c9034e57d">Mod_LoadModel</a>(model, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">crash</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">checkdisk</a>);</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    <span class="keywordflow">return</span> model;</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>}</div>
</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span> </div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span><span class="comment">/*</span></div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span><span class="comment">==================</span></div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span><span class="comment">Mod_Reload</span></div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span><span class="comment"></span> </div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span><span class="comment">Reloads all models if they have changed</span></div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span><span class="comment">==================</span></div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen00661" data-start="{" data-end="}">
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a0260a505a0b40caa6601b38d4aea367d">  661</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a0260a505a0b40caa6601b38d4aea367d">Mod_Reload</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>{</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>;</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a> = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>);</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod;</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span> </div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    <a class="code hl_function" href="cl__screen_8c.html#a867f4d465569723a04e4533559ad9698">SCR_PushLoadingScreen</a>(<span class="stringliteral">&quot;Reloading models&quot;</span>, 1.0);</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a> = 0;</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>        <span class="keywordflow">if</span> ((mod = (<a class="code hl_struct" href="structmodel__t.html">model_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0] &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0] != <span class="charliteral">&#39;*&#39;</span> &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">used</a>)</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>            ++<a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>;</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>        <span class="keywordflow">if</span> ((mod = (<a class="code hl_struct" href="structmodel__t.html">model_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0] &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0] != <span class="charliteral">&#39;*&#39;</span> &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">used</a>)</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>        {</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>            <a class="code hl_function" href="cl__screen_8c.html#a867f4d465569723a04e4533559ad9698">SCR_PushLoadingScreen</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, 1.0 / <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>);</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>            <a class="code hl_function" href="model__shared_8c.html#ac8a3648cf663195b29236e4c9034e57d">Mod_LoadModel</a>(mod, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>            <a class="code hl_function" href="cl__screen_8c.html#a5baf9557078472ea02b5e75f5ccb6bb4">SCR_PopLoadingScreen</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        }</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    <a class="code hl_function" href="cl__screen_8c.html#a5baf9557078472ea02b5e75f5ccb6bb4">SCR_PopLoadingScreen</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>}</div>
</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span> </div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aa377d967d6424fe03ae7be9ce043d965">  682</a></span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="model__shared_8c.html#aa377d967d6424fe03ae7be9ce043d965">mod_base</a>;</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span> </div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span> </div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span><span class="comment">//=============================================================================</span></div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span> </div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span><span class="comment">/*</span></div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span><span class="comment">================</span></div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span><span class="comment">Mod_Print</span></div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span><span class="comment">================</span></div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen00692" data-start="{" data-end="}">
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a011a07f2c9ef46e41b9ba88dfbbafd92">  692</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a011a07f2c9ef46e41b9ba88dfbbafd92">Mod_Print_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>{</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a> = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>);</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod;</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span> </div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>    <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Loaded models:\n&quot;</span>);</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nummodels</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>    {</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>        <span class="keywordflow">if</span> ((mod = (<a class="code hl_struct" href="structmodel__t.html">model_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)) &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0] &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>[0] != <span class="charliteral">&#39;*&#39;</span>)</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>        {</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>            <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a12ae1e03d70e00f9b3ba4a11a2314e2e">numsubmodels</a>)</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>                <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;%4iK %s (%i submodels)\n&quot;</span>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a> ? (<span class="keywordtype">int</span>)((mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>-&gt;totalsize + 1023) / 1024) : 0, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a12ae1e03d70e00f9b3ba4a11a2314e2e">numsubmodels</a>);</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>                <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;%4iK %s\n&quot;</span>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a> ? (<span class="keywordtype">int</span>)((mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>-&gt;totalsize + 1023) / 1024) : 0, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>);</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>        }</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    }</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>}</div>
</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span> </div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span><span class="comment">/*</span></div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span><span class="comment">================</span></div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span><span class="comment">Mod_Precache</span></div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span><span class="comment">================</span></div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen00716" data-start="{" data-end="}">
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aee760e8b76be876398bee57d6b973c12">  716</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aee760e8b76be876398bee57d6b973c12">Mod_Precache_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>{</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) == 2)</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>        <a class="code hl_function" href="model__shared_8c.html#a3e102ef2a7eaa95f89ea4fa0f518b7c7">Mod_ForName</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="keyword">false</span>, <span class="keyword">true</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1)[0] == <span class="charliteral">&#39;*&#39;</span> ? <a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#ab718ddda1887c1678878405c006ce501">model_name</a>[1] : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;usage: modelprecache &lt;filename&gt;\n&quot;</span>);</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>}</div>
</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span> </div>
<div class="foldopen" id="foldopen00724" data-start="{" data-end="}">
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a5afed934d65bdd22c1a19bc66aa0db1d">  724</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="model__shared_8c.html#a5afed934d65bdd22c1a19bc66aa0db1d">Mod_BuildVertexRemapTableFromElements</a>(<span class="keywordtype">int</span> numelements, <span class="keyword">const</span> <span class="keywordtype">int</span> *elements, <span class="keywordtype">int</span> numvertices, <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">remapvertices</a>)</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>{</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>;</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *used;</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>    used = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, numvertices);</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(used, 0, numvertices);</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numelements;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>        used[elements[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = 1;</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numvertices;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">remapvertices</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = used[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] ? <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>++ : -1;</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>    <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(used);</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>;</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>}</div>
</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span> </div>
<div class="foldopen" id="foldopen00738" data-start="{" data-end="}">
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ac1055bb841510ad036df4adce4146d85">  738</a></span><a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_function" href="model__shared_8c.html#ac1055bb841510ad036df4adce4146d85">Mod_ValidateElements</a>(<span class="keywordtype">int</span> *element3i, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *element3s, <span class="keywordtype">int</span> numtriangles, <span class="keywordtype">int</span> firstvertex, <span class="keywordtype">int</span> numvertices, <span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <span class="keywordtype">int</span> fileline)</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>{</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a> = firstvertex, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">last</a> = <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a> + numvertices - 1, numelements = numtriangles * 3;</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidintcount</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidintexample</a> = 0;</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidshortcount</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidshortexample</a> = 0;</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidmismatchcount</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidmismatchexample</a> = 0;</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>    <span class="keywordflow">if</span> (element3i)</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>    {</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numelements; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>        {</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>            <span class="keywordflow">if</span> (element3i[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a> || element3i[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">last</a>)</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>            {</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidintcount</a>++;</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidintexample</a> = <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>            }</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>        }</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>    }</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>    <span class="keywordflow">if</span> (element3s)</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>    {</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numelements; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>        {</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>            <span class="keywordflow">if</span> (element3s[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a> || element3s[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">last</a>)</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>            {</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidintcount</a>++;</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidintexample</a> = <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>            }</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>        }</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>    }</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>    <span class="keywordflow">if</span> (element3i &amp;&amp; element3s)</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>    {</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numelements; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>        {</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>            <span class="keywordflow">if</span> (element3s[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] != element3i[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>            {</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidmismatchcount</a>++;</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidmismatchexample</a> = <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>            }</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>        }</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>    }</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidintcount</a> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidshortcount</a> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidmismatchcount</a>)</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>    {</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Mod_ValidateElements(%i, %i, %i, %p, %p) called at %s:%d&quot;</span>, numelements, <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">last</a>, (<span class="keywordtype">void</span> *)element3i, (<span class="keywordtype">void</span> *)element3s, filename, fileline);</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;, %i elements are invalid in element3i (example: element3i[%i] == %i)&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidintcount</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidintexample</a>, element3i ? element3i[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidintexample</a>] : 0);</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;, %i elements are invalid in element3s (example: element3s[%i] == %i)&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidshortcount</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidshortexample</a>, element3s ? element3s[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidshortexample</a>] : 0);</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;, %i elements mismatch between element3i and element3s (example: element3s[%i] is %i and element3i[%i] is %i)&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidmismatchcount</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidmismatchexample</a>, element3s ? element3s[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidmismatchexample</a>] : 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidmismatchexample</a>, element3i ? element3i[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invalidmismatchexample</a>] : 0);</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;.  Please debug the engine code - these elements have been modified to not crash, but nothing more.\n&quot;</span>);</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span> </div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>        <span class="comment">// edit the elements to make them safer, as the driver will crash otherwise</span></div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>        <span class="keywordflow">if</span> (element3i)</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numelements; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>                <span class="keywordflow">if</span> (element3i[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a> || element3i[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">last</a>)</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>                    element3i[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a>;</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>        <span class="keywordflow">if</span> (element3s)</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numelements; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>                <span class="keywordflow">if</span> (element3s[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a> || element3s[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">last</a>)</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>                    element3s[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a>;</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>        <span class="keywordflow">if</span> (element3i &amp;&amp; element3s)</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numelements; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>                <span class="keywordflow">if</span> (element3s[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] != element3i[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>                    element3s[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = element3i[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span> </div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>    }</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>}</div>
</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span> </div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span><span class="comment">// warning: this is an expensive function!</span></div>
<div class="foldopen" id="foldopen00806" data-start="{" data-end="}">
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a37407d4a42c1e522117279e58e7f25db">  806</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a37407d4a42c1e522117279e58e7f25db">Mod_BuildNormals</a>(<span class="keywordtype">int</span> firstvertex, <span class="keywordtype">int</span> numvertices, <span class="keywordtype">int</span> numtriangles, <span class="keyword">const</span> <span class="keywordtype">float</span> *vertex3f, <span class="keyword">const</span> <span class="keywordtype">int</span> *elements, <span class="keywordtype">float</span> *normal3f, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">areaweighting</a>)</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>{</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>;</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">element</a>;</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>    <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vectorNormal</a>;</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">areaNormal</a>[3];</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>    <span class="comment">// clear the vectors</span></div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(normal3f + 3 * firstvertex, 0, numvertices * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>    <span class="comment">// process each vertex of each triangle and accumulate the results</span></div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>    <span class="comment">// use area-averaging, to make triangles with a big area have a bigger</span></div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>    <span class="comment">// weighting on the vertex normal than triangles with a small area</span></div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>    <span class="comment">// to do so, just add the &#39;normals&#39; together (the bigger the area</span></div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>    <span class="comment">// the greater the length of the normal is</span></div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">element</a> = elements;</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numtriangles; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">element</a> += 3)</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>    {</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>        <a class="code hl_define" href="mathlib_8h.html#abd107e00eca870c28df1518302fee3df">TriangleNormal</a>(</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>            vertex3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">element</a>[0] * 3,</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>            vertex3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">element</a>[1] * 3,</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>            vertex3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">element</a>[2] * 3,</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">areaNormal</a></div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>            );</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span> </div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">areaweighting</a>)</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>            <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">areaNormal</a>);</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span> </div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; 3;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>        {</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vectorNormal</a> = normal3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">element</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>] * 3;</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vectorNormal</a>[0] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">areaNormal</a>[0];</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vectorNormal</a>[1] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">areaNormal</a>[1];</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vectorNormal</a>[2] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">areaNormal</a>[2];</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>        }</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>    }</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>    <span class="comment">// and just normalize the accumulated vertex normal in the end</span></div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vectorNormal</a> = normal3f + 3 * firstvertex;</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numvertices; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vectorNormal</a> += 3)</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>        <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vectorNormal</a>);</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>}</div>
</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span> </div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_BuildBumpVectors</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#a85ad3a4f9c2050e5572d2853a1699272">v0</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#a8daddd28bc83f22748eefee4995d7553">v1</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#a1521c81f03b197c775902c4be8f467b8">v2</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc0</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc1</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc2</a>, <span class="keywordtype">float</span> *svector3f, <span class="keywordtype">float</span> *tvector3f, <span class="keywordtype">float</span> *normal3f)</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>{</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tangentcross</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[2];</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>    <span class="comment">// 79 add/sub/negate/multiply (1 cycle), 1 compare (3 cycle?), total cycles not counting load/store/exchange roughly 82 cycles</span></div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    <span class="comment">// 6 add, 28 subtract, 39 multiply, 1 compare, 50% chance of 6 negates</span></div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span> </div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>    <span class="comment">// 6 multiply, 9 subtract</span></div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>    <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(<a class="code hl_variable" href="glquake_8h.html#a8daddd28bc83f22748eefee4995d7553">v1</a>, <a class="code hl_variable" href="glquake_8h.html#a85ad3a4f9c2050e5572d2853a1699272">v0</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>);</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>    <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(<a class="code hl_variable" href="glquake_8h.html#a1521c81f03b197c775902c4be8f467b8">v2</a>, <a class="code hl_variable" href="glquake_8h.html#a85ad3a4f9c2050e5572d2853a1699272">v0</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>);</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>    normal3f[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[2] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[2] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[1];</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>    normal3f[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[2] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[2];</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>    normal3f[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[0];</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>    <span class="comment">// 12 multiply, 10 subtract</span></div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc1</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc0</a>[1];</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc2</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc0</a>[1];</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>    svector3f[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[0];</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>    svector3f[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[1];</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>    svector3f[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[2] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[2];</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc1</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc0</a>[0];</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc2</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc0</a>[0];</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>    tvector3f[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[0];</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>    tvector3f[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[1];</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>    tvector3f[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[2] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[2];</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>    <span class="comment">// 12 multiply, 4 add, 6 subtract</span></div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>    <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> = <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(svector3f, normal3f);</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>    svector3f[0] -= <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> * normal3f[0];</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>    svector3f[1] -= <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> * normal3f[1];</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>    svector3f[2] -= <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> * normal3f[2];</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>    <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> = <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(tvector3f, normal3f);</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>    tvector3f[0] -= <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> * normal3f[0];</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>    tvector3f[1] -= <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> * normal3f[1];</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>    tvector3f[2] -= <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> * normal3f[2];</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>    <span class="comment">// if texture is mapped the wrong way (counterclockwise), the tangents</span></div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>    <span class="comment">// have to be flipped, this is detected by calculating a normal from the</span></div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>    <span class="comment">// two tangents, and seeing if it is opposite the surface normal</span></div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>    <span class="comment">// 9 multiply, 2 add, 3 subtract, 1 compare, 50% chance of: 6 negates</span></div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>    <a class="code hl_define" href="mathlib_8h.html#aa3c5114e57f89ea32ef8f41e00631e44">CrossProduct</a>(tvector3f, svector3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tangentcross</a>);</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tangentcross</a>, normal3f) &lt; 0)</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>    {</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>        <a class="code hl_define" href="mathlib_8h.html#a28f9f1fe5f50e359e016f7e4e04f8cf1">VectorNegate</a>(svector3f, svector3f);</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>        <a class="code hl_define" href="mathlib_8h.html#a28f9f1fe5f50e359e016f7e4e04f8cf1">VectorNegate</a>(tvector3f, tvector3f);</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>    }</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>}</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span> </div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span><span class="comment">// warning: this is a very expensive function!</span></div>
<div class="foldopen" id="foldopen00893" data-start="{" data-end="}">
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aa4c8e5f23a372b474dbf2344bd1af35d">  893</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aa4c8e5f23a372b474dbf2344bd1af35d">Mod_BuildTextureVectorsFromNormals</a>(<span class="keywordtype">int</span> firstvertex, <span class="keywordtype">int</span> numvertices, <span class="keywordtype">int</span> numtriangles, <span class="keyword">const</span> <span class="keywordtype">float</span> *vertex3f, <span class="keyword">const</span> <span class="keywordtype">float</span> *texcoord2f, <span class="keyword">const</span> <span class="keywordtype">float</span> *normal3f, <span class="keyword">const</span> <span class="keywordtype">int</span> *elements, <span class="keywordtype">float</span> *svector3f, <span class="keywordtype">float</span> *tvector3f, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">areaweighting</a>)</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>{</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tnum</a>;</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sdir</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>[3], <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>[3], *svec, *tvec;</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#a85ad3a4f9c2050e5572d2853a1699272">v0</a>, *<a class="code hl_variable" href="glquake_8h.html#a8daddd28bc83f22748eefee4995d7553">v1</a>, *<a class="code hl_variable" href="glquake_8h.html#a1521c81f03b197c775902c4be8f467b8">v2</a>, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc0</a>, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc1</a>, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc2</a>, *<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>;</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tangentcross</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[2];</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>;</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>    <span class="comment">// clear the vectors</span></div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(svector3f + 3 * firstvertex, 0, numvertices * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(tvector3f + 3 * firstvertex, 0, numvertices * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>    <span class="comment">// process each vertex of each triangle and accumulate the results</span></div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tnum</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = elements;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tnum</a> &lt; numtriangles;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tnum</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> += 3)</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>    {</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>        <a class="code hl_variable" href="glquake_8h.html#a85ad3a4f9c2050e5572d2853a1699272">v0</a> = vertex3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[0] * 3;</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>        <a class="code hl_variable" href="glquake_8h.html#a8daddd28bc83f22748eefee4995d7553">v1</a> = vertex3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[1] * 3;</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>        <a class="code hl_variable" href="glquake_8h.html#a1521c81f03b197c775902c4be8f467b8">v2</a> = vertex3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[2] * 3;</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc0</a> = texcoord2f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[0] * 2;</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc1</a> = texcoord2f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[1] * 2;</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc2</a> = texcoord2f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[2] * 2;</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span> </div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>        <span class="comment">// 79 add/sub/negate/multiply (1 cycle), 1 compare (3 cycle?), total cycles not counting load/store/exchange roughly 82 cycles</span></div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>        <span class="comment">// 6 add, 28 subtract, 39 multiply, 1 compare, 50% chance of 6 negates</span></div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span> </div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>        <span class="comment">// calculate the edge directions and surface normal</span></div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>        <span class="comment">// 6 multiply, 9 subtract</span></div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>        <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(<a class="code hl_variable" href="glquake_8h.html#a8daddd28bc83f22748eefee4995d7553">v1</a>, <a class="code hl_variable" href="glquake_8h.html#a85ad3a4f9c2050e5572d2853a1699272">v0</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>);</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>        <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(<a class="code hl_variable" href="glquake_8h.html#a1521c81f03b197c775902c4be8f467b8">v2</a>, <a class="code hl_variable" href="glquake_8h.html#a85ad3a4f9c2050e5572d2853a1699272">v0</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>);</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[2] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[2] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[1];</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[2] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[2];</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[0];</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span> </div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>        <span class="comment">// calculate the tangents</span></div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>        <span class="comment">// 12 multiply, 10 subtract</span></div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc1</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc0</a>[1];</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc2</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc0</a>[1];</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sdir</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[0];</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sdir</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[1];</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sdir</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[2] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[2];</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc1</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc0</a>[0];</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc2</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc0</a>[0];</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[0];</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[1];</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc10</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v20</a>[2] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tc20</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">v10</a>[2];</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span> </div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>        <span class="comment">// if texture is mapped the wrong way (counterclockwise), the tangents</span></div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>        <span class="comment">// have to be flipped, this is detected by calculating a normal from the</span></div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>        <span class="comment">// two tangents, and seeing if it is opposite the surface normal</span></div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>        <span class="comment">// 9 multiply, 2 add, 3 subtract, 1 compare, 50% chance of: 6 negates</span></div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>        <a class="code hl_define" href="mathlib_8h.html#aa3c5114e57f89ea32ef8f41e00631e44">CrossProduct</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tangentcross</a>);</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tangentcross</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>) &lt; 0)</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>        {</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>            <a class="code hl_define" href="mathlib_8h.html#a28f9f1fe5f50e359e016f7e4e04f8cf1">VectorNegate</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sdir</a>);</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>            <a class="code hl_define" href="mathlib_8h.html#a28f9f1fe5f50e359e016f7e4e04f8cf1">VectorNegate</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>);</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>        }</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span> </div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">areaweighting</a>)</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>        {</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>            <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sdir</a>);</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>            <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>);</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>        }</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>        {</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>            <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(svector3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]*3, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sdir</a>, svector3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]*3);</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>            <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(tvector3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]*3, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>, tvector3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]*3);</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>        }</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>    }</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>    <span class="comment">// make the tangents completely perpendicular to the surface normal, and</span></div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>    <span class="comment">// then normalize them</span></div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>    <span class="comment">// 16 assignments, 2 divide, 2 sqrt, 2 negates, 14 adds, 24 multiplies</span></div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, svec = svector3f + 3 * firstvertex, tvec = tvector3f + 3 * firstvertex, <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a> = normal3f + 3 * firstvertex;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numvertices;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++, svec += 3, tvec += 3, <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a> += 3)</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>    {</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> = -<a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(svec, <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>);</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(svec, <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>, <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>, svec);</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>        <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(svec);</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> = -<a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(tvec, <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>);</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(tvec, <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>, <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>, tvec);</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>        <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(tvec);</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>    }</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>}</div>
</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span> </div>
<div class="foldopen" id="foldopen00973" data-start="{" data-end="}">
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a455c3cfb0b7e57f8e4dbe4ee0e8fd37e">  973</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a455c3cfb0b7e57f8e4dbe4ee0e8fd37e">Mod_AllocSurfMesh</a>(<a class="code hl_struct" href="structmempool__t.html">mempool_t</a> *mempool, <span class="keywordtype">int</span> numvertices, <span class="keywordtype">int</span> numtriangles, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmapoffsets</a>, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexcolors</a>)</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>{</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>    <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(mempool, numvertices * (3 + 3 + 3 + 3 + 2 + 2 + (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexcolors</a> ? 4 : 0)) * <span class="keyword">sizeof</span>(<a class="code hl_variable" href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a>) + numvertices * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmapoffsets</a> ? 1 : 0) * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) + numtriangles * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>[3]) + (numvertices &lt;= 65536 ? numtriangles * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>[3]) : 0));</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>    <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> = numvertices;</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>    <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> = numtriangles;</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>)</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>    {</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]) * <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>;</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]) * <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>;</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]) * <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>;</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]) * <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>;</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]) * <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>;</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]) * <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>;</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexcolors</a>)</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>            <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[4]) * <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>;</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmapoffsets</a>)</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>            <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aa554d38b12c33f5c8903d189d5872496">data_lightmapoffsets</a> = (<span class="keywordtype">int</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>;</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>    }</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>)</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>    {</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a> = (<span class="keywordtype">int</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>[3]) * <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>;</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> &lt;= 65536)</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>            <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>[3]) * <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>;</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>    }</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>}</div>
</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span> </div>
<div class="foldopen" id="foldopen01000" data-start="{" data-end="}">
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ac27e894daff472cded24c78edbbfcc1a"> 1000</a></span><a class="code hl_struct" href="structshadowmesh__t.html">shadowmesh_t</a> *<a class="code hl_function" href="model__shared_8c.html#ac27e894daff472cded24c78edbbfcc1a">Mod_ShadowMesh_Alloc</a>(<a class="code hl_struct" href="structmempool__t.html">mempool_t</a> *mempool, <span class="keywordtype">int</span> maxverts, <span class="keywordtype">int</span> maxtriangles)</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>{</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>    <a class="code hl_struct" href="structshadowmesh__t.html">shadowmesh_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>;</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a> = (<a class="code hl_struct" href="structshadowmesh__t.html">shadowmesh_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(mempool, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structshadowmesh__t.html">shadowmesh_t</a>));</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5cbf7b4739bcd39af044e58a2cf07d92">mempool</a> = mempool;</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>-&gt;maxverts = maxverts;</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>-&gt;maxtriangles = maxtriangles;</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>-&gt;numverts = 0;</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>-&gt;numtriangles = 0;</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>-&gt;sideoffsets, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>-&gt;sideoffsets));</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>-&gt;sidetotals, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>-&gt;sidetotals));</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span> </div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>-&gt;vertex3f = (<span class="keywordtype">float</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(mempool, maxverts * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>-&gt;element3i = (<span class="keywordtype">int</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(mempool, maxtriangles * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>[3]));</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>-&gt;vertexhashtable = (<a class="code hl_struct" href="structshadowmeshvertexhash__t.html">shadowmeshvertexhash_t</a> **)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(mempool, <a class="code hl_define" href="model__shared_8h.html#a3624b5964b00fe674ac3f4edb9798f9f">SHADOWMESHVERTEXHASH</a> * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structshadowmeshvertexhash__t.html">shadowmeshvertexhash_t</a> *));</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>-&gt;vertexhashentries = (<a class="code hl_struct" href="structshadowmeshvertexhash__t.html">shadowmeshvertexhash_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(mempool, maxverts * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structshadowmeshvertexhash__t.html">shadowmeshvertexhash_t</a>));</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newmesh</a>;</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>}</div>
</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span> </div>
<div class="foldopen" id="foldopen01019" data-start="{" data-end="}">
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a617474cc8dc849cb5954712cc57f1a12"> 1019</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="model__shared_8c.html#a617474cc8dc849cb5954712cc57f1a12">Mod_ShadowMesh_AddVertex</a>(<a class="code hl_struct" href="structshadowmesh__t.html">shadowmesh_t</a> *mesh, <span class="keyword">const</span> <span class="keywordtype">float</span> *vertex3f)</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>{</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hashindex</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a>;</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>    <a class="code hl_struct" href="structshadowmeshvertexhash__t.html">shadowmeshvertexhash_t</a> *hash;</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>    <span class="comment">// this uses prime numbers intentionally</span></div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hashindex</a> = (<span class="keywordtype">unsigned</span> <a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>) (vertex3f[0] * 2003 + vertex3f[1] * 4001 + vertex3f[2] * 7919) % <a class="code hl_define" href="model__shared_8h.html#a3624b5964b00fe674ac3f4edb9798f9f">SHADOWMESHVERTEXHASH</a>;</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>    <span class="keywordflow">for</span> (hash = mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a40d64ff8a89ceb6e4dd1c458b46c8fd1">vertexhashtable</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hashindex</a>];hash;hash = hash-&gt;<a class="code hl_variable" href="structshadowmeshvertexhash__t.html#a55434eb8d676103ac8288bfb73d1898d">next</a>)</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>    {</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> = (hash - mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#abd85f7289c2c784f0a0941b88ab7199e">vertexhashentries</a>);</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>        <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 0] == vertex3f[0] &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 1] == vertex3f[1] &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 2] == vertex3f[2])</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>            <span class="keywordflow">return</span> hash - mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#abd85f7289c2c784f0a0941b88ab7199e">vertexhashentries</a>;</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>    }</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> = mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">numverts</a>++;</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>    hash = mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#abd85f7289c2c784f0a0941b88ab7199e">vertexhashentries</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a>;</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>    hash-&gt;<a class="code hl_variable" href="structshadowmeshvertexhash__t.html#a55434eb8d676103ac8288bfb73d1898d">next</a> = mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a40d64ff8a89ceb6e4dd1c458b46c8fd1">vertexhashtable</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hashindex</a>];</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>    mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a40d64ff8a89ceb6e4dd1c458b46c8fd1">vertexhashtable</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hashindex</a>] = hash;</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>    mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 0] = vertex3f[0];</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 1] = vertex3f[1];</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>    mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 2] = vertex3f[2];</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a>;</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>}</div>
</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span> </div>
<div class="foldopen" id="foldopen01041" data-start="{" data-end="}">
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ab807c8ef48ac23255f9e8b7a7ab5caf0"> 1041</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#ab807c8ef48ac23255f9e8b7a7ab5caf0">Mod_ShadowMesh_AddMesh</a>(<a class="code hl_struct" href="structshadowmesh__t.html">shadowmesh_t</a> *mesh, <span class="keyword">const</span> <span class="keywordtype">float</span> *vertex3f, <span class="keywordtype">int</span> numtris, <span class="keyword">const</span> <span class="keywordtype">int</span> *element3i)</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>{</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span> </div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numtris;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>    {</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>        <span class="keywordflow">if</span> ((mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a> * 3 + 2) * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) + 1 &gt;= ((<a class="code hl_struct" href="structmemheader__t.html">memheader_t</a> *)((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">element3i</a> - <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structmemheader__t.html">memheader_t</a>)))-&gt;size)</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>        {</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>            <span class="comment">// FIXME: we didn&#39;t allocate enough space for all the tris, see R_Mod_CompileShadowMap</span></div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>            <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<a class="code hl_define" href="console_8h.html#a27b052ed2a962d8ec1b9e922d0813058">CON_WARN</a> <span class="stringliteral">&quot;Mod_ShadowMesh_AddMesh: insufficient memory allocated!\n&quot;</span>);</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>        }</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>        mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">element3i</a>[mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a> * 3 + 0] = <a class="code hl_function" href="model__shared_8c.html#a617474cc8dc849cb5954712cc57f1a12">Mod_ShadowMesh_AddVertex</a>(mesh, vertex3f + 3 * element3i[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> * 3 + 0]);</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>        mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">element3i</a>[mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a> * 3 + 1] = <a class="code hl_function" href="model__shared_8c.html#a617474cc8dc849cb5954712cc57f1a12">Mod_ShadowMesh_AddVertex</a>(mesh, vertex3f + 3 * element3i[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> * 3 + 1]);</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>        mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">element3i</a>[mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a> * 3 + 2] = <a class="code hl_function" href="model__shared_8c.html#a617474cc8dc849cb5954712cc57f1a12">Mod_ShadowMesh_AddVertex</a>(mesh, vertex3f + 3 * element3i[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> * 3 + 2]);</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>        mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a>++;</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>    }</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span> </div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>    <span class="comment">// the triangle calculation can take a while, so let&#39;s do a keepalive here</span></div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>    <a class="code hl_function" href="cl__parse_8c.html#ac6ab3e260289abd4d92f1e4974190626">CL_KeepaliveMessage</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>}</div>
</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span> </div>
<div class="foldopen" id="foldopen01063" data-start="{" data-end="}">
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"><a class="line" href="model__shared_8c.html#adc6c7c0b1a133fe0a99639e2b585011a"> 1063</a></span><a class="code hl_struct" href="structshadowmesh__t.html">shadowmesh_t</a> *<a class="code hl_function" href="model__shared_8c.html#adc6c7c0b1a133fe0a99639e2b585011a">Mod_ShadowMesh_Begin</a>(<a class="code hl_struct" href="structmempool__t.html">mempool_t</a> *mempool, <span class="keywordtype">int</span> maxverts, <span class="keywordtype">int</span> maxtriangles)</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>{</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>    <span class="comment">// the preparation before shadow mesh initialization can take a while, so let&#39;s do a keepalive here</span></div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>    <a class="code hl_function" href="cl__parse_8c.html#ac6ab3e260289abd4d92f1e4974190626">CL_KeepaliveMessage</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span> </div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="model__shared_8c.html#ac27e894daff472cded24c78edbbfcc1a">Mod_ShadowMesh_Alloc</a>(mempool, maxverts, maxtriangles);</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>}</div>
</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span> </div>
<div class="foldopen" id="foldopen01071" data-start="{" data-end="}">
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a2de5eacb468f04855c801cf2f1a178ec"> 1071</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a2de5eacb468f04855c801cf2f1a178ec">Mod_ShadowMesh_CreateVBOs</a>(<a class="code hl_struct" href="structshadowmesh__t.html">shadowmesh_t</a> *mesh)</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>{</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>    <span class="keywordflow">if</span> (!mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">numverts</a>)</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span> </div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>    <span class="comment">// make sure we don&#39;t crash inside the driver if something went wrong, as it&#39;s annoying to debug</span></div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>    <a class="code hl_function" href="model__shared_8c.html#ac1055bb841510ad036df4adce4146d85">Mod_ValidateElements</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">element3i</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab619fa0351de28e3e85368c9f6919482">element3s</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a>, 0, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">numverts</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">__FILE__</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">__LINE__</a>);</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span> </div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>    <span class="comment">// upload short indices as a buffer</span></div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>    <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab619fa0351de28e3e85368c9f6919482">element3s</a> &amp;&amp; !mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5683380ac9e160b2e899fe82aac36b90">element3s_indexbuffer</a>)</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>        mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5683380ac9e160b2e899fe82aac36b90">element3s_indexbuffer</a> = <a class="code hl_function" href="gl__backend_8c.html#a897a83101fb978aec99bbb3c37c4e78c">R_Mesh_CreateMeshBuffer</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab619fa0351de28e3e85368c9f6919482">element3s</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">short</span>[3]), <span class="stringliteral">&quot;shadowmesh&quot;</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span> </div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>    <span class="comment">// upload int indices as a buffer</span></div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>    <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">element3i</a> &amp;&amp; !mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab541863376b7d50d86fc7e9feadfde42">element3i_indexbuffer</a> &amp;&amp; !mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab619fa0351de28e3e85368c9f6919482">element3s</a>)</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>        mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab541863376b7d50d86fc7e9feadfde42">element3i_indexbuffer</a> = <a class="code hl_function" href="gl__backend_8c.html#a897a83101fb978aec99bbb3c37c4e78c">R_Mesh_CreateMeshBuffer</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">element3i</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>[3]), <span class="stringliteral">&quot;shadowmesh&quot;</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span> </div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>    <span class="comment">// vertex buffer is several arrays and we put them in the same buffer</span></div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>    <span class="comment">//</span></div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>    <span class="comment">// is this wise?  the texcoordtexture2f array is used with dynamic</span></div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>    <span class="comment">// vertex/svector/tvector/normal when rendering animated models, on the</span></div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>    <span class="comment">// other hand animated models don&#39;t use a lot of vertices anyway...</span></div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>    <span class="keywordflow">if</span> (!mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a6a9b587fbcf8ef7a44140c46c8d2f4e1">vbo_vertexbuffer</a>)</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>    {</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>        mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aba509bf2aa5e66a84b969a224f96d5d5">vbooffset_vertex3f</a> = 0;</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>        mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a6a9b587fbcf8ef7a44140c46c8d2f4e1">vbo_vertexbuffer</a> = <a class="code hl_function" href="gl__backend_8c.html#a897a83101fb978aec99bbb3c37c4e78c">R_Mesh_CreateMeshBuffer</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">numverts</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]), <span class="stringliteral">&quot;shadowmesh&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>    }</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>}</div>
</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span> </div>
<div class="foldopen" id="foldopen01099" data-start="{" data-end="}">
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a74f1f0b6657977f8dbc5af17a66ac54f"> 1099</a></span><a class="code hl_struct" href="structshadowmesh__t.html">shadowmesh_t</a> *<a class="code hl_function" href="model__shared_8c.html#a74f1f0b6657977f8dbc5af17a66ac54f">Mod_ShadowMesh_Finish</a>(<a class="code hl_struct" href="structshadowmesh__t.html">shadowmesh_t</a> *mesh, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">createvbo</a>)</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>{</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>    <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">numverts</a> &gt;= 3 &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a> &gt;= 1)</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>    {</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>        <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#abd85f7289c2c784f0a0941b88ab7199e">vertexhashentries</a>)</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#abd85f7289c2c784f0a0941b88ab7199e">vertexhashentries</a>);</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>        mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#abd85f7289c2c784f0a0941b88ab7199e">vertexhashentries</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>        <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a40d64ff8a89ceb6e4dd1c458b46c8fd1">vertexhashtable</a>)</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a40d64ff8a89ceb6e4dd1c458b46c8fd1">vertexhashtable</a>);</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>        mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a40d64ff8a89ceb6e4dd1c458b46c8fd1">vertexhashtable</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>        <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a9454d740852d83573778a16f084c003a">maxverts</a> &gt; mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">numverts</a>)</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>        {</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>            mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5cbf7b4739bcd39af044e58a2cf07d92">mempool</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">numverts</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>            mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a9454d740852d83573778a16f084c003a">maxverts</a> = mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">numverts</a>;</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>        }</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>        <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a582fa5838add0a8d91d5ff2f0ed6b4fb">maxtriangles</a> &gt; mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a>)</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>        {</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>            mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">element3i</a> = (<span class="keywordtype">int</span> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5cbf7b4739bcd39af044e58a2cf07d92">mempool</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">element3i</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>[3]));</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>            mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a582fa5838add0a8d91d5ff2f0ed6b4fb">maxtriangles</a> = mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a>;</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>        }</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>        <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">numverts</a> &lt;= 65536)</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>        {</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>            mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab619fa0351de28e3e85368c9f6919482">element3s</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5cbf7b4739bcd39af044e58a2cf07d92">mempool</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>[3]));</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">numtriangles</a>*3;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>                mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab619fa0351de28e3e85368c9f6919482">element3s</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">element3i</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>        }</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">createvbo</a>)</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>            <a class="code hl_function" href="model__shared_8c.html#a2de5eacb468f04855c801cf2f1a178ec">Mod_ShadowMesh_CreateVBOs</a>(mesh);</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>    }</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span> </div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>    <span class="comment">// this can take a while, so let&#39;s do a keepalive here</span></div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>    <a class="code hl_function" href="cl__parse_8c.html#ac6ab3e260289abd4d92f1e4974190626">CL_KeepaliveMessage</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span> </div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>    <span class="keywordflow">return</span> mesh;</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>}</div>
</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span> </div>
<div class="foldopen" id="foldopen01136" data-start="{" data-end="}">
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aa7a7cfdba28a5e8431876ffa977f8ed0"> 1136</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aa7a7cfdba28a5e8431876ffa977f8ed0">Mod_ShadowMesh_CalcBBox</a>(<a class="code hl_struct" href="structshadowmesh__t.html">shadowmesh_t</a> *mesh, <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> mins, <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> maxs, <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> center, <span class="keywordtype">float</span> *radius)</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>{</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmaxs</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ncenter</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>;</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nradius2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a>, *<a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>;</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>    <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmins</a>);</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>    <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmaxs</a>);</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>    <span class="comment">// calculate bbox</span></div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmins</a>);</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmaxs</a>);</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a> = mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">numverts</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a> += 3)</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>    {</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmins</a>[0] &gt; <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0]) { <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmins</a>[0] = <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0]; } <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmaxs</a>[0] &lt; <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0]) { <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmaxs</a>[0] = <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0]; }</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmins</a>[1] &gt; <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1]) { <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmins</a>[1] = <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1]; } <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmaxs</a>[1] &lt; <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1]) { <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmaxs</a>[1] = <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1]; }</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmins</a>[2] &gt; <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2]) { <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmins</a>[2] = <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2]; } <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmaxs</a>[2] &lt; <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2]) { <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmaxs</a>[2] = <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2]; }</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>    }</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>    <span class="comment">// calculate center and radius</span></div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ncenter</a>[0] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmins</a>[0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmaxs</a>[0]) * 0.5f;</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ncenter</a>[1] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmins</a>[1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmaxs</a>[1]) * 0.5f;</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ncenter</a>[2] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmins</a>[2] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmaxs</a>[2]) * 0.5f;</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nradius2</a> = 0;</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a> = mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">numverts</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a> += 3)</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>    {</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>        <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(<a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ncenter</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>);</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a> = <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>);</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nradius2</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a>)</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nradius2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a>;</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>    }</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>    <span class="comment">// return data</span></div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>    <span class="keywordflow">if</span> (mins)</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>        <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmins</a>, mins);</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>    <span class="keywordflow">if</span> (maxs)</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>        <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nmaxs</a>, maxs);</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>    <span class="keywordflow">if</span> (center)</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>        <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ncenter</a>, center);</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>    <span class="keywordflow">if</span> (radius)</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>        *radius = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nradius2</a>);</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>}</div>
</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span> </div>
<div class="foldopen" id="foldopen01175" data-start="{" data-end="}">
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a3ec29c084356454f725c32198d27544d"> 1175</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a3ec29c084356454f725c32198d27544d">Mod_ShadowMesh_Free</a>(<a class="code hl_struct" href="structshadowmesh__t.html">shadowmesh_t</a> *mesh)</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>{</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>    <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab541863376b7d50d86fc7e9feadfde42">element3i_indexbuffer</a>)</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>        <a class="code hl_function" href="gl__backend_8c.html#aaaba6ef1e8b54d0694de07639072286d">R_Mesh_DestroyMeshBuffer</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab541863376b7d50d86fc7e9feadfde42">element3i_indexbuffer</a>);</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>    <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5683380ac9e160b2e899fe82aac36b90">element3s_indexbuffer</a>)</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>        <a class="code hl_function" href="gl__backend_8c.html#aaaba6ef1e8b54d0694de07639072286d">R_Mesh_DestroyMeshBuffer</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5683380ac9e160b2e899fe82aac36b90">element3s_indexbuffer</a>);</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>    <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a6a9b587fbcf8ef7a44140c46c8d2f4e1">vbo_vertexbuffer</a>)</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>        <a class="code hl_function" href="gl__backend_8c.html#aaaba6ef1e8b54d0694de07639072286d">R_Mesh_DestroyMeshBuffer</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a6a9b587fbcf8ef7a44140c46c8d2f4e1">vbo_vertexbuffer</a>);</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>    <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>)</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>);</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>    <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">element3i</a>)</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">element3i</a>);</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>    <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab619fa0351de28e3e85368c9f6919482">element3s</a>)</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab619fa0351de28e3e85368c9f6919482">element3s</a>);</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>    <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#abd85f7289c2c784f0a0941b88ab7199e">vertexhashentries</a>)</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#abd85f7289c2c784f0a0941b88ab7199e">vertexhashentries</a>);</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>    <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a40d64ff8a89ceb6e4dd1c458b46c8fd1">vertexhashtable</a>)</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a40d64ff8a89ceb6e4dd1c458b46c8fd1">vertexhashtable</a>);</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>    <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(mesh);</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>}</div>
</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span> </div>
<div class="foldopen" id="foldopen01196" data-start="{" data-end="}">
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aaf5fb488866dbdda69745ecf07311ce2"> 1196</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aaf5fb488866dbdda69745ecf07311ce2">Mod_CreateCollisionMesh</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod)</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>{</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcollisionmeshtriangles</a>;</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">usesinglecollisionmesh</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span> </div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>    <a class="code hl_struct" href="structmempool__t.html">mempool_t</a> *mempool = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>;</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>    <span class="keywordflow">if</span> (!mempool &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ac4d9fbdd0eee8dd6822be206eb245cc3">parentmodel</a>)</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>        mempool = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ac4d9fbdd0eee8dd6822be206eb245cc3">parentmodel</a>-&gt;mempool;</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>    <span class="comment">// make a single combined collision mesh for physics engine use</span></div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>    <span class="comment">// TODO rewrite this to use the collision brushes as source, to fix issues with e.g. common/caulk which creates no drawsurface</span></div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcollisionmeshtriangles</a> = 0;</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">submodelsurfaces_start</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a3cf3f78e305583268585ef7bde7aaa16">submodelsurfaces_end</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>++)</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>    {</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>;</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture-&gt;name, <span class="stringliteral">&quot;collision&quot;</span>) || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture-&gt;name, <span class="stringliteral">&quot;collisionconvex&quot;</span>)) <span class="comment">// found collision mesh</span></div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>        {</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">usesinglecollisionmesh</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcollisionmeshtriangles</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;<a class="code hl_variable" href="structmsurface__t.html#a567785f5ea238992958048c1fb58a318">num_triangles</a>;</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>        }</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>        <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture-&gt;supercontents &amp; <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a>))</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcollisionmeshtriangles</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles;</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>    }</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#abb7bc4769ccea279c22ec0587f2f14b0">collisionmesh</a> = <a class="code hl_function" href="model__shared_8c.html#adc6c7c0b1a133fe0a99639e2b585011a">Mod_ShadowMesh_Begin</a>(mempool, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcollisionmeshtriangles</a> * 3, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcollisionmeshtriangles</a>);</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">usesinglecollisionmesh</a>)</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>        <a class="code hl_function" href="model__shared_8c.html#ab807c8ef48ac23255f9e8b7a7ab5caf0">Mod_ShadowMesh_AddMesh</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#abb7bc4769ccea279c22ec0587f2f14b0">collisionmesh</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles, (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a> + 3 * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle));</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>    {</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">submodelsurfaces_start</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a3cf3f78e305583268585ef7bde7aaa16">submodelsurfaces_end</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>++)</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>        {</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>;</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>            <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture-&gt;supercontents &amp; <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a>))</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>            <a class="code hl_function" href="model__shared_8c.html#ab807c8ef48ac23255f9e8b7a7ab5caf0">Mod_ShadowMesh_AddMesh</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#abb7bc4769ccea279c22ec0587f2f14b0">collisionmesh</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles, (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a> + 3 * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle));</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>        }</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>    }</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#abb7bc4769ccea279c22ec0587f2f14b0">collisionmesh</a> = <a class="code hl_function" href="model__shared_8c.html#a74f1f0b6657977f8dbc5af17a66ac54f">Mod_ShadowMesh_Finish</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#abb7bc4769ccea279c22ec0587f2f14b0">collisionmesh</a>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>}</div>
</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span> </div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_GetTerrainVertex3fTexCoord2fFromBGRA</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagepixels</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagewidth</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imageheight</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a>, <span class="keywordtype">float</span> *vertex3f, <span class="keywordtype">float</span> *texcoord2f, <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelstepmatrix</a>, <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeltexturestepmatrix</a>)</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>{</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[3], <a class="code hl_variable" href="shader__glsl_8h.html#ad327dfb01ce8b2c115d25e7e670e3ed4">tc</a>[3];</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>    <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a>;</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>    <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a>;</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a> &gt;= 0 &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a> &gt;= 0 &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagewidth</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imageheight</a>)</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>        <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagepixels</a>[((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagewidth</a>)+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a>)*4+0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagepixels</a>[((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagewidth</a>)+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a>)*4+1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagepixels</a>[((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagewidth</a>)+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a>)*4+2]) * (1.0f / 765.0f);</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>        <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2] = 0;</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>    <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelstepmatrix</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>, vertex3f);</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>    <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeltexturestepmatrix</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>, <a class="code hl_variable" href="shader__glsl_8h.html#ad327dfb01ce8b2c115d25e7e670e3ed4">tc</a>);</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>    texcoord2f[0] = <a class="code hl_variable" href="shader__glsl_8h.html#ad327dfb01ce8b2c115d25e7e670e3ed4">tc</a>[0];</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    texcoord2f[1] = <a class="code hl_variable" href="shader__glsl_8h.html#ad327dfb01ce8b2c115d25e7e670e3ed4">tc</a>[1];</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>}</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span> </div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_GetTerrainVertexFromBGRA</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagepixels</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagewidth</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imageheight</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a>, <span class="keywordtype">float</span> *vertex3f, <span class="keywordtype">float</span> *svector3f, <span class="keywordtype">float</span> *tvector3f, <span class="keywordtype">float</span> *normal3f, <span class="keywordtype">float</span> *texcoord2f, <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelstepmatrix</a>, <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeltexturestepmatrix</a>)</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>{</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vup</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vdown</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vleft</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vright</a>[3];</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcup</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcdown</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcleft</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcright</a>[3];</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="server_8h.html#a0ff9eb096e93804922c75bbddaf18703">sv</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tv</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nl</a>[3];</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_GetTerrainVertex3fTexCoord2fFromBGRA</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagepixels</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagewidth</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imageheight</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a>, vertex3f, texcoord2f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelstepmatrix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeltexturestepmatrix</a>);</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_GetTerrainVertex3fTexCoord2fFromBGRA</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagepixels</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagewidth</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imageheight</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a> - 1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vup</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcup</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelstepmatrix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeltexturestepmatrix</a>);</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_GetTerrainVertex3fTexCoord2fFromBGRA</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagepixels</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagewidth</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imageheight</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a> + 1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vdown</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcdown</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelstepmatrix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeltexturestepmatrix</a>);</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_GetTerrainVertex3fTexCoord2fFromBGRA</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagepixels</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagewidth</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imageheight</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a> - 1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vleft</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcleft</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelstepmatrix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeltexturestepmatrix</a>);</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_GetTerrainVertex3fTexCoord2fFromBGRA</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagepixels</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagewidth</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imageheight</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a> + 1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vright</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcright</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelstepmatrix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeltexturestepmatrix</a>);</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_BuildBumpVectors</a>(vertex3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vup</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vright</a>, texcoord2f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcup</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcright</a>, svector3f, tvector3f, normal3f);</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_BuildBumpVectors</a>(vertex3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vright</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vdown</a>, texcoord2f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcright</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcdown</a>, <a class="code hl_variable" href="server_8h.html#a0ff9eb096e93804922c75bbddaf18703">sv</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tv</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nl</a>);</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(svector3f, <a class="code hl_variable" href="server_8h.html#a0ff9eb096e93804922c75bbddaf18703">sv</a>, svector3f);</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(tvector3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tv</a>, tvector3f);</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(normal3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nl</a>, normal3f);</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_BuildBumpVectors</a>(vertex3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vdown</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vleft</a>, texcoord2f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcdown</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcleft</a>, <a class="code hl_variable" href="server_8h.html#a0ff9eb096e93804922c75bbddaf18703">sv</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tv</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nl</a>);</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(svector3f, <a class="code hl_variable" href="server_8h.html#a0ff9eb096e93804922c75bbddaf18703">sv</a>, svector3f);</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(tvector3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tv</a>, tvector3f);</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(normal3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nl</a>, normal3f);</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_BuildBumpVectors</a>(vertex3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vleft</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vup</a>, texcoord2f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcleft</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcup</a>, <a class="code hl_variable" href="server_8h.html#a0ff9eb096e93804922c75bbddaf18703">sv</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tv</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nl</a>);</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(svector3f, <a class="code hl_variable" href="server_8h.html#a0ff9eb096e93804922c75bbddaf18703">sv</a>, svector3f);</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(tvector3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tv</a>, tvector3f);</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(normal3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nl</a>, normal3f);</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>}</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span> </div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_ConstructTerrainPatchFromBGRA</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagepixels</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagewidth</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imageheight</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="shader__glsl_8h.html#ac40f3d1971e671aab7a122eea181e978">x1</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="shader__glsl_8h.html#a0e89857f2d085f82245c0873f460679f">y1</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a136cce2f78c36b837ec3c8cf72c96aad">height</a>, <span class="keywordtype">int</span> *element3i, <span class="keywordtype">float</span> *vertex3f, <span class="keywordtype">float</span> *svector3f, <span class="keywordtype">float</span> *tvector3f, <span class="keywordtype">float</span> *normal3f, <span class="keywordtype">float</span> *texcoord2f, <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelstepmatrix</a>, <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeltexturestepmatrix</a>)</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>{</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a>, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>;</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = element3i;</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &lt; <a class="code hl_variable" href="glquake_8h.html#a136cce2f78c36b837ec3c8cf72c96aad">height</a>;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++)</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>    {</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> &lt; <a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a>;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>++)</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>        {</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[0] = (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> + 1) * (<a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a> + 1) + (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> + 0);</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[1] = (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> + 0) * (<a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a> + 1) + (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> + 0);</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[2] = (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> + 1) * (<a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a> + 1) + (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> + 1);</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[3] = (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> + 0) * (<a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a> + 1) + (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> + 0);</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[4] = (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> + 0) * (<a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a> + 1) + (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> + 1);</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[5] = (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> + 1) * (<a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a> + 1) + (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> + 1);</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> += 6;</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>        }</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>    }</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a> = <a class="code hl_variable" href="shader__glsl_8h.html#a0e89857f2d085f82245c0873f460679f">y1</a>;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &lt; <a class="code hl_variable" href="glquake_8h.html#a136cce2f78c36b837ec3c8cf72c96aad">height</a> + 1;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a>++)</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a> = <a class="code hl_variable" href="shader__glsl_8h.html#ac40f3d1971e671aab7a122eea181e978">x1</a>;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> &lt; <a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a> + 1;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a>++, vertex3f += 3, texcoord2f += 2, svector3f += 3, tvector3f += 3, normal3f += 3)</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_GetTerrainVertexFromBGRA</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagepixels</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imagewidth</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">imageheight</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">iy</a>, vertex3f, texcoord2f, svector3f, tvector3f, normal3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelstepmatrix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeltexturestepmatrix</a>);</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>}</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span> </div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span><span class="keywordtype">void</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_Terrain_SurfaceRecurseChunk</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>)</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>{</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>    <span class="keywordtype">float</span> mins[3];</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>    <span class="keywordtype">float</span> maxs[3];</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkwidth</a> = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>, model-&gt;terrain.width - 1 - <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>);</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkheight</a> = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>, model-&gt;terrain.height - 1 - <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>);</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">viewvector</a>[3];</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> firstvertex;</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>;</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>    <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>;</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkwidth</a> &lt; 2 || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkheight</a> &lt; 2)</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(mins, model-&gt;terrain.mins[0] +  <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>    * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a> * model-&gt;terrain.scale[0], model-&gt;terrain.mins[1] +  <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>    * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a> * model-&gt;terrain.scale[1], model-&gt;terrain.mins[2]);</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(maxs, model-&gt;terrain.mins[0] + (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>+1) * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a> * model-&gt;terrain.scale[0], model-&gt;terrain.mins[1] + (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>+1) * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a> * model-&gt;terrain.scale[1], model-&gt;terrain.maxs[2]);</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">viewvector</a>[0] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(mins[0], localvieworigin, maxs[0]) - model-&gt;terrain.vieworigin[0];</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">viewvector</a>[1] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(mins[1], localvieworigin, maxs[1]) - model-&gt;terrain.vieworigin[1];</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">viewvector</a>[2] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(mins[2], localvieworigin, maxs[2]) - model-&gt;terrain.vieworigin[2];</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a> &gt; 1 &amp;&amp; <a class="code hl_define" href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">viewvector</a>) &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>*model-&gt;terrain.scale[0]*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">r_terrain_lodscale</a>.value)</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>    {</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>        <span class="comment">// too close for this stepsize, emit as 4 chunks instead</span></div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a> /= 2;</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_Terrain_SurfaceRecurseChunk</a>(model, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>, <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>);</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_Terrain_SurfaceRecurseChunk</a>(model, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>, <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>);</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_Terrain_SurfaceRecurseChunk</a>(model, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>, <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>);</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_Terrain_SurfaceRecurseChunk</a>(model, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>, <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>);</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>    }</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>    <span class="comment">// emit the geometry at stepsize into our vertex buffer / index buffer</span></div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>    <span class="comment">// we add two columns and two rows for skirt</span></div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkwidth</a>+2;</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outheight</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkheight</a>+2;</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth</a>-1;</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outheight2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outheight</a>-1;</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth</a>+1;</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outheight3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outheight</a>+1;</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>    firstvertex = numvertices;</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = model-&gt;terrain.element3i + numtriangles;</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>    numtriangles += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkwidth</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkheight</a>*2+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkwidth</a>*2*2+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkheight</a>*2*2;</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>    <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a> = model-&gt;terrain.vertex3f + numvertices;</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>    numvertices += (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkwidth</a>+1)*(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkheight</a>+1)+(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkwidth</a>+1)*2+(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">chunkheight</a>+1)*2;</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>    <span class="comment">// emit the triangles (note: the skirt is treated as two extra rows and two extra columns)</span></div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outheight</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a>++)</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>    {</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a>++)</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>        {</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>            *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>++ = firstvertex + (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a>  )*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth3</a>+(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a>  );</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>            *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>++ = firstvertex + (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a>  )*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth3</a>+(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a>+1);</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>            *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>++ = firstvertex + (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a>+1)*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth3</a>+(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a>+1);</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>            *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>++ = firstvertex + (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a>  )*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth3</a>+(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a>  );</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>            *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>++ = firstvertex + (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a>+1)*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth3</a>+(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a>+1);</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>            *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>++ = firstvertex + (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a>+1)*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth3</a>+(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a>  );</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>        }</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>    }</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>    <span class="comment">// TODO: emit surface vertices (x+tx*stepsize, y+ty*stepsize)</span></div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outheight</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a>++)</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>    {</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skirtrow</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a> == 0 || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outheight</a>;</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ry</a> = <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>+<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ty</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outheight</a>)*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>;</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a>++)</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>        {</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skirt</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skirtrow</a> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a> == 0 || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth</a>;</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rx</a> = <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>+<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tx</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outwidth</a>)*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stepsize</a>;</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>            <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rx</a>*scale[0];</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>            <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ry</a>*scale[1];</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>            <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">heightmap</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ry</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">terrainwidth</a>+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rx</a>]*scale[2];</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>            <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a> += 3;</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>        }</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>    }</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>    <span class="comment">// TODO: emit skirt vertices</span></div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>}</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span> </div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span><span class="keywordtype">void</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_Terrain_UpdateSurfacesForViewOrigin</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model)</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>{</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &lt; model-&gt;terrain.size[1];<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += model-&gt;terrain.</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_Terrain_SurfaceRecurseChunk</a>(model, model-&gt;terrain.maxstepsize, <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>);</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_Terrain_BuildChunk</a>(model, </div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>}</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span> </div>
<div class="foldopen" id="foldopen01381" data-start="{" data-end="}">
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ab3c38940592b16865aefdfce14fed8e4"> 1381</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_function" href="model__shared_8c.html#ab3c38940592b16865aefdfce14fed8e4">Mod_LoadQ3Shaders_EnumerateWaveFunc</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s)</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>{</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a9d8e5095d0454547c650ff9bde64f8e6">offset</a> = 0;</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strncasecmp</a>(s, <span class="stringliteral">&quot;user&quot;</span>, 4)) <span class="comment">// parse stuff like &quot;user1sin&quot;, always user&lt;n&gt;func</span></div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>    {</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>        <a class="code hl_variable" href="glquake_8h.html#a9d8e5095d0454547c650ff9bde64f8e6">offset</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0, s[4] - <span class="charliteral">&#39;0&#39;</span>, 9);</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>        <a class="code hl_variable" href="glquake_8h.html#a9d8e5095d0454547c650ff9bde64f8e6">offset</a> = (<a class="code hl_variable" href="glquake_8h.html#a9d8e5095d0454547c650ff9bde64f8e6">offset</a> + 1) &lt;&lt; <a class="code hl_define" href="r__qshader_8h.html#a7510eb962f828232946132adebe62028">Q3WAVEFUNC_USER_SHIFT</a>;</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>        s += 4;</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>        <span class="keywordflow">if</span>(*s)</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>            ++s;</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>    }</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(s, <span class="stringliteral">&quot;sin&quot;</span>))             <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a9d8e5095d0454547c650ff9bde64f8e6">offset</a> | <a class="code hl_enumvalue" href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127fa643ddc1e82a20b467319e87125fc35fa">Q3WAVEFUNC_SIN</a>;</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(s, <span class="stringliteral">&quot;square&quot;</span>))          <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a9d8e5095d0454547c650ff9bde64f8e6">offset</a> | <a class="code hl_enumvalue" href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127faeb41a02d5e22d454381e8fd4f2797f14">Q3WAVEFUNC_SQUARE</a>;</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(s, <span class="stringliteral">&quot;triangle&quot;</span>))        <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a9d8e5095d0454547c650ff9bde64f8e6">offset</a> | <a class="code hl_enumvalue" href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127fa1aeb1e5b644f106530bbec41af99e300">Q3WAVEFUNC_TRIANGLE</a>;</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(s, <span class="stringliteral">&quot;sawtooth&quot;</span>))        <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a9d8e5095d0454547c650ff9bde64f8e6">offset</a> | <a class="code hl_enumvalue" href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127fa108f42845e100dc19351ee29a3591d64">Q3WAVEFUNC_SAWTOOTH</a>;</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(s, <span class="stringliteral">&quot;inversesawtooth&quot;</span>)) <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a9d8e5095d0454547c650ff9bde64f8e6">offset</a> | <a class="code hl_enumvalue" href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127fa040a1c510a6c39ebb5f0ed5ebabca5cd">Q3WAVEFUNC_INVERSESAWTOOTH</a>;</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(s, <span class="stringliteral">&quot;noise&quot;</span>))           <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a9d8e5095d0454547c650ff9bde64f8e6">offset</a> | <a class="code hl_enumvalue" href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127fa1af27bb7e72f1ed958e1e82c04e0cc40">Q3WAVEFUNC_NOISE</a>;</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(s, <span class="stringliteral">&quot;none&quot;</span>))            <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a9d8e5095d0454547c650ff9bde64f8e6">offset</a> | <a class="code hl_enumvalue" href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127fa38c652184c322bd37a1970375b9feb25">Q3WAVEFUNC_NONE</a>;</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>    <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;Mod_LoadQ3Shaders: unknown wavefunc %s\n&quot;</span>, s);</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a9d8e5095d0454547c650ff9bde64f8e6">offset</a> | <a class="code hl_enumvalue" href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127fa38c652184c322bd37a1970375b9feb25">Q3WAVEFUNC_NONE</a>;</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>}</div>
</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span> </div>
<div class="foldopen" id="foldopen01403" data-start="{" data-end="}">
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ac09a298601daeda3aa5d20b005b5ddcd"> 1403</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#ac09a298601daeda3aa5d20b005b5ddcd">Mod_FreeQ3Shaders</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>{</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>    <a class="code hl_define" href="zone_8h.html#a07374e605d328a588d2d738a56608ead">Mem_FreePool</a>(&amp;<a class="code hl_variable" href="model__shared_8c.html#aad0500eca89bdf3928091895b0ae35e3">q3shaders_mem</a>);</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>}</div>
</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span> </div>
<div class="foldopen" id="foldopen01408" data-start="{" data-end="}">
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a1fc8b5f7ffe77967a993fe042451521a"> 1408</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a1fc8b5f7ffe77967a993fe042451521a">Q3Shader_AddToHash</a> (<a class="code hl_struct" href="structshader__t.html">shader_t</a>* shader)</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>{</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> hash = <a class="code hl_function" href="com__crc16_8c.html#ac2a504ad338a0d2e5e1ba7d79993e174">CRC_Block_CaseInsensitive</a> ((<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)shader-&gt;<a class="code hl_variable" href="structshader__t.html#a04f86d7b8f169e8cab08662e7e4e4d50">name</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a04f86d7b8f169e8cab08662e7e4e4d50">name</a>));</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>    <a class="code hl_struct" href="structq3shader__hash__entry__t.html">q3shader_hash_entry_t</a>* <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a> = <a class="code hl_variable" href="model__shared_8c.html#a83e42554be1ced79f6523bb26ef38fd1">q3shader_data</a>-&gt;<a class="code hl_variable" href="structq3shader__data__t.html#a6f14ea99b141eb62ffd3461552c646fa">hash</a> + (hash % <a class="code hl_define" href="model__shared_8c.html#a4f0df7ee2d7f6abd898e01abe365f373">Q3SHADER_HASH_SIZE</a>);</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>    <a class="code hl_struct" href="structq3shader__hash__entry__t.html">q3shader_hash_entry_t</a>* <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastEntry</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>    <span class="keywordflow">do</span></div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>    {</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a>-&gt;shader.name, shader-&gt;<a class="code hl_variable" href="structshader__t.html#a04f86d7b8f169e8cab08662e7e4e4d50">name</a>) == 0)</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>        {</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>            <span class="comment">// redeclaration</span></div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>            <span class="keywordflow">if</span>(shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa67e889c11fa842037167b0ab978c591">dpshaderkill</a>)</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>            {</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>                <span class="comment">// killed shader is a redeclarion? we can safely ignore it</span></div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>            }</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a>-&gt;shader.dpshaderkill)</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>            {</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>                <span class="comment">// replace the old shader!</span></div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>                <span class="comment">// this will skip the entry allocating part</span></div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>                <span class="comment">// below and just replace the shader</span></div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>            }</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>            {</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>                <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *start, *end, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">start2</a>;</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>                start = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) (&amp;shader-&gt;Q3SHADERINFO_COMPARE_START);</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>                end = ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) (&amp;shader-&gt;Q3SHADERINFO_COMPARE_END)) + <span class="keyword">sizeof</span>(shader-&gt;Q3SHADERINFO_COMPARE_END);</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">start2</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) (&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a>-&gt;shader.Q3SHADERINFO_COMPARE_START);</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>                <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcmp</a>(start, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">start2</a>, end - start))</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>                    <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;Shader &#39;%s&#39; already defined, ignoring mismatching redeclaration\n&quot;</span>, shader-&gt;<a class="code hl_variable" href="structshader__t.html#a04f86d7b8f169e8cab08662e7e4e4d50">name</a>);</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>                    <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;Shader &#39;%s&#39; already defined\n&quot;</span>, shader-&gt;<a class="code hl_variable" href="structshader__t.html#a04f86d7b8f169e8cab08662e7e4e4d50">name</a>);</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>            }</div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>        }</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastEntry</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a>;</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a>-&gt;chain;</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>    }</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>    <span class="keywordflow">while</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a> != <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>    {</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastEntry</a>-&gt;shader.name[0] != 0)</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>        {</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>            <span class="comment">/* Add to chain */</span></div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>            <a class="code hl_struct" href="structq3shader__hash__entry__t.html">q3shader_hash_entry_t</a>* <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newEntry</a> = (<a class="code hl_struct" href="structq3shader__hash__entry__t.html">q3shader_hash_entry_t</a>*)</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>              <a class="code hl_function" href="zone_8c.html#a6e8351ce990cc9c3c7eb1c6ac8c91921">Mem_ExpandableArray_AllocRecord</a> (&amp;<a class="code hl_variable" href="model__shared_8c.html#a83e42554be1ced79f6523bb26ef38fd1">q3shader_data</a>-&gt;<a class="code hl_variable" href="structq3shader__data__t.html#ac6f932972d7f821a276dc2ed3bfd38b4">hash_entries</a>);</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span> </div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>            <span class="keywordflow">while</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastEntry</a>-&gt;chain != <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastEntry</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastEntry</a>-&gt;<a class="code hl_variable" href="structq3shader__hash__entry__t.html#a1bd5bc74c956144bc754962eafe2c452">chain</a>;</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastEntry</a>-&gt;chain = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newEntry</a>;</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newEntry</a>-&gt;chain = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastEntry</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newEntry</a>;</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>        }</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>        <span class="comment">/* else: head of chain, in hash entry array */</span></div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastEntry</a>;</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>    }</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a> (&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a>-&gt;shader, shader, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sizeof</a> (<a class="code hl_struct" href="structshader__t.html">shader_t</a>));</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>}</div>
</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span> </div>
<div class="foldopen" id="foldopen01466" data-start="{" data-end="}">
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ad71d07321aafc07206c4853276ed4a69"> 1466</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#ad71d07321aafc07206c4853276ed4a69">Mod_LoadQ3Shaders</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>{</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>;</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a>;</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>    <a class="code hl_struct" href="structfssearch__t.html">fssearch_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>;</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>    <span class="keywordtype">char</span> *<a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>;</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *text;</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>    <a class="code hl_struct" href="structshader__t.html">shader_t</a> shader;</div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>    <a class="code hl_struct" href="structq3shaderinfo__layer__t.html">q3shaderinfo_layer_t</a> *<a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>;</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a>;</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_define" href="r__qshader_8h.html#a2e096f293c68b3ede9e0f08eca4a5aba">TEXTURE_MAXFRAMES</a> + 4][<a class="code hl_define" href="r__qshader_8h.html#a1e478e45b5d5c8a7d029358a80ba6232">Q3PATHLENGTH</a>];</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>    <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">custsurfaceparmnames</a>[256]; <span class="comment">// VorteX: q3map2 has 64 but well, someone will need more</span></div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">custsurfaceflags</a>[256]; </div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcustsurfaceflags</a>;</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> dpshaderkill;</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span> </div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>    <a class="code hl_function" href="model__shared_8c.html#ac09a298601daeda3aa5d20b005b5ddcd">Mod_FreeQ3Shaders</a>();</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span> </div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>    <a class="code hl_variable" href="model__shared_8c.html#aad0500eca89bdf3928091895b0ae35e3">q3shaders_mem</a> = <a class="code hl_define" href="zone_8h.html#a7da6ffdd01b3d31cb7c89e68fad87d0d">Mem_AllocPool</a>(<span class="stringliteral">&quot;q3shaders&quot;</span>, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>    <a class="code hl_variable" href="model__shared_8c.html#a83e42554be1ced79f6523bb26ef38fd1">q3shader_data</a> = (<a class="code hl_struct" href="structq3shader__data__t.html">q3shader_data_t</a>*)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a> (<a class="code hl_variable" href="model__shared_8c.html#aad0500eca89bdf3928091895b0ae35e3">q3shaders_mem</a>,</div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>        <span class="keyword">sizeof</span> (<a class="code hl_struct" href="structq3shader__data__t.html">q3shader_data_t</a>));</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>    <a class="code hl_function" href="zone_8c.html#a211e7367323b1791e87715797bdee714">Mem_ExpandableArray_NewArray</a> (&amp;<a class="code hl_variable" href="model__shared_8c.html#a83e42554be1ced79f6523bb26ef38fd1">q3shader_data</a>-&gt;<a class="code hl_variable" href="structq3shader__data__t.html#ac6f932972d7f821a276dc2ed3bfd38b4">hash_entries</a>,</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>        <a class="code hl_variable" href="model__shared_8c.html#aad0500eca89bdf3928091895b0ae35e3">q3shaders_mem</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sizeof</a> (<a class="code hl_struct" href="structq3shader__hash__entry__t.html">q3shader_hash_entry_t</a>), 256);</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>    <a class="code hl_function" href="zone_8c.html#a211e7367323b1791e87715797bdee714">Mem_ExpandableArray_NewArray</a> (&amp;<a class="code hl_variable" href="model__shared_8c.html#a83e42554be1ced79f6523bb26ef38fd1">q3shader_data</a>-&gt;<a class="code hl_variable" href="structq3shader__data__t.html#a7410df7a4f8a667d1c2f90f88242887e">char_ptrs</a>,</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>        <a class="code hl_variable" href="model__shared_8c.html#aad0500eca89bdf3928091895b0ae35e3">q3shaders_mem</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sizeof</a> (<span class="keywordtype">char</span>**), 256);</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span> </div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>    <span class="comment">// parse custinfoparms.txt</span></div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcustsurfaceflags</a> = 0;</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>    <span class="keywordflow">if</span> ((text = <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> = (<span class="keywordtype">char</span> *)<a class="code hl_function" href="fs_8c.html#a46b9b5ad3cc14f77ae63016505163128">FS_LoadFile</a>(<span class="stringliteral">&quot;scripts/custinfoparms.txt&quot;</span>, <a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, <span class="keyword">false</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) != <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>    {</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a>(&amp;text, <span class="keyword">false</span>) || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;{&quot;</span>))</div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>            <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;scripts/custinfoparms.txt: contentflags section parsing error - expected \&quot;{\&quot;, found \&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>);</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>        {</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>            <span class="keywordflow">while</span> (<a class="code hl_function" href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a>(&amp;text, <span class="keyword">false</span>))</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;}&quot;</span>))</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>            <span class="comment">// custom surfaceflags section</span></div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a>(&amp;text, <span class="keyword">false</span>) || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;{&quot;</span>))</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>                <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;scripts/custinfoparms.txt: surfaceflags section parsing error - expected \&quot;{\&quot;, found \&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>);</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>            {</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>                <span class="keywordflow">while</span>(<a class="code hl_function" href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a>(&amp;text, <span class="keyword">false</span>))</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>                {</div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;}&quot;</span>))</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>                        <span class="keywordflow">break</span>;  </div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>                    <span class="comment">// register surfaceflag</span></div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcustsurfaceflags</a> &gt;= 256)</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>                    {</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>                        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;scripts/custinfoparms.txt: surfaceflags section parsing error - max 256 surfaceflags exceeded\n&quot;</span>);</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>                    }</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>                    <span class="comment">// name</span></div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>)+1;</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">custsurfaceparmnames</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcustsurfaceflags</a>] = (<span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>);</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>                    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">custsurfaceparmnames</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcustsurfaceflags</a>], <a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>+1);</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>                    <span class="comment">// value</span></div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a>(&amp;text, <span class="keyword">false</span>))</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">custsurfaceflags</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcustsurfaceflags</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strtol</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">custsurfaceflags</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcustsurfaceflags</a>] = 0;</div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcustsurfaceflags</a>++;</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>                }</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>            }</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>        }</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>);</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>    }</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span> </div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>    <span class="comment">// parse shaders</span></div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a> = <a class="code hl_function" href="fs_8c.html#a637b96ed07f8e70398c51a8bc3ce4fb9">FS_Search</a>(<span class="stringliteral">&quot;scripts/*.shader&quot;</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>)</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>-&gt;numfilenames;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a>++)</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>    {</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>        text = <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> = (<span class="keywordtype">char</span> *)<a class="code hl_function" href="fs_8c.html#a46b9b5ad3cc14f77ae63016505163128">FS_LoadFile</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>-&gt;filenames[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a>], <a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, <span class="keyword">false</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>)</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>        <span class="keywordflow">while</span> (<a class="code hl_function" href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a>(&amp;text, <span class="keyword">false</span>))</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>        {</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a> (&amp;shader, 0, <span class="keyword">sizeof</span>(shader));</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>            shader.<a class="code hl_variable" href="structshader__t.html#a04f86d7b8f169e8cab08662e7e4e4d50">name</a>[0] = 0;</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>            shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> = 0;</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>            shader.<a class="code hl_variable" href="structshader__t.html#ab8ce3230e062308ee4ea9d0da945c210">surfaceflags</a> = 0;</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>            shader.<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> = 0;</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>            shader.<a class="code hl_variable" href="structshader__t.html#aa96c8223c06587a7ca1c30030a373bd0">numlayers</a> = 0;</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>            shader.<a class="code hl_variable" href="structshader__t.html#a5b56daef3c5d6d693b73dbc73a06af27">lighting</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>            shader.<a class="code hl_variable" href="structshader__t.html#a13731e5e8d7c966df81e803ae7d2368a">vertexalpha</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>            shader.<a class="code hl_variable" href="structshader__t.html#ab9eeca8e5121527e203776c4d333b761">textureblendalpha</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>            shader.<a class="code hl_variable" href="structshader__t.html#a5480ae700bd84b9967148de0afc5d691">skyboxname</a>[0] = 0;</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>            shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[0].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaab1a1c15957e617b5a85acaa18e1e1c18">Q3DEFORM_NONE</a>;</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>            shader.<a class="code hl_variable" href="structshader__t.html#a03e3be6db5a60f050c26a4d01ec60701">dpnortlight</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>            shader.<a class="code hl_variable" href="structshader__t.html#a59714fd7a75c389a72602215207f82dd">dpshadow</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>            shader.<a class="code hl_variable" href="structshader__t.html#a123f8d2e458dd97187b30ec4a564918f">dpnoshadow</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>            shader.<a class="code hl_variable" href="structshader__t.html#a864c77f1fa05593ec5e3befc413caa97">dpmeshcollisions</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>            shader.<a class="code hl_variable" href="structshader__t.html#aa67e889c11fa842037167b0ab978c591">dpshaderkill</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>            shader.<a class="code hl_variable" href="structshader__t.html#a7ae697c8f21a0710687079ce9c54e081">dpreflectcube</a>[0] = 0;</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>            shader.<a class="code hl_variable" href="structshader__t.html#a5b973133ac2e2d49ea28bb4f0c8fb7f9">reflectmin</a> = 0;</div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>            shader.<a class="code hl_variable" href="structshader__t.html#af24f9ce77f6e7db2105e3ad9676aaf6b">reflectmax</a> = 1;</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>            shader.<a class="code hl_variable" href="structshader__t.html#abe620e7927be8c1122e5615a6988df14">refractfactor</a> = 1;</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>            <a class="code hl_define" href="mathlib_8h.html#a14557f9ae9e8f7db1736479bc3eccc4b">Vector4Set</a>(shader.<a class="code hl_variable" href="structshader__t.html#a3b7bd21491a93c9dc085ee86f04e1225">refractcolor4f</a>, 1, 1, 1, 1);</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>            shader.<a class="code hl_variable" href="structshader__t.html#a64458e1116de103e04c3361a7a4507e0">reflectfactor</a> = 1;</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>            <a class="code hl_define" href="mathlib_8h.html#a14557f9ae9e8f7db1736479bc3eccc4b">Vector4Set</a>(shader.<a class="code hl_variable" href="structshader__t.html#a94476ad1f4ec595f138a797bce2dc87a">reflectcolor4f</a>, 1, 1, 1, 1);</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>            shader.<a class="code hl_variable" href="structshader__t.html#a49cbe4166396e1fde874324a5d05bd10">r_water_wateralpha</a> = 1;</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>            shader.<a class="code hl_variable" href="structshader__t.html#a0d49e0ea2cbd017995a718d52778c55d">r_water_waterscroll</a>[0] = 0;</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>            shader.<a class="code hl_variable" href="structshader__t.html#a0d49e0ea2cbd017995a718d52778c55d">r_water_waterscroll</a>[1] = 0;</div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>            shader.<a class="code hl_variable" href="structshader__t.html#a7029846f387cfc915959ebdf0c3e07ec">offsetmapping</a> = (<a class="code hl_variable" href="model__brush_8c.html#ab6d45f381afbd7c8c9959eac47a44cc6">mod_q3shader_default_offsetmapping</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>) ? <a class="code hl_enumvalue" href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dca117ca548e7750c4ed09cad4ba3f68eca">OFFSETMAPPING_DEFAULT</a> : <a class="code hl_enumvalue" href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dca2dc4b4e5f2053e46de9d4f0f18d1bfa9">OFFSETMAPPING_OFF</a>;</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>            shader.<a class="code hl_variable" href="structshader__t.html#a246cce197df8d819d0dd1a789e94d369">offsetscale</a> = <a class="code hl_variable" href="model__brush_8c.html#a7f00470ea93c0f84375f173474a7eecd">mod_q3shader_default_offsetmapping_scale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>            shader.<a class="code hl_variable" href="structshader__t.html#a9244e6191cf2618c0e6d20a7d5c85ada">offsetbias</a> = <a class="code hl_variable" href="model__brush_8c.html#a9eb6a9818cb417d26aa0ad5fb8f8317a">mod_q3shader_default_offsetmapping_bias</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>            shader.<a class="code hl_variable" href="structshader__t.html#ae914299869417c6f3b6c080c09bb8b31">biaspolygonoffset</a> = <a class="code hl_variable" href="model__brush_8c.html#a9bec9df854f7b675fcc53c8107d07fb1">mod_q3shader_default_polygonoffset</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>            shader.<a class="code hl_variable" href="structshader__t.html#a0f7658c88568548a3834f6ac649127f9">biaspolygonfactor</a> = <a class="code hl_variable" href="model__brush_8c.html#a5c53c9f45678f786c4d69e9de5a9f867">mod_q3shader_default_polygonfactor</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>            shader.<a class="code hl_variable" href="structshader__t.html#a285a128889a26a581d79f0c4b896e69e">transparentsort</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a72d5e32663fb1b0c369079ca0be01f37a2a635f265dd33d939e6dcd1482147080">TRANSPARENTSORT_DISTANCE</a>;</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>            shader.<a class="code hl_variable" href="structshader__t.html#a7fc5d523b40bd22a6cb6925a5324b149">specularscalemod</a> = 1;</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>            shader.<a class="code hl_variable" href="structshader__t.html#aadcb60b0d24f7bfc0cca20f59dfbcaf4">specularpowermod</a> = 1;</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>            shader.<a class="code hl_variable" href="structshader__t.html#afc99f5a477692440bc9b1dfd7de3a673">rtlightambient</a> = 0;</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>            <span class="comment">// WHEN ADDING DEFAULTS HERE, REMEMBER TO PUT DEFAULTS IN ALL LOADERS</span></div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>            <span class="comment">// JUST GREP FOR &quot;specularscalemod = 1&quot;.</span></div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span> </div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>            <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(shader.<a class="code hl_variable" href="structshader__t.html#a04f86d7b8f169e8cab08662e7e4e4d50">name</a>, <a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="keyword">sizeof</span>(shader.<a class="code hl_variable" href="structshader__t.html#a04f86d7b8f169e8cab08662e7e4e4d50">name</a>));</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a>(&amp;text, <span class="keyword">false</span>) || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;{&quot;</span>))</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>            {</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>                <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;%s parsing error - expected \&quot;{\&quot;, found \&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>-&gt;filenames[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a>], <a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>);</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>            }</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>            <span class="keywordflow">while</span> (<a class="code hl_function" href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a>(&amp;text, <span class="keyword">false</span>))</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>            {</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;}&quot;</span>))</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;{&quot;</span>))</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>                {</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>                    <span class="keyword">static</span> <a class="code hl_struct" href="structq3shaderinfo__layer__t.html">q3shaderinfo_layer_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dummy</a>;</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>                    <span class="keywordflow">if</span> (shader.<a class="code hl_variable" href="structshader__t.html#aa96c8223c06587a7ca1c30030a373bd0">numlayers</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a722bc59e32d2f51daac962c7d0af6647">Q3SHADER_MAXLAYERS</a>)</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>                    {</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a> = shader.<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a> + shader.<a class="code hl_variable" href="structshader__t.html#aa96c8223c06587a7ca1c30030a373bd0">numlayers</a>++;</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>                    }</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>                    {</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>                        <span class="comment">// parse and process it anyway, just don&#39;t store it (so a map $lightmap or such stuff still is found)</span></div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dummy</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dummy</a>));</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a> = &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dummy</a>;</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>                    }</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.rgbgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a96b64b3760bf2da76ccfffbcef6cba3f">Q3RGBGEN_IDENTITY</a>;</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.alphagen = <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a8ec118630e16364afa8808a4e52cebc8">Q3ALPHAGEN_IDENTITY</a>;</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcgen.tcgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a9c334491e333d0667b0d7b9a1620fbabaed717f6b2fa91547d92f9473af302f2b">Q3TCGEN_TEXTURE</a>;</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[0] = <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>;</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[1] = <a class="code hl_define" href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>;</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>                    <span class="keywordflow">while</span> (<a class="code hl_function" href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a>(&amp;text, <span class="keyword">false</span>))</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>                    {</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>                        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;}&quot;</span>))</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>                        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;\n&quot;</span>))</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> = 0;</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>                        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;\n&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;}&quot;</span>);<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>                        {</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>                            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a2e096f293c68b3ede9e0f08eca4a5aba">TEXTURE_MAXFRAMES</a> + 4)</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>                            {</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>                                <span class="comment">// remap dp_water to dpwater, dp_reflect to dpreflect, etc.</span></div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>                                <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> == 0 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strncasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;dp_&quot;</span>, 3))</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>                                    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>], <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]), <span class="stringliteral">&quot;dp%s&quot;</span>, &amp;<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>[3]);</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>                                <span class="keywordflow">else</span></div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>                                    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>], <a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]));</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>                                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> + 1;</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>                            }</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>                            <span class="keywordflow">if</span> (!<a class="code hl_function" href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a>(&amp;text, <span class="keyword">true</span>))</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>                        }</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>                        <span class="comment">//for (j = numparameters;j &lt; TEXTURE_MAXFRAMES + 4;j++)</span></div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>                        <span class="comment">//  parameter[j][0] = 0;</span></div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a06cd17fda23f6e2ebefe0b614679de99">developer_insane</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>                        {</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>                            <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;%s %i: &quot;</span>, shader.<a class="code hl_variable" href="structshader__t.html#a04f86d7b8f169e8cab08662e7e4e4d50">name</a>, shader.<a class="code hl_variable" href="structshader__t.html#aa96c8223c06587a7ca1c30030a373bd0">numlayers</a> - 1);</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>                            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>                                <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot; %s&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]);</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>                            <a class="code hl_function" href="console_8c.html#aae665de4dbcbf2047ee305901e2f6627">Con_DPrint</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>                        }</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;blendfunc&quot;</span>))</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>                        {</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>                            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> == 2)</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>                            {</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>                                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;add&quot;</span>))</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>                                {</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>                                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[0] = <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>;</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>                                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[1] = <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>;</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>                                }</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;addalpha&quot;</span>))</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>                                {</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>                                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[0] = <a class="code hl_define" href="glquake_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a>;</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>                                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[1] = <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>;</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>                                }</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;filter&quot;</span>))</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>                                {</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>                                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[0] = <a class="code hl_define" href="glquake_8h.html#acd2abef6afceea16ef19a117ae7fc3eb">GL_DST_COLOR</a>;</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>                                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[1] = <a class="code hl_define" href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>;</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>                                }</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;blend&quot;</span>))</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>                                {</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>                                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[0] = <a class="code hl_define" href="glquake_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a>;</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>                                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[1] = <a class="code hl_define" href="glquake_8h.html#aa3926eb5e008f14829baa8d72435215f">GL_ONE_MINUS_SRC_ALPHA</a>;</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>                                }</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>                            }</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> == 3)</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>                            {</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>                                <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>;</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>                                <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> &lt; 2;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>++)</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>                                {</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>                                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>+1], <span class="stringliteral">&quot;GL_ONE&quot;</span>))</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>                                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>;</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>                                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>+1], <span class="stringliteral">&quot;GL_ZERO&quot;</span>))</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>                                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = <a class="code hl_define" href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>;</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>                                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>+1], <span class="stringliteral">&quot;GL_SRC_COLOR&quot;</span>))</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>                                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = <a class="code hl_define" href="glquake_8h.html#a6adf6cffd6e7fc49298982128155b8dd">GL_SRC_COLOR</a>;</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>                                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>+1], <span class="stringliteral">&quot;GL_SRC_ALPHA&quot;</span>))</div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>                                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = <a class="code hl_define" href="glquake_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a>;</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>                                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>+1], <span class="stringliteral">&quot;GL_DST_COLOR&quot;</span>))</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>                                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = <a class="code hl_define" href="glquake_8h.html#acd2abef6afceea16ef19a117ae7fc3eb">GL_DST_COLOR</a>;</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>                                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>+1], <span class="stringliteral">&quot;GL_DST_ALPHA&quot;</span>))</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>                                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = <a class="code hl_define" href="glquake_8h.html#ab4dcc8a1804d164d5f4dbba427b5672c">GL_DST_ALPHA</a>;</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>                                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>+1], <span class="stringliteral">&quot;GL_ONE_MINUS_SRC_COLOR&quot;</span>))</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>                                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = <a class="code hl_define" href="glquake_8h.html#afae62364eab2dc69c95b17363ba687f4">GL_ONE_MINUS_SRC_COLOR</a>;</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>                                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>+1], <span class="stringliteral">&quot;GL_ONE_MINUS_SRC_ALPHA&quot;</span>))</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>                                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = <a class="code hl_define" href="glquake_8h.html#aa3926eb5e008f14829baa8d72435215f">GL_ONE_MINUS_SRC_ALPHA</a>;</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>                                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>+1], <span class="stringliteral">&quot;GL_ONE_MINUS_DST_COLOR&quot;</span>))</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>                                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = <a class="code hl_define" href="glquake_8h.html#a4af4fbff7e4f93998f5bf914b19bd1dc">GL_ONE_MINUS_DST_COLOR</a>;</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>                                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>+1], <span class="stringliteral">&quot;GL_ONE_MINUS_DST_ALPHA&quot;</span>))</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>                                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = <a class="code hl_define" href="glquake_8h.html#a41dd3137d362319dcf68b387b2eb9866">GL_ONE_MINUS_DST_ALPHA</a>;</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>                                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>; <span class="comment">// default in case of parsing error</span></div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>                                }</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>                            }</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>                        }</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;alphafunc&quot;</span>))</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>                            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphatest = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2 &amp;&amp; (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;map&quot;</span>) || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;clampmap&quot;</span>)))</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>                        {</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>                            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;clampmap&quot;</span>))</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>                                <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;clampmap = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>                            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;numframes = 1;</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>                            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;framerate = 1;</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>                            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;texturename = (<span class="keywordtype">char</span>**)<a class="code hl_function" href="zone_8c.html#a6e8351ce990cc9c3c7eb1c6ac8c91921">Mem_ExpandableArray_AllocRecord</a> (</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>                                &amp;<a class="code hl_variable" href="model__shared_8c.html#a83e42554be1ced79f6523bb26ef38fd1">q3shader_data</a>-&gt;<a class="code hl_variable" href="structq3shader__data__t.html#a7410df7a4f8a667d1c2f90f88242887e">char_ptrs</a>);</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>                            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;texturename[0] = <a class="code hl_define" href="zone_8h.html#a7971beb752868216b6887b77086ce57b">Mem_strdup</a> (<a class="code hl_variable" href="model__shared_8c.html#aad0500eca89bdf3928091895b0ae35e3">q3shaders_mem</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>                            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;$lightmap&quot;</span>))</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>                                shader.<a class="code hl_variable" href="structshader__t.html#a5b56daef3c5d6d693b73dbc73a06af27">lighting</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>                        }</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 3 &amp;&amp; (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;animmap&quot;</span>) || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;animclampmap&quot;</span>)))</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>                        {</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>                            <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>                            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;numframes = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> - 2, <a class="code hl_define" href="r__qshader_8h.html#a2e096f293c68b3ede9e0f08eca4a5aba">TEXTURE_MAXFRAMES</a>);</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>                            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;framerate = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>                            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;texturename = (<span class="keywordtype">char</span> **) <a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a> (<a class="code hl_variable" href="model__shared_8c.html#aad0500eca89bdf3928091895b0ae35e3">q3shaders_mem</a>, <span class="keyword">sizeof</span> (<span class="keywordtype">char</span>*) * <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;numframes);</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>                            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;numframes;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>                                <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;texturename[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_define" href="zone_8h.html#a7971beb752868216b6887b77086ce57b">Mem_strdup</a> (<a class="code hl_variable" href="model__shared_8c.html#aad0500eca89bdf3928091895b0ae35e3">q3shaders_mem</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 2]);</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>                        }</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;rgbgen&quot;</span>))</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>                        {</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>                            <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>                            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> - 2 &amp;&amp; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a4983e14714c6f99240cf7521ddb94549">Q3RGBGEN_MAXPARMS</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>                                <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.parms[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>+2]);</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>                                 <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;identity&quot;</span>))         <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.rgbgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a96b64b3760bf2da76ccfffbcef6cba3f">Q3RGBGEN_IDENTITY</a>;</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;const&quot;</span>))            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.rgbgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a31b6d46289ceb50b26dce8b3652082f1">Q3RGBGEN_CONST</a>;</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;entity&quot;</span>))           <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.rgbgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8ab8b2c2afebafb17837a46e25d05d14c1">Q3RGBGEN_ENTITY</a>;</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;exactvertex&quot;</span>))      <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.rgbgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8ace1cfdf2b63704ee8c6ff92762a09a16">Q3RGBGEN_EXACTVERTEX</a>;</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;identitylighting&quot;</span>)) <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.rgbgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a615fe6b32d13e15ad09002f23bfa2758">Q3RGBGEN_IDENTITYLIGHTING</a>;</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;lightingdiffuse&quot;</span>))  <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.rgbgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a2065a65ea0867a11ec5500650ecf62f3">Q3RGBGEN_LIGHTINGDIFFUSE</a>;</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;oneminusentity&quot;</span>))   <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.rgbgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a72736d6839203b048caf9d5574bf67d3">Q3RGBGEN_ONEMINUSENTITY</a>;</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;oneminusvertex&quot;</span>))   <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.rgbgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8aabe865b82975d2ffed672141e1da1591">Q3RGBGEN_ONEMINUSVERTEX</a>;</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;vertex&quot;</span>))           <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.rgbgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a1cdf35083cb0fab3bcda2afb32fcef62">Q3RGBGEN_VERTEX</a>;</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;wave&quot;</span>))</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>                            {</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>                                <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.rgbgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a485c2a18cb8aefa49cbb470ac0184837">Q3RGBGEN_WAVE</a>;</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>                                <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.wavefunc = <a class="code hl_function" href="model__shared_8c.html#ab3c38940592b16865aefdfce14fed8e4">Mod_LoadQ3Shaders_EnumerateWaveFunc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[2]);</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>                                <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> - 3 &amp;&amp; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a2e0c69195e0662ea4d3ea889b934f7db">Q3WAVEPARMS</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>                                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.waveparms[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>+3]);</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>                            }</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>                            <span class="keywordflow">else</span> <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;%s parsing warning: unknown rgbgen %s\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>-&gt;filenames[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>                        }</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;alphagen&quot;</span>))</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>                        {</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>                            <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>                            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> - 2 &amp;&amp; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a3a80be4ea8ab89ee174f4122a7f32bc5">Q3ALPHAGEN_MAXPARMS</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>                                <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.parms[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>+2]);</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>                                 <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;identity&quot;</span>))         <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.alphagen = <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a8ec118630e16364afa8808a4e52cebc8">Q3ALPHAGEN_IDENTITY</a>;</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;const&quot;</span>))            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.alphagen = <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a9f5381db044d678d5a1820ded83880dc">Q3ALPHAGEN_CONST</a>;</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;entity&quot;</span>))           <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.alphagen = <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7ab63f153c2910f5b5818baf2fd3101525">Q3ALPHAGEN_ENTITY</a>;</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;lightingspecular&quot;</span>)) <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.alphagen = <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a1a8064ffa2973a0ecd4784e3159f6ceb">Q3ALPHAGEN_LIGHTINGSPECULAR</a>;</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;oneminusentity&quot;</span>))   <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.alphagen = <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a5efd66526c14b417576ddb0a5bc2fcac">Q3ALPHAGEN_ONEMINUSENTITY</a>;</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;oneminusvertex&quot;</span>))   <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.alphagen = <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a84c0baa8342eb2b19d4c2ccc454eba80">Q3ALPHAGEN_ONEMINUSVERTEX</a>;</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;portal&quot;</span>))           <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.alphagen = <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a9859a10c69ff50cb42e7819c03d991a6">Q3ALPHAGEN_PORTAL</a>;</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;vertex&quot;</span>))           <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.alphagen = <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a9709d6c1c915d4758713f89aff18c971">Q3ALPHAGEN_VERTEX</a>;</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;wave&quot;</span>))</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>                            {</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>                                <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.alphagen = <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a5f2872650868507664bbd33db92f7671">Q3ALPHAGEN_WAVE</a>;</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>                                <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.wavefunc = <a class="code hl_function" href="model__shared_8c.html#ab3c38940592b16865aefdfce14fed8e4">Mod_LoadQ3Shaders_EnumerateWaveFunc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[2]);</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>                                <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> - 3 &amp;&amp; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a2e0c69195e0662ea4d3ea889b934f7db">Q3WAVEPARMS</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>                                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.waveparms[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>+3]);</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>                            }</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>                            <span class="keywordflow">else</span> <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;%s parsing warning: unknown alphagen %s\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>-&gt;filenames[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>                        }</div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2 &amp;&amp; (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;texgen&quot;</span>) || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;tcgen&quot;</span>)))</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>                        {</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>                            <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>                            <span class="comment">// observed values: tcgen environment</span></div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>                            <span class="comment">// no other values have been observed in real shaders</span></div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>                            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> - 2 &amp;&amp; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#aa4a5ae1817ae6a524ced279fc9f535db">Q3TCGEN_MAXPARMS</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>                                <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcgen.parms[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>+2]);</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>                                 <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;base&quot;</span>))        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcgen.tcgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a9c334491e333d0667b0d7b9a1620fbabaed717f6b2fa91547d92f9473af302f2b">Q3TCGEN_TEXTURE</a>;</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;texture&quot;</span>))     <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcgen.tcgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a9c334491e333d0667b0d7b9a1620fbabaed717f6b2fa91547d92f9473af302f2b">Q3TCGEN_TEXTURE</a>;</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;environment&quot;</span>)) <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcgen.tcgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a9c334491e333d0667b0d7b9a1620fbabac05a81197f54f77e3a6ad88280c0746f">Q3TCGEN_ENVIRONMENT</a>;</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;lightmap&quot;</span>))    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcgen.tcgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a9c334491e333d0667b0d7b9a1620fbabac530014d74401961953309d38699a346">Q3TCGEN_LIGHTMAP</a>;</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;vector&quot;</span>))      <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcgen.tcgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a9c334491e333d0667b0d7b9a1620fbaba88311f5efe7f1278b9249a2224267823">Q3TCGEN_VECTOR</a>;</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>                            <span class="keywordflow">else</span> <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;%s parsing warning: unknown tcgen mode %s\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>-&gt;filenames[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>                        }</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;tcmod&quot;</span>))</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>                        {</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>                            <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>;</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>                            <span class="comment">// observed values:</span></div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>                            <span class="comment">// tcmod rotate #</span></div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>                            <span class="comment">// tcmod scale # #</span></div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>                            <span class="comment">// tcmod scroll # #</span></div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>                            <span class="comment">// tcmod stretch sin # # # #</span></div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>                            <span class="comment">// tcmod stretch triangle # # # #</span></div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>                            <span class="comment">// tcmod transform # # # # # #</span></div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>                            <span class="comment">// tcmod turb # # # #</span></div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>                            <span class="comment">// tcmod turb sin # # # #  (this is bogus)</span></div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>                            <span class="comment">// no other values have been observed in real shaders</span></div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>                            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a436104f4f242119bf3f431500edf02e6">Q3MAXTCMODS</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>++)</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>                                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>].tcmod)</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>                            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a436104f4f242119bf3f431500edf02e6">Q3MAXTCMODS</a>)</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>                            {</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>                                <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> - 2 &amp;&amp; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a26452611d6f59387ae63daa57b8ed46c">Q3TCMOD_MAXPARMS</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>                                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>].parms[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>+2]);</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>                                     <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;entitytranslate&quot;</span>)) <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>].tcmod = <a class="code hl_enumvalue" href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4a74d014551b5fb979ae1828a4859eaa2a">Q3TCMOD_ENTITYTRANSLATE</a>;</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;rotate&quot;</span>))          <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>].tcmod = <a class="code hl_enumvalue" href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4a4bd0dda04a911b9e907c7a9c064e7d1a">Q3TCMOD_ROTATE</a>;</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;scale&quot;</span>))           <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>].tcmod = <a class="code hl_enumvalue" href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4a2aad04036c0185ba499a8df3bbd41589">Q3TCMOD_SCALE</a>;</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;scroll&quot;</span>))          <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>].tcmod = <a class="code hl_enumvalue" href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4abda63ee69b542e0a5a392d56f0118dcd">Q3TCMOD_SCROLL</a>;</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;page&quot;</span>))            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>].tcmod = <a class="code hl_enumvalue" href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4ac4fe25b0efd1bd14f51db370acf8f39a">Q3TCMOD_PAGE</a>;</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;stretch&quot;</span>))</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>                                {</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>                                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>].tcmod = <a class="code hl_enumvalue" href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4ad088a184ff36c830fd645124cda79fd6">Q3TCMOD_STRETCH</a>;</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>                                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>].wavefunc = <a class="code hl_function" href="model__shared_8c.html#ab3c38940592b16865aefdfce14fed8e4">Mod_LoadQ3Shaders_EnumerateWaveFunc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[2]);</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>                                    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> - 3 &amp;&amp; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a2e0c69195e0662ea4d3ea889b934f7db">Q3WAVEPARMS</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>                                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>].waveparms[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>+3]);</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>                                }</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;transform&quot;</span>))       <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>].tcmod = <a class="code hl_enumvalue" href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4a8b1dee1775d78f6d11a476919d480951">Q3TCMOD_TRANSFORM</a>;</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;turb&quot;</span>))            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tcmodindex</a>].tcmod = <a class="code hl_enumvalue" href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4acec35df41b96fe5e2d5fdcbb9fe60169">Q3TCMOD_TURBULENT</a>;</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>                                <span class="keywordflow">else</span> <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;%s parsing warning: unknown tcmod mode %s\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>-&gt;filenames[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>                            }</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>                            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>                                <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;%s parsing warning: too many tcmods on one layer\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>-&gt;filenames[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a>]);</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>                        }</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>                        <span class="comment">// break out a level if it was a closing brace (not using the character here to not confuse vim)</span></div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>                        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;}&quot;</span>))</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>                    }</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.rgbgen == <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a2065a65ea0867a11ec5500650ecf62f3">Q3RGBGEN_LIGHTINGDIFFUSE</a> || <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen.rgbgen == <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a1cdf35083cb0fab3bcda2afb32fcef62">Q3RGBGEN_VERTEX</a>)</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>                        shader.<a class="code hl_variable" href="structshader__t.html#a5b56daef3c5d6d693b73dbc73a06af27">lighting</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen.alphagen == <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a9709d6c1c915d4758713f89aff18c971">Q3ALPHAGEN_VERTEX</a>)</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>                    {</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a> == shader.<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a> + 0)</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>                        {</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>                            <span class="comment">// vertex controlled transparency</span></div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>                            shader.<a class="code hl_variable" href="structshader__t.html#a13731e5e8d7c966df81e803ae7d2368a">vertexalpha</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>                        }</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>                        <span class="keywordflow">else</span></div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>                        {</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>                            <span class="comment">// multilayer terrain shader or similar</span></div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>                            shader.<a class="code hl_variable" href="structshader__t.html#ab9eeca8e5121527e203776c4d333b761">textureblendalpha</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>                            <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__brush_8c.html#aea0489ce67107ae72e326ae291e54551">mod_q3shader_force_terrain_alphaflag</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>                                shader.<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a5f9d8e1cbd836090bbfa3f7893dbb265">dptexflags</a> |= <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a>;</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>                        }</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>                    }</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span> </div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>                    <span class="keywordflow">if</span>(<a class="code hl_variable" href="model__brush_8c.html#a225a2689c7f8a4f64afd0f7f82ac8c6e">mod_q3shader_force_addalpha</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>                    {</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>                        <span class="comment">// for a long while, DP treated GL_ONE GL_ONE as GL_SRC_ALPHA GL_ONE</span></div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>                        <span class="comment">// this cvar brings back this behaviour</span></div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>                        <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[0] == <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[1] == <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>)</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>                            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[0] = <a class="code hl_define" href="glquake_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a>;</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>                    }</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>                    </div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>                    <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;dptexflags = 0;</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphatest)</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;dptexflags |= <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a>;</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>                    <span class="keywordflow">switch</span>(<a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[0])</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>                    {</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>                        <span class="keywordflow">case</span> <a class="code hl_define" href="glquake_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a>:</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>                        <span class="keywordflow">case</span> <a class="code hl_define" href="glquake_8h.html#aa3926eb5e008f14829baa8d72435215f">GL_ONE_MINUS_SRC_ALPHA</a>:</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>                            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;dptexflags |= <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a>;</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>                    }</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>                    <span class="keywordflow">switch</span>(<a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[1])</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>                    {</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>                        <span class="keywordflow">case</span> <a class="code hl_define" href="glquake_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a>:</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>                        <span class="keywordflow">case</span> <a class="code hl_define" href="glquake_8h.html#aa3926eb5e008f14829baa8d72435215f">GL_ONE_MINUS_SRC_ALPHA</a>:</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>                            <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;dptexflags |= <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a>;</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>                    }</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>                    <span class="keywordflow">if</span> (!(shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a4ebac751fc53d9ca7a56a96318e24e9a">Q3SURFACEPARM_NOMIPMAPS</a>))</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;dptexflags |= <a class="code hl_define" href="r__textures_8h.html#a7ed15e202aa5ce1ef37ef412348a6468">TEXF_MIPMAP</a>;</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>                    <span class="keywordflow">if</span> (!(shader.<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> &amp; <a class="code hl_define" href="r__qshader_8h.html#a29443bdda5bda7d8d4285f12a0e9190d">Q3TEXTUREFLAG_NOPICMIP</a>))</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;dptexflags |= <a class="code hl_define" href="r__textures_8h.html#a1e458ef28d5c5978bc1315f4a5b54aef">TEXF_PICMIP</a> | <a class="code hl_define" href="r__textures_8h.html#ab19c18de47f490e8f226052c34b577b8">TEXF_COMPRESS</a>;</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;clampmap)</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>                        <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;dptexflags |= <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a>;</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>                }</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> = 0;</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>                <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;\n&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;}&quot;</span>);<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>                {</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a2e096f293c68b3ede9e0f08eca4a5aba">TEXTURE_MAXFRAMES</a> + 4)</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>                    {</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>                        <span class="comment">// remap dp_water to dpwater, dp_reflect to dpreflect, etc.</span></div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>                        <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> == 0 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strncasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;dp_&quot;</span>, 3))</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>                            <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>], <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]), <span class="stringliteral">&quot;dp%s&quot;</span>, &amp;<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>[3]);</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>                        <span class="keywordflow">else</span></div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>                            <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>], <a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]));</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> + 1;</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>                    }</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a>(&amp;text, <span class="keyword">true</span>))</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>                }</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>                <span class="comment">//for (j = numparameters;j &lt; TEXTURE_MAXFRAMES + 4;j++)</span></div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>                <span class="comment">//  parameter[j][0] = 0;</span></div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a> == 0 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;}&quot;</span>))</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a06cd17fda23f6e2ebefe0b614679de99">developer_insane</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>                {</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>                    <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;%s: &quot;</span>, shader.<a class="code hl_variable" href="structshader__t.html#a04f86d7b8f169e8cab08662e7e4e4d50">name</a>);</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>                    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>                        <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot; %s&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]);</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>                    <a class="code hl_function" href="console_8c.html#aae665de4dbcbf2047ee305901e2f6627">Con_DPrint</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>                }</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &lt; 1)</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;surfaceparm&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2)</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>                {</div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;alphashadow&quot;</span>))</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#ad90cf96114e59cdded617dbcf1f79d6d">Q3SURFACEPARM_ALPHASHADOW</a>;</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;areaportal&quot;</span>))</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#afa1e37855af103a1dcbf1c0f83cc3e21">Q3SURFACEPARM_AREAPORTAL</a>;</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;botclip&quot;</span>))</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#adfb3c4a2bb05352e6559c54917fbaf59">Q3SURFACEPARM_BOTCLIP</a>;</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;clusterportal&quot;</span>))</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a51b0446289ccbfa017b1907f3de2f877">Q3SURFACEPARM_CLUSTERPORTAL</a>;</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;detail&quot;</span>))</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#aefae4c6078ea0a5ad6ffdffa46a29acb">Q3SURFACEPARM_DETAIL</a>;</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;donotenter&quot;</span>))</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#af76390044b0a020204b68f5ca543bfeb">Q3SURFACEPARM_DONOTENTER</a>;</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;dust&quot;</span>))</div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#ae10d4e2a32aea1b5cd5563596c22c033">Q3SURFACEPARM_DUST</a>;</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;hint&quot;</span>))</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#afe7ba04c1a61e044c73bc3c5f9b4d8aa">Q3SURFACEPARM_HINT</a>;</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;fog&quot;</span>))</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a3c895f98528a0954a24b3726c4a87f4e">Q3SURFACEPARM_FOG</a>;</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;lava&quot;</span>))</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a87aeb6af078d63bf2908c682e390c5bc">Q3SURFACEPARM_LAVA</a>;</div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;lightfilter&quot;</span>))</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#aa7348111d6ef7c8609c0801e25556aa1">Q3SURFACEPARM_LIGHTFILTER</a>;</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;lightgrid&quot;</span>))</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#afcc3bc431a146072f283d63e3cf4434e">Q3SURFACEPARM_LIGHTGRID</a>;</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;metalsteps&quot;</span>))</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a7aece79ccef18bc43b15a75c61f2fd88">Q3SURFACEPARM_METALSTEPS</a>;</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;nodamage&quot;</span>))</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a5c1521ef1bd61bebcd96be307ca953df">Q3SURFACEPARM_NODAMAGE</a>;</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;nodlight&quot;</span>))</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#afa8334a4ee597e27ff4f30137291e302">Q3SURFACEPARM_NODLIGHT</a>;</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;nodraw&quot;</span>))</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a7bf4cf654a277c3b31cf843bca788ee1">Q3SURFACEPARM_NODRAW</a>;</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;nodrop&quot;</span>))</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a3d16680d0ae45a060ab7c17b9b46c82e">Q3SURFACEPARM_NODROP</a>;</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;noimpact&quot;</span>))</div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a1df96e3aa46b1e0d6b6579f17c80e281">Q3SURFACEPARM_NOIMPACT</a>;</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;nolightmap&quot;</span>))</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a7f96e9fc81c806967ec292c1de1c083a">Q3SURFACEPARM_NOLIGHTMAP</a>;</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;nomarks&quot;</span>))</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#aa946b0630850bfc47b20c1831114a4a7">Q3SURFACEPARM_NOMARKS</a>;</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;nomipmaps&quot;</span>))</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a4ebac751fc53d9ca7a56a96318e24e9a">Q3SURFACEPARM_NOMIPMAPS</a>;</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;nonsolid&quot;</span>))</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a336880b416d3577c377b4be4101a31f5">Q3SURFACEPARM_NONSOLID</a>;</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;origin&quot;</span>))</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#aace9a283b783a86d5221cf3839116b40">Q3SURFACEPARM_ORIGIN</a>;</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;playerclip&quot;</span>))</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a033bc5aeb3c34f7ec361d8e8a9c9eddf">Q3SURFACEPARM_PLAYERCLIP</a>;</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;sky&quot;</span>))</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#aa2adaaf35359aff25e8edd7d80a9d02d">Q3SURFACEPARM_SKY</a>;</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;slick&quot;</span>))</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a5d166089e7250d935e112267e1dba1d0">Q3SURFACEPARM_SLICK</a>;</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;slime&quot;</span>))</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a8ed52380b620b1d0bf5c8688c23b2254">Q3SURFACEPARM_SLIME</a>;</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;structural&quot;</span>))</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a2414939f5d83172dfbde1558ea62ce12">Q3SURFACEPARM_STRUCTURAL</a>;</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;trans&quot;</span>))</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a391f4fc293d177e0812f34c67973727b">Q3SURFACEPARM_TRANS</a>;</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;water&quot;</span>))</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#aeb4b632227e7b1bd0f566a8ac3fd3c66">Q3SURFACEPARM_WATER</a>;</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;pointlight&quot;</span>))</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#af015098c6c74b387544d54e7f1ed8c27">Q3SURFACEPARM_POINTLIGHT</a>;</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;antiportal&quot;</span>))</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>                        shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#aa8ecf0f60fa234b2192a3ab9670d59fa">Q3SURFACEPARM_ANTIPORTAL</a>;</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;skip&quot;</span>))</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>                        ; <span class="comment">// shader.surfaceparms |= Q3SURFACEPARM_SKIP; FIXME we don&#39;t have enough #defines for this any more, and the engine doesn&#39;t need this one anyway</span></div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>                    {</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>                        <span class="comment">// try custom surfaceparms</span></div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>                        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcustsurfaceflags</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>                        {</div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>                            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">custsurfaceparmnames</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]))</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>                            {</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>                                shader.<a class="code hl_variable" href="structshader__t.html#ab8ce3230e062308ee4ea9d0da945c210">surfaceflags</a> |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">custsurfaceflags</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>];</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>                            }</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>                        }</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>                        <span class="comment">// failed all</span></div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcustsurfaceflags</a>)</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>                            <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;%s parsing warning: unknown surfaceparm \&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>-&gt;filenames[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>                    }</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>                }</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpshadow&quot;</span>))</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>                    shader.<a class="code hl_variable" href="structshader__t.html#a59714fd7a75c389a72602215207f82dd">dpshadow</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpnoshadow&quot;</span>))</div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>                    shader.<a class="code hl_variable" href="structshader__t.html#a123f8d2e458dd97187b30ec4a564918f">dpnoshadow</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpnortlight&quot;</span>))</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>                    shader.<a class="code hl_variable" href="structshader__t.html#a03e3be6db5a60f050c26a4d01ec60701">dpnortlight</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpreflectcube&quot;</span>))</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>                    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(shader.<a class="code hl_variable" href="structshader__t.html#a7ae697c8f21a0710687079ce9c54e081">dpreflectcube</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="keyword">sizeof</span>(shader.<a class="code hl_variable" href="structshader__t.html#a7ae697c8f21a0710687079ce9c54e081">dpreflectcube</a>));</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpmeshcollisions&quot;</span>))</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>                    shader.<a class="code hl_variable" href="structshader__t.html#a864c77f1fa05593ec5e3befc413caa97">dpmeshcollisions</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>                <span class="comment">// this sets dpshaderkill to true if dpshaderkillifcvarzero was used, and to false if dpnoshaderkillifcvarzero was used</span></div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((dpshaderkill = !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpshaderkillifcvarzero&quot;</span>)) || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpnoshaderkillifcvarzero&quot;</span>)) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2)</div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>                {</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="cvar_8c.html#a1e6c6ddcc2cbac3e571e97d349c51c2f">Cvar_VariableValue</a>(&amp;<a class="code hl_variable" href="cvar_8c.html#a71b1f2a204cebd68e6bc4790b9ac4258">cvars_all</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], ~0) == 0.0f)</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>                        shader.<a class="code hl_variable" href="structshader__t.html#aa67e889c11fa842037167b0ab978c591">dpshaderkill</a> = dpshaderkill;</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>                }</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>                <span class="comment">// this sets dpshaderkill to true if dpshaderkillifcvar was used, and to false if dpnoshaderkillifcvar was used</span></div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((dpshaderkill = !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpshaderkillifcvar&quot;</span>)) || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpnoshaderkillifcvar&quot;</span>)) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2)</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>                {</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>                    <span class="keyword">const</span> <span class="keywordtype">char</span> *op = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 3)</div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>                        op = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[2];</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>                    <span class="keywordflow">if</span>(!op)</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>                    {</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="cvar_8c.html#a1e6c6ddcc2cbac3e571e97d349c51c2f">Cvar_VariableValue</a>(&amp;<a class="code hl_variable" href="cvar_8c.html#a71b1f2a204cebd68e6bc4790b9ac4258">cvars_all</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], ~0) != 0.0f)</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>                            shader.<a class="code hl_variable" href="structshader__t.html#aa67e889c11fa842037167b0ab978c591">dpshaderkill</a> = dpshaderkill;</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>                    }</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 4 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(op, <span class="stringliteral">&quot;==&quot;</span>))</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>                    {</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="cvar_8c.html#a1e6c6ddcc2cbac3e571e97d349c51c2f">Cvar_VariableValue</a>(&amp;<a class="code hl_variable" href="cvar_8c.html#a71b1f2a204cebd68e6bc4790b9ac4258">cvars_all</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], ~0) == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3]))</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>                            shader.<a class="code hl_variable" href="structshader__t.html#aa67e889c11fa842037167b0ab978c591">dpshaderkill</a> = dpshaderkill;</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>                    }</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 4 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(op, <span class="stringliteral">&quot;!=&quot;</span>))</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>                    {</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="cvar_8c.html#a1e6c6ddcc2cbac3e571e97d349c51c2f">Cvar_VariableValue</a>(&amp;<a class="code hl_variable" href="cvar_8c.html#a71b1f2a204cebd68e6bc4790b9ac4258">cvars_all</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], ~0) != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3]))</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>                            shader.<a class="code hl_variable" href="structshader__t.html#aa67e889c11fa842037167b0ab978c591">dpshaderkill</a> = dpshaderkill;</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>                    }</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 4 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(op, <span class="stringliteral">&quot;&gt;&quot;</span>))</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>                    {</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="cvar_8c.html#a1e6c6ddcc2cbac3e571e97d349c51c2f">Cvar_VariableValue</a>(&amp;<a class="code hl_variable" href="cvar_8c.html#a71b1f2a204cebd68e6bc4790b9ac4258">cvars_all</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], ~0) &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3]))</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>                            shader.<a class="code hl_variable" href="structshader__t.html#aa67e889c11fa842037167b0ab978c591">dpshaderkill</a> = dpshaderkill;</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>                    }</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 4 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(op, <span class="stringliteral">&quot;&lt;&quot;</span>))</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>                    {</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="cvar_8c.html#a1e6c6ddcc2cbac3e571e97d349c51c2f">Cvar_VariableValue</a>(&amp;<a class="code hl_variable" href="cvar_8c.html#a71b1f2a204cebd68e6bc4790b9ac4258">cvars_all</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], ~0) &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3]))</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>                            shader.<a class="code hl_variable" href="structshader__t.html#aa67e889c11fa842037167b0ab978c591">dpshaderkill</a> = dpshaderkill;</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>                    }</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 4 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(op, <span class="stringliteral">&quot;&gt;=&quot;</span>))</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>                    {</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="cvar_8c.html#a1e6c6ddcc2cbac3e571e97d349c51c2f">Cvar_VariableValue</a>(&amp;<a class="code hl_variable" href="cvar_8c.html#a71b1f2a204cebd68e6bc4790b9ac4258">cvars_all</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], ~0) &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3]))</div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>                            shader.<a class="code hl_variable" href="structshader__t.html#aa67e889c11fa842037167b0ab978c591">dpshaderkill</a> = dpshaderkill;</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>                    }</div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 4 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(op, <span class="stringliteral">&quot;&lt;=&quot;</span>))</div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>                    {</div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="cvar_8c.html#a1e6c6ddcc2cbac3e571e97d349c51c2f">Cvar_VariableValue</a>(&amp;<a class="code hl_variable" href="cvar_8c.html#a71b1f2a204cebd68e6bc4790b9ac4258">cvars_all</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], ~0) &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3]))</div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span>                            shader.<a class="code hl_variable" href="structshader__t.html#aa67e889c11fa842037167b0ab978c591">dpshaderkill</a> = dpshaderkill;</div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>                    }</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>                    {</div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>                        <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;%s parsing warning: unknown dpshaderkillifcvar op \&quot;%s\&quot;, or not enough arguments\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>-&gt;filenames[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a>], op);</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>                    }</div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>                }</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;sky&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2)</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>                {</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>                    <span class="comment">// some q3 skies don&#39;t have the sky parm set</span></div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>                    shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#aa2adaaf35359aff25e8edd7d80a9d02d">Q3SURFACEPARM_SKY</a>;</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>                    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(shader.<a class="code hl_variable" href="structshader__t.html#a5480ae700bd84b9967148de0afc5d691">skyboxname</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="keyword">sizeof</span>(shader.<a class="code hl_variable" href="structshader__t.html#a5480ae700bd84b9967148de0afc5d691">skyboxname</a>));</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>                }</div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;skyparms&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2)</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>                {</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>                    <span class="comment">// some q3 skies don&#39;t have the sky parm set</span></div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>                    shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#aa2adaaf35359aff25e8edd7d80a9d02d">Q3SURFACEPARM_SKY</a>;</div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;-&quot;</span>))</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>                        <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(shader.<a class="code hl_variable" href="structshader__t.html#a5480ae700bd84b9967148de0afc5d691">skyboxname</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="keyword">sizeof</span>(shader.<a class="code hl_variable" href="structshader__t.html#a5480ae700bd84b9967148de0afc5d691">skyboxname</a>));</div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>                }</div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;cull&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2)</div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>                {</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;disable&quot;</span>) || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;none&quot;</span>) || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;twosided&quot;</span>))</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>                        shader.<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> |= <a class="code hl_define" href="r__qshader_8h.html#ae40c0ac17b601c44878988b8cf135bd6">Q3TEXTUREFLAG_TWOSIDED</a>;</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>                }</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;nomipmaps&quot;</span>))</div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>                    shader.<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> |= <a class="code hl_define" href="model__q3bsp_8h.html#a4ebac751fc53d9ca7a56a96318e24e9a">Q3SURFACEPARM_NOMIPMAPS</a>;</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;nopicmip&quot;</span>))</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>                    shader.<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> |= <a class="code hl_define" href="r__qshader_8h.html#a29443bdda5bda7d8d4285f12a0e9190d">Q3TEXTUREFLAG_NOPICMIP</a>;</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;polygonoffset&quot;</span>))</div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span>                    shader.<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> |= <a class="code hl_define" href="r__qshader_8h.html#a64fb66587665cee06d5050eb05dded14">Q3TEXTUREFLAG_POLYGONOFFSET</a>;</div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dppolygonoffset&quot;</span>))</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>                {</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>                    shader.<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> |= <a class="code hl_define" href="r__qshader_8h.html#a64fb66587665cee06d5050eb05dded14">Q3TEXTUREFLAG_POLYGONOFFSET</a>;</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>                    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2)</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>                    {</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>                        shader.<a class="code hl_variable" href="structshader__t.html#a0f7658c88568548a3834f6ac649127f9">biaspolygonfactor</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>                        <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 3)</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>                            shader.<a class="code hl_variable" href="structshader__t.html#ae914299869417c6f3b6c080c09bb8b31">biaspolygonoffset</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[2]);</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>                        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>                            shader.<a class="code hl_variable" href="structshader__t.html#ae914299869417c6f3b6c080c09bb8b31">biaspolygonoffset</a> = 0;</div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>                    }</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>                }</div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dptransparentsort&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2)</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>                {</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>                    shader.<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> |= <a class="code hl_define" href="r__qshader_8h.html#a75e939cae02088347e3d3c67b23e9da4">Q3TEXTUREFLAG_TRANSPARENTSORT</a>;</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;sky&quot;</span>))</div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>                        shader.<a class="code hl_variable" href="structshader__t.html#a285a128889a26a581d79f0c4b896e69e">transparentsort</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a72d5e32663fb1b0c369079ca0be01f37a2d80e0abcbf1890ce85d73ea4f7ddcf2">TRANSPARENTSORT_SKY</a>;</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;distance&quot;</span>))</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>                        shader.<a class="code hl_variable" href="structshader__t.html#a285a128889a26a581d79f0c4b896e69e">transparentsort</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a72d5e32663fb1b0c369079ca0be01f37a2a635f265dd33d939e6dcd1482147080">TRANSPARENTSORT_DISTANCE</a>;</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;hud&quot;</span>))</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span>                        shader.<a class="code hl_variable" href="structshader__t.html#a285a128889a26a581d79f0c4b896e69e">transparentsort</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a72d5e32663fb1b0c369079ca0be01f37aaa180af81b763e152ba67c56889f431d">TRANSPARENTSORT_HUD</a>;</div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>                        <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;%s parsing warning: unknown dptransparentsort category \&quot;%s\&quot;, or not enough arguments\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>-&gt;filenames[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fileindex</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>                }</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dprefract&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 5)</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>                {</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>                    shader.<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> |= <a class="code hl_define" href="r__qshader_8h.html#aeba24cf6d5383e0e1adc014690994c98">Q3TEXTUREFLAG_REFRACTION</a>;</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>                    shader.<a class="code hl_variable" href="structshader__t.html#abe620e7927be8c1122e5615a6988df14">refractfactor</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>                    <a class="code hl_define" href="mathlib_8h.html#a14557f9ae9e8f7db1736479bc3eccc4b">Vector4Set</a>(shader.<a class="code hl_variable" href="structshader__t.html#a3b7bd21491a93c9dc085ee86f04e1225">refractcolor4f</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[2]), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3]), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[4]), 1);</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>                }</div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpreflect&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 6)</div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>                {</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>                    shader.<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> |= <a class="code hl_define" href="r__qshader_8h.html#ad470dbac0d0cc4b2fafc958afccd94b3">Q3TEXTUREFLAG_REFLECTION</a>;</div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>                    shader.<a class="code hl_variable" href="structshader__t.html#a64458e1116de103e04c3361a7a4507e0">reflectfactor</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>                    <a class="code hl_define" href="mathlib_8h.html#a14557f9ae9e8f7db1736479bc3eccc4b">Vector4Set</a>(shader.<a class="code hl_variable" href="structshader__t.html#a94476ad1f4ec595f138a797bce2dc87a">reflectcolor4f</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[2]), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3]), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[4]), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[5]));</div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>                }</div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpcamera&quot;</span>))</div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>                {</div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>                    shader.<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> |= <a class="code hl_define" href="r__qshader_8h.html#aa497c0830c68d685e067f0352685241a">Q3TEXTUREFLAG_CAMERA</a>;</div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>                }</div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpwater&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 12)</div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>                {</div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>                    shader.<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> |= <a class="code hl_define" href="r__qshader_8h.html#a1d180d32a8eccb3683fb3d371763631c">Q3TEXTUREFLAG_WATERSHADER</a>;</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>                    shader.<a class="code hl_variable" href="structshader__t.html#a5b973133ac2e2d49ea28bb4f0c8fb7f9">reflectmin</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>                    shader.<a class="code hl_variable" href="structshader__t.html#af24f9ce77f6e7db2105e3ad9676aaf6b">reflectmax</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[2]);</div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>                    shader.<a class="code hl_variable" href="structshader__t.html#abe620e7927be8c1122e5615a6988df14">refractfactor</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3]);</div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span>                    shader.<a class="code hl_variable" href="structshader__t.html#a64458e1116de103e04c3361a7a4507e0">reflectfactor</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[4]);</div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>                    <a class="code hl_define" href="mathlib_8h.html#a14557f9ae9e8f7db1736479bc3eccc4b">Vector4Set</a>(shader.<a class="code hl_variable" href="structshader__t.html#a3b7bd21491a93c9dc085ee86f04e1225">refractcolor4f</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[5]), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[6]), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[7]), 1);</div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>                    <a class="code hl_define" href="mathlib_8h.html#a14557f9ae9e8f7db1736479bc3eccc4b">Vector4Set</a>(shader.<a class="code hl_variable" href="structshader__t.html#a94476ad1f4ec595f138a797bce2dc87a">reflectcolor4f</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[8]), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[9]), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[10]), 1);</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>                    shader.<a class="code hl_variable" href="structshader__t.html#a49cbe4166396e1fde874324a5d05bd10">r_water_wateralpha</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[11]);</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>                }</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpwaterscroll&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 3)</div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>                {</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>                    shader.<a class="code hl_variable" href="structshader__t.html#a0d49e0ea2cbd017995a718d52778c55d">r_water_waterscroll</a>[0] = 1/<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>                    shader.<a class="code hl_variable" href="structshader__t.html#a0d49e0ea2cbd017995a718d52778c55d">r_water_waterscroll</a>[1] = 1/<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[2]);</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>                }</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpglossintensitymod&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2)</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>                {</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>                    shader.<a class="code hl_variable" href="structshader__t.html#a7fc5d523b40bd22a6cb6925a5324b149">specularscalemod</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>                }</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpglossexponentmod&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2)</div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>                {</div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>                    shader.<a class="code hl_variable" href="structshader__t.html#aadcb60b0d24f7bfc0cca20f59dfbcaf4">specularpowermod</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>                }</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dprtlightambient&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2)</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>                {</div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>                    shader.<a class="code hl_variable" href="structshader__t.html#afc99f5a477692440bc9b1dfd7de3a673">rtlightambient</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1]);</div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>                }</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;dpoffsetmapping&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2)</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>                {</div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;disable&quot;</span>) || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;none&quot;</span>) || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;off&quot;</span>))</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>                        shader.<a class="code hl_variable" href="structshader__t.html#a7029846f387cfc915959ebdf0c3e07ec">offsetmapping</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dca2dc4b4e5f2053e46de9d4f0f18d1bfa9">OFFSETMAPPING_OFF</a>;</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;default&quot;</span>) || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;normal&quot;</span>))</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>                        shader.<a class="code hl_variable" href="structshader__t.html#a7029846f387cfc915959ebdf0c3e07ec">offsetmapping</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dca117ca548e7750c4ed09cad4ba3f68eca">OFFSETMAPPING_DEFAULT</a>;</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;linear&quot;</span>))</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>                        shader.<a class="code hl_variable" href="structshader__t.html#a7029846f387cfc915959ebdf0c3e07ec">offsetmapping</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dca5e05df46e76164fe4370a69aadcac3ef">OFFSETMAPPING_LINEAR</a>;</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;relief&quot;</span>))</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>                        shader.<a class="code hl_variable" href="structshader__t.html#a7029846f387cfc915959ebdf0c3e07ec">offsetmapping</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dcab2a2c2f1eebde925702bda187044d478">OFFSETMAPPING_RELIEF</a>;</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 3)</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>                        shader.<a class="code hl_variable" href="structshader__t.html#a246cce197df8d819d0dd1a789e94d369">offsetscale</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[2]);</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 5)</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>                    {</div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>                        <span class="keywordflow">if</span>(!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3], <span class="stringliteral">&quot;bias&quot;</span>))</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>                            shader.<a class="code hl_variable" href="structshader__t.html#a9244e6191cf2618c0e6d20a7d5c85ada">offsetbias</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[4]);</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3], <span class="stringliteral">&quot;match&quot;</span>))</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>                            shader.<a class="code hl_variable" href="structshader__t.html#a9244e6191cf2618c0e6d20a7d5c85ada">offsetbias</a> = 1.0f - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[4]);</div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3], <span class="stringliteral">&quot;match8&quot;</span>))</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>                            shader.<a class="code hl_variable" href="structshader__t.html#a9244e6191cf2618c0e6d20a7d5c85ada">offsetbias</a> = 1.0f - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[4]) / 255.0f;</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3], <span class="stringliteral">&quot;match16&quot;</span>))</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>                            shader.<a class="code hl_variable" href="structshader__t.html#a9244e6191cf2618c0e6d20a7d5c85ada">offsetbias</a> = 1.0f - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[4]) / 65535.0f;</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>                    }</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>                }</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[0], <span class="stringliteral">&quot;deformvertexes&quot;</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> &gt;= 2)</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>                {</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>                    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>;</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>                    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a46c099e9db2adbf9f39f399a83948c1d">Q3MAXDEFORMS</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>++)</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>                        <span class="keywordflow">if</span> (!shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a>)</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a46c099e9db2adbf9f39f399a83948c1d">Q3MAXDEFORMS</a>)</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>                    {</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>                        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> - 2 &amp;&amp; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#ac1257a53bf8a178379696e9410ff711e">Q3DEFORM_MAXPARMS</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>                            shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a22a6cf4d4ef4981e78979a191df08514">parms</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>+2]);</div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>                             <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;projectionshadow&quot;</span>)) shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa62f5f106b37fe21bb1dc5529a3f1e040">Q3DEFORM_PROJECTIONSHADOW</a>;</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;autosprite&quot;</span>      )) shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa2c88373243199cdc8ab4a67be0e9d96e">Q3DEFORM_AUTOSPRITE</a>;</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;autosprite2&quot;</span>     )) shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaab324af88232cbf8fdb82213814ac4876">Q3DEFORM_AUTOSPRITE2</a>;</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;text0&quot;</span>           )) shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa2bdba5189d60309ef5711fb2d2d28954">Q3DEFORM_TEXT0</a>;</div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;text1&quot;</span>           )) shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa916129ca97eb3382d67cfe1cc4e6fc58">Q3DEFORM_TEXT1</a>;</div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;text2&quot;</span>           )) shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaaa3ab18465f550ac06fd8ad81ad4987d7">Q3DEFORM_TEXT2</a>;</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;text3&quot;</span>           )) shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa070a67c4a255e10360c9215de83d5c31">Q3DEFORM_TEXT3</a>;</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;text4&quot;</span>           )) shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaadc6dc01b28815a22e1e1f9308806774e">Q3DEFORM_TEXT4</a>;</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;text5&quot;</span>           )) shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa093937abf493e04ac7f994ba630b1c7e">Q3DEFORM_TEXT5</a>;</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;text6&quot;</span>           )) shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaacdce855a8b0e67923b7db2114d42c725">Q3DEFORM_TEXT6</a>;</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;text7&quot;</span>           )) shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaacb05f924935dded1faf5d540c082da72">Q3DEFORM_TEXT7</a>;</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;bulge&quot;</span>           )) shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaafebac5d634f004a15974e858b4d9a966">Q3DEFORM_BULGE</a>;</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;normal&quot;</span>          )) shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa06c19a7ea7e34a172923d26fec3fcbb6">Q3DEFORM_NORMAL</a>;</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;wave&quot;</span>            ))</div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>                        {</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>                            shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa7acbf0f6ce98606ca26382c9ea6f83e9">Q3DEFORM_WAVE</a>;</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>                            shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a08bf3388330fd7f1ef08c32aef0f768d">wavefunc</a> = <a class="code hl_function" href="model__shared_8c.html#ab3c38940592b16865aefdfce14fed8e4">Mod_LoadQ3Shaders_EnumerateWaveFunc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[3]);</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>                            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> - 4 &amp;&amp; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a2e0c69195e0662ea4d3ea889b934f7db">Q3WAVEPARMS</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>                                shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a65f99c9c27ab84c467e4da99d0aea4b7">waveparms</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>+4]);</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>                        }</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[1], <span class="stringliteral">&quot;move&quot;</span>            ))</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>                        {</div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>                            shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">deform</a> = <a class="code hl_enumvalue" href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaacbe83f5028a290a5196514fd8fcbef0b">Q3DEFORM_MOVE</a>;</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>                            shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a08bf3388330fd7f1ef08c32aef0f768d">wavefunc</a> = <a class="code hl_function" href="model__shared_8c.html#ab3c38940592b16865aefdfce14fed8e4">Mod_LoadQ3Shaders_EnumerateWaveFunc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[5]);</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>                            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numparameters</a> - 6 &amp;&amp; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a2e0c69195e0662ea4d3ea889b934f7db">Q3WAVEPARMS</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>                                shader.<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deformindex</a>].<a class="code hl_variable" href="structq3shaderinfo__deform__t.html#a65f99c9c27ab84c467e4da99d0aea4b7">waveparms</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">parameter</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>+6]);</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>                        }</div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>                    }</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>                }</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>            }</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>            <span class="comment">// hide this shader if a cvar said it should be killed</span></div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>            <span class="keywordflow">if</span> (shader.<a class="code hl_variable" href="structshader__t.html#aa67e889c11fa842037167b0ab978c591">dpshaderkill</a>)</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>                shader.<a class="code hl_variable" href="structshader__t.html#aa96c8223c06587a7ca1c30030a373bd0">numlayers</a> = 0;</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>            <span class="comment">// fix up multiple reflection types</span></div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>            <span class="keywordflow">if</span>(shader.<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> &amp; <a class="code hl_define" href="r__qshader_8h.html#a1d180d32a8eccb3683fb3d371763631c">Q3TEXTUREFLAG_WATERSHADER</a>)</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>                shader.<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> &amp;= ~(<a class="code hl_define" href="r__qshader_8h.html#aeba24cf6d5383e0e1adc014690994c98">Q3TEXTUREFLAG_REFRACTION</a> | <a class="code hl_define" href="r__qshader_8h.html#ad470dbac0d0cc4b2fafc958afccd94b3">Q3TEXTUREFLAG_REFLECTION</a> | <a class="code hl_define" href="r__qshader_8h.html#aa497c0830c68d685e067f0352685241a">Q3TEXTUREFLAG_CAMERA</a>);</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span> </div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>            <a class="code hl_function" href="model__shared_8c.html#a1fc8b5f7ffe77967a993fe042451521a">Q3Shader_AddToHash</a> (&amp;shader);</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>        }</div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>);</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>    }</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>    <a class="code hl_function" href="fs_8c.html#a507c1fe37a20105eb2c08896f0d399a1">FS_FreeSearch</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">search</a>);</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>    <span class="comment">// free custinfoparm values</span></div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcustsurfaceflags</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">custsurfaceparmnames</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]);</div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>}</div>
</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span> </div>
<div class="foldopen" id="foldopen02219" data-start="{" data-end="}">
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a1290d4b43a0dd05ecbc2b3bb36b497a0"> 2219</a></span><a class="code hl_struct" href="structshader__t.html">shader_t</a> *<a class="code hl_function" href="model__shared_8c.html#a1290d4b43a0dd05ecbc2b3bb36b497a0">Mod_LookupQ3Shader</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>)</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>{</div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> hash;</div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>    <a class="code hl_struct" href="structq3shader__hash__entry__t.html">q3shader_hash_entry_t</a>* <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a>;</div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="model__shared_8c.html#aad0500eca89bdf3928091895b0ae35e3">q3shaders_mem</a>)</div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>        <a class="code hl_function" href="model__shared_8c.html#ad71d07321aafc07206c4853276ed4a69">Mod_LoadQ3Shaders</a>();</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>    hash = <a class="code hl_function" href="com__crc16_8c.html#ac2a504ad338a0d2e5e1ba7d79993e174">CRC_Block_CaseInsensitive</a> ((<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a> (<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>));</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a> = <a class="code hl_variable" href="model__shared_8c.html#a83e42554be1ced79f6523bb26ef38fd1">q3shader_data</a>-&gt;<a class="code hl_variable" href="structq3shader__data__t.html#a6f14ea99b141eb62ffd3461552c646fa">hash</a> + (hash % <a class="code hl_define" href="model__shared_8c.html#a4f0df7ee2d7f6abd898e01abe365f373">Q3SHADER_HASH_SIZE</a>);</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>    <span class="keywordflow">while</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a> != <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>    {</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a>-&gt;shader.name, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>) == 0)</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>            <span class="keywordflow">return</span> &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a>-&gt;<a class="code hl_variable" href="structq3shader__hash__entry__t.html#a51abd5afda8d865102c9347c21e7926d">shader</a>;</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entry</a>-&gt;chain;</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>    }</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>}</div>
</div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span> </div>
<div class="foldopen" id="foldopen02236" data-start="{" data-end="}">
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a3aeb019546a6a3c64accee040d01f336"> 2236</a></span><a class="code hl_struct" href="structtexture__shaderpass__t.html">texture_shaderpass_t</a> *<a class="code hl_function" href="model__shared_8c.html#a3aeb019546a6a3c64accee040d01f336">Mod_CreateShaderPass</a>(<a class="code hl_struct" href="structmempool__t.html">mempool_t</a> *mempool, <a class="code hl_struct" href="structskinframe__t.html">skinframe_t</a> *skinframe)</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>{</div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>    <a class="code hl_struct" href="structtexture__shaderpass__t.html">texture_shaderpass_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a> = (<a class="code hl_struct" href="structtexture__shaderpass__t.html">texture_shaderpass_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(mempool, <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>));</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;<a class="code hl_variable" href="structtexture__shaderpass__t.html#ac2de84fdbf6091c1b9f75cc15fbc1077">framerate</a> = 0.0f;</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;numframes = 1;</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;blendfunc[0] = <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>;</div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;blendfunc[1] = <a class="code hl_define" href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>;</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;rgbgen.rgbgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a96b64b3760bf2da76ccfffbcef6cba3f">Q3RGBGEN_IDENTITY</a>;</div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;alphagen.alphagen = <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a8ec118630e16364afa8808a4e52cebc8">Q3ALPHAGEN_IDENTITY</a>;</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;alphatest = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;tcgen.tcgen = <a class="code hl_enumvalue" href="r__qshader_8h.html#a9c334491e333d0667b0d7b9a1620fbabaed717f6b2fa91547d92f9473af302f2b">Q3TCGEN_TEXTURE</a>;</div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;skinframes[0] = skinframe;</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>;</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>}</div>
</div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span> </div>
<div class="foldopen" id="foldopen02251" data-start="{" data-end="}">
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a2817d9f84a302b5c97fdaac3889d1a0e"> 2251</a></span><a class="code hl_struct" href="structtexture__shaderpass__t.html">texture_shaderpass_t</a> *<a class="code hl_function" href="model__shared_8c.html#a2817d9f84a302b5c97fdaac3889d1a0e">Mod_CreateShaderPassFromQ3ShaderLayer</a>(<a class="code hl_struct" href="structmempool__t.html">mempool_t</a> *mempool, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">modelname</a>, <a class="code hl_struct" href="structq3shaderinfo__layer__t.html">q3shaderinfo_layer_t</a> *<a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">layerindex</a>, <span class="keywordtype">int</span> texflags, <span class="keyword">const</span> <span class="keywordtype">char</span> *texturename)</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span>{</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>;</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>    <a class="code hl_struct" href="structtexture__shaderpass__t.html">texture_shaderpass_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a> = (<a class="code hl_struct" href="structtexture__shaderpass__t.html">texture_shaderpass_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(mempool, <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>));</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;<a class="code hl_variable" href="structtexture__shaderpass__t.html#a774f38966b8fcac6fe891f9a9ffe7bb9">alphatest</a> = <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphatest != 0;</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;framerate = <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;framerate;</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;numframes = <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;numframes;</div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;blendfunc[0] = <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[0];</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;blendfunc[1] = <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;blendfunc[1];</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;rgbgen = <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;rgbgen;</div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;alphagen = <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;alphagen;</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;tcgen = <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcgen;</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; <a class="code hl_define" href="r__qshader_8h.html#a436104f4f242119bf3f431500edf02e6">Q3MAXTCMODS</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].tcmod != <a class="code hl_enumvalue" href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4ad9636ae0779a1f213f5d4453782c6ff2">Q3TCMOD_NONE</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>] = <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;tcmods[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>];</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; <a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;numframes; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>-&gt;skinframes[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>] = <a class="code hl_function" href="gl__rmain_8c.html#a5960c03dbcd8d4f38b765ca7260aa838">R_SkinFrame_LoadExternal</a>(<a class="code hl_variable" href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a>-&gt;texturename[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>], texflags, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpass</a>;</div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>}</div>
</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span> </div>
<div class="foldopen" id="foldopen02270" data-start="{" data-end="}">
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a1694c78ec74a4c2a96c00ea69cf44ef7"> 2270</a></span><a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_function" href="model__shared_8c.html#a1694c78ec74a4c2a96c00ea69cf44ef7">Mod_LoadTextureFromQ3Shader</a>(<a class="code hl_struct" href="structmempool__t.html">mempool_t</a> *mempool, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">modelname</a>, <a class="code hl_struct" href="structtexture__t.html">texture_t</a> *<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">warnmissing</a>, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fallback</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaulttexflags</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultmaterialflags</a>)</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>{</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsmask</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsor</a>;</div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">success</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>    <a class="code hl_struct" href="structshader__t.html">shader_t</a> *shader;</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>)</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>        <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name));</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basealpha = 1.0f;</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>    shader = <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[0] ? <a class="code hl_function" href="model__shared_8c.html#a1290d4b43a0dd05ecbc2b3bb36b497a0">Mod_LookupQ3Shader</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>) : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span> </div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>    <span class="comment">// allow disabling of picmip or compression by defaulttexflags</span></div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsmask</a> = ~0;</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>    <span class="keywordflow">if</span>(!(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaulttexflags</a> &amp; <a class="code hl_define" href="r__textures_8h.html#a1e458ef28d5c5978bc1315f4a5b54aef">TEXF_PICMIP</a>))</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsmask</a> &amp;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">~TEXF_PICMIP</a>;</div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>    <span class="keywordflow">if</span>(!(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaulttexflags</a> &amp; <a class="code hl_define" href="r__textures_8h.html#ab19c18de47f490e8f226052c34b577b8">TEXF_COMPRESS</a>))</div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsmask</a> &amp;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">~TEXF_COMPRESS</a>;</div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsor</a> = 0;</div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaulttexflags</a> &amp; <a class="code hl_define" href="r__textures_8h.html#a8367a0dbf5389896f956ab599fc394d8">TEXF_ISWORLD</a>)</div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsor</a> |= <a class="code hl_define" href="r__textures_8h.html#a8367a0dbf5389896f956ab599fc394d8">TEXF_ISWORLD</a>;</div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaulttexflags</a> &amp; <a class="code hl_define" href="r__textures_8h.html#a951133ab2f845125172cb91a802c4a58">TEXF_ISSPRITE</a>)</div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsor</a> |= <a class="code hl_define" href="r__textures_8h.html#a951133ab2f845125172cb91a802c4a58">TEXF_ISSPRITE</a>;</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>    <span class="comment">// unless later loaded from the shader</span></div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;offsetmapping = (<a class="code hl_variable" href="model__brush_8c.html#a6a90d29a2909b3cbae37702ff37a32cf">mod_noshader_default_offsetmapping</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>) ? <a class="code hl_enumvalue" href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dca117ca548e7750c4ed09cad4ba3f68eca">OFFSETMAPPING_DEFAULT</a> : <a class="code hl_enumvalue" href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dca2dc4b4e5f2053e46de9d4f0f18d1bfa9">OFFSETMAPPING_OFF</a>;</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;offsetscale = 1;</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;offsetbias = 0;</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;specularscalemod = 1;</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;specularpowermod = 1; </div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;rtlightambient = 0;</div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;transparentsort = <a class="code hl_enumvalue" href="r__qshader_8h.html#a72d5e32663fb1b0c369079ca0be01f37a2a635f265dd33d939e6dcd1482147080">TRANSPARENTSORT_DISTANCE</a>;</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>    <span class="comment">// WHEN ADDING DEFAULTS HERE, REMEMBER TO PUT DEFAULTS IN ALL LOADERS</span></div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>    <span class="comment">// JUST GREP FOR &quot;specularscalemod = 1&quot;.</span></div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span> </div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>    <span class="keywordflow">if</span> (shader)</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>    {</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a67a57130da6bf0ad0eb133c0b8bc7642">developer_loading</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;%s: loaded shader for %s\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">modelname</a>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>);</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span> </div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#aa2adaaf35359aff25e8edd7d80a9d02d">Q3SURFACEPARM_SKY</a>)</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>        {</div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags = <a class="code hl_define" href="model__brush_8h.html#a088347aa145a9d1bae60024278840b34">MATERIALFLAG_SKY</a>;</div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>            <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a5480ae700bd84b9967148de0afc5d691">skyboxname</a>[0] &amp;&amp; <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>)</div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span>            {</div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>                <span class="comment">// quake3 seems to append a _ to the skybox name, so this must do so as well</span></div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>                <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#aba638bb4b43ce8dbc19d0aa4879980ac">skybox</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#aba638bb4b43ce8dbc19d0aa4879980ac">skybox</a>), <span class="stringliteral">&quot;%s_&quot;</span>, shader-&gt;<a class="code hl_variable" href="structshader__t.html#a5480ae700bd84b9967148de0afc5d691">skyboxname</a>);</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>            }</div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>        }</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags &amp; <a class="code hl_define" href="model__q3bsp_8h.html#aaf11f833a2a442d8d19bf7db77e0b722">Q3SURFACEFLAG_NODRAW</a>) || shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa96c8223c06587a7ca1c30030a373bd0">numlayers</a> == 0)</div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags = <a class="code hl_define" href="model__brush_8h.html#a2e9becc912ba5cde5aee7f7db908e965">MATERIALFLAG_NODRAW</a> | <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a>;</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags = <a class="code hl_define" href="model__brush_8h.html#a92fe9590f9e3810dbd4abad9431cc63a">MATERIALFLAG_WALL</a>;</div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span> </div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#ad4a84fe3388e686320531b7e53f246b3">alphatest</a>)</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#a37fea1966eaa92d59dfa7f277d4a82a5">MATERIALFLAG_ALPHATEST</a> | <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a>;</div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> &amp; <a class="code hl_define" href="r__qshader_8h.html#ae40c0ac17b601c44878988b8cf135bd6">Q3TEXTUREFLAG_TWOSIDED</a>)</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a> | <a class="code hl_define" href="model__brush_8h.html#af441c2813089fb0c1b35a05e888369be">MATERIALFLAG_NOCULLFACE</a>;</div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> &amp; <a class="code hl_define" href="r__qshader_8h.html#a64fb66587665cee06d5050eb05dded14">Q3TEXTUREFLAG_POLYGONOFFSET</a>)</div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>        {</div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;biaspolygonoffset += shader-&gt;<a class="code hl_variable" href="structshader__t.html#ae914299869417c6f3b6c080c09bb8b31">biaspolygonoffset</a>;</div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;biaspolygonfactor += shader-&gt;<a class="code hl_variable" href="structshader__t.html#a0f7658c88568548a3834f6ac649127f9">biaspolygonfactor</a>;</div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>        }</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> &amp; <a class="code hl_define" href="r__qshader_8h.html#aeba24cf6d5383e0e1adc014690994c98">Q3TEXTUREFLAG_REFRACTION</a>)</div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#a22de374860637bd38095828d776a3028">MATERIALFLAG_REFRACTION</a>;</div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> &amp; <a class="code hl_define" href="r__qshader_8h.html#ad470dbac0d0cc4b2fafc958afccd94b3">Q3TEXTUREFLAG_REFLECTION</a>)</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#aa7c4cb26c138264bb415dddb89455595">MATERIALFLAG_REFLECTION</a>;</div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> &amp; <a class="code hl_define" href="r__qshader_8h.html#a1d180d32a8eccb3683fb3d371763631c">Q3TEXTUREFLAG_WATERSHADER</a>)</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#a7055dcfb7e841b4f8df429bc32e9212f">MATERIALFLAG_WATERSHADER</a>;</div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">textureflags</a> &amp; <a class="code hl_define" href="r__qshader_8h.html#aa497c0830c68d685e067f0352685241a">Q3TEXTUREFLAG_CAMERA</a>)</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#a80f07bef20c3c45b339d64917bf8a0b6">MATERIALFLAG_CAMERA</a>;</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;customblendfunc[0] = <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>;</div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;customblendfunc[1] = <a class="code hl_define" href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>;</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;transparentsort = shader-&gt;<a class="code hl_variable" href="structshader__t.html#a285a128889a26a581d79f0c4b896e69e">transparentsort</a>;</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa96c8223c06587a7ca1c30030a373bd0">numlayers</a> &gt; 0)</div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>        {</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;customblendfunc[0] = shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[0];</div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;customblendfunc[1] = shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[1];</div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span><span class="comment">/*</span></div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span><span class="comment">Q3 shader blendfuncs actually used in the game (* = supported by DP)</span></div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span><span class="comment">* additive               GL_ONE GL_ONE</span></div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span><span class="comment">additive weird         GL_ONE GL_SRC_ALPHA</span></div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span><span class="comment">additive weird 2       GL_ONE GL_ONE_MINUS_SRC_ALPHA</span></div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span><span class="comment">* alpha                  GL_SRC_ALPHA GL_ONE_MINUS_SRC_ALPHA</span></div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span><span class="comment">alpha inverse          GL_ONE_MINUS_SRC_ALPHA GL_SRC_ALPHA</span></div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span><span class="comment">brighten               GL_DST_COLOR GL_ONE</span></div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span><span class="comment">brighten               GL_ONE GL_SRC_COLOR</span></div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span><span class="comment">brighten weird         GL_DST_COLOR GL_ONE_MINUS_DST_ALPHA</span></div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span><span class="comment">brighten weird 2       GL_DST_COLOR GL_SRC_ALPHA</span></div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span><span class="comment">* modulate               GL_DST_COLOR GL_ZERO</span></div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span><span class="comment">* modulate               GL_ZERO GL_SRC_COLOR</span></div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span><span class="comment">modulate inverse       GL_ZERO GL_ONE_MINUS_SRC_COLOR</span></div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span><span class="comment">modulate inverse alpha GL_ZERO GL_SRC_ALPHA</span></div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span><span class="comment">modulate weird inverse GL_ONE_MINUS_DST_COLOR GL_ZERO</span></div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span><span class="comment">* modulate x2            GL_DST_COLOR GL_SRC_COLOR</span></div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span><span class="comment">* no blend               GL_ONE GL_ZERO</span></div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span><span class="comment">nothing                GL_ZERO GL_ONE</span></div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span><span class="comment">*/</span></div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>            <span class="comment">// if not opaque, figure out what blendfunc to use</span></div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>            <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[0] != <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a> || shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[1] != <a class="code hl_define" href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>)</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span>            {</div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>                <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[0] == <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a> &amp;&amp; shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[1] == <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>)</div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>                    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#a01917ff9223bf5f764ea1c9150d8b72d">MATERIALFLAG_ADD</a> | <a class="code hl_define" href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a> | <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a>;</div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[0] == <a class="code hl_define" href="glquake_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a> &amp;&amp; shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[1] == <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>)</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>                    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#a01917ff9223bf5f764ea1c9150d8b72d">MATERIALFLAG_ADD</a> | <a class="code hl_define" href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a> | <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a>;</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[0] == <a class="code hl_define" href="glquake_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a> &amp;&amp; shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[1] == <a class="code hl_define" href="glquake_8h.html#aa3926eb5e008f14829baa8d72435215f">GL_ONE_MINUS_SRC_ALPHA</a>)</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>                    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#a226c2113f3731bc223694bd3e391504a">MATERIALFLAG_ALPHA</a> | <a class="code hl_define" href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a> | <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a>;</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>                    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#afd200d146636dc15acd310fa22c6b279">MATERIALFLAG_CUSTOMBLEND</a> | <a class="code hl_define" href="model__brush_8h.html#a15a12ade8170812bc1a3b5455f26e114">MATERIALFLAG_FULLBRIGHT</a> | <a class="code hl_define" href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a> | <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a>;</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>            }</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>        }</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>        <span class="keywordflow">if</span> (!shader-&gt;<a class="code hl_variable" href="structshader__t.html#a5b56daef3c5d6d693b73dbc73a06af27">lighting</a>)</div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#a15a12ade8170812bc1a3b5455f26e114">MATERIALFLAG_FULLBRIGHT</a>;</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span> </div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>        <span class="comment">// here be dragons: convert quake3 shaders to material</span></div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa96c8223c06587a7ca1c30030a373bd0">numlayers</a> &gt; 0)</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>        {</div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">terrainbackgroundlayer</a> = -1;</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmaplayer</a> = -1;</div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">alphagenspecularlayer</a> = -1;</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rgbgenvertexlayer</a> = -1;</div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rgbgendiffuselayer</a> = -1;</div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">materiallayer</a> = -1;</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">endofprelayers</a> = 0;</div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firstpostlayer</a> = 0;</div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpassindex</a> = 0;</div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa96c8223c06587a7ca1c30030a373bd0">numlayers</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>            {</div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>                <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a72a759e44294e8c7c103889109f8d9fb">texturename</a> != <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcasecmp</a>(shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a72a759e44294e8c7c103889109f8d9fb">texturename</a>[0], <span class="stringliteral">&quot;$lightmap&quot;</span>))</div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmaplayer</a> = <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>                <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#ab08f679ed8c715a21a7356079a784030">rgbgen</a>.<a class="code hl_variable" href="structq3shaderinfo__layer__rgbgen__t.html#a789f6676db80e2af88ac3a15af6cc8d9">rgbgen</a> == <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a1cdf35083cb0fab3bcda2afb32fcef62">Q3RGBGEN_VERTEX</a>)</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rgbgenvertexlayer</a> = <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>                <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#ab08f679ed8c715a21a7356079a784030">rgbgen</a>.<a class="code hl_variable" href="structq3shaderinfo__layer__rgbgen__t.html#a789f6676db80e2af88ac3a15af6cc8d9">rgbgen</a> == <a class="code hl_enumvalue" href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a2065a65ea0867a11ec5500650ecf62f3">Q3RGBGEN_LIGHTINGDIFFUSE</a>)</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rgbgendiffuselayer</a> = <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>                <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a9d951e5819be1c6c5dc173b920d8f878">alphagen</a>.<a class="code hl_variable" href="structq3shaderinfo__layer__alphagen__t.html#acb01452657e6b22b84d3db529f30a8bf">alphagen</a> == <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a1a8064ffa2973a0ecd4784e3159f6ceb">Q3ALPHAGEN_LIGHTINGSPECULAR</a>)</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">alphagenspecularlayer</a> = <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>            }</div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>            <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa96c8223c06587a7ca1c30030a373bd0">numlayers</a> &gt;= 2</div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>             &amp;&amp; shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[1].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a9d951e5819be1c6c5dc173b920d8f878">alphagen</a>.<a class="code hl_variable" href="structq3shaderinfo__layer__alphagen__t.html#acb01452657e6b22b84d3db529f30a8bf">alphagen</a> == <a class="code hl_enumvalue" href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a9709d6c1c915d4758713f89aff18c971">Q3ALPHAGEN_VERTEX</a></div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>             &amp;&amp; (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[0] == <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a> &amp;&amp; shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[1] == <a class="code hl_define" href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a> &amp;&amp; !shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[0].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#ad4a84fe3388e686320531b7e53f246b3">alphatest</a>)</div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span>             &amp;&amp; ((shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[1].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[0] == <a class="code hl_define" href="glquake_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a> &amp;&amp; shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[1].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[1] == <a class="code hl_define" href="glquake_8h.html#aa3926eb5e008f14829baa8d72435215f">GL_ONE_MINUS_SRC_ALPHA</a>)</div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>                 || (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[1].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[0] == <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a> &amp;&amp; shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[1].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">blendfunc</a>[1] == <a class="code hl_define" href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a> &amp;&amp; shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[1].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#ad4a84fe3388e686320531b7e53f246b3">alphatest</a>)))</div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>            {</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>                <span class="comment">// terrain blend or certain other effects involving alphatest over a regular layer</span></div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">terrainbackgroundlayer</a> = 0;</div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">materiallayer</a> = 1;</div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>                <span class="comment">// terrain may be vertex lit (in which case both layers are rgbGen vertex) or lightmapped (in which ase the third layer is lightmap)</span></div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firstpostlayer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmaplayer</a> &gt;= 0 ? <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmaplayer</a> + 1 : <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">materiallayer</a> + 1;</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>            }</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmaplayer</a> == 0)</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>            {</div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>                <span class="comment">// ordinary texture but with $lightmap before diffuse</span></div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">materiallayer</a> = 1;</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firstpostlayer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmaplayer</a> + 2;</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span>            }</div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmaplayer</a> &gt;= 1)</div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span>            {</div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>                <span class="comment">// ordinary texture - we don&#39;t properly apply lighting to the prelayers, but oh well...</span></div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">endofprelayers</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmaplayer</a> - 1;</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">materiallayer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmaplayer</a> - 1;</div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firstpostlayer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmaplayer</a> + 1;</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>            }</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rgbgenvertexlayer</a> &gt;= 0)</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>            {</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>                <span class="comment">// map models with baked lighting</span></div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">materiallayer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rgbgenvertexlayer</a>;</div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">endofprelayers</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rgbgenvertexlayer</a>;</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firstpostlayer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rgbgenvertexlayer</a> + 1;</div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span>                <span class="comment">// special case for rgbgen vertex if MATERIALFLAG_VERTEXCOLOR is expected on this material</span></div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultmaterialflags</a> &amp; <a class="code hl_define" href="model__brush_8h.html#a13f71663919a7f6777ff7ab20479318e">MATERIALFLAG_VERTEXCOLOR</a>)</div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span>                    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#a13f71663919a7f6777ff7ab20479318e">MATERIALFLAG_VERTEXCOLOR</a> | <a class="code hl_define" href="model__brush_8h.html#a66a3f2cf0206bbd0d7ce9ae60035da31">MATERIALFLAG_ALPHAGEN_VERTEX</a>;</div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>            }</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rgbgendiffuselayer</a> &gt;= 0)</div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>            {</div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span>                <span class="comment">// entity models with dynamic lighting</span></div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">materiallayer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rgbgendiffuselayer</a>;</div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">endofprelayers</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rgbgendiffuselayer</a>;</div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firstpostlayer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rgbgendiffuselayer</a> + 1;</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>                <span class="comment">// player models often have specular as a pass after diffuse - we don&#39;t currently make use of that specular texture (would need to meld it into the skinframe)...</span></div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">alphagenspecularlayer</a> &gt;= 0)</div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firstpostlayer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">alphagenspecularlayer</a> + 1;</div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span>            }</div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>            {</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span>                <span class="comment">// special effects shaders - treat first as primary layer and do everything else as post</span></div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">endofprelayers</a> = 0;</div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">materiallayer</a> = 0;</div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firstpostlayer</a> = 1;</div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>            }</div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>            <span class="comment">// convert the main material layer</span></div>
<div class="line"><a id="l02459" name="l02459"></a><span class="lineno"> 2459</span>            <span class="comment">// FIXME: if alphagenspecularlayer is used, we should pass a specular texture name to R_SkinFrame_LoadExternal and have it load that texture instead of the assumed name for _gloss texture</span></div>
<div class="line"><a id="l02460" name="l02460"></a><span class="lineno"> 2460</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">materiallayer</a> &gt;= 0)</div>
<div class="line"><a id="l02461" name="l02461"></a><span class="lineno"> 2461</span>                <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass = <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpassindex</a>++] = <a class="code hl_function" href="model__shared_8c.html#a2817d9f84a302b5c97fdaac3889d1a0e">Mod_CreateShaderPassFromQ3ShaderLayer</a>(mempool, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">modelname</a>, &amp;shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">materiallayer</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">materiallayer</a>, (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">materiallayer</a>].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a5f9d8e1cbd836090bbfa3f7893dbb265">dptexflags</a> &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsmask</a>) | <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsor</a>, <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name);</div>
<div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span>            <span class="comment">// convert the terrain background blend layer (if any)</span></div>
<div class="line"><a id="l02463" name="l02463"></a><span class="lineno"> 2463</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">terrainbackgroundlayer</a> &gt;= 0)</div>
<div class="line"><a id="l02464" name="l02464"></a><span class="lineno"> 2464</span>                <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;backgroundshaderpass = <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpassindex</a>++] = <a class="code hl_function" href="model__shared_8c.html#a2817d9f84a302b5c97fdaac3889d1a0e">Mod_CreateShaderPassFromQ3ShaderLayer</a>(mempool, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">modelname</a>, &amp;shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">terrainbackgroundlayer</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">terrainbackgroundlayer</a>, (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">terrainbackgroundlayer</a>].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a5f9d8e1cbd836090bbfa3f7893dbb265">dptexflags</a> &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsmask</a>) | <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsor</a>, <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name);</div>
<div class="line"><a id="l02465" name="l02465"></a><span class="lineno"> 2465</span>            <span class="comment">// convert the prepass layers (if any)</span></div>
<div class="line"><a id="l02466" name="l02466"></a><span class="lineno"> 2466</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;startpreshaderpass = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpassindex</a>;</div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">endofprelayers</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"> 2468</span>                <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpassindex</a>++] = <a class="code hl_function" href="model__shared_8c.html#a2817d9f84a302b5c97fdaac3889d1a0e">Mod_CreateShaderPassFromQ3ShaderLayer</a>(mempool, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">modelname</a>, &amp;shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a5f9d8e1cbd836090bbfa3f7893dbb265">dptexflags</a> &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsmask</a>) | <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsor</a>, <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name);</div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;endpreshaderpass = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpassindex</a>;</div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;startpostshaderpass = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpassindex</a>;</div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span>            <span class="comment">// convert the postpass layers (if any)</span></div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firstpostlayer</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa96c8223c06587a7ca1c30030a373bd0">numlayers</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span>                <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpassindex</a>++] = <a class="code hl_function" href="model__shared_8c.html#a2817d9f84a302b5c97fdaac3889d1a0e">Mod_CreateShaderPassFromQ3ShaderLayer</a>(mempool, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">modelname</a>, &amp;shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">layers</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structq3shaderinfo__layer__t.html#a5f9d8e1cbd836090bbfa3f7893dbb265">dptexflags</a> &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsmask</a>) | <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texflagsor</a>, <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name);</div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;startpostshaderpass = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shaderpassindex</a>;</div>
<div class="line"><a id="l02475" name="l02475"></a><span class="lineno"> 2475</span>        }</div>
<div class="line"><a id="l02476" name="l02476"></a><span class="lineno"> 2476</span> </div>
<div class="line"><a id="l02477" name="l02477"></a><span class="lineno"> 2477</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a59714fd7a75c389a72602215207f82dd">dpshadow</a>)</div>
<div class="line"><a id="l02478" name="l02478"></a><span class="lineno"> 2478</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags &amp;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">~MATERIALFLAG_NOSHADOW</a>;</div>
<div class="line"><a id="l02479" name="l02479"></a><span class="lineno"> 2479</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a123f8d2e458dd97187b30ec4a564918f">dpnoshadow</a>)</div>
<div class="line"><a id="l02480" name="l02480"></a><span class="lineno"> 2480</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a>;</div>
<div class="line"><a id="l02481" name="l02481"></a><span class="lineno"> 2481</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a03e3be6db5a60f050c26a4d01ec60701">dpnortlight</a>)</div>
<div class="line"><a id="l02482" name="l02482"></a><span class="lineno"> 2482</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#afe65532d5f196261f10f7f6ccddef1b8">MATERIALFLAG_NORTLIGHT</a>;</div>
<div class="line"><a id="l02483" name="l02483"></a><span class="lineno"> 2483</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a13731e5e8d7c966df81e803ae7d2368a">vertexalpha</a>)</div>
<div class="line"><a id="l02484" name="l02484"></a><span class="lineno"> 2484</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#a66a3f2cf0206bbd0d7ce9ae60035da31">MATERIALFLAG_ALPHAGEN_VERTEX</a>;</div>
<div class="line"><a id="l02485" name="l02485"></a><span class="lineno"> 2485</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;deforms, shader-&gt;<a class="code hl_variable" href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">deforms</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;deforms));</div>
<div class="line"><a id="l02486" name="l02486"></a><span class="lineno"> 2486</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;reflectmin = shader-&gt;<a class="code hl_variable" href="structshader__t.html#a5b973133ac2e2d49ea28bb4f0c8fb7f9">reflectmin</a>;</div>
<div class="line"><a id="l02487" name="l02487"></a><span class="lineno"> 2487</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;reflectmax = shader-&gt;<a class="code hl_variable" href="structshader__t.html#af24f9ce77f6e7db2105e3ad9676aaf6b">reflectmax</a>;</div>
<div class="line"><a id="l02488" name="l02488"></a><span class="lineno"> 2488</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;refractfactor = shader-&gt;<a class="code hl_variable" href="structshader__t.html#abe620e7927be8c1122e5615a6988df14">refractfactor</a>;</div>
<div class="line"><a id="l02489" name="l02489"></a><span class="lineno"> 2489</span>        <a class="code hl_define" href="mathlib_8h.html#a78434ca318d72a308cffdcd75346fcd5">Vector4Copy</a>(shader-&gt;<a class="code hl_variable" href="structshader__t.html#a3b7bd21491a93c9dc085ee86f04e1225">refractcolor4f</a>, <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;refractcolor4f);</div>
<div class="line"><a id="l02490" name="l02490"></a><span class="lineno"> 2490</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;reflectfactor = shader-&gt;<a class="code hl_variable" href="structshader__t.html#a64458e1116de103e04c3361a7a4507e0">reflectfactor</a>;</div>
<div class="line"><a id="l02491" name="l02491"></a><span class="lineno"> 2491</span>        <a class="code hl_define" href="mathlib_8h.html#a78434ca318d72a308cffdcd75346fcd5">Vector4Copy</a>(shader-&gt;<a class="code hl_variable" href="structshader__t.html#a94476ad1f4ec595f138a797bce2dc87a">reflectcolor4f</a>, <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;reflectcolor4f);</div>
<div class="line"><a id="l02492" name="l02492"></a><span class="lineno"> 2492</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;r_water_wateralpha = shader-&gt;<a class="code hl_variable" href="structshader__t.html#a49cbe4166396e1fde874324a5d05bd10">r_water_wateralpha</a>;</div>
<div class="line"><a id="l02493" name="l02493"></a><span class="lineno"> 2493</span>        <a class="code hl_define" href="mathlib_8h.html#a65dae07ba3561742c7f0eedf6c008731">Vector2Copy</a>(shader-&gt;<a class="code hl_variable" href="structshader__t.html#a0d49e0ea2cbd017995a718d52778c55d">r_water_waterscroll</a>, <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;r_water_waterscroll);</div>
<div class="line"><a id="l02494" name="l02494"></a><span class="lineno"> 2494</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;offsetmapping = shader-&gt;<a class="code hl_variable" href="structshader__t.html#a7029846f387cfc915959ebdf0c3e07ec">offsetmapping</a>;</div>
<div class="line"><a id="l02495" name="l02495"></a><span class="lineno"> 2495</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;offsetscale = shader-&gt;<a class="code hl_variable" href="structshader__t.html#a246cce197df8d819d0dd1a789e94d369">offsetscale</a>;</div>
<div class="line"><a id="l02496" name="l02496"></a><span class="lineno"> 2496</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;offsetbias = shader-&gt;<a class="code hl_variable" href="structshader__t.html#a9244e6191cf2618c0e6d20a7d5c85ada">offsetbias</a>;</div>
<div class="line"><a id="l02497" name="l02497"></a><span class="lineno"> 2497</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;specularscalemod = shader-&gt;<a class="code hl_variable" href="structshader__t.html#a7fc5d523b40bd22a6cb6925a5324b149">specularscalemod</a>;</div>
<div class="line"><a id="l02498" name="l02498"></a><span class="lineno"> 2498</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;specularpowermod = shader-&gt;<a class="code hl_variable" href="structshader__t.html#aadcb60b0d24f7bfc0cca20f59dfbcaf4">specularpowermod</a>;</div>
<div class="line"><a id="l02499" name="l02499"></a><span class="lineno"> 2499</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;rtlightambient = shader-&gt;<a class="code hl_variable" href="structshader__t.html#afc99f5a477692440bc9b1dfd7de3a673">rtlightambient</a>;</div>
<div class="line"><a id="l02500" name="l02500"></a><span class="lineno"> 2500</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;refractive_index = <a class="code hl_variable" href="model__brush_8c.html#afd3d52aa21b8bb25950df31b101c10b4">mod_q3shader_default_refractive_index</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l02501" name="l02501"></a><span class="lineno"> 2501</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a7ae697c8f21a0710687079ce9c54e081">dpreflectcube</a>[0])</div>
<div class="line"><a id="l02502" name="l02502"></a><span class="lineno"> 2502</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;reflectcubetexture = <a class="code hl_function" href="gl__rmain_8c.html#a9f892d1cf76c82c30d00abdd0187301a">R_GetCubemap</a>(shader-&gt;<a class="code hl_variable" href="structshader__t.html#a7ae697c8f21a0710687079ce9c54e081">dpreflectcube</a>);</div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span> </div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span>        <span class="comment">// set up default supercontents (on q3bsp this is overridden by the q3bsp loader)</span></div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents = <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a> | <a class="code hl_define" href="bspfile_8h.html#a1743eb1a01a4bc94f435951089dadbd7">SUPERCONTENTS_OPAQUE</a>;</div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a87aeb6af078d63bf2908c682e390c5bc">Q3SURFACEPARM_LAVA</a>         ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents  = <a class="code hl_define" href="bspfile_8h.html#a1c8c25328105edb0ce33da011b939a27">SUPERCONTENTS_LAVA</a>         ;</div>
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"> 2507</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a8ed52380b620b1d0bf5c8688c23b2254">Q3SURFACEPARM_SLIME</a>        ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents  = <a class="code hl_define" href="bspfile_8h.html#a7528d0e1edabc785475a08a7890597ea">SUPERCONTENTS_SLIME</a>        ;</div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#aeb4b632227e7b1bd0f566a8ac3fd3c66">Q3SURFACEPARM_WATER</a>        ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents  = <a class="code hl_define" href="bspfile_8h.html#af59d298899c2ac56a21f94c327776551">SUPERCONTENTS_WATER</a>        ;</div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a336880b416d3577c377b4be4101a31f5">Q3SURFACEPARM_NONSOLID</a>     ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents  = 0                          ;</div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a033bc5aeb3c34f7ec361d8e8a9c9eddf">Q3SURFACEPARM_PLAYERCLIP</a>   ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents  = <a class="code hl_define" href="bspfile_8h.html#aa8b1bcaea9c05c6c9846ef619aa0327d">SUPERCONTENTS_PLAYERCLIP</a>   ;</div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#adfb3c4a2bb05352e6559c54917fbaf59">Q3SURFACEPARM_BOTCLIP</a>      ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents  = <a class="code hl_define" href="bspfile_8h.html#a35afee7d75ef29a444b98e351a8d3045">SUPERCONTENTS_MONSTERCLIP</a>  ;</div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#aa2adaaf35359aff25e8edd7d80a9d02d">Q3SURFACEPARM_SKY</a>          ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents  = <a class="code hl_define" href="bspfile_8h.html#a0a2fa78587a49f238efd2b5067e66361">SUPERCONTENTS_SKY</a>          ;</div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span> </div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_ALPHASHADOW  ) texture-&gt;supercontents |= SUPERCONTENTS_ALPHASHADOW  ;</span></div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_AREAPORTAL   ) texture-&gt;supercontents |= SUPERCONTENTS_AREAPORTAL   ;</span></div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_CLUSTERPORTAL) texture-&gt;supercontents |= SUPERCONTENTS_CLUSTERPORTAL;</span></div>
<div class="line"><a id="l02517" name="l02517"></a><span class="lineno"> 2517</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_DETAIL       ) texture-&gt;supercontents |= SUPERCONTENTS_DETAIL       ;</span></div>
<div class="line"><a id="l02518" name="l02518"></a><span class="lineno"> 2518</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#af76390044b0a020204b68f5ca543bfeb">Q3SURFACEPARM_DONOTENTER</a>   ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents |= <a class="code hl_define" href="bspfile_8h.html#a271467c975ece9809a85f0f7a37d17af">SUPERCONTENTS_DONOTENTER</a>   ;</div>
<div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_FOG          ) texture-&gt;supercontents |= SUPERCONTENTS_FOG          ;</span></div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a87aeb6af078d63bf2908c682e390c5bc">Q3SURFACEPARM_LAVA</a>         ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents |= <a class="code hl_define" href="bspfile_8h.html#a1c8c25328105edb0ce33da011b939a27">SUPERCONTENTS_LAVA</a>         ;</div>
<div class="line"><a id="l02521" name="l02521"></a><span class="lineno"> 2521</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_LIGHTFILTER  ) texture-&gt;supercontents |= SUPERCONTENTS_LIGHTFILTER  ;</span></div>
<div class="line"><a id="l02522" name="l02522"></a><span class="lineno"> 2522</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_METALSTEPS   ) texture-&gt;supercontents |= SUPERCONTENTS_METALSTEPS   ;</span></div>
<div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_NODAMAGE     ) texture-&gt;supercontents |= SUPERCONTENTS_NODAMAGE     ;</span></div>
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_NODLIGHT     ) texture-&gt;supercontents |= SUPERCONTENTS_NODLIGHT     ;</span></div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_NODRAW       ) texture-&gt;supercontents |= SUPERCONTENTS_NODRAW       ;</span></div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a3d16680d0ae45a060ab7c17b9b46c82e">Q3SURFACEPARM_NODROP</a>       ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents |= <a class="code hl_define" href="bspfile_8h.html#aeae4f676c7d0c05384e4608a2d4d3153">SUPERCONTENTS_NODROP</a>       ;</div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_NOIMPACT     ) texture-&gt;supercontents |= SUPERCONTENTS_NOIMPACT     ;</span></div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_NOLIGHTMAP   ) texture-&gt;supercontents |= SUPERCONTENTS_NOLIGHTMAP   ;</span></div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_NOMARKS      ) texture-&gt;supercontents |= SUPERCONTENTS_NOMARKS      ;</span></div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_NOMIPMAPS    ) texture-&gt;supercontents |= SUPERCONTENTS_NOMIPMAPS    ;</span></div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a336880b416d3577c377b4be4101a31f5">Q3SURFACEPARM_NONSOLID</a>     ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents &amp;=<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">~SUPERCONTENTS_SOLID</a>        ;</div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_ORIGIN       ) texture-&gt;supercontents |= SUPERCONTENTS_ORIGIN       ;</span></div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a033bc5aeb3c34f7ec361d8e8a9c9eddf">Q3SURFACEPARM_PLAYERCLIP</a>   ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents |= <a class="code hl_define" href="bspfile_8h.html#aa8b1bcaea9c05c6c9846ef619aa0327d">SUPERCONTENTS_PLAYERCLIP</a>   ;</div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#aa2adaaf35359aff25e8edd7d80a9d02d">Q3SURFACEPARM_SKY</a>          ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents |= <a class="code hl_define" href="bspfile_8h.html#a0a2fa78587a49f238efd2b5067e66361">SUPERCONTENTS_SKY</a>          ;</div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_SLICK        ) texture-&gt;supercontents |= SUPERCONTENTS_SLICK        ;</span></div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a8ed52380b620b1d0bf5c8688c23b2254">Q3SURFACEPARM_SLIME</a>        ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents |= <a class="code hl_define" href="bspfile_8h.html#a7528d0e1edabc785475a08a7890597ea">SUPERCONTENTS_SLIME</a>        ;</div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_STRUCTURAL   ) texture-&gt;supercontents |= SUPERCONTENTS_STRUCTURAL   ;</span></div>
<div class="line"><a id="l02538" name="l02538"></a><span class="lineno"> 2538</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_TRANS        ) texture-&gt;supercontents |= SUPERCONTENTS_TRANS        ;</span></div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#aeb4b632227e7b1bd0f566a8ac3fd3c66">Q3SURFACEPARM_WATER</a>        ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents |= <a class="code hl_define" href="bspfile_8h.html#af59d298899c2ac56a21f94c327776551">SUPERCONTENTS_WATER</a>        ;</div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_POINTLIGHT   ) texture-&gt;supercontents |= SUPERCONTENTS_POINTLIGHT   ;</span></div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_HINT         ) texture-&gt;supercontents |= SUPERCONTENTS_HINT         ;</span></div>
<div class="line"><a id="l02542" name="l02542"></a><span class="lineno"> 2542</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_DUST         ) texture-&gt;supercontents |= SUPERCONTENTS_DUST         ;</span></div>
<div class="line"><a id="l02543" name="l02543"></a><span class="lineno"> 2543</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#adfb3c4a2bb05352e6559c54917fbaf59">Q3SURFACEPARM_BOTCLIP</a>      ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents |= <a class="code hl_define" href="bspfile_8h.html#a47d0da2237e9a4dc9e2a6f732a4d7165">SUPERCONTENTS_BOTCLIP</a>      | <a class="code hl_define" href="bspfile_8h.html#a35afee7d75ef29a444b98e351a8d3045">SUPERCONTENTS_MONSTERCLIP</a>;</div>
<div class="line"><a id="l02544" name="l02544"></a><span class="lineno"> 2544</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_LIGHTGRID    ) texture-&gt;supercontents |= SUPERCONTENTS_LIGHTGRID    ;</span></div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_ANTIPORTAL   ) texture-&gt;supercontents |= SUPERCONTENTS_ANTIPORTAL   ;</span></div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span> </div>
<div class="line"><a id="l02547" name="l02547"></a><span class="lineno"> 2547</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags = shader-&gt;<a class="code hl_variable" href="structshader__t.html#ab8ce3230e062308ee4ea9d0da945c210">surfaceflags</a>;</div>
<div class="line"><a id="l02548" name="l02548"></a><span class="lineno"> 2548</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#ad90cf96114e59cdded617dbcf1f79d6d">Q3SURFACEPARM_ALPHASHADOW</a>  ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#a78cb28bc5b8d2c67dc5298c9ce96a134">Q3SURFACEFLAG_ALPHASHADOW</a>  ;</div>
<div class="line"><a id="l02549" name="l02549"></a><span class="lineno"> 2549</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_AREAPORTAL   ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_AREAPORTAL   ;</span></div>
<div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_CLUSTERPORTAL) texture-&gt;surfaceflags |= Q3SURFACEFLAG_CLUSTERPORTAL;</span></div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_DETAIL       ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_DETAIL       ;</span></div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_DONOTENTER   ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_DONOTENTER   ;</span></div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_FOG          ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_FOG          ;</span></div>
<div class="line"><a id="l02554" name="l02554"></a><span class="lineno"> 2554</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_LAVA         ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_LAVA         ;</span></div>
<div class="line"><a id="l02555" name="l02555"></a><span class="lineno"> 2555</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#aa7348111d6ef7c8609c0801e25556aa1">Q3SURFACEPARM_LIGHTFILTER</a>  ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#a8070596138109ba2f650eab353842f14">Q3SURFACEFLAG_LIGHTFILTER</a>  ;</div>
<div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a7aece79ccef18bc43b15a75c61f2fd88">Q3SURFACEPARM_METALSTEPS</a>   ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#a5ccb1006a1e14352ba2b5dcca980366c">Q3SURFACEFLAG_METALSTEPS</a>   ;</div>
<div class="line"><a id="l02557" name="l02557"></a><span class="lineno"> 2557</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a5c1521ef1bd61bebcd96be307ca953df">Q3SURFACEPARM_NODAMAGE</a>     ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#af2d936943c71ff1d0a3a4a1992ea25db">Q3SURFACEFLAG_NODAMAGE</a>     ;</div>
<div class="line"><a id="l02558" name="l02558"></a><span class="lineno"> 2558</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#afa8334a4ee597e27ff4f30137291e302">Q3SURFACEPARM_NODLIGHT</a>     ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#af04b6ae65ee17b83bae885bc113830c8">Q3SURFACEFLAG_NODLIGHT</a>     ;</div>
<div class="line"><a id="l02559" name="l02559"></a><span class="lineno"> 2559</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a7bf4cf654a277c3b31cf843bca788ee1">Q3SURFACEPARM_NODRAW</a>       ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#aaf11f833a2a442d8d19bf7db77e0b722">Q3SURFACEFLAG_NODRAW</a>       ;</div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_NODROP       ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_NODROP       ;</span></div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a1df96e3aa46b1e0d6b6579f17c80e281">Q3SURFACEPARM_NOIMPACT</a>     ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#a7fb78b54cea0523f324ac2070a59420b">Q3SURFACEFLAG_NOIMPACT</a>     ;</div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a7f96e9fc81c806967ec292c1de1c083a">Q3SURFACEPARM_NOLIGHTMAP</a>   ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#a8a38a860b9780c723336b0dd1e1c24b9">Q3SURFACEFLAG_NOLIGHTMAP</a>   ;</div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#aa946b0630850bfc47b20c1831114a4a7">Q3SURFACEPARM_NOMARKS</a>      ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#a4ed15d45309b14e9e9d4718657329275">Q3SURFACEFLAG_NOMARKS</a>      ;</div>
<div class="line"><a id="l02564" name="l02564"></a><span class="lineno"> 2564</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_NOMIPMAPS    ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_NOMIPMAPS    ;</span></div>
<div class="line"><a id="l02565" name="l02565"></a><span class="lineno"> 2565</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a336880b416d3577c377b4be4101a31f5">Q3SURFACEPARM_NONSOLID</a>     ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#aee4da2fbbc950ba8a1b0a6a45f479c8f">Q3SURFACEFLAG_NONSOLID</a>     ;</div>
<div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_ORIGIN       ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_ORIGIN       ;</span></div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_PLAYERCLIP   ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_PLAYERCLIP   ;</span></div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#aa2adaaf35359aff25e8edd7d80a9d02d">Q3SURFACEPARM_SKY</a>          ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#a3419225ac529b57d5f8fdfd0842c6451">Q3SURFACEFLAG_SKY</a>          ;</div>
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"> 2569</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a5d166089e7250d935e112267e1dba1d0">Q3SURFACEPARM_SLICK</a>        ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#a53607f1e515147f2ea7d990fb8452855">Q3SURFACEFLAG_SLICK</a>        ;</div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_SLIME        ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_SLIME        ;</span></div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_STRUCTURAL   ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_STRUCTURAL   ;</span></div>
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"> 2572</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_TRANS        ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_TRANS        ;</span></div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_WATER        ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_WATER        ;</span></div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#af015098c6c74b387544d54e7f1ed8c27">Q3SURFACEPARM_POINTLIGHT</a>   ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#ad9286439d536a08bd964279d14e971b9">Q3SURFACEFLAG_POINTLIGHT</a>   ;</div>
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"> 2575</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#afe7ba04c1a61e044c73bc3c5f9b4d8aa">Q3SURFACEPARM_HINT</a>         ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#a9128cd0379a80bed8dee06ce3ff9583b">Q3SURFACEFLAG_HINT</a>         ;</div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">surfaceparms</a> &amp; <a class="code hl_define" href="model__q3bsp_8h.html#ae10d4e2a32aea1b5cd5563596c22c033">Q3SURFACEPARM_DUST</a>         ) <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags |= <a class="code hl_define" href="model__q3bsp_8h.html#a91c88de2a4741941393dc97f841bcef8">Q3SURFACEFLAG_DUST</a>         ;</div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_BOTCLIP      ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_BOTCLIP      ;</span></div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_LIGHTGRID    ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_LIGHTGRID    ;</span></div>
<div class="line"><a id="l02579" name="l02579"></a><span class="lineno"> 2579</span>    <span class="comment">//  if (shader-&gt;surfaceparms &amp; Q3SURFACEPARM_ANTIPORTAL   ) texture-&gt;surfaceflags |= Q3SURFACEFLAG_ANTIPORTAL   ;</span></div>
<div class="line"><a id="l02580" name="l02580"></a><span class="lineno"> 2580</span> </div>
<div class="line"><a id="l02581" name="l02581"></a><span class="lineno"> 2581</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#a864c77f1fa05593ec5e3befc413caa97">dpmeshcollisions</a>)</div>
<div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#aa19d4a4be7cc362a6c45d562916be88e">MATERIALFLAG_MESHCOLLISIONS</a>;</div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span>        <span class="keywordflow">if</span> (shader-&gt;<a class="code hl_variable" href="structshader__t.html#aa67e889c11fa842037167b0ab978c591">dpshaderkill</a> &amp;&amp; <a class="code hl_variable" href="host_8c.html#a2d29d0100dc86ae96b813350bb2b6c32">developer_extra</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"> 2584</span>            <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;^1%s:^7 killing shader ^3\&quot;%s\&quot; because of cvar\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">modelname</a>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>);</div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span>    }</div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name, <span class="stringliteral">&quot;noshader&quot;</span>) || !<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name[0])</div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span>    {</div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a2d29d0100dc86ae96b813350bb2b6c32">developer_extra</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span>            <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;^1%s:^7 using fallback noshader material for ^3\&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">modelname</a>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>);</div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultmaterialflags</a>;</div>
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents = <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a> | <a class="code hl_define" href="bspfile_8h.html#a1743eb1a01a4bc94f435951089dadbd7">SUPERCONTENTS_OPAQUE</a>;</div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span>    }</div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name, <span class="stringliteral">&quot;common/nodraw&quot;</span>) || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name, <span class="stringliteral">&quot;textures/common/nodraw&quot;</span>))</div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span>    {</div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a2d29d0100dc86ae96b813350bb2b6c32">developer_extra</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span>            <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;^1%s:^7 using fallback nodraw material for ^3\&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">modelname</a>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>);</div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags = <a class="code hl_define" href="model__brush_8h.html#a2e9becc912ba5cde5aee7f7db908e965">MATERIALFLAG_NODRAW</a> | <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a>;</div>
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"> 2598</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents = <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a>;</div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span>    }</div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span>    {</div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a2d29d0100dc86ae96b813350bb2b6c32">developer_extra</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>            <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;^1%s:^7 No shader found for texture ^3\&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">modelname</a>, <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name);</div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags &amp; <a class="code hl_define" href="model__q3bsp_8h.html#aaf11f833a2a442d8d19bf7db77e0b722">Q3SURFACEFLAG_NODRAW</a>)</div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span>        {</div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags = <a class="code hl_define" href="model__brush_8h.html#a2e9becc912ba5cde5aee7f7db908e965">MATERIALFLAG_NODRAW</a> | <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a>;</div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents = <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a>;</div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span>        }</div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;surfaceflags &amp; <a class="code hl_define" href="model__q3bsp_8h.html#a3419225ac529b57d5f8fdfd0842c6451">Q3SURFACEFLAG_SKY</a>)</div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span>        {</div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags = <a class="code hl_define" href="model__brush_8h.html#a088347aa145a9d1bae60024278840b34">MATERIALFLAG_SKY</a>;</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents = <a class="code hl_define" href="bspfile_8h.html#a0a2fa78587a49f238efd2b5067e66361">SUPERCONTENTS_SKY</a>;</div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span>        }</div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>        {</div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultmaterialflags</a>;</div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents = <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a> | <a class="code hl_define" href="bspfile_8h.html#a1743eb1a01a4bc94f435951089dadbd7">SUPERCONTENTS_OPAQUE</a>;</div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span>        }</div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="cl__main_8c.html#ab4b4e0f12a72d330ee0869bdf1b372cd">cls</a>.<a class="code hl_variable" href="structclient__static__t.html#a6722e47d64e69141af5cdf392fcf95eb">state</a> == <a class="code hl_enumvalue" href="client_8h.html#a5bba17cd89b07573a996f6d37d31cefea7375457f0c8a5f43091d1cb777aaf659">ca_dedicated</a>)</div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span>        {</div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">success</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span>        }</div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span>        {</div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span>            <a class="code hl_struct" href="structskinframe__t.html">skinframe_t</a> *skinframe = <a class="code hl_function" href="gl__rmain_8c.html#a5960c03dbcd8d4f38b765ca7260aa838">R_SkinFrame_LoadExternal</a>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaulttexflags</a>, <span class="keyword">false</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fallback</a>);</div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span>            <span class="keywordflow">if</span> (skinframe)</div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span>            {</div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span>                <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass = <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[0] = <a class="code hl_function" href="model__shared_8c.html#a3aeb019546a6a3c64accee040d01f336">Mod_CreateShaderPass</a>(mempool, skinframe);</div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass-&gt;skinframes[0]-&gt;hasalpha)</div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span>                    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags |= <a class="code hl_define" href="model__brush_8h.html#a226c2113f3731bc223694bd3e391504a">MATERIALFLAG_ALPHA</a> | <a class="code hl_define" href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a> | <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a>;</div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;q2contents)</div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span>                    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents = <a class="code hl_function" href="model__brush_8c.html#a71ea8486028744092c5d72eaa2dcb15f">Mod_Q2BSP_SuperContentsFromNativeContents</a>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;q2contents);</div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span>            }</div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">success</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">success</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">warnmissing</a>)</div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>                <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;^1%s:^7 could not load texture ^3\&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">modelname</a>, <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name);</div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span>        }</div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span>    }</div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span>    <span class="comment">// init the animation variables</span></div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;currentframe = <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>;</div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;currentmaterialflags = <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags;</div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass)</div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass = <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[0] = <a class="code hl_function" href="model__shared_8c.html#a3aeb019546a6a3c64accee040d01f336">Mod_CreateShaderPass</a>(mempool, <a class="code hl_function" href="gl__rmain_8c.html#ab71c98f74d459505c37064d162f76e46">R_SkinFrame_LoadMissing</a>());</div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass-&gt;skinframes[0])</div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass-&gt;skinframes[0] = <a class="code hl_function" href="gl__rmain_8c.html#ab71c98f74d459505c37064d162f76e46">R_SkinFrame_LoadMissing</a>();</div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;currentskinframe = <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass ? <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass-&gt;skinframes[0] : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;backgroundcurrentskinframe = <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;backgroundshaderpass ? <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;backgroundshaderpass-&gt;skinframes[0] : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">success</a>;</div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>}</div>
</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span> </div>
<div class="foldopen" id="foldopen02653" data-start="{" data-end="}">
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ac96210d7c13570c3a28f49b00874fafe"> 2653</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#ac96210d7c13570c3a28f49b00874fafe">Mod_LoadCustomMaterial</a>(<a class="code hl_struct" href="structmempool__t.html">mempool_t</a> *mempool, <a class="code hl_struct" href="structtexture__t.html">texture_t</a> *<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keywordtype">int</span> supercontents, <span class="keywordtype">int</span> materialflags, <a class="code hl_struct" href="structskinframe__t.html">skinframe_t</a> *skinframe)</div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>{</div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span>    <span class="keywordflow">if</span> (!(materialflags &amp; (<a class="code hl_define" href="model__brush_8h.html#a92fe9590f9e3810dbd4abad9431cc63a">MATERIALFLAG_WALL</a> | <a class="code hl_define" href="model__brush_8h.html#a088347aa145a9d1bae60024278840b34">MATERIALFLAG_SKY</a>)))</div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span>        <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;^1Custom texture ^3\&quot;%s\&quot; does not have MATERIALFLAG_WALL set\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name);</div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span> </div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name));</div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basealpha = 1.0f;</div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags = materialflags;</div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;supercontents = supercontents;</div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span> </div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;offsetmapping = (<a class="code hl_variable" href="model__brush_8c.html#a6a90d29a2909b3cbae37702ff37a32cf">mod_noshader_default_offsetmapping</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>) ? <a class="code hl_enumvalue" href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dca117ca548e7750c4ed09cad4ba3f68eca">OFFSETMAPPING_DEFAULT</a> : <a class="code hl_enumvalue" href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dca2dc4b4e5f2053e46de9d4f0f18d1bfa9">OFFSETMAPPING_OFF</a>;</div>
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"> 2664</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;offsetscale = 1;</div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;offsetbias = 0;</div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;specularscalemod = 1;</div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;specularpowermod = 1;</div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;rtlightambient = 0;</div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;transparentsort = <a class="code hl_enumvalue" href="r__qshader_8h.html#a72d5e32663fb1b0c369079ca0be01f37a2a635f265dd33d939e6dcd1482147080">TRANSPARENTSORT_DISTANCE</a>;</div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span>    <span class="comment">// WHEN ADDING DEFAULTS HERE, REMEMBER TO PUT DEFAULTS IN ALL LOADERS</span></div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>    <span class="comment">// JUST GREP FOR &quot;specularscalemod = 1&quot;.</span></div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span> </div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a2d29d0100dc86ae96b813350bb2b6c32">developer_extra</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span>        <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;^1Custom texture ^3\&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;name);</div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span>    <span class="keywordflow">if</span> (skinframe)</div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span>        <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass = <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[0] = <a class="code hl_function" href="model__shared_8c.html#a3aeb019546a6a3c64accee040d01f336">Mod_CreateShaderPass</a>(mempool, skinframe);</div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span> </div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span>    <span class="comment">// init the animation variables</span></div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;currentmaterialflags = <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;basematerialflags;</div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;currentframe = <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>;</div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;currentskinframe = skinframe;</div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;backgroundcurrentskinframe = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>}</div>
</div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span> </div>
<div class="foldopen" id="foldopen02685" data-start="{" data-end="}">
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ada697218229cff80abd6e85190e8f432"> 2685</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#ada697218229cff80abd6e85190e8f432">Mod_UnloadCustomMaterial</a>(<a class="code hl_struct" href="structtexture__t.html">texture_t</a> *<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">purgeskins</a>)</div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>{</div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span>    <span class="keywordtype">long</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>;</div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses) / <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[0]); <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span>    {</div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>        {</div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">purgeskins</a>)</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>                <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;skinframes) / <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structskinframe__t.html">skinframe_t</a> *);<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;skinframes[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>] &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;skinframes[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]-&gt;base)</div>
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"> 2695</span>                        <a class="code hl_function" href="gl__rmain_8c.html#ab57d3b15b1bdb498f4b0173fa69e9ccf">R_SkinFrame_PurgeSkinFrame</a>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;skinframes[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]);</div>
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>            <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;shaderpasses[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>        }</div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>    }</div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;materialshaderpass = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;currentskinframe = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span>    <a class="code hl_variable" href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a>-&gt;backgroundcurrentskinframe = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span>}</div>
</div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span> </div>
<div class="foldopen" id="foldopen02705" data-start="{" data-end="}">
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a32f3c43770d65673771406dcb9b61a66"> 2705</a></span><a class="code hl_struct" href="structskinfile__t.html">skinfile_t</a> *<a class="code hl_function" href="model__shared_8c.html#a32f3c43770d65673771406dcb9b61a66">Mod_LoadSkinFiles</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>{</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">words</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wordsoverflow</a>;</div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span>    <span class="keywordtype">char</span> *text;</div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;</div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span>    <a class="code hl_struct" href="structskinfile__t.html">skinfile_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *<a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span>    <a class="code hl_struct" href="structskinfileitem__t.html">skinfileitem_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>;</div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[10][<a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>[1024];</div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span> </div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span><span class="comment">/*</span></div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span><span class="comment">sample file:</span></div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span><span class="comment">U_bodyBox,models/players/Legoman/BikerA2.tga</span></div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span><span class="comment">U_RArm,models/players/Legoman/BikerA1.tga</span></div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span><span class="comment">U_LArm,models/players/Legoman/BikerA1.tga</span></div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span><span class="comment">U_armor,common/nodraw</span></div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span><span class="comment">U_sword,common/nodraw</span></div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span><span class="comment">U_shield,common/nodraw</span></div>
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span><span class="comment">U_homb,common/nodraw</span></div>
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"> 2724</span><span class="comment">U_backpack,common/nodraw</span></div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span><span class="comment">U_colcha,common/nodraw</span></div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span><span class="comment">tag_head,</span></div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span><span class="comment">tag_weapon,</span></div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span><span class="comment">tag_torso,</span></div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span><span class="comment">*/</span></div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>));</div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 256 &amp;&amp; (<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> = text = (<span class="keywordtype">char</span> *)<a class="code hl_function" href="fs_8c.html#a46b9b5ad3cc14f77ae63016505163128">FS_LoadFile</a>(<a class="code hl_function" href="common_8c.html#a4a8220fa88226bf9cf39b12a051a20d7">va</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>), <span class="stringliteral">&quot;%s_%i.skin&quot;</span>, <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>), <a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, <span class="keyword">true</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>    {</div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span>        <span class="comment">// If it&#39;s the first file we parse</span></div>
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"> 2734</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span>        {</div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a> = (<a class="code hl_struct" href="structskinfile__t.html">skinfile_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structskinfile__t.html">skinfile_t</a>));</div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>            <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>;</div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>        }</div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"> 2740</span>        {</div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>-&gt;next = (<a class="code hl_struct" href="structskinfile__t.html">skinfile_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structskinfile__t.html">skinfile_t</a>));</div>
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"> 2742</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>-&gt;next;</div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span>        }</div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>-&gt;next = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"> 2745</span> </div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>        <span class="keywordflow">for</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a> = 0;;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>++)</div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span>        {</div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>            <span class="comment">// parse line</span></div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <span class="keyword">true</span>))</div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;\n&quot;</span>))</div>
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"> 2752</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">words</a> = 0;</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wordsoverflow</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"> 2755</span>            <span class="keywordflow">do</span></div>
<div class="line"><a id="l02756" name="l02756"></a><span class="lineno"> 2756</span>            {</div>
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"> 2757</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">words</a> &lt; 10)</div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span>                    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">words</a>++], <a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="keyword">sizeof</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[0]));</div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wordsoverflow</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span>            }</div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>            <span class="keywordflow">while</span> (<a class="code hl_function" href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <span class="keyword">true</span>) &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wordsoverflow</a>)</div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span>            {</div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>                <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Mod_LoadSkinFiles: parsing error in file \&quot;%s_%i.skin\&quot; on line #%i: line with too many statements, skipping\n&quot;</span>, <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>);</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span>            }</div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span>            <span class="comment">// words is always &gt;= 1</span></div>
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[0], <span class="stringliteral">&quot;replace&quot;</span>))</div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span>            {</div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">words</a> == 3)</div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>                {</div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a67a57130da6bf0ad0eb133c0b8bc7642">developer_loading</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span>                        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Mod_LoadSkinFiles: parsed mesh \&quot;%s\&quot; shader replacement \&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[2]);</div>
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"> 2775</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a> = (<a class="code hl_struct" href="structskinfileitem__t.html">skinfileitem_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structskinfileitem__t.html">skinfileitem_t</a>));</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>-&gt;next = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>-&gt;items;</div>
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"> 2777</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>-&gt;items = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>;</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>                    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>-&gt;name, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sizeof</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>-&gt;name));</div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>                    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>-&gt;replacement, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sizeof</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>-&gt;replacement));</div>
<div class="line"><a id="l02780" name="l02780"></a><span class="lineno"> 2780</span>                }</div>
<div class="line"><a id="l02781" name="l02781"></a><span class="lineno"> 2781</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l02782" name="l02782"></a><span class="lineno"> 2782</span>                    <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Mod_LoadSkinFiles: parsing error in file \&quot;%s_%i.skin\&quot; on line #%i: wrong number of parameters to command \&quot;%s\&quot;, see documentation in DP_GFX_SKINFILES extension in dpextensions.qc\n&quot;</span>, <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[0]);</div>
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"> 2783</span>            }</div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">words</a> &gt;= 2 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strncmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[0], <span class="stringliteral">&quot;tag_&quot;</span>, 4))</div>
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"> 2785</span>            {</div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span>                <span class="comment">// tag name, like &quot;tag_weapon,&quot;</span></div>
<div class="line"><a id="l02787" name="l02787"></a><span class="lineno"> 2787</span>                <span class="comment">// not used for anything (not even in Quake3)</span></div>
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"> 2788</span>            }</div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">words</a> &gt;= 2 &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[1], <span class="stringliteral">&quot;,&quot;</span>))</div>
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span>            {</div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>                <span class="comment">// mesh shader name, like &quot;U_RArm,models/players/Legoman/BikerA1.tga&quot;</span></div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a67a57130da6bf0ad0eb133c0b8bc7642">developer_loading</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span>                    <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Mod_LoadSkinFiles: parsed mesh \&quot;%s\&quot; shader replacement \&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[2]);</div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a> = (<a class="code hl_struct" href="structskinfileitem__t.html">skinfileitem_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structskinfileitem__t.html">skinfileitem_t</a>));</div>
<div class="line"><a id="l02795" name="l02795"></a><span class="lineno"> 2795</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>-&gt;next = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>-&gt;items;</div>
<div class="line"><a id="l02796" name="l02796"></a><span class="lineno"> 2796</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>-&gt;items = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>;</div>
<div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span>                <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>-&gt;name, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sizeof</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>-&gt;name));</div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>                <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>-&gt;replacement, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">word</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sizeof</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>-&gt;replacement));</div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>            }</div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>                <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Mod_LoadSkinFiles: parsing error in file \&quot;%s_%i.skin\&quot; on line #%i: does not look like tag or mesh specification, or replace command, see documentation in DP_GFX_SKINFILES extension in dpextensions.qc\n&quot;</span>, <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>);</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span>        }</div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(text);</div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span>    }</div>
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"> 2805</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a092a26ea0346fc90b6bc82a33289ed82">numskins</a> = <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a>;</div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span>}</div>
</div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span> </div>
<div class="foldopen" id="foldopen02810" data-start="{" data-end="}">
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aa8682f0314d166f3d811599c8400e3a2"> 2810</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aa8682f0314d166f3d811599c8400e3a2">Mod_FreeSkinFiles</a>(<a class="code hl_struct" href="structskinfile__t.html">skinfile_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>)</div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span>{</div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span>    <a class="code hl_struct" href="structskinfile__t.html">skinfile_t</a> *next;</div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span>    <a class="code hl_struct" href="structskinfileitem__t.html">skinfileitem_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nextitem</a>;</div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span>    <span class="keywordflow">for</span> (;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a> = next)</div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span>    {</div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span>        next = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>-&gt;<a class="code hl_variable" href="structskinfile__t.html#a8b63a5aeae66db96d58fa1c1e847d405">next</a>;</div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>-&gt;items;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nextitem</a>)</div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span>        {</div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nextitem</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>-&gt;next;</div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfileitem</a>);</div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span>        }</div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>);</div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span>    }</div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>}</div>
</div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span> </div>
<div class="foldopen" id="foldopen02826" data-start="{" data-end="}">
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a59cecfbdb3deb49561ca49671e6b3db9"> 2826</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="model__shared_8c.html#a59cecfbdb3deb49561ca49671e6b3db9">Mod_CountSkinFiles</a>(<a class="code hl_struct" href="structskinfile__t.html">skinfile_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>)</div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span>{</div>
<div class="line"><a id="l02828" name="l02828"></a><span class="lineno"> 2828</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l02829" name="l02829"></a><span class="lineno"> 2829</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">skinfile</a>-&gt;next, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++);</div>
<div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"> 2831</span>}</div>
</div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span> </div>
<div class="foldopen" id="foldopen02833" data-start="{" data-end="}">
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a99847fc089cdd271d3f4998c2c60e719"> 2833</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a99847fc089cdd271d3f4998c2c60e719">Mod_SnapVertices</a>(<span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcomponents</a>, <span class="keywordtype">int</span> numvertices, <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertices</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">snap</a>)</div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span>{</div>
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"> 2835</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span>    <span class="keywordtype">double</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">isnap</a> = 1.0 / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">snap</a>;</div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numvertices*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numcomponents</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertices</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertices</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">isnap</a>)*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">snap</a>;</div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span>}</div>
</div>
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"> 2840</span> </div>
<div class="foldopen" id="foldopen02841" data-start="{" data-end="}">
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a9afca5eb89c94aade4ee83c5ffbf8066"> 2841</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="model__shared_8c.html#a9afca5eb89c94aade4ee83c5ffbf8066">Mod_RemoveDegenerateTriangles</a>(<span class="keywordtype">int</span> numtriangles, <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inelement3i</a>, <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outelement3i</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> *vertex3f)</div>
<div class="line"><a id="l02842" name="l02842"></a><span class="lineno"> 2842</span>{</div>
<div class="line"><a id="l02843" name="l02843"></a><span class="lineno"> 2843</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outtriangles</a>;</div>
<div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">edgedir1</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">edgedir2</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>[3];</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span>    <span class="comment">// a degenerate triangle is one with no width (thickness, surface area)</span></div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span>    <span class="comment">// these are characterized by having all 3 points colinear (along a line)</span></div>
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"> 2847</span>    <span class="comment">// or having two points identical</span></div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span>    <span class="comment">// the simplest check is to calculate the triangle&#39;s area</span></div>
<div class="line"><a id="l02849" name="l02849"></a><span class="lineno"> 2849</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outtriangles</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numtriangles;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inelement3i</a> += 3)</div>
<div class="line"><a id="l02850" name="l02850"></a><span class="lineno"> 2850</span>    {</div>
<div class="line"><a id="l02851" name="l02851"></a><span class="lineno"> 2851</span>        <span class="comment">// calculate first edge</span></div>
<div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>        <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(vertex3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inelement3i</a>[1] * 3, vertex3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inelement3i</a>[0] * 3, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">edgedir1</a>);</div>
<div class="line"><a id="l02853" name="l02853"></a><span class="lineno"> 2853</span>        <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(vertex3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inelement3i</a>[2] * 3, vertex3f + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inelement3i</a>[0] * 3, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">edgedir2</a>);</div>
<div class="line"><a id="l02854" name="l02854"></a><span class="lineno"> 2854</span>        <a class="code hl_define" href="mathlib_8h.html#aa3c5114e57f89ea32ef8f41e00631e44">CrossProduct</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">edgedir1</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">edgedir2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>);</div>
<div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>) &lt; 0.001f)</div>
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"> 2856</span>            <span class="keywordflow">continue</span>; <span class="comment">// degenerate triangle (no area)</span></div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span>        <span class="comment">// valid triangle (has area)</span></div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span>        <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inelement3i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outelement3i</a>);</div>
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"> 2859</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outelement3i</a> += 3;</div>
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"> 2860</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outtriangles</a>++;</div>
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"> 2861</span>    }</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outtriangles</a>;</div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>}</div>
</div>
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"> 2864</span> </div>
<div class="foldopen" id="foldopen02865" data-start="{" data-end="}">
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aee888bb8fc89649575a997f25dfb003c"> 2865</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aee888bb8fc89649575a997f25dfb003c">Mod_VertexRangeFromElements</a>(<span class="keywordtype">int</span> numelements, <span class="keyword">const</span> <span class="keywordtype">int</span> *elements, <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firstvertexpointer</a>, <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastvertexpointer</a>)</div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>{</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>;</div>
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span>    <span class="keywordtype">int</span> firstvertex, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastvertex</a>;</div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span>    <span class="keywordflow">if</span> (numelements &gt; 0 &amp;&amp; elements)</div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span>    {</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>        firstvertex = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastvertex</a> = elements[0];</div>
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"> 2872</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numelements;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span>        {</div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = elements[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"> 2875</span>            firstvertex = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(firstvertex, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>);</div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastvertex</a> = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastvertex</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>);</div>
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"> 2877</span>        }</div>
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"> 2878</span>    }</div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>        firstvertex = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastvertex</a> = 0;</div>
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"> 2881</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firstvertexpointer</a>)</div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>        *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firstvertexpointer</a> = firstvertex;</div>
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"> 2883</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastvertexpointer</a>)</div>
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"> 2884</span>        *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastvertexpointer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lastvertex</a>;</div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span>}</div>
</div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span> </div>
<div class="foldopen" id="foldopen02887" data-start="{" data-end="}">
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"><a class="line" href="model__shared_8c.html#af5bb8e6dccd0096a95cca1db54d8cdc7"> 2887</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#af5bb8e6dccd0096a95cca1db54d8cdc7">Mod_SetDrawSkyAndWater</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a>* mod)</div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>{</div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>;</div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">uint64_t</a> basematerialflags = 0;</div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span>    <span class="comment">// by default assume there is no sky or water used in this model</span></div>
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"> 2892</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a54bb4319ad425035cabd82548941faf3">DrawSky</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a5591540702848d10fc671916113de5f6">DrawAddWaterPlanes</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span>    <span class="comment">// combine all basematerialflags observed in the submodelsurfaces range, then check for special flags</span></div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">submodelsurfaces_start</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a3cf3f78e305583268585ef7bde7aaa16">submodelsurfaces_end</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>        <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmsurface__t.html#a7caa0cbcf942fc5d17d16ae8f212b91e">texture</a>)</div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>            basematerialflags |= mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmsurface__t.html#a7caa0cbcf942fc5d17d16ae8f212b91e">texture</a>-&gt;<a class="code hl_variable" href="structtexture__t.html#a8095d6a5de58938c8ef472c95eca6496">basematerialflags</a>;</div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span>    <span class="keywordflow">if</span> (basematerialflags &amp; <a class="code hl_define" href="model__brush_8h.html#a088347aa145a9d1bae60024278840b34">MATERIALFLAG_SKY</a>)</div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a54bb4319ad425035cabd82548941faf3">DrawSky</a> = <a class="code hl_function" href="gl__rsurf_8c.html#a2a904ab23659bf4ac89dd053b69997a5">R_Mod_DrawSky</a>;</div>
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"> 2900</span>    <span class="keywordflow">if</span> (basematerialflags &amp; (<a class="code hl_define" href="model__brush_8h.html#a7055dcfb7e841b4f8df429bc32e9212f">MATERIALFLAG_WATERSHADER</a> | <a class="code hl_define" href="model__brush_8h.html#a22de374860637bd38095828d776a3028">MATERIALFLAG_REFRACTION</a> | <a class="code hl_define" href="model__brush_8h.html#aa7c4cb26c138264bb415dddb89455595">MATERIALFLAG_REFLECTION</a> | <a class="code hl_define" href="model__brush_8h.html#a80f07bef20c3c45b339d64917bf8a0b6">MATERIALFLAG_CAMERA</a>))</div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a5591540702848d10fc671916113de5f6">DrawAddWaterPlanes</a> = <a class="code hl_function" href="gl__rsurf_8c.html#aab6edde929aa09b6f2ba17cd469f97ac">R_Mod_DrawAddWaterPlanes</a>;</div>
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"> 2902</span>}</div>
</div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span> </div>
<div class="foldopen" id="foldopen02904" data-start="{" data-end="};">
<div class="line"><a id="l02904" name="l02904"></a><span class="lineno"><a class="line" href="structMod__MakeSortedSurfaces__qsortsurface__t.html"> 2904</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Mod_MakeSortedSurfaces_qsortsurface_s</a></div>
<div class="line"><a id="l02905" name="l02905"></a><span class="lineno"> 2905</span>{</div>
<div class="line"><a id="l02906" name="l02906"></a><span class="lineno"><a class="line" href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a1de8518b8dfbcfee6807e8a45f8f5090"> 2906</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a1de8518b8dfbcfee6807e8a45f8f5090">surfaceindex</a>;</div>
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"><a class="line" href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a3048fe1e8952fd8664c132e4d834bb59"> 2907</a></span>    <a class="code hl_struct" href="structq3deffect__t.html">q3deffect_t</a>* <a class="code hl_variable" href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a3048fe1e8952fd8664c132e4d834bb59">effect</a>;</div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"><a class="line" href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a0e53da658f2d93e416335ae5fde33f3e"> 2908</a></span>    <a class="code hl_struct" href="structtexture__t.html">texture_t</a>* <a class="code hl_variable" href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a0e53da658f2d93e416335ae5fde33f3e">texture</a>;</div>
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"><a class="line" href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a342d8e9ebb3201d16a5aa5231bb8b2b6"> 2909</a></span>    <a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a>* <a class="code hl_variable" href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a342d8e9ebb3201d16a5aa5231bb8b2b6">lightmaptexture</a>;</div>
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"> 2910</span>}</div>
</div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span><a class="code hl_struct" href="structMod__MakeSortedSurfaces__qsortsurface__t.html">Mod_MakeSortedSurfaces_qsortsurface_t</a>;</div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span> </div>
<div class="foldopen" id="foldopen02913" data-start="{" data-end="}">
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a96151c36357672ef59306c81490d3e92"> 2913</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_function" href="model__shared_8c.html#a96151c36357672ef59306c81490d3e92">Mod_MakeSortedSurfaces_qsortfunc</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>)</div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>{</div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structMod__MakeSortedSurfaces__qsortsurface__t.html">Mod_MakeSortedSurfaces_qsortsurface_t</a>* <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = (<a class="code hl_struct" href="structMod__MakeSortedSurfaces__qsortsurface__t.html">Mod_MakeSortedSurfaces_qsortsurface_t</a>*)<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>;</div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structMod__MakeSortedSurfaces__qsortsurface__t.html">Mod_MakeSortedSurfaces_qsortsurface_t</a>* <a class="code hl_variable" href="shader__glsl_8h.html#a008e65201d4481545ed89903a22f667a">r</a> = (<a class="code hl_struct" href="structMod__MakeSortedSurfaces__qsortsurface__t.html">Mod_MakeSortedSurfaces_qsortsurface_t</a>*)<a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>;</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>-&gt;effect &lt; <a class="code hl_variable" href="shader__glsl_8h.html#a008e65201d4481545ed89903a22f667a">r</a>-&gt;effect)</div>
<div class="line"><a id="l02918" name="l02918"></a><span class="lineno"> 2918</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02919" name="l02919"></a><span class="lineno"> 2919</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>-&gt;effect &gt; <a class="code hl_variable" href="shader__glsl_8h.html#a008e65201d4481545ed89903a22f667a">r</a>-&gt;effect)</div>
<div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>-&gt;texture &lt; <a class="code hl_variable" href="shader__glsl_8h.html#a008e65201d4481545ed89903a22f667a">r</a>-&gt;texture)</div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"> 2923</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>-&gt;texture &gt; <a class="code hl_variable" href="shader__glsl_8h.html#a008e65201d4481545ed89903a22f667a">r</a>-&gt;texture)</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l02925" name="l02925"></a><span class="lineno"> 2925</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>-&gt;lightmaptexture &lt; <a class="code hl_variable" href="shader__glsl_8h.html#a008e65201d4481545ed89903a22f667a">r</a>-&gt;lightmaptexture)</div>
<div class="line"><a id="l02926" name="l02926"></a><span class="lineno"> 2926</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02927" name="l02927"></a><span class="lineno"> 2927</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>-&gt;lightmaptexture &gt; <a class="code hl_variable" href="shader__glsl_8h.html#a008e65201d4481545ed89903a22f667a">r</a>-&gt;lightmaptexture)</div>
<div class="line"><a id="l02928" name="l02928"></a><span class="lineno"> 2928</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l02929" name="l02929"></a><span class="lineno"> 2929</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>-&gt;surfaceindex &lt; <a class="code hl_variable" href="shader__glsl_8h.html#a008e65201d4481545ed89903a22f667a">r</a>-&gt;surfaceindex)</div>
<div class="line"><a id="l02930" name="l02930"></a><span class="lineno"> 2930</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l02931" name="l02931"></a><span class="lineno"> 2931</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>-&gt;surfaceindex &gt; <a class="code hl_variable" href="shader__glsl_8h.html#a008e65201d4481545ed89903a22f667a">r</a>-&gt;surfaceindex)</div>
<div class="line"><a id="l02932" name="l02932"></a><span class="lineno"> 2932</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l02933" name="l02933"></a><span class="lineno"> 2933</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02934" name="l02934"></a><span class="lineno"> 2934</span>}</div>
</div>
<div class="line"><a id="l02935" name="l02935"></a><span class="lineno"> 2935</span> </div>
<div class="foldopen" id="foldopen02936" data-start="{" data-end="}">
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aa8c710db4d67bb0e0759c01235c827e7"> 2936</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aa8c710db4d67bb0e0759c01235c827e7">Mod_MakeSortedSurfaces</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod)</div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span>{</div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span>    <span class="comment">// make an optimal set of texture-sorted batches to draw...</span></div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>;</div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span>    <a class="code hl_struct" href="structMod__MakeSortedSurfaces__qsortsurface__t.html">Mod_MakeSortedSurfaces_qsortsurface_t</a> *info;</div>
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"> 2941</span> </div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="cl__main_8c.html#ab4b4e0f12a72d330ee0869bdf1b372cd">cls</a>.<a class="code hl_variable" href="structclient__static__t.html#a6722e47d64e69141af5cdf392fcf95eb">state</a> == <a class="code hl_enumvalue" href="client_8h.html#a5bba17cd89b07573a996f6d37d31cefea7375457f0c8a5f43091d1cb777aaf659">ca_dedicated</a>)</div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span> </div>
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"> 2945</span>    info = (<a class="code hl_struct" href="structMod__MakeSortedSurfaces__qsortsurface__t.html">Mod_MakeSortedSurfaces_qsortsurface_t</a>*)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a> * <span class="keyword">sizeof</span>(*info));</div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>    <span class="keywordflow">if</span> (!mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a37ed77c0d67434b15280684a8ba42814">modelsurfaces_sorted</a>)</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a37ed77c0d67434b15280684a8ba42814">modelsurfaces_sorted</a> = (<span class="keywordtype">int</span> *) <a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a> * <span class="keyword">sizeof</span>(*mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a37ed77c0d67434b15280684a8ba42814">modelsurfaces_sorted</a>));</div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span>    <span class="comment">// the goal is to sort by submodel (can&#39;t change which submodel a surface belongs to), and then by effects and textures</span></div>
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"> 2949</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span>    {</div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>        info[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a1de8518b8dfbcfee6807e8a45f8f5090">surfaceindex</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>;</div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span>        info[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a3048fe1e8952fd8664c132e4d834bb59">effect</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmsurface__t.html#a99675a77495a62fb96422ab49b756d3d">effect</a>;</div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span>        info[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a0e53da658f2d93e416335ae5fde33f3e">texture</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmsurface__t.html#a7caa0cbcf942fc5d17d16ae8f212b91e">texture</a>;</div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span>        info[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a342d8e9ebb3201d16a5aa5231bb8b2b6">lightmaptexture</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmsurface__t.html#af83214878e2f4b322aaa26ae45506d32">lightmaptexture</a>;</div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span>    }</div>
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"> 2956</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a12ae1e03d70e00f9b3ba4a11a2314e2e">numsubmodels</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>++)</div>
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"> 2957</span>        <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a462aadc65aeffe8d8e64208e0d841f39">submodels</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>]-&gt;submodelsurfaces_end &gt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a462aadc65aeffe8d8e64208e0d841f39">submodels</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>]-&gt;submodelsurfaces_start + 1)</div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qsort</a>(info + mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a462aadc65aeffe8d8e64208e0d841f39">submodels</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>]-&gt;submodelsurfaces_start, (<span class="keywordtype">size_t</span>)mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a462aadc65aeffe8d8e64208e0d841f39">submodels</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>]-&gt;submodelsurfaces_end - mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a462aadc65aeffe8d8e64208e0d841f39">submodels</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>]-&gt;submodelsurfaces_start, <span class="keyword">sizeof</span>(*info), <a class="code hl_function" href="model__shared_8c.html#a96151c36357672ef59306c81490d3e92">Mod_MakeSortedSurfaces_qsortfunc</a>);</div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a37ed77c0d67434b15280684a8ba42814">modelsurfaces_sorted</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>] = info[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a1de8518b8dfbcfee6807e8a45f8f5090">surfaceindex</a>;</div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span>    <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(info);</div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span>}</div>
</div>
<div class="line"><a id="l02963" name="l02963"></a><span class="lineno"> 2963</span> </div>
<div class="foldopen" id="foldopen02964" data-start="{" data-end="}">
<div class="line"><a id="l02964" name="l02964"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a7c7a5f1ce32faf220d25380eb24bd1ad"> 2964</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a7c7a5f1ce32faf220d25380eb24bd1ad">Mod_BuildVBOs</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>{</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="cl__main_8c.html#ab4b4e0f12a72d330ee0869bdf1b372cd">cls</a>.<a class="code hl_variable" href="structclient__static__t.html#a6722e47d64e69141af5cdf392fcf95eb">state</a> == <a class="code hl_enumvalue" href="client_8h.html#a5bba17cd89b07573a996f6d37d31cefea7375457f0c8a5f43091d1cb777aaf659">ca_dedicated</a>)</div>
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"> 2967</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span> </div>
<div class="line"><a id="l02969" name="l02969"></a><span class="lineno"> 2969</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>)</div>
<div class="line"><a id="l02970" name="l02970"></a><span class="lineno"> 2970</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02971" name="l02971"></a><span class="lineno"> 2971</span> </div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__backend_8c.html#af6f35b3d05852d6a58eeabc7f4616cfc">gl_paranoid</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &amp;&amp; <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a> &amp;&amp; <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>)</div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span>    {</div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l02975" name="l02975"></a><span class="lineno"> 2975</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>*3;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02976" name="l02976"></a><span class="lineno"> 2976</span>        {</div>
<div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] != <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span>            {</div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span>                <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Mod_BuildVBOs: element %u is incorrect (%u should be %u)\n&quot;</span>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"> 2980</span>                <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"> 2981</span>            }</div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span>        }</div>
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"> 2983</span>    }</div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span> </div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span>    <span class="comment">// upload short indices as a buffer</span></div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a> &amp;&amp; !<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af47d08768f0e0a846c272a9a8d443d03">data_element3s_indexbuffer</a>)</div>
<div class="line"><a id="l02987" name="l02987"></a><span class="lineno"> 2987</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af47d08768f0e0a846c272a9a8d443d03">data_element3s_indexbuffer</a> = <a class="code hl_function" href="gl__backend_8c.html#a897a83101fb978aec99bbb3c37c4e78c">R_Mesh_CreateMeshBuffer</a>(<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a>, <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">short</span>[3]), <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l02988" name="l02988"></a><span class="lineno"> 2988</span> </div>
<div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span>    <span class="comment">// upload int indices as a buffer</span></div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a> &amp;&amp; !<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a85cf7a011550b759899f963c1f68c98b">data_element3i_indexbuffer</a> &amp;&amp; !<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a>)</div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a85cf7a011550b759899f963c1f68c98b">data_element3i_indexbuffer</a> = <a class="code hl_function" href="gl__backend_8c.html#a897a83101fb978aec99bbb3c37c4e78c">R_Mesh_CreateMeshBuffer</a>(<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>, <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>[3]), <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span> </div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span>    <span class="comment">// only build a vbo if one has not already been created (this is important for brush models which load specially)</span></div>
<div class="line"><a id="l02994" name="l02994"></a><span class="lineno"> 2994</span>    <span class="comment">// we put several vertex data streams in the same buffer</span></div>
<div class="line"><a id="l02995" name="l02995"></a><span class="lineno"> 2995</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a>)</div>
<div class="line"><a id="l02996" name="l02996"></a><span class="lineno"> 2996</span>    {</div>
<div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;</div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *mem;</div>
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"> 2999</span>        <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> = 0;</div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ae5d89f1c30eff8f6a177e74504e20d9c">data_vertex3f_bufferoffset</a>           = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;<span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>          ) <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]);</div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a41ce86dc0eefb29272f7d1e77238200a">data_svector3f_bufferoffset</a>          = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;<span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a>         ) <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]);</div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab251f4a29a88b99365ea3a65a49700f6">data_tvector3f_bufferoffset</a>          = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;<span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a>         ) <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]);</div>
<div class="line"><a id="l03003" name="l03003"></a><span class="lineno"> 3003</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a092c9af0ece66606a1a46ddc256c87d0">data_normal3f_bufferoffset</a>           = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;<span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>          ) <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]);</div>
<div class="line"><a id="l03004" name="l03004"></a><span class="lineno"> 3004</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab13056777e09fa6109ab2c528389e0a9">data_texcoordtexture2f_bufferoffset</a>  = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;<span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a> ) <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]);</div>
<div class="line"><a id="l03005" name="l03005"></a><span class="lineno"> 3005</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a29d3f99e62735e29f5c4a9b2f30178fa">data_texcoordlightmap2f_bufferoffset</a> = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;<span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a>) <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]);</div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aeb555f8524bab5e10a1ca22c3899c2e7">data_lightmapcolor4f_bufferoffset</a>    = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;<span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>   ) <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[4]);</div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a359a49d4cf59430ef6aa29492b10c488">data_skeletalindex4ub_bufferoffset</a>   = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;<span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5a23f7f679399e0588c64df838a79779">data_skeletalindex4ub</a>  ) <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[4]);</div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a13b427ce0ede7a7346713986ff3596a9">data_skeletalweight4ub_bufferoffset</a>  = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;<span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a452cf124552a1501be5342525d5aa124">data_skeletalweight4ub</a> ) <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[4]);</div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span>        mem = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>);</div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>          ) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(mem + <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ae5d89f1c30eff8f6a177e74504e20d9c">data_vertex3f_bufferoffset</a>          , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>          , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l03011" name="l03011"></a><span class="lineno"> 3011</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a>         ) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(mem + <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a41ce86dc0eefb29272f7d1e77238200a">data_svector3f_bufferoffset</a>         , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a>         , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l03012" name="l03012"></a><span class="lineno"> 3012</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a>         ) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(mem + <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab251f4a29a88b99365ea3a65a49700f6">data_tvector3f_bufferoffset</a>         , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a>         , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>          ) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(mem + <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a092c9af0ece66606a1a46ddc256c87d0">data_normal3f_bufferoffset</a>          , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>          , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a> ) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(mem + <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab13056777e09fa6109ab2c528389e0a9">data_texcoordtexture2f_bufferoffset</a> , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a> , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]));</div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a>) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(mem + <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a29d3f99e62735e29f5c4a9b2f30178fa">data_texcoordlightmap2f_bufferoffset</a>, <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a>, <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]));</div>
<div class="line"><a id="l03016" name="l03016"></a><span class="lineno"> 3016</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>   ) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(mem + <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aeb555f8524bab5e10a1ca22c3899c2e7">data_lightmapcolor4f_bufferoffset</a>   , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>   , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[4]));</div>
<div class="line"><a id="l03017" name="l03017"></a><span class="lineno"> 3017</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5a23f7f679399e0588c64df838a79779">data_skeletalindex4ub</a>  ) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(mem + <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a359a49d4cf59430ef6aa29492b10c488">data_skeletalindex4ub_bufferoffset</a>  , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5a23f7f679399e0588c64df838a79779">data_skeletalindex4ub</a>  , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[4]));</div>
<div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a452cf124552a1501be5342525d5aa124">data_skeletalweight4ub</a> ) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(mem + <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a13b427ce0ede7a7346713986ff3596a9">data_skeletalweight4ub_bufferoffset</a> , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a452cf124552a1501be5342525d5aa124">data_skeletalweight4ub</a> , <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[4]));</div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> = <a class="code hl_function" href="gl__backend_8c.html#a897a83101fb978aec99bbb3c37c4e78c">R_Mesh_CreateMeshBuffer</a>(mem, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a0064f2925b91731163e286f6ff0f5a76">data_svector3f_vertexbuffer</a> = <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a> ? <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"> 3021</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7fc323b763071fa72a24bd51b88e1f0c">data_tvector3f_vertexbuffer</a> = <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a> ? <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a1fc3a10501c13b8da40b66116d8818b7">data_normal3f_vertexbuffer</a> = <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a> ? <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03023" name="l03023"></a><span class="lineno"> 3023</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7767026390ac39c88f7ce4d6f6432bfd">data_texcoordtexture2f_vertexbuffer</a> = <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a> ? <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03024" name="l03024"></a><span class="lineno"> 3024</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#acc34f19933b25ec4138101d2da7c0402">data_texcoordlightmap2f_vertexbuffer</a> = <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a> ? <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a14978807f299ff4eb08fbc95f12f4390">data_lightmapcolor4f_vertexbuffer</a> = <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a> ? <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7acee012733eb5e093982690193053ed">data_skeletalindex4ub_vertexbuffer</a> = <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5a23f7f679399e0588c64df838a79779">data_skeletalindex4ub</a> ? <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span>        <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ae20f7ffe94f47df81dac465ec2888d2f">data_skeletalweight4ub_vertexbuffer</a> = <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a452cf124552a1501be5342525d5aa124">data_skeletalweight4ub</a> ? <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(mem);</div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span>    }</div>
<div class="line"><a id="l03030" name="l03030"></a><span class="lineno"> 3030</span>}</div>
</div>
<div class="line"><a id="l03031" name="l03031"></a><span class="lineno"> 3031</span> </div>
<div class="line"><a id="l03032" name="l03032"></a><span class="lineno"> 3032</span><span class="keyword">extern</span> <a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#afb66a8936f34a990e2385c092115ef3c">mod_obj_orientation</a>;</div>
<div class="foldopen" id="foldopen03033" data-start="{" data-end="}">
<div class="line"><a id="l03033" name="l03033"></a><span class="lineno"><a class="line" href="model__shared_8c.html#af5ee5fa8fce22ef53c6475c9ab3c5d04"> 3033</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#af5ee5fa8fce22ef53c6475c9ab3c5d04">Mod_Decompile_OBJ</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model, <span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtlfilename</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originalfilename</a>)</div>
<div class="line"><a id="l03034" name="l03034"></a><span class="lineno"> 3034</span>{</div>
<div class="line"><a id="l03035" name="l03035"></a><span class="lineno"> 3035</span>    <span class="keywordtype">int</span> submodelindex, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>, surfaceindex, triangleindex, textureindex, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countvertices</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countsurfaces</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countfaces</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">counttextures</a> = 0;</div>
<div class="line"><a id="l03036" name="l03036"></a><span class="lineno"> 3036</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>, <a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>, c;</div>
<div class="line"><a id="l03037" name="l03037"></a><span class="lineno"> 3037</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texname</a>;</div>
<div class="line"><a id="l03038" name="l03038"></a><span class="lineno"> 3038</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>;</div>
<div class="line"><a id="l03039" name="l03039"></a><span class="lineno"> 3039</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>, *vn, *vt;</div>
<div class="line"><a id="l03040" name="l03040"></a><span class="lineno"> 3040</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03041" name="l03041"></a><span class="lineno"> 3041</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> = 0;</div>
<div class="line"><a id="l03042" name="l03042"></a><span class="lineno"> 3042</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> = 0x100000;</div>
<div class="line"><a id="l03043" name="l03043"></a><span class="lineno"> 3043</span>    <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> = (<span class="keywordtype">char</span> *) <a class="code hl_define" href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a>), *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>;</div>
<div class="line"><a id="l03044" name="l03044"></a><span class="lineno"> 3044</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>;</div>
<div class="line"><a id="l03045" name="l03045"></a><span class="lineno"> 3045</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">maxtextures</a> = 256;</div>
<div class="line"><a id="l03046" name="l03046"></a><span class="lineno"> 3046</span>    <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturenames</a> = (<span class="keywordtype">char</span> *) <a class="code hl_define" href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">maxtextures</a> * <a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>);</div>
<div class="line"><a id="l03047" name="l03047"></a><span class="lineno"> 3047</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *submodel;</div>
<div class="line"><a id="l03048" name="l03048"></a><span class="lineno"> 3048</span> </div>
<div class="line"><a id="l03049" name="l03049"></a><span class="lineno"> 3049</span>    <span class="comment">// construct the mtllib file</span></div>
<div class="line"><a id="l03050" name="l03050"></a><span class="lineno"> 3050</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;# mtllib for %s exported by darkplaces engine\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originalfilename</a>);</div>
<div class="line"><a id="l03051" name="l03051"></a><span class="lineno"> 3051</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03052" name="l03052"></a><span class="lineno"> 3052</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03053" name="l03053"></a><span class="lineno"> 3053</span>    <span class="keywordflow">for</span> (surfaceindex = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>;surfaceindex &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>;surfaceindex++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>++)</div>
<div class="line"><a id="l03054" name="l03054"></a><span class="lineno"> 3054</span>    {</div>
<div class="line"><a id="l03055" name="l03055"></a><span class="lineno"> 3055</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countsurfaces</a>++;</div>
<div class="line"><a id="l03056" name="l03056"></a><span class="lineno"> 3056</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countvertices</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_vertices;</div>
<div class="line"><a id="l03057" name="l03057"></a><span class="lineno"> 3057</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countfaces</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles;</div>
<div class="line"><a id="l03058" name="l03058"></a><span class="lineno"> 3058</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texname</a> = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture-&gt;name[0]) ? <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture-&gt;name : <span class="stringliteral">&quot;default&quot;</span>;</div>
<div class="line"><a id="l03059" name="l03059"></a><span class="lineno"> 3059</span>        <span class="keywordflow">for</span> (textureindex = 0;textureindex &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">counttextures</a>;textureindex++)</div>
<div class="line"><a id="l03060" name="l03060"></a><span class="lineno"> 3060</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturenames</a> + textureindex * <a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texname</a>))</div>
<div class="line"><a id="l03061" name="l03061"></a><span class="lineno"> 3061</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03062" name="l03062"></a><span class="lineno"> 3062</span>        <span class="keywordflow">if</span> (textureindex &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">counttextures</a>)</div>
<div class="line"><a id="l03063" name="l03063"></a><span class="lineno"> 3063</span>            <span class="keywordflow">continue</span>; <span class="comment">// already wrote this material entry</span></div>
<div class="line"><a id="l03064" name="l03064"></a><span class="lineno"> 3064</span>        <span class="keywordflow">if</span> (textureindex &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">maxtextures</a>)</div>
<div class="line"><a id="l03065" name="l03065"></a><span class="lineno"> 3065</span>            <span class="keywordflow">continue</span>; <span class="comment">// just a precaution</span></div>
<div class="line"><a id="l03066" name="l03066"></a><span class="lineno"> 3066</span>        textureindex = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">counttextures</a>++;</div>
<div class="line"><a id="l03067" name="l03067"></a><span class="lineno"> 3067</span>        <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturenames</a> + textureindex * <a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texname</a>, <a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>);</div>
<div class="line"><a id="l03068" name="l03068"></a><span class="lineno"> 3068</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> &gt;&gt; 1)</div>
<div class="line"><a id="l03069" name="l03069"></a><span class="lineno"> 3069</span>        {</div>
<div class="line"><a id="l03070" name="l03070"></a><span class="lineno"> 3070</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> *= 2;</div>
<div class="line"><a id="l03071" name="l03071"></a><span class="lineno"> 3071</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>;</div>
<div class="line"><a id="l03072" name="l03072"></a><span class="lineno"> 3072</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> = (<span class="keywordtype">char</span> *) <a class="code hl_define" href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a>);</div>
<div class="line"><a id="l03073" name="l03073"></a><span class="lineno"> 3073</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>);</div>
<div class="line"><a id="l03074" name="l03074"></a><span class="lineno"> 3074</span>            <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>);</div>
<div class="line"><a id="l03075" name="l03075"></a><span class="lineno"> 3075</span>        }</div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;newmtl %s\nNs 96.078431\nKa 0 0 0\nKd 0.64 0.64 0.64\nKs 0.5 0.5 0.5\nNi 1\nd 1\nillum 2\nmap_Kd %s%s\n\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texname</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texname</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strstr</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texname</a>, <span class="stringliteral">&quot;.tga&quot;</span>) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;.tga&quot;</span>);</div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03078" name="l03078"></a><span class="lineno"> 3078</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03079" name="l03079"></a><span class="lineno"> 3079</span>    }</div>
<div class="line"><a id="l03080" name="l03080"></a><span class="lineno"> 3080</span> </div>
<div class="line"><a id="l03081" name="l03081"></a><span class="lineno"> 3081</span>    <span class="comment">// write the mtllib file</span></div>
<div class="line"><a id="l03082" name="l03082"></a><span class="lineno"> 3082</span>    <a class="code hl_function" href="fs_8c.html#a2a2eae59234c2478341fea0a380e99ac">FS_WriteFile</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtlfilename</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>);</div>
<div class="line"><a id="l03083" name="l03083"></a><span class="lineno"> 3083</span> </div>
<div class="line"><a id="l03084" name="l03084"></a><span class="lineno"> 3084</span>    <span class="comment">// construct the obj file</span></div>
<div class="line"><a id="l03085" name="l03085"></a><span class="lineno"> 3085</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> = 0;</div>
<div class="line"><a id="l03086" name="l03086"></a><span class="lineno"> 3086</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;# model exported from %s by darkplaces engine\n# %i vertices, %i faces, %i surfaces\nmtllib %s\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originalfilename</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countvertices</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countfaces</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countsurfaces</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtlfilename</a>);</div>
<div class="line"><a id="l03087" name="l03087"></a><span class="lineno"> 3087</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03088" name="l03088"></a><span class="lineno"> 3088</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03089" name="l03089"></a><span class="lineno"> 3089</span> </div>
<div class="line"><a id="l03090" name="l03090"></a><span class="lineno"> 3090</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a> = 0, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>, vn = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>, vt = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a> &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>++, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a> += 3, vn += 3, vt += 2)</div>
<div class="line"><a id="l03091" name="l03091"></a><span class="lineno"> 3091</span>    {</div>
<div class="line"><a id="l03092" name="l03092"></a><span class="lineno"> 3092</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> &gt;&gt; 1)</div>
<div class="line"><a id="l03093" name="l03093"></a><span class="lineno"> 3093</span>        {</div>
<div class="line"><a id="l03094" name="l03094"></a><span class="lineno"> 3094</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> *= 2;</div>
<div class="line"><a id="l03095" name="l03095"></a><span class="lineno"> 3095</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>;</div>
<div class="line"><a id="l03096" name="l03096"></a><span class="lineno"> 3096</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> = (<span class="keywordtype">char</span> *) <a class="code hl_define" href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a>);</div>
<div class="line"><a id="l03097" name="l03097"></a><span class="lineno"> 3097</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>);</div>
<div class="line"><a id="l03098" name="l03098"></a><span class="lineno"> 3098</span>            <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>);</div>
<div class="line"><a id="l03099" name="l03099"></a><span class="lineno"> 3099</span>        }</div>
<div class="line"><a id="l03100" name="l03100"></a><span class="lineno"> 3100</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="model__shared_8c.html#afb66a8936f34a990e2385c092115ef3c">mod_obj_orientation</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l03101" name="l03101"></a><span class="lineno"> 3101</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;v %f %f %f\nvn %f %f %f\nvt %f %f\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], vn[0], vn[2], vn[1], vt[0], 1-vt[1]);</div>
<div class="line"><a id="l03102" name="l03102"></a><span class="lineno"> 3102</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l03103" name="l03103"></a><span class="lineno"> 3103</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;v %f %f %f\nvn %f %f %f\nvt %f %f\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], vn[0], vn[1], vn[2], vt[0], 1-vt[1]);</div>
<div class="line"><a id="l03104" name="l03104"></a><span class="lineno"> 3104</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03105" name="l03105"></a><span class="lineno"> 3105</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03106" name="l03106"></a><span class="lineno"> 3106</span>    }</div>
<div class="line"><a id="l03107" name="l03107"></a><span class="lineno"> 3107</span> </div>
<div class="line"><a id="l03108" name="l03108"></a><span class="lineno"> 3108</span>    <span class="keywordflow">for</span> (submodelindex = 0;submodelindex &lt; <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(1, model-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a12ae1e03d70e00f9b3ba4a11a2314e2e">numsubmodels</a>);submodelindex++)</div>
<div class="line"><a id="l03109" name="l03109"></a><span class="lineno"> 3109</span>    {</div>
<div class="line"><a id="l03110" name="l03110"></a><span class="lineno"> 3110</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;o %i\n&quot;</span>, submodelindex);</div>
<div class="line"><a id="l03111" name="l03111"></a><span class="lineno"> 3111</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03112" name="l03112"></a><span class="lineno"> 3112</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03113" name="l03113"></a><span class="lineno"> 3113</span>        submodel = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a12ae1e03d70e00f9b3ba4a11a2314e2e">numsubmodels</a> ? model-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a462aadc65aeffe8d8e64208e0d841f39">submodels</a>[submodelindex] : model;</div>
<div class="line"><a id="l03114" name="l03114"></a><span class="lineno"> 3114</span>        <span class="keywordflow">for</span> (surfaceindex = submodel-&gt;<a class="code hl_variable" href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">submodelsurfaces_start</a>;surfaceindex &lt; submodel-&gt;<a class="code hl_variable" href="structmodel__t.html#a3cf3f78e305583268585ef7bde7aaa16">submodelsurfaces_end</a>;surfaceindex++)</div>
<div class="line"><a id="l03115" name="l03115"></a><span class="lineno"> 3115</span>        {</div>
<div class="line"><a id="l03116" name="l03116"></a><span class="lineno"> 3116</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + surfaceindex;</div>
<div class="line"><a id="l03117" name="l03117"></a><span class="lineno"> 3117</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;usemtl %s\n&quot;</span>, (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture-&gt;name[0]) ? <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture-&gt;name : <span class="stringliteral">&quot;default&quot;</span>);</div>
<div class="line"><a id="l03118" name="l03118"></a><span class="lineno"> 3118</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03119" name="l03119"></a><span class="lineno"> 3119</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03120" name="l03120"></a><span class="lineno"> 3120</span>            <span class="keywordflow">for</span> (triangleindex = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle * 3;triangleindex &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles;triangleindex++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> += 3)</div>
<div class="line"><a id="l03121" name="l03121"></a><span class="lineno"> 3121</span>            {</div>
<div class="line"><a id="l03122" name="l03122"></a><span class="lineno"> 3122</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> &gt;&gt; 1)</div>
<div class="line"><a id="l03123" name="l03123"></a><span class="lineno"> 3123</span>                {</div>
<div class="line"><a id="l03124" name="l03124"></a><span class="lineno"> 3124</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> *= 2;</div>
<div class="line"><a id="l03125" name="l03125"></a><span class="lineno"> 3125</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>;</div>
<div class="line"><a id="l03126" name="l03126"></a><span class="lineno"> 3126</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> = (<span class="keywordtype">char</span> *) <a class="code hl_define" href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a>);</div>
<div class="line"><a id="l03127" name="l03127"></a><span class="lineno"> 3127</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>);</div>
<div class="line"><a id="l03128" name="l03128"></a><span class="lineno"> 3128</span>                    <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>);</div>
<div class="line"><a id="l03129" name="l03129"></a><span class="lineno"> 3129</span>                }</div>
<div class="line"><a id="l03130" name="l03130"></a><span class="lineno"> 3130</span>                <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[0]+1;</div>
<div class="line"><a id="l03131" name="l03131"></a><span class="lineno"> 3131</span>                <a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[1]+1;</div>
<div class="line"><a id="l03132" name="l03132"></a><span class="lineno"> 3132</span>                c = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[2]+1;</div>
<div class="line"><a id="l03133" name="l03133"></a><span class="lineno"> 3133</span>                <span class="keywordflow">if</span>(<a class="code hl_variable" href="model__shared_8c.html#afb66a8936f34a990e2385c092115ef3c">mod_obj_orientation</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l03134" name="l03134"></a><span class="lineno"> 3134</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;f %i/%i/%i %i/%i/%i %i/%i/%i\n&quot;</span>, <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>,<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>,<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>,<a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>,<a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>,<a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>,c,c,c);</div>
<div class="line"><a id="l03135" name="l03135"></a><span class="lineno"> 3135</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l03136" name="l03136"></a><span class="lineno"> 3136</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;f %i/%i/%i %i/%i/%i %i/%i/%i\n&quot;</span>, <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>,<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>,<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>,c,c,c,<a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>,<a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>,<a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>);</div>
<div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03138" name="l03138"></a><span class="lineno"> 3138</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03139" name="l03139"></a><span class="lineno"> 3139</span>            }</div>
<div class="line"><a id="l03140" name="l03140"></a><span class="lineno"> 3140</span>        }</div>
<div class="line"><a id="l03141" name="l03141"></a><span class="lineno"> 3141</span>    }</div>
<div class="line"><a id="l03142" name="l03142"></a><span class="lineno"> 3142</span> </div>
<div class="line"><a id="l03143" name="l03143"></a><span class="lineno"> 3143</span>    <span class="comment">// write the obj file</span></div>
<div class="line"><a id="l03144" name="l03144"></a><span class="lineno"> 3144</span>    <a class="code hl_function" href="fs_8c.html#a2a2eae59234c2478341fea0a380e99ac">FS_WriteFile</a>(filename, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>);</div>
<div class="line"><a id="l03145" name="l03145"></a><span class="lineno"> 3145</span> </div>
<div class="line"><a id="l03146" name="l03146"></a><span class="lineno"> 3146</span>    <span class="comment">// clean up</span></div>
<div class="line"><a id="l03147" name="l03147"></a><span class="lineno"> 3147</span>    <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>);</div>
<div class="line"><a id="l03148" name="l03148"></a><span class="lineno"> 3148</span>    <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturenames</a>);</div>
<div class="line"><a id="l03149" name="l03149"></a><span class="lineno"> 3149</span> </div>
<div class="line"><a id="l03150" name="l03150"></a><span class="lineno"> 3150</span>    <span class="comment">// print some stats</span></div>
<div class="line"><a id="l03151" name="l03151"></a><span class="lineno"> 3151</span>    <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Wrote %s (%i bytes, %i vertices, %i faces, %i surfaces with %i distinct textures)\n&quot;</span>, filename, (<span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countvertices</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countfaces</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countsurfaces</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">counttextures</a>);</div>
<div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span>}</div>
</div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span> </div>
<div class="foldopen" id="foldopen03154" data-start="{" data-end="}">
<div class="line"><a id="l03154" name="l03154"></a><span class="lineno"><a class="line" href="model__shared_8c.html#af3851988b4d818fb8d0aa645acb98d93"> 3154</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#af3851988b4d818fb8d0aa645acb98d93">Mod_Decompile_SMD</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model, <span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firstpose</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numposes</a>, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">writetriangles</a>)</div>
<div class="line"><a id="l03155" name="l03155"></a><span class="lineno"> 3155</span>{</div>
<div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countnodes</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">counttriangles</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countframes</a> = 0;</div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span>    <span class="keywordtype">int</span> surfaceindex;</div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span>    <span class="keywordtype">int</span> triangleindex;</div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transformindex</a>;</div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">poseindex</a>;</div>
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"> 3161</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cornerindex</a>;</div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>;</div>
<div class="line"><a id="l03163" name="l03163"></a><span class="lineno"> 3163</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03164" name="l03164"></a><span class="lineno"> 3164</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> = 0;</div>
<div class="line"><a id="l03165" name="l03165"></a><span class="lineno"> 3165</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> = 0x100000;</div>
<div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span>    <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> = (<span class="keywordtype">char</span> *) <a class="code hl_define" href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a>), *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>;</div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>;</div>
<div class="line"><a id="l03168" name="l03168"></a><span class="lineno"> 3168</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;version 1\nnodes\n&quot;</span>);</div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"> 3170</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transformindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transformindex</a> &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#af97a8519b182e76d8a59ed2295777e04">num_bones</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transformindex</a>++)</div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span>    {</div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> &gt;&gt; 1)</div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span>        {</div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> *= 2;</div>
<div class="line"><a id="l03176" name="l03176"></a><span class="lineno"> 3176</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>;</div>
<div class="line"><a id="l03177" name="l03177"></a><span class="lineno"> 3177</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> = (<span class="keywordtype">char</span> *) <a class="code hl_define" href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a>);</div>
<div class="line"><a id="l03178" name="l03178"></a><span class="lineno"> 3178</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>);</div>
<div class="line"><a id="l03179" name="l03179"></a><span class="lineno"> 3179</span>            <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>);</div>
<div class="line"><a id="l03180" name="l03180"></a><span class="lineno"> 3180</span>        }</div>
<div class="line"><a id="l03181" name="l03181"></a><span class="lineno"> 3181</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countnodes</a>++;</div>
<div class="line"><a id="l03182" name="l03182"></a><span class="lineno"> 3182</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;%3i \&quot;%s\&quot; %3i\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transformindex</a>, model-&gt;<a class="code hl_variable" href="structmodel__t.html#ac8dd00e30441129636e18b028a16c561">data_bones</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transformindex</a>].<a class="code hl_variable" href="structaliasbone__t.html#a49d64ce369a205eacdeb0ca0a8f2ac32">name</a>, model-&gt;<a class="code hl_variable" href="structmodel__t.html#ac8dd00e30441129636e18b028a16c561">data_bones</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transformindex</a>].<a class="code hl_variable" href="structaliasbone__t.html#a12403a8e5c1471909f8d83f635027446">parent</a>);</div>
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"> 3183</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03185" name="l03185"></a><span class="lineno"> 3185</span>    }</div>
<div class="line"><a id="l03186" name="l03186"></a><span class="lineno"> 3186</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;end\nskeleton\n&quot;</span>);</div>
<div class="line"><a id="l03187" name="l03187"></a><span class="lineno"> 3187</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03188" name="l03188"></a><span class="lineno"> 3188</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03189" name="l03189"></a><span class="lineno"> 3189</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">poseindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">poseindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numposes</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">poseindex</a>++)</div>
<div class="line"><a id="l03190" name="l03190"></a><span class="lineno"> 3190</span>    {</div>
<div class="line"><a id="l03191" name="l03191"></a><span class="lineno"> 3191</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countframes</a>++;</div>
<div class="line"><a id="l03192" name="l03192"></a><span class="lineno"> 3192</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;time %i\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">poseindex</a>);</div>
<div class="line"><a id="l03193" name="l03193"></a><span class="lineno"> 3193</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03194" name="l03194"></a><span class="lineno"> 3194</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03195" name="l03195"></a><span class="lineno"> 3195</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transformindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transformindex</a> &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#af97a8519b182e76d8a59ed2295777e04">num_bones</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transformindex</a>++)</div>
<div class="line"><a id="l03196" name="l03196"></a><span class="lineno"> 3196</span>        {</div>
<div class="line"><a id="l03197" name="l03197"></a><span class="lineno"> 3197</span>            <span class="keywordtype">float</span> angles[3];</div>
<div class="line"><a id="l03198" name="l03198"></a><span class="lineno"> 3198</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtest</a>[4][3];</div>
<div class="line"><a id="l03199" name="l03199"></a><span class="lineno"> 3199</span>            <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">posematrix</a>;</div>
<div class="line"><a id="l03200" name="l03200"></a><span class="lineno"> 3200</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> &gt;&gt; 1)</div>
<div class="line"><a id="l03201" name="l03201"></a><span class="lineno"> 3201</span>            {</div>
<div class="line"><a id="l03202" name="l03202"></a><span class="lineno"> 3202</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> *= 2;</div>
<div class="line"><a id="l03203" name="l03203"></a><span class="lineno"> 3203</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>;</div>
<div class="line"><a id="l03204" name="l03204"></a><span class="lineno"> 3204</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> = (<span class="keywordtype">char</span> *) <a class="code hl_define" href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a>);</div>
<div class="line"><a id="l03205" name="l03205"></a><span class="lineno"> 3205</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>);</div>
<div class="line"><a id="l03206" name="l03206"></a><span class="lineno"> 3206</span>                <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>);</div>
<div class="line"><a id="l03207" name="l03207"></a><span class="lineno"> 3207</span>            }</div>
<div class="line"><a id="l03208" name="l03208"></a><span class="lineno"> 3208</span> </div>
<div class="line"><a id="l03209" name="l03209"></a><span class="lineno"> 3209</span>            <span class="comment">// strangely the smd angles are for a transposed matrix, so we</span></div>
<div class="line"><a id="l03210" name="l03210"></a><span class="lineno"> 3210</span>            <span class="comment">// have to generate a transposed matrix, then convert that...</span></div>
<div class="line"><a id="l03211" name="l03211"></a><span class="lineno"> 3211</span>            <a class="code hl_function" href="matrixlib_8c.html#a159d78e1e3b1bc22dd7892189e5f5a26">Matrix4x4_FromBonePose7s</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">posematrix</a>, model-&gt;<a class="code hl_variable" href="structmodel__t.html#a474f5a968c65f1896d8bd22d066db398">num_posescale</a>, model-&gt;<a class="code hl_variable" href="structmodel__t.html#ad59944cb58ea26907319a7431dec4bd6">data_poses7s</a> + 7*(model-&gt;<a class="code hl_variable" href="structmodel__t.html#af97a8519b182e76d8a59ed2295777e04">num_bones</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">poseindex</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transformindex</a>));</div>
<div class="line"><a id="l03212" name="l03212"></a><span class="lineno"> 3212</span>            <a class="code hl_function" href="matrixlib_8c.html#a9fe0ae9c4524da226dc611d2b3a708f5">Matrix4x4_ToArray12FloatGL</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">posematrix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtest</a>);</div>
<div class="line"><a id="l03213" name="l03213"></a><span class="lineno"> 3213</span>            <a class="code hl_function" href="mathlib_8c.html#a50e17db42d20e147704148d0a03032bf">AnglesFromVectors</a>(angles, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtest</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtest</a>[2], <span class="keyword">false</span>);</div>
<div class="line"><a id="l03214" name="l03214"></a><span class="lineno"> 3214</span>            <span class="keywordflow">if</span> (angles[0] &gt;= 180) angles[0] -= 360;</div>
<div class="line"><a id="l03215" name="l03215"></a><span class="lineno"> 3215</span>            <span class="keywordflow">if</span> (angles[1] &gt;= 180) angles[1] -= 360;</div>
<div class="line"><a id="l03216" name="l03216"></a><span class="lineno"> 3216</span>            <span class="keywordflow">if</span> (angles[2] &gt;= 180) angles[2] -= 360;</div>
<div class="line"><a id="l03217" name="l03217"></a><span class="lineno"> 3217</span> </div>
<div class="line"><a id="l03218" name="l03218"></a><span class="lineno"> 3218</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l03219" name="l03219"></a><span class="lineno"> 3219</span>{</div>
<div class="line"><a id="l03220" name="l03220"></a><span class="lineno"> 3220</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> = <a class="code hl_define" href="mathlib_8h.html#a4aa807bca73db74b6ddba3da933e64aa">DEG2RAD</a>(angles[<a class="code hl_define" href="qtypes_8h.html#af902416f65138704a180dbae2dc9d8f2">ROLL</a>]);</div>
<div class="line"><a id="l03221" name="l03221"></a><span class="lineno"> 3221</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a> = <a class="code hl_define" href="mathlib_8h.html#a4aa807bca73db74b6ddba3da933e64aa">DEG2RAD</a>(angles[<a class="code hl_define" href="qtypes_8h.html#acd633835a520a62245ec6cfeb6d00e97">PITCH</a>]);</div>
<div class="line"><a id="l03222" name="l03222"></a><span class="lineno"> 3222</span>            <span class="keywordtype">float</span> c = <a class="code hl_define" href="mathlib_8h.html#a4aa807bca73db74b6ddba3da933e64aa">DEG2RAD</a>(angles[<a class="code hl_define" href="qtypes_8h.html#ac71b1e54b98dc1031873048bc61d0438">YAW</a>]);</div>
<div class="line"><a id="l03223" name="l03223"></a><span class="lineno"> 3223</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cy</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sy</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cp</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sp</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cr</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sr</a>;</div>
<div class="line"><a id="l03224" name="l03224"></a><span class="lineno"> 3224</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test</a>[4][3];</div>
<div class="line"><a id="l03225" name="l03225"></a><span class="lineno"> 3225</span>            <span class="comment">// smd matrix construction, for comparing</span></div>
<div class="line"><a id="l03226" name="l03226"></a><span class="lineno"> 3226</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sy</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sin</a>(c);</div>
<div class="line"><a id="l03227" name="l03227"></a><span class="lineno"> 3227</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cy</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cos</a>(c);</div>
<div class="line"><a id="l03228" name="l03228"></a><span class="lineno"> 3228</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sp</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sin</a>(<a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>);</div>
<div class="line"><a id="l03229" name="l03229"></a><span class="lineno"> 3229</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cp</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cos</a>(<a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>);</div>
<div class="line"><a id="l03230" name="l03230"></a><span class="lineno"> 3230</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sr</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sin</a>(<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>);</div>
<div class="line"><a id="l03231" name="l03231"></a><span class="lineno"> 3231</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cr</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cos</a>(<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>);</div>
<div class="line"><a id="l03232" name="l03232"></a><span class="lineno"> 3232</span> </div>
<div class="line"><a id="l03233" name="l03233"></a><span class="lineno"> 3233</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test</a>[0][0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cp</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cy</a>;</div>
<div class="line"><a id="l03234" name="l03234"></a><span class="lineno"> 3234</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test</a>[0][1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cp</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sy</a>;</div>
<div class="line"><a id="l03235" name="l03235"></a><span class="lineno"> 3235</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test</a>[0][2] = -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sp</a>;</div>
<div class="line"><a id="l03236" name="l03236"></a><span class="lineno"> 3236</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test</a>[1][0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sr</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sp</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cy</a>+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cr</a>*-<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sy</a>;</div>
<div class="line"><a id="l03237" name="l03237"></a><span class="lineno"> 3237</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test</a>[1][1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sr</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sp</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sy</a>+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cr</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cy</a>;</div>
<div class="line"><a id="l03238" name="l03238"></a><span class="lineno"> 3238</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test</a>[1][2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sr</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cp</a>;</div>
<div class="line"><a id="l03239" name="l03239"></a><span class="lineno"> 3239</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test</a>[2][0] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cr</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sp</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cy</a>+-<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sr</a>*-<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sy</a>);</div>
<div class="line"><a id="l03240" name="l03240"></a><span class="lineno"> 3240</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test</a>[2][1] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cr</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sp</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sy</a>+-<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sr</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cy</a>);</div>
<div class="line"><a id="l03241" name="l03241"></a><span class="lineno"> 3241</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test</a>[2][2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cr</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cp</a>;</div>
<div class="line"><a id="l03242" name="l03242"></a><span class="lineno"> 3242</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test</a>[3][0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pose</a>[9];</div>
<div class="line"><a id="l03243" name="l03243"></a><span class="lineno"> 3243</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test</a>[3][1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pose</a>[10];</div>
<div class="line"><a id="l03244" name="l03244"></a><span class="lineno"> 3244</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test</a>[3][2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pose</a>[11];</div>
<div class="line"><a id="l03245" name="l03245"></a><span class="lineno"> 3245</span>}</div>
<div class="line"><a id="l03246" name="l03246"></a><span class="lineno"> 3246</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03247" name="l03247"></a><span class="lineno"> 3247</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;%3i %f %f %f %f %f %f\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transformindex</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtest</a>[3][0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtest</a>[3][1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtest</a>[3][2], <a class="code hl_define" href="mathlib_8h.html#a4aa807bca73db74b6ddba3da933e64aa">DEG2RAD</a>(angles[<a class="code hl_define" href="qtypes_8h.html#af902416f65138704a180dbae2dc9d8f2">ROLL</a>]), <a class="code hl_define" href="mathlib_8h.html#a4aa807bca73db74b6ddba3da933e64aa">DEG2RAD</a>(angles[<a class="code hl_define" href="qtypes_8h.html#acd633835a520a62245ec6cfeb6d00e97">PITCH</a>]), <a class="code hl_define" href="mathlib_8h.html#a4aa807bca73db74b6ddba3da933e64aa">DEG2RAD</a>(angles[<a class="code hl_define" href="qtypes_8h.html#ac71b1e54b98dc1031873048bc61d0438">YAW</a>]));</div>
<div class="line"><a id="l03248" name="l03248"></a><span class="lineno"> 3248</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03249" name="l03249"></a><span class="lineno"> 3249</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03250" name="l03250"></a><span class="lineno"> 3250</span>        }</div>
<div class="line"><a id="l03251" name="l03251"></a><span class="lineno"> 3251</span>    }</div>
<div class="line"><a id="l03252" name="l03252"></a><span class="lineno"> 3252</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;end\n&quot;</span>);</div>
<div class="line"><a id="l03253" name="l03253"></a><span class="lineno"> 3253</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03254" name="l03254"></a><span class="lineno"> 3254</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03255" name="l03255"></a><span class="lineno"> 3255</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">writetriangles</a>)</div>
<div class="line"><a id="l03256" name="l03256"></a><span class="lineno"> 3256</span>    {</div>
<div class="line"><a id="l03257" name="l03257"></a><span class="lineno"> 3257</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;triangles\n&quot;</span>);</div>
<div class="line"><a id="l03258" name="l03258"></a><span class="lineno"> 3258</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03259" name="l03259"></a><span class="lineno"> 3259</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03260" name="l03260"></a><span class="lineno"> 3260</span>        <span class="keywordflow">for</span> (surfaceindex = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>;surfaceindex &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>;surfaceindex++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>++)</div>
<div class="line"><a id="l03261" name="l03261"></a><span class="lineno"> 3261</span>        {</div>
<div class="line"><a id="l03262" name="l03262"></a><span class="lineno"> 3262</span>            <span class="keywordflow">for</span> (triangleindex = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle * 3;triangleindex &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles;triangleindex++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> += 3)</div>
<div class="line"><a id="l03263" name="l03263"></a><span class="lineno"> 3263</span>            {</div>
<div class="line"><a id="l03264" name="l03264"></a><span class="lineno"> 3264</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">counttriangles</a>++;</div>
<div class="line"><a id="l03265" name="l03265"></a><span class="lineno"> 3265</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> &gt;&gt; 1)</div>
<div class="line"><a id="l03266" name="l03266"></a><span class="lineno"> 3266</span>                {</div>
<div class="line"><a id="l03267" name="l03267"></a><span class="lineno"> 3267</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> *= 2;</div>
<div class="line"><a id="l03268" name="l03268"></a><span class="lineno"> 3268</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>;</div>
<div class="line"><a id="l03269" name="l03269"></a><span class="lineno"> 3269</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> = (<span class="keywordtype">char</span> *) <a class="code hl_define" href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a>);</div>
<div class="line"><a id="l03270" name="l03270"></a><span class="lineno"> 3270</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>);</div>
<div class="line"><a id="l03271" name="l03271"></a><span class="lineno"> 3271</span>                    <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuffer</a>);</div>
<div class="line"><a id="l03272" name="l03272"></a><span class="lineno"> 3272</span>                }</div>
<div class="line"><a id="l03273" name="l03273"></a><span class="lineno"> 3273</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture-&gt;name[0] ? <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture-&gt;name : <span class="stringliteral">&quot;default.bmp&quot;</span>);</div>
<div class="line"><a id="l03274" name="l03274"></a><span class="lineno"> 3274</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03275" name="l03275"></a><span class="lineno"> 3275</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03276" name="l03276"></a><span class="lineno"> 3276</span>                <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cornerindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cornerindex</a> &lt; 3;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cornerindex</a>++)</div>
<div class="line"><a id="l03277" name="l03277"></a><span class="lineno"> 3277</span>                {</div>
<div class="line"><a id="l03278" name="l03278"></a><span class="lineno"> 3278</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[2-<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cornerindex</a>];</div>
<div class="line"><a id="l03279" name="l03279"></a><span class="lineno"> 3279</span>                    <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> * 3;</div>
<div class="line"><a id="l03280" name="l03280"></a><span class="lineno"> 3280</span>                    <span class="keyword">const</span> <span class="keywordtype">float</span> *vn = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> * 3;</div>
<div class="line"><a id="l03281" name="l03281"></a><span class="lineno"> 3281</span>                    <span class="keyword">const</span> <span class="keywordtype">float</span> *vt = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> * 2;</div>
<div class="line"><a id="l03282" name="l03282"></a><span class="lineno"> 3282</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ad51f0f14598798ae166985f02a6378e5">blends</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>];</div>
<div class="line"><a id="l03283" name="l03283"></a><span class="lineno"> 3283</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">b &lt; model-&gt;</a>num_bones)</div>
<div class="line"><a id="l03284" name="l03284"></a><span class="lineno"> 3284</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;%3i %f %f %f %f %f %f %f %f\n&quot;</span>                          , <a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], vn[0], vn[1], vn[2], vt[0], 1 - vt[1]);</div>
<div class="line"><a id="l03285" name="l03285"></a><span class="lineno"> 3285</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l03286" name="l03286"></a><span class="lineno"> 3286</span>                    {</div>
<div class="line"><a id="l03287" name="l03287"></a><span class="lineno"> 3287</span>                        <span class="keyword">const</span> <a class="code hl_struct" href="structblendweights__t.html">blendweights_t</a> *<a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a9fcffd7bd378736ae8fb0891651507de">data_blendweights</a> + <a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a> - model-&gt;<a class="code hl_variable" href="structmodel__t.html#af97a8519b182e76d8a59ed2295777e04">num_bones</a>;</div>
<div class="line"><a id="l03288" name="l03288"></a><span class="lineno"> 3288</span>                        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a> = <a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a>-&gt;index;</div>
<div class="line"><a id="l03289" name="l03289"></a><span class="lineno"> 3289</span>                        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wf</a> = <a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a>-&gt;influence;</div>
<div class="line"><a id="l03290" name="l03290"></a><span class="lineno"> 3290</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wf</a>[3]) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;%3i %f %f %f %f %f %f %f %f 4 %i %f %i %f %i %f %i %f\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], vn[0], vn[1], vn[2], vt[0], 1 - vt[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wf</a>[0]/255.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wf</a>[1]/255.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wf</a>[2]/255.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wf</a>[3]/255.0f);</div>
<div class="line"><a id="l03291" name="l03291"></a><span class="lineno"> 3291</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wf</a>[2]) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;%3i %f %f %f %f %f %f %f %f 3 %i %f %i %f %i %f\n&quot;</span>      , <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], vn[0], vn[1], vn[2], vt[0], 1 - vt[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wf</a>[0]/255.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wf</a>[1]/255.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wf</a>[2]/255.0f);</div>
<div class="line"><a id="l03292" name="l03292"></a><span class="lineno"> 3292</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wf</a>[1]) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;%3i %f %f %f %f %f %f %f %f 2 %i %f %i %f\n&quot;</span>            , <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], vn[0], vn[1], vn[2], vt[0], 1 - vt[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wf</a>[0]/255.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wf</a>[1]/255.0f);</div>
<div class="line"><a id="l03293" name="l03293"></a><span class="lineno"> 3293</span>                        <span class="keywordflow">else</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;%3i %f %f %f %f %f %f %f %f\n&quot;</span>                          , <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">wi</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], vn[0], vn[1], vn[2], vt[0], 1 - vt[1]);</div>
<div class="line"><a id="l03294" name="l03294"></a><span class="lineno"> 3294</span>                    }</div>
<div class="line"><a id="l03295" name="l03295"></a><span class="lineno"> 3295</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03296" name="l03296"></a><span class="lineno"> 3296</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03297" name="l03297"></a><span class="lineno"> 3297</span>                }</div>
<div class="line"><a id="l03298" name="l03298"></a><span class="lineno"> 3298</span>            }</div>
<div class="line"><a id="l03299" name="l03299"></a><span class="lineno"> 3299</span>        }</div>
<div class="line"><a id="l03300" name="l03300"></a><span class="lineno"> 3300</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffermax</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <span class="stringliteral">&quot;end\n&quot;</span>);</div>
<div class="line"><a id="l03301" name="l03301"></a><span class="lineno"> 3301</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0)</div>
<div class="line"><a id="l03302" name="l03302"></a><span class="lineno"> 3302</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03303" name="l03303"></a><span class="lineno"> 3303</span>    }</div>
<div class="line"><a id="l03304" name="l03304"></a><span class="lineno"> 3304</span> </div>
<div class="line"><a id="l03305" name="l03305"></a><span class="lineno"> 3305</span>    <a class="code hl_function" href="fs_8c.html#a2a2eae59234c2478341fea0a380e99ac">FS_WriteFile</a>(filename, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>);</div>
<div class="line"><a id="l03306" name="l03306"></a><span class="lineno"> 3306</span>    <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbuffer</a>);</div>
<div class="line"><a id="l03307" name="l03307"></a><span class="lineno"> 3307</span> </div>
<div class="line"><a id="l03308" name="l03308"></a><span class="lineno"> 3308</span>    <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Wrote %s (%i bytes, %i nodes, %i frames, %i triangles)\n&quot;</span>, filename, (<span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outbufferpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countnodes</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">countframes</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">counttriangles</a>);</div>
<div class="line"><a id="l03309" name="l03309"></a><span class="lineno"> 3309</span>}</div>
</div>
<div class="line"><a id="l03310" name="l03310"></a><span class="lineno"> 3310</span> </div>
<div class="line"><a id="l03311" name="l03311"></a><span class="lineno"> 3311</span><span class="comment">/*</span></div>
<div class="line"><a id="l03312" name="l03312"></a><span class="lineno"> 3312</span><span class="comment">================</span></div>
<div class="line"><a id="l03313" name="l03313"></a><span class="lineno"> 3313</span><span class="comment">Mod_Decompile_f</span></div>
<div class="line"><a id="l03314" name="l03314"></a><span class="lineno"> 3314</span><span class="comment"></span> </div>
<div class="line"><a id="l03315" name="l03315"></a><span class="lineno"> 3315</span><span class="comment">decompiles a model to editable files</span></div>
<div class="line"><a id="l03316" name="l03316"></a><span class="lineno"> 3316</span><span class="comment">================</span></div>
<div class="line"><a id="l03317" name="l03317"></a><span class="lineno"> 3317</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen03318" data-start="{" data-end="}">
<div class="line"><a id="l03318" name="l03318"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aab4dd6a29cd4b0b1fb521bc4a067a45c"> 3318</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aab4dd6a29cd4b0b1fb521bc4a067a45c">Mod_Decompile_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l03319" name="l03319"></a><span class="lineno"> 3319</span>{</div>
<div class="line"><a id="l03320" name="l03320"></a><span class="lineno"> 3320</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>, <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a>, <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>;</div>
<div class="line"><a id="l03321" name="l03321"></a><span class="lineno"> 3321</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod;</div>
<div class="line"><a id="l03322" name="l03322"></a><span class="lineno"> 3322</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inname</a>[<a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div>
<div class="line"><a id="l03323" name="l03323"></a><span class="lineno"> 3323</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>[<a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div>
<div class="line"><a id="l03324" name="l03324"></a><span class="lineno"> 3324</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtlname</a>[<a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div>
<div class="line"><a id="l03325" name="l03325"></a><span class="lineno"> 3325</span>    <span class="keywordtype">char</span> basename[<a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div>
<div class="line"><a id="l03326" name="l03326"></a><span class="lineno"> 3326</span>    <span class="keywordtype">char</span> animname[<a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div>
<div class="line"><a id="l03327" name="l03327"></a><span class="lineno"> 3327</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">animname2</a>[<a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div>
<div class="line"><a id="l03328" name="l03328"></a><span class="lineno"> 3328</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextbuffer</a>[16384];</div>
<div class="line"><a id="l03329" name="l03329"></a><span class="lineno"> 3329</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextbuffer</a>[16384];</div>
<div class="line"><a id="l03330" name="l03330"></a><span class="lineno"> 3330</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">framegroupstextbuffer</a>[16384];</div>
<div class="line"><a id="l03331" name="l03331"></a><span class="lineno"> 3331</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextsize</a> = 0;</div>
<div class="line"><a id="l03332" name="l03332"></a><span class="lineno"> 3332</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextsize</a> = 0;</div>
<div class="line"><a id="l03333" name="l03333"></a><span class="lineno"> 3333</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">framegroupstextsize</a> = 0;</div>
<div class="line"><a id="l03334" name="l03334"></a><span class="lineno"> 3334</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>[1024];</div>
<div class="line"><a id="l03335" name="l03335"></a><span class="lineno"> 3335</span> </div>
<div class="line"><a id="l03336" name="l03336"></a><span class="lineno"> 3336</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 2)</div>
<div class="line"><a id="l03337" name="l03337"></a><span class="lineno"> 3337</span>    {</div>
<div class="line"><a id="l03338" name="l03338"></a><span class="lineno"> 3338</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;usage: modeldecompile &lt;filename&gt;\n&quot;</span>);</div>
<div class="line"><a id="l03339" name="l03339"></a><span class="lineno"> 3339</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03340" name="l03340"></a><span class="lineno"> 3340</span>    }</div>
<div class="line"><a id="l03341" name="l03341"></a><span class="lineno"> 3341</span> </div>
<div class="line"><a id="l03342" name="l03342"></a><span class="lineno"> 3342</span>    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inname</a>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inname</a>));</div>
<div class="line"><a id="l03343" name="l03343"></a><span class="lineno"> 3343</span>    <a class="code hl_function" href="fs_8c.html#a9fd7ebcbb75f140d76ab37664280555f">FS_StripExtension</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inname</a>, basename, <span class="keyword">sizeof</span>(basename));</div>
<div class="line"><a id="l03344" name="l03344"></a><span class="lineno"> 3344</span> </div>
<div class="line"><a id="l03345" name="l03345"></a><span class="lineno"> 3345</span>    mod = <a class="code hl_function" href="model__shared_8c.html#a3e102ef2a7eaa95f89ea4fa0f518b7c7">Mod_ForName</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inname</a>, <span class="keyword">false</span>, <span class="keyword">true</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inname</a>[0] == <span class="charliteral">&#39;*&#39;</span> ? <a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#ab718ddda1887c1678878405c006ce501">model_name</a>[1] : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l03346" name="l03346"></a><span class="lineno"> 3346</span>    <span class="keywordflow">if</span> (!mod)</div>
<div class="line"><a id="l03347" name="l03347"></a><span class="lineno"> 3347</span>    {</div>
<div class="line"><a id="l03348" name="l03348"></a><span class="lineno"> 3348</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;No such model\n&quot;</span>);</div>
<div class="line"><a id="l03349" name="l03349"></a><span class="lineno"> 3349</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03350" name="l03350"></a><span class="lineno"> 3350</span>    }</div>
<div class="line"><a id="l03351" name="l03351"></a><span class="lineno"> 3351</span>    <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a1bb35c00721be56c390df0b877791cac">submodel</a>)</div>
<div class="line"><a id="l03352" name="l03352"></a><span class="lineno"> 3352</span>    {</div>
<div class="line"><a id="l03353" name="l03353"></a><span class="lineno"> 3353</span>        <span class="comment">// if we&#39;re decompiling a submodel, be sure to give it a proper name based on its parent</span></div>
<div class="line"><a id="l03354" name="l03354"></a><span class="lineno"> 3354</span>        <a class="code hl_function" href="fs_8c.html#a9fd7ebcbb75f140d76ab37664280555f">FS_StripExtension</a>(<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#ab718ddda1887c1678878405c006ce501">model_name</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>));</div>
<div class="line"><a id="l03355" name="l03355"></a><span class="lineno"> 3355</span>        <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(basename, <span class="keyword">sizeof</span>(basename), <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>);</div>
<div class="line"><a id="l03356" name="l03356"></a><span class="lineno"> 3356</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>[0] = 0;</div>
<div class="line"><a id="l03357" name="l03357"></a><span class="lineno"> 3357</span>    }</div>
<div class="line"><a id="l03358" name="l03358"></a><span class="lineno"> 3358</span>    <span class="keywordflow">if</span> (!mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>)</div>
<div class="line"><a id="l03359" name="l03359"></a><span class="lineno"> 3359</span>    {</div>
<div class="line"><a id="l03360" name="l03360"></a><span class="lineno"> 3360</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Empty model (or sprite)\n&quot;</span>);</div>
<div class="line"><a id="l03361" name="l03361"></a><span class="lineno"> 3361</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03362" name="l03362"></a><span class="lineno"> 3362</span>    }</div>
<div class="line"><a id="l03363" name="l03363"></a><span class="lineno"> 3363</span> </div>
<div class="line"><a id="l03364" name="l03364"></a><span class="lineno"> 3364</span>    <span class="comment">// export OBJ if possible (not on sprites)</span></div>
<div class="line"><a id="l03365" name="l03365"></a><span class="lineno"> 3365</span>    <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>)</div>
<div class="line"><a id="l03366" name="l03366"></a><span class="lineno"> 3366</span>    {</div>
<div class="line"><a id="l03367" name="l03367"></a><span class="lineno"> 3367</span>        <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>), <span class="stringliteral">&quot;%s_decompiled.obj&quot;</span>, basename);</div>
<div class="line"><a id="l03368" name="l03368"></a><span class="lineno"> 3368</span>        <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtlname</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtlname</a>), <span class="stringliteral">&quot;%s_decompiled.mtl&quot;</span>, basename);</div>
<div class="line"><a id="l03369" name="l03369"></a><span class="lineno"> 3369</span>        <a class="code hl_function" href="model__shared_8c.html#af5ee5fa8fce22ef53c6475c9ab3c5d04">Mod_Decompile_OBJ</a>(mod, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mtlname</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inname</a>);</div>
<div class="line"><a id="l03370" name="l03370"></a><span class="lineno"> 3370</span>    }</div>
<div class="line"><a id="l03371" name="l03371"></a><span class="lineno"> 3371</span> </div>
<div class="line"><a id="l03372" name="l03372"></a><span class="lineno"> 3372</span>    <span class="comment">// export SMD if possible (only for skeletal models)</span></div>
<div class="line"><a id="l03373" name="l03373"></a><span class="lineno"> 3373</span>    <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#af97a8519b182e76d8a59ed2295777e04">num_bones</a>)</div>
<div class="line"><a id="l03374" name="l03374"></a><span class="lineno"> 3374</span>    {</div>
<div class="line"><a id="l03375" name="l03375"></a><span class="lineno"> 3375</span>        <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>), <span class="stringliteral">&quot;%s_decompiled/ref1.smd&quot;</span>, basename);</div>
<div class="line"><a id="l03376" name="l03376"></a><span class="lineno"> 3376</span>        <a class="code hl_function" href="model__shared_8c.html#af3851988b4d818fb8d0aa645acb98d93">Mod_Decompile_SMD</a>(mod, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>, 0, 1, <span class="keyword">true</span>);</div>
<div class="line"><a id="l03377" name="l03377"></a><span class="lineno"> 3377</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextsize</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextbuffer</a>) - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextsize</a>, <span class="stringliteral">&quot;output out.zym\nscale 1\norigin 0 0 0\nmesh ref1.smd\n&quot;</span>);</div>
<div class="line"><a id="l03378" name="l03378"></a><span class="lineno"> 3378</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextsize</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03379" name="l03379"></a><span class="lineno"> 3379</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextsize</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextbuffer</a>) - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextsize</a>, <span class="stringliteral">&quot;outputdir .\nmodel out\nscale 1\norigin 0 0 0\nscene ref1.smd\n&quot;</span>);</div>
<div class="line"><a id="l03380" name="l03380"></a><span class="lineno"> 3380</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextsize</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03381" name="l03381"></a><span class="lineno"> 3381</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a9c3577006a252ce407c3b204a05be9e4">numframes</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>)</div>
<div class="line"><a id="l03382" name="l03382"></a><span class="lineno"> 3382</span>        {</div>
<div class="line"><a id="l03383" name="l03383"></a><span class="lineno"> 3383</span>            <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(animname, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structanimscene__t.html#a5109a00e75f6ee7eadfc299645d11259">name</a>, <span class="keyword">sizeof</span>(animname));</div>
<div class="line"><a id="l03384" name="l03384"></a><span class="lineno"> 3384</span>            <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structanimscene__t.html#aab78607e4169ebda0f6abac8cc328fee">firstframe</a>;</div>
<div class="line"><a id="l03385" name="l03385"></a><span class="lineno"> 3385</span>            <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structanimscene__t.html#a5b15507359a161969d769cd85193561e">framecount</a> &gt; 1)</div>
<div class="line"><a id="l03386" name="l03386"></a><span class="lineno"> 3386</span>            {</div>
<div class="line"><a id="l03387" name="l03387"></a><span class="lineno"> 3387</span>                <span class="comment">// framegroup anim</span></div>
<div class="line"><a id="l03388" name="l03388"></a><span class="lineno"> 3388</span>                <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structanimscene__t.html#a5b15507359a161969d769cd85193561e">framecount</a>;</div>
<div class="line"><a id="l03389" name="l03389"></a><span class="lineno"> 3389</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1;</div>
<div class="line"><a id="l03390" name="l03390"></a><span class="lineno"> 3390</span>            }</div>
<div class="line"><a id="l03391" name="l03391"></a><span class="lineno"> 3391</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l03392" name="l03392"></a><span class="lineno"> 3392</span>            {</div>
<div class="line"><a id="l03393" name="l03393"></a><span class="lineno"> 3393</span>                <span class="comment">// individual frame</span></div>
<div class="line"><a id="l03394" name="l03394"></a><span class="lineno"> 3394</span>                <span class="comment">// check for additional frames with same name</span></div>
<div class="line"><a id="l03395" name="l03395"></a><span class="lineno"> 3395</span>                <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> = (<span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(animname);animname[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>];<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>++)</div>
<div class="line"><a id="l03396" name="l03396"></a><span class="lineno"> 3396</span>                    <span class="keywordflow">if</span>(animname[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>] &lt; <span class="charliteral">&#39;0&#39;</span> || animname[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>] &gt; <span class="charliteral">&#39;9&#39;</span>)</div>
<div class="line"><a id="l03397" name="l03397"></a><span class="lineno"> 3397</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> + 1;</div>
<div class="line"><a id="l03398" name="l03398"></a><span class="lineno"> 3398</span>                <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> &gt; 0 &amp;&amp; animname[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>-1] == <span class="charliteral">&#39;_&#39;</span>)</div>
<div class="line"><a id="l03399" name="l03399"></a><span class="lineno"> 3399</span>                    --<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>;</div>
<div class="line"><a id="l03400" name="l03400"></a><span class="lineno"> 3400</span>                animname[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = 0;</div>
<div class="line"><a id="l03401" name="l03401"></a><span class="lineno"> 3401</span>                <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a826df8b699b02cf7e338bd939779c80c">num_poses</a> - <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a>;</div>
<div class="line"><a id="l03402" name="l03402"></a><span class="lineno"> 3402</span>                <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a9c3577006a252ce407c3b204a05be9e4">numframes</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l03403" name="l03403"></a><span class="lineno"> 3403</span>                {</div>
<div class="line"><a id="l03404" name="l03404"></a><span class="lineno"> 3404</span>                    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">animname2</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structanimscene__t.html#a5109a00e75f6ee7eadfc299645d11259">name</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">animname2</a>));</div>
<div class="line"><a id="l03405" name="l03405"></a><span class="lineno"> 3405</span>                    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> = (<span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">animname2</a>);<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">animname2</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>];<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>++)</div>
<div class="line"><a id="l03406" name="l03406"></a><span class="lineno"> 3406</span>                        <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">animname2</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>] &lt; <span class="charliteral">&#39;0&#39;</span> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">animname2</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>] &gt; <span class="charliteral">&#39;9&#39;</span>)</div>
<div class="line"><a id="l03407" name="l03407"></a><span class="lineno"> 3407</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> + 1;</div>
<div class="line"><a id="l03408" name="l03408"></a><span class="lineno"> 3408</span>                    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> &gt; 0 &amp;&amp; animname[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>-1] == <span class="charliteral">&#39;_&#39;</span>)</div>
<div class="line"><a id="l03409" name="l03409"></a><span class="lineno"> 3409</span>                        --<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>;</div>
<div class="line"><a id="l03410" name="l03410"></a><span class="lineno"> 3410</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">animname2</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = 0;</div>
<div class="line"><a id="l03411" name="l03411"></a><span class="lineno"> 3411</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">animname2</a>, animname) || mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structanimscene__t.html#a5b15507359a161969d769cd85193561e">framecount</a> &gt; 1)</div>
<div class="line"><a id="l03412" name="l03412"></a><span class="lineno"> 3412</span>                    {</div>
<div class="line"><a id="l03413" name="l03413"></a><span class="lineno"> 3413</span>                        <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structanimscene__t.html#aab78607e4169ebda0f6abac8cc328fee">firstframe</a> - <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a>;</div>
<div class="line"><a id="l03414" name="l03414"></a><span class="lineno"> 3414</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03415" name="l03415"></a><span class="lineno"> 3415</span>                    }</div>
<div class="line"><a id="l03416" name="l03416"></a><span class="lineno"> 3416</span>                }</div>
<div class="line"><a id="l03417" name="l03417"></a><span class="lineno"> 3417</span>                <span class="comment">// if it&#39;s only one frame, use the original frame name</span></div>
<div class="line"><a id="l03418" name="l03418"></a><span class="lineno"> 3418</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> == <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1)</div>
<div class="line"><a id="l03419" name="l03419"></a><span class="lineno"> 3419</span>                    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(animname, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structanimscene__t.html#a5109a00e75f6ee7eadfc299645d11259">name</a>, <span class="keyword">sizeof</span>(animname));</div>
<div class="line"><a id="l03420" name="l03420"></a><span class="lineno"> 3420</span>                </div>
<div class="line"><a id="l03421" name="l03421"></a><span class="lineno"> 3421</span>            }</div>
<div class="line"><a id="l03422" name="l03422"></a><span class="lineno"> 3422</span>            <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>), <span class="stringliteral">&quot;%s_decompiled/%s.smd&quot;</span>, basename, animname);</div>
<div class="line"><a id="l03423" name="l03423"></a><span class="lineno"> 3423</span>            <a class="code hl_function" href="model__shared_8c.html#af3851988b4d818fb8d0aa645acb98d93">Mod_Decompile_SMD</a>(mod, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outname</a>, <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a>, <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l03424" name="l03424"></a><span class="lineno"> 3424</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextsize</a> &lt; (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextbuffer</a>) - 100)</div>
<div class="line"><a id="l03425" name="l03425"></a><span class="lineno"> 3425</span>            {</div>
<div class="line"><a id="l03426" name="l03426"></a><span class="lineno"> 3426</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextsize</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextbuffer</a>) - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextsize</a>, <span class="stringliteral">&quot;scene %s.smd fps %g %s\n&quot;</span>, animname, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structanimscene__t.html#ac67d73868af90a4796ff3d37519a80cf">framerate</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structanimscene__t.html#a2717e3be79ce23fe8e47c87a5c934b12">loop</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot; noloop&quot;</span>);</div>
<div class="line"><a id="l03427" name="l03427"></a><span class="lineno"> 3427</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextsize</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03428" name="l03428"></a><span class="lineno"> 3428</span>            }</div>
<div class="line"><a id="l03429" name="l03429"></a><span class="lineno"> 3429</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextsize</a> &lt; (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextbuffer</a>) - 100)</div>
<div class="line"><a id="l03430" name="l03430"></a><span class="lineno"> 3430</span>            {</div>
<div class="line"><a id="l03431" name="l03431"></a><span class="lineno"> 3431</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextsize</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextbuffer</a>) - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextsize</a>, <span class="stringliteral">&quot;scene %s.smd fps %g %s\n&quot;</span>, animname, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structanimscene__t.html#ac67d73868af90a4796ff3d37519a80cf">framerate</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structanimscene__t.html#a2717e3be79ce23fe8e47c87a5c934b12">loop</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot; noloop&quot;</span>);</div>
<div class="line"><a id="l03432" name="l03432"></a><span class="lineno"> 3432</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextsize</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03433" name="l03433"></a><span class="lineno"> 3433</span>            }</div>
<div class="line"><a id="l03434" name="l03434"></a><span class="lineno"> 3434</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">framegroupstextsize</a> &lt; (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">framegroupstextbuffer</a>) - 100)</div>
<div class="line"><a id="l03435" name="l03435"></a><span class="lineno"> 3435</span>            {</div>
<div class="line"><a id="l03436" name="l03436"></a><span class="lineno"> 3436</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> = <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">framegroupstextbuffer</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">framegroupstextsize</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">framegroupstextbuffer</a>) - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">framegroupstextsize</a>, <span class="stringliteral">&quot;%d %d %f %d // %s\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a>, <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structanimscene__t.html#ac67d73868af90a4796ff3d37519a80cf">framerate</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">animscenes</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structanimscene__t.html#a2717e3be79ce23fe8e47c87a5c934b12">loop</a>, animname);</div>
<div class="line"><a id="l03437" name="l03437"></a><span class="lineno"> 3437</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a> &gt; 0) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">framegroupstextsize</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">l</a>;</div>
<div class="line"><a id="l03438" name="l03438"></a><span class="lineno"> 3438</span>            }</div>
<div class="line"><a id="l03439" name="l03439"></a><span class="lineno"> 3439</span>        }</div>
<div class="line"><a id="l03440" name="l03440"></a><span class="lineno"> 3440</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextsize</a>)</div>
<div class="line"><a id="l03441" name="l03441"></a><span class="lineno"> 3441</span>            <a class="code hl_function" href="fs_8c.html#a2a2eae59234c2478341fea0a380e99ac">FS_WriteFile</a>(<a class="code hl_function" href="common_8c.html#a4a8220fa88226bf9cf39b12a051a20d7">va</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>), <span class="stringliteral">&quot;%s_decompiled/out_zym.txt&quot;</span>, basename), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextbuffer</a>, (<a class="code hl_typedef" href="fs_8h.html#a5bcbce6d6c29888adf596671d6acd44b">fs_offset_t</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zymtextsize</a>);</div>
<div class="line"><a id="l03442" name="l03442"></a><span class="lineno"> 3442</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextsize</a>)</div>
<div class="line"><a id="l03443" name="l03443"></a><span class="lineno"> 3443</span>            <a class="code hl_function" href="fs_8c.html#a2a2eae59234c2478341fea0a380e99ac">FS_WriteFile</a>(<a class="code hl_function" href="common_8c.html#a4a8220fa88226bf9cf39b12a051a20d7">va</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>), <span class="stringliteral">&quot;%s_decompiled/out_dpm.txt&quot;</span>, basename), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextbuffer</a>, (<a class="code hl_typedef" href="fs_8h.html#a5bcbce6d6c29888adf596671d6acd44b">fs_offset_t</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmtextsize</a>);</div>
<div class="line"><a id="l03444" name="l03444"></a><span class="lineno"> 3444</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">framegroupstextsize</a>)</div>
<div class="line"><a id="l03445" name="l03445"></a><span class="lineno"> 3445</span>            <a class="code hl_function" href="fs_8c.html#a2a2eae59234c2478341fea0a380e99ac">FS_WriteFile</a>(<a class="code hl_function" href="common_8c.html#a4a8220fa88226bf9cf39b12a051a20d7">va</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>), <span class="stringliteral">&quot;%s_decompiled.framegroups&quot;</span>, basename), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">framegroupstextbuffer</a>, (<a class="code hl_typedef" href="fs_8h.html#a5bcbce6d6c29888adf596671d6acd44b">fs_offset_t</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">framegroupstextsize</a>);</div>
<div class="line"><a id="l03446" name="l03446"></a><span class="lineno"> 3446</span>    }</div>
<div class="line"><a id="l03447" name="l03447"></a><span class="lineno"> 3447</span>}</div>
</div>
<div class="line"><a id="l03448" name="l03448"></a><span class="lineno"> 3448</span> </div>
<div class="foldopen" id="foldopen03449" data-start="{" data-end="}">
<div class="line"><a id="l03449" name="l03449"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a27be267e2cf2666a18e976df520e625b"> 3449</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a27be267e2cf2666a18e976df520e625b">Mod_AllocLightmap_Init</a>(<a class="code hl_struct" href="structmod__alloclightmap__state__t.html">mod_alloclightmap_state_t</a> *state, <a class="code hl_struct" href="structmempool__t.html">mempool_t</a> *mempool, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a136cce2f78c36b837ec3c8cf72c96aad">height</a>)</div>
<div class="line"><a id="l03450" name="l03450"></a><span class="lineno"> 3450</span>{</div>
<div class="line"><a id="l03451" name="l03451"></a><span class="lineno"> 3451</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>;</div>
<div class="line"><a id="l03452" name="l03452"></a><span class="lineno"> 3452</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(state, 0, <span class="keyword">sizeof</span>(*state));</div>
<div class="line"><a id="l03453" name="l03453"></a><span class="lineno"> 3453</span>    state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a6e15ac0471b8209bab0288d593f6fc39">width</a> = <a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a>;</div>
<div class="line"><a id="l03454" name="l03454"></a><span class="lineno"> 3454</span>    state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a1c053d49b1b4d1e1838049e135c30f42">height</a> = <a class="code hl_variable" href="glquake_8h.html#a136cce2f78c36b837ec3c8cf72c96aad">height</a>;</div>
<div class="line"><a id="l03455" name="l03455"></a><span class="lineno"> 3455</span>    state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#affbcb1ea77c25c356b41921c32b31724">currentY</a> = 0;</div>
<div class="line"><a id="l03456" name="l03456"></a><span class="lineno"> 3456</span>    state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a8e2b46a6a15c00e2c471b73a4fe1c7db">rows</a> = (<a class="code hl_struct" href="structmod__alloclightmap__row__t.html">mod_alloclightmap_row_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(mempool, state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a1c053d49b1b4d1e1838049e135c30f42">height</a> * <span class="keyword">sizeof</span>(*state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a8e2b46a6a15c00e2c471b73a4fe1c7db">rows</a>));</div>
<div class="line"><a id="l03457" name="l03457"></a><span class="lineno"> 3457</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &lt; state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a1c053d49b1b4d1e1838049e135c30f42">height</a>;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++)</div>
<div class="line"><a id="l03458" name="l03458"></a><span class="lineno"> 3458</span>    {</div>
<div class="line"><a id="l03459" name="l03459"></a><span class="lineno"> 3459</span>        state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a8e2b46a6a15c00e2c471b73a4fe1c7db">rows</a>[<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>].<a class="code hl_variable" href="structmod__alloclightmap__row__t.html#aa03f544db00930d53dc447e38411747d">currentX</a> = 0;</div>
<div class="line"><a id="l03460" name="l03460"></a><span class="lineno"> 3460</span>        state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a8e2b46a6a15c00e2c471b73a4fe1c7db">rows</a>[<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>].<a class="code hl_variable" href="structmod__alloclightmap__row__t.html#a4fa30a03bd823028aa57621c9743dd45">rowY</a> = -1;</div>
<div class="line"><a id="l03461" name="l03461"></a><span class="lineno"> 3461</span>    }</div>
<div class="line"><a id="l03462" name="l03462"></a><span class="lineno"> 3462</span>}</div>
</div>
<div class="line"><a id="l03463" name="l03463"></a><span class="lineno"> 3463</span> </div>
<div class="foldopen" id="foldopen03464" data-start="{" data-end="}">
<div class="line"><a id="l03464" name="l03464"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a1e063ce17b7be8462ffafa0f8f8ff8b1"> 3464</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a1e063ce17b7be8462ffafa0f8f8ff8b1">Mod_AllocLightmap_Reset</a>(<a class="code hl_struct" href="structmod__alloclightmap__state__t.html">mod_alloclightmap_state_t</a> *state)</div>
<div class="line"><a id="l03465" name="l03465"></a><span class="lineno"> 3465</span>{</div>
<div class="line"><a id="l03466" name="l03466"></a><span class="lineno"> 3466</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>;</div>
<div class="line"><a id="l03467" name="l03467"></a><span class="lineno"> 3467</span>    state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#affbcb1ea77c25c356b41921c32b31724">currentY</a> = 0;</div>
<div class="line"><a id="l03468" name="l03468"></a><span class="lineno"> 3468</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &lt; state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a1c053d49b1b4d1e1838049e135c30f42">height</a>;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++)</div>
<div class="line"><a id="l03469" name="l03469"></a><span class="lineno"> 3469</span>    {</div>
<div class="line"><a id="l03470" name="l03470"></a><span class="lineno"> 3470</span>        state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a8e2b46a6a15c00e2c471b73a4fe1c7db">rows</a>[<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>].<a class="code hl_variable" href="structmod__alloclightmap__row__t.html#aa03f544db00930d53dc447e38411747d">currentX</a> = 0;</div>
<div class="line"><a id="l03471" name="l03471"></a><span class="lineno"> 3471</span>        state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a8e2b46a6a15c00e2c471b73a4fe1c7db">rows</a>[<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>].<a class="code hl_variable" href="structmod__alloclightmap__row__t.html#a4fa30a03bd823028aa57621c9743dd45">rowY</a> = -1;</div>
<div class="line"><a id="l03472" name="l03472"></a><span class="lineno"> 3472</span>    }</div>
<div class="line"><a id="l03473" name="l03473"></a><span class="lineno"> 3473</span>}</div>
</div>
<div class="line"><a id="l03474" name="l03474"></a><span class="lineno"> 3474</span> </div>
<div class="foldopen" id="foldopen03475" data-start="{" data-end="}">
<div class="line"><a id="l03475" name="l03475"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a2a3016fba1c91f35365a48717811edc3"> 3475</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a2a3016fba1c91f35365a48717811edc3">Mod_AllocLightmap_Free</a>(<a class="code hl_struct" href="structmod__alloclightmap__state__t.html">mod_alloclightmap_state_t</a> *state)</div>
<div class="line"><a id="l03476" name="l03476"></a><span class="lineno"> 3476</span>{</div>
<div class="line"><a id="l03477" name="l03477"></a><span class="lineno"> 3477</span>    <span class="keywordflow">if</span> (state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a8e2b46a6a15c00e2c471b73a4fe1c7db">rows</a>)</div>
<div class="line"><a id="l03478" name="l03478"></a><span class="lineno"> 3478</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a8e2b46a6a15c00e2c471b73a4fe1c7db">rows</a>);</div>
<div class="line"><a id="l03479" name="l03479"></a><span class="lineno"> 3479</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(state, 0, <span class="keyword">sizeof</span>(*state));</div>
<div class="line"><a id="l03480" name="l03480"></a><span class="lineno"> 3480</span>}</div>
</div>
<div class="line"><a id="l03481" name="l03481"></a><span class="lineno"> 3481</span> </div>
<div class="foldopen" id="foldopen03482" data-start="{" data-end="}">
<div class="line"><a id="l03482" name="l03482"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a835cf8e835979953163e64c7eea95186"> 3482</a></span><a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_function" href="model__shared_8c.html#a835cf8e835979953163e64c7eea95186">Mod_AllocLightmap_Block</a>(<a class="code hl_struct" href="structmod__alloclightmap__state__t.html">mod_alloclightmap_state_t</a> *state, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">blockwidth</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">blockheight</a>, <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outx</a>, <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outy</a>)</div>
<div class="line"><a id="l03483" name="l03483"></a><span class="lineno"> 3483</span>{</div>
<div class="line"><a id="l03484" name="l03484"></a><span class="lineno"> 3484</span>    <a class="code hl_struct" href="structmod__alloclightmap__row__t.html">mod_alloclightmap_row_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">row</a>;</div>
<div class="line"><a id="l03485" name="l03485"></a><span class="lineno"> 3485</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>;</div>
<div class="line"><a id="l03486" name="l03486"></a><span class="lineno"> 3486</span> </div>
<div class="line"><a id="l03487" name="l03487"></a><span class="lineno"> 3487</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">row</a> = state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a8e2b46a6a15c00e2c471b73a4fe1c7db">rows</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">blockheight</a>;</div>
<div class="line"><a id="l03488" name="l03488"></a><span class="lineno"> 3488</span>    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">row</a>-&gt;rowY &lt; 0) || (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">row</a>-&gt;currentX + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">blockwidth</a> &gt; state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a6e15ac0471b8209bab0288d593f6fc39">width</a>))</div>
<div class="line"><a id="l03489" name="l03489"></a><span class="lineno"> 3489</span>    {</div>
<div class="line"><a id="l03490" name="l03490"></a><span class="lineno"> 3490</span>        <span class="keywordflow">if</span> (state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#affbcb1ea77c25c356b41921c32b31724">currentY</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">blockheight &lt;= state-&gt;</a><a class="code hl_variable" href="glquake_8h.html#a136cce2f78c36b837ec3c8cf72c96aad">height</a>)</div>
<div class="line"><a id="l03491" name="l03491"></a><span class="lineno"> 3491</span>        {</div>
<div class="line"><a id="l03492" name="l03492"></a><span class="lineno"> 3492</span>            <span class="comment">// use the current allocation position</span></div>
<div class="line"><a id="l03493" name="l03493"></a><span class="lineno"> 3493</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">row</a>-&gt;<a class="code hl_variable" href="structmod__alloclightmap__row__t.html#a4fa30a03bd823028aa57621c9743dd45">rowY</a> = state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#affbcb1ea77c25c356b41921c32b31724">currentY</a>;</div>
<div class="line"><a id="l03494" name="l03494"></a><span class="lineno"> 3494</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">row</a>-&gt;currentX = 0;</div>
<div class="line"><a id="l03495" name="l03495"></a><span class="lineno"> 3495</span>            state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#affbcb1ea77c25c356b41921c32b31724">currentY</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">blockheight</a>;</div>
<div class="line"><a id="l03496" name="l03496"></a><span class="lineno"> 3496</span>        }</div>
<div class="line"><a id="l03497" name="l03497"></a><span class="lineno"> 3497</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l03498" name="l03498"></a><span class="lineno"> 3498</span>        {</div>
<div class="line"><a id="l03499" name="l03499"></a><span class="lineno"> 3499</span>            <span class="comment">// find another position</span></div>
<div class="line"><a id="l03500" name="l03500"></a><span class="lineno"> 3500</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">blockheight</a>;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &lt; state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a1c053d49b1b4d1e1838049e135c30f42">height</a>;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++)</div>
<div class="line"><a id="l03501" name="l03501"></a><span class="lineno"> 3501</span>            {</div>
<div class="line"><a id="l03502" name="l03502"></a><span class="lineno"> 3502</span>                <span class="keywordflow">if</span> ((state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a8e2b46a6a15c00e2c471b73a4fe1c7db">rows</a>[<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>].<a class="code hl_variable" href="structmod__alloclightmap__row__t.html#a4fa30a03bd823028aa57621c9743dd45">rowY</a> &gt;= 0) &amp;&amp; (state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a8e2b46a6a15c00e2c471b73a4fe1c7db">rows</a>[<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>].<a class="code hl_variable" href="structmod__alloclightmap__row__t.html#aa03f544db00930d53dc447e38411747d">currentX</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">blockwidth &lt;= state-&gt;</a><a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a>))</div>
<div class="line"><a id="l03503" name="l03503"></a><span class="lineno"> 3503</span>                {</div>
<div class="line"><a id="l03504" name="l03504"></a><span class="lineno"> 3504</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">row</a> = state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a8e2b46a6a15c00e2c471b73a4fe1c7db">rows</a> + <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>;</div>
<div class="line"><a id="l03505" name="l03505"></a><span class="lineno"> 3505</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03506" name="l03506"></a><span class="lineno"> 3506</span>                }</div>
<div class="line"><a id="l03507" name="l03507"></a><span class="lineno"> 3507</span>            }</div>
<div class="line"><a id="l03508" name="l03508"></a><span class="lineno"> 3508</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> == state-&gt;<a class="code hl_variable" href="structmod__alloclightmap__state__t.html#a1c053d49b1b4d1e1838049e135c30f42">height</a>)</div>
<div class="line"><a id="l03509" name="l03509"></a><span class="lineno"> 3509</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03510" name="l03510"></a><span class="lineno"> 3510</span>        }</div>
<div class="line"><a id="l03511" name="l03511"></a><span class="lineno"> 3511</span>    }</div>
<div class="line"><a id="l03512" name="l03512"></a><span class="lineno"> 3512</span>    *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outy</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">row</a>-&gt;<a class="code hl_variable" href="structmod__alloclightmap__row__t.html#a4fa30a03bd823028aa57621c9743dd45">rowY</a>;</div>
<div class="line"><a id="l03513" name="l03513"></a><span class="lineno"> 3513</span>    *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outx</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">row</a>-&gt;currentX;</div>
<div class="line"><a id="l03514" name="l03514"></a><span class="lineno"> 3514</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">row</a>-&gt;currentX += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">blockwidth</a>;</div>
<div class="line"><a id="l03515" name="l03515"></a><span class="lineno"> 3515</span> </div>
<div class="line"><a id="l03516" name="l03516"></a><span class="lineno"> 3516</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03517" name="l03517"></a><span class="lineno"> 3517</span>}</div>
</div>
<div class="line"><a id="l03518" name="l03518"></a><span class="lineno"> 3518</span> </div>
<div class="foldopen" id="foldopen03519" data-start="{" data-end="};">
<div class="line"><a id="l03519" name="l03519"></a><span class="lineno"><a class="line" href="structlightmapsample__t.html"> 3519</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmapsample_s</a></div>
<div class="line"><a id="l03520" name="l03520"></a><span class="lineno"> 3520</span>{</div>
<div class="line"><a id="l03521" name="l03521"></a><span class="lineno"><a class="line" href="structlightmapsample__t.html#af973c6d3b834b5fb7c6e86197406cdb0"> 3521</a></span>    <span class="keywordtype">float</span> pos[3];</div>
<div class="line"><a id="l03522" name="l03522"></a><span class="lineno"><a class="line" href="structlightmapsample__t.html#ab1ad1bfbbef19d09c9fd66d54b1a190b"> 3522</a></span>    <span class="keywordtype">float</span> sh1[4][3];</div>
<div class="line"><a id="l03523" name="l03523"></a><span class="lineno"><a class="line" href="structlightmapsample__t.html#a267c736c75f915c435c426b8452673bb"> 3523</a></span>    <span class="keywordtype">float</span> *<a class="code hl_variable" href="structlightmapsample__t.html#a267c736c75f915c435c426b8452673bb">vertex_color</a>;</div>
<div class="line"><a id="l03524" name="l03524"></a><span class="lineno"><a class="line" href="structlightmapsample__t.html#a3293765da844ca1fae869e04c5d9eac4"> 3524</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="structlightmapsample__t.html#a3293765da844ca1fae869e04c5d9eac4">lm_bgr</a>;</div>
<div class="line"><a id="l03525" name="l03525"></a><span class="lineno"><a class="line" href="structlightmapsample__t.html#aef5cb2cc34fe6412e71309e2718b8bd5"> 3525</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="structlightmapsample__t.html#aef5cb2cc34fe6412e71309e2718b8bd5">lm_dir</a>;</div>
<div class="line"><a id="l03526" name="l03526"></a><span class="lineno"> 3526</span>}</div>
</div>
<div class="line"><a id="l03527" name="l03527"></a><span class="lineno"> 3527</span><a class="code hl_struct" href="structlightmapsample__t.html">lightmapsample_t</a>;</div>
<div class="line"><a id="l03528" name="l03528"></a><span class="lineno"> 3528</span> </div>
<div class="foldopen" id="foldopen03529" data-start="{" data-end="};">
<div class="line"><a id="l03529" name="l03529"></a><span class="lineno"><a class="line" href="structlightmapvertex__t.html"> 3529</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmapvertex_s</a></div>
<div class="line"><a id="l03530" name="l03530"></a><span class="lineno"> 3530</span>{</div>
<div class="line"><a id="l03531" name="l03531"></a><span class="lineno"><a class="line" href="structlightmapvertex__t.html#a92fd3f9202a612595267119152b3dc76"> 3531</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structlightmapvertex__t.html#a92fd3f9202a612595267119152b3dc76">index</a>;</div>
<div class="line"><a id="l03532" name="l03532"></a><span class="lineno"><a class="line" href="structlightmapvertex__t.html#a78d4dfe63d9a076cd80562df4d7d92a8"> 3532</a></span>    <span class="keywordtype">float</span> pos[3];</div>
<div class="line"><a id="l03533" name="l03533"></a><span class="lineno"><a class="line" href="structlightmapvertex__t.html#a6ef523d003eb27d965b6225866fd378e"> 3533</a></span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>[3];</div>
<div class="line"><a id="l03534" name="l03534"></a><span class="lineno"><a class="line" href="structlightmapvertex__t.html#aa5dac5af59c8982a39d4b20e77bcea26"> 3534</a></span>    <span class="keywordtype">float</span> texcoordbase[2];</div>
<div class="line"><a id="l03535" name="l03535"></a><span class="lineno"><a class="line" href="structlightmapvertex__t.html#a8f03fbce3a3b681a79df530039aec1ac"> 3535</a></span>    <span class="keywordtype">float</span> texcoordlightmap[2];</div>
<div class="line"><a id="l03536" name="l03536"></a><span class="lineno"><a class="line" href="structlightmapvertex__t.html#a6fb976e8e70bf23210560935db7b85d1"> 3536</a></span>    <span class="keywordtype">float</span> lightcolor[4];</div>
<div class="line"><a id="l03537" name="l03537"></a><span class="lineno"> 3537</span>}</div>
</div>
<div class="line"><a id="l03538" name="l03538"></a><span class="lineno"> 3538</span><a class="code hl_struct" href="structlightmapvertex__t.html">lightmapvertex_t</a>;</div>
<div class="line"><a id="l03539" name="l03539"></a><span class="lineno"> 3539</span> </div>
<div class="foldopen" id="foldopen03540" data-start="{" data-end="};">
<div class="line"><a id="l03540" name="l03540"></a><span class="lineno"><a class="line" href="structlightmaptriangle__t.html"> 3540</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmaptriangle_s</a></div>
<div class="line"><a id="l03541" name="l03541"></a><span class="lineno"> 3541</span>{</div>
<div class="line"><a id="l03542" name="l03542"></a><span class="lineno"><a class="line" href="structlightmaptriangle__t.html#adbb2208770f3661f77376bbf6c218724"> 3542</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structlightmaptriangle__t.html#adbb2208770f3661f77376bbf6c218724">triangleindex</a>;</div>
<div class="line"><a id="l03543" name="l03543"></a><span class="lineno"><a class="line" href="structlightmaptriangle__t.html#a2f5cfb0b7652eb49fc900ccc082b999c"> 3543</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structlightmaptriangle__t.html#a2f5cfb0b7652eb49fc900ccc082b999c">surfaceindex</a>;</div>
<div class="line"><a id="l03544" name="l03544"></a><span class="lineno"><a class="line" href="structlightmaptriangle__t.html#a6f0356429ee3ff2b92a51a2a312e2b17"> 3544</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structlightmaptriangle__t.html#a6f0356429ee3ff2b92a51a2a312e2b17">lightmapindex</a>;</div>
<div class="line"><a id="l03545" name="l03545"></a><span class="lineno"><a class="line" href="structlightmaptriangle__t.html#a818e06c0485b2e7a8813fdf6f3eeba29"> 3545</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structlightmaptriangle__t.html#a818e06c0485b2e7a8813fdf6f3eeba29">axis</a>;</div>
<div class="line"><a id="l03546" name="l03546"></a><span class="lineno"><a class="line" href="structlightmaptriangle__t.html#a22770fd5ce9b694e6e0837155cca0cf9"> 3546</a></span>    <span class="keywordtype">int</span> lmoffset[2];</div>
<div class="line"><a id="l03547" name="l03547"></a><span class="lineno"><a class="line" href="structlightmaptriangle__t.html#a5196b8b3cf5d77e8ddbaab4b0158c1dd"> 3547</a></span>    <span class="keywordtype">int</span> lmsize[2];</div>
<div class="line"><a id="l03548" name="l03548"></a><span class="lineno"> 3548</span>    <span class="comment">// 2D modelspace coordinates of min corner</span></div>
<div class="line"><a id="l03549" name="l03549"></a><span class="lineno"> 3549</span>    <span class="comment">// snapped to lightmap grid but not in grid coordinates</span></div>
<div class="line"><a id="l03550" name="l03550"></a><span class="lineno"><a class="line" href="structlightmaptriangle__t.html#a6db8bf8997ab457c389ee30575ccd821"> 3550</a></span>    <span class="keywordtype">float</span> lmbase[2];</div>
<div class="line"><a id="l03551" name="l03551"></a><span class="lineno"> 3551</span>    <span class="comment">// 2D modelspace to lightmap coordinate scale</span></div>
<div class="line"><a id="l03552" name="l03552"></a><span class="lineno"><a class="line" href="structlightmaptriangle__t.html#a5ddfcc78f4dc80487a0c0506f031b699"> 3552</a></span>    <span class="keywordtype">float</span> lmscale[2];</div>
<div class="line"><a id="l03553" name="l03553"></a><span class="lineno"><a class="line" href="structlightmaptriangle__t.html#a9aa65c67fb236a95cad79ea85f285eee"> 3553</a></span>    <span class="keywordtype">float</span> vertex[3][3];</div>
<div class="line"><a id="l03554" name="l03554"></a><span class="lineno"><a class="line" href="structlightmaptriangle__t.html#a7ebd06870fd951d6f7eee022e99ce138"> 3554</a></span>    <span class="keywordtype">float</span> mins[3];</div>
<div class="line"><a id="l03555" name="l03555"></a><span class="lineno"><a class="line" href="structlightmaptriangle__t.html#ad5e46ff3c0cbfa9ce9ea3ae52a335613"> 3555</a></span>    <span class="keywordtype">float</span> maxs[3];</div>
<div class="line"><a id="l03556" name="l03556"></a><span class="lineno"> 3556</span>}</div>
</div>
<div class="line"><a id="l03557" name="l03557"></a><span class="lineno"> 3557</span><a class="code hl_struct" href="structlightmaptriangle__t.html">lightmaptriangle_t</a>;</div>
<div class="line"><a id="l03558" name="l03558"></a><span class="lineno"> 3558</span> </div>
<div class="foldopen" id="foldopen03559" data-start="{" data-end="};">
<div class="line"><a id="l03559" name="l03559"></a><span class="lineno"><a class="line" href="structlightmaplight__t.html"> 3559</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmaplight_s</a></div>
<div class="line"><a id="l03560" name="l03560"></a><span class="lineno"> 3560</span>{</div>
<div class="line"><a id="l03561" name="l03561"></a><span class="lineno"><a class="line" href="structlightmaplight__t.html#ac153eabbc7e98e5048e57a889b525cbf"> 3561</a></span>    <span class="keywordtype">float</span> origin[3];</div>
<div class="line"><a id="l03562" name="l03562"></a><span class="lineno"><a class="line" href="structlightmaplight__t.html#a1d5807752ece66bf3167dbd5f3f49cf5"> 3562</a></span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="structlightmaplight__t.html#a1d5807752ece66bf3167dbd5f3f49cf5">radius</a>;</div>
<div class="line"><a id="l03563" name="l03563"></a><span class="lineno"><a class="line" href="structlightmaplight__t.html#a30e8be3e15881a18ce3d1580dcf9c7d9"> 3563</a></span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="structlightmaplight__t.html#a30e8be3e15881a18ce3d1580dcf9c7d9">iradius</a>;</div>
<div class="line"><a id="l03564" name="l03564"></a><span class="lineno"><a class="line" href="structlightmaplight__t.html#a5ad78b0ce4e2fc4de8d70e1836513507"> 3564</a></span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="structlightmaplight__t.html#a5ad78b0ce4e2fc4de8d70e1836513507">radius2</a>;</div>
<div class="line"><a id="l03565" name="l03565"></a><span class="lineno"><a class="line" href="structlightmaplight__t.html#a6efbd69eac8891842ab8585ea1f84dca"> 3565</a></span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[3];</div>
<div class="line"><a id="l03566" name="l03566"></a><span class="lineno"><a class="line" href="structlightmaplight__t.html#a07c5e7a84325514e06137bc6432b0efc"> 3566</a></span>    <a class="code hl_struct" href="structsvbsp__t.html">svbsp_t</a> <a class="code hl_variable" href="structlightmaplight__t.html#a07c5e7a84325514e06137bc6432b0efc">svbsp</a>;</div>
<div class="line"><a id="l03567" name="l03567"></a><span class="lineno"> 3567</span>}</div>
</div>
<div class="line"><a id="l03568" name="l03568"></a><span class="lineno"> 3568</span><a class="code hl_struct" href="structlightmaplight__t.html">lightmaplight_t</a>;</div>
<div class="line"><a id="l03569" name="l03569"></a><span class="lineno"> 3569</span> </div>
<div class="line"><a id="l03570" name="l03570"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aa0504c8f99deab8cc22309c607e57094"> 3570</a></span><a class="code hl_struct" href="structlightmaptriangle__t.html">lightmaptriangle_t</a> *<a class="code hl_variable" href="model__shared_8c.html#aa0504c8f99deab8cc22309c607e57094">mod_generatelightmaps_lightmaptriangles</a>;</div>
<div class="line"><a id="l03571" name="l03571"></a><span class="lineno"> 3571</span> </div>
<div class="line"><a id="l03572" name="l03572"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a6176e32177c906b13985aab3dc4ca40f"> 3572</a></span><span class="preprocessor">#define MAX_LIGHTMAPSAMPLES 64</span></div>
<div class="line"><a id="l03573" name="l03573"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aab99691470aed3c906207c7628aee05a"> 3573</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="model__shared_8c.html#aab99691470aed3c906207c7628aee05a">mod_generatelightmaps_numoffsets</a>[3];</div>
<div class="line"><a id="l03574" name="l03574"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aa8e1a854d6d64519897f2f0187fffe01"> 3574</a></span><span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="model__shared_8c.html#aa8e1a854d6d64519897f2f0187fffe01">mod_generatelightmaps_offsets</a>[3][<a class="code hl_define" href="model__shared_8c.html#a6176e32177c906b13985aab3dc4ca40f">MAX_LIGHTMAPSAMPLES</a>][3];</div>
<div class="line"><a id="l03575" name="l03575"></a><span class="lineno"> 3575</span> </div>
<div class="line"><a id="l03576" name="l03576"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ab612ba381a094a3bc8c849be3d9ae903"> 3576</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="model__shared_8c.html#ab612ba381a094a3bc8c849be3d9ae903">mod_generatelightmaps_numlights</a>;</div>
<div class="line"><a id="l03577" name="l03577"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a95d44d041fbaf2dcad39719ef1878d8d"> 3577</a></span><span class="keyword">static</span> <a class="code hl_struct" href="structlightmaplight__t.html">lightmaplight_t</a> *<a class="code hl_variable" href="model__shared_8c.html#a95d44d041fbaf2dcad39719ef1878d8d">mod_generatelightmaps_lightinfo</a>;</div>
<div class="line"><a id="l03578" name="l03578"></a><span class="lineno"> 3578</span> </div>
<div class="line"><a id="l03579" name="l03579"></a><span class="lineno"> 3579</span><span class="keyword">extern</span> <a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#a0f3acc72b271530ae45ed8b06f011976">r_shadow_lightattenuationdividebias</a>;</div>
<div class="line"><a id="l03580" name="l03580"></a><span class="lineno"> 3580</span><span class="keyword">extern</span> <a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#ac983b35605fe044369c676ce33b58061">r_shadow_lightattenuationlinearscale</a>;</div>
<div class="line"><a id="l03581" name="l03581"></a><span class="lineno"> 3581</span> </div>
<div class="foldopen" id="foldopen03582" data-start="{" data-end="}">
<div class="line"><a id="l03582" name="l03582"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a2f621b2a71db69500b0c3bf0c2e10a60"> 3582</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a2f621b2a71db69500b0c3bf0c2e10a60">Mod_GenerateLightmaps_LightPoint</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model, <span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> pos, <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambient</a>, <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>, <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightdir</a>)</div>
<div class="line"><a id="l03583" name="l03583"></a><span class="lineno"> 3583</span>{</div>
<div class="line"><a id="l03584" name="l03584"></a><span class="lineno"> 3584</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l03585" name="l03585"></a><span class="lineno"> 3585</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>;</div>
<div class="line"><a id="l03586" name="l03586"></a><span class="lineno"> 3586</span>    <span class="keywordtype">int</span> result;</div>
<div class="line"><a id="l03587" name="l03587"></a><span class="lineno"> 3587</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[3];</div>
<div class="line"><a id="l03588" name="l03588"></a><span class="lineno"> 3588</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[3];</div>
<div class="line"><a id="l03589" name="l03589"></a><span class="lineno"> 3589</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[3];</div>
<div class="line"><a id="l03590" name="l03590"></a><span class="lineno"> 3590</span>    <span class="keywordtype">float</span> dist;</div>
<div class="line"><a id="l03591" name="l03591"></a><span class="lineno"> 3591</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a>;</div>
<div class="line"><a id="l03592" name="l03592"></a><span class="lineno"> 3592</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>;</div>
<div class="line"><a id="l03593" name="l03593"></a><span class="lineno"> 3593</span>    <span class="keywordtype">float</span> sample[5*3];</div>
<div class="line"><a id="l03594" name="l03594"></a><span class="lineno"> 3594</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightorigin</a>[3];</div>
<div class="line"><a id="l03595" name="l03595"></a><span class="lineno"> 3595</span>    <span class="keywordtype">float</span> lightradius;</div>
<div class="line"><a id="l03596" name="l03596"></a><span class="lineno"> 3596</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightradius2</a>;</div>
<div class="line"><a id="l03597" name="l03597"></a><span class="lineno"> 3597</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightiradius</a>;</div>
<div class="line"><a id="l03598" name="l03598"></a><span class="lineno"> 3598</span>    <span class="keywordtype">float</span> lightcolor[3];</div>
<div class="line"><a id="l03599" name="l03599"></a><span class="lineno"> 3599</span>    <a class="code hl_struct" href="structtrace__t.html">trace_t</a> trace;</div>
<div class="line"><a id="l03600" name="l03600"></a><span class="lineno"> 3600</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5*3;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03601" name="l03601"></a><span class="lineno"> 3601</span>        sample[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0.0f;</div>
<div class="line"><a id="l03602" name="l03602"></a><span class="lineno"> 3602</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> = 0;;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>++)</div>
<div class="line"><a id="l03603" name="l03603"></a><span class="lineno"> 3603</span>    {</div>
<div class="line"><a id="l03604" name="l03604"></a><span class="lineno"> 3604</span>        result = <a class="code hl_function" href="r__shadow_8c.html#a50c834f5bd9d9a7195c3c89d359c0f44">R_Shadow_GetRTLightInfo</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightorigin</a>, &amp;lightradius, lightcolor);</div>
<div class="line"><a id="l03605" name="l03605"></a><span class="lineno"> 3605</span>        <span class="keywordflow">if</span> (result &lt; 0)</div>
<div class="line"><a id="l03606" name="l03606"></a><span class="lineno"> 3606</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03607" name="l03607"></a><span class="lineno"> 3607</span>        <span class="keywordflow">if</span> (result == 0)</div>
<div class="line"><a id="l03608" name="l03608"></a><span class="lineno"> 3608</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03609" name="l03609"></a><span class="lineno"> 3609</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightradius2</a> = lightradius * lightradius;</div>
<div class="line"><a id="l03610" name="l03610"></a><span class="lineno"> 3610</span>        <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightorigin</a>, pos, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>);</div>
<div class="line"><a id="l03611" name="l03611"></a><span class="lineno"> 3611</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a> = <a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>);</div>
<div class="line"><a id="l03612" name="l03612"></a><span class="lineno"> 3612</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightradius2</a>)</div>
<div class="line"><a id="l03613" name="l03613"></a><span class="lineno"> 3613</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03614" name="l03614"></a><span class="lineno"> 3614</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightiradius</a> = 1.0f / lightradius;</div>
<div class="line"><a id="l03615" name="l03615"></a><span class="lineno"> 3615</span>        dist = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a>) * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightiradius</a>;</div>
<div class="line"><a id="l03616" name="l03616"></a><span class="lineno"> 3616</span>        <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> = (1.0f - dist) * <a class="code hl_variable" href="model__shared_8c.html#ac983b35605fe044369c676ce33b58061">r_shadow_lightattenuationlinearscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> / (<a class="code hl_variable" href="model__shared_8c.html#a0f3acc72b271530ae45ed8b06f011976">r_shadow_lightattenuationdividebias</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> + dist*dist);</div>
<div class="line"><a id="l03617" name="l03617"></a><span class="lineno"> 3617</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> &lt;= 0.0f)</div>
<div class="line"><a id="l03618" name="l03618"></a><span class="lineno"> 3618</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03619" name="l03619"></a><span class="lineno"> 3619</span>        <span class="keywordflow">if</span> (model &amp;&amp; model-&gt;<a class="code hl_variable" href="structmodel__t.html#af986fe2f082429a18c3d36f957649e10">TraceLine</a>)</div>
<div class="line"><a id="l03620" name="l03620"></a><span class="lineno"> 3620</span>        {</div>
<div class="line"><a id="l03621" name="l03621"></a><span class="lineno"> 3621</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#af986fe2f082429a18c3d36f957649e10">TraceLine</a>(model, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;trace, pos, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightorigin</a>, <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a>, 0, <a class="code hl_define" href="model__brush_8h.html#a92eb2c00b3276aef285cf43b305a43da">MATERIALFLAGMASK_TRANSLUCENT</a> | <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a>);</div>
<div class="line"><a id="l03622" name="l03622"></a><span class="lineno"> 3622</span>            <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a> &lt; 1)</div>
<div class="line"><a id="l03623" name="l03623"></a><span class="lineno"> 3623</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03624" name="l03624"></a><span class="lineno"> 3624</span>        }</div>
<div class="line"><a id="l03625" name="l03625"></a><span class="lineno"> 3625</span>        <span class="comment">// scale down intensity to add to both ambient and diffuse</span></div>
<div class="line"><a id="l03626" name="l03626"></a><span class="lineno"> 3626</span>        <span class="comment">//intensity *= 0.5f;</span></div>
<div class="line"><a id="l03627" name="l03627"></a><span class="lineno"> 3627</span>        <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>);</div>
<div class="line"><a id="l03628" name="l03628"></a><span class="lineno"> 3628</span>        <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(lightcolor, <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l03629" name="l03629"></a><span class="lineno"> 3629</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(sample    , 0.5f            , <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, sample    );</div>
<div class="line"><a id="l03630" name="l03630"></a><span class="lineno"> 3630</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(sample + 3, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[0], <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, sample + 3);</div>
<div class="line"><a id="l03631" name="l03631"></a><span class="lineno"> 3631</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(sample + 6, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[1], <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, sample + 6);</div>
<div class="line"><a id="l03632" name="l03632"></a><span class="lineno"> 3632</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(sample + 9, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[2], <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, sample + 9);</div>
<div class="line"><a id="l03633" name="l03633"></a><span class="lineno"> 3633</span>        <span class="comment">// calculate a weighted average light direction as well</span></div>
<div class="line"><a id="l03634" name="l03634"></a><span class="lineno"> 3634</span>        <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> *= <a class="code hl_define" href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l03635" name="l03635"></a><span class="lineno"> 3635</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(sample + 12, <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>, sample + 12);</div>
<div class="line"><a id="l03636" name="l03636"></a><span class="lineno"> 3636</span>    }</div>
<div class="line"><a id="l03637" name="l03637"></a><span class="lineno"> 3637</span>    <span class="comment">// calculate the direction we&#39;ll use to reduce the sample to a directional light source</span></div>
<div class="line"><a id="l03638" name="l03638"></a><span class="lineno"> 3638</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(sample + 12, <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>);</div>
<div class="line"><a id="l03639" name="l03639"></a><span class="lineno"> 3639</span>    <span class="comment">//VectorSet(dir, sample[3] + sample[4] + sample[5], sample[6] + sample[7] + sample[8], sample[9] + sample[10] + sample[11]);</span></div>
<div class="line"><a id="l03640" name="l03640"></a><span class="lineno"> 3640</span>    <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>);</div>
<div class="line"><a id="l03641" name="l03641"></a><span class="lineno"> 3641</span>    <span class="comment">// extract the diffuse color along the chosen direction and scale it</span></div>
<div class="line"><a id="l03642" name="l03642"></a><span class="lineno"> 3642</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>[0] = (<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[0]*sample[3] + <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[1]*sample[6] + <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[2]*sample[ 9] + sample[ 0]);</div>
<div class="line"><a id="l03643" name="l03643"></a><span class="lineno"> 3643</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>[1] = (<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[0]*sample[4] + <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[1]*sample[7] + <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[2]*sample[10] + sample[ 1]);</div>
<div class="line"><a id="l03644" name="l03644"></a><span class="lineno"> 3644</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>[2] = (<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[0]*sample[5] + <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[1]*sample[8] + <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[2]*sample[11] + sample[ 2]);</div>
<div class="line"><a id="l03645" name="l03645"></a><span class="lineno"> 3645</span>    <span class="comment">// subtract some of diffuse from ambient</span></div>
<div class="line"><a id="l03646" name="l03646"></a><span class="lineno"> 3646</span>    <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(sample, -0.333f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambient</a>);</div>
<div class="line"><a id="l03647" name="l03647"></a><span class="lineno"> 3647</span>    <span class="comment">// store the normalized lightdir</span></div>
<div class="line"><a id="l03648" name="l03648"></a><span class="lineno"> 3648</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightdir</a>);</div>
<div class="line"><a id="l03649" name="l03649"></a><span class="lineno"> 3649</span>}</div>
</div>
<div class="line"><a id="l03650" name="l03650"></a><span class="lineno"> 3650</span> </div>
<div class="foldopen" id="foldopen03651" data-start="{" data-end="}">
<div class="line"><a id="l03651" name="l03651"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a356baa7abb6314847b4c15f733520b83"> 3651</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a356baa7abb6314847b4c15f733520b83">Mod_GenerateLightmaps_CreateLights_ComputeSVBSP_InsertSurfaces</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structmodel__t.html">model_t</a> *model, <a class="code hl_struct" href="structsvbsp__t.html">svbsp_t</a> *svbsp, <span class="keyword">const</span> <span class="keywordtype">float</span> *mins, <span class="keyword">const</span> <span class="keywordtype">float</span> *maxs)</div>
<div class="line"><a id="l03652" name="l03652"></a><span class="lineno"> 3652</span>{</div>
<div class="line"><a id="l03653" name="l03653"></a><span class="lineno"> 3653</span>    <span class="keywordtype">int</span> surfaceindex;</div>
<div class="line"><a id="l03654" name="l03654"></a><span class="lineno"> 3654</span>    <span class="keywordtype">int</span> triangleindex;</div>
<div class="line"><a id="l03655" name="l03655"></a><span class="lineno"> 3655</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>;</div>
<div class="line"><a id="l03656" name="l03656"></a><span class="lineno"> 3656</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> *vertex3f = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>;</div>
<div class="line"><a id="l03657" name="l03657"></a><span class="lineno"> 3657</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> *element3i = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>;</div>
<div class="line"><a id="l03658" name="l03658"></a><span class="lineno"> 3658</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>;</div>
<div class="line"><a id="l03659" name="l03659"></a><span class="lineno"> 3659</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a1521c81f03b197c775902c4be8f467b8">v2</a>[3][3];</div>
<div class="line"><a id="l03660" name="l03660"></a><span class="lineno"> 3660</span>    <span class="keywordflow">for</span> (surfaceindex = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">submodelsurfaces_start</a>;surfaceindex &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a3cf3f78e305583268585ef7bde7aaa16">submodelsurfaces_end</a>;surfaceindex++)</div>
<div class="line"><a id="l03661" name="l03661"></a><span class="lineno"> 3661</span>    {</div>
<div class="line"><a id="l03662" name="l03662"></a><span class="lineno"> 3662</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + surfaceindex;</div>
<div class="line"><a id="l03663" name="l03663"></a><span class="lineno"> 3663</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="mathlib_8h.html#a3f4b2cfbd3195eddeb10b2e14b7e4d8c">BoxesOverlap</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;mins, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;maxs, mins, maxs))</div>
<div class="line"><a id="l03664" name="l03664"></a><span class="lineno"> 3664</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03665" name="l03665"></a><span class="lineno"> 3665</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;texture-&gt;basematerialflags &amp; <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a>)</div>
<div class="line"><a id="l03666" name="l03666"></a><span class="lineno"> 3666</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03667" name="l03667"></a><span class="lineno"> 3667</span>        <span class="keywordflow">for</span> (triangleindex = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = element3i + 3*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle;triangleindex &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles;triangleindex++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> += 3)</div>
<div class="line"><a id="l03668" name="l03668"></a><span class="lineno"> 3668</span>        {</div>
<div class="line"><a id="l03669" name="l03669"></a><span class="lineno"> 3669</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(vertex3f + 3*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[0], <a class="code hl_variable" href="glquake_8h.html#a1521c81f03b197c775902c4be8f467b8">v2</a>[0]);</div>
<div class="line"><a id="l03670" name="l03670"></a><span class="lineno"> 3670</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(vertex3f + 3*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[1], <a class="code hl_variable" href="glquake_8h.html#a1521c81f03b197c775902c4be8f467b8">v2</a>[1]);</div>
<div class="line"><a id="l03671" name="l03671"></a><span class="lineno"> 3671</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(vertex3f + 3*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[2], <a class="code hl_variable" href="glquake_8h.html#a1521c81f03b197c775902c4be8f467b8">v2</a>[2]);</div>
<div class="line"><a id="l03672" name="l03672"></a><span class="lineno"> 3672</span>            <a class="code hl_function" href="svbsp_8c.html#a92b7a96f58dca72dcdb8b59360ae580b">SVBSP_AddPolygon</a>(svbsp, 3, <a class="code hl_variable" href="glquake_8h.html#a1521c81f03b197c775902c4be8f467b8">v2</a>[0], <span class="keyword">true</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a id="l03673" name="l03673"></a><span class="lineno"> 3673</span>        }</div>
<div class="line"><a id="l03674" name="l03674"></a><span class="lineno"> 3674</span>    }</div>
<div class="line"><a id="l03675" name="l03675"></a><span class="lineno"> 3675</span>}</div>
</div>
<div class="line"><a id="l03676" name="l03676"></a><span class="lineno"> 3676</span> </div>
<div class="foldopen" id="foldopen03677" data-start="{" data-end="}">
<div class="line"><a id="l03677" name="l03677"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a075211710038f3d573211bb3274e2356"> 3677</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a075211710038f3d573211bb3274e2356">Mod_GenerateLightmaps_CreateLights_ComputeSVBSP</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model, <a class="code hl_struct" href="structlightmaplight__t.html">lightmaplight_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>)</div>
<div class="line"><a id="l03678" name="l03678"></a><span class="lineno"> 3678</span>{</div>
<div class="line"><a id="l03679" name="l03679"></a><span class="lineno"> 3679</span>    <span class="keywordtype">int</span> maxnodes = 1&lt;&lt;14;</div>
<div class="line"><a id="l03680" name="l03680"></a><span class="lineno"> 3680</span>    <a class="code hl_struct" href="structsvbsp__node__t.html">svbsp_node_t</a> *nodes;</div>
<div class="line"><a id="l03681" name="l03681"></a><span class="lineno"> 3681</span>    <span class="keywordtype">float</span> origin[3];</div>
<div class="line"><a id="l03682" name="l03682"></a><span class="lineno"> 3682</span>    <span class="keywordtype">float</span> mins[3];</div>
<div class="line"><a id="l03683" name="l03683"></a><span class="lineno"> 3683</span>    <span class="keywordtype">float</span> maxs[3];</div>
<div class="line"><a id="l03684" name="l03684"></a><span class="lineno"> 3684</span>    <a class="code hl_struct" href="structsvbsp__t.html">svbsp_t</a> svbsp;</div>
<div class="line"><a id="l03685" name="l03685"></a><span class="lineno"> 3685</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(mins, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;origin[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;radius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;origin[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;radius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;origin[2] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;radius);</div>
<div class="line"><a id="l03686" name="l03686"></a><span class="lineno"> 3686</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(maxs, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;origin[0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;radius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;origin[1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;radius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;origin[2] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;radius);</div>
<div class="line"><a id="l03687" name="l03687"></a><span class="lineno"> 3687</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;origin, origin);</div>
<div class="line"><a id="l03688" name="l03688"></a><span class="lineno"> 3688</span>    nodes = (<a class="code hl_struct" href="structsvbsp__node__t.html">svbsp_node_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, maxnodes * <span class="keyword">sizeof</span>(*nodes));</div>
<div class="line"><a id="l03689" name="l03689"></a><span class="lineno"> 3689</span>    <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a id="l03690" name="l03690"></a><span class="lineno"> 3690</span>    {</div>
<div class="line"><a id="l03691" name="l03691"></a><span class="lineno"> 3691</span>        <a class="code hl_function" href="svbsp_8c.html#a0d77b69cc4ebcc825d218bd26a181922">SVBSP_Init</a>(&amp;svbsp, origin, maxnodes, nodes);</div>
<div class="line"><a id="l03692" name="l03692"></a><span class="lineno"> 3692</span>        <a class="code hl_function" href="model__shared_8c.html#a356baa7abb6314847b4c15f733520b83">Mod_GenerateLightmaps_CreateLights_ComputeSVBSP_InsertSurfaces</a>(model, &amp;svbsp, mins, maxs);</div>
<div class="line"><a id="l03693" name="l03693"></a><span class="lineno"> 3693</span>        <span class="keywordflow">if</span> (svbsp.<a class="code hl_variable" href="structsvbsp__t.html#a78e9fbe196989f7a666cfb9c38ab78b4">ranoutofnodes</a>)</div>
<div class="line"><a id="l03694" name="l03694"></a><span class="lineno"> 3694</span>        {</div>
<div class="line"><a id="l03695" name="l03695"></a><span class="lineno"> 3695</span>            maxnodes *= 16;</div>
<div class="line"><a id="l03696" name="l03696"></a><span class="lineno"> 3696</span>            <span class="keywordflow">if</span> (maxnodes &gt; 1&lt;&lt;22)</div>
<div class="line"><a id="l03697" name="l03697"></a><span class="lineno"> 3697</span>            {</div>
<div class="line"><a id="l03698" name="l03698"></a><span class="lineno"> 3698</span>                <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(nodes);</div>
<div class="line"><a id="l03699" name="l03699"></a><span class="lineno"> 3699</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03700" name="l03700"></a><span class="lineno"> 3700</span>            }</div>
<div class="line"><a id="l03701" name="l03701"></a><span class="lineno"> 3701</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(nodes);</div>
<div class="line"><a id="l03702" name="l03702"></a><span class="lineno"> 3702</span>            nodes = (<a class="code hl_struct" href="structsvbsp__node__t.html">svbsp_node_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, maxnodes * <span class="keyword">sizeof</span>(*nodes));</div>
<div class="line"><a id="l03703" name="l03703"></a><span class="lineno"> 3703</span>        }</div>
<div class="line"><a id="l03704" name="l03704"></a><span class="lineno"> 3704</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l03705" name="l03705"></a><span class="lineno"> 3705</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03706" name="l03706"></a><span class="lineno"> 3706</span>    }</div>
<div class="line"><a id="l03707" name="l03707"></a><span class="lineno"> 3707</span>    <span class="keywordflow">if</span> (svbsp.<a class="code hl_variable" href="structsvbsp__t.html#a270605f3b846bb9e4bd10bdf221d9803">numnodes</a> &gt; 0)</div>
<div class="line"><a id="l03708" name="l03708"></a><span class="lineno"> 3708</span>    {</div>
<div class="line"><a id="l03709" name="l03709"></a><span class="lineno"> 3709</span>        svbsp.<a class="code hl_variable" href="structsvbsp__t.html#ac375fa02dbf20f6da54d4a2caa469f96">nodes</a> = (<a class="code hl_struct" href="structsvbsp__node__t.html">svbsp_node_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, svbsp.<a class="code hl_variable" href="structsvbsp__t.html#a270605f3b846bb9e4bd10bdf221d9803">numnodes</a> * <span class="keyword">sizeof</span>(*nodes));</div>
<div class="line"><a id="l03710" name="l03710"></a><span class="lineno"> 3710</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(svbsp.<a class="code hl_variable" href="structsvbsp__t.html#ac375fa02dbf20f6da54d4a2caa469f96">nodes</a>, nodes, svbsp.<a class="code hl_variable" href="structsvbsp__t.html#a270605f3b846bb9e4bd10bdf221d9803">numnodes</a> * <span class="keyword">sizeof</span>(*nodes));</div>
<div class="line"><a id="l03711" name="l03711"></a><span class="lineno"> 3711</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;svbsp = svbsp;</div>
<div class="line"><a id="l03712" name="l03712"></a><span class="lineno"> 3712</span>    }</div>
<div class="line"><a id="l03713" name="l03713"></a><span class="lineno"> 3713</span>    <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(nodes);</div>
<div class="line"><a id="l03714" name="l03714"></a><span class="lineno"> 3714</span>}</div>
</div>
<div class="line"><a id="l03715" name="l03715"></a><span class="lineno"> 3715</span> </div>
<div class="foldopen" id="foldopen03716" data-start="{" data-end="}">
<div class="line"><a id="l03716" name="l03716"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aa2c34d2ed1a44ed067b9515351f297e6"> 3716</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aa2c34d2ed1a44ed067b9515351f297e6">Mod_GenerateLightmaps_CreateLights</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model)</div>
<div class="line"><a id="l03717" name="l03717"></a><span class="lineno"> 3717</span>{</div>
<div class="line"><a id="l03718" name="l03718"></a><span class="lineno"> 3718</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>;</div>
<div class="line"><a id="l03719" name="l03719"></a><span class="lineno"> 3719</span>    <span class="keywordtype">int</span> result;</div>
<div class="line"><a id="l03720" name="l03720"></a><span class="lineno"> 3720</span>    <a class="code hl_struct" href="structlightmaplight__t.html">lightmaplight_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>;</div>
<div class="line"><a id="l03721" name="l03721"></a><span class="lineno"> 3721</span>    <span class="keywordtype">float</span> origin[3];</div>
<div class="line"><a id="l03722" name="l03722"></a><span class="lineno"> 3722</span>    <span class="keywordtype">float</span> radius;</div>
<div class="line"><a id="l03723" name="l03723"></a><span class="lineno"> 3723</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[3];</div>
<div class="line"><a id="l03724" name="l03724"></a><span class="lineno"> 3724</span>    <a class="code hl_variable" href="model__shared_8c.html#ab612ba381a094a3bc8c849be3d9ae903">mod_generatelightmaps_numlights</a> = 0;</div>
<div class="line"><a id="l03725" name="l03725"></a><span class="lineno"> 3725</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> = 0;;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>++)</div>
<div class="line"><a id="l03726" name="l03726"></a><span class="lineno"> 3726</span>    {</div>
<div class="line"><a id="l03727" name="l03727"></a><span class="lineno"> 3727</span>        result = <a class="code hl_function" href="r__shadow_8c.html#a50c834f5bd9d9a7195c3c89d359c0f44">R_Shadow_GetRTLightInfo</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>, origin, &amp;radius, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l03728" name="l03728"></a><span class="lineno"> 3728</span>        <span class="keywordflow">if</span> (result &lt; 0)</div>
<div class="line"><a id="l03729" name="l03729"></a><span class="lineno"> 3729</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03730" name="l03730"></a><span class="lineno"> 3730</span>        <span class="keywordflow">if</span> (result &gt; 0)</div>
<div class="line"><a id="l03731" name="l03731"></a><span class="lineno"> 3731</span>            <a class="code hl_variable" href="model__shared_8c.html#ab612ba381a094a3bc8c849be3d9ae903">mod_generatelightmaps_numlights</a>++;</div>
<div class="line"><a id="l03732" name="l03732"></a><span class="lineno"> 3732</span>    }</div>
<div class="line"><a id="l03733" name="l03733"></a><span class="lineno"> 3733</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#ab612ba381a094a3bc8c849be3d9ae903">mod_generatelightmaps_numlights</a> &gt; 0)</div>
<div class="line"><a id="l03734" name="l03734"></a><span class="lineno"> 3734</span>    {</div>
<div class="line"><a id="l03735" name="l03735"></a><span class="lineno"> 3735</span>        <a class="code hl_variable" href="model__shared_8c.html#a95d44d041fbaf2dcad39719ef1878d8d">mod_generatelightmaps_lightinfo</a> = (<a class="code hl_struct" href="structlightmaplight__t.html">lightmaplight_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, <a class="code hl_variable" href="model__shared_8c.html#ab612ba381a094a3bc8c849be3d9ae903">mod_generatelightmaps_numlights</a> * <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="model__shared_8c.html#a95d44d041fbaf2dcad39719ef1878d8d">mod_generatelightmaps_lightinfo</a>));</div>
<div class="line"><a id="l03736" name="l03736"></a><span class="lineno"> 3736</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a> = <a class="code hl_variable" href="model__shared_8c.html#a95d44d041fbaf2dcad39719ef1878d8d">mod_generatelightmaps_lightinfo</a>;</div>
<div class="line"><a id="l03737" name="l03737"></a><span class="lineno"> 3737</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> = 0;;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>++)</div>
<div class="line"><a id="l03738" name="l03738"></a><span class="lineno"> 3738</span>        {</div>
<div class="line"><a id="l03739" name="l03739"></a><span class="lineno"> 3739</span>            result = <a class="code hl_function" href="r__shadow_8c.html#a50c834f5bd9d9a7195c3c89d359c0f44">R_Shadow_GetRTLightInfo</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;origin, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;radius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;color);</div>
<div class="line"><a id="l03740" name="l03740"></a><span class="lineno"> 3740</span>            <span class="keywordflow">if</span> (result &lt; 0)</div>
<div class="line"><a id="l03741" name="l03741"></a><span class="lineno"> 3741</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03742" name="l03742"></a><span class="lineno"> 3742</span>            <span class="keywordflow">if</span> (result &gt; 0)</div>
<div class="line"><a id="l03743" name="l03743"></a><span class="lineno"> 3743</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>++;</div>
<div class="line"><a id="l03744" name="l03744"></a><span class="lineno"> 3744</span>        }</div>
<div class="line"><a id="l03745" name="l03745"></a><span class="lineno"> 3745</span>    }</div>
<div class="line"><a id="l03746" name="l03746"></a><span class="lineno"> 3746</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a> = <a class="code hl_variable" href="model__shared_8c.html#a95d44d041fbaf2dcad39719ef1878d8d">mod_generatelightmaps_lightinfo</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> &lt; <a class="code hl_variable" href="model__shared_8c.html#ab612ba381a094a3bc8c849be3d9ae903">mod_generatelightmaps_numlights</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>++)</div>
<div class="line"><a id="l03747" name="l03747"></a><span class="lineno"> 3747</span>    {</div>
<div class="line"><a id="l03748" name="l03748"></a><span class="lineno"> 3748</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;iradius = 1.0f / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;radius;</div>
<div class="line"><a id="l03749" name="l03749"></a><span class="lineno"> 3749</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;radius2 = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;radius * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;radius;</div>
<div class="line"><a id="l03750" name="l03750"></a><span class="lineno"> 3750</span>        <span class="comment">// TODO: compute svbsp</span></div>
<div class="line"><a id="l03751" name="l03751"></a><span class="lineno"> 3751</span>        <a class="code hl_function" href="model__shared_8c.html#a075211710038f3d573211bb3274e2356">Mod_GenerateLightmaps_CreateLights_ComputeSVBSP</a>(model, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>);</div>
<div class="line"><a id="l03752" name="l03752"></a><span class="lineno"> 3752</span>    }</div>
<div class="line"><a id="l03753" name="l03753"></a><span class="lineno"> 3753</span>}</div>
</div>
<div class="line"><a id="l03754" name="l03754"></a><span class="lineno"> 3754</span> </div>
<div class="foldopen" id="foldopen03755" data-start="{" data-end="}">
<div class="line"><a id="l03755" name="l03755"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ab691ff4996991fc8d44cc3fdd522e847"> 3755</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#ab691ff4996991fc8d44cc3fdd522e847">Mod_GenerateLightmaps_DestroyLights</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model)</div>
<div class="line"><a id="l03756" name="l03756"></a><span class="lineno"> 3756</span>{</div>
<div class="line"><a id="l03757" name="l03757"></a><span class="lineno"> 3757</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l03758" name="l03758"></a><span class="lineno"> 3758</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a95d44d041fbaf2dcad39719ef1878d8d">mod_generatelightmaps_lightinfo</a>)</div>
<div class="line"><a id="l03759" name="l03759"></a><span class="lineno"> 3759</span>    {</div>
<div class="line"><a id="l03760" name="l03760"></a><span class="lineno"> 3760</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="model__shared_8c.html#ab612ba381a094a3bc8c849be3d9ae903">mod_generatelightmaps_numlights</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03761" name="l03761"></a><span class="lineno"> 3761</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#a95d44d041fbaf2dcad39719ef1878d8d">mod_generatelightmaps_lightinfo</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].svbsp.nodes)</div>
<div class="line"><a id="l03762" name="l03762"></a><span class="lineno"> 3762</span>                <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="model__shared_8c.html#a95d44d041fbaf2dcad39719ef1878d8d">mod_generatelightmaps_lightinfo</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].svbsp.nodes);</div>
<div class="line"><a id="l03763" name="l03763"></a><span class="lineno"> 3763</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="model__shared_8c.html#a95d44d041fbaf2dcad39719ef1878d8d">mod_generatelightmaps_lightinfo</a>);</div>
<div class="line"><a id="l03764" name="l03764"></a><span class="lineno"> 3764</span>    }</div>
<div class="line"><a id="l03765" name="l03765"></a><span class="lineno"> 3765</span>    <a class="code hl_variable" href="model__shared_8c.html#a95d44d041fbaf2dcad39719ef1878d8d">mod_generatelightmaps_lightinfo</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03766" name="l03766"></a><span class="lineno"> 3766</span>    <a class="code hl_variable" href="model__shared_8c.html#ab612ba381a094a3bc8c849be3d9ae903">mod_generatelightmaps_numlights</a> = 0;</div>
<div class="line"><a id="l03767" name="l03767"></a><span class="lineno"> 3767</span>}</div>
</div>
<div class="line"><a id="l03768" name="l03768"></a><span class="lineno"> 3768</span> </div>
<div class="foldopen" id="foldopen03769" data-start="{" data-end="}">
<div class="line"><a id="l03769" name="l03769"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aeb0c26221a3458c9cb25fa8ead17e46e"> 3769</a></span><span class="keyword">static</span> <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_function" href="model__shared_8c.html#aeb0c26221a3458c9cb25fa8ead17e46e">Mod_GenerateLightmaps_SamplePoint_SVBSP</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structsvbsp__t.html">svbsp_t</a> *svbsp, <span class="keyword">const</span> <span class="keywordtype">float</span> *pos)</div>
<div class="line"><a id="l03770" name="l03770"></a><span class="lineno"> 3770</span>{</div>
<div class="line"><a id="l03771" name="l03771"></a><span class="lineno"> 3771</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structsvbsp__node__t.html">svbsp_node_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">node</a>;</div>
<div class="line"><a id="l03772" name="l03772"></a><span class="lineno"> 3772</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structsvbsp__node__t.html">svbsp_node_t</a> *nodes = svbsp-&gt;<a class="code hl_variable" href="structsvbsp__t.html#ac375fa02dbf20f6da54d4a2caa469f96">nodes</a>;</div>
<div class="line"><a id="l03773" name="l03773"></a><span class="lineno"> 3773</span>    <span class="keywordtype">int</span> num = 0;</div>
<div class="line"><a id="l03774" name="l03774"></a><span class="lineno"> 3774</span>    <span class="keywordflow">while</span> (num &gt;= 0)</div>
<div class="line"><a id="l03775" name="l03775"></a><span class="lineno"> 3775</span>    {</div>
<div class="line"><a id="l03776" name="l03776"></a><span class="lineno"> 3776</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">node</a> = nodes + num;</div>
<div class="line"><a id="l03777" name="l03777"></a><span class="lineno"> 3777</span>        num = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">node</a>-&gt;<a class="code hl_variable" href="structsvbsp__node__t.html#a3f4c54a87630592f50e64e65f50a855e">children</a>[<a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">node</a>-&gt;plane, pos) &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">node</a>-&gt;plane[3]];</div>
<div class="line"><a id="l03778" name="l03778"></a><span class="lineno"> 3778</span>    }</div>
<div class="line"><a id="l03779" name="l03779"></a><span class="lineno"> 3779</span>    <span class="keywordflow">return</span> num == -1; <span class="comment">// true if empty, false if solid (shadowed)</span></div>
<div class="line"><a id="l03780" name="l03780"></a><span class="lineno"> 3780</span>}</div>
</div>
<div class="line"><a id="l03781" name="l03781"></a><span class="lineno"> 3781</span> </div>
<div class="foldopen" id="foldopen03782" data-start="{" data-end="}">
<div class="line"><a id="l03782" name="l03782"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a2c170ee60e8a7de85e994d31d60d84d8"> 3782</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a2c170ee60e8a7de85e994d31d60d84d8">Mod_GenerateLightmaps_SamplePoint</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> *pos, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>, <span class="keywordtype">float</span> *sample, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numoffsets</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="cl__input_8c.html#a9846c7c601c7738ac142475d9795b78f">offsets</a>)</div>
<div class="line"><a id="l03783" name="l03783"></a><span class="lineno"> 3783</span>{</div>
<div class="line"><a id="l03784" name="l03784"></a><span class="lineno"> 3784</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l03785" name="l03785"></a><span class="lineno"> 3785</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[3];</div>
<div class="line"><a id="l03786" name="l03786"></a><span class="lineno"> 3786</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[3];</div>
<div class="line"><a id="l03787" name="l03787"></a><span class="lineno"> 3787</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">offsetpos</a>[3];</div>
<div class="line"><a id="l03788" name="l03788"></a><span class="lineno"> 3788</span>    <span class="keywordtype">float</span> dist;</div>
<div class="line"><a id="l03789" name="l03789"></a><span class="lineno"> 3789</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a>;</div>
<div class="line"><a id="l03790" name="l03790"></a><span class="lineno"> 3790</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>;</div>
<div class="line"><a id="l03791" name="l03791"></a><span class="lineno"> 3791</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">offsetindex</a>;</div>
<div class="line"><a id="l03792" name="l03792"></a><span class="lineno"> 3792</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hits</a>;</div>
<div class="line"><a id="l03793" name="l03793"></a><span class="lineno"> 3793</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tests</a>;</div>
<div class="line"><a id="l03794" name="l03794"></a><span class="lineno"> 3794</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structlightmaplight__t.html">lightmaplight_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>;</div>
<div class="line"><a id="l03795" name="l03795"></a><span class="lineno"> 3795</span>    <a class="code hl_struct" href="structtrace__t.html">trace_t</a> trace;</div>
<div class="line"><a id="l03796" name="l03796"></a><span class="lineno"> 3796</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5*3;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03797" name="l03797"></a><span class="lineno"> 3797</span>        sample[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0.0f;</div>
<div class="line"><a id="l03798" name="l03798"></a><span class="lineno"> 3798</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a> = <a class="code hl_variable" href="model__shared_8c.html#a95d44d041fbaf2dcad39719ef1878d8d">mod_generatelightmaps_lightinfo</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="model__shared_8c.html#ab612ba381a094a3bc8c849be3d9ae903">mod_generatelightmaps_numlights</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>++)</div>
<div class="line"><a id="l03799" name="l03799"></a><span class="lineno"> 3799</span>    {</div>
<div class="line"><a id="l03800" name="l03800"></a><span class="lineno"> 3800</span>        <span class="comment">//R_SampleRTLights(pos, sample, numoffsets, offsets);</span></div>
<div class="line"><a id="l03801" name="l03801"></a><span class="lineno"> 3801</span>        <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;origin, pos, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>);</div>
<div class="line"><a id="l03802" name="l03802"></a><span class="lineno"> 3802</span>        <span class="comment">// don&#39;t accept light from behind a surface, it causes bad shading</span></div>
<div class="line"><a id="l03803" name="l03803"></a><span class="lineno"> 3803</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a> &amp;&amp; <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>) &lt;= 0)</div>
<div class="line"><a id="l03804" name="l03804"></a><span class="lineno"> 3804</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03805" name="l03805"></a><span class="lineno"> 3805</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a> = <a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>);</div>
<div class="line"><a id="l03806" name="l03806"></a><span class="lineno"> 3806</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;radius2)</div>
<div class="line"><a id="l03807" name="l03807"></a><span class="lineno"> 3807</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03808" name="l03808"></a><span class="lineno"> 3808</span>        dist = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a>) * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;iradius;</div>
<div class="line"><a id="l03809" name="l03809"></a><span class="lineno"> 3809</span>        <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> = dist &lt; 1 ? ((1.0f - dist) * <a class="code hl_variable" href="model__shared_8c.html#ac983b35605fe044369c676ce33b58061">r_shadow_lightattenuationlinearscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> / (<a class="code hl_variable" href="model__shared_8c.html#a0f3acc72b271530ae45ed8b06f011976">r_shadow_lightattenuationdividebias</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> + dist*dist)) : 0;</div>
<div class="line"><a id="l03810" name="l03810"></a><span class="lineno"> 3810</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> &lt;= 0)</div>
<div class="line"><a id="l03811" name="l03811"></a><span class="lineno"> 3811</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03812" name="l03812"></a><span class="lineno"> 3812</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a> &amp;&amp; <a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a>-&gt;TraceLine &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numoffsets</a> &gt; 0)</div>
<div class="line"><a id="l03813" name="l03813"></a><span class="lineno"> 3813</span>        {</div>
<div class="line"><a id="l03814" name="l03814"></a><span class="lineno"> 3814</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hits</a> = 0;</div>
<div class="line"><a id="l03815" name="l03815"></a><span class="lineno"> 3815</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tests</a> = 1;</div>
<div class="line"><a id="l03816" name="l03816"></a><span class="lineno"> 3816</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="model__shared_8c.html#aeb0c26221a3458c9cb25fa8ead17e46e">Mod_GenerateLightmaps_SamplePoint_SVBSP</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;svbsp, pos))</div>
<div class="line"><a id="l03817" name="l03817"></a><span class="lineno"> 3817</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hits</a>++;</div>
<div class="line"><a id="l03818" name="l03818"></a><span class="lineno"> 3818</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">offsetindex</a> = 1;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">offsetindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numoffsets</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">offsetindex</a>++)</div>
<div class="line"><a id="l03819" name="l03819"></a><span class="lineno"> 3819</span>            {</div>
<div class="line"><a id="l03820" name="l03820"></a><span class="lineno"> 3820</span>                <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(pos, <a class="code hl_variable" href="cl__input_8c.html#a9846c7c601c7738ac142475d9795b78f">offsets</a> + 3*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">offsetindex</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">offsetpos</a>);</div>
<div class="line"><a id="l03821" name="l03821"></a><span class="lineno"> 3821</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>)</div>
<div class="line"><a id="l03822" name="l03822"></a><span class="lineno"> 3822</span>                {</div>
<div class="line"><a id="l03823" name="l03823"></a><span class="lineno"> 3823</span>                    <span class="comment">// for light grid we&#39;d better check visibility of the offset point</span></div>
<div class="line"><a id="l03824" name="l03824"></a><span class="lineno"> 3824</span>                    <a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a>-&gt;TraceLine(<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;trace, pos, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">offsetpos</a>, <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a>, 0, <a class="code hl_define" href="model__brush_8h.html#a92eb2c00b3276aef285cf43b305a43da">MATERIALFLAGMASK_TRANSLUCENT</a> | <a class="code hl_define" href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a>);</div>
<div class="line"><a id="l03825" name="l03825"></a><span class="lineno"> 3825</span>                    <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a> &lt; 1)</div>
<div class="line"><a id="l03826" name="l03826"></a><span class="lineno"> 3826</span>                        <a class="code hl_define" href="mathlib_8h.html#a4d2bc0c336e3e2a9b13448341ab83c10">VectorLerp</a>(pos, trace.<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">offsetpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">offsetpos</a>);</div>
<div class="line"><a id="l03827" name="l03827"></a><span class="lineno"> 3827</span>                }</div>
<div class="line"><a id="l03828" name="l03828"></a><span class="lineno"> 3828</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tests</a>++;</div>
<div class="line"><a id="l03829" name="l03829"></a><span class="lineno"> 3829</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="model__shared_8c.html#aeb0c26221a3458c9cb25fa8ead17e46e">Mod_GenerateLightmaps_SamplePoint_SVBSP</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;svbsp, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">offsetpos</a>))</div>
<div class="line"><a id="l03830" name="l03830"></a><span class="lineno"> 3830</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hits</a>++;</div>
<div class="line"><a id="l03831" name="l03831"></a><span class="lineno"> 3831</span>            }</div>
<div class="line"><a id="l03832" name="l03832"></a><span class="lineno"> 3832</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hits</a>)</div>
<div class="line"><a id="l03833" name="l03833"></a><span class="lineno"> 3833</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03834" name="l03834"></a><span class="lineno"> 3834</span>            <span class="comment">// scale intensity according to how many rays succeeded</span></div>
<div class="line"><a id="l03835" name="l03835"></a><span class="lineno"> 3835</span>            <span class="comment">// we know one test is valid, half of the rest will fail...</span></div>
<div class="line"><a id="l03836" name="l03836"></a><span class="lineno"> 3836</span>            <span class="comment">//if (normal &amp;&amp; tests &gt; 1)</span></div>
<div class="line"><a id="l03837" name="l03837"></a><span class="lineno"> 3837</span>            <span class="comment">//  intensity *= (tests - 1.0f) / tests;</span></div>
<div class="line"><a id="l03838" name="l03838"></a><span class="lineno"> 3838</span>            <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> *= (<a class="code hl_variable" href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hits</a> / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tests</a>;</div>
<div class="line"><a id="l03839" name="l03839"></a><span class="lineno"> 3839</span>        }</div>
<div class="line"><a id="l03840" name="l03840"></a><span class="lineno"> 3840</span>        <span class="comment">// scale down intensity to add to both ambient and diffuse</span></div>
<div class="line"><a id="l03841" name="l03841"></a><span class="lineno"> 3841</span>        <span class="comment">//intensity *= 0.5f;</span></div>
<div class="line"><a id="l03842" name="l03842"></a><span class="lineno"> 3842</span>        <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>);</div>
<div class="line"><a id="l03843" name="l03843"></a><span class="lineno"> 3843</span>        <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightinfo</a>-&gt;color, <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l03844" name="l03844"></a><span class="lineno"> 3844</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(sample    , 0.5f            , <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, sample    );</div>
<div class="line"><a id="l03845" name="l03845"></a><span class="lineno"> 3845</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(sample + 3, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[0], <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, sample + 3);</div>
<div class="line"><a id="l03846" name="l03846"></a><span class="lineno"> 3846</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(sample + 6, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[1], <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, sample + 6);</div>
<div class="line"><a id="l03847" name="l03847"></a><span class="lineno"> 3847</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(sample + 9, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[2], <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, sample + 9);</div>
<div class="line"><a id="l03848" name="l03848"></a><span class="lineno"> 3848</span>        <span class="comment">// calculate a weighted average light direction as well</span></div>
<div class="line"><a id="l03849" name="l03849"></a><span class="lineno"> 3849</span>        <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> *= <a class="code hl_define" href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l03850" name="l03850"></a><span class="lineno"> 3850</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(sample + 12, <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>, sample + 12);</div>
<div class="line"><a id="l03851" name="l03851"></a><span class="lineno"> 3851</span>    }</div>
<div class="line"><a id="l03852" name="l03852"></a><span class="lineno"> 3852</span>}</div>
</div>
<div class="line"><a id="l03853" name="l03853"></a><span class="lineno"> 3853</span> </div>
<div class="foldopen" id="foldopen03854" data-start="{" data-end="}">
<div class="line"><a id="l03854" name="l03854"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a921a86267c44c2b1011772777481a240"> 3854</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a921a86267c44c2b1011772777481a240">Mod_GenerateLightmaps_LightmapSample</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> *pos, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *lm_bgr, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *lm_dir)</div>
<div class="line"><a id="l03855" name="l03855"></a><span class="lineno"> 3855</span>{</div>
<div class="line"><a id="l03856" name="l03856"></a><span class="lineno"> 3856</span>    <span class="keywordtype">float</span> sample[5*3];</div>
<div class="line"><a id="l03857" name="l03857"></a><span class="lineno"> 3857</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[3];</div>
<div class="line"><a id="l03858" name="l03858"></a><span class="lineno"> 3858</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[3];</div>
<div class="line"><a id="l03859" name="l03859"></a><span class="lineno"> 3859</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>;</div>
<div class="line"><a id="l03860" name="l03860"></a><span class="lineno"> 3860</span>    <a class="code hl_function" href="model__shared_8c.html#a2c170ee60e8a7de85e994d31d60d84d8">Mod_GenerateLightmaps_SamplePoint</a>(pos, <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>, sample, <a class="code hl_variable" href="model__shared_8c.html#aab99691470aed3c906207c7628aee05a">mod_generatelightmaps_numoffsets</a>[0], <a class="code hl_variable" href="model__shared_8c.html#aa8e1a854d6d64519897f2f0187fffe01">mod_generatelightmaps_offsets</a>[0][0]);</div>
<div class="line"><a id="l03861" name="l03861"></a><span class="lineno"> 3861</span>    <span class="comment">//VectorSet(dir, sample[3] + sample[4] + sample[5], sample[6] + sample[7] + sample[8], sample[9] + sample[10] + sample[11]);</span></div>
<div class="line"><a id="l03862" name="l03862"></a><span class="lineno"> 3862</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(sample + 12, <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>);</div>
<div class="line"><a id="l03863" name="l03863"></a><span class="lineno"> 3863</span>    <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>);</div>
<div class="line"><a id="l03864" name="l03864"></a><span class="lineno"> 3864</span>    <span class="comment">//VectorAdd(dir, normal, dir);</span></div>
<div class="line"><a id="l03865" name="l03865"></a><span class="lineno"> 3865</span>    <span class="comment">//VectorNormalize(dir);</span></div>
<div class="line"><a id="l03866" name="l03866"></a><span class="lineno"> 3866</span>    <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> = <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>);</div>
<div class="line"><a id="l03867" name="l03867"></a><span class="lineno"> 3867</span>    <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0, <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>) * 255.0f;</div>
<div class="line"><a id="l03868" name="l03868"></a><span class="lineno"> 3868</span>    <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(sample, <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l03869" name="l03869"></a><span class="lineno"> 3869</span>    <span class="comment">//VectorCopy(normal, dir);</span></div>
<div class="line"><a id="l03870" name="l03870"></a><span class="lineno"> 3870</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>, (<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[0]+1.0f)*127.5f, (<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[1]+1.0f)*127.5f, (<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[2]+1.0f)*127.5f);</div>
<div class="line"><a id="l03871" name="l03871"></a><span class="lineno"> 3871</span>    lm_bgr[0] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0.0f, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2], 255.0f);</div>
<div class="line"><a id="l03872" name="l03872"></a><span class="lineno"> 3872</span>    lm_bgr[1] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0.0f, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1], 255.0f);</div>
<div class="line"><a id="l03873" name="l03873"></a><span class="lineno"> 3873</span>    lm_bgr[2] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0.0f, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0], 255.0f);</div>
<div class="line"><a id="l03874" name="l03874"></a><span class="lineno"> 3874</span>    lm_bgr[3] = 255;</div>
<div class="line"><a id="l03875" name="l03875"></a><span class="lineno"> 3875</span>    lm_dir[0] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[2];</div>
<div class="line"><a id="l03876" name="l03876"></a><span class="lineno"> 3876</span>    lm_dir[1] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[1];</div>
<div class="line"><a id="l03877" name="l03877"></a><span class="lineno"> 3877</span>    lm_dir[2] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[0];</div>
<div class="line"><a id="l03878" name="l03878"></a><span class="lineno"> 3878</span>    lm_dir[3] = 255;</div>
<div class="line"><a id="l03879" name="l03879"></a><span class="lineno"> 3879</span>}</div>
</div>
<div class="line"><a id="l03880" name="l03880"></a><span class="lineno"> 3880</span> </div>
<div class="foldopen" id="foldopen03881" data-start="{" data-end="}">
<div class="line"><a id="l03881" name="l03881"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a6131839eb1ffee2234a2d1caf1a63591"> 3881</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a6131839eb1ffee2234a2d1caf1a63591">Mod_GenerateLightmaps_VertexSample</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> *pos, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>, <span class="keywordtype">float</span> *vertex_color)</div>
<div class="line"><a id="l03882" name="l03882"></a><span class="lineno"> 3882</span>{</div>
<div class="line"><a id="l03883" name="l03883"></a><span class="lineno"> 3883</span>    <span class="keywordtype">float</span> sample[5*3];</div>
<div class="line"><a id="l03884" name="l03884"></a><span class="lineno"> 3884</span>    <a class="code hl_function" href="model__shared_8c.html#a2c170ee60e8a7de85e994d31d60d84d8">Mod_GenerateLightmaps_SamplePoint</a>(pos, <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>, sample, <a class="code hl_variable" href="model__shared_8c.html#aab99691470aed3c906207c7628aee05a">mod_generatelightmaps_numoffsets</a>[1], <a class="code hl_variable" href="model__shared_8c.html#aa8e1a854d6d64519897f2f0187fffe01">mod_generatelightmaps_offsets</a>[1][0]);</div>
<div class="line"><a id="l03885" name="l03885"></a><span class="lineno"> 3885</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(sample, vertex_color);</div>
<div class="line"><a id="l03886" name="l03886"></a><span class="lineno"> 3886</span>}</div>
</div>
<div class="line"><a id="l03887" name="l03887"></a><span class="lineno"> 3887</span> </div>
<div class="foldopen" id="foldopen03888" data-start="{" data-end="}">
<div class="line"><a id="l03888" name="l03888"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a641cb450c54a445b99c4221ad6cc5f23"> 3888</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a641cb450c54a445b99c4221ad6cc5f23">Mod_GenerateLightmaps_GridSample</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> *pos, <a class="code hl_struct" href="structq3dlightgrid__t.html">q3dlightgrid_t</a> *s)</div>
<div class="line"><a id="l03889" name="l03889"></a><span class="lineno"> 3889</span>{</div>
<div class="line"><a id="l03890" name="l03890"></a><span class="lineno"> 3890</span>    <span class="keywordtype">float</span> sample[5*3];</div>
<div class="line"><a id="l03891" name="l03891"></a><span class="lineno"> 3891</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambient</a>[3];</div>
<div class="line"><a id="l03892" name="l03892"></a><span class="lineno"> 3892</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>[3];</div>
<div class="line"><a id="l03893" name="l03893"></a><span class="lineno"> 3893</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[3];</div>
<div class="line"><a id="l03894" name="l03894"></a><span class="lineno"> 3894</span>    <a class="code hl_function" href="model__shared_8c.html#a2c170ee60e8a7de85e994d31d60d84d8">Mod_GenerateLightmaps_SamplePoint</a>(pos, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, sample, <a class="code hl_variable" href="model__shared_8c.html#aab99691470aed3c906207c7628aee05a">mod_generatelightmaps_numoffsets</a>[2], <a class="code hl_variable" href="model__shared_8c.html#aa8e1a854d6d64519897f2f0187fffe01">mod_generatelightmaps_offsets</a>[2][0]);</div>
<div class="line"><a id="l03895" name="l03895"></a><span class="lineno"> 3895</span>    <span class="comment">// calculate the direction we&#39;ll use to reduce the sample to a directional light source</span></div>
<div class="line"><a id="l03896" name="l03896"></a><span class="lineno"> 3896</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(sample + 12, <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>);</div>
<div class="line"><a id="l03897" name="l03897"></a><span class="lineno"> 3897</span>    <span class="comment">//VectorSet(dir, sample[3] + sample[4] + sample[5], sample[6] + sample[7] + sample[8], sample[9] + sample[10] + sample[11]);</span></div>
<div class="line"><a id="l03898" name="l03898"></a><span class="lineno"> 3898</span>    <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>);</div>
<div class="line"><a id="l03899" name="l03899"></a><span class="lineno"> 3899</span>    <span class="comment">// extract the diffuse color along the chosen direction and scale it</span></div>
<div class="line"><a id="l03900" name="l03900"></a><span class="lineno"> 3900</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>[0] = (<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[0]*sample[3] + <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[1]*sample[6] + <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[2]*sample[ 9] + sample[ 0]) * 127.5f;</div>
<div class="line"><a id="l03901" name="l03901"></a><span class="lineno"> 3901</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>[1] = (<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[0]*sample[4] + <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[1]*sample[7] + <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[2]*sample[10] + sample[ 1]) * 127.5f;</div>
<div class="line"><a id="l03902" name="l03902"></a><span class="lineno"> 3902</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>[2] = (<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[0]*sample[5] + <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[1]*sample[8] + <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[2]*sample[11] + sample[ 2]) * 127.5f;</div>
<div class="line"><a id="l03903" name="l03903"></a><span class="lineno"> 3903</span>    <span class="comment">// scale the ambient from 0-2 to 0-255 and subtract some of diffuse</span></div>
<div class="line"><a id="l03904" name="l03904"></a><span class="lineno"> 3904</span>    <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(sample, 127.5f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambient</a>);</div>
<div class="line"><a id="l03905" name="l03905"></a><span class="lineno"> 3905</span>    <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambient</a>, -0.333f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambient</a>);</div>
<div class="line"><a id="l03906" name="l03906"></a><span class="lineno"> 3906</span>    <span class="comment">// encode to the grid format</span></div>
<div class="line"><a id="l03907" name="l03907"></a><span class="lineno"> 3907</span>    s-&gt;<a class="code hl_variable" href="structq3dlightgrid__t.html#a58fadbbd27f024d91b69702129e7b1f4">ambientrgb</a>[0] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambient</a>[0], 255.0f);</div>
<div class="line"><a id="l03908" name="l03908"></a><span class="lineno"> 3908</span>    s-&gt;<a class="code hl_variable" href="structq3dlightgrid__t.html#a58fadbbd27f024d91b69702129e7b1f4">ambientrgb</a>[1] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambient</a>[1], 255.0f);</div>
<div class="line"><a id="l03909" name="l03909"></a><span class="lineno"> 3909</span>    s-&gt;<a class="code hl_variable" href="structq3dlightgrid__t.html#a58fadbbd27f024d91b69702129e7b1f4">ambientrgb</a>[2] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambient</a>[2], 255.0f);</div>
<div class="line"><a id="l03910" name="l03910"></a><span class="lineno"> 3910</span>    s-&gt;<a class="code hl_variable" href="structq3dlightgrid__t.html#a36a7451fbeb15e7cda3e44669abd6543">diffusergb</a>[0] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>[0], 255.0f);</div>
<div class="line"><a id="l03911" name="l03911"></a><span class="lineno"> 3911</span>    s-&gt;<a class="code hl_variable" href="structq3dlightgrid__t.html#a36a7451fbeb15e7cda3e44669abd6543">diffusergb</a>[1] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>[1], 255.0f);</div>
<div class="line"><a id="l03912" name="l03912"></a><span class="lineno"> 3912</span>    s-&gt;<a class="code hl_variable" href="structq3dlightgrid__t.html#a36a7451fbeb15e7cda3e44669abd6543">diffusergb</a>[2] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>[2], 255.0f);</div>
<div class="line"><a id="l03913" name="l03913"></a><span class="lineno"> 3913</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[2] &gt;= 0.99f) {s-&gt;<a class="code hl_variable" href="structq3dlightgrid__t.html#aff385a772466d212a0953ce6f794f9c3">diffusepitch</a> = 0;s-&gt;<a class="code hl_variable" href="structq3dlightgrid__t.html#a5e757a63a2bd94ec41a0e520c5927b0b">diffuseyaw</a> = 0;}</div>
<div class="line"><a id="l03914" name="l03914"></a><span class="lineno"> 3914</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[2] &lt;= -0.99f) {s-&gt;<a class="code hl_variable" href="structq3dlightgrid__t.html#aff385a772466d212a0953ce6f794f9c3">diffusepitch</a> = 128;s-&gt;<a class="code hl_variable" href="structq3dlightgrid__t.html#a5e757a63a2bd94ec41a0e520c5927b0b">diffuseyaw</a> = 0;}</div>
<div class="line"><a id="l03915" name="l03915"></a><span class="lineno"> 3915</span>    <span class="keywordflow">else</span> {s-&gt;<a class="code hl_variable" href="structq3dlightgrid__t.html#aff385a772466d212a0953ce6f794f9c3">diffusepitch</a> = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">acos</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[2]) * (127.5f/<a class="code hl_define" href="mathlib_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>));s-&gt;<a class="code hl_variable" href="structq3dlightgrid__t.html#a5e757a63a2bd94ec41a0e520c5927b0b">diffuseyaw</a> = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atan2</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[1], <a class="code hl_variable" href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>[0]) * (127.5f/<a class="code hl_define" href="mathlib_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>));}</div>
<div class="line"><a id="l03916" name="l03916"></a><span class="lineno"> 3916</span>}</div>
</div>
<div class="line"><a id="l03917" name="l03917"></a><span class="lineno"> 3917</span> </div>
<div class="foldopen" id="foldopen03918" data-start="{" data-end="}">
<div class="line"><a id="l03918" name="l03918"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a64515e99c29efe9c5d6d3b78c2239d2e"> 3918</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a64515e99c29efe9c5d6d3b78c2239d2e">Mod_GenerateLightmaps_InitSampleOffsets</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model)</div>
<div class="line"><a id="l03919" name="l03919"></a><span class="lineno"> 3919</span>{</div>
<div class="line"><a id="l03920" name="l03920"></a><span class="lineno"> 3920</span>    <span class="keywordtype">float</span> radius[3];</div>
<div class="line"><a id="l03921" name="l03921"></a><span class="lineno"> 3921</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>[3];</div>
<div class="line"><a id="l03922" name="l03922"></a><span class="lineno"> 3922</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>;</div>
<div class="line"><a id="l03923" name="l03923"></a><span class="lineno"> 3923</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="model__shared_8c.html#aa8e1a854d6d64519897f2f0187fffe01">mod_generatelightmaps_offsets</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="model__shared_8c.html#aa8e1a854d6d64519897f2f0187fffe01">mod_generatelightmaps_offsets</a>));</div>
<div class="line"><a id="l03924" name="l03924"></a><span class="lineno"> 3924</span>    <a class="code hl_variable" href="model__shared_8c.html#aab99691470aed3c906207c7628aee05a">mod_generatelightmaps_numoffsets</a>[0] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_define" href="model__shared_8c.html#a6176e32177c906b13985aab3dc4ca40f">MAX_LIGHTMAPSAMPLES</a>, <a class="code hl_variable" href="model__shared_8c.html#ad795742131a032a7a1ee611990d79d59">mod_generatelightmaps_lightmapsamples</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>);</div>
<div class="line"><a id="l03925" name="l03925"></a><span class="lineno"> 3925</span>    <a class="code hl_variable" href="model__shared_8c.html#aab99691470aed3c906207c7628aee05a">mod_generatelightmaps_numoffsets</a>[1] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_define" href="model__shared_8c.html#a6176e32177c906b13985aab3dc4ca40f">MAX_LIGHTMAPSAMPLES</a>, <a class="code hl_variable" href="model__shared_8c.html#ab800e60ac9897a359da21d16f842679d">mod_generatelightmaps_vertexsamples</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>);</div>
<div class="line"><a id="l03926" name="l03926"></a><span class="lineno"> 3926</span>    <a class="code hl_variable" href="model__shared_8c.html#aab99691470aed3c906207c7628aee05a">mod_generatelightmaps_numoffsets</a>[2] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_define" href="model__shared_8c.html#a6176e32177c906b13985aab3dc4ca40f">MAX_LIGHTMAPSAMPLES</a>, <a class="code hl_variable" href="model__shared_8c.html#a333c56a919ff09edad1477b17503a76d">mod_generatelightmaps_gridsamples</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>);</div>
<div class="line"><a id="l03927" name="l03927"></a><span class="lineno"> 3927</span>    radius[0] = <a class="code hl_variable" href="model__shared_8c.html#a93bf405698b289908d28a150f04f0318">mod_generatelightmaps_lightmapradius</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l03928" name="l03928"></a><span class="lineno"> 3928</span>    radius[1] = <a class="code hl_variable" href="model__shared_8c.html#af88e07f57fba40d3a55cb9f8b40ba9c2">mod_generatelightmaps_vertexradius</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l03929" name="l03929"></a><span class="lineno"> 3929</span>    radius[2] = <a class="code hl_variable" href="model__shared_8c.html#afce66a9fd24e9b70739e12074b32c9c8">mod_generatelightmaps_gridradius</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l03930" name="l03930"></a><span class="lineno"> 3930</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03931" name="l03931"></a><span class="lineno"> 3931</span>    {</div>
<div class="line"><a id="l03932" name="l03932"></a><span class="lineno"> 3932</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 1;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; <a class="code hl_variable" href="model__shared_8c.html#aab99691470aed3c906207c7628aee05a">mod_generatelightmaps_numoffsets</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l03933" name="l03933"></a><span class="lineno"> 3933</span>        {</div>
<div class="line"><a id="l03934" name="l03934"></a><span class="lineno"> 3934</span>            <a class="code hl_define" href="mathlib_8h.html#a24ec9096b042003debd06be7e6425ff3">VectorRandom</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>);</div>
<div class="line"><a id="l03935" name="l03935"></a><span class="lineno"> 3935</span>            <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, radius[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code hl_variable" href="model__shared_8c.html#aa8e1a854d6d64519897f2f0187fffe01">mod_generatelightmaps_offsets</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>][<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]);</div>
<div class="line"><a id="l03936" name="l03936"></a><span class="lineno"> 3936</span>        }</div>
<div class="line"><a id="l03937" name="l03937"></a><span class="lineno"> 3937</span>    }</div>
<div class="line"><a id="l03938" name="l03938"></a><span class="lineno"> 3938</span>}</div>
</div>
<div class="line"><a id="l03939" name="l03939"></a><span class="lineno"> 3939</span> </div>
<div class="foldopen" id="foldopen03940" data-start="{" data-end="}">
<div class="line"><a id="l03940" name="l03940"></a><span class="lineno"><a class="line" href="model__shared_8c.html#adb53fe2737004dc5876f8b107e080e6f"> 3940</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#adb53fe2737004dc5876f8b107e080e6f">Mod_GenerateLightmaps_DestroyLightmaps</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model)</div>
<div class="line"><a id="l03941" name="l03941"></a><span class="lineno"> 3941</span>{</div>
<div class="line"><a id="l03942" name="l03942"></a><span class="lineno"> 3942</span>    <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>;</div>
<div class="line"><a id="l03943" name="l03943"></a><span class="lineno"> 3943</span>    <span class="keywordtype">int</span> surfaceindex;</div>
<div class="line"><a id="l03944" name="l03944"></a><span class="lineno"> 3944</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l03945" name="l03945"></a><span class="lineno"> 3945</span>    <span class="keywordflow">for</span> (surfaceindex = 0;surfaceindex &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>;surfaceindex++)</div>
<div class="line"><a id="l03946" name="l03946"></a><span class="lineno"> 3946</span>    {</div>
<div class="line"><a id="l03947" name="l03947"></a><span class="lineno"> 3947</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + surfaceindex;</div>
<div class="line"><a id="l03948" name="l03948"></a><span class="lineno"> 3948</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;<a class="code hl_variable" href="structmsurface__t.html#af83214878e2f4b322aaa26ae45506d32">lightmaptexture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03949" name="l03949"></a><span class="lineno"> 3949</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;deluxemaptexture = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03950" name="l03950"></a><span class="lineno"> 3950</span>    }</div>
<div class="line"><a id="l03951" name="l03951"></a><span class="lineno"> 3951</span>    <span class="keywordflow">if</span> (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a4c41214172127c935805b23659258e9f">data_lightmaps</a>)</div>
<div class="line"><a id="l03952" name="l03952"></a><span class="lineno"> 3952</span>    {</div>
<div class="line"><a id="l03953" name="l03953"></a><span class="lineno"> 3953</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a9a6c3e1fc72135d6dc9581c9bd7f1f88">num_mergedlightmaps</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03954" name="l03954"></a><span class="lineno"> 3954</span>            <span class="keywordflow">if</span> (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a4c41214172127c935805b23659258e9f">data_lightmaps</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a id="l03955" name="l03955"></a><span class="lineno"> 3955</span>                <a class="code hl_function" href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a4c41214172127c935805b23659258e9f">data_lightmaps</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l03956" name="l03956"></a><span class="lineno"> 3956</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a4c41214172127c935805b23659258e9f">data_lightmaps</a>);</div>
<div class="line"><a id="l03957" name="l03957"></a><span class="lineno"> 3957</span>        model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a4c41214172127c935805b23659258e9f">data_lightmaps</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03958" name="l03958"></a><span class="lineno"> 3958</span>    }</div>
<div class="line"><a id="l03959" name="l03959"></a><span class="lineno"> 3959</span>    <span class="keywordflow">if</span> (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#aab1b30ab9ae770bf3d403eae5ce0aa01">data_deluxemaps</a>)</div>
<div class="line"><a id="l03960" name="l03960"></a><span class="lineno"> 3960</span>    {</div>
<div class="line"><a id="l03961" name="l03961"></a><span class="lineno"> 3961</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a9a6c3e1fc72135d6dc9581c9bd7f1f88">num_mergedlightmaps</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03962" name="l03962"></a><span class="lineno"> 3962</span>            <span class="keywordflow">if</span> (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#aab1b30ab9ae770bf3d403eae5ce0aa01">data_deluxemaps</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a id="l03963" name="l03963"></a><span class="lineno"> 3963</span>                <a class="code hl_function" href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#aab1b30ab9ae770bf3d403eae5ce0aa01">data_deluxemaps</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l03964" name="l03964"></a><span class="lineno"> 3964</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#aab1b30ab9ae770bf3d403eae5ce0aa01">data_deluxemaps</a>);</div>
<div class="line"><a id="l03965" name="l03965"></a><span class="lineno"> 3965</span>        model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#aab1b30ab9ae770bf3d403eae5ce0aa01">data_deluxemaps</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03966" name="l03966"></a><span class="lineno"> 3966</span>    }</div>
<div class="line"><a id="l03967" name="l03967"></a><span class="lineno"> 3967</span>}</div>
</div>
<div class="line"><a id="l03968" name="l03968"></a><span class="lineno"> 3968</span> </div>
<div class="foldopen" id="foldopen03969" data-start="{" data-end="}">
<div class="line"><a id="l03969" name="l03969"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a61017a9ce02a9281dd3d52d7be81228a"> 3969</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a61017a9ce02a9281dd3d52d7be81228a">Mod_GenerateLightmaps_UnweldTriangles</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model)</div>
<div class="line"><a id="l03970" name="l03970"></a><span class="lineno"> 3970</span>{</div>
<div class="line"><a id="l03971" name="l03971"></a><span class="lineno"> 3971</span>    <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>;</div>
<div class="line"><a id="l03972" name="l03972"></a><span class="lineno"> 3972</span>    <span class="keywordtype">int</span> surfaceindex;</div>
<div class="line"><a id="l03973" name="l03973"></a><span class="lineno"> 3973</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>;</div>
<div class="line"><a id="l03974" name="l03974"></a><span class="lineno"> 3974</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>;</div>
<div class="line"><a id="l03975" name="l03975"></a><span class="lineno"> 3975</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l03976" name="l03976"></a><span class="lineno"> 3976</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>;</div>
<div class="line"><a id="l03977" name="l03977"></a><span class="lineno"> 3977</span>    <a class="code hl_struct" href="structsurfmesh__t.html">surfmesh_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>;</div>
<div class="line"><a id="l03978" name="l03978"></a><span class="lineno"> 3978</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;</div>
<div class="line"><a id="l03979" name="l03979"></a><span class="lineno"> 3979</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;</div>
<div class="line"><a id="l03980" name="l03980"></a><span class="lineno"> 3980</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>;</div>
<div class="line"><a id="l03981" name="l03981"></a><span class="lineno"> 3981</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.num_triangles;</div>
<div class="line"><a id="l03982" name="l03982"></a><span class="lineno"> 3982</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.num_triangles * 3;</div>
<div class="line"><a id="l03983" name="l03983"></a><span class="lineno"> 3983</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> = 0;</div>
<div class="line"><a id="l03984" name="l03984"></a><span class="lineno"> 3984</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]);</div>
<div class="line"><a id="l03985" name="l03985"></a><span class="lineno"> 3985</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]);</div>
<div class="line"><a id="l03986" name="l03986"></a><span class="lineno"> 3986</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]);</div>
<div class="line"><a id="l03987" name="l03987"></a><span class="lineno"> 3987</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]);</div>
<div class="line"><a id="l03988" name="l03988"></a><span class="lineno"> 3988</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]);</div>
<div class="line"><a id="l03989" name="l03989"></a><span class="lineno"> 3989</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]);</div>
<div class="line"><a id="l03990" name="l03990"></a><span class="lineno"> 3990</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[4]);</div>
<div class="line"><a id="l03991" name="l03991"></a><span class="lineno"> 3991</span>    <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>);</div>
<div class="line"><a id="l03992" name="l03992"></a><span class="lineno"> 3992</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]);</div>
<div class="line"><a id="l03993" name="l03993"></a><span class="lineno"> 3993</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]);</div>
<div class="line"><a id="l03994" name="l03994"></a><span class="lineno"> 3994</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]);</div>
<div class="line"><a id="l03995" name="l03995"></a><span class="lineno"> 3995</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]);</div>
<div class="line"><a id="l03996" name="l03996"></a><span class="lineno"> 3996</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]);</div>
<div class="line"><a id="l03997" name="l03997"></a><span class="lineno"> 3997</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]);</div>
<div class="line"><a id="l03998" name="l03998"></a><span class="lineno"> 3998</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[4]);</div>
<div class="line"><a id="l03999" name="l03999"></a><span class="lineno"> 3999</span>    <span class="keywordflow">if</span> (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> &gt; 65536)</div>
<div class="line"><a id="l04000" name="l04000"></a><span class="lineno"> 4000</span>        model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04001" name="l04001"></a><span class="lineno"> 4001</span> </div>
<div class="line"><a id="l04002" name="l04002"></a><span class="lineno"> 4002</span>    <span class="keywordflow">if</span> (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a85cf7a011550b759899f963c1f68c98b">data_element3i_indexbuffer</a> &amp;&amp; !model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a85cf7a011550b759899f963c1f68c98b">data_element3i_indexbuffer</a>-&gt;<a class="code hl_variable" href="structr__meshbuffer__t.html#aa3e0e0f5c67b56d5589a8a183641c7cf">isdynamic</a>)</div>
<div class="line"><a id="l04003" name="l04003"></a><span class="lineno"> 4003</span>        <a class="code hl_function" href="gl__backend_8c.html#aaaba6ef1e8b54d0694de07639072286d">R_Mesh_DestroyMeshBuffer</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a85cf7a011550b759899f963c1f68c98b">data_element3i_indexbuffer</a>);</div>
<div class="line"><a id="l04004" name="l04004"></a><span class="lineno"> 4004</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a85cf7a011550b759899f963c1f68c98b">data_element3i_indexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04005" name="l04005"></a><span class="lineno"> 4005</span>    <span class="keywordflow">if</span> (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af47d08768f0e0a846c272a9a8d443d03">data_element3s_indexbuffer</a> &amp;&amp; !model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af47d08768f0e0a846c272a9a8d443d03">data_element3s_indexbuffer</a>-&gt;<a class="code hl_variable" href="structr__meshbuffer__t.html#aa3e0e0f5c67b56d5589a8a183641c7cf">isdynamic</a>)</div>
<div class="line"><a id="l04006" name="l04006"></a><span class="lineno"> 4006</span>        <a class="code hl_function" href="gl__backend_8c.html#aaaba6ef1e8b54d0694de07639072286d">R_Mesh_DestroyMeshBuffer</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af47d08768f0e0a846c272a9a8d443d03">data_element3s_indexbuffer</a>);</div>
<div class="line"><a id="l04007" name="l04007"></a><span class="lineno"> 4007</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af47d08768f0e0a846c272a9a8d443d03">data_element3s_indexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04008" name="l04008"></a><span class="lineno"> 4008</span>    <span class="keywordflow">if</span> (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> &amp;&amp; !model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a>-&gt;<a class="code hl_variable" href="structr__meshbuffer__t.html#aa3e0e0f5c67b56d5589a8a183641c7cf">isdynamic</a>)</div>
<div class="line"><a id="l04009" name="l04009"></a><span class="lineno"> 4009</span>        <a class="code hl_function" href="gl__backend_8c.html#aaaba6ef1e8b54d0694de07639072286d">R_Mesh_DestroyMeshBuffer</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a>);</div>
<div class="line"><a id="l04010" name="l04010"></a><span class="lineno"> 4010</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04011" name="l04011"></a><span class="lineno"> 4011</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a0064f2925b91731163e286f6ff0f5a76">data_svector3f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04012" name="l04012"></a><span class="lineno"> 4012</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7fc323b763071fa72a24bd51b88e1f0c">data_tvector3f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04013" name="l04013"></a><span class="lineno"> 4013</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a1fc3a10501c13b8da40b66116d8818b7">data_normal3f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04014" name="l04014"></a><span class="lineno"> 4014</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7767026390ac39c88f7ce4d6f6432bfd">data_texcoordtexture2f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04015" name="l04015"></a><span class="lineno"> 4015</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#acc34f19933b25ec4138101d2da7c0402">data_texcoordlightmap2f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04016" name="l04016"></a><span class="lineno"> 4016</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a14978807f299ff4eb08fbc95f12f4390">data_lightmapcolor4f_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04017" name="l04017"></a><span class="lineno"> 4017</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7acee012733eb5e093982690193053ed">data_skeletalindex4ub_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04018" name="l04018"></a><span class="lineno"> 4018</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ae20f7ffe94f47df81dac465ec2888d2f">data_skeletalweight4ub_vertexbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04019" name="l04019"></a><span class="lineno"> 4019</span> </div>
<div class="line"><a id="l04020" name="l04020"></a><span class="lineno"> 4020</span>    <span class="comment">// convert all triangles to unique vertex data</span></div>
<div class="line"><a id="l04021" name="l04021"></a><span class="lineno"> 4021</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a> = 0;</div>
<div class="line"><a id="l04022" name="l04022"></a><span class="lineno"> 4022</span>    <span class="keywordflow">for</span> (surfaceindex = 0;surfaceindex &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>;surfaceindex++)</div>
<div class="line"><a id="l04023" name="l04023"></a><span class="lineno"> 4023</span>    {</div>
<div class="line"><a id="l04024" name="l04024"></a><span class="lineno"> 4024</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + surfaceindex;</div>
<div class="line"><a id="l04025" name="l04025"></a><span class="lineno"> 4025</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;<a class="code hl_variable" href="structmsurface__t.html#a81eec2e84c6ded9dcfdae62df241f9a6">num_firstvertex</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>;</div>
<div class="line"><a id="l04026" name="l04026"></a><span class="lineno"> 4026</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_vertices = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles*3;</div>
<div class="line"><a id="l04027" name="l04027"></a><span class="lineno"> 4027</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_element3i + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle*3;</div>
<div class="line"><a id="l04028" name="l04028"></a><span class="lineno"> 4028</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles*3;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04029" name="l04029"></a><span class="lineno"> 4029</span>        {</div>
<div class="line"><a id="l04030" name="l04030"></a><span class="lineno"> 4030</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l04031" name="l04031"></a><span class="lineno"> 4031</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*3+0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_vertex3f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*3+0];</div>
<div class="line"><a id="l04032" name="l04032"></a><span class="lineno"> 4032</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*3+1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_vertex3f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*3+1];</div>
<div class="line"><a id="l04033" name="l04033"></a><span class="lineno"> 4033</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*3+2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_vertex3f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*3+2];</div>
<div class="line"><a id="l04034" name="l04034"></a><span class="lineno"> 4034</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*3+0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_normal3f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*3+0];</div>
<div class="line"><a id="l04035" name="l04035"></a><span class="lineno"> 4035</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*3+1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_normal3f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*3+1];</div>
<div class="line"><a id="l04036" name="l04036"></a><span class="lineno"> 4036</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*3+2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_normal3f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*3+2];</div>
<div class="line"><a id="l04037" name="l04037"></a><span class="lineno"> 4037</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*3+0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_svector3f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*3+0];</div>
<div class="line"><a id="l04038" name="l04038"></a><span class="lineno"> 4038</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*3+1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_svector3f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*3+1];</div>
<div class="line"><a id="l04039" name="l04039"></a><span class="lineno"> 4039</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*3+2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_svector3f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*3+2];</div>
<div class="line"><a id="l04040" name="l04040"></a><span class="lineno"> 4040</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*3+0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_tvector3f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*3+0];</div>
<div class="line"><a id="l04041" name="l04041"></a><span class="lineno"> 4041</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*3+1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_tvector3f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*3+1];</div>
<div class="line"><a id="l04042" name="l04042"></a><span class="lineno"> 4042</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*3+2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_tvector3f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*3+2];</div>
<div class="line"><a id="l04043" name="l04043"></a><span class="lineno"> 4043</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*2+0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_texcoordtexture2f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*2+0];</div>
<div class="line"><a id="l04044" name="l04044"></a><span class="lineno"> 4044</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*2+1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_texcoordtexture2f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*2+1];</div>
<div class="line"><a id="l04045" name="l04045"></a><span class="lineno"> 4045</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_texcoordlightmap2f)</div>
<div class="line"><a id="l04046" name="l04046"></a><span class="lineno"> 4046</span>            {</div>
<div class="line"><a id="l04047" name="l04047"></a><span class="lineno"> 4047</span>                model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*2+0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_texcoordlightmap2f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*2+0];</div>
<div class="line"><a id="l04048" name="l04048"></a><span class="lineno"> 4048</span>                model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*2+1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_texcoordlightmap2f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*2+1];</div>
<div class="line"><a id="l04049" name="l04049"></a><span class="lineno"> 4049</span>            }</div>
<div class="line"><a id="l04050" name="l04050"></a><span class="lineno"> 4050</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_lightmapcolor4f)</div>
<div class="line"><a id="l04051" name="l04051"></a><span class="lineno"> 4051</span>            {</div>
<div class="line"><a id="l04052" name="l04052"></a><span class="lineno"> 4052</span>                model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*4+0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_lightmapcolor4f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*4+0];</div>
<div class="line"><a id="l04053" name="l04053"></a><span class="lineno"> 4053</span>                model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*4+1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_lightmapcolor4f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*4+1];</div>
<div class="line"><a id="l04054" name="l04054"></a><span class="lineno"> 4054</span>                model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*4+2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_lightmapcolor4f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*4+2];</div>
<div class="line"><a id="l04055" name="l04055"></a><span class="lineno"> 4055</span>                model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>*4+3] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldsurfmesh</a>.data_lightmapcolor4f[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertexindex</a>*4+3];</div>
<div class="line"><a id="l04056" name="l04056"></a><span class="lineno"> 4056</span>            }</div>
<div class="line"><a id="l04057" name="l04057"></a><span class="lineno"> 4057</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l04058" name="l04058"></a><span class="lineno"> 4058</span>                <a class="code hl_define" href="mathlib_8h.html#a14557f9ae9e8f7db1736479bc3eccc4b">Vector4Set</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a> + 4*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>, 1, 1, 1, 1);</div>
<div class="line"><a id="l04059" name="l04059"></a><span class="lineno"> 4059</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle*3+<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>;</div>
<div class="line"><a id="l04060" name="l04060"></a><span class="lineno"> 4060</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outvertexindex</a>++;</div>
<div class="line"><a id="l04061" name="l04061"></a><span class="lineno"> 4061</span>        }</div>
<div class="line"><a id="l04062" name="l04062"></a><span class="lineno"> 4062</span>    }</div>
<div class="line"><a id="l04063" name="l04063"></a><span class="lineno"> 4063</span>    <span class="keywordflow">if</span> (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a>)</div>
<div class="line"><a id="l04064" name="l04064"></a><span class="lineno"> 4064</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>*3;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04065" name="l04065"></a><span class="lineno"> 4065</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l04066" name="l04066"></a><span class="lineno"> 4066</span> </div>
<div class="line"><a id="l04067" name="l04067"></a><span class="lineno"> 4067</span>    <span class="comment">// find and update all submodels to use this new surfmesh data</span></div>
<div class="line"><a id="l04068" name="l04068"></a><span class="lineno"> 4068</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a12ae1e03d70e00f9b3ba4a11a2314e2e">numsubmodels</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04069" name="l04069"></a><span class="lineno"> 4069</span>        model-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a462aadc65aeffe8d8e64208e0d841f39">submodels</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;surfmesh = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>;</div>
<div class="line"><a id="l04070" name="l04070"></a><span class="lineno"> 4070</span>}</div>
</div>
<div class="line"><a id="l04071" name="l04071"></a><span class="lineno"> 4071</span> </div>
<div class="foldopen" id="foldopen04072" data-start="{" data-end="}">
<div class="line"><a id="l04072" name="l04072"></a><span class="lineno"><a class="line" href="model__shared_8c.html#abaff7135ada3e14a87abc8ab72e2478f"> 4072</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#abaff7135ada3e14a87abc8ab72e2478f">Mod_GenerateLightmaps_CreateTriangleInformation</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model)</div>
<div class="line"><a id="l04073" name="l04073"></a><span class="lineno"> 4073</span>{</div>
<div class="line"><a id="l04074" name="l04074"></a><span class="lineno"> 4074</span>    <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>;</div>
<div class="line"><a id="l04075" name="l04075"></a><span class="lineno"> 4075</span>    <span class="keywordtype">int</span> surfaceindex;</div>
<div class="line"><a id="l04076" name="l04076"></a><span class="lineno"> 4076</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l04077" name="l04077"></a><span class="lineno"> 4077</span>    <span class="keywordtype">int</span> axis;</div>
<div class="line"><a id="l04078" name="l04078"></a><span class="lineno"> 4078</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>[3];</div>
<div class="line"><a id="l04079" name="l04079"></a><span class="lineno"> 4079</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>;</div>
<div class="line"><a id="l04080" name="l04080"></a><span class="lineno"> 4080</span>    <a class="code hl_struct" href="structlightmaptriangle__t.html">lightmaptriangle_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>;</div>
<div class="line"><a id="l04081" name="l04081"></a><span class="lineno"> 4081</span>    <span class="comment">// generate lightmap triangle structs</span></div>
<div class="line"><a id="l04082" name="l04082"></a><span class="lineno"> 4082</span>    <a class="code hl_variable" href="model__shared_8c.html#aa0504c8f99deab8cc22309c607e57094">mod_generatelightmaps_lightmaptriangles</a> = (<a class="code hl_struct" href="structlightmaptriangle__t.html">lightmaptriangle_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structlightmaptriangle__t.html">lightmaptriangle_t</a>));</div>
<div class="line"><a id="l04083" name="l04083"></a><span class="lineno"> 4083</span>    <span class="keywordflow">for</span> (surfaceindex = 0;surfaceindex &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>;surfaceindex++)</div>
<div class="line"><a id="l04084" name="l04084"></a><span class="lineno"> 4084</span>    {</div>
<div class="line"><a id="l04085" name="l04085"></a><span class="lineno"> 4085</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + surfaceindex;</div>
<div class="line"><a id="l04086" name="l04086"></a><span class="lineno"> 4086</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle*3;</div>
<div class="line"><a id="l04087" name="l04087"></a><span class="lineno"> 4087</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04088" name="l04088"></a><span class="lineno"> 4088</span>        {</div>
<div class="line"><a id="l04089" name="l04089"></a><span class="lineno"> 4089</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a> = &amp;<a class="code hl_variable" href="model__shared_8c.html#aa0504c8f99deab8cc22309c607e57094">mod_generatelightmaps_lightmaptriangles</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle+<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l04090" name="l04090"></a><span class="lineno"> 4090</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;<a class="code hl_variable" href="structlightmaptriangle__t.html#adbb2208770f3661f77376bbf6c218724">triangleindex</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle+<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l04091" name="l04091"></a><span class="lineno"> 4091</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;surfaceindex = surfaceindex;</div>
<div class="line"><a id="l04092" name="l04092"></a><span class="lineno"> 4092</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a> + 3*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>*3+0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[0]);</div>
<div class="line"><a id="l04093" name="l04093"></a><span class="lineno"> 4093</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a> + 3*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>*3+1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[1]);</div>
<div class="line"><a id="l04094" name="l04094"></a><span class="lineno"> 4094</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a> + 3*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>*3+2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[2]);</div>
<div class="line"><a id="l04095" name="l04095"></a><span class="lineno"> 4095</span>            <span class="comment">// calculate bounds of triangle</span></div>
<div class="line"><a id="l04096" name="l04096"></a><span class="lineno"> 4096</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;mins[0] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[0][0], <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[1][0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[2][0]));</div>
<div class="line"><a id="l04097" name="l04097"></a><span class="lineno"> 4097</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;mins[1] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[0][1], <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[1][1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[2][1]));</div>
<div class="line"><a id="l04098" name="l04098"></a><span class="lineno"> 4098</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;mins[2] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[0][2], <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[1][2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[2][2]));</div>
<div class="line"><a id="l04099" name="l04099"></a><span class="lineno"> 4099</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;maxs[0] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[0][0], <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[1][0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[2][0]));</div>
<div class="line"><a id="l04100" name="l04100"></a><span class="lineno"> 4100</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;maxs[1] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[0][1], <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[1][1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[2][1]));</div>
<div class="line"><a id="l04101" name="l04101"></a><span class="lineno"> 4101</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;maxs[2] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[0][2], <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[1][2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[2][2]));</div>
<div class="line"><a id="l04102" name="l04102"></a><span class="lineno"> 4102</span>            <span class="comment">// pick an axial projection based on the triangle normal</span></div>
<div class="line"><a id="l04103" name="l04103"></a><span class="lineno"> 4103</span>            <a class="code hl_define" href="mathlib_8h.html#abd107e00eca870c28df1518302fee3df">TriangleNormal</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[2], <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>);</div>
<div class="line"><a id="l04104" name="l04104"></a><span class="lineno"> 4104</span>            axis = 0;</div>
<div class="line"><a id="l04105" name="l04105"></a><span class="lineno"> 4105</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>[1]) &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>[axis]))</div>
<div class="line"><a id="l04106" name="l04106"></a><span class="lineno"> 4106</span>                axis = 1;</div>
<div class="line"><a id="l04107" name="l04107"></a><span class="lineno"> 4107</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>[2]) &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>[axis]))</div>
<div class="line"><a id="l04108" name="l04108"></a><span class="lineno"> 4108</span>                axis = 2;</div>
<div class="line"><a id="l04109" name="l04109"></a><span class="lineno"> 4109</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;axis = axis;</div>
<div class="line"><a id="l04110" name="l04110"></a><span class="lineno"> 4110</span>        }</div>
<div class="line"><a id="l04111" name="l04111"></a><span class="lineno"> 4111</span>    }</div>
<div class="line"><a id="l04112" name="l04112"></a><span class="lineno"> 4112</span>}</div>
</div>
<div class="line"><a id="l04113" name="l04113"></a><span class="lineno"> 4113</span> </div>
<div class="foldopen" id="foldopen04114" data-start="{" data-end="}">
<div class="line"><a id="l04114" name="l04114"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ade8f4cc9f6f9afa412747c5cd79b1a98"> 4114</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#ade8f4cc9f6f9afa412747c5cd79b1a98">Mod_GenerateLightmaps_DestroyTriangleInformation</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model)</div>
<div class="line"><a id="l04115" name="l04115"></a><span class="lineno"> 4115</span>{</div>
<div class="line"><a id="l04116" name="l04116"></a><span class="lineno"> 4116</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__shared_8c.html#aa0504c8f99deab8cc22309c607e57094">mod_generatelightmaps_lightmaptriangles</a>)</div>
<div class="line"><a id="l04117" name="l04117"></a><span class="lineno"> 4117</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="model__shared_8c.html#aa0504c8f99deab8cc22309c607e57094">mod_generatelightmaps_lightmaptriangles</a>);</div>
<div class="line"><a id="l04118" name="l04118"></a><span class="lineno"> 4118</span>    <a class="code hl_variable" href="model__shared_8c.html#aa0504c8f99deab8cc22309c607e57094">mod_generatelightmaps_lightmaptriangles</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04119" name="l04119"></a><span class="lineno"> 4119</span>}</div>
</div>
<div class="line"><a id="l04120" name="l04120"></a><span class="lineno"> 4120</span> </div>
<div class="line"><a id="l04121" name="l04121"></a><span class="lineno"><a class="line" href="model__shared_8c.html#af364d22ecd6a1f2df7b8774dc9184252"> 4121</a></span><span class="keywordtype">float</span> <a class="code hl_variable" href="model__shared_8c.html#af364d22ecd6a1f2df7b8774dc9184252">lmaxis</a>[3][3] = {{1, 0, 0}, {0, 1, 0}, {0, 0, 1}};</div>
<div class="line"><a id="l04122" name="l04122"></a><span class="lineno"> 4122</span> </div>
<div class="foldopen" id="foldopen04123" data-start="{" data-end="}">
<div class="line"><a id="l04123" name="l04123"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a7fd1cdd3467c45e41820e2617d656023"> 4123</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a7fd1cdd3467c45e41820e2617d656023">Mod_GenerateLightmaps_CreateLightmaps</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model)</div>
<div class="line"><a id="l04124" name="l04124"></a><span class="lineno"> 4124</span>{</div>
<div class="line"><a id="l04125" name="l04125"></a><span class="lineno"> 4125</span>    <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>;</div>
<div class="line"><a id="l04126" name="l04126"></a><span class="lineno"> 4126</span>    <span class="keywordtype">int</span> surfaceindex;</div>
<div class="line"><a id="l04127" name="l04127"></a><span class="lineno"> 4127</span>    <span class="keywordtype">int</span> lightmapindex;</div>
<div class="line"><a id="l04128" name="l04128"></a><span class="lineno"> 4128</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmapnumber</a>;</div>
<div class="line"><a id="l04129" name="l04129"></a><span class="lineno"> 4129</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l04130" name="l04130"></a><span class="lineno"> 4130</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>;</div>
<div class="line"><a id="l04131" name="l04131"></a><span class="lineno"> 4131</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>;</div>
<div class="line"><a id="l04132" name="l04132"></a><span class="lineno"> 4132</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>;</div>
<div class="line"><a id="l04133" name="l04133"></a><span class="lineno"> 4133</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>;</div>
<div class="line"><a id="l04134" name="l04134"></a><span class="lineno"> 4134</span>    <span class="keywordtype">int</span> axis;</div>
<div class="line"><a id="l04135" name="l04135"></a><span class="lineno"> 4135</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis1</a>;</div>
<div class="line"><a id="l04136" name="l04136"></a><span class="lineno"> 4136</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis2</a>;</div>
<div class="line"><a id="l04137" name="l04137"></a><span class="lineno"> 4137</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">retry</a>;</div>
<div class="line"><a id="l04138" name="l04138"></a><span class="lineno"> 4138</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeloffset</a>;</div>
<div class="line"><a id="l04139" name="l04139"></a><span class="lineno"> 4139</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">trianglenormal</a>[3];</div>
<div class="line"><a id="l04140" name="l04140"></a><span class="lineno"> 4140</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[3];</div>
<div class="line"><a id="l04141" name="l04141"></a><span class="lineno"> 4141</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplenormal</a>[3];</div>
<div class="line"><a id="l04142" name="l04142"></a><span class="lineno"> 4142</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>[3];</div>
<div class="line"><a id="l04143" name="l04143"></a><span class="lineno"> 4143</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmiscale</a>[2];</div>
<div class="line"><a id="l04144" name="l04144"></a><span class="lineno"> 4144</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopex</a>;</div>
<div class="line"><a id="l04145" name="l04145"></a><span class="lineno"> 4145</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopey</a>;</div>
<div class="line"><a id="l04146" name="l04146"></a><span class="lineno"> 4146</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopebase</a>;</div>
<div class="line"><a id="l04147" name="l04147"></a><span class="lineno"> 4147</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmscalepixels</a>;</div>
<div class="line"><a id="l04148" name="l04148"></a><span class="lineno"> 4148</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmmins</a>;</div>
<div class="line"><a id="l04149" name="l04149"></a><span class="lineno"> 4149</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmmaxs</a>;</div>
<div class="line"><a id="l04150" name="l04150"></a><span class="lineno"> 4150</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_basescalepixels</a>;</div>
<div class="line"><a id="l04151" name="l04151"></a><span class="lineno"> 4151</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_borderpixels</a>;</div>
<div class="line"><a id="l04152" name="l04152"></a><span class="lineno"> 4152</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a>;</div>
<div class="line"><a id="l04153" name="l04153"></a><span class="lineno"> 4153</span>    <span class="comment">//int lm_maxpixels;</span></div>
<div class="line"><a id="l04154" name="l04154"></a><span class="lineno"> 4154</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>;</div>
<div class="line"><a id="l04155" name="l04155"></a><span class="lineno"> 4155</span>    <a class="code hl_struct" href="structlightmaptriangle__t.html">lightmaptriangle_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>;</div>
<div class="line"><a id="l04156" name="l04156"></a><span class="lineno"> 4156</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmappixels</a>;</div>
<div class="line"><a id="l04157" name="l04157"></a><span class="lineno"> 4157</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deluxemappixels</a>;</div>
<div class="line"><a id="l04158" name="l04158"></a><span class="lineno"> 4158</span>    <a class="code hl_struct" href="structmod__alloclightmap__state__t.html">mod_alloclightmap_state_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmstate</a>;</div>
<div class="line"><a id="l04159" name="l04159"></a><span class="lineno"> 4159</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>[1024];</div>
<div class="line"><a id="l04160" name="l04160"></a><span class="lineno"> 4160</span> </div>
<div class="line"><a id="l04161" name="l04161"></a><span class="lineno"> 4161</span>    <span class="comment">// generate lightmap projection information for all triangles</span></div>
<div class="line"><a id="l04162" name="l04162"></a><span class="lineno"> 4162</span>    <span class="keywordflow">if</span> (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a6d207a080d8ca69eecb6ca4ceb4cd98b">texturepool</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l04163" name="l04163"></a><span class="lineno"> 4163</span>        model-&gt;<a class="code hl_variable" href="structmodel__t.html#a6d207a080d8ca69eecb6ca4ceb4cd98b">texturepool</a> = <a class="code hl_function" href="gl__textures_8c.html#ab60a02391841e828427f5cc24cb5dd29">R_AllocTexturePool</a>();</div>
<div class="line"><a id="l04164" name="l04164"></a><span class="lineno"> 4164</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_basescalepixels</a> = 1.0f / <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0001f, <a class="code hl_variable" href="model__shared_8c.html#ae0d9355deaba10dacf0ea5bd325c221d">mod_generatelightmaps_unitspersample</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>);</div>
<div class="line"><a id="l04165" name="l04165"></a><span class="lineno"> 4165</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_borderpixels</a> = <a class="code hl_variable" href="model__shared_8c.html#a21b90d5ad89fcecc68ead5509c8dd85e">mod_generatelightmaps_borderpixels</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>;</div>
<div class="line"><a id="l04166" name="l04166"></a><span class="lineno"> 4166</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_borderpixels</a>*2+1, 64, (<span class="keywordtype">int</span>)<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a06a669057f01a0d02c34aa0ebc781a54">maxtexturesize_2d</a>);</div>
<div class="line"><a id="l04167" name="l04167"></a><span class="lineno"> 4167</span>    <span class="comment">//lm_maxpixels = lm_texturesize-(lm_borderpixels*2+1);</span></div>
<div class="line"><a id="l04168" name="l04168"></a><span class="lineno"> 4168</span>    <a class="code hl_function" href="model__shared_8c.html#a27be267e2cf2666a18e976df520e625b">Mod_AllocLightmap_Init</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmstate</a>, <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a>);</div>
<div class="line"><a id="l04169" name="l04169"></a><span class="lineno"> 4169</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmapnumber</a> = 0;</div>
<div class="line"><a id="l04170" name="l04170"></a><span class="lineno"> 4170</span>    <span class="keywordflow">for</span> (surfaceindex = 0;surfaceindex &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>;surfaceindex++)</div>
<div class="line"><a id="l04171" name="l04171"></a><span class="lineno"> 4171</span>    {</div>
<div class="line"><a id="l04172" name="l04172"></a><span class="lineno"> 4172</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + surfaceindex;</div>
<div class="line"><a id="l04173" name="l04173"></a><span class="lineno"> 4173</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle*3;</div>
<div class="line"><a id="l04174" name="l04174"></a><span class="lineno"> 4174</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmscalepixels</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_basescalepixels</a>;</div>
<div class="line"><a id="l04175" name="l04175"></a><span class="lineno"> 4175</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">retry</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">retry</a> &lt; 30;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">retry</a>++)</div>
<div class="line"><a id="l04176" name="l04176"></a><span class="lineno"> 4176</span>        {</div>
<div class="line"><a id="l04177" name="l04177"></a><span class="lineno"> 4177</span>            <span class="comment">// after a couple failed attempts, degrade quality to make it fit</span></div>
<div class="line"><a id="l04178" name="l04178"></a><span class="lineno"> 4178</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">retry</a> &gt; 1)</div>
<div class="line"><a id="l04179" name="l04179"></a><span class="lineno"> 4179</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmscalepixels</a> *= 0.5f;</div>
<div class="line"><a id="l04180" name="l04180"></a><span class="lineno"> 4180</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04181" name="l04181"></a><span class="lineno"> 4181</span>            {</div>
<div class="line"><a id="l04182" name="l04182"></a><span class="lineno"> 4182</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a> = &amp;<a class="code hl_variable" href="model__shared_8c.html#aa0504c8f99deab8cc22309c607e57094">mod_generatelightmaps_lightmaptriangles</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle+<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l04183" name="l04183"></a><span class="lineno"> 4183</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;<a class="code hl_variable" href="structlightmaptriangle__t.html#a6f0356429ee3ff2b92a51a2a312e2b17">lightmapindex</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmapnumber</a>;</div>
<div class="line"><a id="l04184" name="l04184"></a><span class="lineno"> 4184</span>                <span class="comment">// calculate lightmap bounds in 3D pixel coordinates, limit size,</span></div>
<div class="line"><a id="l04185" name="l04185"></a><span class="lineno"> 4185</span>                <span class="comment">// pick two planar axes for projection</span></div>
<div class="line"><a id="l04186" name="l04186"></a><span class="lineno"> 4186</span>                <span class="comment">// lightmap coordinates here are in pixels</span></div>
<div class="line"><a id="l04187" name="l04187"></a><span class="lineno"> 4187</span>                <span class="comment">// lightmap projections are snapped to pixel grid explicitly, such</span></div>
<div class="line"><a id="l04188" name="l04188"></a><span class="lineno"> 4188</span>                <span class="comment">// that two neighboring triangles sharing an edge and projection</span></div>
<div class="line"><a id="l04189" name="l04189"></a><span class="lineno"> 4189</span>                <span class="comment">// axis will have identical sample spacing along their shared edge</span></div>
<div class="line"><a id="l04190" name="l04190"></a><span class="lineno"> 4190</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a> = 0;</div>
<div class="line"><a id="l04191" name="l04191"></a><span class="lineno"> 4191</span>                <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; 3;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l04192" name="l04192"></a><span class="lineno"> 4192</span>                {</div>
<div class="line"><a id="l04193" name="l04193"></a><span class="lineno"> 4193</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;axis)</div>
<div class="line"><a id="l04194" name="l04194"></a><span class="lineno"> 4194</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04195" name="l04195"></a><span class="lineno"> 4195</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmmins</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;mins[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmscalepixels</a>)-<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_borderpixels</a>;</div>
<div class="line"><a id="l04196" name="l04196"></a><span class="lineno"> 4196</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmmaxs</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;maxs[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmscalepixels</a>)+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_borderpixels</a>;</div>
<div class="line"><a id="l04197" name="l04197"></a><span class="lineno"> 4197</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmsize[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmmaxs</a>-<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmmins</a>);</div>
<div class="line"><a id="l04198" name="l04198"></a><span class="lineno"> 4198</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmbase[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmmins</a>/<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmscalepixels</a>;</div>
<div class="line"><a id="l04199" name="l04199"></a><span class="lineno"> 4199</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmscale[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmscalepixels</a>;</div>
<div class="line"><a id="l04200" name="l04200"></a><span class="lineno"> 4200</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">k</a>++;</div>
<div class="line"><a id="l04201" name="l04201"></a><span class="lineno"> 4201</span>                }</div>
<div class="line"><a id="l04202" name="l04202"></a><span class="lineno"> 4202</span>                <span class="keywordflow">if</span> (!<a class="code hl_function" href="model__shared_8c.html#a835cf8e835979953163e64c7eea95186">Mod_AllocLightmap_Block</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmstate</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmsize[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmsize[1], &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmoffset[0], &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmoffset[1]))</div>
<div class="line"><a id="l04203" name="l04203"></a><span class="lineno"> 4203</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04204" name="l04204"></a><span class="lineno"> 4204</span>            }</div>
<div class="line"><a id="l04205" name="l04205"></a><span class="lineno"> 4205</span>            <span class="comment">// if all fit in this texture, we&#39;re done with this surface</span></div>
<div class="line"><a id="l04206" name="l04206"></a><span class="lineno"> 4206</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles)</div>
<div class="line"><a id="l04207" name="l04207"></a><span class="lineno"> 4207</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04208" name="l04208"></a><span class="lineno"> 4208</span>            <span class="comment">// if we haven&#39;t maxed out the lightmap size yet, we retry the</span></div>
<div class="line"><a id="l04209" name="l04209"></a><span class="lineno"> 4209</span>            <span class="comment">// entire surface batch...</span></div>
<div class="line"><a id="l04210" name="l04210"></a><span class="lineno"> 4210</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a> * 2 &lt;= <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="model__shared_8c.html#a499f933ba033669ca67cea8a8b9351f6">mod_generatelightmaps_texturesize</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>, (<span class="keywordtype">int</span>)<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a06a669057f01a0d02c34aa0ebc781a54">maxtexturesize_2d</a>))</div>
<div class="line"><a id="l04211" name="l04211"></a><span class="lineno"> 4211</span>            {</div>
<div class="line"><a id="l04212" name="l04212"></a><span class="lineno"> 4212</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a> *= 2;</div>
<div class="line"><a id="l04213" name="l04213"></a><span class="lineno"> 4213</span>                surfaceindex = -1;</div>
<div class="line"><a id="l04214" name="l04214"></a><span class="lineno"> 4214</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmapnumber</a> = 0;</div>
<div class="line"><a id="l04215" name="l04215"></a><span class="lineno"> 4215</span>                <a class="code hl_function" href="model__shared_8c.html#a2a3016fba1c91f35365a48717811edc3">Mod_AllocLightmap_Free</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmstate</a>);</div>
<div class="line"><a id="l04216" name="l04216"></a><span class="lineno"> 4216</span>                <a class="code hl_function" href="model__shared_8c.html#a27be267e2cf2666a18e976df520e625b">Mod_AllocLightmap_Init</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmstate</a>, <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a>);</div>
<div class="line"><a id="l04217" name="l04217"></a><span class="lineno"> 4217</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04218" name="l04218"></a><span class="lineno"> 4218</span>            }</div>
<div class="line"><a id="l04219" name="l04219"></a><span class="lineno"> 4219</span>            <span class="comment">// if we have maxed out the lightmap size, and this triangle does</span></div>
<div class="line"><a id="l04220" name="l04220"></a><span class="lineno"> 4220</span>            <span class="comment">// not fit in the same texture as the rest of the surface, we have</span></div>
<div class="line"><a id="l04221" name="l04221"></a><span class="lineno"> 4221</span>            <span class="comment">// to retry the entire surface in a new texture (can only use one)</span></div>
<div class="line"><a id="l04222" name="l04222"></a><span class="lineno"> 4222</span>            <span class="comment">// with multiple retries, the lightmap quality degrades until it</span></div>
<div class="line"><a id="l04223" name="l04223"></a><span class="lineno"> 4223</span>            <span class="comment">// fits (or gives up)</span></div>
<div class="line"><a id="l04224" name="l04224"></a><span class="lineno"> 4224</span>            <span class="keywordflow">if</span> (surfaceindex &gt; 0)</div>
<div class="line"><a id="l04225" name="l04225"></a><span class="lineno"> 4225</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmapnumber</a>++;</div>
<div class="line"><a id="l04226" name="l04226"></a><span class="lineno"> 4226</span>            <a class="code hl_function" href="model__shared_8c.html#a1e063ce17b7be8462ffafa0f8f8ff8b1">Mod_AllocLightmap_Reset</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmstate</a>);</div>
<div class="line"><a id="l04227" name="l04227"></a><span class="lineno"> 4227</span>        }</div>
<div class="line"><a id="l04228" name="l04228"></a><span class="lineno"> 4228</span>    }</div>
<div class="line"><a id="l04229" name="l04229"></a><span class="lineno"> 4229</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmapnumber</a>++;</div>
<div class="line"><a id="l04230" name="l04230"></a><span class="lineno"> 4230</span>    <a class="code hl_function" href="model__shared_8c.html#a2a3016fba1c91f35365a48717811edc3">Mod_AllocLightmap_Free</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmstate</a>);</div>
<div class="line"><a id="l04231" name="l04231"></a><span class="lineno"> 4231</span> </div>
<div class="line"><a id="l04232" name="l04232"></a><span class="lineno"> 4232</span>    <span class="comment">// now put triangles together into lightmap textures, and do not allow</span></div>
<div class="line"><a id="l04233" name="l04233"></a><span class="lineno"> 4233</span>    <span class="comment">// triangles of a surface to go into different textures (as that would</span></div>
<div class="line"><a id="l04234" name="l04234"></a><span class="lineno"> 4234</span>    <span class="comment">// require rewriting the surface list)</span></div>
<div class="line"><a id="l04235" name="l04235"></a><span class="lineno"> 4235</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#ab45856a2ba7c570b8500aae6dcf6a491">deluxemapping_modelspace</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04236" name="l04236"></a><span class="lineno"> 4236</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#afcbfa68b6aa2c4f09247a466bbec320e">deluxemapping</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04237" name="l04237"></a><span class="lineno"> 4237</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a9a6c3e1fc72135d6dc9581c9bd7f1f88">num_mergedlightmaps</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmapnumber</a>;</div>
<div class="line"><a id="l04238" name="l04238"></a><span class="lineno"> 4238</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a4c41214172127c935805b23659258e9f">data_lightmaps</a> = (<a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> **)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a9a6c3e1fc72135d6dc9581c9bd7f1f88">num_mergedlightmaps</a> * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> *));</div>
<div class="line"><a id="l04239" name="l04239"></a><span class="lineno"> 4239</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#aab1b30ab9ae770bf3d403eae5ce0aa01">data_deluxemaps</a> = (<a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> **)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a9a6c3e1fc72135d6dc9581c9bd7f1f88">num_mergedlightmaps</a> * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> *));</div>
<div class="line"><a id="l04240" name="l04240"></a><span class="lineno"> 4240</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmappixels</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a9a6c3e1fc72135d6dc9581c9bd7f1f88">num_mergedlightmaps</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a> * 4);</div>
<div class="line"><a id="l04241" name="l04241"></a><span class="lineno"> 4241</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deluxemappixels</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a9a6c3e1fc72135d6dc9581c9bd7f1f88">num_mergedlightmaps</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a> * 4);</div>
<div class="line"><a id="l04242" name="l04242"></a><span class="lineno"> 4242</span>    <span class="keywordflow">for</span> (surfaceindex = 0;surfaceindex &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>;surfaceindex++)</div>
<div class="line"><a id="l04243" name="l04243"></a><span class="lineno"> 4243</span>    {</div>
<div class="line"><a id="l04244" name="l04244"></a><span class="lineno"> 4244</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + surfaceindex;</div>
<div class="line"><a id="l04245" name="l04245"></a><span class="lineno"> 4245</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle*3;</div>
<div class="line"><a id="l04246" name="l04246"></a><span class="lineno"> 4246</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04247" name="l04247"></a><span class="lineno"> 4247</span>        {</div>
<div class="line"><a id="l04248" name="l04248"></a><span class="lineno"> 4248</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a> = &amp;<a class="code hl_variable" href="model__shared_8c.html#aa0504c8f99deab8cc22309c607e57094">mod_generatelightmaps_lightmaptriangles</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle+<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l04249" name="l04249"></a><span class="lineno"> 4249</span>            <a class="code hl_define" href="mathlib_8h.html#abd107e00eca870c28df1518302fee3df">TriangleNormal</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">trianglenormal</a>);</div>
<div class="line"><a id="l04250" name="l04250"></a><span class="lineno"> 4250</span>            <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">trianglenormal</a>);</div>
<div class="line"><a id="l04251" name="l04251"></a><span class="lineno"> 4251</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">trianglenormal</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplenormal</a>); <span class="comment">// FIXME: this is supposed to be interpolated per pixel from vertices</span></div>
<div class="line"><a id="l04252" name="l04252"></a><span class="lineno"> 4252</span>            axis = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;axis;</div>
<div class="line"><a id="l04253" name="l04253"></a><span class="lineno"> 4253</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis1</a> = axis == 0 ? 1 : 0;</div>
<div class="line"><a id="l04254" name="l04254"></a><span class="lineno"> 4254</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis2</a> = axis == 2 ? 1 : 2;</div>
<div class="line"><a id="l04255" name="l04255"></a><span class="lineno"> 4255</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmiscale</a>[0] = 1.0f / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmscale[0];</div>
<div class="line"><a id="l04256" name="l04256"></a><span class="lineno"> 4256</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmiscale</a>[1] = 1.0f / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmscale[1];</div>
<div class="line"><a id="l04257" name="l04257"></a><span class="lineno"> 4257</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">trianglenormal</a>[axis] &lt; 0)</div>
<div class="line"><a id="l04258" name="l04258"></a><span class="lineno"> 4258</span>                <a class="code hl_define" href="mathlib_8h.html#a28f9f1fe5f50e359e016f7e4e04f8cf1">VectorNegate</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">trianglenormal</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">trianglenormal</a>);</div>
<div class="line"><a id="l04259" name="l04259"></a><span class="lineno"> 4259</span>            <a class="code hl_define" href="mathlib_8h.html#aa3c5114e57f89ea32ef8f41e00631e44">CrossProduct</a>(<a class="code hl_variable" href="model__shared_8c.html#af364d22ecd6a1f2df7b8774dc9184252">lmaxis</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis2</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">trianglenormal</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>);<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopex</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>[axis] / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis1</a>];</div>
<div class="line"><a id="l04260" name="l04260"></a><span class="lineno"> 4260</span>            <a class="code hl_define" href="mathlib_8h.html#aa3c5114e57f89ea32ef8f41e00631e44">CrossProduct</a>(<a class="code hl_variable" href="model__shared_8c.html#af364d22ecd6a1f2df7b8774dc9184252">lmaxis</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis1</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">trianglenormal</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>);<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopey</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>[axis] / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis2</a>];</div>
<div class="line"><a id="l04261" name="l04261"></a><span class="lineno"> 4261</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopebase</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[0][axis] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[0][<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis1</a>]*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopex</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[0][<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis2</a>]*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopey</a>;</div>
<div class="line"><a id="l04262" name="l04262"></a><span class="lineno"> 4262</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; 3;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l04263" name="l04263"></a><span class="lineno"> 4263</span>            {</div>
<div class="line"><a id="l04264" name="l04264"></a><span class="lineno"> 4264</span>                <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">t2f</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>*3+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]*2;</div>
<div class="line"><a id="l04265" name="l04265"></a><span class="lineno"> 4265</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">t2f</a>[0] = ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>][<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis1</a>] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmbase[0]) * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmscale[0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmoffset[0]) / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a>;</div>
<div class="line"><a id="l04266" name="l04266"></a><span class="lineno"> 4266</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">t2f</a>[1] = ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>][<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis2</a>] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmbase[1]) * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmscale[1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmoffset[1]) / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a>;</div>
<div class="line"><a id="l04267" name="l04267"></a><span class="lineno"> 4267</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l04268" name="l04268"></a><span class="lineno"> 4268</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis1</a>] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">t2f</a>[0]*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a>-<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmoffset[0])*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmiscale</a>[0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmbase[0];</div>
<div class="line"><a id="l04269" name="l04269"></a><span class="lineno"> 4269</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis2</a>] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">t2f</a>[1]*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a>-<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmoffset[1])*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmiscale</a>[1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmbase[1];</div>
<div class="line"><a id="l04270" name="l04270"></a><span class="lineno"> 4270</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[axis] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis1</a>]*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopex</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis2</a>]*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopey</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopebase</a>;</div>
<div class="line"><a id="l04271" name="l04271"></a><span class="lineno"> 4271</span>                <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;%f:%f %f:%f %f:%f = %f %f\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>][<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis1</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis1</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>][<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis2</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis2</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;vertex[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>][axis], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[axis], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">t2f</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">t2f</a>[1]);</div>
<div class="line"><a id="l04272" name="l04272"></a><span class="lineno"> 4272</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04273" name="l04273"></a><span class="lineno"> 4273</span>            }</div>
<div class="line"><a id="l04274" name="l04274"></a><span class="lineno"> 4274</span> </div>
<div class="line"><a id="l04275" name="l04275"></a><span class="lineno"> 4275</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l04276" name="l04276"></a><span class="lineno"> 4276</span>            <span class="keywordflow">switch</span> (axis)</div>
<div class="line"><a id="l04277" name="l04277"></a><span class="lineno"> 4277</span>            {</div>
<div class="line"><a id="l04278" name="l04278"></a><span class="lineno"> 4278</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l04279" name="l04279"></a><span class="lineno"> 4279</span>            <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l04280" name="l04280"></a><span class="lineno"> 4280</span>                <a class="code hl_variable" href="sv__user_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>[0] = 0;</div>
<div class="line"><a id="l04281" name="l04281"></a><span class="lineno"> 4281</span>                <a class="code hl_variable" href="sv__user_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>[1] = 1.0f / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmscale[0];</div>
<div class="line"><a id="l04282" name="l04282"></a><span class="lineno"> 4282</span>                <a class="code hl_variable" href="sv__user_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>[2] = 0;</div>
<div class="line"><a id="l04283" name="l04283"></a><span class="lineno"> 4283</span>                left[0] = 0;</div>
<div class="line"><a id="l04284" name="l04284"></a><span class="lineno"> 4284</span>                left[1] = 0;</div>
<div class="line"><a id="l04285" name="l04285"></a><span class="lineno"> 4285</span>                left[2] = 1.0f / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmscale[1];</div>
<div class="line"><a id="l04286" name="l04286"></a><span class="lineno"> 4286</span>                <a class="code hl_variable" href="sv__user_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>[0] = 1.0f;</div>
<div class="line"><a id="l04287" name="l04287"></a><span class="lineno"> 4287</span>                <a class="code hl_variable" href="sv__user_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>[1] = 0;</div>
<div class="line"><a id="l04288" name="l04288"></a><span class="lineno"> 4288</span>                <a class="code hl_variable" href="sv__user_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>[2] = 0;</div>
<div class="line"><a id="l04289" name="l04289"></a><span class="lineno"> 4289</span>                origin[0] = 0;</div>
<div class="line"><a id="l04290" name="l04290"></a><span class="lineno"> 4290</span>                origin[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmbase[0];</div>
<div class="line"><a id="l04291" name="l04291"></a><span class="lineno"> 4291</span>                origin[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmbase[1];</div>
<div class="line"><a id="l04292" name="l04292"></a><span class="lineno"> 4292</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04293" name="l04293"></a><span class="lineno"> 4293</span>            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l04294" name="l04294"></a><span class="lineno"> 4294</span>                <a class="code hl_variable" href="sv__user_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>[0] = 1.0f / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmscale[0];</div>
<div class="line"><a id="l04295" name="l04295"></a><span class="lineno"> 4295</span>                <a class="code hl_variable" href="sv__user_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>[1] = 0;</div>
<div class="line"><a id="l04296" name="l04296"></a><span class="lineno"> 4296</span>                <a class="code hl_variable" href="sv__user_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>[2] = 0;</div>
<div class="line"><a id="l04297" name="l04297"></a><span class="lineno"> 4297</span>                left[0] = 0;</div>
<div class="line"><a id="l04298" name="l04298"></a><span class="lineno"> 4298</span>                left[1] = 0;</div>
<div class="line"><a id="l04299" name="l04299"></a><span class="lineno"> 4299</span>                left[2] = 1.0f / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmscale[1];</div>
<div class="line"><a id="l04300" name="l04300"></a><span class="lineno"> 4300</span>                <a class="code hl_variable" href="sv__user_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>[0] = 0;</div>
<div class="line"><a id="l04301" name="l04301"></a><span class="lineno"> 4301</span>                <a class="code hl_variable" href="sv__user_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>[1] = 1.0f;</div>
<div class="line"><a id="l04302" name="l04302"></a><span class="lineno"> 4302</span>                <a class="code hl_variable" href="sv__user_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>[2] = 0;</div>
<div class="line"><a id="l04303" name="l04303"></a><span class="lineno"> 4303</span>                origin[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmbase[0];</div>
<div class="line"><a id="l04304" name="l04304"></a><span class="lineno"> 4304</span>                origin[1] = 0;</div>
<div class="line"><a id="l04305" name="l04305"></a><span class="lineno"> 4305</span>                origin[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmbase[1];</div>
<div class="line"><a id="l04306" name="l04306"></a><span class="lineno"> 4306</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04307" name="l04307"></a><span class="lineno"> 4307</span>            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l04308" name="l04308"></a><span class="lineno"> 4308</span>                <a class="code hl_variable" href="sv__user_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>[0] = 1.0f / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmscale[0];</div>
<div class="line"><a id="l04309" name="l04309"></a><span class="lineno"> 4309</span>                <a class="code hl_variable" href="sv__user_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>[1] = 0;</div>
<div class="line"><a id="l04310" name="l04310"></a><span class="lineno"> 4310</span>                <a class="code hl_variable" href="sv__user_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>[2] = 0;</div>
<div class="line"><a id="l04311" name="l04311"></a><span class="lineno"> 4311</span>                left[0] = 0;</div>
<div class="line"><a id="l04312" name="l04312"></a><span class="lineno"> 4312</span>                left[1] = 1.0f / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmscale[1];</div>
<div class="line"><a id="l04313" name="l04313"></a><span class="lineno"> 4313</span>                left[2] = 0;</div>
<div class="line"><a id="l04314" name="l04314"></a><span class="lineno"> 4314</span>                <a class="code hl_variable" href="sv__user_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>[0] = 0;</div>
<div class="line"><a id="l04315" name="l04315"></a><span class="lineno"> 4315</span>                <a class="code hl_variable" href="sv__user_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>[1] = 0;</div>
<div class="line"><a id="l04316" name="l04316"></a><span class="lineno"> 4316</span>                <a class="code hl_variable" href="sv__user_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>[2] = 1.0f;</div>
<div class="line"><a id="l04317" name="l04317"></a><span class="lineno"> 4317</span>                origin[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmbase[0];</div>
<div class="line"><a id="l04318" name="l04318"></a><span class="lineno"> 4318</span>                origin[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmbase[1];</div>
<div class="line"><a id="l04319" name="l04319"></a><span class="lineno"> 4319</span>                origin[2] = 0;</div>
<div class="line"><a id="l04320" name="l04320"></a><span class="lineno"> 4320</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04321" name="l04321"></a><span class="lineno"> 4321</span>            }</div>
<div class="line"><a id="l04322" name="l04322"></a><span class="lineno"> 4322</span>            <a class="code hl_function" href="matrixlib_8c.html#ab70336ea109de2ef2ee9b621ca9e6ee0">Matrix4x4_FromVectors</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">backmatrix</a>, <a class="code hl_variable" href="sv__user_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a>, left, <a class="code hl_variable" href="sv__user_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a>, origin);</div>
<div class="line"><a id="l04323" name="l04323"></a><span class="lineno"> 4323</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04324" name="l04324"></a><span class="lineno"> 4324</span><span class="preprocessor">#define LM_DIST_EPSILON (1.0f / 32.0f)</span></div>
<div class="line"><a id="l04325" name="l04325"></a><span class="lineno"> 4325</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmsize[1];<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++)</div>
<div class="line"><a id="l04326" name="l04326"></a><span class="lineno"> 4326</span>            {</div>
<div class="line"><a id="l04327" name="l04327"></a><span class="lineno"> 4327</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeloffset</a> = ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lightmapindex * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a> + <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmoffset[1]) * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmoffset[0]) * 4;</div>
<div class="line"><a id="l04328" name="l04328"></a><span class="lineno"> 4328</span>                <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmsize[0];<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeloffset</a> += 4)</div>
<div class="line"><a id="l04329" name="l04329"></a><span class="lineno"> 4329</span>                {</div>
<div class="line"><a id="l04330" name="l04330"></a><span class="lineno"> 4330</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis1</a>] = (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>+0.5f)*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmiscale</a>[0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmbase[0];</div>
<div class="line"><a id="l04331" name="l04331"></a><span class="lineno"> 4331</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis2</a>] = (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>+0.5f)*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lmiscale</a>[1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triangle</a>-&gt;lmbase[1];</div>
<div class="line"><a id="l04332" name="l04332"></a><span class="lineno"> 4332</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[axis] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis1</a>]*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopex</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axis2</a>]*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopey</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slopebase</a>;</div>
<div class="line"><a id="l04333" name="l04333"></a><span class="lineno"> 4333</span>                    <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>, 0.125f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplenormal</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>);</div>
<div class="line"><a id="l04334" name="l04334"></a><span class="lineno"> 4334</span>                    <a class="code hl_function" href="model__shared_8c.html#a921a86267c44c2b1011772777481a240">Mod_GenerateLightmaps_LightmapSample</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplecenter</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplenormal</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmappixels</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeloffset</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deluxemappixels</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixeloffset</a>);</div>
<div class="line"><a id="l04335" name="l04335"></a><span class="lineno"> 4335</span>                }</div>
<div class="line"><a id="l04336" name="l04336"></a><span class="lineno"> 4336</span>            }</div>
<div class="line"><a id="l04337" name="l04337"></a><span class="lineno"> 4337</span>        }</div>
<div class="line"><a id="l04338" name="l04338"></a><span class="lineno"> 4338</span>    }</div>
<div class="line"><a id="l04339" name="l04339"></a><span class="lineno"> 4339</span> </div>
<div class="line"><a id="l04340" name="l04340"></a><span class="lineno"> 4340</span>    <span class="keywordflow">for</span> (lightmapindex = 0;lightmapindex &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a9a6c3e1fc72135d6dc9581c9bd7f1f88">num_mergedlightmaps</a>;lightmapindex++)</div>
<div class="line"><a id="l04341" name="l04341"></a><span class="lineno"> 4341</span>    {</div>
<div class="line"><a id="l04342" name="l04342"></a><span class="lineno"> 4342</span>        model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a4c41214172127c935805b23659258e9f">data_lightmaps</a>[lightmapindex] = <a class="code hl_function" href="gl__textures_8c.html#afe6f33ec05da1bce9cd3a847610e7384">R_LoadTexture2D</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a6d207a080d8ca69eecb6ca4ceb4cd98b">texturepool</a>, <a class="code hl_function" href="common_8c.html#a4a8220fa88226bf9cf39b12a051a20d7">va</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>), <span class="stringliteral">&quot;lightmap%i&quot;</span>, lightmapindex), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmappixels</a> + lightmapindex * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a> * 4, <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49ab887b36a912241930415c7f1db44d094">TEXTYPE_BGRA</a>, <a class="code hl_define" href="r__textures_8h.html#a7ebf18782aefc1f1ff9fc5cb169e2dbb">TEXF_FORCELINEAR</a>, -1, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04343" name="l04343"></a><span class="lineno"> 4343</span>        model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#aab1b30ab9ae770bf3d403eae5ce0aa01">data_deluxemaps</a>[lightmapindex] = <a class="code hl_function" href="gl__textures_8c.html#afe6f33ec05da1bce9cd3a847610e7384">R_LoadTexture2D</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a6d207a080d8ca69eecb6ca4ceb4cd98b">texturepool</a>, <a class="code hl_function" href="common_8c.html#a4a8220fa88226bf9cf39b12a051a20d7">va</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>), <span class="stringliteral">&quot;deluxemap%i&quot;</span>, lightmapindex), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deluxemappixels</a> + lightmapindex * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lm_texturesize</a> * 4, <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49ab887b36a912241930415c7f1db44d094">TEXTYPE_BGRA</a>, <a class="code hl_define" href="r__textures_8h.html#a7ebf18782aefc1f1ff9fc5cb169e2dbb">TEXF_FORCELINEAR</a>, -1, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04344" name="l04344"></a><span class="lineno"> 4344</span>    }</div>
<div class="line"><a id="l04345" name="l04345"></a><span class="lineno"> 4345</span> </div>
<div class="line"><a id="l04346" name="l04346"></a><span class="lineno"> 4346</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmappixels</a>)</div>
<div class="line"><a id="l04347" name="l04347"></a><span class="lineno"> 4347</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightmappixels</a>);</div>
<div class="line"><a id="l04348" name="l04348"></a><span class="lineno"> 4348</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deluxemappixels</a>)</div>
<div class="line"><a id="l04349" name="l04349"></a><span class="lineno"> 4349</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deluxemappixels</a>);</div>
<div class="line"><a id="l04350" name="l04350"></a><span class="lineno"> 4350</span> </div>
<div class="line"><a id="l04351" name="l04351"></a><span class="lineno"> 4351</span>    <span class="keywordflow">for</span> (surfaceindex = 0;surfaceindex &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>;surfaceindex++)</div>
<div class="line"><a id="l04352" name="l04352"></a><span class="lineno"> 4352</span>    {</div>
<div class="line"><a id="l04353" name="l04353"></a><span class="lineno"> 4353</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + surfaceindex;</div>
<div class="line"><a id="l04354" name="l04354"></a><span class="lineno"> 4354</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_triangles)</div>
<div class="line"><a id="l04355" name="l04355"></a><span class="lineno"> 4355</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04356" name="l04356"></a><span class="lineno"> 4356</span>        lightmapindex = <a class="code hl_variable" href="model__shared_8c.html#aa0504c8f99deab8cc22309c607e57094">mod_generatelightmaps_lightmaptriangles</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;num_firsttriangle].<a class="code hl_variable" href="structlightmaptriangle__t.html#a6f0356429ee3ff2b92a51a2a312e2b17">lightmapindex</a>;</div>
<div class="line"><a id="l04357" name="l04357"></a><span class="lineno"> 4357</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;lightmaptexture = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a4c41214172127c935805b23659258e9f">data_lightmaps</a>[lightmapindex];</div>
<div class="line"><a id="l04358" name="l04358"></a><span class="lineno"> 4358</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;deluxemaptexture = model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#aab1b30ab9ae770bf3d403eae5ce0aa01">data_deluxemaps</a>[lightmapindex];</div>
<div class="line"><a id="l04359" name="l04359"></a><span class="lineno"> 4359</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;lightmapinfo = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04360" name="l04360"></a><span class="lineno"> 4360</span>    }</div>
<div class="line"><a id="l04361" name="l04361"></a><span class="lineno"> 4361</span> </div>
<div class="line"><a id="l04362" name="l04362"></a><span class="lineno"> 4362</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a7dcb6ad152fbb5148b1830e79839b197">LightPoint</a> = <a class="code hl_function" href="model__shared_8c.html#a2f621b2a71db69500b0c3bf0c2e10a60">Mod_GenerateLightmaps_LightPoint</a>;</div>
<div class="line"><a id="l04363" name="l04363"></a><span class="lineno"> 4363</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a53c32e4598e37e8256175c6112425af1">brushq1</a>.<a class="code hl_variable" href="structmodel__brushq1__t.html#a70a1574bac96e9b59acb8dad94c6c28c">lightdata</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04364" name="l04364"></a><span class="lineno"> 4364</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a53c32e4598e37e8256175c6112425af1">brushq1</a>.<a class="code hl_variable" href="structmodel__brushq1__t.html#a66c2d707bc47f544a31c80fa74ea8516">lightmapupdateflags</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04365" name="l04365"></a><span class="lineno"> 4365</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a53c32e4598e37e8256175c6112425af1">brushq1</a>.<a class="code hl_variable" href="structmodel__brushq1__t.html#aca69bc0d1a00ed0f6ab32f3e73bd424b">firstrender</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04366" name="l04366"></a><span class="lineno"> 4366</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a53c32e4598e37e8256175c6112425af1">brushq1</a>.<a class="code hl_variable" href="structmodel__brushq1__t.html#a48618a707013d0f863f42940df3a8df7">num_lightstyles</a> = 0;</div>
<div class="line"><a id="l04367" name="l04367"></a><span class="lineno"> 4367</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#a53c32e4598e37e8256175c6112425af1">brushq1</a>.<a class="code hl_variable" href="structmodel__brushq1__t.html#a514cf493a6e744f8717a00df794d84e0">data_lightstyleinfo</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04368" name="l04368"></a><span class="lineno"> 4368</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a12ae1e03d70e00f9b3ba4a11a2314e2e">numsubmodels</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04369" name="l04369"></a><span class="lineno"> 4369</span>    {</div>
<div class="line"><a id="l04370" name="l04370"></a><span class="lineno"> 4370</span>        model-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a462aadc65aeffe8d8e64208e0d841f39">submodels</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;brushq1.lightmapupdateflags = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04371" name="l04371"></a><span class="lineno"> 4371</span>        model-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a462aadc65aeffe8d8e64208e0d841f39">submodels</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;brushq1.firstrender = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04372" name="l04372"></a><span class="lineno"> 4372</span>        model-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a462aadc65aeffe8d8e64208e0d841f39">submodels</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;brushq1.num_lightstyles = 0;</div>
<div class="line"><a id="l04373" name="l04373"></a><span class="lineno"> 4373</span>        model-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a462aadc65aeffe8d8e64208e0d841f39">submodels</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;brushq1.data_lightstyleinfo = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04374" name="l04374"></a><span class="lineno"> 4374</span>    }</div>
<div class="line"><a id="l04375" name="l04375"></a><span class="lineno"> 4375</span>}</div>
</div>
<div class="line"><a id="l04376" name="l04376"></a><span class="lineno"> 4376</span> </div>
<div class="foldopen" id="foldopen04377" data-start="{" data-end="}">
<div class="line"><a id="l04377" name="l04377"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ae5436bc8b30b0c8b8ceeed4718fd9c67"> 4377</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#ae5436bc8b30b0c8b8ceeed4718fd9c67">Mod_GenerateLightmaps_UpdateVertexColors</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model)</div>
<div class="line"><a id="l04378" name="l04378"></a><span class="lineno"> 4378</span>{</div>
<div class="line"><a id="l04379" name="l04379"></a><span class="lineno"> 4379</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l04380" name="l04380"></a><span class="lineno"> 4380</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04381" name="l04381"></a><span class="lineno"> 4381</span>        <a class="code hl_function" href="model__shared_8c.html#a6131839eb1ffee2234a2d1caf1a63591">Mod_GenerateLightmaps_VertexSample</a>(model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a> + 3*<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a> + 3*<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a> + 4*<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a id="l04382" name="l04382"></a><span class="lineno"> 4382</span>}</div>
</div>
<div class="line"><a id="l04383" name="l04383"></a><span class="lineno"> 4383</span> </div>
<div class="foldopen" id="foldopen04384" data-start="{" data-end="}">
<div class="line"><a id="l04384" name="l04384"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aeb614d0bc052d5ba27bcc0d2c7135a61"> 4384</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aeb614d0bc052d5ba27bcc0d2c7135a61">Mod_GenerateLightmaps_UpdateLightGrid</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model)</div>
<div class="line"><a id="l04385" name="l04385"></a><span class="lineno"> 4385</span>{</div>
<div class="line"><a id="l04386" name="l04386"></a><span class="lineno"> 4386</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>;</div>
<div class="line"><a id="l04387" name="l04387"></a><span class="lineno"> 4387</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>;</div>
<div class="line"><a id="l04388" name="l04388"></a><span class="lineno"> 4388</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>;</div>
<div class="line"><a id="l04389" name="l04389"></a><span class="lineno"> 4389</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> = 0;</div>
<div class="line"><a id="l04390" name="l04390"></a><span class="lineno"> 4390</span>    <span class="keywordtype">float</span> pos[3];</div>
<div class="line"><a id="l04391" name="l04391"></a><span class="lineno"> 4391</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a> &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#ab92fc06352b01074d0781ad6dfedb2df">num_lightgrid_isize</a>[2];<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>++)</div>
<div class="line"><a id="l04392" name="l04392"></a><span class="lineno"> 4392</span>    {</div>
<div class="line"><a id="l04393" name="l04393"></a><span class="lineno"> 4393</span>        pos[2] = (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a786fc3c07a9cd75a2edc25dae55608db">num_lightgrid_imins</a>[2] + <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a> + 0.5f) * model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a5a05c09d0e16f30cc381559e0441932a">num_lightgrid_cellsize</a>[2];</div>
<div class="line"><a id="l04394" name="l04394"></a><span class="lineno"> 4394</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#ab92fc06352b01074d0781ad6dfedb2df">num_lightgrid_isize</a>[1];<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++)</div>
<div class="line"><a id="l04395" name="l04395"></a><span class="lineno"> 4395</span>        {</div>
<div class="line"><a id="l04396" name="l04396"></a><span class="lineno"> 4396</span>            pos[1] = (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a786fc3c07a9cd75a2edc25dae55608db">num_lightgrid_imins</a>[1] + <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> + 0.5f) * model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a5a05c09d0e16f30cc381559e0441932a">num_lightgrid_cellsize</a>[1];</div>
<div class="line"><a id="l04397" name="l04397"></a><span class="lineno"> 4397</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> &lt; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#ab92fc06352b01074d0781ad6dfedb2df">num_lightgrid_isize</a>[0];<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>++)</div>
<div class="line"><a id="l04398" name="l04398"></a><span class="lineno"> 4398</span>            {</div>
<div class="line"><a id="l04399" name="l04399"></a><span class="lineno"> 4399</span>                pos[0] = (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a786fc3c07a9cd75a2edc25dae55608db">num_lightgrid_imins</a>[0] + <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> + 0.5f) * model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a5a05c09d0e16f30cc381559e0441932a">num_lightgrid_cellsize</a>[0];</div>
<div class="line"><a id="l04400" name="l04400"></a><span class="lineno"> 4400</span>                <a class="code hl_function" href="model__shared_8c.html#a641cb450c54a445b99c4221ad6cc5f23">Mod_GenerateLightmaps_GridSample</a>(pos, model-&gt;<a class="code hl_variable" href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">brushq3</a>.<a class="code hl_variable" href="structmodel__brushq3__t.html#a9f2310c4c2818e19e7a5a90b2c156377">data_lightgrid</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>);</div>
<div class="line"><a id="l04401" name="l04401"></a><span class="lineno"> 4401</span>            }</div>
<div class="line"><a id="l04402" name="l04402"></a><span class="lineno"> 4402</span>        }</div>
<div class="line"><a id="l04403" name="l04403"></a><span class="lineno"> 4403</span>    }</div>
<div class="line"><a id="l04404" name="l04404"></a><span class="lineno"> 4404</span>}</div>
</div>
<div class="line"><a id="l04405" name="l04405"></a><span class="lineno"> 4405</span> </div>
<div class="line"><a id="l04406" name="l04406"></a><span class="lineno"> 4406</span><span class="keyword">extern</span> <a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="model__shared_8c.html#a78fb22b957e64a3049781239ee353d70">mod_q3bsp_nolightmaps</a>;</div>
<div class="foldopen" id="foldopen04407" data-start="{" data-end="}">
<div class="line"><a id="l04407" name="l04407"></a><span class="lineno"><a class="line" href="model__shared_8c.html#aa15e9db022ee22ecd89ebe6c1dd6ba42"> 4407</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#aa15e9db022ee22ecd89ebe6c1dd6ba42">Mod_GenerateLightmaps</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *model)</div>
<div class="line"><a id="l04408" name="l04408"></a><span class="lineno"> 4408</span>{</div>
<div class="line"><a id="l04409" name="l04409"></a><span class="lineno"> 4409</span>    <span class="comment">//lightmaptriangle_t *lightmaptriangles = Mem_Alloc(model-&gt;mempool, model-&gt;surfmesh.num_triangles * sizeof(lightmaptriangle_t));</span></div>
<div class="line"><a id="l04410" name="l04410"></a><span class="lineno"> 4410</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldloadmodel</a> = <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a>;</div>
<div class="line"><a id="l04411" name="l04411"></a><span class="lineno"> 4411</span>    <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a> = model;</div>
<div class="line"><a id="l04412" name="l04412"></a><span class="lineno"> 4412</span> </div>
<div class="line"><a id="l04413" name="l04413"></a><span class="lineno"> 4413</span>    <a class="code hl_function" href="model__shared_8c.html#a64515e99c29efe9c5d6d3b78c2239d2e">Mod_GenerateLightmaps_InitSampleOffsets</a>(model);</div>
<div class="line"><a id="l04414" name="l04414"></a><span class="lineno"> 4414</span>    <a class="code hl_function" href="model__shared_8c.html#adb53fe2737004dc5876f8b107e080e6f">Mod_GenerateLightmaps_DestroyLightmaps</a>(model);</div>
<div class="line"><a id="l04415" name="l04415"></a><span class="lineno"> 4415</span>    <a class="code hl_function" href="model__shared_8c.html#a61017a9ce02a9281dd3d52d7be81228a">Mod_GenerateLightmaps_UnweldTriangles</a>(model);</div>
<div class="line"><a id="l04416" name="l04416"></a><span class="lineno"> 4416</span>    <a class="code hl_function" href="model__shared_8c.html#abaff7135ada3e14a87abc8ab72e2478f">Mod_GenerateLightmaps_CreateTriangleInformation</a>(model);</div>
<div class="line"><a id="l04417" name="l04417"></a><span class="lineno"> 4417</span>    <a class="code hl_function" href="model__shared_8c.html#aa2c34d2ed1a44ed067b9515351f297e6">Mod_GenerateLightmaps_CreateLights</a>(model);</div>
<div class="line"><a id="l04418" name="l04418"></a><span class="lineno"> 4418</span>    <span class="keywordflow">if</span>(!<a class="code hl_variable" href="model__shared_8c.html#a78fb22b957e64a3049781239ee353d70">mod_q3bsp_nolightmaps</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l04419" name="l04419"></a><span class="lineno"> 4419</span>        <a class="code hl_function" href="model__shared_8c.html#a7fd1cdd3467c45e41820e2617d656023">Mod_GenerateLightmaps_CreateLightmaps</a>(model);</div>
<div class="line"><a id="l04420" name="l04420"></a><span class="lineno"> 4420</span>    <a class="code hl_function" href="model__shared_8c.html#ae5436bc8b30b0c8b8ceeed4718fd9c67">Mod_GenerateLightmaps_UpdateVertexColors</a>(model);</div>
<div class="line"><a id="l04421" name="l04421"></a><span class="lineno"> 4421</span>    <a class="code hl_function" href="model__shared_8c.html#aeb614d0bc052d5ba27bcc0d2c7135a61">Mod_GenerateLightmaps_UpdateLightGrid</a>(model);</div>
<div class="line"><a id="l04422" name="l04422"></a><span class="lineno"> 4422</span>    <a class="code hl_function" href="model__shared_8c.html#ab691ff4996991fc8d44cc3fdd522e847">Mod_GenerateLightmaps_DestroyLights</a>(model);</div>
<div class="line"><a id="l04423" name="l04423"></a><span class="lineno"> 4423</span>    <a class="code hl_function" href="model__shared_8c.html#ade8f4cc9f6f9afa412747c5cd79b1a98">Mod_GenerateLightmaps_DestroyTriangleInformation</a>(model);</div>
<div class="line"><a id="l04424" name="l04424"></a><span class="lineno"> 4424</span> </div>
<div class="line"><a id="l04425" name="l04425"></a><span class="lineno"> 4425</span>    <a class="code hl_variable" href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldloadmodel</a>;</div>
<div class="line"><a id="l04426" name="l04426"></a><span class="lineno"> 4426</span>}</div>
</div>
<div class="line"><a id="l04427" name="l04427"></a><span class="lineno"> 4427</span> </div>
<div class="foldopen" id="foldopen04428" data-start="{" data-end="}">
<div class="line"><a id="l04428" name="l04428"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a4eaa08a8f4735ab687cf8856faaa5cec"> 4428</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a4eaa08a8f4735ab687cf8856faaa5cec">Mod_GenerateLightmaps_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l04429" name="l04429"></a><span class="lineno"> 4429</span>{</div>
<div class="line"><a id="l04430" name="l04430"></a><span class="lineno"> 4430</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 1)</div>
<div class="line"><a id="l04431" name="l04431"></a><span class="lineno"> 4431</span>    {</div>
<div class="line"><a id="l04432" name="l04432"></a><span class="lineno"> 4432</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: mod_generatelightmaps\n&quot;</span>);</div>
<div class="line"><a id="l04433" name="l04433"></a><span class="lineno"> 4433</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04434" name="l04434"></a><span class="lineno"> 4434</span>    }</div>
<div class="line"><a id="l04435" name="l04435"></a><span class="lineno"> 4435</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a>)</div>
<div class="line"><a id="l04436" name="l04436"></a><span class="lineno"> 4436</span>    {</div>
<div class="line"><a id="l04437" name="l04437"></a><span class="lineno"> 4437</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;no worldmodel loaded\n&quot;</span>);</div>
<div class="line"><a id="l04438" name="l04438"></a><span class="lineno"> 4438</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04439" name="l04439"></a><span class="lineno"> 4439</span>    }</div>
<div class="line"><a id="l04440" name="l04440"></a><span class="lineno"> 4440</span>    <a class="code hl_function" href="model__shared_8c.html#aa15e9db022ee22ecd89ebe6c1dd6ba42">Mod_GenerateLightmaps</a>(<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a>);</div>
<div class="line"><a id="l04441" name="l04441"></a><span class="lineno"> 4441</span>}</div>
</div>
<div class="line"><a id="l04442" name="l04442"></a><span class="lineno"> 4442</span> </div>
<div class="foldopen" id="foldopen04443" data-start="{" data-end="}">
<div class="line"><a id="l04443" name="l04443"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a181c7a7503f6fd6b20b5233da67b2cbc"> 4443</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a181c7a7503f6fd6b20b5233da67b2cbc">Mod_Mesh_Create</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>)</div>
<div class="line"><a id="l04444" name="l04444"></a><span class="lineno"> 4444</span>{</div>
<div class="line"><a id="l04445" name="l04445"></a><span class="lineno"> 4445</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(mod, 0, <span class="keyword">sizeof</span>(*mod));</div>
<div class="line"><a id="l04446" name="l04446"></a><span class="lineno"> 4446</span>    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keyword">sizeof</span>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>));</div>
<div class="line"><a id="l04447" name="l04447"></a><span class="lineno"> 4447</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a> = <a class="code hl_define" href="zone_8h.html#a7da6ffdd01b3d31cb7c89e68fad87d0d">Mem_AllocPool</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04448" name="l04448"></a><span class="lineno"> 4448</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a6d207a080d8ca69eecb6ca4ceb4cd98b">texturepool</a> = <a class="code hl_function" href="gl__textures_8c.html#ab60a02391841e828427f5cc24cb5dd29">R_AllocTexturePool</a>();</div>
<div class="line"><a id="l04449" name="l04449"></a><span class="lineno"> 4449</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4ad54aab83aca1c9ec564054f4019609">Draw</a> = <a class="code hl_function" href="gl__rsurf_8c.html#a904d7d0ff6adf58e411c3ffb80ca27c4">R_Mod_Draw</a>;</div>
<div class="line"><a id="l04450" name="l04450"></a><span class="lineno"> 4450</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a0c0d94b3f0503536ab0e6c0056d97df2">DrawDepth</a> = <a class="code hl_function" href="gl__rsurf_8c.html#aae83c1e7beee72d6cbfc03a0f0bd11bf">R_Mod_DrawDepth</a>;</div>
<div class="line"><a id="l04451" name="l04451"></a><span class="lineno"> 4451</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a7b670a69b5082781733cc0b9ebdc307a">DrawDebug</a> = <a class="code hl_function" href="gl__rsurf_8c.html#a6e528b203b784986a5b5bbf82ac387ff">R_Mod_DrawDebug</a>;</div>
<div class="line"><a id="l04452" name="l04452"></a><span class="lineno"> 4452</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a5a5b038598ccef5f670521d169edb025">DrawPrepass</a> = <a class="code hl_function" href="gl__rsurf_8c.html#ad8145eb3a0203496ea94da9834e098f0">R_Mod_DrawPrepass</a>;</div>
<div class="line"><a id="l04453" name="l04453"></a><span class="lineno"> 4453</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a7a0081b6e77854bd75ae206afba89148">GetLightInfo</a> = <a class="code hl_function" href="gl__rsurf_8c.html#a60a24c695566f11f38f592dc83d76869">R_Mod_GetLightInfo</a>;</div>
<div class="line"><a id="l04454" name="l04454"></a><span class="lineno"> 4454</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a71121e7ef28a949af258f4611ce21e9c">DrawShadowMap</a> = <a class="code hl_function" href="gl__rsurf_8c.html#aa4222887ff91555860ca9ab52531861c">R_Mod_DrawShadowMap</a>;</div>
<div class="line"><a id="l04455" name="l04455"></a><span class="lineno"> 4455</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#af206eaa0040c5a5e297fa1c0191b22dd">DrawLight</a> = <a class="code hl_function" href="gl__rsurf_8c.html#a89a46aef51c1b493184fcc71ee028236">R_Mod_DrawLight</a>;</div>
<div class="line"><a id="l04456" name="l04456"></a><span class="lineno"> 4456</span>}</div>
</div>
<div class="line"><a id="l04457" name="l04457"></a><span class="lineno"> 4457</span> </div>
<div class="foldopen" id="foldopen04458" data-start="{" data-end="}">
<div class="line"><a id="l04458" name="l04458"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a75b93f93a3e9816191d9625160bec6a4"> 4458</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a75b93f93a3e9816191d9625160bec6a4">Mod_Mesh_Destroy</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod)</div>
<div class="line"><a id="l04459" name="l04459"></a><span class="lineno"> 4459</span>{</div>
<div class="line"><a id="l04460" name="l04460"></a><span class="lineno"> 4460</span>    <a class="code hl_function" href="model__shared_8c.html#ab7bdd43d79cd365c41dc0903c8d3da9f">Mod_UnloadModel</a>(mod);</div>
<div class="line"><a id="l04461" name="l04461"></a><span class="lineno"> 4461</span>}</div>
</div>
<div class="line"><a id="l04462" name="l04462"></a><span class="lineno"> 4462</span> </div>
<div class="line"><a id="l04463" name="l04463"></a><span class="lineno"> 4463</span><span class="comment">// resets the mesh model to have no geometry to render, ready for a new frame -</span></div>
<div class="line"><a id="l04464" name="l04464"></a><span class="lineno"> 4464</span><span class="comment">// the mesh will be prepared for rendering later using Mod_Mesh_Finalize</span></div>
<div class="foldopen" id="foldopen04465" data-start="{" data-end="}">
<div class="line"><a id="l04465" name="l04465"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a191e480db71fa680ca320583e42060bb"> 4465</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a191e480db71fa680ca320583e42060bb">Mod_Mesh_Reset</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod)</div>
<div class="line"><a id="l04466" name="l04466"></a><span class="lineno"> 4466</span>{</div>
<div class="line"><a id="l04467" name="l04467"></a><span class="lineno"> 4467</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a> = 0;</div>
<div class="line"><a id="l04468" name="l04468"></a><span class="lineno"> 4468</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> = 0;</div>
<div class="line"><a id="l04469" name="l04469"></a><span class="lineno"> 4469</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> = 0;</div>
<div class="line"><a id="l04470" name="l04470"></a><span class="lineno"> 4470</span>    <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a30f9cd35774cd30ddb4919a89d44f9c9">data_vertexhash</a>) <span class="comment">// UBSan: memset arg 1 isn&#39;t allowed to be null, but sometimes this is NULL.</span></div>
<div class="line"><a id="l04471" name="l04471"></a><span class="lineno"> 4471</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a30f9cd35774cd30ddb4919a89d44f9c9">data_vertexhash</a>, -1, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aa7d8570bd6e81d63b4ae584144e091ee">num_vertexhashsize</a> * <span class="keyword">sizeof</span>(*mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a30f9cd35774cd30ddb4919a89d44f9c9">data_vertexhash</a>));</div>
<div class="line"><a id="l04472" name="l04472"></a><span class="lineno"> 4472</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a54bb4319ad425035cabd82548941faf3">DrawSky</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">// will be set if a texture needs it</span></div>
<div class="line"><a id="l04473" name="l04473"></a><span class="lineno"> 4473</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a5591540702848d10fc671916113de5f6">DrawAddWaterPlanes</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">// will be set if a texture needs it</span></div>
<div class="line"><a id="l04474" name="l04474"></a><span class="lineno"> 4474</span>}</div>
</div>
<div class="line"><a id="l04475" name="l04475"></a><span class="lineno"> 4475</span> </div>
<div class="foldopen" id="foldopen04476" data-start="{" data-end="}">
<div class="line"><a id="l04476" name="l04476"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a4733e9adbf3e39c180e794cfccc8734a"> 4476</a></span><a class="code hl_struct" href="structtexture__t.html">texture_t</a> *<a class="code hl_function" href="model__shared_8c.html#a4733e9adbf3e39c180e794cfccc8734a">Mod_Mesh_GetTexture</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultdrawflags</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaulttexflags</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultmaterialflags</a>)</div>
<div class="line"><a id="l04477" name="l04477"></a><span class="lineno"> 4477</span>{</div>
<div class="line"><a id="l04478" name="l04478"></a><span class="lineno"> 4478</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l04479" name="l04479"></a><span class="lineno"> 4479</span>    <a class="code hl_struct" href="structtexture__t.html">texture_t</a> *t;</div>
<div class="line"><a id="l04480" name="l04480"></a><span class="lineno"> 4480</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">drawflag</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultdrawflags</a> &amp; <a class="code hl_enumvalue" href="draw_8h.html#aeb1806e5d5237a283c9dc681f0e020ebab76027706764a44ebc32385e759a1e03">DRAWFLAG_MASK</a>;</div>
<div class="line"><a id="l04481" name="l04481"></a><span class="lineno"> 4481</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, t = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ac30e13239504da645c5e835eef8f559e">data_textures</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#abbf1bba30697f7bf6cfb28c79adfefe6">num_textures</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++, t++)</div>
<div class="line"><a id="l04482" name="l04482"></a><span class="lineno"> 4482</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(t-&gt;<a class="code hl_variable" href="structtexture__t.html#ab58f580cd561f4e52a20e92098a06e2f">name</a>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>) &amp;&amp; t-&gt;<a class="code hl_variable" href="structtexture__t.html#ac3bdb8fb6f5bdd8d31cb2bec345df9eb">mesh_drawflag</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">drawflag</a> &amp;&amp; t-&gt;<a class="code hl_variable" href="structtexture__t.html#ad5ff98c9436319f4471d9e6dda0428ed">mesh_defaulttexflags</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaulttexflags</a> &amp;&amp; t-&gt;<a class="code hl_variable" href="structtexture__t.html#afa08453814c5f7e285600818d42cadf0">mesh_defaultmaterialflags</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultmaterialflags</a>)</div>
<div class="line"><a id="l04483" name="l04483"></a><span class="lineno"> 4483</span>            <span class="keywordflow">return</span> t;</div>
<div class="line"><a id="l04484" name="l04484"></a><span class="lineno"> 4484</span>    <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aeb85007466c241068ac8eb78d82c0aca">max_textures</a> &lt;= mod-&gt;<a class="code hl_variable" href="structmodel__t.html#abbf1bba30697f7bf6cfb28c79adfefe6">num_textures</a>)</div>
<div class="line"><a id="l04485" name="l04485"></a><span class="lineno"> 4485</span>    {</div>
<div class="line"><a id="l04486" name="l04486"></a><span class="lineno"> 4486</span>        <a class="code hl_struct" href="structtexture__t.html">texture_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldtextures</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ac30e13239504da645c5e835eef8f559e">data_textures</a>;</div>
<div class="line"><a id="l04487" name="l04487"></a><span class="lineno"> 4487</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aeb85007466c241068ac8eb78d82c0aca">max_textures</a> = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aeb85007466c241068ac8eb78d82c0aca">max_textures</a> * 2, 1024);</div>
<div class="line"><a id="l04488" name="l04488"></a><span class="lineno"> 4488</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ac30e13239504da645c5e835eef8f559e">data_textures</a> = (<a class="code hl_struct" href="structtexture__t.html">texture_t</a> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ac30e13239504da645c5e835eef8f559e">data_textures</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aeb85007466c241068ac8eb78d82c0aca">max_textures</a> * <span class="keyword">sizeof</span>(*mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ac30e13239504da645c5e835eef8f559e">data_textures</a>));</div>
<div class="line"><a id="l04489" name="l04489"></a><span class="lineno"> 4489</span>        <span class="comment">// update the pointers</span></div>
<div class="line"><a id="l04490" name="l04490"></a><span class="lineno"> 4490</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04491" name="l04491"></a><span class="lineno"> 4491</span>            mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structmsurface__t.html#a7caa0cbcf942fc5d17d16ae8f212b91e">texture</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ac30e13239504da645c5e835eef8f559e">data_textures</a> + (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structmsurface__t.html#a7caa0cbcf942fc5d17d16ae8f212b91e">texture</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldtextures</a>);</div>
<div class="line"><a id="l04492" name="l04492"></a><span class="lineno"> 4492</span>    }</div>
<div class="line"><a id="l04493" name="l04493"></a><span class="lineno"> 4493</span>    t = &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ac30e13239504da645c5e835eef8f559e">data_textures</a>[mod-&gt;<a class="code hl_variable" href="structmodel__t.html#abbf1bba30697f7bf6cfb28c79adfefe6">num_textures</a>++];</div>
<div class="line"><a id="l04494" name="l04494"></a><span class="lineno"> 4494</span>    <a class="code hl_function" href="model__shared_8c.html#a1694c78ec74a4c2a96c00ea69cf44ef7">Mod_LoadTextureFromQ3Shader</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">name</a>, t, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keyword">true</span>, <span class="keyword">true</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaulttexflags</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultmaterialflags</a>);</div>
<div class="line"><a id="l04495" name="l04495"></a><span class="lineno"> 4495</span>    t-&gt;<a class="code hl_variable" href="structtexture__t.html#ac3bdb8fb6f5bdd8d31cb2bec345df9eb">mesh_drawflag</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">drawflag</a>;</div>
<div class="line"><a id="l04496" name="l04496"></a><span class="lineno"> 4496</span>    t-&gt;<a class="code hl_variable" href="structtexture__t.html#ad5ff98c9436319f4471d9e6dda0428ed">mesh_defaulttexflags</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaulttexflags</a>;</div>
<div class="line"><a id="l04497" name="l04497"></a><span class="lineno"> 4497</span>    t-&gt;<a class="code hl_variable" href="structtexture__t.html#afa08453814c5f7e285600818d42cadf0">mesh_defaultmaterialflags</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultmaterialflags</a>;</div>
<div class="line"><a id="l04498" name="l04498"></a><span class="lineno"> 4498</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultdrawflags</a> &amp; <a class="code hl_enumvalue" href="draw_8h.html#aeb1806e5d5237a283c9dc681f0e020ebab76027706764a44ebc32385e759a1e03">DRAWFLAG_MASK</a>)</div>
<div class="line"><a id="l04499" name="l04499"></a><span class="lineno"> 4499</span>    {</div>
<div class="line"><a id="l04500" name="l04500"></a><span class="lineno"> 4500</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="draw_8h.html#aeb1806e5d5237a283c9dc681f0e020eba32cf1e660c612a348fdf07ac3e84654a">DRAWFLAG_ADDITIVE</a>:</div>
<div class="line"><a id="l04501" name="l04501"></a><span class="lineno"> 4501</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#a8095d6a5de58938c8ef472c95eca6496">basematerialflags</a> |= <a class="code hl_define" href="model__brush_8h.html#a01917ff9223bf5f764ea1c9150d8b72d">MATERIALFLAG_ADD</a> | <a class="code hl_define" href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a>;</div>
<div class="line"><a id="l04502" name="l04502"></a><span class="lineno"> 4502</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#a3cf738577a78c45a3c19a2e1e649f804">currentmaterialflags</a> = t-&gt;<a class="code hl_variable" href="structtexture__t.html#a8095d6a5de58938c8ef472c95eca6496">basematerialflags</a>;</div>
<div class="line"><a id="l04503" name="l04503"></a><span class="lineno"> 4503</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04504" name="l04504"></a><span class="lineno"> 4504</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="draw_8h.html#aeb1806e5d5237a283c9dc681f0e020eba56d6898bb90fe54c49ff82b899026430">DRAWFLAG_MODULATE</a>:</div>
<div class="line"><a id="l04505" name="l04505"></a><span class="lineno"> 4505</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#a8095d6a5de58938c8ef472c95eca6496">basematerialflags</a> |= <a class="code hl_define" href="model__brush_8h.html#afd200d146636dc15acd310fa22c6b279">MATERIALFLAG_CUSTOMBLEND</a> | <a class="code hl_define" href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a>;</div>
<div class="line"><a id="l04506" name="l04506"></a><span class="lineno"> 4506</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#a3cf738577a78c45a3c19a2e1e649f804">currentmaterialflags</a> = t-&gt;<a class="code hl_variable" href="structtexture__t.html#a8095d6a5de58938c8ef472c95eca6496">basematerialflags</a>;</div>
<div class="line"><a id="l04507" name="l04507"></a><span class="lineno"> 4507</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#aff4828a20cb181943119b7c64e3540b0">customblendfunc</a>[0] = <a class="code hl_define" href="glquake_8h.html#acd2abef6afceea16ef19a117ae7fc3eb">GL_DST_COLOR</a>;</div>
<div class="line"><a id="l04508" name="l04508"></a><span class="lineno"> 4508</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#aff4828a20cb181943119b7c64e3540b0">customblendfunc</a>[1] = <a class="code hl_define" href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>;</div>
<div class="line"><a id="l04509" name="l04509"></a><span class="lineno"> 4509</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04510" name="l04510"></a><span class="lineno"> 4510</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="draw_8h.html#aeb1806e5d5237a283c9dc681f0e020eba8ab085e03109a167453fde05729ede6d">DRAWFLAG_2XMODULATE</a>:</div>
<div class="line"><a id="l04511" name="l04511"></a><span class="lineno"> 4511</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#a8095d6a5de58938c8ef472c95eca6496">basematerialflags</a> |= <a class="code hl_define" href="model__brush_8h.html#afd200d146636dc15acd310fa22c6b279">MATERIALFLAG_CUSTOMBLEND</a> | <a class="code hl_define" href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a>;</div>
<div class="line"><a id="l04512" name="l04512"></a><span class="lineno"> 4512</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#a3cf738577a78c45a3c19a2e1e649f804">currentmaterialflags</a> = t-&gt;<a class="code hl_variable" href="structtexture__t.html#a8095d6a5de58938c8ef472c95eca6496">basematerialflags</a>;</div>
<div class="line"><a id="l04513" name="l04513"></a><span class="lineno"> 4513</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#aff4828a20cb181943119b7c64e3540b0">customblendfunc</a>[0] = <a class="code hl_define" href="glquake_8h.html#acd2abef6afceea16ef19a117ae7fc3eb">GL_DST_COLOR</a>;</div>
<div class="line"><a id="l04514" name="l04514"></a><span class="lineno"> 4514</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#aff4828a20cb181943119b7c64e3540b0">customblendfunc</a>[1] = <a class="code hl_define" href="glquake_8h.html#a6adf6cffd6e7fc49298982128155b8dd">GL_SRC_COLOR</a>;</div>
<div class="line"><a id="l04515" name="l04515"></a><span class="lineno"> 4515</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04516" name="l04516"></a><span class="lineno"> 4516</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="draw_8h.html#aeb1806e5d5237a283c9dc681f0e020ebafaa6b09f403c77d1a757537f9ee4e9f2">DRAWFLAG_SCREEN</a>:</div>
<div class="line"><a id="l04517" name="l04517"></a><span class="lineno"> 4517</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#a8095d6a5de58938c8ef472c95eca6496">basematerialflags</a> |= <a class="code hl_define" href="model__brush_8h.html#afd200d146636dc15acd310fa22c6b279">MATERIALFLAG_CUSTOMBLEND</a> | <a class="code hl_define" href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a>;</div>
<div class="line"><a id="l04518" name="l04518"></a><span class="lineno"> 4518</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#a3cf738577a78c45a3c19a2e1e649f804">currentmaterialflags</a> = t-&gt;<a class="code hl_variable" href="structtexture__t.html#a8095d6a5de58938c8ef472c95eca6496">basematerialflags</a>;</div>
<div class="line"><a id="l04519" name="l04519"></a><span class="lineno"> 4519</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#aff4828a20cb181943119b7c64e3540b0">customblendfunc</a>[0] = <a class="code hl_define" href="glquake_8h.html#a4af4fbff7e4f93998f5bf914b19bd1dc">GL_ONE_MINUS_DST_COLOR</a>;</div>
<div class="line"><a id="l04520" name="l04520"></a><span class="lineno"> 4520</span>        t-&gt;<a class="code hl_variable" href="structtexture__t.html#aff4828a20cb181943119b7c64e3540b0">customblendfunc</a>[1] = <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>;</div>
<div class="line"><a id="l04521" name="l04521"></a><span class="lineno"> 4521</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04522" name="l04522"></a><span class="lineno"> 4522</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l04523" name="l04523"></a><span class="lineno"> 4523</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04524" name="l04524"></a><span class="lineno"> 4524</span>    }</div>
<div class="line"><a id="l04525" name="l04525"></a><span class="lineno"> 4525</span>    <span class="keywordflow">return</span> t;</div>
<div class="line"><a id="l04526" name="l04526"></a><span class="lineno"> 4526</span>}</div>
</div>
<div class="line"><a id="l04527" name="l04527"></a><span class="lineno"> 4527</span> </div>
<div class="foldopen" id="foldopen04528" data-start="{" data-end="}">
<div class="line"><a id="l04528" name="l04528"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a246d19129577709175692eab408c7ab9"> 4528</a></span><a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_function" href="model__shared_8c.html#a246d19129577709175692eab408c7ab9">Mod_Mesh_AddSurface</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod, <a class="code hl_struct" href="structtexture__t.html">texture_t</a> *tex, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">batchwithprevioussurface</a>)</div>
<div class="line"><a id="l04529" name="l04529"></a><span class="lineno"> 4529</span>{</div>
<div class="line"><a id="l04530" name="l04530"></a><span class="lineno"> 4530</span>    <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>;</div>
<div class="line"><a id="l04531" name="l04531"></a><span class="lineno"> 4531</span>    <span class="comment">// batch if possible; primarily useful for UI rendering where bounding boxes don&#39;t matter</span></div>
<div class="line"><a id="l04532" name="l04532"></a><span class="lineno"> 4532</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">batchwithprevioussurface</a> &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a> &gt; 0 &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a> - 1].<a class="code hl_variable" href="structmsurface__t.html#a7caa0cbcf942fc5d17d16ae8f212b91e">texture</a> == tex)</div>
<div class="line"><a id="l04533" name="l04533"></a><span class="lineno"> 4533</span>        <span class="keywordflow">return</span> mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a> - 1;</div>
<div class="line"><a id="l04534" name="l04534"></a><span class="lineno"> 4534</span>    <span class="comment">// create new surface</span></div>
<div class="line"><a id="l04535" name="l04535"></a><span class="lineno"> 4535</span>    <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ad087b11964d3db66d0e17c34e9400fef">max_surfaces</a> == mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>)</div>
<div class="line"><a id="l04536" name="l04536"></a><span class="lineno"> 4536</span>    {</div>
<div class="line"><a id="l04537" name="l04537"></a><span class="lineno"> 4537</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ad087b11964d3db66d0e17c34e9400fef">max_surfaces</a> = 2 * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>, 64);</div>
<div class="line"><a id="l04538" name="l04538"></a><span class="lineno"> 4538</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> = (<a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ad087b11964d3db66d0e17c34e9400fef">max_surfaces</a> * <span class="keyword">sizeof</span>(*mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>));</div>
<div class="line"><a id="l04539" name="l04539"></a><span class="lineno"> 4539</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a37ed77c0d67434b15280684a8ba42814">modelsurfaces_sorted</a> = (<span class="keywordtype">int</span> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a37ed77c0d67434b15280684a8ba42814">modelsurfaces_sorted</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ad087b11964d3db66d0e17c34e9400fef">max_surfaces</a> * <span class="keyword">sizeof</span>(*mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a37ed77c0d67434b15280684a8ba42814">modelsurfaces_sorted</a>));</div>
<div class="line"><a id="l04540" name="l04540"></a><span class="lineno"> 4540</span>    }</div>
<div class="line"><a id="l04541" name="l04541"></a><span class="lineno"> 4541</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>;</div>
<div class="line"><a id="l04542" name="l04542"></a><span class="lineno"> 4542</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>++;</div>
<div class="line"><a id="l04543" name="l04543"></a><span class="lineno"> 4543</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>, 0, <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>));</div>
<div class="line"><a id="l04544" name="l04544"></a><span class="lineno"> 4544</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;texture = tex;</div>
<div class="line"><a id="l04545" name="l04545"></a><span class="lineno"> 4545</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;num_firsttriangle = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>;</div>
<div class="line"><a id="l04546" name="l04546"></a><span class="lineno"> 4546</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;num_firstvertex = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>;</div>
<div class="line"><a id="l04547" name="l04547"></a><span class="lineno"> 4547</span>    <span class="keywordflow">if</span> (tex-&gt;<a class="code hl_variable" href="structtexture__t.html#a8095d6a5de58938c8ef472c95eca6496">basematerialflags</a> &amp; (<a class="code hl_define" href="model__brush_8h.html#a088347aa145a9d1bae60024278840b34">MATERIALFLAG_SKY</a>))</div>
<div class="line"><a id="l04548" name="l04548"></a><span class="lineno"> 4548</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a54bb4319ad425035cabd82548941faf3">DrawSky</a> = <a class="code hl_function" href="gl__rsurf_8c.html#a2a904ab23659bf4ac89dd053b69997a5">R_Mod_DrawSky</a>;</div>
<div class="line"><a id="l04549" name="l04549"></a><span class="lineno"> 4549</span>    <span class="keywordflow">if</span> (tex-&gt;<a class="code hl_variable" href="structtexture__t.html#a8095d6a5de58938c8ef472c95eca6496">basematerialflags</a> &amp; (<a class="code hl_define" href="model__brush_8h.html#a7055dcfb7e841b4f8df429bc32e9212f">MATERIALFLAG_WATERSHADER</a> | <a class="code hl_define" href="model__brush_8h.html#a22de374860637bd38095828d776a3028">MATERIALFLAG_REFRACTION</a> | <a class="code hl_define" href="model__brush_8h.html#aa7c4cb26c138264bb415dddb89455595">MATERIALFLAG_REFLECTION</a> | <a class="code hl_define" href="model__brush_8h.html#a80f07bef20c3c45b339d64917bf8a0b6">MATERIALFLAG_CAMERA</a>))</div>
<div class="line"><a id="l04550" name="l04550"></a><span class="lineno"> 4550</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a5591540702848d10fc671916113de5f6">DrawAddWaterPlanes</a> = <a class="code hl_function" href="gl__rsurf_8c.html#aab6edde929aa09b6f2ba17cd469f97ac">R_Mod_DrawAddWaterPlanes</a>;</div>
<div class="line"><a id="l04551" name="l04551"></a><span class="lineno"> 4551</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>;</div>
<div class="line"><a id="l04552" name="l04552"></a><span class="lineno"> 4552</span>}</div>
</div>
<div class="line"><a id="l04553" name="l04553"></a><span class="lineno"> 4553</span> </div>
<div class="foldopen" id="foldopen04554" data-start="{" data-end="}">
<div class="line"><a id="l04554" name="l04554"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a2c5f310267e30d353949da4aaa6a0940"> 4554</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="model__shared_8c.html#a2c5f310267e30d353949da4aaa6a0940">Mod_Mesh_IndexForVertex</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod, <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nx</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ny</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nz</a>, <span class="keywordtype">float</span> s, <span class="keywordtype">float</span> t, <span class="keywordtype">float</span> u, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a008e65201d4481545ed89903a22f667a">r</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a5ec19189388a37fcddc7258e29a40335">g</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>)</div>
<div class="line"><a id="l04555" name="l04555"></a><span class="lineno"> 4555</span>{</div>
<div class="line"><a id="l04556" name="l04556"></a><span class="lineno"> 4556</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hashindex</a>, h, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a>, <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l04557" name="l04557"></a><span class="lineno"> 4557</span>    <a class="code hl_struct" href="structsurfmesh__t.html">surfmesh_t</a> *mesh = &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>;</div>
<div class="line"><a id="l04558" name="l04558"></a><span class="lineno"> 4558</span>    <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a5d967e3e6fc6a8a2fd27a6540a1caaa3">max_vertices</a> == mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>)</div>
<div class="line"><a id="l04559" name="l04559"></a><span class="lineno"> 4559</span>    {</div>
<div class="line"><a id="l04560" name="l04560"></a><span class="lineno"> 4560</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a5d967e3e6fc6a8a2fd27a6540a1caaa3">max_vertices</a> = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * 2, 256);</div>
<div class="line"><a id="l04561" name="l04561"></a><span class="lineno"> 4561</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a5d967e3e6fc6a8a2fd27a6540a1caaa3">max_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l04562" name="l04562"></a><span class="lineno"> 4562</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a5d967e3e6fc6a8a2fd27a6540a1caaa3">max_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l04563" name="l04563"></a><span class="lineno"> 4563</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a5d967e3e6fc6a8a2fd27a6540a1caaa3">max_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l04564" name="l04564"></a><span class="lineno"> 4564</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a5d967e3e6fc6a8a2fd27a6540a1caaa3">max_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l04565" name="l04565"></a><span class="lineno"> 4565</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a5d967e3e6fc6a8a2fd27a6540a1caaa3">max_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]));</div>
<div class="line"><a id="l04566" name="l04566"></a><span class="lineno"> 4566</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a5d967e3e6fc6a8a2fd27a6540a1caaa3">max_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]));</div>
<div class="line"><a id="l04567" name="l04567"></a><span class="lineno"> 4567</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a5d967e3e6fc6a8a2fd27a6540a1caaa3">max_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[4]));</div>
<div class="line"><a id="l04568" name="l04568"></a><span class="lineno"> 4568</span>        <span class="comment">// rebuild the hash table</span></div>
<div class="line"><a id="l04569" name="l04569"></a><span class="lineno"> 4569</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#aa7d8570bd6e81d63b4ae584144e091ee">num_vertexhashsize</a> = 4 * mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a5d967e3e6fc6a8a2fd27a6540a1caaa3">max_vertices</a>;</div>
<div class="line"><a id="l04570" name="l04570"></a><span class="lineno"> 4570</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#aa7d8570bd6e81d63b4ae584144e091ee">num_vertexhashsize</a> &amp;= ~(mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#aa7d8570bd6e81d63b4ae584144e091ee">num_vertexhashsize</a> - 1); <span class="comment">// round down to pow2</span></div>
<div class="line"><a id="l04571" name="l04571"></a><span class="lineno"> 4571</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a30f9cd35774cd30ddb4919a89d44f9c9">data_vertexhash</a> = (<span class="keywordtype">int</span> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a30f9cd35774cd30ddb4919a89d44f9c9">data_vertexhash</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#aa7d8570bd6e81d63b4ae584144e091ee">num_vertexhashsize</a> * <span class="keyword">sizeof</span>(*mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a30f9cd35774cd30ddb4919a89d44f9c9">data_vertexhash</a>));</div>
<div class="line"><a id="l04572" name="l04572"></a><span class="lineno"> 4572</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a30f9cd35774cd30ddb4919a89d44f9c9">data_vertexhash</a>, -1, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#aa7d8570bd6e81d63b4ae584144e091ee">num_vertexhashsize</a> * <span class="keyword">sizeof</span>(*mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a30f9cd35774cd30ddb4919a89d44f9c9">data_vertexhash</a>));</div>
<div class="line"><a id="l04573" name="l04573"></a><span class="lineno"> 4573</span>        <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aa7d8570bd6e81d63b4ae584144e091ee">num_vertexhashsize</a> - 1;</div>
<div class="line"><a id="l04574" name="l04574"></a><span class="lineno"> 4574</span>        <span class="comment">// no need to hash the vertices for the entire model, the latest surface will suffice.</span></div>
<div class="line"><a id="l04575" name="l04575"></a><span class="lineno"> 4575</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a> ? <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;num_firstvertex : 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> &lt; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a>++)</div>
<div class="line"><a id="l04576" name="l04576"></a><span class="lineno"> 4576</span>        {</div>
<div class="line"><a id="l04577" name="l04577"></a><span class="lineno"> 4577</span>            <span class="comment">// this uses prime numbers intentionally for computing the hash</span></div>
<div class="line"><a id="l04578" name="l04578"></a><span class="lineno"> 4578</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hashindex</a> = (<span class="keywordtype">unsigned</span> <a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)(mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 0] * 2003 + mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 1] * 4001 + mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 2] * 7919 + mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 0] * 4097 + mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 1] * 257 + mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 2] * 17) &amp; <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l04579" name="l04579"></a><span class="lineno"> 4579</span>            <span class="keywordflow">for</span> (h = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hashindex</a>; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a30f9cd35774cd30ddb4919a89d44f9c9">data_vertexhash</a>[h] &gt;= 0; h = (h + 1) &amp; <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>)</div>
<div class="line"><a id="l04580" name="l04580"></a><span class="lineno"> 4580</span>                ; <span class="comment">// just iterate until we find the terminator</span></div>
<div class="line"><a id="l04581" name="l04581"></a><span class="lineno"> 4581</span>            mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a30f9cd35774cd30ddb4919a89d44f9c9">data_vertexhash</a>[h] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a>;</div>
<div class="line"><a id="l04582" name="l04582"></a><span class="lineno"> 4582</span>        }</div>
<div class="line"><a id="l04583" name="l04583"></a><span class="lineno"> 4583</span>    }</div>
<div class="line"><a id="l04584" name="l04584"></a><span class="lineno"> 4584</span>    <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aa7d8570bd6e81d63b4ae584144e091ee">num_vertexhashsize</a> - 1;</div>
<div class="line"><a id="l04585" name="l04585"></a><span class="lineno"> 4585</span>    <span class="comment">// this uses prime numbers intentionally for computing the hash</span></div>
<div class="line"><a id="l04586" name="l04586"></a><span class="lineno"> 4586</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hashindex</a> = (<span class="keywordtype">unsigned</span> <a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> * 2003 + <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> * 4001 + <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a> * 7919 + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nx</a> * 4097 + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ny</a> * 257 + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nz</a> * 17) &amp; <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l04587" name="l04587"></a><span class="lineno"> 4587</span>    <span class="comment">// when possible find an identical vertex within the same surface and return it</span></div>
<div class="line"><a id="l04588" name="l04588"></a><span class="lineno"> 4588</span>    <span class="keywordflow">for</span>(h = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hashindex</a>;(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> = mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a30f9cd35774cd30ddb4919a89d44f9c9">data_vertexhash</a>[h]) &gt;= 0;h = (h + 1) &amp; <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>)</div>
<div class="line"><a id="l04589" name="l04589"></a><span class="lineno"> 4589</span>    {</div>
<div class="line"><a id="l04590" name="l04590"></a><span class="lineno"> 4590</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;num_firstvertex</div>
<div class="line"><a id="l04591" name="l04591"></a><span class="lineno"> 4591</span>         &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 0] == <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 1] == <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 2] == <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a></div>
<div class="line"><a id="l04592" name="l04592"></a><span class="lineno"> 4592</span>         &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 0] == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nx</a> &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 1] == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ny</a> &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 2] == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nz</a></div>
<div class="line"><a id="l04593" name="l04593"></a><span class="lineno"> 4593</span>         &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 2 + 0] == s &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 2 + 1] == t</div>
<div class="line"><a id="l04594" name="l04594"></a><span class="lineno"> 4594</span>         &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 2 + 0] == u &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 2 + 1] == <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a></div>
<div class="line"><a id="l04595" name="l04595"></a><span class="lineno"> 4595</span>         &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 4 + 0] == <a class="code hl_variable" href="shader__glsl_8h.html#a008e65201d4481545ed89903a22f667a">r</a> &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 4 + 1] == <a class="code hl_variable" href="shader__glsl_8h.html#a5ec19189388a37fcddc7258e29a40335">g</a> &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 4 + 2] == <a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a> &amp;&amp; mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 4 + 3] == <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>)</div>
<div class="line"><a id="l04596" name="l04596"></a><span class="lineno"> 4596</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a>;</div>
<div class="line"><a id="l04597" name="l04597"></a><span class="lineno"> 4597</span>    }</div>
<div class="line"><a id="l04598" name="l04598"></a><span class="lineno"> 4598</span>    <span class="comment">// add the new vertex</span></div>
<div class="line"><a id="l04599" name="l04599"></a><span class="lineno"> 4599</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> = mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>++;</div>
<div class="line"><a id="l04600" name="l04600"></a><span class="lineno"> 4600</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;num_vertices &gt; 0)</div>
<div class="line"><a id="l04601" name="l04601"></a><span class="lineno"> 4601</span>    {</div>
<div class="line"><a id="l04602" name="l04602"></a><span class="lineno"> 4602</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;mins[0] &gt; <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;mins[0] = <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>;</div>
<div class="line"><a id="l04603" name="l04603"></a><span class="lineno"> 4603</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;mins[1] &gt; <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;mins[1] = <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>;</div>
<div class="line"><a id="l04604" name="l04604"></a><span class="lineno"> 4604</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;mins[2] &gt; <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;mins[2] = <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>;</div>
<div class="line"><a id="l04605" name="l04605"></a><span class="lineno"> 4605</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;maxs[0] &lt; <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;maxs[0] = <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>;</div>
<div class="line"><a id="l04606" name="l04606"></a><span class="lineno"> 4606</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;maxs[1] &lt; <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;maxs[1] = <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>;</div>
<div class="line"><a id="l04607" name="l04607"></a><span class="lineno"> 4607</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;maxs[2] &lt; <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;maxs[2] = <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>;</div>
<div class="line"><a id="l04608" name="l04608"></a><span class="lineno"> 4608</span>    }</div>
<div class="line"><a id="l04609" name="l04609"></a><span class="lineno"> 4609</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l04610" name="l04610"></a><span class="lineno"> 4610</span>    {</div>
<div class="line"><a id="l04611" name="l04611"></a><span class="lineno"> 4611</span>        <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;mins, <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>);</div>
<div class="line"><a id="l04612" name="l04612"></a><span class="lineno"> 4612</span>        <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;maxs, <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>);</div>
<div class="line"><a id="l04613" name="l04613"></a><span class="lineno"> 4613</span>    }</div>
<div class="line"><a id="l04614" name="l04614"></a><span class="lineno"> 4614</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;num_vertices = mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;num_firstvertex;</div>
<div class="line"><a id="l04615" name="l04615"></a><span class="lineno"> 4615</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a30f9cd35774cd30ddb4919a89d44f9c9">data_vertexhash</a>[h] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a>;</div>
<div class="line"><a id="l04616" name="l04616"></a><span class="lineno"> 4616</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 0] = <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>;</div>
<div class="line"><a id="l04617" name="l04617"></a><span class="lineno"> 4617</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 1] = <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>;</div>
<div class="line"><a id="l04618" name="l04618"></a><span class="lineno"> 4618</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 2] = <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>;</div>
<div class="line"><a id="l04619" name="l04619"></a><span class="lineno"> 4619</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nx</a>;</div>
<div class="line"><a id="l04620" name="l04620"></a><span class="lineno"> 4620</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ny</a>;</div>
<div class="line"><a id="l04621" name="l04621"></a><span class="lineno"> 4621</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 3 + 2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nz</a>;</div>
<div class="line"><a id="l04622" name="l04622"></a><span class="lineno"> 4622</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 2 + 0] = s;</div>
<div class="line"><a id="l04623" name="l04623"></a><span class="lineno"> 4623</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 2 + 1] = t;</div>
<div class="line"><a id="l04624" name="l04624"></a><span class="lineno"> 4624</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 2 + 0] = u;</div>
<div class="line"><a id="l04625" name="l04625"></a><span class="lineno"> 4625</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 2 + 1] = <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>;</div>
<div class="line"><a id="l04626" name="l04626"></a><span class="lineno"> 4626</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 4 + 0] = <a class="code hl_variable" href="shader__glsl_8h.html#a008e65201d4481545ed89903a22f667a">r</a>;</div>
<div class="line"><a id="l04627" name="l04627"></a><span class="lineno"> 4627</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 4 + 1] = <a class="code hl_variable" href="shader__glsl_8h.html#a5ec19189388a37fcddc7258e29a40335">g</a>;</div>
<div class="line"><a id="l04628" name="l04628"></a><span class="lineno"> 4628</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 4 + 2] = <a class="code hl_variable" href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a>;</div>
<div class="line"><a id="l04629" name="l04629"></a><span class="lineno"> 4629</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a> * 4 + 3] = <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>;</div>
<div class="line"><a id="l04630" name="l04630"></a><span class="lineno"> 4630</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vnum</a>;</div>
<div class="line"><a id="l04631" name="l04631"></a><span class="lineno"> 4631</span>}</div>
</div>
<div class="line"><a id="l04632" name="l04632"></a><span class="lineno"> 4632</span> </div>
<div class="foldopen" id="foldopen04633" data-start="{" data-end="}">
<div class="line"><a id="l04633" name="l04633"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a537803427b478758ce6c99781943b12d"> 4633</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a537803427b478758ce6c99781943b12d">Mod_Mesh_AddTriangle</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod, <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e0</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e1</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e2</a>)</div>
<div class="line"><a id="l04634" name="l04634"></a><span class="lineno"> 4634</span>{</div>
<div class="line"><a id="l04635" name="l04635"></a><span class="lineno"> 4635</span>    <a class="code hl_struct" href="structsurfmesh__t.html">surfmesh_t</a> *mesh = &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>;</div>
<div class="line"><a id="l04636" name="l04636"></a><span class="lineno"> 4636</span>    <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6479eddc63fd441c963b4204d5da13d6">max_triangles</a> == mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>)</div>
<div class="line"><a id="l04637" name="l04637"></a><span class="lineno"> 4637</span>    {</div>
<div class="line"><a id="l04638" name="l04638"></a><span class="lineno"> 4638</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6479eddc63fd441c963b4204d5da13d6">max_triangles</a> = 2 * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>, 128);</div>
<div class="line"><a id="l04639" name="l04639"></a><span class="lineno"> 4639</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6479eddc63fd441c963b4204d5da13d6">max_triangles</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>[3]));</div>
<div class="line"><a id="l04640" name="l04640"></a><span class="lineno"> 4640</span>        mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a> = (<span class="keywordtype">int</span> *)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">mempool</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>, mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6479eddc63fd441c963b4204d5da13d6">max_triangles</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>[3]));</div>
<div class="line"><a id="l04641" name="l04641"></a><span class="lineno"> 4641</span>    }</div>
<div class="line"><a id="l04642" name="l04642"></a><span class="lineno"> 4642</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a>[mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> * 3 + 0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e0</a>;</div>
<div class="line"><a id="l04643" name="l04643"></a><span class="lineno"> 4643</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a>[mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> * 3 + 1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e1</a>;</div>
<div class="line"><a id="l04644" name="l04644"></a><span class="lineno"> 4644</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a>[mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> * 3 + 2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e2</a>;</div>
<div class="line"><a id="l04645" name="l04645"></a><span class="lineno"> 4645</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>[mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> * 3 + 0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e0</a>;</div>
<div class="line"><a id="l04646" name="l04646"></a><span class="lineno"> 4646</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>[mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> * 3 + 1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e1</a>;</div>
<div class="line"><a id="l04647" name="l04647"></a><span class="lineno"> 4647</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>[mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> * 3 + 2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e2</a>;</div>
<div class="line"><a id="l04648" name="l04648"></a><span class="lineno"> 4648</span>    mesh-&gt;<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>++;</div>
<div class="line"><a id="l04649" name="l04649"></a><span class="lineno"> 4649</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;num_triangles++;</div>
<div class="line"><a id="l04650" name="l04650"></a><span class="lineno"> 4650</span>}</div>
</div>
<div class="line"><a id="l04651" name="l04651"></a><span class="lineno"> 4651</span> </div>
<div class="foldopen" id="foldopen04652" data-start="{" data-end="}">
<div class="line"><a id="l04652" name="l04652"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ae43c18a3823bc981f25fc8a476b32058"> 4652</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#ae43c18a3823bc981f25fc8a476b32058">Mod_Mesh_MakeSortedSurfaces</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod)</div>
<div class="line"><a id="l04653" name="l04653"></a><span class="lineno"> 4653</span>{</div>
<div class="line"><a id="l04654" name="l04654"></a><span class="lineno"> 4654</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>;</div>
<div class="line"><a id="l04655" name="l04655"></a><span class="lineno"> 4655</span>    <a class="code hl_struct" href="structtexture__t.html">texture_t</a> *tex;</div>
<div class="line"><a id="l04656" name="l04656"></a><span class="lineno"> 4656</span> </div>
<div class="line"><a id="l04657" name="l04657"></a><span class="lineno"> 4657</span>    <span class="comment">// build the sorted surfaces list properly to reduce material setup</span></div>
<div class="line"><a id="l04658" name="l04658"></a><span class="lineno"> 4658</span>    <span class="comment">// this is easy because we&#39;re just sorting on texture and don&#39;t care about the order of textures</span></div>
<div class="line"><a id="l04659" name="l04659"></a><span class="lineno"> 4659</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">submodelsurfaces_start</a> = 0;</div>
<div class="line"><a id="l04660" name="l04660"></a><span class="lineno"> 4660</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a3cf3f78e305583268585ef7bde7aaa16">submodelsurfaces_end</a> = 0;</div>
<div class="line"><a id="l04661" name="l04661"></a><span class="lineno"> 4661</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04662" name="l04662"></a><span class="lineno"> 4662</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structmsurface__t.html#a88220cc80f9a2ab468e8cf008d3e0fae">included</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04663" name="l04663"></a><span class="lineno"> 4663</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04664" name="l04664"></a><span class="lineno"> 4664</span>    {</div>
<div class="line"><a id="l04665" name="l04665"></a><span class="lineno"> 4665</span>        <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structmsurface__t.html#a88220cc80f9a2ab468e8cf008d3e0fae">included</a>)</div>
<div class="line"><a id="l04666" name="l04666"></a><span class="lineno"> 4666</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04667" name="l04667"></a><span class="lineno"> 4667</span>        tex = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structmsurface__t.html#a7caa0cbcf942fc5d17d16ae8f212b91e">texture</a>;</div>
<div class="line"><a id="l04668" name="l04668"></a><span class="lineno"> 4668</span>        <span class="comment">// j = i is intentional</span></div>
<div class="line"><a id="l04669" name="l04669"></a><span class="lineno"> 4669</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l04670" name="l04670"></a><span class="lineno"> 4670</span>        {</div>
<div class="line"><a id="l04671" name="l04671"></a><span class="lineno"> 4671</span>            <span class="keywordflow">if</span> (!mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmsurface__t.html#a88220cc80f9a2ab468e8cf008d3e0fae">included</a> &amp;&amp; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmsurface__t.html#a7caa0cbcf942fc5d17d16ae8f212b91e">texture</a> == tex)</div>
<div class="line"><a id="l04672" name="l04672"></a><span class="lineno"> 4672</span>            {</div>
<div class="line"><a id="l04673" name="l04673"></a><span class="lineno"> 4673</span>                mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmsurface__t.html#a88220cc80f9a2ab468e8cf008d3e0fae">included</a> = 1;</div>
<div class="line"><a id="l04674" name="l04674"></a><span class="lineno"> 4674</span>                mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a37ed77c0d67434b15280684a8ba42814">modelsurfaces_sorted</a>[mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a3cf3f78e305583268585ef7bde7aaa16">submodelsurfaces_end</a>++] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>;</div>
<div class="line"><a id="l04675" name="l04675"></a><span class="lineno"> 4675</span>            }</div>
<div class="line"><a id="l04676" name="l04676"></a><span class="lineno"> 4676</span>        }</div>
<div class="line"><a id="l04677" name="l04677"></a><span class="lineno"> 4677</span>    }</div>
<div class="line"><a id="l04678" name="l04678"></a><span class="lineno"> 4678</span>}</div>
</div>
<div class="line"><a id="l04679" name="l04679"></a><span class="lineno"> 4679</span> </div>
<div class="foldopen" id="foldopen04680" data-start="{" data-end="}">
<div class="line"><a id="l04680" name="l04680"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a23ab54798c29a2f649842ed4dc412f7e"> 4680</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a23ab54798c29a2f649842ed4dc412f7e">Mod_Mesh_ComputeBounds</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod)</div>
<div class="line"><a id="l04681" name="l04681"></a><span class="lineno"> 4681</span>{</div>
<div class="line"><a id="l04682" name="l04682"></a><span class="lineno"> 4682</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l04683" name="l04683"></a><span class="lineno"> 4683</span>    <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">x2a</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">x2b</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">y2a</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">y2b</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">z2a</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">z2b</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a7c522f1c5d1635549573e2118306b8a3">x2</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a792764868a6181a44be59a390fced652">y2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">z2</a>, yawradius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rotatedradius</a>;</div>
<div class="line"><a id="l04684" name="l04684"></a><span class="lineno"> 4684</span> </div>
<div class="line"><a id="l04685" name="l04685"></a><span class="lineno"> 4685</span>    <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> &gt; 0)</div>
<div class="line"><a id="l04686" name="l04686"></a><span class="lineno"> 4686</span>    {</div>
<div class="line"><a id="l04687" name="l04687"></a><span class="lineno"> 4687</span>        <span class="comment">// calculate normalmins/normalmaxs</span></div>
<div class="line"><a id="l04688" name="l04688"></a><span class="lineno"> 4688</span>        <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>);</div>
<div class="line"><a id="l04689" name="l04689"></a><span class="lineno"> 4689</span>        <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>);</div>
<div class="line"><a id="l04690" name="l04690"></a><span class="lineno"> 4690</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04691" name="l04691"></a><span class="lineno"> 4691</span>        {</div>
<div class="line"><a id="l04692" name="l04692"></a><span class="lineno"> 4692</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> * 3 + 0];</div>
<div class="line"><a id="l04693" name="l04693"></a><span class="lineno"> 4693</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> * 3 + 1];</div>
<div class="line"><a id="l04694" name="l04694"></a><span class="lineno"> 4694</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> * 3 + 2];</div>
<div class="line"><a id="l04695" name="l04695"></a><span class="lineno"> 4695</span>            <span class="comment">// expand bounds to include this vertex</span></div>
<div class="line"><a id="l04696" name="l04696"></a><span class="lineno"> 4696</span>            <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[0] &gt; <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>) mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[0] = <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>;</div>
<div class="line"><a id="l04697" name="l04697"></a><span class="lineno"> 4697</span>            <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[1] &gt; <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>) mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[1] = <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>;</div>
<div class="line"><a id="l04698" name="l04698"></a><span class="lineno"> 4698</span>            <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[2] &gt; <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>) mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[2] = <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>;</div>
<div class="line"><a id="l04699" name="l04699"></a><span class="lineno"> 4699</span>            <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[0] &lt; <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>) mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[0] = <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>;</div>
<div class="line"><a id="l04700" name="l04700"></a><span class="lineno"> 4700</span>            <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[1] &lt; <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>) mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[1] = <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>;</div>
<div class="line"><a id="l04701" name="l04701"></a><span class="lineno"> 4701</span>            <span class="keywordflow">if</span> (mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[2] &lt; <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>) mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[2] = <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>;</div>
<div class="line"><a id="l04702" name="l04702"></a><span class="lineno"> 4702</span>        }</div>
<div class="line"><a id="l04703" name="l04703"></a><span class="lineno"> 4703</span>        <span class="comment">// calculate yawmins/yawmaxs, rotatedmins/maxs from normalmins/maxs</span></div>
<div class="line"><a id="l04704" name="l04704"></a><span class="lineno"> 4704</span>        <span class="comment">// (fast but less accurate than doing it per vertex)</span></div>
<div class="line"><a id="l04705" name="l04705"></a><span class="lineno"> 4705</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">x2a</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[0] * mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[0];</div>
<div class="line"><a id="l04706" name="l04706"></a><span class="lineno"> 4706</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">x2b</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[0] * mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[0];</div>
<div class="line"><a id="l04707" name="l04707"></a><span class="lineno"> 4707</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">y2a</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[1] * mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[1];</div>
<div class="line"><a id="l04708" name="l04708"></a><span class="lineno"> 4708</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">y2b</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[1] * mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[1];</div>
<div class="line"><a id="l04709" name="l04709"></a><span class="lineno"> 4709</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">z2a</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[2] * mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[2];</div>
<div class="line"><a id="l04710" name="l04710"></a><span class="lineno"> 4710</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">z2b</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[2] * mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[2];</div>
<div class="line"><a id="l04711" name="l04711"></a><span class="lineno"> 4711</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a7c522f1c5d1635549573e2118306b8a3">x2</a> = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">x2a</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">x2b</a>);</div>
<div class="line"><a id="l04712" name="l04712"></a><span class="lineno"> 4712</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a792764868a6181a44be59a390fced652">y2</a> = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">y2a</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">y2b</a>);</div>
<div class="line"><a id="l04713" name="l04713"></a><span class="lineno"> 4713</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">z2</a> = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">z2a</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">z2b</a>);</div>
<div class="line"><a id="l04714" name="l04714"></a><span class="lineno"> 4714</span>        yawradius = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a7c522f1c5d1635549573e2118306b8a3">x2</a> + <a class="code hl_variable" href="shader__glsl_8h.html#a792764868a6181a44be59a390fced652">y2</a>);</div>
<div class="line"><a id="l04715" name="l04715"></a><span class="lineno"> 4715</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rotatedradius</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a7c522f1c5d1635549573e2118306b8a3">x2</a> + <a class="code hl_variable" href="shader__glsl_8h.html#a792764868a6181a44be59a390fced652">y2</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">z2</a>);</div>
<div class="line"><a id="l04716" name="l04716"></a><span class="lineno"> 4716</span>        <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a90f05444c8d96adeaec3beffe4fed932">yawmins</a>, -yawradius, -yawradius, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[2]);</div>
<div class="line"><a id="l04717" name="l04717"></a><span class="lineno"> 4717</span>        <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a3324a3bec6a016ede4ee308695500bf9">yawmaxs</a>, yawradius, yawradius, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[2]);</div>
<div class="line"><a id="l04718" name="l04718"></a><span class="lineno"> 4718</span>        <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a2c2034d2a113cadab48c388065c65335">rotatedmins</a>, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rotatedradius</a>, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rotatedradius</a>, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rotatedradius</a>);</div>
<div class="line"><a id="l04719" name="l04719"></a><span class="lineno"> 4719</span>        <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a42b76bd94570c0130a33e4dae79f03e5">rotatedmaxs</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rotatedradius</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rotatedradius</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rotatedradius</a>);</div>
<div class="line"><a id="l04720" name="l04720"></a><span class="lineno"> 4720</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rotatedradius</a>;</div>
<div class="line"><a id="l04721" name="l04721"></a><span class="lineno"> 4721</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a0629c0fdc502c92975be054a2b6dd9e6">radius2</a> = <a class="code hl_variable" href="shader__glsl_8h.html#a7c522f1c5d1635549573e2118306b8a3">x2</a> + <a class="code hl_variable" href="shader__glsl_8h.html#a792764868a6181a44be59a390fced652">y2</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">z2</a>;</div>
<div class="line"><a id="l04722" name="l04722"></a><span class="lineno"> 4722</span>    }</div>
<div class="line"><a id="l04723" name="l04723"></a><span class="lineno"> 4723</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l04724" name="l04724"></a><span class="lineno"> 4724</span>    {</div>
<div class="line"><a id="l04725" name="l04725"></a><span class="lineno"> 4725</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>);</div>
<div class="line"><a id="l04726" name="l04726"></a><span class="lineno"> 4726</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>);</div>
<div class="line"><a id="l04727" name="l04727"></a><span class="lineno"> 4727</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a90f05444c8d96adeaec3beffe4fed932">yawmins</a>);</div>
<div class="line"><a id="l04728" name="l04728"></a><span class="lineno"> 4728</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a3324a3bec6a016ede4ee308695500bf9">yawmaxs</a>);</div>
<div class="line"><a id="l04729" name="l04729"></a><span class="lineno"> 4729</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a2c2034d2a113cadab48c388065c65335">rotatedmins</a>);</div>
<div class="line"><a id="l04730" name="l04730"></a><span class="lineno"> 4730</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a42b76bd94570c0130a33e4dae79f03e5">rotatedmaxs</a>);</div>
<div class="line"><a id="l04731" name="l04731"></a><span class="lineno"> 4731</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">radius</a> = 0;</div>
<div class="line"><a id="l04732" name="l04732"></a><span class="lineno"> 4732</span>        mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a0629c0fdc502c92975be054a2b6dd9e6">radius2</a> = 0;</div>
<div class="line"><a id="l04733" name="l04733"></a><span class="lineno"> 4733</span>    }</div>
<div class="line"><a id="l04734" name="l04734"></a><span class="lineno"> 4734</span>}</div>
</div>
<div class="line"><a id="l04735" name="l04735"></a><span class="lineno"> 4735</span> </div>
<div class="foldopen" id="foldopen04736" data-start="{" data-end="}">
<div class="line"><a id="l04736" name="l04736"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a3ad808fbef6d1b76547423b537ae975c"> 4736</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a3ad808fbef6d1b76547423b537ae975c">Mod_Mesh_Validate</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod)</div>
<div class="line"><a id="l04737" name="l04737"></a><span class="lineno"> 4737</span>{</div>
<div class="line"><a id="l04738" name="l04738"></a><span class="lineno"> 4738</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l04739" name="l04739"></a><span class="lineno"> 4739</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">warned</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04740" name="l04740"></a><span class="lineno"> 4740</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mod-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04741" name="l04741"></a><span class="lineno"> 4741</span>    {</div>
<div class="line"><a id="l04742" name="l04742"></a><span class="lineno"> 4742</span>        <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l04743" name="l04743"></a><span class="lineno"> 4743</span>        <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;num_firsttriangle * 3;</div>
<div class="line"><a id="l04744" name="l04744"></a><span class="lineno"> 4744</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;num_firstvertex;</div>
<div class="line"><a id="l04745" name="l04745"></a><span class="lineno"> 4745</span>        <span class="keywordtype">int</span> end = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;num_firstvertex + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;num_vertices;</div>
<div class="line"><a id="l04746" name="l04746"></a><span class="lineno"> 4746</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>;</div>
<div class="line"><a id="l04747" name="l04747"></a><span class="lineno"> 4747</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surf</a>-&gt;num_triangles * 3;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l04748" name="l04748"></a><span class="lineno"> 4748</span>        {</div>
<div class="line"><a id="l04749" name="l04749"></a><span class="lineno"> 4749</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>] &lt; <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>] &gt;= end)</div>
<div class="line"><a id="l04750" name="l04750"></a><span class="lineno"> 4750</span>            {</div>
<div class="line"><a id="l04751" name="l04751"></a><span class="lineno"> 4751</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">warned</a>)</div>
<div class="line"><a id="l04752" name="l04752"></a><span class="lineno"> 4752</span>                    <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;Mod_Mesh_Validate: detected corrupt surface - debug me!\n&quot;</span>);</div>
<div class="line"><a id="l04753" name="l04753"></a><span class="lineno"> 4753</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">warned</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04754" name="l04754"></a><span class="lineno"> 4754</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>] = <a class="code hl_variable" href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a>;</div>
<div class="line"><a id="l04755" name="l04755"></a><span class="lineno"> 4755</span>            }</div>
<div class="line"><a id="l04756" name="l04756"></a><span class="lineno"> 4756</span>        }</div>
<div class="line"><a id="l04757" name="l04757"></a><span class="lineno"> 4757</span>    }</div>
<div class="line"><a id="l04758" name="l04758"></a><span class="lineno"> 4758</span>}</div>
</div>
<div class="line"><a id="l04759" name="l04759"></a><span class="lineno"> 4759</span> </div>
<div class="foldopen" id="foldopen04760" data-start="{" data-end="}">
<div class="line"><a id="l04760" name="l04760"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a571533146ba632ac37f6bced432b8fc1"> 4760</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#a571533146ba632ac37f6bced432b8fc1">Mod_Mesh_UploadDynamicBuffers</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod)</div>
<div class="line"><a id="l04761" name="l04761"></a><span class="lineno"> 4761</span>{</div>
<div class="line"><a id="l04762" name="l04762"></a><span class="lineno"> 4762</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af47d08768f0e0a846c272a9a8d443d03">data_element3s_indexbuffer</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a> ? <a class="code hl_function" href="gl__rmain_8c.html#aec7bc0ca362a947a2d73772dc890914f">R_BufferData_Store</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">short</span>[3]), mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">data_element3s</a>, <a class="code hl_enumvalue" href="render_8h.html#a05925249af134e5ab3a654246dc30267af062055968f7353a7dea8adb75394c9d">R_BUFFERDATA_INDEX16</a>, &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a0fcecbac688c51080a69cce25e1e1aa1">data_element3s_bufferoffset</a>) : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04763" name="l04763"></a><span class="lineno"> 4763</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a85cf7a011550b759899f963c1f68c98b">data_element3i_indexbuffer</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a> ? <a class="code hl_function" href="gl__rmain_8c.html#aec7bc0ca362a947a2d73772dc890914f">R_BufferData_Store</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>[3]), mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>, <a class="code hl_enumvalue" href="render_8h.html#a05925249af134e5ab3a654246dc30267abb22b0361cb53a74370b7e4e37ba02ef">R_BUFFERDATA_INDEX32</a>, &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a275c764d172dfe1774facdb3ed5546fd">data_element3i_bufferoffset</a>) : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04764" name="l04764"></a><span class="lineno"> 4764</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">data_vertex3f_vertexbuffer</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a> ? <a class="code hl_function" href="gl__rmain_8c.html#aec7bc0ca362a947a2d73772dc890914f">R_BufferData_Store</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]), mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>, <a class="code hl_enumvalue" href="render_8h.html#a05925249af134e5ab3a654246dc30267a1208ab8e7e5a6b3389ad4203dbe747f1">R_BUFFERDATA_VERTEX</a>, &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ae5d89f1c30eff8f6a177e74504e20d9c">data_vertex3f_bufferoffset</a>) : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04765" name="l04765"></a><span class="lineno"> 4765</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a0064f2925b91731163e286f6ff0f5a76">data_svector3f_vertexbuffer</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a> ? <a class="code hl_function" href="gl__rmain_8c.html#aec7bc0ca362a947a2d73772dc890914f">R_BufferData_Store</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]), mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a>, <a class="code hl_enumvalue" href="render_8h.html#a05925249af134e5ab3a654246dc30267a1208ab8e7e5a6b3389ad4203dbe747f1">R_BUFFERDATA_VERTEX</a>, &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a41ce86dc0eefb29272f7d1e77238200a">data_svector3f_bufferoffset</a>) : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04766" name="l04766"></a><span class="lineno"> 4766</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7fc323b763071fa72a24bd51b88e1f0c">data_tvector3f_vertexbuffer</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a> ? <a class="code hl_function" href="gl__rmain_8c.html#aec7bc0ca362a947a2d73772dc890914f">R_BufferData_Store</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]), mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a>, <a class="code hl_enumvalue" href="render_8h.html#a05925249af134e5ab3a654246dc30267a1208ab8e7e5a6b3389ad4203dbe747f1">R_BUFFERDATA_VERTEX</a>, &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab251f4a29a88b99365ea3a65a49700f6">data_tvector3f_bufferoffset</a>) : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04767" name="l04767"></a><span class="lineno"> 4767</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a1fc3a10501c13b8da40b66116d8818b7">data_normal3f_vertexbuffer</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a> ? <a class="code hl_function" href="gl__rmain_8c.html#aec7bc0ca362a947a2d73772dc890914f">R_BufferData_Store</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]), mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>, <a class="code hl_enumvalue" href="render_8h.html#a05925249af134e5ab3a654246dc30267a1208ab8e7e5a6b3389ad4203dbe747f1">R_BUFFERDATA_VERTEX</a>, &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a092c9af0ece66606a1a46ddc256c87d0">data_normal3f_bufferoffset</a>) : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04768" name="l04768"></a><span class="lineno"> 4768</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7767026390ac39c88f7ce4d6f6432bfd">data_texcoordtexture2f_vertexbuffer</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a> ? <a class="code hl_function" href="gl__rmain_8c.html#aec7bc0ca362a947a2d73772dc890914f">R_BufferData_Store</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]), mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a>, <a class="code hl_enumvalue" href="render_8h.html#a05925249af134e5ab3a654246dc30267a1208ab8e7e5a6b3389ad4203dbe747f1">R_BUFFERDATA_VERTEX</a>, &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab13056777e09fa6109ab2c528389e0a9">data_texcoordtexture2f_bufferoffset</a>) : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04769" name="l04769"></a><span class="lineno"> 4769</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#acc34f19933b25ec4138101d2da7c0402">data_texcoordlightmap2f_vertexbuffer</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a> ? <a class="code hl_function" href="gl__rmain_8c.html#aec7bc0ca362a947a2d73772dc890914f">R_BufferData_Store</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[2]), mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">data_texcoordlightmap2f</a>, <a class="code hl_enumvalue" href="render_8h.html#a05925249af134e5ab3a654246dc30267a1208ab8e7e5a6b3389ad4203dbe747f1">R_BUFFERDATA_VERTEX</a>, &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a29d3f99e62735e29f5c4a9b2f30178fa">data_texcoordlightmap2f_bufferoffset</a>) : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04770" name="l04770"></a><span class="lineno"> 4770</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a14978807f299ff4eb08fbc95f12f4390">data_lightmapcolor4f_vertexbuffer</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a> ? <a class="code hl_function" href="gl__rmain_8c.html#aec7bc0ca362a947a2d73772dc890914f">R_BufferData_Store</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[4]), mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">data_lightmapcolor4f</a>, <a class="code hl_enumvalue" href="render_8h.html#a05925249af134e5ab3a654246dc30267a1208ab8e7e5a6b3389ad4203dbe747f1">R_BUFFERDATA_VERTEX</a>, &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aeb555f8524bab5e10a1ca22c3899c2e7">data_lightmapcolor4f_bufferoffset</a>) : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04771" name="l04771"></a><span class="lineno"> 4771</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7acee012733eb5e093982690193053ed">data_skeletalindex4ub_vertexbuffer</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5a23f7f679399e0588c64df838a79779">data_skeletalindex4ub</a> ? <a class="code hl_function" href="gl__rmain_8c.html#aec7bc0ca362a947a2d73772dc890914f">R_BufferData_Store</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[4]), mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5a23f7f679399e0588c64df838a79779">data_skeletalindex4ub</a>, <a class="code hl_enumvalue" href="render_8h.html#a05925249af134e5ab3a654246dc30267a1208ab8e7e5a6b3389ad4203dbe747f1">R_BUFFERDATA_VERTEX</a>, &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a359a49d4cf59430ef6aa29492b10c488">data_skeletalindex4ub_bufferoffset</a>) : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04772" name="l04772"></a><span class="lineno"> 4772</span>    mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ae20f7ffe94f47df81dac465ec2888d2f">data_skeletalweight4ub_vertexbuffer</a> = mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a452cf124552a1501be5342525d5aa124">data_skeletalweight4ub</a> ? <a class="code hl_function" href="gl__rmain_8c.html#aec7bc0ca362a947a2d73772dc890914f">R_BufferData_Store</a>(mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[4]), mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a452cf124552a1501be5342525d5aa124">data_skeletalweight4ub</a>, <a class="code hl_enumvalue" href="render_8h.html#a05925249af134e5ab3a654246dc30267a1208ab8e7e5a6b3389ad4203dbe747f1">R_BUFFERDATA_VERTEX</a>, &amp;mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a13b427ce0ede7a7346713986ff3596a9">data_skeletalweight4ub_bufferoffset</a>) : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04773" name="l04773"></a><span class="lineno"> 4773</span>}</div>
</div>
<div class="line"><a id="l04774" name="l04774"></a><span class="lineno"> 4774</span> </div>
<div class="foldopen" id="foldopen04775" data-start="{" data-end="}">
<div class="line"><a id="l04775" name="l04775"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ad5783554605d236b56845ddb2ea0f9a7"> 4775</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="model__shared_8c.html#ad5783554605d236b56845ddb2ea0f9a7">Mod_Mesh_Finalize</a>(<a class="code hl_struct" href="structmodel__t.html">model_t</a> *mod)</div>
<div class="line"><a id="l04776" name="l04776"></a><span class="lineno"> 4776</span>{</div>
<div class="line"><a id="l04777" name="l04777"></a><span class="lineno"> 4777</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__backend_8c.html#af6f35b3d05852d6a58eeabc7f4616cfc">gl_paranoid</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l04778" name="l04778"></a><span class="lineno"> 4778</span>        <a class="code hl_function" href="model__shared_8c.html#a3ad808fbef6d1b76547423b537ae975c">Mod_Mesh_Validate</a>(mod);</div>
<div class="line"><a id="l04779" name="l04779"></a><span class="lineno"> 4779</span>    <a class="code hl_function" href="model__shared_8c.html#a23ab54798c29a2f649842ed4dc412f7e">Mod_Mesh_ComputeBounds</a>(mod);</div>
<div class="line"><a id="l04780" name="l04780"></a><span class="lineno"> 4780</span>    <a class="code hl_function" href="model__shared_8c.html#ae43c18a3823bc981f25fc8a476b32058">Mod_Mesh_MakeSortedSurfaces</a>(mod);</div>
<div class="line"><a id="l04781" name="l04781"></a><span class="lineno"> 4781</span>    <span class="keywordflow">if</span>(!<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a2cd356fbc38a7343f00d88e6af61b3bc">draw2dstage</a>)</div>
<div class="line"><a id="l04782" name="l04782"></a><span class="lineno"> 4782</span>        <a class="code hl_function" href="model__shared_8c.html#aa4c8e5f23a372b474dbf2344bd1af35d">Mod_BuildTextureVectorsFromNormals</a>(0, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">num_vertices</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">data_vertex3f</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">data_texcoordtexture2f</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">data_normal3f</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">data_element3i</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">data_svector3f</a>, mod-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">data_tvector3f</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l04783" name="l04783"></a><span class="lineno"> 4783</span>    <a class="code hl_function" href="model__shared_8c.html#a571533146ba632ac37f6bced432b8fc1">Mod_Mesh_UploadDynamicBuffers</a>(mod);</div>
<div class="line"><a id="l04784" name="l04784"></a><span class="lineno"> 4784</span>}</div>
</div>
<div class="ttc" id="abspfile_8h_html_a0a2fa78587a49f238efd2b5067e66361"><div class="ttname"><a href="bspfile_8h.html#a0a2fa78587a49f238efd2b5067e66361">SUPERCONTENTS_SKY</a></div><div class="ttdeci">#define SUPERCONTENTS_SKY</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00200">bspfile.h:200</a></div></div>
<div class="ttc" id="abspfile_8h_html_a1743eb1a01a4bc94f435951089dadbd7"><div class="ttname"><a href="bspfile_8h.html#a1743eb1a01a4bc94f435951089dadbd7">SUPERCONTENTS_OPAQUE</a></div><div class="ttdeci">#define SUPERCONTENTS_OPAQUE</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00208">bspfile.h:208</a></div></div>
<div class="ttc" id="abspfile_8h_html_a1c8c25328105edb0ce33da011b939a27"><div class="ttname"><a href="bspfile_8h.html#a1c8c25328105edb0ce33da011b939a27">SUPERCONTENTS_LAVA</a></div><div class="ttdeci">#define SUPERCONTENTS_LAVA</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00199">bspfile.h:199</a></div></div>
<div class="ttc" id="abspfile_8h_html_a271467c975ece9809a85f0f7a37d17af"><div class="ttname"><a href="bspfile_8h.html#a271467c975ece9809a85f0f7a37d17af">SUPERCONTENTS_DONOTENTER</a></div><div class="ttdeci">#define SUPERCONTENTS_DONOTENTER</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00206">bspfile.h:206</a></div></div>
<div class="ttc" id="abspfile_8h_html_a35afee7d75ef29a444b98e351a8d3045"><div class="ttname"><a href="bspfile_8h.html#a35afee7d75ef29a444b98e351a8d3045">SUPERCONTENTS_MONSTERCLIP</a></div><div class="ttdeci">#define SUPERCONTENTS_MONSTERCLIP</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00205">bspfile.h:205</a></div></div>
<div class="ttc" id="abspfile_8h_html_a47d0da2237e9a4dc9e2a6f732a4d7165"><div class="ttname"><a href="bspfile_8h.html#a47d0da2237e9a4dc9e2a6f732a4d7165">SUPERCONTENTS_BOTCLIP</a></div><div class="ttdeci">#define SUPERCONTENTS_BOTCLIP</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00207">bspfile.h:207</a></div></div>
<div class="ttc" id="abspfile_8h_html_a7528d0e1edabc785475a08a7890597ea"><div class="ttname"><a href="bspfile_8h.html#a7528d0e1edabc785475a08a7890597ea">SUPERCONTENTS_SLIME</a></div><div class="ttdeci">#define SUPERCONTENTS_SLIME</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00198">bspfile.h:198</a></div></div>
<div class="ttc" id="abspfile_8h_html_a85f0acbb100ce4dc3c63037496d631d6"><div class="ttname"><a href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a></div><div class="ttdeci">#define SUPERCONTENTS_SOLID</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00196">bspfile.h:196</a></div></div>
<div class="ttc" id="abspfile_8h_html_aa8b1bcaea9c05c6c9846ef619aa0327d"><div class="ttname"><a href="bspfile_8h.html#aa8b1bcaea9c05c6c9846ef619aa0327d">SUPERCONTENTS_PLAYERCLIP</a></div><div class="ttdeci">#define SUPERCONTENTS_PLAYERCLIP</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00204">bspfile.h:204</a></div></div>
<div class="ttc" id="abspfile_8h_html_aeae4f676c7d0c05384e4608a2d4d3153"><div class="ttname"><a href="bspfile_8h.html#aeae4f676c7d0c05384e4608a2d4d3153">SUPERCONTENTS_NODROP</a></div><div class="ttdeci">#define SUPERCONTENTS_NODROP</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00203">bspfile.h:203</a></div></div>
<div class="ttc" id="abspfile_8h_html_af59d298899c2ac56a21f94c327776551"><div class="ttname"><a href="bspfile_8h.html#af59d298899c2ac56a21f94c327776551">SUPERCONTENTS_WATER</a></div><div class="ttdeci">#define SUPERCONTENTS_WATER</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00197">bspfile.h:197</a></div></div>
<div class="ttc" id="acl__input_8c_html_a9846c7c601c7738ac142475d9795b78f"><div class="ttname"><a href="cl__input_8c.html#a9846c7c601c7738ac142475d9795b78f">offsets</a></div><div class="ttdeci">static vec3_t offsets[NUMOFFSETS]</div><div class="ttdef"><b>Definition</b> <a href="cl__input_8c_source.html#l00838">cl_input.c:838</a></div></div>
<div class="ttc" id="acl__main_8c_html_a4464d836d1ac899355ae8c3092ffaf77"><div class="ttname"><a href="cl__main_8c.html#a4464d836d1ac899355ae8c3092ffaf77">cl_stainmaps_clearonload</a></div><div class="ttdeci">cvar_t cl_stainmaps_clearonload</div><div class="ttdef"><b>Definition</b> <a href="cl__main_8c_source.html#l00074">cl_main.c:74</a></div></div>
<div class="ttc" id="acl__main_8c_html_a6dddf897835e844872c2f3c9f97117f1"><div class="ttname"><a href="cl__main_8c.html#a6dddf897835e844872c2f3c9f97117f1">CL_StartVideo</a></div><div class="ttdeci">void CL_StartVideo(void)</div><div class="ttdef"><b>Definition</b> <a href="cl__main_8c_source.html#l02788">cl_main.c:2788</a></div></div>
<div class="ttc" id="acl__main_8c_html_aa07d17cda937753e8e976ea3c9c5c312"><div class="ttname"><a href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a></div><div class="ttdeci">client_state_t cl</div><div class="ttdef"><b>Definition</b> <a href="cl__main_8c_source.html#l00115">cl_main.c:115</a></div></div>
<div class="ttc" id="acl__main_8c_html_ab4b4e0f12a72d330ee0869bdf1b372cd"><div class="ttname"><a href="cl__main_8c.html#ab4b4e0f12a72d330ee0869bdf1b372cd">cls</a></div><div class="ttdeci">client_static_t cls</div><div class="ttdef"><b>Definition</b> <a href="cl__main_8c_source.html#l00114">cl_main.c:114</a></div></div>
<div class="ttc" id="acl__parse_8c_html_ac6ab3e260289abd4d92f1e4974190626"><div class="ttname"><a href="cl__parse_8c.html#ac6ab3e260289abd4d92f1e4974190626">CL_KeepaliveMessage</a></div><div class="ttdeci">void CL_KeepaliveMessage(qbool readmessages)</div><div class="ttdef"><b>Definition</b> <a href="cl__parse_8c_source.html#l00314">cl_parse.c:314</a></div></div>
<div class="ttc" id="acl__screen_8c_html_a5baf9557078472ea02b5e75f5ccb6bb4"><div class="ttname"><a href="cl__screen_8c.html#a5baf9557078472ea02b5e75f5ccb6bb4">SCR_PopLoadingScreen</a></div><div class="ttdeci">void SCR_PopLoadingScreen(qbool redraw)</div><div class="ttdef"><b>Definition</b> <a href="cl__screen_8c_source.html#l01924">cl_screen.c:1924</a></div></div>
<div class="ttc" id="acl__screen_8c_html_a867f4d465569723a04e4533559ad9698"><div class="ttname"><a href="cl__screen_8c.html#a867f4d465569723a04e4533559ad9698">SCR_PushLoadingScreen</a></div><div class="ttdeci">void SCR_PushLoadingScreen(const char *msg, float len_in_parent)</div><div class="ttdef"><b>Definition</b> <a href="cl__screen_8c_source.html#l01898">cl_screen.c:1898</a></div></div>
<div class="ttc" id="aclient_8h_html_a5bba17cd89b07573a996f6d37d31cefea7375457f0c8a5f43091d1cb777aaf659"><div class="ttname"><a href="client_8h.html#a5bba17cd89b07573a996f6d37d31cefea7375457f0c8a5f43091d1cb777aaf659">ca_dedicated</a></div><div class="ttdeci">@ ca_dedicated</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00531">client.h:531</a></div></div>
<div class="ttc" id="acmd_8c_html_a86fa905462db75436af48f27298204e5"><div class="ttname"><a href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a></div><div class="ttdeci">void Cmd_AddCommand(unsigned flags, const char *cmd_name, xcommand_t function, const char *description)</div><div class="ttdoc">called by the init functions of other parts of the program to register commands and functions to call...</div><div class="ttdef"><b>Definition</b> <a href="cmd_8c_source.html#l01754">cmd.c:1754</a></div></div>
<div class="ttc" id="acmd_8h_html_ab070abb7f2ebb842c8e67bef4e317314"><div class="ttname"><a href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a></div><div class="ttdeci">static int Cmd_Argc(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="cmd_8h_source.html#l00248">cmd.h:248</a></div></div>
<div class="ttc" id="acmd_8h_html_ab49017bdcb3104823452a9ed7597aaf5"><div class="ttname"><a href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a></div><div class="ttdeci">static const char * Cmd_Argv(cmd_state_t *cmd, int arg)</div><div class="ttdoc">Cmd_Argv(cmd, ) will return an empty string (not a NULL) if arg &gt; argc, so string operations are alwa...</div><div class="ttdef"><b>Definition</b> <a href="cmd_8h_source.html#l00253">cmd.h:253</a></div></div>
<div class="ttc" id="acmd_8h_html_abba64dce6a45541317c5508aa83436e5"><div class="ttname"><a href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a></div><div class="ttdeci">#define CF_CLIENT</div><div class="ttdoc">cvar/command that only the client can change/execute</div><div class="ttdef"><b>Definition</b> <a href="cmd_8h_source.html#l00048">cmd.h:48</a></div></div>
<div class="ttc" id="acmd_8h_html_aeeecb68995736ab90434173e64fd14e5"><div class="ttname"><a href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a></div><div class="ttdeci">#define CF_ARCHIVE</div><div class="ttdoc">cvar should have its set value saved to config.cfg and persist across sessions</div><div class="ttdef"><b>Definition</b> <a href="cmd_8h_source.html#l00053">cmd.h:53</a></div></div>
<div class="ttc" id="acom__crc16_8c_html_aa9ba811c20537ebd01898928be2de439"><div class="ttname"><a href="com__crc16_8c.html#aa9ba811c20537ebd01898928be2de439">CRC_Block</a></div><div class="ttdeci">unsigned short CRC_Block(const unsigned char *data, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="com__crc16_8c_source.html#l00075">com_crc16.c:75</a></div></div>
<div class="ttc" id="acom__crc16_8c_html_ac2a504ad338a0d2e5e1ba7d79993e174"><div class="ttname"><a href="com__crc16_8c.html#ac2a504ad338a0d2e5e1ba7d79993e174">CRC_Block_CaseInsensitive</a></div><div class="ttdeci">unsigned short CRC_Block_CaseInsensitive(const unsigned char *data, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="com__crc16_8c_source.html#l00083">com_crc16.c:83</a></div></div>
<div class="ttc" id="acommon_8c_html_a3eb222dff7f3bc0f6ce47f1e02df175e"><div class="ttname"><a href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a></div><div class="ttdeci">char com_token[MAX_INPUTLINE]</div><div class="ttdef"><b>Definition</b> <a href="common_8c_source.html#l00039">common.c:39</a></div></div>
<div class="ttc" id="acommon_8c_html_a4a8220fa88226bf9cf39b12a051a20d7"><div class="ttname"><a href="common_8c.html#a4a8220fa88226bf9cf39b12a051a20d7">va</a></div><div class="ttdeci">char * va(char *buf, size_t buflen, const char *format,...)</div><div class="ttdef"><b>Definition</b> <a href="common_8c_source.html#l00972">common.c:972</a></div></div>
<div class="ttc" id="acommon_8c_html_a502d1e3c150757afa23f2ad484bc8d79"><div class="ttname"><a href="common_8c.html#a502d1e3c150757afa23f2ad484bc8d79">COM_ParseToken_QuakeC</a></div><div class="ttdeci">qbool COM_ParseToken_QuakeC(const char **datapointer, qbool returnnewline)</div><div class="ttdef"><b>Definition</b> <a href="common_8c_source.html#l00581">common.c:581</a></div></div>
<div class="ttc" id="acommon_8c_html_acc99aea15e3d929ef5cfac822ee7040d"><div class="ttname"><a href="common_8c.html#acc99aea15e3d929ef5cfac822ee7040d">COM_ParseToken_Simple</a></div><div class="ttdeci">qbool COM_ParseToken_Simple(const char **datapointer, qbool returnnewline, qbool parsebackslash, qbool parsecomments)</div><div class="ttdef"><b>Definition</b> <a href="common_8c_source.html#l00463">common.c:463</a></div></div>
<div class="ttc" id="acommon_8c_html_ae36050083f45e395189fee6aa45fbb0c"><div class="ttname"><a href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a></div><div class="ttdeci">int dpsnprintf(char *buffer, size_t buffersize, const char *format,...)</div><div class="ttdoc">Returns the number of printed characters, excluding the final '\0' or returns -1 if the buffer isn't ...</div><div class="ttdef"><b>Definition</b> <a href="common_8c_source.html#l00997">common.c:997</a></div></div>
<div class="ttc" id="acommon_8h_html_aaef80d6b72e2476c82258733a8c4eced"><div class="ttname"><a href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a></div><div class="ttdeci">#define dp_strlcpy(dst, src, dsize)</div><div class="ttdef"><b>Definition</b> <a href="common_8h_source.html#l00298">common.h:298</a></div></div>
<div class="ttc" id="aconsole_8c_html_a1cf9711475097b11dc41f743254ec77e"><div class="ttname"><a href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a></div><div class="ttdeci">void Con_Print(const char *msg)</div><div class="ttdoc">Prints to all appropriate console targets, and adds timestamps.</div><div class="ttdef"><b>Definition</b> <a href="console_8c_source.html#l01450">console.c:1450</a></div></div>
<div class="ttc" id="aconsole_8c_html_a2696300802453d9333e9f52e5fae15bc"><div class="ttname"><a href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a></div><div class="ttdeci">void Con_DPrintf(const char *fmt,...)</div><div class="ttdoc">A Con_Printf that only shows up if the &quot;developer&quot; cvar is set.</div><div class="ttdef"><b>Definition</b> <a href="console_8c_source.html#l01490">console.c:1490</a></div></div>
<div class="ttc" id="aconsole_8c_html_a49b71fe9a87e57a440e07af4a869a9f6"><div class="ttname"><a href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a></div><div class="ttdeci">void Con_Printf(const char *fmt,...)</div><div class="ttdoc">Prints to all appropriate console targets.</div><div class="ttdef"><b>Definition</b> <a href="console_8c_source.html#l01460">console.c:1460</a></div></div>
<div class="ttc" id="aconsole_8c_html_aae665de4dbcbf2047ee305901e2f6627"><div class="ttname"><a href="console_8c.html#aae665de4dbcbf2047ee305901e2f6627">Con_DPrint</a></div><div class="ttdeci">void Con_DPrint(const char *msg)</div><div class="ttdoc">A Con_Print that only shows up if the &quot;developer&quot; cvar is set.</div><div class="ttdef"><b>Definition</b> <a href="console_8c_source.html#l01477">console.c:1477</a></div></div>
<div class="ttc" id="aconsole_8h_html_a27b052ed2a962d8ec1b9e922d0813058"><div class="ttname"><a href="console_8h.html#a27b052ed2a962d8ec1b9e922d0813058">CON_WARN</a></div><div class="ttdeci">#define CON_WARN</div><div class="ttdef"><b>Definition</b> <a href="console_8h_source.html#l00096">console.h:96</a></div></div>
<div class="ttc" id="aconsole_8h_html_ae151ed35a905aff75d5f5dc32cd965bb"><div class="ttname"><a href="console_8h.html#ae151ed35a905aff75d5f5dc32cd965bb">CON_ERROR</a></div><div class="ttdeci">#define CON_ERROR</div><div class="ttdef"><b>Definition</b> <a href="console_8h_source.html#l00097">console.h:97</a></div></div>
<div class="ttc" id="acvar_8c_html_a1e6c6ddcc2cbac3e571e97d349c51c2f"><div class="ttname"><a href="cvar_8c.html#a1e6c6ddcc2cbac3e571e97d349c51c2f">Cvar_VariableValue</a></div><div class="ttdeci">float Cvar_VariableValue(cvar_state_t *cvars, const char *var_name, unsigned neededflags)</div><div class="ttdef"><b>Definition</b> <a href="cvar_8c_source.html#l00129">cvar.c:129</a></div></div>
<div class="ttc" id="acvar_8c_html_a71b1f2a204cebd68e6bc4790b9ac4258"><div class="ttname"><a href="cvar_8c.html#a71b1f2a204cebd68e6bc4790b9ac4258">cvars_all</a></div><div class="ttdeci">cvar_state_t cvars_all</div><div class="ttdef"><b>Definition</b> <a href="cvar_8c_source.html#l00028">cvar.c:28</a></div></div>
<div class="ttc" id="acvar_8c_html_a9bd27026ed325ffe5276549c11c7379d"><div class="ttname"><a href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a></div><div class="ttdeci">void Cvar_RegisterVariable(cvar_t *variable)</div><div class="ttdoc">registers a cvar that already has the name, string, and optionally the archive elements set.</div><div class="ttdef"><b>Definition</b> <a href="cvar_8c_source.html#l00599">cvar.c:599</a></div></div>
<div class="ttc" id="adraw_8h_html_aeb1806e5d5237a283c9dc681f0e020eba32cf1e660c612a348fdf07ac3e84654a"><div class="ttname"><a href="draw_8h.html#aeb1806e5d5237a283c9dc681f0e020eba32cf1e660c612a348fdf07ac3e84654a">DRAWFLAG_ADDITIVE</a></div><div class="ttdeci">@ DRAWFLAG_ADDITIVE</div><div class="ttdef"><b>Definition</b> <a href="draw_8h_source.html#l00075">draw.h:75</a></div></div>
<div class="ttc" id="adraw_8h_html_aeb1806e5d5237a283c9dc681f0e020eba56d6898bb90fe54c49ff82b899026430"><div class="ttname"><a href="draw_8h.html#aeb1806e5d5237a283c9dc681f0e020eba56d6898bb90fe54c49ff82b899026430">DRAWFLAG_MODULATE</a></div><div class="ttdeci">@ DRAWFLAG_MODULATE</div><div class="ttdef"><b>Definition</b> <a href="draw_8h_source.html#l00076">draw.h:76</a></div></div>
<div class="ttc" id="adraw_8h_html_aeb1806e5d5237a283c9dc681f0e020eba8ab085e03109a167453fde05729ede6d"><div class="ttname"><a href="draw_8h.html#aeb1806e5d5237a283c9dc681f0e020eba8ab085e03109a167453fde05729ede6d">DRAWFLAG_2XMODULATE</a></div><div class="ttdeci">@ DRAWFLAG_2XMODULATE</div><div class="ttdef"><b>Definition</b> <a href="draw_8h_source.html#l00077">draw.h:77</a></div></div>
<div class="ttc" id="adraw_8h_html_aeb1806e5d5237a283c9dc681f0e020ebab76027706764a44ebc32385e759a1e03"><div class="ttname"><a href="draw_8h.html#aeb1806e5d5237a283c9dc681f0e020ebab76027706764a44ebc32385e759a1e03">DRAWFLAG_MASK</a></div><div class="ttdeci">@ DRAWFLAG_MASK</div><div class="ttdef"><b>Definition</b> <a href="draw_8h_source.html#l00080">draw.h:80</a></div></div>
<div class="ttc" id="adraw_8h_html_aeb1806e5d5237a283c9dc681f0e020ebafaa6b09f403c77d1a757537f9ee4e9f2"><div class="ttname"><a href="draw_8h.html#aeb1806e5d5237a283c9dc681f0e020ebafaa6b09f403c77d1a757537f9ee4e9f2">DRAWFLAG_SCREEN</a></div><div class="ttdeci">@ DRAWFLAG_SCREEN</div><div class="ttdef"><b>Definition</b> <a href="draw_8h_source.html#l00078">draw.h:78</a></div></div>
<div class="ttc" id="afractalnoise_8c_html_a86fdeed0593c5e3b95d1f2447350ca96"><div class="ttname"><a href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a></div><div class="ttdeci">#define n(x, y)</div></div>
<div class="ttc" id="afs_8c_html_a03ffae625c1150af52b17342c57425ac"><div class="ttname"><a href="fs_8c.html#a03ffae625c1150af52b17342c57425ac">FS_FileExtension</a></div><div class="ttdeci">const char * FS_FileExtension(const char *in)</div><div class="ttdef"><b>Definition</b> <a href="fs_8c_source.html#l01412">fs.c:1412</a></div></div>
<div class="ttc" id="afs_8c_html_a2a2eae59234c2478341fea0a380e99ac"><div class="ttname"><a href="fs_8c.html#a2a2eae59234c2478341fea0a380e99ac">FS_WriteFile</a></div><div class="ttdeci">qbool FS_WriteFile(const char *filename, const void *data, fs_offset_t len)</div><div class="ttdef"><b>Definition</b> <a href="fs_8c_source.html#l03577">fs.c:3577</a></div></div>
<div class="ttc" id="afs_8c_html_a46b9b5ad3cc14f77ae63016505163128"><div class="ttname"><a href="fs_8c.html#a46b9b5ad3cc14f77ae63016505163128">FS_LoadFile</a></div><div class="ttdeci">unsigned char * FS_LoadFile(const char *path, mempool_t *pool, qbool quiet, fs_offset_t *filesizepointer)</div><div class="ttdef"><b>Definition</b> <a href="fs_8c_source.html#l03525">fs.c:3525</a></div></div>
<div class="ttc" id="afs_8c_html_a507c1fe37a20105eb2c08896f0d399a1"><div class="ttname"><a href="fs_8c.html#a507c1fe37a20105eb2c08896f0d399a1">FS_FreeSearch</a></div><div class="ttdeci">void FS_FreeSearch(fssearch_t *search)</div><div class="ttdef"><b>Definition</b> <a href="fs_8c_source.html#l03947">fs.c:3947</a></div></div>
<div class="ttc" id="afs_8c_html_a637b96ed07f8e70398c51a8bc3ce4fb9"><div class="ttname"><a href="fs_8c.html#a637b96ed07f8e70398c51a8bc3ce4fb9">FS_Search</a></div><div class="ttdeci">fssearch_t * FS_Search(const char *pattern, int caseinsensitive, int quiet, const char *packfile)</div><div class="ttdef"><b>Definition</b> <a href="fs_8c_source.html#l03740">fs.c:3740</a></div></div>
<div class="ttc" id="afs_8c_html_a93257bedba32e45fc3f07bea139c0604"><div class="ttname"><a href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a></div><div class="ttdeci">static int(ZEXPORT *qz_inflate)(z_stream *strm</div></div>
<div class="ttc" id="afs_8c_html_a9fd7ebcbb75f140d76ab37664280555f"><div class="ttname"><a href="fs_8c.html#a9fd7ebcbb75f140d76ab37664280555f">FS_StripExtension</a></div><div class="ttdeci">void FS_StripExtension(const char *in, char *out, size_t size_out)</div><div class="ttdef"><b>Definition</b> <a href="fs_8c_source.html#l03596">fs.c:3596</a></div></div>
<div class="ttc" id="afs_8h_html_a5bcbce6d6c29888adf596671d6acd44b"><div class="ttname"><a href="fs_8h.html#a5bcbce6d6c29888adf596671d6acd44b">fs_offset_t</a></div><div class="ttdeci">int64_t fs_offset_t</div><div class="ttdef"><b>Definition</b> <a href="fs_8h_source.html#l00037">fs.h:37</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a897a83101fb978aec99bbb3c37c4e78c"><div class="ttname"><a href="gl__backend_8c.html#a897a83101fb978aec99bbb3c37c4e78c">R_Mesh_CreateMeshBuffer</a></div><div class="ttdeci">r_meshbuffer_t * R_Mesh_CreateMeshBuffer(const void *data, size_t size, const char *name, qbool isindexbuffer, qbool isuniformbuffer, qbool isdynamic, qbool isindex16)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01764">gl_backend.c:1764</a></div></div>
<div class="ttc" id="agl__backend_8c_html_aaaba6ef1e8b54d0694de07639072286d"><div class="ttname"><a href="gl__backend_8c.html#aaaba6ef1e8b54d0694de07639072286d">R_Mesh_DestroyMeshBuffer</a></div><div class="ttdeci">void R_Mesh_DestroyMeshBuffer(r_meshbuffer_t *buffer)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01831">gl_backend.c:1831</a></div></div>
<div class="ttc" id="agl__backend_8c_html_af6f35b3d05852d6a58eeabc7f4616cfc"><div class="ttname"><a href="gl__backend_8c.html#af6f35b3d05852d6a58eeabc7f4616cfc">gl_paranoid</a></div><div class="ttdeci">cvar_t gl_paranoid</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l00008">gl_backend.c:8</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a5960c03dbcd8d4f38b765ca7260aa838"><div class="ttname"><a href="gl__rmain_8c.html#a5960c03dbcd8d4f38b765ca7260aa838">R_SkinFrame_LoadExternal</a></div><div class="ttdeci">skinframe_t * R_SkinFrame_LoadExternal(const char *name, int textureflags, qbool complain, qbool fallbacknotexture)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l02313">gl_rmain.c:2313</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a9f892d1cf76c82c30d00abdd0187301a"><div class="ttname"><a href="gl__rmain_8c.html#a9f892d1cf76c82c30d00abdd0187301a">R_GetCubemap</a></div><div class="ttdeci">rtexture_t * R_GetCubemap(const char *basename)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l02981">gl_rmain.c:2981</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_ab57d3b15b1bdb498f4b0173fa69e9ccf"><div class="ttname"><a href="gl__rmain_8c.html#ab57d3b15b1bdb498f4b0173fa69e9ccf">R_SkinFrame_PurgeSkinFrame</a></div><div class="ttdeci">void R_SkinFrame_PurgeSkinFrame(skinframe_t *s)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l02183">gl_rmain.c:2183</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_ab71c98f74d459505c37064d162f76e46"><div class="ttname"><a href="gl__rmain_8c.html#ab71c98f74d459505c37064d162f76e46">R_SkinFrame_LoadMissing</a></div><div class="ttdeci">skinframe_t * R_SkinFrame_LoadMissing(void)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l02803">gl_rmain.c:2803</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_ac068333f6656190ddd5836765acdffe0"><div class="ttname"><a href="gl__rmain_8c.html#ac068333f6656190ddd5836765acdffe0">R_SkinFrame_MarkUsed</a></div><div class="ttdeci">void R_SkinFrame_MarkUsed(skinframe_t *skinframe)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l02175">gl_rmain.c:2175</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_ae1fda69f1ff6edbb96f5d16b8db0d825"><div class="ttname"><a href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a></div><div class="ttdeci">r_refdef_t r_refdef</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00057">gl_rmain.c:57</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_aec7bc0ca362a947a2d73772dc890914f"><div class="ttname"><a href="gl__rmain_8c.html#aec7bc0ca362a947a2d73772dc890914f">R_BufferData_Store</a></div><div class="ttdeci">r_meshbuffer_t * R_BufferData_Store(size_t datasize, const void *data, r_bufferdata_type_t type, int *returnbufferoffset)</div><div class="ttdoc">request space in a vertex/index/uniform buffer for the chosen data, returns the buffer pointer and of...</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l03715">gl_rmain.c:3715</a></div></div>
<div class="ttc" id="agl__rsurf_8c_html_a2a904ab23659bf4ac89dd053b69997a5"><div class="ttname"><a href="gl__rsurf_8c.html#a2a904ab23659bf4ac89dd053b69997a5">R_Mod_DrawSky</a></div><div class="ttdeci">void R_Mod_DrawSky(entity_render_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="gl__rsurf_8c_source.html#l00596">gl_rsurf.c:596</a></div></div>
<div class="ttc" id="agl__rsurf_8c_html_a60a24c695566f11f38f592dc83d76869"><div class="ttname"><a href="gl__rsurf_8c.html#a60a24c695566f11f38f592dc83d76869">R_Mod_GetLightInfo</a></div><div class="ttdeci">void R_Mod_GetLightInfo(entity_render_t *ent, vec3_t relativelightorigin, float lightradius, vec3_t outmins, vec3_t outmaxs, int *outleaflist, unsigned char *outleafpvs, int *outnumleafspointer, int *outsurfacelist, unsigned char *outsurfacepvs, int *outnumsurfacespointer, unsigned char *outshadowtrispvs, unsigned char *outlighttrispvs, unsigned char *visitingleafpvs, int numfrustumplanes, const mplane_t *frustumplanes, qbool noocclusion)</div><div class="ttdef"><b>Definition</b> <a href="gl__rsurf_8c_source.html#l01202">gl_rsurf.c:1202</a></div></div>
<div class="ttc" id="agl__rsurf_8c_html_a6e528b203b784986a5b5bbf82ac387ff"><div class="ttname"><a href="gl__rsurf_8c.html#a6e528b203b784986a5b5bbf82ac387ff">R_Mod_DrawDebug</a></div><div class="ttdeci">void R_Mod_DrawDebug(entity_render_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="gl__rsurf_8c_source.html#l00660">gl_rsurf.c:660</a></div></div>
<div class="ttc" id="agl__rsurf_8c_html_a89a46aef51c1b493184fcc71ee028236"><div class="ttname"><a href="gl__rsurf_8c.html#a89a46aef51c1b493184fcc71ee028236">R_Mod_DrawLight</a></div><div class="ttdeci">void R_Mod_DrawLight(entity_render_t *ent, int numsurfaces, const int *surfacelist, const unsigned char *lighttrispvs)</div><div class="ttdef"><b>Definition</b> <a href="gl__rsurf_8c_source.html#l01399">gl_rsurf.c:1399</a></div></div>
<div class="ttc" id="agl__rsurf_8c_html_a904d7d0ff6adf58e411c3ffb80ca27c4"><div class="ttname"><a href="gl__rsurf_8c.html#a904d7d0ff6adf58e411c3ffb80ca27c4">R_Mod_Draw</a></div><div class="ttdeci">void R_Mod_Draw(entity_render_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="gl__rsurf_8c_source.html#l00637">gl_rsurf.c:637</a></div></div>
<div class="ttc" id="agl__rsurf_8c_html_aa4222887ff91555860ca9ab52531861c"><div class="ttname"><a href="gl__rsurf_8c.html#aa4222887ff91555860ca9ab52531861c">R_Mod_DrawShadowMap</a></div><div class="ttdeci">void R_Mod_DrawShadowMap(int side, entity_render_t *ent, const vec3_t relativelightorigin, const vec3_t relativelightdirection, float lightradius, int modelnumsurfaces, const int *modelsurfacelist, const unsigned char *surfacesides, const vec3_t lightmins, const vec3_t lightmaxs)</div><div class="ttdef"><b>Definition</b> <a href="gl__rsurf_8c_source.html#l01320">gl_rsurf.c:1320</a></div></div>
<div class="ttc" id="agl__rsurf_8c_html_aab6edde929aa09b6f2ba17cd469f97ac"><div class="ttname"><a href="gl__rsurf_8c.html#aab6edde929aa09b6f2ba17cd469f97ac">R_Mod_DrawAddWaterPlanes</a></div><div class="ttdeci">void R_Mod_DrawAddWaterPlanes(entity_render_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="gl__rsurf_8c_source.html#l00603">gl_rsurf.c:603</a></div></div>
<div class="ttc" id="agl__rsurf_8c_html_aae83c1e7beee72d6cbfc03a0f0bd11bf"><div class="ttname"><a href="gl__rsurf_8c.html#aae83c1e7beee72d6cbfc03a0f0bd11bf">R_Mod_DrawDepth</a></div><div class="ttdeci">void R_Mod_DrawDepth(entity_render_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="gl__rsurf_8c_source.html#l00645">gl_rsurf.c:645</a></div></div>
<div class="ttc" id="agl__rsurf_8c_html_ad8145eb3a0203496ea94da9834e098f0"><div class="ttname"><a href="gl__rsurf_8c.html#ad8145eb3a0203496ea94da9834e098f0">R_Mod_DrawPrepass</a></div><div class="ttdeci">void R_Mod_DrawPrepass(entity_render_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="gl__rsurf_8c_source.html#l00667">gl_rsurf.c:667</a></div></div>
<div class="ttc" id="agl__textures_8c_html_a114f2477dc7b969704fce4025b2a4b1b"><div class="ttname"><a href="gl__textures_8c.html#a114f2477dc7b969704fce4025b2a4b1b">R_FreeTexturePool</a></div><div class="ttdeci">void R_FreeTexturePool(rtexturepool_t **rtexturepool)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l00403">gl_textures.c:403</a></div></div>
<div class="ttc" id="agl__textures_8c_html_ab60a02391841e828427f5cc24cb5dd29"><div class="ttname"><a href="gl__textures_8c.html#ab60a02391841e828427f5cc24cb5dd29">R_AllocTexturePool</a></div><div class="ttdeci">rtexturepool_t * R_AllocTexturePool(void)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l00389">gl_textures.c:389</a></div></div>
<div class="ttc" id="agl__textures_8c_html_ab79bf8e042a462735d6d70f02822d98d"><div class="ttname"><a href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a></div><div class="ttdeci">void R_FreeTexture(rtexture_t *rt)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l00351">gl_textures.c:351</a></div></div>
<div class="ttc" id="agl__textures_8c_html_afe6f33ec05da1bce9cd3a847610e7384"><div class="ttname"><a href="gl__textures_8c.html#afe6f33ec05da1bce9cd3a847610e7384">R_LoadTexture2D</a></div><div class="ttdeci">rtexture_t * R_LoadTexture2D(rtexturepool_t *rtexturepool, const char *identifier, int width, int height, const unsigned char *data, textype_t textype, int flags, int miplevel, const unsigned int *palette)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l01352">gl_textures.c:1352</a></div></div>
<div class="ttc" id="aglquake_8h_html_a0208b298f4c65e680a58434efb699fe8"><div class="ttname"><a href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a></div><div class="ttdeci">GLuint GLuint GLintptr GLsizeiptr size</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00631">glquake.h:631</a></div></div>
<div class="ttc" id="aglquake_8h_html_a0462a1894bf0c9123d1e81d1234b62fc"><div class="ttname"><a href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a></div><div class="ttdeci">GLubyte GLubyte GLubyte z</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00781">glquake.h:781</a></div></div>
<div class="ttc" id="aglquake_8h_html_a0704dfe56dec926cb35f7bdc0834ecd0"><div class="ttname"><a href="glquake_8h.html#a0704dfe56dec926cb35f7bdc0834ecd0">texture</a></div><div class="ttdeci">GLenum GLenum GLuint texture</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00612">glquake.h:612</a></div></div>
<div class="ttc" id="aglquake_8h_html_a0e843e6cb4b0547b3a2b414af3d53a53"><div class="ttname"><a href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a></div><div class="ttdeci">GLenum GLsizei width</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00621">glquake.h:621</a></div></div>
<div class="ttc" id="aglquake_8h_html_a136cce2f78c36b837ec3c8cf72c96aad"><div class="ttname"><a href="glquake_8h.html#a136cce2f78c36b837ec3c8cf72c96aad">height</a></div><div class="ttdeci">GLenum GLsizei GLsizei height</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00621">glquake.h:621</a></div></div>
<div class="ttc" id="aglquake_8h_html_a1521c81f03b197c775902c4be8f467b8"><div class="ttname"><a href="glquake_8h.html#a1521c81f03b197c775902c4be8f467b8">v2</a></div><div class="ttdeci">GLfloat GLfloat GLfloat v2</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00746">glquake.h:746</a></div></div>
<div class="ttc" id="aglquake_8h_html_a161f4efd20c5f2bfc9a7c49c07be7ed7"><div class="ttname"><a href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a></div><div class="ttdeci">GLubyte GLubyte GLubyte GLubyte w</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00781">glquake.h:781</a></div></div>
<div class="ttc" id="aglquake_8h_html_a1d1f8fe926ffea3d45b3b960dd6e95d2"><div class="ttname"><a href="glquake_8h.html#a1d1f8fe926ffea3d45b3b960dd6e95d2">layer</a></div><div class="ttdeci">GLenum GLenum GLuint GLint GLint layer</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00614">glquake.h:614</a></div></div>
<div class="ttc" id="aglquake_8h_html_a2c9b7a4e54811e2f08046acf2ad8f2d5"><div class="ttname"><a href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a></div><div class="ttdeci">GLint GLint GLint GLint GLint GLint GLint GLbitfield mask</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00608">glquake.h:608</a></div></div>
<div class="ttc" id="aglquake_8h_html_a41dd3137d362319dcf68b387b2eb9866"><div class="ttname"><a href="glquake_8h.html#a41dd3137d362319dcf68b387b2eb9866">GL_ONE_MINUS_DST_ALPHA</a></div><div class="ttdeci">#define GL_ONE_MINUS_DST_ALPHA</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00082">glquake.h:82</a></div></div>
<div class="ttc" id="aglquake_8h_html_a4af4fbff7e4f93998f5bf914b19bd1dc"><div class="ttname"><a href="glquake_8h.html#a4af4fbff7e4f93998f5bf914b19bd1dc">GL_ONE_MINUS_DST_COLOR</a></div><div class="ttdeci">#define GL_ONE_MINUS_DST_COLOR</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00078">glquake.h:78</a></div></div>
<div class="ttc" id="aglquake_8h_html_a4d1613b1e415f5e41c4651a1793b277a"><div class="ttname"><a href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a></div><div class="ttdeci">const GLdouble * v</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00761">glquake.h:761</a></div></div>
<div class="ttc" id="aglquake_8h_html_a51af0e2e7aa22f9dc0c188ee8baa7a11"><div class="ttname"><a href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a></div><div class="ttdeci">GLenum GLenum GLsizei count</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00655">glquake.h:655</a></div></div>
<div class="ttc" id="aglquake_8h_html_a51e6c75d54b3a9fb93fbc880463c212c"><div class="ttname"><a href="glquake_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a></div><div class="ttdeci">#define GL_SRC_ALPHA</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00079">glquake.h:79</a></div></div>
<div class="ttc" id="aglquake_8h_html_a563ae63395ca802a7c65b4f461fbf0d4"><div class="ttname"><a href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a></div><div class="ttdeci">GLint GLenum GLint GLint y</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00650">glquake.h:650</a></div></div>
<div class="ttc" id="aglquake_8h_html_a6adf6cffd6e7fc49298982128155b8dd"><div class="ttname"><a href="glquake_8h.html#a6adf6cffd6e7fc49298982128155b8dd">GL_SRC_COLOR</a></div><div class="ttdeci">#define GL_SRC_COLOR</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00075">glquake.h:75</a></div></div>
<div class="ttc" id="aglquake_8h_html_a72086daeeb80e5eb5788f42a4eea050e"><div class="ttname"><a href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a></div><div class="ttdeci">#define GL_ZERO</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00073">glquake.h:73</a></div></div>
<div class="ttc" id="aglquake_8h_html_a75c9c896e11dc1eed9f9f1180b86d099"><div class="ttname"><a href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a></div><div class="ttdeci">GLint GLenum GLint x</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00650">glquake.h:650</a></div></div>
<div class="ttc" id="aglquake_8h_html_a820662f5b80a48256e2503352e9f51b9"><div class="ttname"><a href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a></div><div class="ttdeci">GLsizeiptr const GLvoid * data</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00638">glquake.h:638</a></div></div>
<div class="ttc" id="aglquake_8h_html_a85ad3a4f9c2050e5572d2853a1699272"><div class="ttname"><a href="glquake_8h.html#a85ad3a4f9c2050e5572d2853a1699272">v0</a></div><div class="ttdeci">GLfloat v0</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00738">glquake.h:738</a></div></div>
<div class="ttc" id="aglquake_8h_html_a8daddd28bc83f22748eefee4995d7553"><div class="ttname"><a href="glquake_8h.html#a8daddd28bc83f22748eefee4995d7553">v1</a></div><div class="ttdeci">GLfloat GLfloat v1</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00742">glquake.h:742</a></div></div>
<div class="ttc" id="aglquake_8h_html_a95ba046d2132a6a50925791e8b9708a5"><div class="ttname"><a href="glquake_8h.html#a95ba046d2132a6a50925791e8b9708a5">first</a></div><div class="ttdeci">GLint first</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00670">glquake.h:670</a></div></div>
<div class="ttc" id="aglquake_8h_html_a9d8e5095d0454547c650ff9bde64f8e6"><div class="ttname"><a href="glquake_8h.html#a9d8e5095d0454547c650ff9bde64f8e6">offset</a></div><div class="ttdeci">GLuint GLuint GLintptr offset</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00631">glquake.h:631</a></div></div>
<div class="ttc" id="aglquake_8h_html_aa3926eb5e008f14829baa8d72435215f"><div class="ttname"><a href="glquake_8h.html#aa3926eb5e008f14829baa8d72435215f">GL_ONE_MINUS_SRC_ALPHA</a></div><div class="ttdeci">#define GL_ONE_MINUS_SRC_ALPHA</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00080">glquake.h:80</a></div></div>
<div class="ttc" id="aglquake_8h_html_aa92fae02a274fe856dad3362144f84dd"><div class="ttname"><a href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a></div><div class="ttdeci">#define GL_ONE</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00074">glquake.h:74</a></div></div>
<div class="ttc" id="aglquake_8h_html_ab4dcc8a1804d164d5f4dbba427b5672c"><div class="ttname"><a href="glquake_8h.html#ab4dcc8a1804d164d5f4dbba427b5672c">GL_DST_ALPHA</a></div><div class="ttdeci">#define GL_DST_ALPHA</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00081">glquake.h:81</a></div></div>
<div class="ttc" id="aglquake_8h_html_ac0759919bfcf4c7222738ba583673a9e"><div class="ttname"><a href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a></div><div class="ttdeci">GLenum GLuint GLenum GLsizei const GLchar * buf</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00656">glquake.h:656</a></div></div>
<div class="ttc" id="aglquake_8h_html_ac615821e7cf9469189648617cb1275be"><div class="ttname"><a href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a></div><div class="ttdeci">const GLchar * name</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00600">glquake.h:600</a></div></div>
<div class="ttc" id="aglquake_8h_html_acd2abef6afceea16ef19a117ae7fc3eb"><div class="ttname"><a href="glquake_8h.html#acd2abef6afceea16ef19a117ae7fc3eb">GL_DST_COLOR</a></div><div class="ttdeci">#define GL_DST_COLOR</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00077">glquake.h:77</a></div></div>
<div class="ttc" id="aglquake_8h_html_af7ca775b6d9354291c4d7d01b8b2a8bc"><div class="ttname"><a href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a></div><div class="ttdeci">GLuint index</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00628">glquake.h:628</a></div></div>
<div class="ttc" id="aglquake_8h_html_afa45fc0640b31002c1792c59eb062c59"><div class="ttname"><a href="glquake_8h.html#afa45fc0640b31002c1792c59eb062c59">void</a></div><div class="ttdeci">void(GLAPIENTRY *qglActiveTexture)(GLenum texture)</div></div>
<div class="ttc" id="aglquake_8h_html_afae62364eab2dc69c95b17363ba687f4"><div class="ttname"><a href="glquake_8h.html#afae62364eab2dc69c95b17363ba687f4">GL_ONE_MINUS_SRC_COLOR</a></div><div class="ttdeci">#define GL_ONE_MINUS_SRC_COLOR</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00076">glquake.h:76</a></div></div>
<div class="ttc" id="ahost_8c_html_a06cd17fda23f6e2ebefe0b614679de99"><div class="ttname"><a href="host_8c.html#a06cd17fda23f6e2ebefe0b614679de99">developer_insane</a></div><div class="ttdeci">cvar_t developer_insane</div><div class="ttdef"><b>Definition</b> <a href="host_8c_source.html#l00051">host.c:51</a></div></div>
<div class="ttc" id="ahost_8c_html_a2d29d0100dc86ae96b813350bb2b6c32"><div class="ttname"><a href="host_8c.html#a2d29d0100dc86ae96b813350bb2b6c32">developer_extra</a></div><div class="ttdeci">cvar_t developer_extra</div><div class="ttdef"><b>Definition</b> <a href="host_8c_source.html#l00050">host.c:50</a></div></div>
<div class="ttc" id="ahost_8c_html_a6207a721d43b13be42aa21a2bb4d3350"><div class="ttname"><a href="host_8c.html#a6207a721d43b13be42aa21a2bb4d3350">Host_Error</a></div><div class="ttdeci">void Host_Error(const char *error,...)</div><div class="ttdef"><b>Definition</b> <a href="host_8c_source.html#l00086">host.c:86</a></div></div>
<div class="ttc" id="ahost_8c_html_a67a57130da6bf0ad0eb133c0b8bc7642"><div class="ttname"><a href="host_8c.html#a67a57130da6bf0ad0eb133c0b8bc7642">developer_loading</a></div><div class="ttdeci">cvar_t developer_loading</div><div class="ttdef"><b>Definition</b> <a href="host_8c_source.html#l00053">host.c:53</a></div></div>
<div class="ttc" id="aimage_8h_html"><div class="ttname"><a href="image_8h.html">image.h</a></div></div>
<div class="ttc" id="amathlib_8c_html_a50e17db42d20e147704148d0a03032bf"><div class="ttname"><a href="mathlib_8c.html#a50e17db42d20e147704148d0a03032bf">AnglesFromVectors</a></div><div class="ttdeci">void AnglesFromVectors(vec3_t angles, const vec3_t forward, const vec3_t up, qbool flippitch)</div><div class="ttdoc">LadyHavoc: calculates pitch/yaw/roll angles from forward and up vectors.</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8c_source.html#l00650">mathlib.c:650</a></div></div>
<div class="ttc" id="amathlib_8h_html_a14557f9ae9e8f7db1736479bc3eccc4b"><div class="ttname"><a href="mathlib_8h.html#a14557f9ae9e8f7db1736479bc3eccc4b">Vector4Set</a></div><div class="ttdeci">#define Vector4Set(a, b, c, d, e)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00085">mathlib.h:85</a></div></div>
<div class="ttc" id="amathlib_8h_html_a24e753bacac6be5f30e18f8a2bdefda4"><div class="ttname"><a href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a></div><div class="ttdeci">#define max(A, B)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00038">mathlib.h:38</a></div></div>
<div class="ttc" id="amathlib_8h_html_a24ec9096b042003debd06be7e6425ff3"><div class="ttname"><a href="mathlib_8h.html#a24ec9096b042003debd06be7e6425ff3">VectorRandom</a></div><div class="ttdeci">#define VectorRandom(v)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00118">mathlib.h:118</a></div></div>
<div class="ttc" id="amathlib_8h_html_a28f9f1fe5f50e359e016f7e4e04f8cf1"><div class="ttname"><a href="mathlib_8h.html#a28f9f1fe5f50e359e016f7e4e04f8cf1">VectorNegate</a></div><div class="ttdeci">#define VectorNegate(a, b)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00094">mathlib.h:94</a></div></div>
<div class="ttc" id="amathlib_8h_html_a2d017cd3beb218080a7988e2deed2a11"><div class="ttname"><a href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a></div><div class="ttdeci">#define min(A, B)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00037">mathlib.h:37</a></div></div>
<div class="ttc" id="amathlib_8h_html_a3f4b2cfbd3195eddeb10b2e14b7e4d8c"><div class="ttname"><a href="mathlib_8h.html#a3f4b2cfbd3195eddeb10b2e14b7e4d8c">BoxesOverlap</a></div><div class="ttdeci">#define BoxesOverlap(a, b, c, d)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00121">mathlib.h:121</a></div></div>
<div class="ttc" id="amathlib_8h_html_a49b70428785f62ca69e1547c6ba09bb0"><div class="ttname"><a href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a></div><div class="ttdeci">#define VectorNormalize(v)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00103">mathlib.h:103</a></div></div>
<div class="ttc" id="amathlib_8h_html_a4aa807bca73db74b6ddba3da933e64aa"><div class="ttname"><a href="mathlib_8h.html#a4aa807bca73db74b6ddba3da933e64aa">DEG2RAD</a></div><div class="ttdeci">#define DEG2RAD(a)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00065">mathlib.h:65</a></div></div>
<div class="ttc" id="amathlib_8h_html_a4d2bc0c336e3e2a9b13448341ab83c10"><div class="ttname"><a href="mathlib_8h.html#a4d2bc0c336e3e2a9b13448341ab83c10">VectorLerp</a></div><div class="ttdeci">#define VectorLerp(v1, lerp, v2, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00119">mathlib.h:119</a></div></div>
<div class="ttc" id="amathlib_8h_html_a547609f6e7dbcd2c93a0adf5430ef665"><div class="ttname"><a href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a></div><div class="ttdeci">#define VectorClear(a)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00096">mathlib.h:96</a></div></div>
<div class="ttc" id="amathlib_8h_html_a553641b2aac0b2a7c43f9f74f8333fd5"><div class="ttname"><a href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a></div><div class="ttdeci">#define bound(min, num, max)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00034">mathlib.h:34</a></div></div>
<div class="ttc" id="amathlib_8h_html_a56e5c6bf818028304d48fb1b9ca6f53a"><div class="ttname"><a href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a></div><div class="ttdeci">#define VectorLength(a)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00108">mathlib.h:108</a></div></div>
<div class="ttc" id="amathlib_8h_html_a65dae07ba3561742c7f0eedf6c008731"><div class="ttname"><a href="mathlib_8h.html#a65dae07ba3561742c7f0eedf6c008731">Vector2Copy</a></div><div class="ttdeci">#define Vector2Copy(a, b)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00074">mathlib.h:74</a></div></div>
<div class="ttc" id="amathlib_8h_html_a78434ca318d72a308cffdcd75346fcd5"><div class="ttname"><a href="mathlib_8h.html#a78434ca318d72a308cffdcd75346fcd5">Vector4Copy</a></div><div class="ttdeci">#define Vector4Copy(a, b)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00083">mathlib.h:83</a></div></div>
<div class="ttc" id="amathlib_8h_html_a87789aa9d422deb982e0e65c6104a032"><div class="ttname"><a href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a></div><div class="ttdeci">#define VectorLength2(a)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00109">mathlib.h:109</a></div></div>
<div class="ttc" id="amathlib_8h_html_aa3c5114e57f89ea32ef8f41e00631e44"><div class="ttname"><a href="mathlib_8h.html#aa3c5114e57f89ea32ef8f41e00631e44">CrossProduct</a></div><div class="ttdeci">#define CrossProduct(a, b, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00102">mathlib.h:102</a></div></div>
<div class="ttc" id="amathlib_8h_html_abd107e00eca870c28df1518302fee3df"><div class="ttname"><a href="mathlib_8h.html#abd107e00eca870c28df1518302fee3df">TriangleNormal</a></div><div class="ttdeci">#define TriangleNormal(a, b, c, n)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00125">mathlib.h:125</a></div></div>
<div class="ttc" id="amathlib_8h_html_ac7c7d40fe22eeaffb66c24bd718f655d"><div class="ttname"><a href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a></div><div class="ttdeci">#define VectorAdd(a, b, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00099">mathlib.h:99</a></div></div>
<div class="ttc" id="amathlib_8h_html_ac892cc77f8b6dd3dd543d3f637d63bd1"><div class="ttname"><a href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a></div><div class="ttdeci">#define DotProduct(a, b)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00097">mathlib.h:97</a></div></div>
<div class="ttc" id="amathlib_8h_html_accb62c1cf8b53e0446be03f3d5899a68"><div class="ttname"><a href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a></div><div class="ttdeci">#define VectorCopy(a, b)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00100">mathlib.h:100</a></div></div>
<div class="ttc" id="amathlib_8h_html_ad3cbbdfa4ea0dddf1026ffc640644d79"><div class="ttname"><a href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a></div><div class="ttdeci">#define VectorSet(a, b, c, d)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00095">mathlib.h:95</a></div></div>
<div class="ttc" id="amathlib_8h_html_adb186b506beeecc27d7222f69e4496f5"><div class="ttname"><a href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a></div><div class="ttdeci">#define VectorSubtract(a, b, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00098">mathlib.h:98</a></div></div>
<div class="ttc" id="amathlib_8h_html_adbe75a286ee7ac6c3064ae518ab7d936"><div class="ttname"><a href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a></div><div class="ttdeci">#define VectorScale(in, scale, out)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00110">mathlib.h:110</a></div></div>
<div class="ttc" id="amathlib_8h_html_ae0ab782cffa212723ac17c32ab8f4332"><div class="ttname"><a href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a></div><div class="ttdeci">#define VectorMA(a, scale, b, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00113">mathlib.h:113</a></div></div>
<div class="ttc" id="amathlib_8h_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="mathlib_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00028">mathlib.h:28</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_a159d78e1e3b1bc22dd7892189e5f5a26"><div class="ttname"><a href="matrixlib_8c.html#a159d78e1e3b1bc22dd7892189e5f5a26">Matrix4x4_FromBonePose7s</a></div><div class="ttdeci">void Matrix4x4_FromBonePose7s(matrix4x4_t *m, float originscale, const short *pose7s)</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l01599">matrixlib.c:1599</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_a2c67a69e5ad398eda2624c8507e8b5fa"><div class="ttname"><a href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a></div><div class="ttdeci">void Matrix4x4_Transform(const matrix4x4_t *in, const float v[3], float out[3])</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l01657">matrixlib.c:1657</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_a9fe0ae9c4524da226dc611d2b3a708f5"><div class="ttname"><a href="matrixlib_8c.html#a9fe0ae9c4524da226dc611d2b3a708f5">Matrix4x4_ToArray12FloatGL</a></div><div class="ttdeci">void Matrix4x4_ToArray12FloatGL(const matrix4x4_t *in, float out[4][3])</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l01321">matrixlib.c:1321</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_ab70336ea109de2ef2ee9b621ca9e6ee0"><div class="ttname"><a href="matrixlib_8c.html#ab70336ea109de2ef2ee9b621ca9e6ee0">Matrix4x4_FromVectors</a></div><div class="ttdeci">void Matrix4x4_FromVectors(matrix4x4_t *out, const float vx[3], const float vy[3], const float vz[3], const float t[3])</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l00970">matrixlib.c:970</a></div></div>
<div class="ttc" id="amodel__alias_8c_html_a11050e6c5c4cb4aadd76c62a1ed0b5ac"><div class="ttname"><a href="model__alias_8c.html#a11050e6c5c4cb4aadd76c62a1ed0b5ac">Mod_AliasInit</a></div><div class="ttdeci">void Mod_AliasInit(void)</div><div class="ttdef"><b>Definition</b> <a href="model__alias_8c_source.html#l00189">model_alias.c:189</a></div></div>
<div class="ttc" id="amodel__alias_8c_html_a27c1ae3dc36c14a7480f9c579276079e"><div class="ttname"><a href="model__alias_8c.html#a27c1ae3dc36c14a7480f9c579276079e">Mod_ZYMOTICMODEL_Load</a></div><div class="ttdeci">void Mod_ZYMOTICMODEL_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__alias_8c_source.html#l01768">model_alias.c:1768</a></div></div>
<div class="ttc" id="amodel__alias_8c_html_a5a91517e5f7d0174dd4bfbb94425237b"><div class="ttname"><a href="model__alias_8c.html#a5a91517e5f7d0174dd4bfbb94425237b">Mod_PSKMODEL_Load</a></div><div class="ttdeci">void Mod_PSKMODEL_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__alias_8c_source.html#l02540">model_alias.c:2540</a></div></div>
<div class="ttc" id="amodel__alias_8c_html_a6616ff718610f10ecc36d7137e7046ab"><div class="ttname"><a href="model__alias_8c.html#a6616ff718610f10ecc36d7137e7046ab">Mod_Skeletal_FreeBuffers</a></div><div class="ttdeci">void Mod_Skeletal_FreeBuffers(void)</div><div class="ttdef"><b>Definition</b> <a href="model__alias_8c_source.html#l00046">model_alias.c:46</a></div></div>
<div class="ttc" id="amodel__alias_8c_html_a81564eb5fc47d198419e89d49f5db553"><div class="ttname"><a href="model__alias_8c.html#a81564eb5fc47d198419e89d49f5db553">Mod_INTERQUAKEMODEL_Load</a></div><div class="ttdeci">void Mod_INTERQUAKEMODEL_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__alias_8c_source.html#l03219">model_alias.c:3219</a></div></div>
<div class="ttc" id="amodel__alias_8c_html_a9b264487ef89eca32099f4fc1b5679d0"><div class="ttname"><a href="model__alias_8c.html#a9b264487ef89eca32099f4fc1b5679d0">Mod_IDP0_Load</a></div><div class="ttdeci">void Mod_IDP0_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__alias_8c_source.html#l00972">model_alias.c:972</a></div></div>
<div class="ttc" id="amodel__alias_8c_html_ac9b161947e395e4f59c9d83c4c7c8a1c"><div class="ttname"><a href="model__alias_8c.html#ac9b161947e395e4f59c9d83c4c7c8a1c">Mod_IDP3_Load</a></div><div class="ttdeci">void Mod_IDP3_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__alias_8c_source.html#l01578">model_alias.c:1578</a></div></div>
<div class="ttc" id="amodel__alias_8c_html_ae2df02cdb10cd1da1528c8dd22e5f63a"><div class="ttname"><a href="model__alias_8c.html#ae2df02cdb10cd1da1528c8dd22e5f63a">Mod_DARKPLACESMODEL_Load</a></div><div class="ttdeci">void Mod_DARKPLACESMODEL_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__alias_8c_source.html#l02163">model_alias.c:2163</a></div></div>
<div class="ttc" id="amodel__alias_8c_html_af78a405dfcc7b23d611f459ca05384d0"><div class="ttname"><a href="model__alias_8c.html#af78a405dfcc7b23d611f459ca05384d0">Mod_IDP2_Load</a></div><div class="ttdeci">void Mod_IDP2_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__alias_8c_source.html#l01324">model_alias.c:1324</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_a225a2689c7f8a4f64afd0f7f82ac8c6e"><div class="ttname"><a href="model__brush_8c.html#a225a2689c7f8a4f64afd0f7f82ac8c6e">mod_q3shader_force_addalpha</a></div><div class="ttdeci">cvar_t mod_q3shader_force_addalpha</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l00058">model_brush.c:58</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_a32aeae94a304b29fc3a77825b7a5e90a"><div class="ttname"><a href="model__brush_8c.html#a32aeae94a304b29fc3a77825b7a5e90a">Mod_OBJ_Load</a></div><div class="ttdeci">void Mod_OBJ_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l08201">model_brush.c:8201</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_a5881b3f28f05bc619c7847536733031f"><div class="ttname"><a href="model__brush_8c.html#a5881b3f28f05bc619c7847536733031f">Mod_BrushInit</a></div><div class="ttdeci">void Mod_BrushInit(void)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l00079">model_brush.c:79</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_a5c53c9f45678f786c4d69e9de5a9f867"><div class="ttname"><a href="model__brush_8c.html#a5c53c9f45678f786c4d69e9de5a9f867">mod_q3shader_default_polygonfactor</a></div><div class="ttdeci">cvar_t mod_q3shader_default_polygonfactor</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l00055">model_brush.c:55</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_a5cd83c676ff52b646e89101e869cddcc"><div class="ttname"><a href="model__brush_8c.html#a5cd83c676ff52b646e89101e869cddcc">Mod_HLBSP_Load</a></div><div class="ttdeci">void Mod_HLBSP_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l03873">model_brush.c:3873</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_a6a90d29a2909b3cbae37702ff37a32cf"><div class="ttname"><a href="model__brush_8c.html#a6a90d29a2909b3cbae37702ff37a32cf">mod_noshader_default_offsetmapping</a></div><div class="ttdeci">cvar_t mod_noshader_default_offsetmapping</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l00051">model_brush.c:51</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_a6e96d9f6e37f9c538f2961e1cacb97ce"><div class="ttname"><a href="model__brush_8c.html#a6e96d9f6e37f9c538f2961e1cacb97ce">Mod_IBSP_Load</a></div><div class="ttdeci">void Mod_IBSP_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l07660">model_brush.c:7660</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_a71ea8486028744092c5d72eaa2dcb15f"><div class="ttname"><a href="model__brush_8c.html#a71ea8486028744092c5d72eaa2dcb15f">Mod_Q2BSP_SuperContentsFromNativeContents</a></div><div class="ttdeci">int Mod_Q2BSP_SuperContentsFromNativeContents(int nativecontents)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l04205">model_brush.c:4205</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_a7f00470ea93c0f84375f173474a7eecd"><div class="ttname"><a href="model__brush_8c.html#a7f00470ea93c0f84375f173474a7eecd">mod_q3shader_default_offsetmapping_scale</a></div><div class="ttdeci">cvar_t mod_q3shader_default_offsetmapping_scale</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l00053">model_brush.c:53</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_a9bec9df854f7b675fcc53c8107d07fb1"><div class="ttname"><a href="model__brush_8c.html#a9bec9df854f7b675fcc53c8107d07fb1">mod_q3shader_default_polygonoffset</a></div><div class="ttdeci">cvar_t mod_q3shader_default_polygonoffset</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l00056">model_brush.c:56</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_a9eb6a9818cb417d26aa0ad5fb8f8317a"><div class="ttname"><a href="model__brush_8c.html#a9eb6a9818cb417d26aa0ad5fb8f8317a">mod_q3shader_default_offsetmapping_bias</a></div><div class="ttdeci">cvar_t mod_q3shader_default_offsetmapping_bias</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l00054">model_brush.c:54</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_aa97ba64018e81191a09ab52702cbd9c0"><div class="ttname"><a href="model__brush_8c.html#aa97ba64018e81191a09ab52702cbd9c0">Mod_2PSB_Load</a></div><div class="ttdeci">void Mod_2PSB_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l03858">model_brush.c:3858</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_ab6d45f381afbd7c8c9959eac47a44cc6"><div class="ttname"><a href="model__brush_8c.html#ab6d45f381afbd7c8c9959eac47a44cc6">mod_q3shader_default_offsetmapping</a></div><div class="ttdeci">cvar_t mod_q3shader_default_offsetmapping</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l00052">model_brush.c:52</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_abdc9a01bfdaf7e92e836ddbf7b75fe4e"><div class="ttname"><a href="model__brush_8c.html#abdc9a01bfdaf7e92e836ddbf7b75fe4e">Mod_VBSP_Load</a></div><div class="ttdeci">void Mod_VBSP_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l08096">model_brush.c:8096</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_ac7951bc8a426acde1bd108694921f5b7"><div class="ttname"><a href="model__brush_8c.html#ac7951bc8a426acde1bd108694921f5b7">Mod_Q1BSP_Load</a></div><div class="ttdeci">void Mod_Q1BSP_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l03880">model_brush.c:3880</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_ad4918d0f5972eb3e651d72159402522a"><div class="ttname"><a href="model__brush_8c.html#ad4918d0f5972eb3e651d72159402522a">Mod_BSP2_Load</a></div><div class="ttdeci">void Mod_BSP2_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l03866">model_brush.c:3866</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_aea0489ce67107ae72e326ae291e54551"><div class="ttname"><a href="model__brush_8c.html#aea0489ce67107ae72e326ae291e54551">mod_q3shader_force_terrain_alphaflag</a></div><div class="ttdeci">cvar_t mod_q3shader_force_terrain_alphaflag</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l00059">model_brush.c:59</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_aea213b0a4358054ff491119b61352274"><div class="ttname"><a href="model__brush_8c.html#aea213b0a4358054ff491119b61352274">Mod_MAP_Load</a></div><div class="ttdeci">void Mod_MAP_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l08183">model_brush.c:8183</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_afd3d52aa21b8bb25950df31b101c10b4"><div class="ttname"><a href="model__brush_8c.html#afd3d52aa21b8bb25950df31b101c10b4">mod_q3shader_default_refractive_index</a></div><div class="ttdeci">cvar_t mod_q3shader_default_refractive_index</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l00057">model_brush.c:57</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a01917ff9223bf5f764ea1c9150d8b72d"><div class="ttname"><a href="model__brush_8h.html#a01917ff9223bf5f764ea1c9150d8b72d">MATERIALFLAG_ADD</a></div><div class="ttdeci">#define MATERIALFLAG_ADD</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00081">model_brush.h:81</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a088347aa145a9d1bae60024278840b34"><div class="ttname"><a href="model__brush_8h.html#a088347aa145a9d1bae60024278840b34">MATERIALFLAG_SKY</a></div><div class="ttdeci">#define MATERIALFLAG_SKY</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00092">model_brush.h:92</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a13f71663919a7f6777ff7ab20479318e"><div class="ttname"><a href="model__brush_8h.html#a13f71663919a7f6777ff7ab20479318e">MATERIALFLAG_VERTEXCOLOR</a></div><div class="ttdeci">#define MATERIALFLAG_VERTEXCOLOR</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00135">model_brush.h:135</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a15a12ade8170812bc1a3b5455f26e114"><div class="ttname"><a href="model__brush_8h.html#a15a12ade8170812bc1a3b5455f26e114">MATERIALFLAG_FULLBRIGHT</a></div><div class="ttdeci">#define MATERIALFLAG_FULLBRIGHT</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00087">model_brush.h:87</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a226c2113f3731bc223694bd3e391504a"><div class="ttname"><a href="model__brush_8h.html#a226c2113f3731bc223694bd3e391504a">MATERIALFLAG_ALPHA</a></div><div class="ttdeci">#define MATERIALFLAG_ALPHA</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00079">model_brush.h:79</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a22de374860637bd38095828d776a3028"><div class="ttname"><a href="model__brush_8h.html#a22de374860637bd38095828d776a3028">MATERIALFLAG_REFRACTION</a></div><div class="ttdeci">#define MATERIALFLAG_REFRACTION</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00117">model_brush.h:117</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a2e9becc912ba5cde5aee7f7db908e965"><div class="ttname"><a href="model__brush_8h.html#a2e9becc912ba5cde5aee7f7db908e965">MATERIALFLAG_NODRAW</a></div><div class="ttdeci">#define MATERIALFLAG_NODRAW</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00096">model_brush.h:96</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a37fea1966eaa92d59dfa7f277d4a82a5"><div class="ttname"><a href="model__brush_8h.html#a37fea1966eaa92d59dfa7f277d4a82a5">MATERIALFLAG_ALPHATEST</a></div><div class="ttdeci">#define MATERIALFLAG_ALPHATEST</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00100">model_brush.h:100</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a42368df686065f708f6eed1c1fa8e1cc"><div class="ttname"><a href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a></div><div class="ttdeci">#define MATERIALFLAG_BLENDED</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00103">model_brush.h:103</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a66a3f2cf0206bbd0d7ce9ae60035da31"><div class="ttname"><a href="model__brush_8h.html#a66a3f2cf0206bbd0d7ce9ae60035da31">MATERIALFLAG_ALPHAGEN_VERTEX</a></div><div class="ttdeci">#define MATERIALFLAG_ALPHAGEN_VERTEX</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00131">model_brush.h:131</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a7055dcfb7e841b4f8df429bc32e9212f"><div class="ttname"><a href="model__brush_8h.html#a7055dcfb7e841b4f8df429bc32e9212f">MATERIALFLAG_WATERSHADER</a></div><div class="ttdeci">#define MATERIALFLAG_WATERSHADER</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00115">model_brush.h:115</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a80f07bef20c3c45b339d64917bf8a0b6"><div class="ttname"><a href="model__brush_8h.html#a80f07bef20c3c45b339d64917bf8a0b6">MATERIALFLAG_CAMERA</a></div><div class="ttdeci">#define MATERIALFLAG_CAMERA</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00127">model_brush.h:127</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a92eb2c00b3276aef285cf43b305a43da"><div class="ttname"><a href="model__brush_8h.html#a92eb2c00b3276aef285cf43b305a43da">MATERIALFLAGMASK_TRANSLUCENT</a></div><div class="ttdeci">#define MATERIALFLAGMASK_TRANSLUCENT</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00141">model_brush.h:141</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a92fe9590f9e3810dbd4abad9431cc63a"><div class="ttname"><a href="model__brush_8h.html#a92fe9590f9e3810dbd4abad9431cc63a">MATERIALFLAG_WALL</a></div><div class="ttdeci">#define MATERIALFLAG_WALL</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00089">model_brush.h:89</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a9d19d304b198ae8d36c3f5fd31c64473"><div class="ttname"><a href="model__brush_8h.html#a9d19d304b198ae8d36c3f5fd31c64473">MATERIALFLAG_NOSHADOW</a></div><div class="ttdeci">#define MATERIALFLAG_NOSHADOW</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00107">model_brush.h:107</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_aa19d4a4be7cc362a6c45d562916be88e"><div class="ttname"><a href="model__brush_8h.html#aa19d4a4be7cc362a6c45d562916be88e">MATERIALFLAG_MESHCOLLISIONS</a></div><div class="ttdeci">#define MATERIALFLAG_MESHCOLLISIONS</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00077">model_brush.h:77</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_aa7c4cb26c138264bb415dddb89455595"><div class="ttname"><a href="model__brush_8h.html#aa7c4cb26c138264bb415dddb89455595">MATERIALFLAG_REFLECTION</a></div><div class="ttdeci">#define MATERIALFLAG_REFLECTION</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00119">model_brush.h:119</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_af441c2813089fb0c1b35a05e888369be"><div class="ttname"><a href="model__brush_8h.html#af441c2813089fb0c1b35a05e888369be">MATERIALFLAG_NOCULLFACE</a></div><div class="ttdeci">#define MATERIALFLAG_NOCULLFACE</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00111">model_brush.h:111</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_afd200d146636dc15acd310fa22c6b279"><div class="ttname"><a href="model__brush_8h.html#afd200d146636dc15acd310fa22c6b279">MATERIALFLAG_CUSTOMBLEND</a></div><div class="ttdeci">#define MATERIALFLAG_CUSTOMBLEND</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00105">model_brush.h:105</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_afe65532d5f196261f10f7f6ccddef1b8"><div class="ttname"><a href="model__brush_8h.html#afe65532d5f196261f10f7f6ccddef1b8">MATERIALFLAG_NORTLIGHT</a></div><div class="ttdeci">#define MATERIALFLAG_NORTLIGHT</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00129">model_brush.h:129</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a033bc5aeb3c34f7ec361d8e8a9c9eddf"><div class="ttname"><a href="model__q3bsp_8h.html#a033bc5aeb3c34f7ec361d8e8a9c9eddf">Q3SURFACEPARM_PLAYERCLIP</a></div><div class="ttdeci">#define Q3SURFACEPARM_PLAYERCLIP</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00282">model_q3bsp.h:282</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a1df96e3aa46b1e0d6b6579f17c80e281"><div class="ttname"><a href="model__q3bsp_8h.html#a1df96e3aa46b1e0d6b6579f17c80e281">Q3SURFACEPARM_NOIMPACT</a></div><div class="ttdeci">#define Q3SURFACEPARM_NOIMPACT</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00276">model_q3bsp.h:276</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a2414939f5d83172dfbde1558ea62ce12"><div class="ttname"><a href="model__q3bsp_8h.html#a2414939f5d83172dfbde1558ea62ce12">Q3SURFACEPARM_STRUCTURAL</a></div><div class="ttdeci">#define Q3SURFACEPARM_STRUCTURAL</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00286">model_q3bsp.h:286</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a336880b416d3577c377b4be4101a31f5"><div class="ttname"><a href="model__q3bsp_8h.html#a336880b416d3577c377b4be4101a31f5">Q3SURFACEPARM_NONSOLID</a></div><div class="ttdeci">#define Q3SURFACEPARM_NONSOLID</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00280">model_q3bsp.h:280</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a3419225ac529b57d5f8fdfd0842c6451"><div class="ttname"><a href="model__q3bsp_8h.html#a3419225ac529b57d5f8fdfd0842c6451">Q3SURFACEFLAG_SKY</a></div><div class="ttdeci">#define Q3SURFACEFLAG_SKY</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00244">model_q3bsp.h:244</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a391f4fc293d177e0812f34c67973727b"><div class="ttname"><a href="model__q3bsp_8h.html#a391f4fc293d177e0812f34c67973727b">Q3SURFACEPARM_TRANS</a></div><div class="ttdeci">#define Q3SURFACEPARM_TRANS</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00287">model_q3bsp.h:287</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a3c895f98528a0954a24b3726c4a87f4e"><div class="ttname"><a href="model__q3bsp_8h.html#a3c895f98528a0954a24b3726c4a87f4e">Q3SURFACEPARM_FOG</a></div><div class="ttdeci">#define Q3SURFACEPARM_FOG</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00268">model_q3bsp.h:268</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a3d16680d0ae45a060ab7c17b9b46c82e"><div class="ttname"><a href="model__q3bsp_8h.html#a3d16680d0ae45a060ab7c17b9b46c82e">Q3SURFACEPARM_NODROP</a></div><div class="ttdeci">#define Q3SURFACEPARM_NODROP</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00275">model_q3bsp.h:275</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a4ebac751fc53d9ca7a56a96318e24e9a"><div class="ttname"><a href="model__q3bsp_8h.html#a4ebac751fc53d9ca7a56a96318e24e9a">Q3SURFACEPARM_NOMIPMAPS</a></div><div class="ttdeci">#define Q3SURFACEPARM_NOMIPMAPS</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00279">model_q3bsp.h:279</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a4ed15d45309b14e9e9d4718657329275"><div class="ttname"><a href="model__q3bsp_8h.html#a4ed15d45309b14e9e9d4718657329275">Q3SURFACEFLAG_NOMARKS</a></div><div class="ttdeci">#define Q3SURFACEFLAG_NOMARKS</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00247">model_q3bsp.h:247</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a51b0446289ccbfa017b1907f3de2f877"><div class="ttname"><a href="model__q3bsp_8h.html#a51b0446289ccbfa017b1907f3de2f877">Q3SURFACEPARM_CLUSTERPORTAL</a></div><div class="ttdeci">#define Q3SURFACEPARM_CLUSTERPORTAL</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00265">model_q3bsp.h:265</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a53607f1e515147f2ea7d990fb8452855"><div class="ttname"><a href="model__q3bsp_8h.html#a53607f1e515147f2ea7d990fb8452855">Q3SURFACEFLAG_SLICK</a></div><div class="ttdeci">#define Q3SURFACEFLAG_SLICK</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00243">model_q3bsp.h:243</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a5c1521ef1bd61bebcd96be307ca953df"><div class="ttname"><a href="model__q3bsp_8h.html#a5c1521ef1bd61bebcd96be307ca953df">Q3SURFACEPARM_NODAMAGE</a></div><div class="ttdeci">#define Q3SURFACEPARM_NODAMAGE</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00272">model_q3bsp.h:272</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a5ccb1006a1e14352ba2b5dcca980366c"><div class="ttname"><a href="model__q3bsp_8h.html#a5ccb1006a1e14352ba2b5dcca980366c">Q3SURFACEFLAG_METALSTEPS</a></div><div class="ttdeci">#define Q3SURFACEFLAG_METALSTEPS</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00254">model_q3bsp.h:254</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a5d166089e7250d935e112267e1dba1d0"><div class="ttname"><a href="model__q3bsp_8h.html#a5d166089e7250d935e112267e1dba1d0">Q3SURFACEPARM_SLICK</a></div><div class="ttdeci">#define Q3SURFACEPARM_SLICK</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00284">model_q3bsp.h:284</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a78cb28bc5b8d2c67dc5298c9ce96a134"><div class="ttname"><a href="model__q3bsp_8h.html#a78cb28bc5b8d2c67dc5298c9ce96a134">Q3SURFACEFLAG_ALPHASHADOW</a></div><div class="ttdeci">#define Q3SURFACEFLAG_ALPHASHADOW</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00258">model_q3bsp.h:258</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a7aece79ccef18bc43b15a75c61f2fd88"><div class="ttname"><a href="model__q3bsp_8h.html#a7aece79ccef18bc43b15a75c61f2fd88">Q3SURFACEPARM_METALSTEPS</a></div><div class="ttdeci">#define Q3SURFACEPARM_METALSTEPS</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00271">model_q3bsp.h:271</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a7bf4cf654a277c3b31cf843bca788ee1"><div class="ttname"><a href="model__q3bsp_8h.html#a7bf4cf654a277c3b31cf843bca788ee1">Q3SURFACEPARM_NODRAW</a></div><div class="ttdeci">#define Q3SURFACEPARM_NODRAW</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00274">model_q3bsp.h:274</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a7f96e9fc81c806967ec292c1de1c083a"><div class="ttname"><a href="model__q3bsp_8h.html#a7f96e9fc81c806967ec292c1de1c083a">Q3SURFACEPARM_NOLIGHTMAP</a></div><div class="ttdeci">#define Q3SURFACEPARM_NOLIGHTMAP</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00277">model_q3bsp.h:277</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a7fb78b54cea0523f324ac2070a59420b"><div class="ttname"><a href="model__q3bsp_8h.html#a7fb78b54cea0523f324ac2070a59420b">Q3SURFACEFLAG_NOIMPACT</a></div><div class="ttdeci">#define Q3SURFACEFLAG_NOIMPACT</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00246">model_q3bsp.h:246</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a8070596138109ba2f650eab353842f14"><div class="ttname"><a href="model__q3bsp_8h.html#a8070596138109ba2f650eab353842f14">Q3SURFACEFLAG_LIGHTFILTER</a></div><div class="ttdeci">#define Q3SURFACEFLAG_LIGHTFILTER</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00257">model_q3bsp.h:257</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a87aeb6af078d63bf2908c682e390c5bc"><div class="ttname"><a href="model__q3bsp_8h.html#a87aeb6af078d63bf2908c682e390c5bc">Q3SURFACEPARM_LAVA</a></div><div class="ttdeci">#define Q3SURFACEPARM_LAVA</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00269">model_q3bsp.h:269</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a8a38a860b9780c723336b0dd1e1c24b9"><div class="ttname"><a href="model__q3bsp_8h.html#a8a38a860b9780c723336b0dd1e1c24b9">Q3SURFACEFLAG_NOLIGHTMAP</a></div><div class="ttdeci">#define Q3SURFACEFLAG_NOLIGHTMAP</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00252">model_q3bsp.h:252</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a8ed52380b620b1d0bf5c8688c23b2254"><div class="ttname"><a href="model__q3bsp_8h.html#a8ed52380b620b1d0bf5c8688c23b2254">Q3SURFACEPARM_SLIME</a></div><div class="ttdeci">#define Q3SURFACEPARM_SLIME</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00285">model_q3bsp.h:285</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a9128cd0379a80bed8dee06ce3ff9583b"><div class="ttname"><a href="model__q3bsp_8h.html#a9128cd0379a80bed8dee06ce3ff9583b">Q3SURFACEFLAG_HINT</a></div><div class="ttdeci">#define Q3SURFACEFLAG_HINT</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00250">model_q3bsp.h:250</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_a91c88de2a4741941393dc97f841bcef8"><div class="ttname"><a href="model__q3bsp_8h.html#a91c88de2a4741941393dc97f841bcef8">Q3SURFACEFLAG_DUST</a></div><div class="ttdeci">#define Q3SURFACEFLAG_DUST</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00260">model_q3bsp.h:260</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_aa2adaaf35359aff25e8edd7d80a9d02d"><div class="ttname"><a href="model__q3bsp_8h.html#aa2adaaf35359aff25e8edd7d80a9d02d">Q3SURFACEPARM_SKY</a></div><div class="ttdeci">#define Q3SURFACEPARM_SKY</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00283">model_q3bsp.h:283</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_aa7348111d6ef7c8609c0801e25556aa1"><div class="ttname"><a href="model__q3bsp_8h.html#aa7348111d6ef7c8609c0801e25556aa1">Q3SURFACEPARM_LIGHTFILTER</a></div><div class="ttdeci">#define Q3SURFACEPARM_LIGHTFILTER</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00270">model_q3bsp.h:270</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_aa8ecf0f60fa234b2192a3ab9670d59fa"><div class="ttname"><a href="model__q3bsp_8h.html#aa8ecf0f60fa234b2192a3ab9670d59fa">Q3SURFACEPARM_ANTIPORTAL</a></div><div class="ttdeci">#define Q3SURFACEPARM_ANTIPORTAL</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00294">model_q3bsp.h:294</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_aa946b0630850bfc47b20c1831114a4a7"><div class="ttname"><a href="model__q3bsp_8h.html#aa946b0630850bfc47b20c1831114a4a7">Q3SURFACEPARM_NOMARKS</a></div><div class="ttdeci">#define Q3SURFACEPARM_NOMARKS</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00278">model_q3bsp.h:278</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_aace9a283b783a86d5221cf3839116b40"><div class="ttname"><a href="model__q3bsp_8h.html#aace9a283b783a86d5221cf3839116b40">Q3SURFACEPARM_ORIGIN</a></div><div class="ttdeci">#define Q3SURFACEPARM_ORIGIN</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00281">model_q3bsp.h:281</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_aaf11f833a2a442d8d19bf7db77e0b722"><div class="ttname"><a href="model__q3bsp_8h.html#aaf11f833a2a442d8d19bf7db77e0b722">Q3SURFACEFLAG_NODRAW</a></div><div class="ttdeci">#define Q3SURFACEFLAG_NODRAW</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00249">model_q3bsp.h:249</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_ad90cf96114e59cdded617dbcf1f79d6d"><div class="ttname"><a href="model__q3bsp_8h.html#ad90cf96114e59cdded617dbcf1f79d6d">Q3SURFACEPARM_ALPHASHADOW</a></div><div class="ttdeci">#define Q3SURFACEPARM_ALPHASHADOW</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00263">model_q3bsp.h:263</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_ad9286439d536a08bd964279d14e971b9"><div class="ttname"><a href="model__q3bsp_8h.html#ad9286439d536a08bd964279d14e971b9">Q3SURFACEFLAG_POINTLIGHT</a></div><div class="ttdeci">#define Q3SURFACEFLAG_POINTLIGHT</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00253">model_q3bsp.h:253</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_adfb3c4a2bb05352e6559c54917fbaf59"><div class="ttname"><a href="model__q3bsp_8h.html#adfb3c4a2bb05352e6559c54917fbaf59">Q3SURFACEPARM_BOTCLIP</a></div><div class="ttdeci">#define Q3SURFACEPARM_BOTCLIP</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00292">model_q3bsp.h:292</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_ae10d4e2a32aea1b5cd5563596c22c033"><div class="ttname"><a href="model__q3bsp_8h.html#ae10d4e2a32aea1b5cd5563596c22c033">Q3SURFACEPARM_DUST</a></div><div class="ttdeci">#define Q3SURFACEPARM_DUST</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00291">model_q3bsp.h:291</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_aeb4b632227e7b1bd0f566a8ac3fd3c66"><div class="ttname"><a href="model__q3bsp_8h.html#aeb4b632227e7b1bd0f566a8ac3fd3c66">Q3SURFACEPARM_WATER</a></div><div class="ttdeci">#define Q3SURFACEPARM_WATER</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00288">model_q3bsp.h:288</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_aee4da2fbbc950ba8a1b0a6a45f479c8f"><div class="ttname"><a href="model__q3bsp_8h.html#aee4da2fbbc950ba8a1b0a6a45f479c8f">Q3SURFACEFLAG_NONSOLID</a></div><div class="ttdeci">#define Q3SURFACEFLAG_NONSOLID</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00256">model_q3bsp.h:256</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_aefae4c6078ea0a5ad6ffdffa46a29acb"><div class="ttname"><a href="model__q3bsp_8h.html#aefae4c6078ea0a5ad6ffdffa46a29acb">Q3SURFACEPARM_DETAIL</a></div><div class="ttdeci">#define Q3SURFACEPARM_DETAIL</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00266">model_q3bsp.h:266</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_af015098c6c74b387544d54e7f1ed8c27"><div class="ttname"><a href="model__q3bsp_8h.html#af015098c6c74b387544d54e7f1ed8c27">Q3SURFACEPARM_POINTLIGHT</a></div><div class="ttdeci">#define Q3SURFACEPARM_POINTLIGHT</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00289">model_q3bsp.h:289</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_af04b6ae65ee17b83bae885bc113830c8"><div class="ttname"><a href="model__q3bsp_8h.html#af04b6ae65ee17b83bae885bc113830c8">Q3SURFACEFLAG_NODLIGHT</a></div><div class="ttdeci">#define Q3SURFACEFLAG_NODLIGHT</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00259">model_q3bsp.h:259</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_af2d936943c71ff1d0a3a4a1992ea25db"><div class="ttname"><a href="model__q3bsp_8h.html#af2d936943c71ff1d0a3a4a1992ea25db">Q3SURFACEFLAG_NODAMAGE</a></div><div class="ttdeci">#define Q3SURFACEFLAG_NODAMAGE</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00242">model_q3bsp.h:242</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_af76390044b0a020204b68f5ca543bfeb"><div class="ttname"><a href="model__q3bsp_8h.html#af76390044b0a020204b68f5ca543bfeb">Q3SURFACEPARM_DONOTENTER</a></div><div class="ttdeci">#define Q3SURFACEPARM_DONOTENTER</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00267">model_q3bsp.h:267</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_afa1e37855af103a1dcbf1c0f83cc3e21"><div class="ttname"><a href="model__q3bsp_8h.html#afa1e37855af103a1dcbf1c0f83cc3e21">Q3SURFACEPARM_AREAPORTAL</a></div><div class="ttdeci">#define Q3SURFACEPARM_AREAPORTAL</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00264">model_q3bsp.h:264</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_afa8334a4ee597e27ff4f30137291e302"><div class="ttname"><a href="model__q3bsp_8h.html#afa8334a4ee597e27ff4f30137291e302">Q3SURFACEPARM_NODLIGHT</a></div><div class="ttdeci">#define Q3SURFACEPARM_NODLIGHT</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00273">model_q3bsp.h:273</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_afcc3bc431a146072f283d63e3cf4434e"><div class="ttname"><a href="model__q3bsp_8h.html#afcc3bc431a146072f283d63e3cf4434e">Q3SURFACEPARM_LIGHTGRID</a></div><div class="ttdeci">#define Q3SURFACEPARM_LIGHTGRID</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00293">model_q3bsp.h:293</a></div></div>
<div class="ttc" id="amodel__q3bsp_8h_html_afe7ba04c1a61e044c73bc3c5f9b4d8aa"><div class="ttname"><a href="model__q3bsp_8h.html#afe7ba04c1a61e044c73bc3c5f9b4d8aa">Q3SURFACEPARM_HINT</a></div><div class="ttdeci">#define Q3SURFACEPARM_HINT</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00290">model_q3bsp.h:290</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a011a07f2c9ef46e41b9ba88dfbbafd92"><div class="ttname"><a href="model__shared_8c.html#a011a07f2c9ef46e41b9ba88dfbbafd92">Mod_Print_f</a></div><div class="ttdeci">static void Mod_Print_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00692">model_shared.c:692</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a0260a505a0b40caa6601b38d4aea367d"><div class="ttname"><a href="model__shared_8c.html#a0260a505a0b40caa6601b38d4aea367d">Mod_Reload</a></div><div class="ttdeci">void Mod_Reload(void)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00661">model_shared.c:661</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a075211710038f3d573211bb3274e2356"><div class="ttname"><a href="model__shared_8c.html#a075211710038f3d573211bb3274e2356">Mod_GenerateLightmaps_CreateLights_ComputeSVBSP</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_CreateLights_ComputeSVBSP(model_t *model, lightmaplight_t *lightinfo)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03677">model_shared.c:3677</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a086413ffb031836ef17e4ca586422fc6"><div class="ttname"><a href="model__shared_8c.html#a086413ffb031836ef17e4ca586422fc6">Mod_ClearUsed</a></div><div class="ttdeci">void Mod_ClearUsed(void)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00564">model_shared.c:564</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a0f3acc72b271530ae45ed8b06f011976"><div class="ttname"><a href="model__shared_8c.html#a0f3acc72b271530ae45ed8b06f011976">r_shadow_lightattenuationdividebias</a></div><div class="ttdeci">cvar_t r_shadow_lightattenuationdividebias</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00153">r_shadow.c:153</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a1290d4b43a0dd05ecbc2b3bb36b497a0"><div class="ttname"><a href="model__shared_8c.html#a1290d4b43a0dd05ecbc2b3bb36b497a0">Mod_LookupQ3Shader</a></div><div class="ttdeci">shader_t * Mod_LookupQ3Shader(const char *name)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02219">model_shared.c:2219</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a1694c78ec74a4c2a96c00ea69cf44ef7"><div class="ttname"><a href="model__shared_8c.html#a1694c78ec74a4c2a96c00ea69cf44ef7">Mod_LoadTextureFromQ3Shader</a></div><div class="ttdeci">qbool Mod_LoadTextureFromQ3Shader(mempool_t *mempool, const char *modelname, texture_t *texture, const char *name, qbool warnmissing, qbool fallback, int defaulttexflags, int defaultmaterialflags)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02270">model_shared.c:2270</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a181c7a7503f6fd6b20b5233da67b2cbc"><div class="ttname"><a href="model__shared_8c.html#a181c7a7503f6fd6b20b5233da67b2cbc">Mod_Mesh_Create</a></div><div class="ttdeci">void Mod_Mesh_Create(model_t *mod, const char *name)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04443">model_shared.c:4443</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a191e480db71fa680ca320583e42060bb"><div class="ttname"><a href="model__shared_8c.html#a191e480db71fa680ca320583e42060bb">Mod_Mesh_Reset</a></div><div class="ttdeci">void Mod_Mesh_Reset(model_t *mod)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04465">model_shared.c:4465</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a1cffd3fe0d4f339cbc89948a2c405984"><div class="ttname"><a href="model__shared_8c.html#a1cffd3fe0d4f339cbc89948a2c405984">vid_opened</a></div><div class="ttdeci">qbool vid_opened</div><div class="ttdef"><b>Definition</b> <a href="cl__main_8c_source.html#l02787">cl_main.c:2787</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a1e063ce17b7be8462ffafa0f8f8ff8b1"><div class="ttname"><a href="model__shared_8c.html#a1e063ce17b7be8462ffafa0f8f8ff8b1">Mod_AllocLightmap_Reset</a></div><div class="ttdeci">void Mod_AllocLightmap_Reset(mod_alloclightmap_state_t *state)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03464">model_shared.c:3464</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a1fc8b5f7ffe77967a993fe042451521a"><div class="ttname"><a href="model__shared_8c.html#a1fc8b5f7ffe77967a993fe042451521a">Q3Shader_AddToHash</a></div><div class="ttdeci">static void Q3Shader_AddToHash(shader_t *shader)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01408">model_shared.c:1408</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a21b90d5ad89fcecc68ead5509c8dd85e"><div class="ttname"><a href="model__shared_8c.html#a21b90d5ad89fcecc68ead5509c8dd85e">mod_generatelightmaps_borderpixels</a></div><div class="ttdeci">cvar_t mod_generatelightmaps_borderpixels</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00033">model_shared.c:33</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a23ab54798c29a2f649842ed4dc412f7e"><div class="ttname"><a href="model__shared_8c.html#a23ab54798c29a2f649842ed4dc412f7e">Mod_Mesh_ComputeBounds</a></div><div class="ttdeci">static void Mod_Mesh_ComputeBounds(model_t *mod)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04680">model_shared.c:4680</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a246d19129577709175692eab408c7ab9"><div class="ttname"><a href="model__shared_8c.html#a246d19129577709175692eab408c7ab9">Mod_Mesh_AddSurface</a></div><div class="ttdeci">msurface_t * Mod_Mesh_AddSurface(model_t *mod, texture_t *tex, qbool batchwithprevioussurface)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04528">model_shared.c:4528</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a27be267e2cf2666a18e976df520e625b"><div class="ttname"><a href="model__shared_8c.html#a27be267e2cf2666a18e976df520e625b">Mod_AllocLightmap_Init</a></div><div class="ttdeci">void Mod_AllocLightmap_Init(mod_alloclightmap_state_t *state, mempool_t *mempool, int width, int height)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03449">model_shared.c:3449</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a2817d9f84a302b5c97fdaac3889d1a0e"><div class="ttname"><a href="model__shared_8c.html#a2817d9f84a302b5c97fdaac3889d1a0e">Mod_CreateShaderPassFromQ3ShaderLayer</a></div><div class="ttdeci">texture_shaderpass_t * Mod_CreateShaderPassFromQ3ShaderLayer(mempool_t *mempool, const char *modelname, q3shaderinfo_layer_t *layer, int layerindex, int texflags, const char *texturename)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02251">model_shared.c:2251</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a2a3016fba1c91f35365a48717811edc3"><div class="ttname"><a href="model__shared_8c.html#a2a3016fba1c91f35365a48717811edc3">Mod_AllocLightmap_Free</a></div><div class="ttdeci">void Mod_AllocLightmap_Free(mod_alloclightmap_state_t *state)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03475">model_shared.c:3475</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a2c170ee60e8a7de85e994d31d60d84d8"><div class="ttname"><a href="model__shared_8c.html#a2c170ee60e8a7de85e994d31d60d84d8">Mod_GenerateLightmaps_SamplePoint</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_SamplePoint(const float *pos, const float *normal, float *sample, int numoffsets, const float *offsets)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03782">model_shared.c:3782</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a2c5f310267e30d353949da4aaa6a0940"><div class="ttname"><a href="model__shared_8c.html#a2c5f310267e30d353949da4aaa6a0940">Mod_Mesh_IndexForVertex</a></div><div class="ttdeci">int Mod_Mesh_IndexForVertex(model_t *mod, msurface_t *surf, float x, float y, float z, float nx, float ny, float nz, float s, float t, float u, float v, float r, float g, float b, float a)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04554">model_shared.c:4554</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a2de5eacb468f04855c801cf2f1a178ec"><div class="ttname"><a href="model__shared_8c.html#a2de5eacb468f04855c801cf2f1a178ec">Mod_ShadowMesh_CreateVBOs</a></div><div class="ttdeci">static void Mod_ShadowMesh_CreateVBOs(shadowmesh_t *mesh)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01071">model_shared.c:1071</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a2f621b2a71db69500b0c3bf0c2e10a60"><div class="ttname"><a href="model__shared_8c.html#a2f621b2a71db69500b0c3bf0c2e10a60">Mod_GenerateLightmaps_LightPoint</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_LightPoint(model_t *model, const vec3_t pos, vec3_t ambient, vec3_t diffuse, vec3_t lightdir)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03582">model_shared.c:3582</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a321b1980cf168303fb8e38f3676a8f41"><div class="ttname"><a href="model__shared_8c.html#a321b1980cf168303fb8e38f3676a8f41">mod_newmap</a></div><div class="ttdeci">static void mod_newmap(void)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00122">model_shared.c:122</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a32f3c43770d65673771406dcb9b61a66"><div class="ttname"><a href="model__shared_8c.html#a32f3c43770d65673771406dcb9b61a66">Mod_LoadSkinFiles</a></div><div class="ttdeci">skinfile_t * Mod_LoadSkinFiles(void)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02705">model_shared.c:2705</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a333c56a919ff09edad1477b17503a76d"><div class="ttname"><a href="model__shared_8c.html#a333c56a919ff09edad1477b17503a76d">mod_generatelightmaps_gridsamples</a></div><div class="ttdeci">cvar_t mod_generatelightmaps_gridsamples</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00037">model_shared.c:37</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a356baa7abb6314847b4c15f733520b83"><div class="ttname"><a href="model__shared_8c.html#a356baa7abb6314847b4c15f733520b83">Mod_GenerateLightmaps_CreateLights_ComputeSVBSP_InsertSurfaces</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_CreateLights_ComputeSVBSP_InsertSurfaces(const model_t *model, svbsp_t *svbsp, const float *mins, const float *maxs)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03651">model_shared.c:3651</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a364e4fc7a1d2e7bff3e49e09e4d6a719"><div class="ttname"><a href="model__shared_8c.html#a364e4fc7a1d2e7bff3e49e09e4d6a719">R_Model_Null_Draw</a></div><div class="ttdeci">static void R_Model_Null_Draw(entity_render_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00255">model_shared.c:255</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a37407d4a42c1e522117279e58e7f25db"><div class="ttname"><a href="model__shared_8c.html#a37407d4a42c1e522117279e58e7f25db">Mod_BuildNormals</a></div><div class="ttdeci">void Mod_BuildNormals(int firstvertex, int numvertices, int numtriangles, const float *vertex3f, const int *elements, float *normal3f, qbool areaweighting)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00806">model_shared.c:806</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a3a2900957b32c3fef225d35df5f3c727"><div class="ttname"><a href="model__shared_8c.html#a3a2900957b32c3fef225d35df5f3c727">loadmodel</a></div><div class="ttdeci">model_t * loadmodel</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00042">model_shared.c:42</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a3ad808fbef6d1b76547423b537ae975c"><div class="ttname"><a href="model__shared_8c.html#a3ad808fbef6d1b76547423b537ae975c">Mod_Mesh_Validate</a></div><div class="ttdeci">void Mod_Mesh_Validate(model_t *mod)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04736">model_shared.c:4736</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a3aeb019546a6a3c64accee040d01f336"><div class="ttname"><a href="model__shared_8c.html#a3aeb019546a6a3c64accee040d01f336">Mod_CreateShaderPass</a></div><div class="ttdeci">texture_shaderpass_t * Mod_CreateShaderPass(mempool_t *mempool, skinframe_t *skinframe)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02236">model_shared.c:2236</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a3e102ef2a7eaa95f89ea4fa0f518b7c7"><div class="ttname"><a href="model__shared_8c.html#a3e102ef2a7eaa95f89ea4fa0f518b7c7">Mod_ForName</a></div><div class="ttdeci">model_t * Mod_ForName(const char *name, qbool crash, qbool checkdisk, const char *parentname)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00640">model_shared.c:640</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a3ec29c084356454f725c32198d27544d"><div class="ttname"><a href="model__shared_8c.html#a3ec29c084356454f725c32198d27544d">Mod_ShadowMesh_Free</a></div><div class="ttdeci">void Mod_ShadowMesh_Free(shadowmesh_t *mesh)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01175">model_shared.c:1175</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a413acff425980e03159052b58f538cbd"><div class="ttname"><a href="model__shared_8c.html#a413acff425980e03159052b58f538cbd">r_mipnormalmaps</a></div><div class="ttdeci">cvar_t r_mipnormalmaps</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00031">model_shared.c:31</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a455c3cfb0b7e57f8e4dbe4ee0e8fd37e"><div class="ttname"><a href="model__shared_8c.html#a455c3cfb0b7e57f8e4dbe4ee0e8fd37e">Mod_AllocSurfMesh</a></div><div class="ttdeci">void Mod_AllocSurfMesh(mempool_t *mempool, int numvertices, int numtriangles, qbool lightmapoffsets, qbool vertexcolors)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00973">model_shared.c:973</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a4733e9adbf3e39c180e794cfccc8734a"><div class="ttname"><a href="model__shared_8c.html#a4733e9adbf3e39c180e794cfccc8734a">Mod_Mesh_GetTexture</a></div><div class="ttdeci">texture_t * Mod_Mesh_GetTexture(model_t *mod, const char *name, int defaultdrawflags, int defaulttexflags, int defaultmaterialflags)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04476">model_shared.c:4476</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a499f933ba033669ca67cea8a8b9351f6"><div class="ttname"><a href="model__shared_8c.html#a499f933ba033669ca67cea8a8b9351f6">mod_generatelightmaps_texturesize</a></div><div class="ttdeci">cvar_t mod_generatelightmaps_texturesize</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00034">model_shared.c:34</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a4dfd5430092c30e91579e94abe395547"><div class="ttname"><a href="model__shared_8c.html#a4dfd5430092c30e91579e94abe395547">Mod_FindPotentialDeforms</a></div><div class="ttdeci">static void Mod_FindPotentialDeforms(model_t *mod)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00372">model_shared.c:372</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a4eaa08a8f4735ab687cf8856faaa5cec"><div class="ttname"><a href="model__shared_8c.html#a4eaa08a8f4735ab687cf8856faaa5cec">Mod_GenerateLightmaps_f</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04428">model_shared.c:4428</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a4f0df7ee2d7f6abd898e01abe365f373"><div class="ttname"><a href="model__shared_8c.html#a4f0df7ee2d7f6abd898e01abe365f373">Q3SHADER_HASH_SIZE</a></div><div class="ttdeci">#define Q3SHADER_HASH_SIZE</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00076">model_shared.c:76</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a537803427b478758ce6c99781943b12d"><div class="ttname"><a href="model__shared_8c.html#a537803427b478758ce6c99781943b12d">Mod_Mesh_AddTriangle</a></div><div class="ttdeci">void Mod_Mesh_AddTriangle(model_t *mod, msurface_t *surf, int e0, int e1, int e2)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04633">model_shared.c:4633</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a555e39411377f91b5a715673fc7d58c3"><div class="ttname"><a href="model__shared_8c.html#a555e39411377f91b5a715673fc7d58c3">Mod_PurgeUnused</a></div><div class="ttdeci">void Mod_PurgeUnused(void)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00574">model_shared.c:574</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a571533146ba632ac37f6bced432b8fc1"><div class="ttname"><a href="model__shared_8c.html#a571533146ba632ac37f6bced432b8fc1">Mod_Mesh_UploadDynamicBuffers</a></div><div class="ttdeci">static void Mod_Mesh_UploadDynamicBuffers(model_t *mod)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04760">model_shared.c:4760</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a59cecfbdb3deb49561ca49671e6b3db9"><div class="ttname"><a href="model__shared_8c.html#a59cecfbdb3deb49561ca49671e6b3db9">Mod_CountSkinFiles</a></div><div class="ttdeci">int Mod_CountSkinFiles(skinfile_t *skinfile)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02826">model_shared.c:2826</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a5afed934d65bdd22c1a19bc66aa0db1d"><div class="ttname"><a href="model__shared_8c.html#a5afed934d65bdd22c1a19bc66aa0db1d">Mod_BuildVertexRemapTableFromElements</a></div><div class="ttdeci">int Mod_BuildVertexRemapTableFromElements(int numelements, const int *elements, int numvertices, int *remapvertices)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00724">model_shared.c:724</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a603c933678c63e166ac16b9ac3de3f58"><div class="ttname"><a href="model__shared_8c.html#a603c933678c63e166ac16b9ac3de3f58">loader</a></div><div class="ttdeci">static modloader_t loader[]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00045">model_shared.c:45</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a61017a9ce02a9281dd3d52d7be81228a"><div class="ttname"><a href="model__shared_8c.html#a61017a9ce02a9281dd3d52d7be81228a">Mod_GenerateLightmaps_UnweldTriangles</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_UnweldTriangles(model_t *model)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03969">model_shared.c:3969</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a6131839eb1ffee2234a2d1caf1a63591"><div class="ttname"><a href="model__shared_8c.html#a6131839eb1ffee2234a2d1caf1a63591">Mod_GenerateLightmaps_VertexSample</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_VertexSample(const float *pos, const float *normal, float *vertex_color)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03881">model_shared.c:3881</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a617474cc8dc849cb5954712cc57f1a12"><div class="ttname"><a href="model__shared_8c.html#a617474cc8dc849cb5954712cc57f1a12">Mod_ShadowMesh_AddVertex</a></div><div class="ttdeci">int Mod_ShadowMesh_AddVertex(shadowmesh_t *mesh, const float *vertex3f)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01019">model_shared.c:1019</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a6176e32177c906b13985aab3dc4ca40f"><div class="ttname"><a href="model__shared_8c.html#a6176e32177c906b13985aab3dc4ca40f">MAX_LIGHTMAPSAMPLES</a></div><div class="ttdeci">#define MAX_LIGHTMAPSAMPLES</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03572">model_shared.c:3572</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a641cb450c54a445b99c4221ad6cc5f23"><div class="ttname"><a href="model__shared_8c.html#a641cb450c54a445b99c4221ad6cc5f23">Mod_GenerateLightmaps_GridSample</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_GridSample(const float *pos, q3dlightgrid_t *s)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03888">model_shared.c:3888</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a64515e99c29efe9c5d6d3b78c2239d2e"><div class="ttname"><a href="model__shared_8c.html#a64515e99c29efe9c5d6d3b78c2239d2e">Mod_GenerateLightmaps_InitSampleOffsets</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_InitSampleOffsets(model_t *model)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03918">model_shared.c:3918</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a74f1f0b6657977f8dbc5af17a66ac54f"><div class="ttname"><a href="model__shared_8c.html#a74f1f0b6657977f8dbc5af17a66ac54f">Mod_ShadowMesh_Finish</a></div><div class="ttdeci">shadowmesh_t * Mod_ShadowMesh_Finish(shadowmesh_t *mesh, qbool createvbo)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01099">model_shared.c:1099</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a75b93f93a3e9816191d9625160bec6a4"><div class="ttname"><a href="model__shared_8c.html#a75b93f93a3e9816191d9625160bec6a4">Mod_Mesh_Destroy</a></div><div class="ttdeci">void Mod_Mesh_Destroy(model_t *mod)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04458">model_shared.c:4458</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a78fb22b957e64a3049781239ee353d70"><div class="ttname"><a href="model__shared_8c.html#a78fb22b957e64a3049781239ee353d70">mod_q3bsp_nolightmaps</a></div><div class="ttdeci">cvar_t mod_q3bsp_nolightmaps</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l00045">model_brush.c:45</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a7c7a5f1ce32faf220d25380eb24bd1ad"><div class="ttname"><a href="model__shared_8c.html#a7c7a5f1ce32faf220d25380eb24bd1ad">Mod_BuildVBOs</a></div><div class="ttdeci">void Mod_BuildVBOs(void)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02964">model_shared.c:2964</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a7fd1cdd3467c45e41820e2617d656023"><div class="ttname"><a href="model__shared_8c.html#a7fd1cdd3467c45e41820e2617d656023">Mod_GenerateLightmaps_CreateLightmaps</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_CreateLightmaps(model_t *model)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04123">model_shared.c:4123</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a7febcbf270f44712591b217f88204764"><div class="ttname"><a href="model__shared_8c.html#a7febcbf270f44712591b217f88204764">Mod_FrameGroupify_ParseGroups_Store</a></div><div class="ttdeci">static void Mod_FrameGroupify_ParseGroups_Store(unsigned int i, int start, int len, float fps, qbool loop, const char *name, void *pass)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00336">model_shared.c:336</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a7ff8405e122ded38c33c66249c7a4b04"><div class="ttname"><a href="model__shared_8c.html#a7ff8405e122ded38c33c66249c7a4b04">models</a></div><div class="ttdeci">static memexpandablearray_t models</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00068">model_shared.c:68</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a835cf8e835979953163e64c7eea95186"><div class="ttname"><a href="model__shared_8c.html#a835cf8e835979953163e64c7eea95186">Mod_AllocLightmap_Block</a></div><div class="ttdeci">qbool Mod_AllocLightmap_Block(mod_alloclightmap_state_t *state, int blockwidth, int blockheight, int *outx, int *outy)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03482">model_shared.c:3482</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a83e42554be1ced79f6523bb26ef38fd1"><div class="ttname"><a href="model__shared_8c.html#a83e42554be1ced79f6523bb26ef38fd1">q3shader_data</a></div><div class="ttdeci">static q3shader_data_t * q3shader_data</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00083">model_shared.c:83</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a921a86267c44c2b1011772777481a240"><div class="ttname"><a href="model__shared_8c.html#a921a86267c44c2b1011772777481a240">Mod_GenerateLightmaps_LightmapSample</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_LightmapSample(const float *pos, const float *normal, unsigned char *lm_bgr, unsigned char *lm_dir)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03854">model_shared.c:3854</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a93bf405698b289908d28a150f04f0318"><div class="ttname"><a href="model__shared_8c.html#a93bf405698b289908d28a150f04f0318">mod_generatelightmaps_lightmapradius</a></div><div class="ttdeci">cvar_t mod_generatelightmaps_lightmapradius</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00038">model_shared.c:38</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a95d44d041fbaf2dcad39719ef1878d8d"><div class="ttname"><a href="model__shared_8c.html#a95d44d041fbaf2dcad39719ef1878d8d">mod_generatelightmaps_lightinfo</a></div><div class="ttdeci">static lightmaplight_t * mod_generatelightmaps_lightinfo</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03577">model_shared.c:3577</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a96151c36357672ef59306c81490d3e92"><div class="ttname"><a href="model__shared_8c.html#a96151c36357672ef59306c81490d3e92">Mod_MakeSortedSurfaces_qsortfunc</a></div><div class="ttdeci">static int Mod_MakeSortedSurfaces_qsortfunc(const void *a, const void *b)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02913">model_shared.c:2913</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a99847fc089cdd271d3f4998c2c60e719"><div class="ttname"><a href="model__shared_8c.html#a99847fc089cdd271d3f4998c2c60e719">Mod_SnapVertices</a></div><div class="ttdeci">void Mod_SnapVertices(int numcomponents, int numvertices, float *vertices, float snap)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02833">model_shared.c:2833</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a9afca5eb89c94aade4ee83c5ffbf8066"><div class="ttname"><a href="model__shared_8c.html#a9afca5eb89c94aade4ee83c5ffbf8066">Mod_RemoveDegenerateTriangles</a></div><div class="ttdeci">int Mod_RemoveDegenerateTriangles(int numtriangles, const int *inelement3i, int *outelement3i, const float *vertex3f)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02841">model_shared.c:2841</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a9b0e709a676fe0bd42548fcf0a45042e"><div class="ttname"><a href="model__shared_8c.html#a9b0e709a676fe0bd42548fcf0a45042e">Mod_FindName</a></div><div class="ttdeci">model_t * Mod_FindName(const char *name, const char *parentname)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00595">model_shared.c:595</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aa0504c8f99deab8cc22309c607e57094"><div class="ttname"><a href="model__shared_8c.html#aa0504c8f99deab8cc22309c607e57094">mod_generatelightmaps_lightmaptriangles</a></div><div class="ttdeci">lightmaptriangle_t * mod_generatelightmaps_lightmaptriangles</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03570">model_shared.c:3570</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aa1289b05ae97fb1c4089173f2e38ebd9"><div class="ttname"><a href="model__shared_8c.html#aa1289b05ae97fb1c4089173f2e38ebd9">mod_start</a></div><div class="ttdeci">static void mod_start(void)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00085">model_shared.c:85</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aa15e9db022ee22ecd89ebe6c1dd6ba42"><div class="ttname"><a href="model__shared_8c.html#aa15e9db022ee22ecd89ebe6c1dd6ba42">Mod_GenerateLightmaps</a></div><div class="ttdeci">static void Mod_GenerateLightmaps(model_t *model)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04407">model_shared.c:4407</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aa1a590e584125316a8e58ba42954d527"><div class="ttname"><a href="model__shared_8c.html#aa1a590e584125316a8e58ba42954d527">mod_shutdown</a></div><div class="ttdeci">static void mod_shutdown(void)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00108">model_shared.c:108</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aa2c34d2ed1a44ed067b9515351f297e6"><div class="ttname"><a href="model__shared_8c.html#aa2c34d2ed1a44ed067b9515351f297e6">Mod_GenerateLightmaps_CreateLights</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_CreateLights(model_t *model)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03716">model_shared.c:3716</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aa377d967d6424fe03ae7be9ce043d965"><div class="ttname"><a href="model__shared_8c.html#aa377d967d6424fe03ae7be9ce043d965">mod_base</a></div><div class="ttdeci">unsigned char * mod_base</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00682">model_shared.c:682</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aa4c8e5f23a372b474dbf2344bd1af35d"><div class="ttname"><a href="model__shared_8c.html#aa4c8e5f23a372b474dbf2344bd1af35d">Mod_BuildTextureVectorsFromNormals</a></div><div class="ttdeci">void Mod_BuildTextureVectorsFromNormals(int firstvertex, int numvertices, int numtriangles, const float *vertex3f, const float *texcoord2f, const float *normal3f, const int *elements, float *svector3f, float *tvector3f, qbool areaweighting)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00893">model_shared.c:893</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aa7a7cfdba28a5e8431876ffa977f8ed0"><div class="ttname"><a href="model__shared_8c.html#aa7a7cfdba28a5e8431876ffa977f8ed0">Mod_ShadowMesh_CalcBBox</a></div><div class="ttdeci">void Mod_ShadowMesh_CalcBBox(shadowmesh_t *mesh, vec3_t mins, vec3_t maxs, vec3_t center, float *radius)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01136">model_shared.c:1136</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aa8682f0314d166f3d811599c8400e3a2"><div class="ttname"><a href="model__shared_8c.html#aa8682f0314d166f3d811599c8400e3a2">Mod_FreeSkinFiles</a></div><div class="ttdeci">void Mod_FreeSkinFiles(skinfile_t *skinfile)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02810">model_shared.c:2810</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aa8c710db4d67bb0e0759c01235c827e7"><div class="ttname"><a href="model__shared_8c.html#aa8c710db4d67bb0e0759c01235c827e7">Mod_MakeSortedSurfaces</a></div><div class="ttdeci">void Mod_MakeSortedSurfaces(model_t *mod)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02936">model_shared.c:2936</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aa8e1a854d6d64519897f2f0187fffe01"><div class="ttname"><a href="model__shared_8c.html#aa8e1a854d6d64519897f2f0187fffe01">mod_generatelightmaps_offsets</a></div><div class="ttdeci">static float mod_generatelightmaps_offsets[3][MAX_LIGHTMAPSAMPLES][3]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03574">model_shared.c:3574</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aab4dd6a29cd4b0b1fb521bc4a067a45c"><div class="ttname"><a href="model__shared_8c.html#aab4dd6a29cd4b0b1fb521bc4a067a45c">Mod_Decompile_f</a></div><div class="ttdeci">static void Mod_Decompile_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03318">model_shared.c:3318</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aab99691470aed3c906207c7628aee05a"><div class="ttname"><a href="model__shared_8c.html#aab99691470aed3c906207c7628aee05a">mod_generatelightmaps_numoffsets</a></div><div class="ttdeci">static int mod_generatelightmaps_numoffsets[3]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03573">model_shared.c:3573</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aad0500eca89bdf3928091895b0ae35e3"><div class="ttname"><a href="model__shared_8c.html#aad0500eca89bdf3928091895b0ae35e3">q3shaders_mem</a></div><div class="ttdeci">static mempool_t * q3shaders_mem</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00070">model_shared.c:70</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aaf5fb488866dbdda69745ecf07311ce2"><div class="ttname"><a href="model__shared_8c.html#aaf5fb488866dbdda69745ecf07311ce2">Mod_CreateCollisionMesh</a></div><div class="ttdeci">void Mod_CreateCollisionMesh(model_t *mod)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01196">model_shared.c:1196</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ab3c38940592b16865aefdfce14fed8e4"><div class="ttname"><a href="model__shared_8c.html#ab3c38940592b16865aefdfce14fed8e4">Mod_LoadQ3Shaders_EnumerateWaveFunc</a></div><div class="ttdeci">static int Mod_LoadQ3Shaders_EnumerateWaveFunc(const char *s)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01381">model_shared.c:1381</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ab612ba381a094a3bc8c849be3d9ae903"><div class="ttname"><a href="model__shared_8c.html#ab612ba381a094a3bc8c849be3d9ae903">mod_generatelightmaps_numlights</a></div><div class="ttdeci">static int mod_generatelightmaps_numlights</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03576">model_shared.c:3576</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ab691ff4996991fc8d44cc3fdd522e847"><div class="ttname"><a href="model__shared_8c.html#ab691ff4996991fc8d44cc3fdd522e847">Mod_GenerateLightmaps_DestroyLights</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_DestroyLights(model_t *model)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03755">model_shared.c:3755</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ab7bdd43d79cd365c41dc0903c8d3da9f"><div class="ttname"><a href="model__shared_8c.html#ab7bdd43d79cd365c41dc0903c8d3da9f">Mod_UnloadModel</a></div><div class="ttdeci">void Mod_UnloadModel(model_t *mod)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00211">model_shared.c:211</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ab800e60ac9897a359da21d16f842679d"><div class="ttname"><a href="model__shared_8c.html#ab800e60ac9897a359da21d16f842679d">mod_generatelightmaps_vertexsamples</a></div><div class="ttdeci">cvar_t mod_generatelightmaps_vertexsamples</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00036">model_shared.c:36</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ab807c8ef48ac23255f9e8b7a7ab5caf0"><div class="ttname"><a href="model__shared_8c.html#ab807c8ef48ac23255f9e8b7a7ab5caf0">Mod_ShadowMesh_AddMesh</a></div><div class="ttdeci">void Mod_ShadowMesh_AddMesh(shadowmesh_t *mesh, const float *vertex3f, int numtris, const int *element3i)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01041">model_shared.c:1041</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_abaff7135ada3e14a87abc8ab72e2478f"><div class="ttname"><a href="model__shared_8c.html#abaff7135ada3e14a87abc8ab72e2478f">Mod_GenerateLightmaps_CreateTriangleInformation</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_CreateTriangleInformation(model_t *model)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04072">model_shared.c:4072</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ac09a298601daeda3aa5d20b005b5ddcd"><div class="ttname"><a href="model__shared_8c.html#ac09a298601daeda3aa5d20b005b5ddcd">Mod_FreeQ3Shaders</a></div><div class="ttdeci">void Mod_FreeQ3Shaders(void)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01403">model_shared.c:1403</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ac1055bb841510ad036df4adce4146d85"><div class="ttname"><a href="model__shared_8c.html#ac1055bb841510ad036df4adce4146d85">Mod_ValidateElements</a></div><div class="ttdeci">qbool Mod_ValidateElements(int *element3i, unsigned short *element3s, int numtriangles, int firstvertex, int numvertices, const char *filename, int fileline)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00738">model_shared.c:738</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ac27e894daff472cded24c78edbbfcc1a"><div class="ttname"><a href="model__shared_8c.html#ac27e894daff472cded24c78edbbfcc1a">Mod_ShadowMesh_Alloc</a></div><div class="ttdeci">shadowmesh_t * Mod_ShadowMesh_Alloc(mempool_t *mempool, int maxverts, int maxtriangles)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01000">model_shared.c:1000</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ac8a3648cf663195b29236e4c9034e57d"><div class="ttname"><a href="model__shared_8c.html#ac8a3648cf663195b29236e4c9034e57d">Mod_LoadModel</a></div><div class="ttdeci">model_t * Mod_LoadModel(model_t *mod, qbool crash, qbool checkdisk)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00406">model_shared.c:406</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ac96210d7c13570c3a28f49b00874fafe"><div class="ttname"><a href="model__shared_8c.html#ac96210d7c13570c3a28f49b00874fafe">Mod_LoadCustomMaterial</a></div><div class="ttdeci">void Mod_LoadCustomMaterial(mempool_t *mempool, texture_t *texture, const char *name, int supercontents, int materialflags, skinframe_t *skinframe)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02653">model_shared.c:2653</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ac983b35605fe044369c676ce33b58061"><div class="ttname"><a href="model__shared_8c.html#ac983b35605fe044369c676ce33b58061">r_shadow_lightattenuationlinearscale</a></div><div class="ttdeci">cvar_t r_shadow_lightattenuationlinearscale</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00154">r_shadow.c:154</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_acda3baede969704dd1c551d24033c6aa"><div class="ttname"><a href="model__shared_8c.html#acda3baede969704dd1c551d24033c6aa">r_mipskins</a></div><div class="ttdeci">cvar_t r_mipskins</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00030">model_shared.c:30</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ad231ab1e0d7281ff9fd3bcc6ab0ad615"><div class="ttname"><a href="model__shared_8c.html#ad231ab1e0d7281ff9fd3bcc6ab0ad615">mod_mempool</a></div><div class="ttdeci">static mempool_t * mod_mempool</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00067">model_shared.c:67</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ad3ef7e9c8dc2cb1a2156d13b08d5ecec"><div class="ttname"><a href="model__shared_8c.html#ad3ef7e9c8dc2cb1a2156d13b08d5ecec">Mod_RenderInit</a></div><div class="ttdeci">void Mod_RenderInit(void)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00206">model_shared.c:206</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ad45bc36f36df1333ab57922a9a684bd3"><div class="ttname"><a href="model__shared_8c.html#ad45bc36f36df1333ab57922a9a684bd3">Mod_FrameGroupify_ParseGroups</a></div><div class="ttdeci">static int Mod_FrameGroupify_ParseGroups(const char *buf, mod_framegroupify_parsegroups_t cb, void *pass)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00263">model_shared.c:263</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ad5783554605d236b56845ddb2ea0f9a7"><div class="ttname"><a href="model__shared_8c.html#ad5783554605d236b56845ddb2ea0f9a7">Mod_Mesh_Finalize</a></div><div class="ttdeci">void Mod_Mesh_Finalize(model_t *mod)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04775">model_shared.c:4775</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ad71d07321aafc07206c4853276ed4a69"><div class="ttname"><a href="model__shared_8c.html#ad71d07321aafc07206c4853276ed4a69">Mod_LoadQ3Shaders</a></div><div class="ttdeci">void Mod_LoadQ3Shaders(void)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01466">model_shared.c:1466</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ad795742131a032a7a1ee611990d79d59"><div class="ttname"><a href="model__shared_8c.html#ad795742131a032a7a1ee611990d79d59">mod_generatelightmaps_lightmapsamples</a></div><div class="ttdeci">cvar_t mod_generatelightmaps_lightmapsamples</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00035">model_shared.c:35</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ada697218229cff80abd6e85190e8f432"><div class="ttname"><a href="model__shared_8c.html#ada697218229cff80abd6e85190e8f432">Mod_UnloadCustomMaterial</a></div><div class="ttdeci">void Mod_UnloadCustomMaterial(texture_t *texture, qbool purgeskins)</div><div class="ttdoc">Removes all shaderpasses from material, and optionally deletes the textures in the skinframes.</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02685">model_shared.c:2685</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_adb53fe2737004dc5876f8b107e080e6f"><div class="ttname"><a href="model__shared_8c.html#adb53fe2737004dc5876f8b107e080e6f">Mod_GenerateLightmaps_DestroyLightmaps</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_DestroyLightmaps(model_t *model)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03940">model_shared.c:3940</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_adc6c7c0b1a133fe0a99639e2b585011a"><div class="ttname"><a href="model__shared_8c.html#adc6c7c0b1a133fe0a99639e2b585011a">Mod_ShadowMesh_Begin</a></div><div class="ttdeci">shadowmesh_t * Mod_ShadowMesh_Begin(mempool_t *mempool, int maxverts, int maxtriangles)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01063">model_shared.c:1063</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ade8f4cc9f6f9afa412747c5cd79b1a98"><div class="ttname"><a href="model__shared_8c.html#ade8f4cc9f6f9afa412747c5cd79b1a98">Mod_GenerateLightmaps_DestroyTriangleInformation</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_DestroyTriangleInformation(model_t *model)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04114">model_shared.c:4114</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ae0d9355deaba10dacf0ea5bd325c221d"><div class="ttname"><a href="model__shared_8c.html#ae0d9355deaba10dacf0ea5bd325c221d">mod_generatelightmaps_unitspersample</a></div><div class="ttdeci">cvar_t mod_generatelightmaps_unitspersample</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00032">model_shared.c:32</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ae43c18a3823bc981f25fc8a476b32058"><div class="ttname"><a href="model__shared_8c.html#ae43c18a3823bc981f25fc8a476b32058">Mod_Mesh_MakeSortedSurfaces</a></div><div class="ttdeci">static void Mod_Mesh_MakeSortedSurfaces(model_t *mod)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04652">model_shared.c:4652</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ae5436bc8b30b0c8b8ceeed4718fd9c67"><div class="ttname"><a href="model__shared_8c.html#ae5436bc8b30b0c8b8ceeed4718fd9c67">Mod_GenerateLightmaps_UpdateVertexColors</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_UpdateVertexColors(model_t *model)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04377">model_shared.c:4377</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aeb0c26221a3458c9cb25fa8ead17e46e"><div class="ttname"><a href="model__shared_8c.html#aeb0c26221a3458c9cb25fa8ead17e46e">Mod_GenerateLightmaps_SamplePoint_SVBSP</a></div><div class="ttdeci">static qbool Mod_GenerateLightmaps_SamplePoint_SVBSP(const svbsp_t *svbsp, const float *pos)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03769">model_shared.c:3769</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aeb614d0bc052d5ba27bcc0d2c7135a61"><div class="ttname"><a href="model__shared_8c.html#aeb614d0bc052d5ba27bcc0d2c7135a61">Mod_GenerateLightmaps_UpdateLightGrid</a></div><div class="ttdeci">static void Mod_GenerateLightmaps_UpdateLightGrid(model_t *model)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04384">model_shared.c:4384</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aee760e8b76be876398bee57d6b973c12"><div class="ttname"><a href="model__shared_8c.html#aee760e8b76be876398bee57d6b973c12">Mod_Precache_f</a></div><div class="ttdeci">static void Mod_Precache_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00716">model_shared.c:716</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_aee888bb8fc89649575a997f25dfb003c"><div class="ttname"><a href="model__shared_8c.html#aee888bb8fc89649575a997f25dfb003c">Mod_VertexRangeFromElements</a></div><div class="ttdeci">void Mod_VertexRangeFromElements(int numelements, const int *elements, int *firstvertexpointer, int *lastvertexpointer)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02865">model_shared.c:2865</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_af1ea3bed58541715eebdc351ea1b9292"><div class="ttname"><a href="model__shared_8c.html#af1ea3bed58541715eebdc351ea1b9292">Mod_FrameGroupify</a></div><div class="ttdeci">static void Mod_FrameGroupify(model_t *mod, const char *buf)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00351">model_shared.c:351</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_af364d22ecd6a1f2df7b8774dc9184252"><div class="ttname"><a href="model__shared_8c.html#af364d22ecd6a1f2df7b8774dc9184252">lmaxis</a></div><div class="ttdeci">float lmaxis[3][3]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l04121">model_shared.c:4121</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_af3851988b4d818fb8d0aa645acb98d93"><div class="ttname"><a href="model__shared_8c.html#af3851988b4d818fb8d0aa645acb98d93">Mod_Decompile_SMD</a></div><div class="ttdeci">static void Mod_Decompile_SMD(model_t *model, const char *filename, int firstpose, int numposes, qbool writetriangles)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03154">model_shared.c:3154</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_af5bb8e6dccd0096a95cca1db54d8cdc7"><div class="ttname"><a href="model__shared_8c.html#af5bb8e6dccd0096a95cca1db54d8cdc7">Mod_SetDrawSkyAndWater</a></div><div class="ttdeci">void Mod_SetDrawSkyAndWater(model_t *mod)</div><div class="ttdoc">Sets the mod-&gt;DrawSky and mod-&gt;DrawAddWaterPlanes pointers conditionally based on whether surfaces in...</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02887">model_shared.c:2887</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_af5ee5fa8fce22ef53c6475c9ab3c5d04"><div class="ttname"><a href="model__shared_8c.html#af5ee5fa8fce22ef53c6475c9ab3c5d04">Mod_Decompile_OBJ</a></div><div class="ttdeci">static void Mod_Decompile_OBJ(model_t *model, const char *filename, const char *mtlfilename, const char *originalfilename)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03033">model_shared.c:3033</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_af79386e486e807d61ba39e57380fe868"><div class="ttname"><a href="model__shared_8c.html#af79386e486e807d61ba39e57380fe868">mod_framegroupify_parsegroups_t</a></div><div class="ttdeci">void(* mod_framegroupify_parsegroups_t)(unsigned int i, int start, int len, float fps, qbool loop, const char *name, void *pass)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00261">model_shared.c:261</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_af88e07f57fba40d3a55cb9f8b40ba9c2"><div class="ttname"><a href="model__shared_8c.html#af88e07f57fba40d3a55cb9f8b40ba9c2">mod_generatelightmaps_vertexradius</a></div><div class="ttdeci">cvar_t mod_generatelightmaps_vertexradius</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00039">model_shared.c:39</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_af9b95e6ed1ab3283c17917424413e16a"><div class="ttname"><a href="model__shared_8c.html#af9b95e6ed1ab3283c17917424413e16a">Mod_Init</a></div><div class="ttdeci">void Mod_Init(void)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00178">model_shared.c:178</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_afb66a8936f34a990e2385c092115ef3c"><div class="ttname"><a href="model__shared_8c.html#afb66a8936f34a990e2385c092115ef3c">mod_obj_orientation</a></div><div class="ttdeci">cvar_t mod_obj_orientation</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l00069">model_brush.c:69</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_afce66a9fd24e9b70739e12074b32c9c8"><div class="ttname"><a href="model__shared_8c.html#afce66a9fd24e9b70739e12074b32c9c8">mod_generatelightmaps_gridradius</a></div><div class="ttdeci">cvar_t mod_generatelightmaps_gridradius</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00040">model_shared.c:40</a></div></div>
<div class="ttc" id="amodel__shared_8h_html_a3624b5964b00fe674ac3f4edb9798f9f"><div class="ttname"><a href="model__shared_8h.html#a3624b5964b00fe674ac3f4edb9798f9f">SHADOWMESHVERTEXHASH</a></div><div class="ttdeci">#define SHADOWMESHVERTEXHASH</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00152">model_shared.h:152</a></div></div>
<div class="ttc" id="amodel__shared_8h_html_a56da538dec485ebc98d5ebf90fc80646"><div class="ttname"><a href="model__shared_8h.html#a56da538dec485ebc98d5ebf90fc80646">Mod_IDSP_Load</a></div><div class="ttdeci">void Mod_IDSP_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__sprite_8c_source.html#l00266">model_sprite.c:266</a></div></div>
<div class="ttc" id="amodel__shared_8h_html_a59ed29c41f877614448b0a651c2f2597"><div class="ttname"><a href="model__shared_8h.html#a59ed29c41f877614448b0a651c2f2597">Mod_SpriteInit</a></div><div class="ttdeci">void Mod_SpriteInit(void)</div><div class="ttdef"><b>Definition</b> <a href="model__sprite_8c_source.html#l00045">model_sprite.c:45</a></div></div>
<div class="ttc" id="amodel__shared_8h_html_ae8881adaf7dff7ff012ef751075434f4a5399b3f76f42a4a0855f65069c711abc"><div class="ttname"><a href="model__shared_8h.html#ae8881adaf7dff7ff012ef751075434f4a5399b3f76f42a4a0855f65069c711abc">mod_null</a></div><div class="ttdeci">@ mod_null</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00043">model_shared.h:43</a></div></div>
<div class="ttc" id="amodel__shared_8h_html_af3d1870b405c945508ec03aa53209b0f"><div class="ttname"><a href="model__shared_8h.html#af3d1870b405c945508ec03aa53209b0f">Mod_IDS2_Load</a></div><div class="ttdeci">void Mod_IDS2_Load(model_t *mod, void *buffer, void *bufferend)</div><div class="ttdef"><b>Definition</b> <a href="model__sprite_8c_source.html#l00382">model_sprite.c:382</a></div></div>
<div class="ttc" id="apolygon_8h_html"><div class="ttname"><a href="polygon_8h.html">polygon.h</a></div></div>
<div class="ttc" id="aprvm__execprogram_8h_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition</b> <a href="prvm__execprogram_8h_source.html#l00002">prvm_execprogram.h:2</a></div></div>
<div class="ttc" id="aqdefs_8h_html_abd4ae30fcfdcbbff51bbf3f4e6daeee7"><div class="ttname"><a href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a></div><div class="ttdeci">#define MAX_QPATH</div><div class="ttdoc">max length of a quake game pathname</div><div class="ttdef"><b>Definition</b> <a href="qdefs_8h_source.html#l00169">qdefs.h:169</a></div></div>
<div class="ttc" id="aqtypes_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00012">qtypes.h:12</a></div></div>
<div class="ttc" id="aqtypes_8h_html_a34b8d82aced6931bd3a572041e59aa7d"><div class="ttname"><a href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a></div><div class="ttdeci">float vec_t</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00064">qtypes.h:64</a></div></div>
<div class="ttc" id="aqtypes_8h_html_a5fab60d2366b4888d93d5814eb04c9e9"><div class="ttname"><a href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a></div><div class="ttdeci">vec_t vec3_t[3]</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00067">qtypes.h:67</a></div></div>
<div class="ttc" id="aqtypes_8h_html_aa250998bce2dc350e4f644297bb579c3"><div class="ttname"><a href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a></div><div class="ttdeci">bool qbool</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00009">qtypes.h:9</a></div></div>
<div class="ttc" id="aqtypes_8h_html_ac71b1e54b98dc1031873048bc61d0438"><div class="ttname"><a href="qtypes_8h.html#ac71b1e54b98dc1031873048bc61d0438">YAW</a></div><div class="ttdeci">#define YAW</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00019">qtypes.h:19</a></div></div>
<div class="ttc" id="aqtypes_8h_html_acd633835a520a62245ec6cfeb6d00e97"><div class="ttname"><a href="qtypes_8h.html#acd633835a520a62245ec6cfeb6d00e97">PITCH</a></div><div class="ttdeci">#define PITCH</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00016">qtypes.h:16</a></div></div>
<div class="ttc" id="aqtypes_8h_html_af902416f65138704a180dbae2dc9d8f2"><div class="ttname"><a href="qtypes_8h.html#af902416f65138704a180dbae2dc9d8f2">ROLL</a></div><div class="ttdeci">#define ROLL</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00022">qtypes.h:22</a></div></div>
<div class="ttc" id="aquakedef_8h_html"><div class="ttname"><a href="quakedef_8h.html">quakedef.h</a></div></div>
<div class="ttc" id="ar__modules_8c_html_a7f982eee49a26b26f015596ac96edea0"><div class="ttname"><a href="r__modules_8c.html#a7f982eee49a26b26f015596ac96edea0">R_RegisterModule</a></div><div class="ttdeci">void R_RegisterModule(const char *name, void(*start)(void), void(*shutdown)(void), void(*newmap)(void), void(*devicelost)(void), void(*devicerestored)(void))</div><div class="ttdef"><b>Definition</b> <a href="r__modules_8c_source.html#l00025">r_modules.c:25</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a1d180d32a8eccb3683fb3d371763631c"><div class="ttname"><a href="r__qshader_8h.html#a1d180d32a8eccb3683fb3d371763631c">Q3TEXTUREFLAG_WATERSHADER</a></div><div class="ttdeci">#define Q3TEXTUREFLAG_WATERSHADER</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00013">r_qshader.h:13</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a1e478e45b5d5c8a7d029358a80ba6232"><div class="ttname"><a href="r__qshader_8h.html#a1e478e45b5d5c8a7d029358a80ba6232">Q3PATHLENGTH</a></div><div class="ttdeci">#define Q3PATHLENGTH</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00017">r_qshader.h:17</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a26452611d6f59387ae63daa57b8ed46c"><div class="ttname"><a href="r__qshader_8h.html#a26452611d6f59387ae63daa57b8ed46c">Q3TCMOD_MAXPARMS</a></div><div class="ttdeci">#define Q3TCMOD_MAXPARMS</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00025">r_qshader.h:25</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a29443bdda5bda7d8d4285f12a0e9190d"><div class="ttname"><a href="r__qshader_8h.html#a29443bdda5bda7d8d4285f12a0e9190d">Q3TEXTUREFLAG_NOPICMIP</a></div><div class="ttdeci">#define Q3TEXTUREFLAG_NOPICMIP</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00009">r_qshader.h:9</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a2e096f293c68b3ede9e0f08eca4a5aba"><div class="ttname"><a href="r__qshader_8h.html#a2e096f293c68b3ede9e0f08eca4a5aba">TEXTURE_MAXFRAMES</a></div><div class="ttdeci">#define TEXTURE_MAXFRAMES</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00018">r_qshader.h:18</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a2e0c69195e0662ea4d3ea889b934f7db"><div class="ttname"><a href="r__qshader_8h.html#a2e0c69195e0662ea4d3ea889b934f7db">Q3WAVEPARMS</a></div><div class="ttdeci">#define Q3WAVEPARMS</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00019">r_qshader.h:19</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a3a80be4ea8ab89ee174f4122a7f32bc5"><div class="ttname"><a href="r__qshader_8h.html#a3a80be4ea8ab89ee174f4122a7f32bc5">Q3ALPHAGEN_MAXPARMS</a></div><div class="ttdeci">#define Q3ALPHAGEN_MAXPARMS</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00023">r_qshader.h:23</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a436104f4f242119bf3f431500edf02e6"><div class="ttname"><a href="r__qshader_8h.html#a436104f4f242119bf3f431500edf02e6">Q3MAXTCMODS</a></div><div class="ttdeci">#define Q3MAXTCMODS</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00026">r_qshader.h:26</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a46c099e9db2adbf9f39f399a83948c1d"><div class="ttname"><a href="r__qshader_8h.html#a46c099e9db2adbf9f39f399a83948c1d">Q3MAXDEFORMS</a></div><div class="ttdeci">#define Q3MAXDEFORMS</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00027">r_qshader.h:27</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a4983e14714c6f99240cf7521ddb94549"><div class="ttname"><a href="r__qshader_8h.html#a4983e14714c6f99240cf7521ddb94549">Q3RGBGEN_MAXPARMS</a></div><div class="ttdeci">#define Q3RGBGEN_MAXPARMS</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00022">r_qshader.h:22</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a587fdd671cf5a7380c3c9c37037284b8a1cdf35083cb0fab3bcda2afb32fcef62"><div class="ttname"><a href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a1cdf35083cb0fab3bcda2afb32fcef62">Q3RGBGEN_VERTEX</a></div><div class="ttdeci">@ Q3RGBGEN_VERTEX</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00077">r_qshader.h:77</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a587fdd671cf5a7380c3c9c37037284b8a2065a65ea0867a11ec5500650ecf62f3"><div class="ttname"><a href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a2065a65ea0867a11ec5500650ecf62f3">Q3RGBGEN_LIGHTINGDIFFUSE</a></div><div class="ttdeci">@ Q3RGBGEN_LIGHTINGDIFFUSE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00074">r_qshader.h:74</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a587fdd671cf5a7380c3c9c37037284b8a31b6d46289ceb50b26dce8b3652082f1"><div class="ttname"><a href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a31b6d46289ceb50b26dce8b3652082f1">Q3RGBGEN_CONST</a></div><div class="ttdeci">@ Q3RGBGEN_CONST</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00070">r_qshader.h:70</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a587fdd671cf5a7380c3c9c37037284b8a485c2a18cb8aefa49cbb470ac0184837"><div class="ttname"><a href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a485c2a18cb8aefa49cbb470ac0184837">Q3RGBGEN_WAVE</a></div><div class="ttdeci">@ Q3RGBGEN_WAVE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00078">r_qshader.h:78</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a587fdd671cf5a7380c3c9c37037284b8a615fe6b32d13e15ad09002f23bfa2758"><div class="ttname"><a href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a615fe6b32d13e15ad09002f23bfa2758">Q3RGBGEN_IDENTITYLIGHTING</a></div><div class="ttdeci">@ Q3RGBGEN_IDENTITYLIGHTING</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00073">r_qshader.h:73</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a587fdd671cf5a7380c3c9c37037284b8a72736d6839203b048caf9d5574bf67d3"><div class="ttname"><a href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a72736d6839203b048caf9d5574bf67d3">Q3RGBGEN_ONEMINUSENTITY</a></div><div class="ttdeci">@ Q3RGBGEN_ONEMINUSENTITY</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00075">r_qshader.h:75</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a587fdd671cf5a7380c3c9c37037284b8a96b64b3760bf2da76ccfffbcef6cba3f"><div class="ttname"><a href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8a96b64b3760bf2da76ccfffbcef6cba3f">Q3RGBGEN_IDENTITY</a></div><div class="ttdeci">@ Q3RGBGEN_IDENTITY</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00069">r_qshader.h:69</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a587fdd671cf5a7380c3c9c37037284b8aabe865b82975d2ffed672141e1da1591"><div class="ttname"><a href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8aabe865b82975d2ffed672141e1da1591">Q3RGBGEN_ONEMINUSVERTEX</a></div><div class="ttdeci">@ Q3RGBGEN_ONEMINUSVERTEX</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00076">r_qshader.h:76</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a587fdd671cf5a7380c3c9c37037284b8ab8b2c2afebafb17837a46e25d05d14c1"><div class="ttname"><a href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8ab8b2c2afebafb17837a46e25d05d14c1">Q3RGBGEN_ENTITY</a></div><div class="ttdeci">@ Q3RGBGEN_ENTITY</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00071">r_qshader.h:71</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a587fdd671cf5a7380c3c9c37037284b8ace1cfdf2b63704ee8c6ff92762a09a16"><div class="ttname"><a href="r__qshader_8h.html#a587fdd671cf5a7380c3c9c37037284b8ace1cfdf2b63704ee8c6ff92762a09a16">Q3RGBGEN_EXACTVERTEX</a></div><div class="ttdeci">@ Q3RGBGEN_EXACTVERTEX</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00072">r_qshader.h:72</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a64fb66587665cee06d5050eb05dded14"><div class="ttname"><a href="r__qshader_8h.html#a64fb66587665cee06d5050eb05dded14">Q3TEXTUREFLAG_POLYGONOFFSET</a></div><div class="ttdeci">#define Q3TEXTUREFLAG_POLYGONOFFSET</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00010">r_qshader.h:10</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaa06c19a7ea7e34a172923d26fec3fcbb6"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa06c19a7ea7e34a172923d26fec3fcbb6">Q3DEFORM_NORMAL</a></div><div class="ttdeci">@ Q3DEFORM_NORMAL</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00061">r_qshader.h:61</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaa070a67c4a255e10360c9215de83d5c31"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa070a67c4a255e10360c9215de83d5c31">Q3DEFORM_TEXT3</a></div><div class="ttdeci">@ Q3DEFORM_TEXT3</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00054">r_qshader.h:54</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaa093937abf493e04ac7f994ba630b1c7e"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa093937abf493e04ac7f994ba630b1c7e">Q3DEFORM_TEXT5</a></div><div class="ttdeci">@ Q3DEFORM_TEXT5</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00056">r_qshader.h:56</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaa2bdba5189d60309ef5711fb2d2d28954"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa2bdba5189d60309ef5711fb2d2d28954">Q3DEFORM_TEXT0</a></div><div class="ttdeci">@ Q3DEFORM_TEXT0</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00051">r_qshader.h:51</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaa2c88373243199cdc8ab4a67be0e9d96e"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa2c88373243199cdc8ab4a67be0e9d96e">Q3DEFORM_AUTOSPRITE</a></div><div class="ttdeci">@ Q3DEFORM_AUTOSPRITE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00049">r_qshader.h:49</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaa62f5f106b37fe21bb1dc5529a3f1e040"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa62f5f106b37fe21bb1dc5529a3f1e040">Q3DEFORM_PROJECTIONSHADOW</a></div><div class="ttdeci">@ Q3DEFORM_PROJECTIONSHADOW</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00048">r_qshader.h:48</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaa7acbf0f6ce98606ca26382c9ea6f83e9"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa7acbf0f6ce98606ca26382c9ea6f83e9">Q3DEFORM_WAVE</a></div><div class="ttdeci">@ Q3DEFORM_WAVE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00060">r_qshader.h:60</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaa916129ca97eb3382d67cfe1cc4e6fc58"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaa916129ca97eb3382d67cfe1cc4e6fc58">Q3DEFORM_TEXT1</a></div><div class="ttdeci">@ Q3DEFORM_TEXT1</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00052">r_qshader.h:52</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaaa3ab18465f550ac06fd8ad81ad4987d7"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaaa3ab18465f550ac06fd8ad81ad4987d7">Q3DEFORM_TEXT2</a></div><div class="ttdeci">@ Q3DEFORM_TEXT2</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00053">r_qshader.h:53</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaab1a1c15957e617b5a85acaa18e1e1c18"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaab1a1c15957e617b5a85acaa18e1e1c18">Q3DEFORM_NONE</a></div><div class="ttdeci">@ Q3DEFORM_NONE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00047">r_qshader.h:47</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaab324af88232cbf8fdb82213814ac4876"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaab324af88232cbf8fdb82213814ac4876">Q3DEFORM_AUTOSPRITE2</a></div><div class="ttdeci">@ Q3DEFORM_AUTOSPRITE2</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00050">r_qshader.h:50</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaacb05f924935dded1faf5d540c082da72"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaacb05f924935dded1faf5d540c082da72">Q3DEFORM_TEXT7</a></div><div class="ttdeci">@ Q3DEFORM_TEXT7</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00058">r_qshader.h:58</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaacbe83f5028a290a5196514fd8fcbef0b"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaacbe83f5028a290a5196514fd8fcbef0b">Q3DEFORM_MOVE</a></div><div class="ttdeci">@ Q3DEFORM_MOVE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00062">r_qshader.h:62</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaacdce855a8b0e67923b7db2114d42c725"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaacdce855a8b0e67923b7db2114d42c725">Q3DEFORM_TEXT6</a></div><div class="ttdeci">@ Q3DEFORM_TEXT6</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00057">r_qshader.h:57</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaadc6dc01b28815a22e1e1f9308806774e"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaadc6dc01b28815a22e1e1f9308806774e">Q3DEFORM_TEXT4</a></div><div class="ttdeci">@ Q3DEFORM_TEXT4</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00055">r_qshader.h:55</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a6e300dfc56c2edd2d88d78b4469bbdbaafebac5d634f004a15974e858b4d9a966"><div class="ttname"><a href="r__qshader_8h.html#a6e300dfc56c2edd2d88d78b4469bbdbaafebac5d634f004a15974e858b4d9a966">Q3DEFORM_BULGE</a></div><div class="ttdeci">@ Q3DEFORM_BULGE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00059">r_qshader.h:59</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a722bc59e32d2f51daac962c7d0af6647"><div class="ttname"><a href="r__qshader_8h.html#a722bc59e32d2f51daac962c7d0af6647">Q3SHADER_MAXLAYERS</a></div><div class="ttdeci">#define Q3SHADER_MAXLAYERS</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00021">r_qshader.h:21</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a72d5e32663fb1b0c369079ca0be01f37a2a635f265dd33d939e6dcd1482147080"><div class="ttname"><a href="r__qshader_8h.html#a72d5e32663fb1b0c369079ca0be01f37a2a635f265dd33d939e6dcd1482147080">TRANSPARENTSORT_DISTANCE</a></div><div class="ttdeci">@ TRANSPARENTSORT_DISTANCE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00194">r_qshader.h:194</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a72d5e32663fb1b0c369079ca0be01f37a2d80e0abcbf1890ce85d73ea4f7ddcf2"><div class="ttname"><a href="r__qshader_8h.html#a72d5e32663fb1b0c369079ca0be01f37a2d80e0abcbf1890ce85d73ea4f7ddcf2">TRANSPARENTSORT_SKY</a></div><div class="ttdeci">@ TRANSPARENTSORT_SKY</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00193">r_qshader.h:193</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a72d5e32663fb1b0c369079ca0be01f37aaa180af81b763e152ba67c56889f431d"><div class="ttname"><a href="r__qshader_8h.html#a72d5e32663fb1b0c369079ca0be01f37aaa180af81b763e152ba67c56889f431d">TRANSPARENTSORT_HUD</a></div><div class="ttdeci">@ TRANSPARENTSORT_HUD</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00195">r_qshader.h:195</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a7510eb962f828232946132adebe62028"><div class="ttname"><a href="r__qshader_8h.html#a7510eb962f828232946132adebe62028">Q3WAVEFUNC_USER_SHIFT</a></div><div class="ttdeci">#define Q3WAVEFUNC_USER_SHIFT</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00043">r_qshader.h:43</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a75e939cae02088347e3d3c67b23e9da4"><div class="ttname"><a href="r__qshader_8h.html#a75e939cae02088347e3d3c67b23e9da4">Q3TEXTUREFLAG_TRANSPARENTSORT</a></div><div class="ttdeci">#define Q3TEXTUREFLAG_TRANSPARENTSORT</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00015">r_qshader.h:15</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a828dead9d209fc488f013da46f1f5ea4a2aad04036c0185ba499a8df3bbd41589"><div class="ttname"><a href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4a2aad04036c0185ba499a8df3bbd41589">Q3TCMOD_SCALE</a></div><div class="ttdeci">@ Q3TCMOD_SCALE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00114">r_qshader.h:114</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a828dead9d209fc488f013da46f1f5ea4a4bd0dda04a911b9e907c7a9c064e7d1a"><div class="ttname"><a href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4a4bd0dda04a911b9e907c7a9c064e7d1a">Q3TCMOD_ROTATE</a></div><div class="ttdeci">@ Q3TCMOD_ROTATE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00113">r_qshader.h:113</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a828dead9d209fc488f013da46f1f5ea4a74d014551b5fb979ae1828a4859eaa2a"><div class="ttname"><a href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4a74d014551b5fb979ae1828a4859eaa2a">Q3TCMOD_ENTITYTRANSLATE</a></div><div class="ttdeci">@ Q3TCMOD_ENTITYTRANSLATE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00112">r_qshader.h:112</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a828dead9d209fc488f013da46f1f5ea4a8b1dee1775d78f6d11a476919d480951"><div class="ttname"><a href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4a8b1dee1775d78f6d11a476919d480951">Q3TCMOD_TRANSFORM</a></div><div class="ttdeci">@ Q3TCMOD_TRANSFORM</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00117">r_qshader.h:117</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a828dead9d209fc488f013da46f1f5ea4abda63ee69b542e0a5a392d56f0118dcd"><div class="ttname"><a href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4abda63ee69b542e0a5a392d56f0118dcd">Q3TCMOD_SCROLL</a></div><div class="ttdeci">@ Q3TCMOD_SCROLL</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00115">r_qshader.h:115</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a828dead9d209fc488f013da46f1f5ea4ac4fe25b0efd1bd14f51db370acf8f39a"><div class="ttname"><a href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4ac4fe25b0efd1bd14f51db370acf8f39a">Q3TCMOD_PAGE</a></div><div class="ttdeci">@ Q3TCMOD_PAGE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00119">r_qshader.h:119</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a828dead9d209fc488f013da46f1f5ea4acec35df41b96fe5e2d5fdcbb9fe60169"><div class="ttname"><a href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4acec35df41b96fe5e2d5fdcbb9fe60169">Q3TCMOD_TURBULENT</a></div><div class="ttdeci">@ Q3TCMOD_TURBULENT</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00118">r_qshader.h:118</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a828dead9d209fc488f013da46f1f5ea4ad088a184ff36c830fd645124cda79fd6"><div class="ttname"><a href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4ad088a184ff36c830fd645124cda79fd6">Q3TCMOD_STRETCH</a></div><div class="ttdeci">@ Q3TCMOD_STRETCH</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00116">r_qshader.h:116</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a828dead9d209fc488f013da46f1f5ea4ad9636ae0779a1f213f5d4453782c6ff2"><div class="ttname"><a href="r__qshader_8h.html#a828dead9d209fc488f013da46f1f5ea4ad9636ae0779a1f213f5d4453782c6ff2">Q3TCMOD_NONE</a></div><div class="ttdeci">@ Q3TCMOD_NONE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00111">r_qshader.h:111</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a905d789c405c635371eae15d1b6ad8dca117ca548e7750c4ed09cad4ba3f68eca"><div class="ttname"><a href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dca117ca548e7750c4ed09cad4ba3f68eca">OFFSETMAPPING_DEFAULT</a></div><div class="ttdeci">@ OFFSETMAPPING_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00186">r_qshader.h:186</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a905d789c405c635371eae15d1b6ad8dca2dc4b4e5f2053e46de9d4f0f18d1bfa9"><div class="ttname"><a href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dca2dc4b4e5f2053e46de9d4f0f18d1bfa9">OFFSETMAPPING_OFF</a></div><div class="ttdeci">@ OFFSETMAPPING_OFF</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00185">r_qshader.h:185</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a905d789c405c635371eae15d1b6ad8dca5e05df46e76164fe4370a69aadcac3ef"><div class="ttname"><a href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dca5e05df46e76164fe4370a69aadcac3ef">OFFSETMAPPING_LINEAR</a></div><div class="ttdeci">@ OFFSETMAPPING_LINEAR</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00187">r_qshader.h:187</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a905d789c405c635371eae15d1b6ad8dcab2a2c2f1eebde925702bda187044d478"><div class="ttname"><a href="r__qshader_8h.html#a905d789c405c635371eae15d1b6ad8dcab2a2c2f1eebde925702bda187044d478">OFFSETMAPPING_RELIEF</a></div><div class="ttdeci">@ OFFSETMAPPING_RELIEF</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00189">r_qshader.h:188</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a9c334491e333d0667b0d7b9a1620fbaba88311f5efe7f1278b9249a2224267823"><div class="ttname"><a href="r__qshader_8h.html#a9c334491e333d0667b0d7b9a1620fbaba88311f5efe7f1278b9249a2224267823">Q3TCGEN_VECTOR</a></div><div class="ttdeci">@ Q3TCGEN_VECTOR</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00104">r_qshader.h:104</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a9c334491e333d0667b0d7b9a1620fbabac05a81197f54f77e3a6ad88280c0746f"><div class="ttname"><a href="r__qshader_8h.html#a9c334491e333d0667b0d7b9a1620fbabac05a81197f54f77e3a6ad88280c0746f">Q3TCGEN_ENVIRONMENT</a></div><div class="ttdeci">@ Q3TCGEN_ENVIRONMENT</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00102">r_qshader.h:102</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a9c334491e333d0667b0d7b9a1620fbabac530014d74401961953309d38699a346"><div class="ttname"><a href="r__qshader_8h.html#a9c334491e333d0667b0d7b9a1620fbabac530014d74401961953309d38699a346">Q3TCGEN_LIGHTMAP</a></div><div class="ttdeci">@ Q3TCGEN_LIGHTMAP</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00103">r_qshader.h:103</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a9c334491e333d0667b0d7b9a1620fbabaed717f6b2fa91547d92f9473af302f2b"><div class="ttname"><a href="r__qshader_8h.html#a9c334491e333d0667b0d7b9a1620fbabaed717f6b2fa91547d92f9473af302f2b">Q3TCGEN_TEXTURE</a></div><div class="ttdeci">@ Q3TCGEN_TEXTURE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00101">r_qshader.h:101</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_aa497c0830c68d685e067f0352685241a"><div class="ttname"><a href="r__qshader_8h.html#aa497c0830c68d685e067f0352685241a">Q3TEXTUREFLAG_CAMERA</a></div><div class="ttdeci">#define Q3TEXTUREFLAG_CAMERA</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00014">r_qshader.h:14</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_aa4a5ae1817ae6a524ced279fc9f535db"><div class="ttname"><a href="r__qshader_8h.html#aa4a5ae1817ae6a524ced279fc9f535db">Q3TCGEN_MAXPARMS</a></div><div class="ttdeci">#define Q3TCGEN_MAXPARMS</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00024">r_qshader.h:24</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_ab595b64e4da8f913256c1353431d89e7a1a8064ffa2973a0ecd4784e3159f6ceb"><div class="ttname"><a href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a1a8064ffa2973a0ecd4784e3159f6ceb">Q3ALPHAGEN_LIGHTINGSPECULAR</a></div><div class="ttdeci">@ Q3ALPHAGEN_LIGHTINGSPECULAR</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00088">r_qshader.h:88</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_ab595b64e4da8f913256c1353431d89e7a5efd66526c14b417576ddb0a5bc2fcac"><div class="ttname"><a href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a5efd66526c14b417576ddb0a5bc2fcac">Q3ALPHAGEN_ONEMINUSENTITY</a></div><div class="ttdeci">@ Q3ALPHAGEN_ONEMINUSENTITY</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00089">r_qshader.h:89</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_ab595b64e4da8f913256c1353431d89e7a5f2872650868507664bbd33db92f7671"><div class="ttname"><a href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a5f2872650868507664bbd33db92f7671">Q3ALPHAGEN_WAVE</a></div><div class="ttdeci">@ Q3ALPHAGEN_WAVE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00093">r_qshader.h:93</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_ab595b64e4da8f913256c1353431d89e7a84c0baa8342eb2b19d4c2ccc454eba80"><div class="ttname"><a href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a84c0baa8342eb2b19d4c2ccc454eba80">Q3ALPHAGEN_ONEMINUSVERTEX</a></div><div class="ttdeci">@ Q3ALPHAGEN_ONEMINUSVERTEX</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00090">r_qshader.h:90</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_ab595b64e4da8f913256c1353431d89e7a8ec118630e16364afa8808a4e52cebc8"><div class="ttname"><a href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a8ec118630e16364afa8808a4e52cebc8">Q3ALPHAGEN_IDENTITY</a></div><div class="ttdeci">@ Q3ALPHAGEN_IDENTITY</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00085">r_qshader.h:85</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_ab595b64e4da8f913256c1353431d89e7a9709d6c1c915d4758713f89aff18c971"><div class="ttname"><a href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a9709d6c1c915d4758713f89aff18c971">Q3ALPHAGEN_VERTEX</a></div><div class="ttdeci">@ Q3ALPHAGEN_VERTEX</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00092">r_qshader.h:92</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_ab595b64e4da8f913256c1353431d89e7a9859a10c69ff50cb42e7819c03d991a6"><div class="ttname"><a href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a9859a10c69ff50cb42e7819c03d991a6">Q3ALPHAGEN_PORTAL</a></div><div class="ttdeci">@ Q3ALPHAGEN_PORTAL</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00091">r_qshader.h:91</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_ab595b64e4da8f913256c1353431d89e7a9f5381db044d678d5a1820ded83880dc"><div class="ttname"><a href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7a9f5381db044d678d5a1820ded83880dc">Q3ALPHAGEN_CONST</a></div><div class="ttdeci">@ Q3ALPHAGEN_CONST</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00086">r_qshader.h:86</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_ab595b64e4da8f913256c1353431d89e7ab63f153c2910f5b5818baf2fd3101525"><div class="ttname"><a href="r__qshader_8h.html#ab595b64e4da8f913256c1353431d89e7ab63f153c2910f5b5818baf2fd3101525">Q3ALPHAGEN_ENTITY</a></div><div class="ttdeci">@ Q3ALPHAGEN_ENTITY</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00087">r_qshader.h:87</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_ac1257a53bf8a178379696e9410ff711e"><div class="ttname"><a href="r__qshader_8h.html#ac1257a53bf8a178379696e9410ff711e">Q3DEFORM_MAXPARMS</a></div><div class="ttdeci">#define Q3DEFORM_MAXPARMS</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00020">r_qshader.h:20</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_ad470dbac0d0cc4b2fafc958afccd94b3"><div class="ttname"><a href="r__qshader_8h.html#ad470dbac0d0cc4b2fafc958afccd94b3">Q3TEXTUREFLAG_REFLECTION</a></div><div class="ttdeci">#define Q3TEXTUREFLAG_REFLECTION</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00012">r_qshader.h:12</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_ae40c0ac17b601c44878988b8cf135bd6"><div class="ttname"><a href="r__qshader_8h.html#ae40c0ac17b601c44878988b8cf135bd6">Q3TEXTUREFLAG_TWOSIDED</a></div><div class="ttdeci">#define Q3TEXTUREFLAG_TWOSIDED</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00008">r_qshader.h:8</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_aeba24cf6d5383e0e1adc014690994c98"><div class="ttname"><a href="r__qshader_8h.html#aeba24cf6d5383e0e1adc014690994c98">Q3TEXTUREFLAG_REFRACTION</a></div><div class="ttdeci">#define Q3TEXTUREFLAG_REFRACTION</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00011">r_qshader.h:11</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_af2ec050136a7f0b4185fc7d26bd1127fa040a1c510a6c39ebb5f0ed5ebabca5cd"><div class="ttname"><a href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127fa040a1c510a6c39ebb5f0ed5ebabca5cd">Q3WAVEFUNC_INVERSESAWTOOTH</a></div><div class="ttdeci">@ Q3WAVEFUNC_INVERSESAWTOOTH</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00032">r_qshader.h:32</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_af2ec050136a7f0b4185fc7d26bd1127fa108f42845e100dc19351ee29a3591d64"><div class="ttname"><a href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127fa108f42845e100dc19351ee29a3591d64">Q3WAVEFUNC_SAWTOOTH</a></div><div class="ttdeci">@ Q3WAVEFUNC_SAWTOOTH</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00034">r_qshader.h:34</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_af2ec050136a7f0b4185fc7d26bd1127fa1aeb1e5b644f106530bbec41af99e300"><div class="ttname"><a href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127fa1aeb1e5b644f106530bbec41af99e300">Q3WAVEFUNC_TRIANGLE</a></div><div class="ttdeci">@ Q3WAVEFUNC_TRIANGLE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00037">r_qshader.h:37</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_af2ec050136a7f0b4185fc7d26bd1127fa1af27bb7e72f1ed958e1e82c04e0cc40"><div class="ttname"><a href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127fa1af27bb7e72f1ed958e1e82c04e0cc40">Q3WAVEFUNC_NOISE</a></div><div class="ttdeci">@ Q3WAVEFUNC_NOISE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00033">r_qshader.h:33</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_af2ec050136a7f0b4185fc7d26bd1127fa38c652184c322bd37a1970375b9feb25"><div class="ttname"><a href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127fa38c652184c322bd37a1970375b9feb25">Q3WAVEFUNC_NONE</a></div><div class="ttdeci">@ Q3WAVEFUNC_NONE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00031">r_qshader.h:31</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_af2ec050136a7f0b4185fc7d26bd1127fa643ddc1e82a20b467319e87125fc35fa"><div class="ttname"><a href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127fa643ddc1e82a20b467319e87125fc35fa">Q3WAVEFUNC_SIN</a></div><div class="ttdeci">@ Q3WAVEFUNC_SIN</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00035">r_qshader.h:35</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_af2ec050136a7f0b4185fc7d26bd1127faeb41a02d5e22d454381e8fd4f2797f14"><div class="ttname"><a href="r__qshader_8h.html#af2ec050136a7f0b4185fc7d26bd1127faeb41a02d5e22d454381e8fd4f2797f14">Q3WAVEFUNC_SQUARE</a></div><div class="ttdeci">@ Q3WAVEFUNC_SQUARE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00036">r_qshader.h:36</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a50c834f5bd9d9a7195c3c89d359c0f44"><div class="ttname"><a href="r__shadow_8c.html#a50c834f5bd9d9a7195c3c89d359c0f44">R_Shadow_GetRTLightInfo</a></div><div class="ttdeci">int R_Shadow_GetRTLightInfo(unsigned int lightindex, float *origin, float *radius, float *color)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04790">r_shadow.c:4790</a></div></div>
<div class="ttc" id="ar__shadow_8h_html"><div class="ttname"><a href="r__shadow_8h.html">r_shadow.h</a></div></div>
<div class="ttc" id="ar__textures_8h_html_a1e458ef28d5c5978bc1315f4a5b54aef"><div class="ttname"><a href="r__textures_8h.html#a1e458ef28d5c5978bc1315f4a5b54aef">TEXF_PICMIP</a></div><div class="ttdeci">#define TEXF_PICMIP</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00021">r_textures.h:21</a></div></div>
<div class="ttc" id="ar__textures_8h_html_a7e88b1d25d2969b53f6e967801f991ca"><div class="ttname"><a href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a></div><div class="ttdeci">#define TEXF_ALPHA</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00009">r_textures.h:9</a></div></div>
<div class="ttc" id="ar__textures_8h_html_a7ebf18782aefc1f1ff9fc5cb169e2dbb"><div class="ttname"><a href="r__textures_8h.html#a7ebf18782aefc1f1ff9fc5cb169e2dbb">TEXF_FORCELINEAR</a></div><div class="ttdeci">#define TEXF_FORCELINEAR</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00019">r_textures.h:19</a></div></div>
<div class="ttc" id="ar__textures_8h_html_a7ed15e202aa5ce1ef37ef412348a6468"><div class="ttname"><a href="r__textures_8h.html#a7ed15e202aa5ce1ef37ef412348a6468">TEXF_MIPMAP</a></div><div class="ttdeci">#define TEXF_MIPMAP</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00011">r_textures.h:11</a></div></div>
<div class="ttc" id="ar__textures_8h_html_a8367a0dbf5389896f956ab599fc394d8"><div class="ttname"><a href="r__textures_8h.html#a8367a0dbf5389896f956ab599fc394d8">TEXF_ISWORLD</a></div><div class="ttdeci">#define TEXF_ISWORLD</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00033">r_textures.h:33</a></div></div>
<div class="ttc" id="ar__textures_8h_html_a951133ab2f845125172cb91a802c4a58"><div class="ttname"><a href="r__textures_8h.html#a951133ab2f845125172cb91a802c4a58">TEXF_ISSPRITE</a></div><div class="ttdeci">#define TEXF_ISSPRITE</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00035">r_textures.h:35</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ab19c18de47f490e8f226052c34b577b8"><div class="ttname"><a href="r__textures_8h.html#ab19c18de47f490e8f226052c34b577b8">TEXF_COMPRESS</a></div><div class="ttdeci">#define TEXF_COMPRESS</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00023">r_textures.h:23</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ab388bb02f3e8f998bf84eba7404aec49ab887b36a912241930415c7f1db44d094"><div class="ttname"><a href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49ab887b36a912241930415c7f1db44d094">TEXTYPE_BGRA</a></div><div class="ttdeci">@ TEXTYPE_BGRA</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00053">r_textures.h:53</a></div></div>
<div class="ttc" id="ar__textures_8h_html_abe4e0ad1d375c912287a2f199bf6352a"><div class="ttname"><a href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a></div><div class="ttdeci">#define TEXF_CLAMP</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00015">r_textures.h:15</a></div></div>
<div class="ttc" id="arender_8h_html_a05925249af134e5ab3a654246dc30267a1208ab8e7e5a6b3389ad4203dbe747f1"><div class="ttname"><a href="render_8h.html#a05925249af134e5ab3a654246dc30267a1208ab8e7e5a6b3389ad4203dbe747f1">R_BUFFERDATA_VERTEX</a></div><div class="ttdeci">@ R_BUFFERDATA_VERTEX</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00530">render.h:530</a></div></div>
<div class="ttc" id="arender_8h_html_a05925249af134e5ab3a654246dc30267abb22b0361cb53a74370b7e4e37ba02ef"><div class="ttname"><a href="render_8h.html#a05925249af134e5ab3a654246dc30267abb22b0361cb53a74370b7e4e37ba02ef">R_BUFFERDATA_INDEX32</a></div><div class="ttdeci">@ R_BUFFERDATA_INDEX32</div><div class="ttdoc">index buffer - 16bit (because D3D cares)</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00532">render.h:532</a></div></div>
<div class="ttc" id="arender_8h_html_a05925249af134e5ab3a654246dc30267af062055968f7353a7dea8adb75394c9d"><div class="ttname"><a href="render_8h.html#a05925249af134e5ab3a654246dc30267af062055968f7353a7dea8adb75394c9d">R_BUFFERDATA_INDEX16</a></div><div class="ttdeci">@ R_BUFFERDATA_INDEX16</div><div class="ttdoc">vertex buffer</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00531">render.h:531</a></div></div>
<div class="ttc" id="aserver_8h_html_a0ff9eb096e93804922c75bbddaf18703"><div class="ttname"><a href="server_8h.html#a0ff9eb096e93804922c75bbddaf18703">sv</a></div><div class="ttdeci">server_t sv</div><div class="ttdoc">local server</div><div class="ttdef"><b>Definition</b> <a href="sv__main_8c_source.html#l00219">sv_main.c:219</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a008e65201d4481545ed89903a22f667a"><div class="ttname"><a href="shader__glsl_8h.html#a008e65201d4481545ed89903a22f667a">r</a></div><div class="ttdeci">dp_FragColor r</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00375">shader_glsl.h:375</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a0e89857f2d085f82245c0873f460679f"><div class="ttname"><a href="shader__glsl_8h.html#a0e89857f2d085f82245c0873f460679f">y1</a></div><div class="ttdeci">vec3 y1</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00331">shader_glsl.h:331</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a25f2e1fef7cecde0255a3dde64ab4979"><div class="ttname"><a href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a></div><div class="ttdeci">vec3 color</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00505">shader_glsl.h:505</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a2ab77c89eb79b49ccd22bb1b2ad48bf1"><div class="ttname"><a href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a></div><div class="ttdeci">precision highp float</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00045">shader_glsl.h:45</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a4ca269cf93df1b512b52174c1a256fe5"><div class="ttname"><a href="shader__glsl_8h.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a></div><div class="ttdeci">vec2 dir</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00281">shader_glsl.h:281</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a5ec19189388a37fcddc7258e29a40335"><div class="ttname"><a href="shader__glsl_8h.html#a5ec19189388a37fcddc7258e29a40335">g</a></div><div class="ttdeci">dp_FragColor g</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00385">shader_glsl.h:385</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a731feb93da8dc28ee53e37b43daabd06"><div class="ttname"><a href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a></div><div class="ttdeci">float f</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00586">shader_glsl.h:586</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a792764868a6181a44be59a390fced652"><div class="ttname"><a href="shader__glsl_8h.html#a792764868a6181a44be59a390fced652">y2</a></div><div class="ttdeci">vec3 y2</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00332">shader_glsl.h:332</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a7c522f1c5d1635549573e2118306b8a3"><div class="ttname"><a href="shader__glsl_8h.html#a7c522f1c5d1635549573e2118306b8a3">x2</a></div><div class="ttdeci">vec3 x2</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00326">shader_glsl.h:326</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a7f9900a7305f0a389e52eb9aef7b1f13"><div class="ttname"><a href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a></div><div class="ttdeci">vec3 normal</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00575">shader_glsl.h:575</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_ac369ee41cd9c6dc18e09c3293e27cf81"><div class="ttname"><a href="shader__glsl_8h.html#ac369ee41cd9c6dc18e09c3293e27cf81">b</a></div><div class="ttdeci">dp_FragColor b</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00386">shader_glsl.h:386</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_ac40f3d1971e671aab7a122eea181e978"><div class="ttname"><a href="shader__glsl_8h.html#ac40f3d1971e671aab7a122eea181e978">x1</a></div><div class="ttdeci">vec3 x1</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00325">shader_glsl.h:325</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_ad327dfb01ce8b2c115d25e7e670e3ed4"><div class="ttname"><a href="shader__glsl_8h.html#ad327dfb01ce8b2c115d25e7e670e3ed4">tc</a></div><div class="ttdeci">void vec2 tc</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00504">shader_glsl.h:504</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_ada7daae51ef1e670767c18b83ea78044"><div class="ttname"><a href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a></div><div class="ttdeci">ret a</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00296">shader_glsl.h:296</a></div></div>
<div class="ttc" id="asnd__mix_8c_html_a2dfe87f3417747242e8f043dd4f3fb59"><div class="ttname"><a href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a></div><div class="ttdeci">float intensity</div><div class="ttdef"><b>Definition</b> <a href="snd__mix_8c_source.html#l00326">snd_mix.c:326</a></div></div>
<div class="ttc" id="astructMod__MakeSortedSurfaces__qsortsurface__t_html"><div class="ttname"><a href="structMod__MakeSortedSurfaces__qsortsurface__t.html">Mod_MakeSortedSurfaces_qsortsurface_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02904">model_shared.c:2905</a></div></div>
<div class="ttc" id="astructMod__MakeSortedSurfaces__qsortsurface__t_html_a0e53da658f2d93e416335ae5fde33f3e"><div class="ttname"><a href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a0e53da658f2d93e416335ae5fde33f3e">Mod_MakeSortedSurfaces_qsortsurface_t::texture</a></div><div class="ttdeci">texture_t * texture</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02908">model_shared.c:2908</a></div></div>
<div class="ttc" id="astructMod__MakeSortedSurfaces__qsortsurface__t_html_a1de8518b8dfbcfee6807e8a45f8f5090"><div class="ttname"><a href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a1de8518b8dfbcfee6807e8a45f8f5090">Mod_MakeSortedSurfaces_qsortsurface_t::surfaceindex</a></div><div class="ttdeci">int surfaceindex</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02906">model_shared.c:2906</a></div></div>
<div class="ttc" id="astructMod__MakeSortedSurfaces__qsortsurface__t_html_a3048fe1e8952fd8664c132e4d834bb59"><div class="ttname"><a href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a3048fe1e8952fd8664c132e4d834bb59">Mod_MakeSortedSurfaces_qsortsurface_t::effect</a></div><div class="ttdeci">q3deffect_t * effect</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02907">model_shared.c:2907</a></div></div>
<div class="ttc" id="astructMod__MakeSortedSurfaces__qsortsurface__t_html_a342d8e9ebb3201d16a5aa5231bb8b2b6"><div class="ttname"><a href="structMod__MakeSortedSurfaces__qsortsurface__t.html#a342d8e9ebb3201d16a5aa5231bb8b2b6">Mod_MakeSortedSurfaces_qsortsurface_t::lightmaptexture</a></div><div class="ttdeci">rtexture_t * lightmaptexture</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l02909">model_shared.c:2909</a></div></div>
<div class="ttc" id="astructaliasbone__t_html_a12403a8e5c1471909f8d83f635027446"><div class="ttname"><a href="structaliasbone__t.html#a12403a8e5c1471909f8d83f635027446">aliasbone_t::parent</a></div><div class="ttdeci">int parent</div><div class="ttdef"><b>Definition</b> <a href="model__alias_8h_source.html#l00225">model_alias.h:225</a></div></div>
<div class="ttc" id="astructaliasbone__t_html_a49d64ce369a205eacdeb0ca0a8f2ac32"><div class="ttname"><a href="structaliasbone__t.html#a49d64ce369a205eacdeb0ca0a8f2ac32">aliasbone_t::name</a></div><div class="ttdeci">char name[MD3NAME]</div><div class="ttdef"><b>Definition</b> <a href="model__alias_8h_source.html#l00223">model_alias.h:223</a></div></div>
<div class="ttc" id="astructanimscene__t_html"><div class="ttname"><a href="structanimscene__t.html">animscene_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00045">model_shared.h:46</a></div></div>
<div class="ttc" id="astructanimscene__t_html_a2717e3be79ce23fe8e47c87a5c934b12"><div class="ttname"><a href="structanimscene__t.html#a2717e3be79ce23fe8e47c87a5c934b12">animscene_t::loop</a></div><div class="ttdeci">int loop</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00050">model_shared.h:50</a></div></div>
<div class="ttc" id="astructanimscene__t_html_a5109a00e75f6ee7eadfc299645d11259"><div class="ttname"><a href="structanimscene__t.html#a5109a00e75f6ee7eadfc299645d11259">animscene_t::name</a></div><div class="ttdeci">char name[32]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00047">model_shared.h:47</a></div></div>
<div class="ttc" id="astructanimscene__t_html_a5b15507359a161969d769cd85193561e"><div class="ttname"><a href="structanimscene__t.html#a5b15507359a161969d769cd85193561e">animscene_t::framecount</a></div><div class="ttdeci">int framecount</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00049">model_shared.h:49</a></div></div>
<div class="ttc" id="astructanimscene__t_html_aab78607e4169ebda0f6abac8cc328fee"><div class="ttname"><a href="structanimscene__t.html#aab78607e4169ebda0f6abac8cc328fee">animscene_t::firstframe</a></div><div class="ttdeci">int firstframe</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00048">model_shared.h:48</a></div></div>
<div class="ttc" id="astructanimscene__t_html_ac67d73868af90a4796ff3d37519a80cf"><div class="ttname"><a href="structanimscene__t.html#ac67d73868af90a4796ff3d37519a80cf">animscene_t::framerate</a></div><div class="ttdeci">float framerate</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00051">model_shared.h:51</a></div></div>
<div class="ttc" id="astructblendweights__t_html"><div class="ttname"><a href="structblendweights__t.html">blendweights_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00064">model_shared.h:65</a></div></div>
<div class="ttc" id="astructclient__state__t_html_a8ab19b0b9d4e96dc0220d846226e4283"><div class="ttname"><a href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">client_state_t::worldmodel</a></div><div class="ttdeci">struct model_s * worldmodel</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00935">client.h:935</a></div></div>
<div class="ttc" id="astructclient__state__t_html_ab718ddda1887c1678878405c006ce501"><div class="ttname"><a href="structclient__state__t.html#ab718ddda1887c1678878405c006ce501">client_state_t::model_name</a></div><div class="ttdeci">char model_name[MAX_MODELS][MAX_QPATH]</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00893">client.h:893</a></div></div>
<div class="ttc" id="astructclient__static__t_html_a6722e47d64e69141af5cdf392fcf95eb"><div class="ttname"><a href="structclient__static__t.html#a6722e47d64e69141af5cdf392fcf95eb">client_static_t::state</a></div><div class="ttdeci">cactive_t state</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00569">client.h:569</a></div></div>
<div class="ttc" id="astructcmd__state__t_html"><div class="ttname"><a href="structcmd__state__t.html">cmd_state_t</a></div><div class="ttdoc">command interpreter state - the tokenizing and execution of commands, as well as pointers to which cv...</div><div class="ttdef"><b>Definition</b> <a href="cmd_8h_source.html#l00126">cmd.h:127</a></div></div>
<div class="ttc" id="astructcvar__t_html"><div class="ttname"><a href="structcvar__t.html">cvar_t</a></div><div class="ttdef"><b>Definition</b> <a href="cvar_8h_source.html#l00065">cvar.h:66</a></div></div>
<div class="ttc" id="astructcvar__t_html_a305faa0167494135297f1b8e6216d469"><div class="ttname"><a href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">cvar_t::value</a></div><div class="ttdeci">float value</div><div class="ttdef"><b>Definition</b> <a href="cvar_8h_source.html#l00074">cvar.h:74</a></div></div>
<div class="ttc" id="astructcvar__t_html_a376ca13f147f306d71edbe7670e138b0"><div class="ttname"><a href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">cvar_t::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition</b> <a href="cvar_8h_source.html#l00073">cvar.h:73</a></div></div>
<div class="ttc" id="astructentity__render__t_html"><div class="ttname"><a href="structentity__render__t.html">entity_render_t</a></div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00326">client.h:327</a></div></div>
<div class="ttc" id="astructfssearch__t_html"><div class="ttname"><a href="structfssearch__t.html">fssearch_t</a></div><div class="ttdef"><b>Definition</b> <a href="fs_8h_source.html#l00108">fs.h:109</a></div></div>
<div class="ttc" id="astructlightmaplight__t_html"><div class="ttname"><a href="structlightmaplight__t.html">lightmaplight_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03559">model_shared.c:3560</a></div></div>
<div class="ttc" id="astructlightmaplight__t_html_a07c5e7a84325514e06137bc6432b0efc"><div class="ttname"><a href="structlightmaplight__t.html#a07c5e7a84325514e06137bc6432b0efc">lightmaplight_t::svbsp</a></div><div class="ttdeci">svbsp_t svbsp</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03566">model_shared.c:3566</a></div></div>
<div class="ttc" id="astructlightmaplight__t_html_a1d5807752ece66bf3167dbd5f3f49cf5"><div class="ttname"><a href="structlightmaplight__t.html#a1d5807752ece66bf3167dbd5f3f49cf5">lightmaplight_t::radius</a></div><div class="ttdeci">float radius</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03562">model_shared.c:3562</a></div></div>
<div class="ttc" id="astructlightmaplight__t_html_a30e8be3e15881a18ce3d1580dcf9c7d9"><div class="ttname"><a href="structlightmaplight__t.html#a30e8be3e15881a18ce3d1580dcf9c7d9">lightmaplight_t::iradius</a></div><div class="ttdeci">float iradius</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03563">model_shared.c:3563</a></div></div>
<div class="ttc" id="astructlightmaplight__t_html_a5ad78b0ce4e2fc4de8d70e1836513507"><div class="ttname"><a href="structlightmaplight__t.html#a5ad78b0ce4e2fc4de8d70e1836513507">lightmaplight_t::radius2</a></div><div class="ttdeci">float radius2</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03564">model_shared.c:3564</a></div></div>
<div class="ttc" id="astructlightmapsample__t_html"><div class="ttname"><a href="structlightmapsample__t.html">lightmapsample_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03519">model_shared.c:3520</a></div></div>
<div class="ttc" id="astructlightmapsample__t_html_a267c736c75f915c435c426b8452673bb"><div class="ttname"><a href="structlightmapsample__t.html#a267c736c75f915c435c426b8452673bb">lightmapsample_t::vertex_color</a></div><div class="ttdeci">float * vertex_color</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03523">model_shared.c:3523</a></div></div>
<div class="ttc" id="astructlightmapsample__t_html_a3293765da844ca1fae869e04c5d9eac4"><div class="ttname"><a href="structlightmapsample__t.html#a3293765da844ca1fae869e04c5d9eac4">lightmapsample_t::lm_bgr</a></div><div class="ttdeci">unsigned char * lm_bgr</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03524">model_shared.c:3524</a></div></div>
<div class="ttc" id="astructlightmapsample__t_html_aef5cb2cc34fe6412e71309e2718b8bd5"><div class="ttname"><a href="structlightmapsample__t.html#aef5cb2cc34fe6412e71309e2718b8bd5">lightmapsample_t::lm_dir</a></div><div class="ttdeci">unsigned char * lm_dir</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03525">model_shared.c:3525</a></div></div>
<div class="ttc" id="astructlightmaptriangle__t_html"><div class="ttname"><a href="structlightmaptriangle__t.html">lightmaptriangle_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03540">model_shared.c:3541</a></div></div>
<div class="ttc" id="astructlightmaptriangle__t_html_a2f5cfb0b7652eb49fc900ccc082b999c"><div class="ttname"><a href="structlightmaptriangle__t.html#a2f5cfb0b7652eb49fc900ccc082b999c">lightmaptriangle_t::surfaceindex</a></div><div class="ttdeci">int surfaceindex</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03543">model_shared.c:3543</a></div></div>
<div class="ttc" id="astructlightmaptriangle__t_html_a6f0356429ee3ff2b92a51a2a312e2b17"><div class="ttname"><a href="structlightmaptriangle__t.html#a6f0356429ee3ff2b92a51a2a312e2b17">lightmaptriangle_t::lightmapindex</a></div><div class="ttdeci">int lightmapindex</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03544">model_shared.c:3544</a></div></div>
<div class="ttc" id="astructlightmaptriangle__t_html_a818e06c0485b2e7a8813fdf6f3eeba29"><div class="ttname"><a href="structlightmaptriangle__t.html#a818e06c0485b2e7a8813fdf6f3eeba29">lightmaptriangle_t::axis</a></div><div class="ttdeci">int axis</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03545">model_shared.c:3545</a></div></div>
<div class="ttc" id="astructlightmaptriangle__t_html_adbb2208770f3661f77376bbf6c218724"><div class="ttname"><a href="structlightmaptriangle__t.html#adbb2208770f3661f77376bbf6c218724">lightmaptriangle_t::triangleindex</a></div><div class="ttdeci">int triangleindex</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03542">model_shared.c:3542</a></div></div>
<div class="ttc" id="astructlightmapvertex__t_html"><div class="ttname"><a href="structlightmapvertex__t.html">lightmapvertex_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03529">model_shared.c:3530</a></div></div>
<div class="ttc" id="astructlightmapvertex__t_html_a92fd3f9202a612595267119152b3dc76"><div class="ttname"><a href="structlightmapvertex__t.html#a92fd3f9202a612595267119152b3dc76">lightmapvertex_t::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03531">model_shared.c:3531</a></div></div>
<div class="ttc" id="astructmatrix4x4__t_html"><div class="ttname"><a href="structmatrix4x4__t.html">matrix4x4_t</a></div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8h_source.html#l00009">matrixlib.h:10</a></div></div>
<div class="ttc" id="astructmemexpandablearray__t_html"><div class="ttname"><a href="structmemexpandablearray__t.html">memexpandablearray_t</a></div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00128">zone.h:129</a></div></div>
<div class="ttc" id="astructmemheader__t_html"><div class="ttname"><a href="structmemheader__t.html">memheader_t</a></div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00045">zone.h:46</a></div></div>
<div class="ttc" id="astructmempool__t_html"><div class="ttname"><a href="structmempool__t.html">mempool_t</a></div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00064">zone.h:65</a></div></div>
<div class="ttc" id="astructmod__alloclightmap__row__t_html"><div class="ttname"><a href="structmod__alloclightmap__row__t.html">mod_alloclightmap_row_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00666">model_shared.h:667</a></div></div>
<div class="ttc" id="astructmod__alloclightmap__row__t_html_a4fa30a03bd823028aa57621c9743dd45"><div class="ttname"><a href="structmod__alloclightmap__row__t.html#a4fa30a03bd823028aa57621c9743dd45">mod_alloclightmap_row_t::rowY</a></div><div class="ttdeci">int rowY</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00668">model_shared.h:668</a></div></div>
<div class="ttc" id="astructmod__alloclightmap__row__t_html_aa03f544db00930d53dc447e38411747d"><div class="ttname"><a href="structmod__alloclightmap__row__t.html#aa03f544db00930d53dc447e38411747d">mod_alloclightmap_row_t::currentX</a></div><div class="ttdeci">int currentX</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00669">model_shared.h:669</a></div></div>
<div class="ttc" id="astructmod__alloclightmap__state__t_html"><div class="ttname"><a href="structmod__alloclightmap__state__t.html">mod_alloclightmap_state_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00673">model_shared.h:674</a></div></div>
<div class="ttc" id="astructmod__alloclightmap__state__t_html_a1c053d49b1b4d1e1838049e135c30f42"><div class="ttname"><a href="structmod__alloclightmap__state__t.html#a1c053d49b1b4d1e1838049e135c30f42">mod_alloclightmap_state_t::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00676">model_shared.h:676</a></div></div>
<div class="ttc" id="astructmod__alloclightmap__state__t_html_a6e15ac0471b8209bab0288d593f6fc39"><div class="ttname"><a href="structmod__alloclightmap__state__t.html#a6e15ac0471b8209bab0288d593f6fc39">mod_alloclightmap_state_t::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00675">model_shared.h:675</a></div></div>
<div class="ttc" id="astructmod__alloclightmap__state__t_html_a8e2b46a6a15c00e2c471b73a4fe1c7db"><div class="ttname"><a href="structmod__alloclightmap__state__t.html#a8e2b46a6a15c00e2c471b73a4fe1c7db">mod_alloclightmap_state_t::rows</a></div><div class="ttdeci">mod_alloclightmap_row_t * rows</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00678">model_shared.h:678</a></div></div>
<div class="ttc" id="astructmod__alloclightmap__state__t_html_affbcb1ea77c25c356b41921c32b31724"><div class="ttname"><a href="structmod__alloclightmap__state__t.html#affbcb1ea77c25c356b41921c32b31724">mod_alloclightmap_state_t::currentY</a></div><div class="ttdeci">int currentY</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00677">model_shared.h:677</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_a12ae1e03d70e00f9b3ba4a11a2314e2e"><div class="ttname"><a href="structmodel__brush__t.html#a12ae1e03d70e00f9b3ba4a11a2314e2e">model_brush_t::numsubmodels</a></div><div class="ttdeci">int numsubmodels</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00275">model_brush.h:275</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_a1bb35c00721be56c390df0b877791cac"><div class="ttname"><a href="structmodel__brush__t.html#a1bb35c00721be56c390df0b877791cac">model_brush_t::submodel</a></div><div class="ttdeci">int submodel</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00271">model_brush.h:271</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_a37a1567e8699fb01ef28871444c93d9c"><div class="ttname"><a href="structmodel__brush__t.html#a37a1567e8699fb01ef28871444c93d9c">model_brush_t::alphaskyskinframe</a></div><div class="ttdeci">struct skinframe_s * alphaskyskinframe</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00350">model_brush.h:350</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_a462aadc65aeffe8d8e64208e0d841f39"><div class="ttname"><a href="structmodel__brush__t.html#a462aadc65aeffe8d8e64208e0d841f39">model_brush_t::submodels</a></div><div class="ttdeci">struct model_s ** submodels</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00277">model_brush.h:277</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_a5c0c32e777355c585bbab198d78dc6cc"><div class="ttname"><a href="structmodel__brush__t.html#a5c0c32e777355c585bbab198d78dc6cc">model_brush_t::solidskyskinframe</a></div><div class="ttdeci">struct skinframe_s * solidskyskinframe</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00349">model_brush.h:349</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_a7dcb6ad152fbb5148b1830e79839b197"><div class="ttname"><a href="structmodel__brush__t.html#a7dcb6ad152fbb5148b1830e79839b197">model_brush_t::LightPoint</a></div><div class="ttdeci">void(* LightPoint)(struct model_s *model, const vec3_t p, vec3_t ambientcolor, vec3_t diffusecolor, vec3_t diffusenormal)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00338">model_brush.h:338</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_aba638bb4b43ce8dbc19d0aa4879980ac"><div class="ttname"><a href="structmodel__brush__t.html#aba638bb4b43ce8dbc19d0aa4879980ac">model_brush_t::skybox</a></div><div class="ttdeci">char skybox[MAX_QPATH]</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00347">model_brush.h:347</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_abb7bc4769ccea279c22ec0587f2f14b0"><div class="ttname"><a href="structmodel__brush__t.html#abb7bc4769ccea279c22ec0587f2f14b0">model_brush_t::collisionmesh</a></div><div class="ttdeci">struct shadowmesh_s * collisionmesh</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00327">model_brush.h:327</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_ac4d9fbdd0eee8dd6822be206eb245cc3"><div class="ttname"><a href="structmodel__brush__t.html#ac4d9fbdd0eee8dd6822be206eb245cc3">model_brush_t::parentmodel</a></div><div class="ttdeci">struct model_s * parentmodel</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00269">model_brush.h:269</a></div></div>
<div class="ttc" id="astructmodel__brushq1__t_html_a48618a707013d0f863f42940df3a8df7"><div class="ttname"><a href="structmodel__brushq1__t.html#a48618a707013d0f863f42940df3a8df7">model_brushq1_t::num_lightstyles</a></div><div class="ttdeci">int num_lightstyles</div><div class="ttdef"><b>Definition</b> <a href="model__q1bsp_8h_source.html#l00036">model_q1bsp.h:36</a></div></div>
<div class="ttc" id="astructmodel__brushq1__t_html_a514cf493a6e744f8717a00df794d84e0"><div class="ttname"><a href="structmodel__brushq1__t.html#a514cf493a6e744f8717a00df794d84e0">model_brushq1_t::data_lightstyleinfo</a></div><div class="ttdeci">model_brush_lightstyleinfo_t * data_lightstyleinfo</div><div class="ttdef"><b>Definition</b> <a href="model__q1bsp_8h_source.html#l00037">model_q1bsp.h:37</a></div></div>
<div class="ttc" id="astructmodel__brushq1__t_html_a66c2d707bc47f544a31c80fa74ea8516"><div class="ttname"><a href="structmodel__brushq1__t.html#a66c2d707bc47f544a31c80fa74ea8516">model_brushq1_t::lightmapupdateflags</a></div><div class="ttdeci">unsigned char * lightmapupdateflags</div><div class="ttdef"><b>Definition</b> <a href="model__q1bsp_8h_source.html#l00040">model_q1bsp.h:40</a></div></div>
<div class="ttc" id="astructmodel__brushq1__t_html_a70a1574bac96e9b59acb8dad94c6c28c"><div class="ttname"><a href="structmodel__brushq1__t.html#a70a1574bac96e9b59acb8dad94c6c28c">model_brushq1_t::lightdata</a></div><div class="ttdeci">unsigned char * lightdata</div><div class="ttdef"><b>Definition</b> <a href="model__q1bsp_8h_source.html#l00032">model_q1bsp.h:32</a></div></div>
<div class="ttc" id="astructmodel__brushq1__t_html_aca69bc0d1a00ed0f6ab32f3e73bd424b"><div class="ttname"><a href="structmodel__brushq1__t.html#aca69bc0d1a00ed0f6ab32f3e73bd424b">model_brushq1_t::firstrender</a></div><div class="ttdeci">qbool firstrender</div><div class="ttdef"><b>Definition</b> <a href="model__q1bsp_8h_source.html#l00041">model_q1bsp.h:41</a></div></div>
<div class="ttc" id="astructmodel__brushq3__t_html_a4c41214172127c935805b23659258e9f"><div class="ttname"><a href="structmodel__brushq3__t.html#a4c41214172127c935805b23659258e9f">model_brushq3_t::data_lightmaps</a></div><div class="ttdeci">rtexture_t ** data_lightmaps</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00339">model_q3bsp.h:339</a></div></div>
<div class="ttc" id="astructmodel__brushq3__t_html_a5a05c09d0e16f30cc381559e0441932a"><div class="ttname"><a href="structmodel__brushq3__t.html#a5a05c09d0e16f30cc381559e0441932a">model_brushq3_t::num_lightgrid_cellsize</a></div><div class="ttdeci">float num_lightgrid_cellsize[3]</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00346">model_q3bsp.h:346</a></div></div>
<div class="ttc" id="astructmodel__brushq3__t_html_a786fc3c07a9cd75a2edc25dae55608db"><div class="ttname"><a href="structmodel__brushq3__t.html#a786fc3c07a9cd75a2edc25dae55608db">model_brushq3_t::num_lightgrid_imins</a></div><div class="ttdeci">int num_lightgrid_imins[3]</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00350">model_q3bsp.h:350</a></div></div>
<div class="ttc" id="astructmodel__brushq3__t_html_a9a6c3e1fc72135d6dc9581c9bd7f1f88"><div class="ttname"><a href="structmodel__brushq3__t.html#a9a6c3e1fc72135d6dc9581c9bd7f1f88">model_brushq3_t::num_mergedlightmaps</a></div><div class="ttdeci">int num_mergedlightmaps</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00334">model_q3bsp.h:334</a></div></div>
<div class="ttc" id="astructmodel__brushq3__t_html_a9f2310c4c2818e19e7a5a90b2c156377"><div class="ttname"><a href="structmodel__brushq3__t.html#a9f2310c4c2818e19e7a5a90b2c156377">model_brushq3_t::data_lightgrid</a></div><div class="ttdeci">q3dlightgrid_t * data_lightgrid</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00344">model_q3bsp.h:344</a></div></div>
<div class="ttc" id="astructmodel__brushq3__t_html_aab1b30ab9ae770bf3d403eae5ce0aa01"><div class="ttname"><a href="structmodel__brushq3__t.html#aab1b30ab9ae770bf3d403eae5ce0aa01">model_brushq3_t::data_deluxemaps</a></div><div class="ttdeci">rtexture_t ** data_deluxemaps</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00340">model_q3bsp.h:340</a></div></div>
<div class="ttc" id="astructmodel__brushq3__t_html_ab45856a2ba7c570b8500aae6dcf6a491"><div class="ttname"><a href="structmodel__brushq3__t.html#ab45856a2ba7c570b8500aae6dcf6a491">model_brushq3_t::deluxemapping_modelspace</a></div><div class="ttdeci">qbool deluxemapping_modelspace</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00366">model_q3bsp.h:366</a></div></div>
<div class="ttc" id="astructmodel__brushq3__t_html_ab92fc06352b01074d0781ad6dfedb2df"><div class="ttname"><a href="structmodel__brushq3__t.html#ab92fc06352b01074d0781ad6dfedb2df">model_brushq3_t::num_lightgrid_isize</a></div><div class="ttdeci">int num_lightgrid_isize[3]</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00352">model_q3bsp.h:352</a></div></div>
<div class="ttc" id="astructmodel__brushq3__t_html_afcbfa68b6aa2c4f09247a466bbec320e"><div class="ttname"><a href="structmodel__brushq3__t.html#afcbfa68b6aa2c4f09247a466bbec320e">model_brushq3_t::deluxemapping</a></div><div class="ttdeci">qbool deluxemapping</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00363">model_q3bsp.h:363</a></div></div>
<div class="ttc" id="astructmodel__t_html"><div class="ttname"><a href="structmodel__t.html">model_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00428">model_shared.h:429</a></div></div>
<div class="ttc" id="astructmodel__t_html_a04530a5055aa78902f674f53fa284a37"><div class="ttname"><a href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">model_t::brush</a></div><div class="ttdeci">model_brush_t brush</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00541">model_shared.h:541</a></div></div>
<div class="ttc" id="astructmodel__t_html_a0629c0fdc502c92975be054a2b6dd9e6"><div class="ttname"><a href="structmodel__t.html#a0629c0fdc502c92975be054a2b6dd9e6">model_t::radius2</a></div><div class="ttdeci">float radius2</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00461">model_shared.h:461</a></div></div>
<div class="ttc" id="astructmodel__t_html_a092a26ea0346fc90b6bc82a33289ed82"><div class="ttname"><a href="structmodel__t.html#a092a26ea0346fc90b6bc82a33289ed82">model_t::numskins</a></div><div class="ttdeci">int numskins</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00449">model_shared.h:449</a></div></div>
<div class="ttc" id="astructmodel__t_html_a0c0d94b3f0503536ab0e6c0056d97df2"><div class="ttname"><a href="structmodel__t.html#a0c0d94b3f0503536ab0e6c0056d97df2">model_t::DrawDepth</a></div><div class="ttdeci">void(* DrawDepth)(struct entity_render_s *ent)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00515">model_shared.h:515</a></div></div>
<div class="ttc" id="astructmodel__t_html_a0fb268c443d4c9dd629e3af746878fec"><div class="ttname"><a href="structmodel__t.html#a0fb268c443d4c9dd629e3af746878fec">model_t::type</a></div><div class="ttdeci">modtype_t type</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00439">model_shared.h:439</a></div></div>
<div class="ttc" id="astructmodel__t_html_a1c55fbbffd372358dd464cbdad16db70"><div class="ttname"><a href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">model_t::surfmesh</a></div><div class="ttdeci">surfmesh_t surfmesh</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00503">model_shared.h:503</a></div></div>
<div class="ttc" id="astructmodel__t_html_a21bd755a3508a33a727a559c8bcbbf5e"><div class="ttname"><a href="structmodel__t.html#a21bd755a3508a33a727a559c8bcbbf5e">model_t::loaded</a></div><div class="ttdeci">qbool loaded</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00433">model_shared.h:433</a></div></div>
<div class="ttc" id="astructmodel__t_html_a2c2034d2a113cadab48c388065c65335"><div class="ttname"><a href="structmodel__t.html#a2c2034d2a113cadab48c388065c65335">model_t::rotatedmins</a></div><div class="ttdeci">vec3_t rotatedmins</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00457">model_shared.h:457</a></div></div>
<div class="ttc" id="astructmodel__t_html_a3324a3bec6a016ede4ee308695500bf9"><div class="ttname"><a href="structmodel__t.html#a3324a3bec6a016ede4ee308695500bf9">model_t::yawmaxs</a></div><div class="ttdeci">vec3_t yawmaxs</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00455">model_shared.h:455</a></div></div>
<div class="ttc" id="astructmodel__t_html_a37ed77c0d67434b15280684a8ba42814"><div class="ttname"><a href="structmodel__t.html#a37ed77c0d67434b15280684a8ba42814">model_t::modelsurfaces_sorted</a></div><div class="ttdeci">int * modelsurfaces_sorted</div><div class="ttdoc">surface indices of model in an optimal draw order (submodelindex -&gt; texture -&gt; lightmap -&gt; index)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00470">model_shared.h:470</a></div></div>
<div class="ttc" id="astructmodel__t_html_a39476ca3d4067da3024e2e52860baa9c"><div class="ttname"><a href="structmodel__t.html#a39476ca3d4067da3024e2e52860baa9c">model_t::wanttangents</a></div><div class="ttdeci">qbool wanttangents</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00495">model_shared.h:495</a></div></div>
<div class="ttc" id="astructmodel__t_html_a3cf3f78e305583268585ef7bde7aaa16"><div class="ttname"><a href="structmodel__t.html#a3cf3f78e305583268585ef7bde7aaa16">model_t::submodelsurfaces_end</a></div><div class="ttdeci">int submodelsurfaces_end</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00468">model_shared.h:468</a></div></div>
<div class="ttc" id="astructmodel__t_html_a42b76bd94570c0130a33e4dae79f03e5"><div class="ttname"><a href="structmodel__t.html#a42b76bd94570c0130a33e4dae79f03e5">model_t::rotatedmaxs</a></div><div class="ttdeci">vec3_t rotatedmaxs</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00457">model_shared.h:457</a></div></div>
<div class="ttc" id="astructmodel__t_html_a438c22283046e832aba6c3a7b1a92feb"><div class="ttname"><a href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">model_t::data_surfaces</a></div><div class="ttdeci">msurface_t * data_surfaces</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00499">model_shared.h:499</a></div></div>
<div class="ttc" id="astructmodel__t_html_a474f5a968c65f1896d8bd22d066db398"><div class="ttname"><a href="structmodel__t.html#a474f5a968c65f1896d8bd22d066db398">model_t::num_posescale</a></div><div class="ttdeci">float num_posescale</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00484">model_shared.h:484</a></div></div>
<div class="ttc" id="astructmodel__t_html_a4ad54aab83aca1c9ec564054f4019609"><div class="ttname"><a href="structmodel__t.html#a4ad54aab83aca1c9ec564054f4019609">model_t::Draw</a></div><div class="ttdeci">void(* Draw)(struct entity_render_s *ent)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00513">model_shared.h:513</a></div></div>
<div class="ttc" id="astructmodel__t_html_a4bf40349d814f181d66602ed812c7903"><div class="ttname"><a href="structmodel__t.html#a4bf40349d814f181d66602ed812c7903">model_t::radius</a></div><div class="ttdeci">float radius</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00459">model_shared.h:459</a></div></div>
<div class="ttc" id="astructmodel__t_html_a4f2bc211fd845ff46f40e2a8c098b7ad"><div class="ttname"><a href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">model_t::submodelsurfaces_start</a></div><div class="ttdeci">int submodelsurfaces_start</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00467">model_shared.h:467</a></div></div>
<div class="ttc" id="astructmodel__t_html_a5301cd5482c8a21efabe003b490fe1b7"><div class="ttname"><a href="structmodel__t.html#a5301cd5482c8a21efabe003b490fe1b7">model_t::brushq3</a></div><div class="ttdeci">model_brushq3_t brushq3</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00543">model_shared.h:543</a></div></div>
<div class="ttc" id="astructmodel__t_html_a53c32e4598e37e8256175c6112425af1"><div class="ttname"><a href="structmodel__t.html#a53c32e4598e37e8256175c6112425af1">model_t::brushq1</a></div><div class="ttdeci">model_brushq1_t brushq1</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00542">model_shared.h:542</a></div></div>
<div class="ttc" id="astructmodel__t_html_a54bb4319ad425035cabd82548941faf3"><div class="ttname"><a href="structmodel__t.html#a54bb4319ad425035cabd82548941faf3">model_t::DrawSky</a></div><div class="ttdeci">void(* DrawSky)(struct entity_render_s *ent)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00509">model_shared.h:509</a></div></div>
<div class="ttc" id="astructmodel__t_html_a5591540702848d10fc671916113de5f6"><div class="ttname"><a href="structmodel__t.html#a5591540702848d10fc671916113de5f6">model_t::DrawAddWaterPlanes</a></div><div class="ttdeci">void(* DrawAddWaterPlanes)(struct entity_render_s *ent)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00511">model_shared.h:511</a></div></div>
<div class="ttc" id="astructmodel__t_html_a5a5b038598ccef5f670521d169edb025"><div class="ttname"><a href="structmodel__t.html#a5a5b038598ccef5f670521d169edb025">model_t::DrawPrepass</a></div><div class="ttdeci">void(* DrawPrepass)(struct entity_render_s *ent)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00519">model_shared.h:519</a></div></div>
<div class="ttc" id="astructmodel__t_html_a64d99f5cddde13a76e3cf4629b818d8e"><div class="ttname"><a href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">model_t::normalmaxs</a></div><div class="ttdeci">vec3_t normalmaxs</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00453">model_shared.h:453</a></div></div>
<div class="ttc" id="astructmodel__t_html_a6d207a080d8ca69eecb6ca4ceb4cd98b"><div class="ttname"><a href="structmodel__t.html#a6d207a080d8ca69eecb6ca4ceb4cd98b">model_t::texturepool</a></div><div class="ttdeci">rtexturepool_t * texturepool</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00443">model_shared.h:443</a></div></div>
<div class="ttc" id="astructmodel__t_html_a71121e7ef28a949af258f4611ce21e9c"><div class="ttname"><a href="structmodel__t.html#a71121e7ef28a949af258f4611ce21e9c">model_t::DrawShadowMap</a></div><div class="ttdeci">void(* DrawShadowMap)(int side, struct entity_render_s *ent, const vec3_t relativelightorigin, const vec3_t relativelightdirection, float lightradius, int numsurfaces, const int *surfacelist, const unsigned char *surfacesides, const vec3_t lightmins, const vec3_t lightmaxs)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00523">model_shared.h:523</a></div></div>
<div class="ttc" id="astructmodel__t_html_a77a8ed6f65207e003b1675a05b1bfc5e"><div class="ttname"><a href="structmodel__t.html#a77a8ed6f65207e003b1675a05b1bfc5e">model_t::lightmapscale</a></div><div class="ttdeci">float lightmapscale</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00549">model_shared.h:549</a></div></div>
<div class="ttc" id="astructmodel__t_html_a7a0081b6e77854bd75ae206afba89148"><div class="ttname"><a href="structmodel__t.html#a7a0081b6e77854bd75ae206afba89148">model_t::GetLightInfo</a></div><div class="ttdeci">void(* GetLightInfo)(struct entity_render_s *ent, vec3_t relativelightorigin, float lightradius, vec3_t outmins, vec3_t outmaxs, int *outleaflist, unsigned char *outleafpvs, int *outnumleafspointer, int *outsurfacelist, unsigned char *outsurfacepvs, int *outnumsurfacespointer, unsigned char *outshadowtrispvs, unsigned char *outlighttrispvs, unsigned char *visitingleafpvs, int numfrustumplanes, const mplane_t *frustumplanes, qbool noocclusion)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00525">model_shared.h:525</a></div></div>
<div class="ttc" id="astructmodel__t_html_a7b670a69b5082781733cc0b9ebdc307a"><div class="ttname"><a href="structmodel__t.html#a7b670a69b5082781733cc0b9ebdc307a">model_t::DrawDebug</a></div><div class="ttdeci">void(* DrawDebug)(struct entity_render_s *ent)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00517">model_shared.h:517</a></div></div>
<div class="ttc" id="astructmodel__t_html_a826df8b699b02cf7e338bd939779c80c"><div class="ttname"><a href="structmodel__t.html#a826df8b699b02cf7e338bd939779c80c">model_t::num_poses</a></div><div class="ttdeci">int num_poses</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00486">model_shared.h:486</a></div></div>
<div class="ttc" id="astructmodel__t_html_a84f649523d09230b18b2e13698e81074"><div class="ttname"><a href="structmodel__t.html#a84f649523d09230b18b2e13698e81074">model_t::animscenes</a></div><div class="ttdeci">animscene_t * animscenes</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00465">model_shared.h:465</a></div></div>
<div class="ttc" id="astructmodel__t_html_a89acb0870888d15e8a405ba84bd6e611"><div class="ttname"><a href="structmodel__t.html#a89acb0870888d15e8a405ba84bd6e611">model_t::mempool</a></div><div class="ttdeci">struct mempool_s * mempool</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00441">model_shared.h:441</a></div></div>
<div class="ttc" id="astructmodel__t_html_a8edb4ba664126b79bff8d23eaa8133c3"><div class="ttname"><a href="structmodel__t.html#a8edb4ba664126b79bff8d23eaa8133c3">model_t::crc</a></div><div class="ttdeci">unsigned int crc</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00437">model_shared.h:437</a></div></div>
<div class="ttc" id="astructmodel__t_html_a90f05444c8d96adeaec3beffe4fed932"><div class="ttname"><a href="structmodel__t.html#a90f05444c8d96adeaec3beffe4fed932">model_t::yawmins</a></div><div class="ttdeci">vec3_t yawmins</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00455">model_shared.h:455</a></div></div>
<div class="ttc" id="astructmodel__t_html_a9c3577006a252ce407c3b204a05be9e4"><div class="ttname"><a href="structmodel__t.html#a9c3577006a252ce407c3b204a05be9e4">model_t::numframes</a></div><div class="ttdeci">int numframes</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00447">model_shared.h:447</a></div></div>
<div class="ttc" id="astructmodel__t_html_aa7fb585711d9802b38d846f1f764dc04"><div class="ttname"><a href="structmodel__t.html#aa7fb585711d9802b38d846f1f764dc04">model_t::used</a></div><div class="ttdeci">qbool used</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00435">model_shared.h:435</a></div></div>
<div class="ttc" id="astructmodel__t_html_aad0f2d9471f7d761be5fe5d23d9bbd20"><div class="ttname"><a href="structmodel__t.html#aad0f2d9471f7d761be5fe5d23d9bbd20">model_t::name</a></div><div class="ttdeci">char name[MAX_QPATH]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00431">model_shared.h:431</a></div></div>
<div class="ttc" id="astructmodel__t_html_ab1e3cb6ca3cb7d53debac5661d033b1f"><div class="ttname"><a href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">model_t::normalmins</a></div><div class="ttdeci">vec3_t normalmins</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00453">model_shared.h:453</a></div></div>
<div class="ttc" id="astructmodel__t_html_ab77f5d2c5064c2e726a590bcdc440ccf"><div class="ttname"><a href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">model_t::num_surfaces</a></div><div class="ttdeci">int num_surfaces</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00497">model_shared.h:497</a></div></div>
<div class="ttc" id="astructmodel__t_html_abbf1bba30697f7bf6cfb28c79adfefe6"><div class="ttname"><a href="structmodel__t.html#abbf1bba30697f7bf6cfb28c79adfefe6">model_t::num_textures</a></div><div class="ttdeci">int num_textures</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00490">model_shared.h:490</a></div></div>
<div class="ttc" id="astructmodel__t_html_abbf92c31375e570dba8224c43a8a5617"><div class="ttname"><a href="structmodel__t.html#abbf92c31375e570dba8224c43a8a5617">model_t::modeldatatypestring</a></div><div class="ttdeci">const char * modeldatatypestring</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00505">model_shared.h:505</a></div></div>
<div class="ttc" id="astructmodel__t_html_ac30e13239504da645c5e835eef8f559e"><div class="ttname"><a href="structmodel__t.html#ac30e13239504da645c5e835eef8f559e">model_t::data_textures</a></div><div class="ttdeci">texture_t * data_textures</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00493">model_shared.h:493</a></div></div>
<div class="ttc" id="astructmodel__t_html_ac8dd00e30441129636e18b028a16c561"><div class="ttname"><a href="structmodel__t.html#ac8dd00e30441129636e18b028a16c561">model_t::data_bones</a></div><div class="ttdeci">aliasbone_t * data_bones</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00483">model_shared.h:483</a></div></div>
<div class="ttc" id="astructmodel__t_html_ad087b11964d3db66d0e17c34e9400fef"><div class="ttname"><a href="structmodel__t.html#ad087b11964d3db66d0e17c34e9400fef">model_t::max_surfaces</a></div><div class="ttdeci">int max_surfaces</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00498">model_shared.h:498</a></div></div>
<div class="ttc" id="astructmodel__t_html_ad59944cb58ea26907319a7431dec4bd6"><div class="ttname"><a href="structmodel__t.html#ad59944cb58ea26907319a7431dec4bd6">model_t::data_poses7s</a></div><div class="ttdeci">short * data_poses7s</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00487">model_shared.h:487</a></div></div>
<div class="ttc" id="astructmodel__t_html_aeb85007466c241068ac8eb78d82c0aca"><div class="ttname"><a href="structmodel__t.html#aeb85007466c241068ac8eb78d82c0aca">model_t::max_textures</a></div><div class="ttdeci">int max_textures</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00491">model_shared.h:491</a></div></div>
<div class="ttc" id="astructmodel__t_html_af206eaa0040c5a5e297fa1c0191b22dd"><div class="ttname"><a href="structmodel__t.html#af206eaa0040c5a5e297fa1c0191b22dd">model_t::DrawLight</a></div><div class="ttdeci">void(* DrawLight)(struct entity_render_s *ent, int numsurfaces, const int *surfacelist, const unsigned char *trispvs)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00527">model_shared.h:527</a></div></div>
<div class="ttc" id="astructmodel__t_html_af97a8519b182e76d8a59ed2295777e04"><div class="ttname"><a href="structmodel__t.html#af97a8519b182e76d8a59ed2295777e04">model_t::num_bones</a></div><div class="ttdeci">int num_bones</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00482">model_shared.h:482</a></div></div>
<div class="ttc" id="astructmodel__t_html_af986fe2f082429a18c3d36f957649e10"><div class="ttname"><a href="structmodel__t.html#af986fe2f082429a18c3d36f957649e10">model_t::TraceLine</a></div><div class="ttdeci">void(* TraceLine)(struct model_s *model, const struct frameblend_s *frameblend, const struct skeleton_s *skeleton, struct trace_s *trace, const vec3_t start, const vec3_t end, int hitsupercontentsmask, int skipsupercontentsmask, int skipmaterialflagsmask)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00532">model_shared.h:532</a></div></div>
<div class="ttc" id="astructmodel__t_html_afe7dbcb7f10ae5fe91bd0cb6dcbdefaf"><div class="ttname"><a href="structmodel__t.html#afe7dbcb7f10ae5fe91bd0cb6dcbdefaf">model_t::wantnormals</a></div><div class="ttdeci">qbool wantnormals</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00494">model_shared.h:494</a></div></div>
<div class="ttc" id="astructmodloader__t_html"><div class="ttname"><a href="structmodloader__t.html">modloader_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00561">model_shared.h:562</a></div></div>
<div class="ttc" id="astructmodloader__t_html_a24e17d69b4c85a828dc78bec28664a94"><div class="ttname"><a href="structmodloader__t.html#a24e17d69b4c85a828dc78bec28664a94">modloader_t::Load</a></div><div class="ttdeci">void(* Load)(model_t *, void *, void *)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00566">model_shared.h:566</a></div></div>
<div class="ttc" id="astructmsurface__t_html"><div class="ttname"><a href="structmsurface__t.html">msurface_t</a></div><div class="ttdoc">describes the textures to use on a range of triangles in the model, and mins/maxs (AABB) for culling.</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00377">model_shared.h:378</a></div></div>
<div class="ttc" id="astructmsurface__t_html_a567785f5ea238992958048c1fb58a318"><div class="ttname"><a href="structmsurface__t.html#a567785f5ea238992958048c1fb58a318">msurface_t::num_triangles</a></div><div class="ttdeci">int num_triangles</div><div class="ttdoc">range of triangles and vertices in model-&gt;surfmesh</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00380">model_shared.h:380</a></div></div>
<div class="ttc" id="astructmsurface__t_html_a7caa0cbcf942fc5d17d16ae8f212b91e"><div class="ttname"><a href="structmsurface__t.html#a7caa0cbcf942fc5d17d16ae8f212b91e">msurface_t::texture</a></div><div class="ttdeci">texture_t * texture</div><div class="ttdoc">the texture to use on the surface</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00386">model_shared.h:386</a></div></div>
<div class="ttc" id="astructmsurface__t_html_a81eec2e84c6ded9dcfdae62df241f9a6"><div class="ttname"><a href="structmsurface__t.html#a81eec2e84c6ded9dcfdae62df241f9a6">msurface_t::num_firstvertex</a></div><div class="ttdeci">int num_firstvertex</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00383">model_shared.h:383</a></div></div>
<div class="ttc" id="astructmsurface__t_html_a88220cc80f9a2ab468e8cf008d3e0fae"><div class="ttname"><a href="structmsurface__t.html#a88220cc80f9a2ab468e8cf008d3e0fae">msurface_t::included</a></div><div class="ttdeci">qbool included</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00409">model_shared.h:409</a></div></div>
<div class="ttc" id="astructmsurface__t_html_a99675a77495a62fb96422ab49b756d3d"><div class="ttname"><a href="structmsurface__t.html#a99675a77495a62fb96422ab49b756d3d">msurface_t::effect</a></div><div class="ttdeci">struct q3deffect_s * effect</div><div class="ttdoc">fog volume info in q3bsp</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00401">model_shared.h:401</a></div></div>
<div class="ttc" id="astructmsurface__t_html_af83214878e2f4b322aaa26ae45506d32"><div class="ttname"><a href="structmsurface__t.html#af83214878e2f4b322aaa26ae45506d32">msurface_t::lightmaptexture</a></div><div class="ttdeci">struct rtexture_s * lightmaptexture</div><div class="ttdoc">the lightmap texture fragment to use on the rendering mesh</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00388">model_shared.h:388</a></div></div>
<div class="ttc" id="astructq3deffect__t_html"><div class="ttname"><a href="structq3deffect__t.html">q3deffect_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00132">model_q3bsp.h:133</a></div></div>
<div class="ttc" id="astructq3dlightgrid__t_html"><div class="ttname"><a href="structq3dlightgrid__t.html">q3dlightgrid_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00222">model_q3bsp.h:223</a></div></div>
<div class="ttc" id="astructq3dlightgrid__t_html_a36a7451fbeb15e7cda3e44669abd6543"><div class="ttname"><a href="structq3dlightgrid__t.html#a36a7451fbeb15e7cda3e44669abd6543">q3dlightgrid_t::diffusergb</a></div><div class="ttdeci">unsigned char diffusergb[3]</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00225">model_q3bsp.h:225</a></div></div>
<div class="ttc" id="astructq3dlightgrid__t_html_a58fadbbd27f024d91b69702129e7b1f4"><div class="ttname"><a href="structq3dlightgrid__t.html#a58fadbbd27f024d91b69702129e7b1f4">q3dlightgrid_t::ambientrgb</a></div><div class="ttdeci">unsigned char ambientrgb[3]</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00224">model_q3bsp.h:224</a></div></div>
<div class="ttc" id="astructq3dlightgrid__t_html_a5e757a63a2bd94ec41a0e520c5927b0b"><div class="ttname"><a href="structq3dlightgrid__t.html#a5e757a63a2bd94ec41a0e520c5927b0b">q3dlightgrid_t::diffuseyaw</a></div><div class="ttdeci">unsigned char diffuseyaw</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00227">model_q3bsp.h:227</a></div></div>
<div class="ttc" id="astructq3dlightgrid__t_html_aff385a772466d212a0953ce6f794f9c3"><div class="ttname"><a href="structq3dlightgrid__t.html#aff385a772466d212a0953ce6f794f9c3">q3dlightgrid_t::diffusepitch</a></div><div class="ttdeci">unsigned char diffusepitch</div><div class="ttdef"><b>Definition</b> <a href="model__q3bsp_8h_source.html#l00226">model_q3bsp.h:226</a></div></div>
<div class="ttc" id="astructq3shader__data__t_html"><div class="ttname"><a href="structq3shader__data__t.html">q3shader_data_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00077">model_shared.c:78</a></div></div>
<div class="ttc" id="astructq3shader__data__t_html_a6f14ea99b141eb62ffd3461552c646fa"><div class="ttname"><a href="structq3shader__data__t.html#a6f14ea99b141eb62ffd3461552c646fa">q3shader_data_t::hash</a></div><div class="ttdeci">q3shader_hash_entry_t hash[Q3SHADER_HASH_SIZE]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00080">model_shared.c:80</a></div></div>
<div class="ttc" id="astructq3shader__data__t_html_a7410df7a4f8a667d1c2f90f88242887e"><div class="ttname"><a href="structq3shader__data__t.html#a7410df7a4f8a667d1c2f90f88242887e">q3shader_data_t::char_ptrs</a></div><div class="ttdeci">memexpandablearray_t char_ptrs</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00081">model_shared.c:81</a></div></div>
<div class="ttc" id="astructq3shader__data__t_html_ac6f932972d7f821a276dc2ed3bfd38b4"><div class="ttname"><a href="structq3shader__data__t.html#ac6f932972d7f821a276dc2ed3bfd38b4">q3shader_data_t::hash_entries</a></div><div class="ttdeci">memexpandablearray_t hash_entries</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00079">model_shared.c:79</a></div></div>
<div class="ttc" id="astructq3shader__hash__entry__t_html"><div class="ttname"><a href="structq3shader__hash__entry__t.html">q3shader_hash_entry_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00071">model_shared.c:72</a></div></div>
<div class="ttc" id="astructq3shader__hash__entry__t_html_a1bd5bc74c956144bc754962eafe2c452"><div class="ttname"><a href="structq3shader__hash__entry__t.html#a1bd5bc74c956144bc754962eafe2c452">q3shader_hash_entry_t::chain</a></div><div class="ttdeci">struct q3shader_hash_entry_s * chain</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00074">model_shared.c:74</a></div></div>
<div class="ttc" id="astructq3shader__hash__entry__t_html_a51abd5afda8d865102c9347c21e7926d"><div class="ttname"><a href="structq3shader__hash__entry__t.html#a51abd5afda8d865102c9347c21e7926d">q3shader_hash_entry_t::shader</a></div><div class="ttdeci">shader_t shader</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l00073">model_shared.c:73</a></div></div>
<div class="ttc" id="astructq3shaderinfo__deform__t_html_a08bf3388330fd7f1ef08c32aef0f768d"><div class="ttname"><a href="structq3shaderinfo__deform__t.html#a08bf3388330fd7f1ef08c32aef0f768d">q3shaderinfo_deform_t::wavefunc</a></div><div class="ttdeci">q3wavefunc_t wavefunc</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00178">r_qshader.h:178</a></div></div>
<div class="ttc" id="astructq3shaderinfo__deform__t_html_a22a6cf4d4ef4981e78979a191df08514"><div class="ttname"><a href="structq3shaderinfo__deform__t.html#a22a6cf4d4ef4981e78979a191df08514">q3shaderinfo_deform_t::parms</a></div><div class="ttdeci">float parms[Q3DEFORM_MAXPARMS]</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00177">r_qshader.h:177</a></div></div>
<div class="ttc" id="astructq3shaderinfo__deform__t_html_a503d72035841d42a991f0a2221b190bf"><div class="ttname"><a href="structq3shaderinfo__deform__t.html#a503d72035841d42a991f0a2221b190bf">q3shaderinfo_deform_t::deform</a></div><div class="ttdeci">q3deform_t deform</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00176">r_qshader.h:176</a></div></div>
<div class="ttc" id="astructq3shaderinfo__deform__t_html_a65f99c9c27ab84c467e4da99d0aea4b7"><div class="ttname"><a href="structq3shaderinfo__deform__t.html#a65f99c9c27ab84c467e4da99d0aea4b7">q3shaderinfo_deform_t::waveparms</a></div><div class="ttdeci">float waveparms[Q3WAVEPARMS]</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00179">r_qshader.h:179</a></div></div>
<div class="ttc" id="astructq3shaderinfo__layer__alphagen__t_html_acb01452657e6b22b84d3db529f30a8bf"><div class="ttname"><a href="structq3shaderinfo__layer__alphagen__t.html#acb01452657e6b22b84d3db529f30a8bf">q3shaderinfo_layer_alphagen_t::alphagen</a></div><div class="ttdeci">q3alphagen_t alphagen</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00135">r_qshader.h:135</a></div></div>
<div class="ttc" id="astructq3shaderinfo__layer__rgbgen__t_html_a789f6676db80e2af88ac3a15af6cc8d9"><div class="ttname"><a href="structq3shaderinfo__layer__rgbgen__t.html#a789f6676db80e2af88ac3a15af6cc8d9">q3shaderinfo_layer_rgbgen_t::rgbgen</a></div><div class="ttdeci">q3rgbgen_t rgbgen</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00126">r_qshader.h:126</a></div></div>
<div class="ttc" id="astructq3shaderinfo__layer__t_html"><div class="ttname"><a href="structq3shaderinfo__layer__t.html">q3shaderinfo_layer_t</a></div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00158">r_qshader.h:159</a></div></div>
<div class="ttc" id="astructq3shaderinfo__layer__t_html_a53297374f59123b0a028121591c1e5f0"><div class="ttname"><a href="structq3shaderinfo__layer__t.html#a53297374f59123b0a028121591c1e5f0">q3shaderinfo_layer_t::blendfunc</a></div><div class="ttdeci">int blendfunc[2]</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00166">r_qshader.h:166</a></div></div>
<div class="ttc" id="astructq3shaderinfo__layer__t_html_a5f9d8e1cbd836090bbfa3f7893dbb265"><div class="ttname"><a href="structq3shaderinfo__layer__t.html#a5f9d8e1cbd836090bbfa3f7893dbb265">q3shaderinfo_layer_t::dptexflags</a></div><div class="ttdeci">int dptexflags</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00164">r_qshader.h:164</a></div></div>
<div class="ttc" id="astructq3shaderinfo__layer__t_html_a72a759e44294e8c7c103889109f8d9fb"><div class="ttname"><a href="structq3shaderinfo__layer__t.html#a72a759e44294e8c7c103889109f8d9fb">q3shaderinfo_layer_t::texturename</a></div><div class="ttdeci">char ** texturename</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00165">r_qshader.h:165</a></div></div>
<div class="ttc" id="astructq3shaderinfo__layer__t_html_a9d951e5819be1c6c5dc173b920d8f878"><div class="ttname"><a href="structq3shaderinfo__layer__t.html#a9d951e5819be1c6c5dc173b920d8f878">q3shaderinfo_layer_t::alphagen</a></div><div class="ttdeci">q3shaderinfo_layer_alphagen_t alphagen</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00168">r_qshader.h:168</a></div></div>
<div class="ttc" id="astructq3shaderinfo__layer__t_html_ab08f679ed8c715a21a7356079a784030"><div class="ttname"><a href="structq3shaderinfo__layer__t.html#ab08f679ed8c715a21a7356079a784030">q3shaderinfo_layer_t::rgbgen</a></div><div class="ttdeci">q3shaderinfo_layer_rgbgen_t rgbgen</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00167">r_qshader.h:167</a></div></div>
<div class="ttc" id="astructq3shaderinfo__layer__t_html_ad4a84fe3388e686320531b7e53f246b3"><div class="ttname"><a href="structq3shaderinfo__layer__t.html#ad4a84fe3388e686320531b7e53f246b3">q3shaderinfo_layer_t::alphatest</a></div><div class="ttdeci">int alphatest</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00160">r_qshader.h:160</a></div></div>
<div class="ttc" id="astructr__meshbuffer__t_html_aa3e0e0f5c67b56d5589a8a183641c7cf"><div class="ttname"><a href="structr__meshbuffer__t.html#aa3e0e0f5c67b56d5589a8a183641c7cf">r_meshbuffer_t::isdynamic</a></div><div class="ttdeci">qbool isdynamic</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00078">model_shared.h:78</a></div></div>
<div class="ttc" id="astructr__refdef__t_html_a2cd356fbc38a7343f00d88e6af61b3bc"><div class="ttname"><a href="structr__refdef__t.html#a2cd356fbc38a7343f00d88e6af61b3bc">r_refdef_t::draw2dstage</a></div><div class="ttdeci">int draw2dstage</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00457">render.h:457</a></div></div>
<div class="ttc" id="astructrtexture__t_html"><div class="ttname"><a href="structrtexture__t.html">rtexture_t</a></div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00107">r_textures.h:108</a></div></div>
<div class="ttc" id="astructshader__t_html"><div class="ttname"><a href="structshader__t.html">shader_t</a></div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00198">r_qshader.h:199</a></div></div>
<div class="ttc" id="astructshader__t_html_a03e3be6db5a60f050c26a4d01ec60701"><div class="ttname"><a href="structshader__t.html#a03e3be6db5a60f050c26a4d01ec60701">shader_t::dpnortlight</a></div><div class="ttdeci">qbool dpnortlight</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00216">r_qshader.h:216</a></div></div>
<div class="ttc" id="astructshader__t_html_a04f86d7b8f169e8cab08662e7e4e4d50"><div class="ttname"><a href="structshader__t.html#a04f86d7b8f169e8cab08662e7e4e4d50">shader_t::name</a></div><div class="ttdeci">char name[Q3PATHLENGTH]</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00200">r_qshader.h:200</a></div></div>
<div class="ttc" id="astructshader__t_html_a0d49e0ea2cbd017995a718d52778c55d"><div class="ttname"><a href="structshader__t.html#a0d49e0ea2cbd017995a718d52778c55d">shader_t::r_water_waterscroll</a></div><div class="ttdeci">float r_water_waterscroll[2]</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00237">r_qshader.h:237</a></div></div>
<div class="ttc" id="astructshader__t_html_a0f7658c88568548a3834f6ac649127f9"><div class="ttname"><a href="structshader__t.html#a0f7658c88568548a3834f6ac649127f9">shader_t::biaspolygonfactor</a></div><div class="ttdeci">float biaspolygonfactor</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00245">r_qshader.h:245</a></div></div>
<div class="ttc" id="astructshader__t_html_a123f8d2e458dd97187b30ec4a564918f"><div class="ttname"><a href="structshader__t.html#a123f8d2e458dd97187b30ec4a564918f">shader_t::dpnoshadow</a></div><div class="ttdeci">qbool dpnoshadow</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00218">r_qshader.h:218</a></div></div>
<div class="ttc" id="astructshader__t_html_a13731e5e8d7c966df81e803ae7d2368a"><div class="ttname"><a href="structshader__t.html#a13731e5e8d7c966df81e803ae7d2368a">shader_t::vertexalpha</a></div><div class="ttdeci">qbool vertexalpha</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00207">r_qshader.h:207</a></div></div>
<div class="ttc" id="astructshader__t_html_a1cfa46c8e89153960cf0d0faea6817ae"><div class="ttname"><a href="structshader__t.html#a1cfa46c8e89153960cf0d0faea6817ae">shader_t::layers</a></div><div class="ttdeci">q3shaderinfo_layer_t layers[Q3SHADER_MAXLAYERS]</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00209">r_qshader.h:209</a></div></div>
<div class="ttc" id="astructshader__t_html_a246cce197df8d819d0dd1a789e94d369"><div class="ttname"><a href="structshader__t.html#a246cce197df8d819d0dd1a789e94d369">shader_t::offsetscale</a></div><div class="ttdeci">float offsetscale</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00241">r_qshader.h:241</a></div></div>
<div class="ttc" id="astructshader__t_html_a285a128889a26a581d79f0c4b896e69e"><div class="ttname"><a href="structshader__t.html#a285a128889a26a581d79f0c4b896e69e">shader_t::transparentsort</a></div><div class="ttdeci">dptransparentsortcategory_t transparentsort</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00248">r_qshader.h:248</a></div></div>
<div class="ttc" id="astructshader__t_html_a3b7bd21491a93c9dc085ee86f04e1225"><div class="ttname"><a href="structshader__t.html#a3b7bd21491a93c9dc085ee86f04e1225">shader_t::refractcolor4f</a></div><div class="ttdeci">vec4_t refractcolor4f</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00233">r_qshader.h:233</a></div></div>
<div class="ttc" id="astructshader__t_html_a43dd7706784363402777fa517fb6ef4e"><div class="ttname"><a href="structshader__t.html#a43dd7706784363402777fa517fb6ef4e">shader_t::deforms</a></div><div class="ttdeci">q3shaderinfo_deform_t deforms[Q3MAXDEFORMS]</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00211">r_qshader.h:211</a></div></div>
<div class="ttc" id="astructshader__t_html_a49cbe4166396e1fde874324a5d05bd10"><div class="ttname"><a href="structshader__t.html#a49cbe4166396e1fde874324a5d05bd10">shader_t::r_water_wateralpha</a></div><div class="ttdeci">float r_water_wateralpha</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00236">r_qshader.h:236</a></div></div>
<div class="ttc" id="astructshader__t_html_a5480ae700bd84b9967148de0afc5d691"><div class="ttname"><a href="structshader__t.html#a5480ae700bd84b9967148de0afc5d691">shader_t::skyboxname</a></div><div class="ttdeci">char skyboxname[Q3PATHLENGTH]</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00210">r_qshader.h:210</a></div></div>
<div class="ttc" id="astructshader__t_html_a59714fd7a75c389a72602215207f82dd"><div class="ttname"><a href="structshader__t.html#a59714fd7a75c389a72602215207f82dd">shader_t::dpshadow</a></div><div class="ttdeci">qbool dpshadow</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00217">r_qshader.h:217</a></div></div>
<div class="ttc" id="astructshader__t_html_a5b56daef3c5d6d693b73dbc73a06af27"><div class="ttname"><a href="structshader__t.html#a5b56daef3c5d6d693b73dbc73a06af27">shader_t::lighting</a></div><div class="ttdeci">qbool lighting</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00206">r_qshader.h:206</a></div></div>
<div class="ttc" id="astructshader__t_html_a5b973133ac2e2d49ea28bb4f0c8fb7f9"><div class="ttname"><a href="structshader__t.html#a5b973133ac2e2d49ea28bb4f0c8fb7f9">shader_t::reflectmin</a></div><div class="ttdeci">float reflectmin</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00230">r_qshader.h:230</a></div></div>
<div class="ttc" id="astructshader__t_html_a64458e1116de103e04c3361a7a4507e0"><div class="ttname"><a href="structshader__t.html#a64458e1116de103e04c3361a7a4507e0">shader_t::reflectfactor</a></div><div class="ttdeci">float reflectfactor</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00234">r_qshader.h:234</a></div></div>
<div class="ttc" id="astructshader__t_html_a7029846f387cfc915959ebdf0c3e07ec"><div class="ttname"><a href="structshader__t.html#a7029846f387cfc915959ebdf0c3e07ec">shader_t::offsetmapping</a></div><div class="ttdeci">dpoffsetmapping_technique_t offsetmapping</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00240">r_qshader.h:240</a></div></div>
<div class="ttc" id="astructshader__t_html_a7ae697c8f21a0710687079ce9c54e081"><div class="ttname"><a href="structshader__t.html#a7ae697c8f21a0710687079ce9c54e081">shader_t::dpreflectcube</a></div><div class="ttdeci">char dpreflectcube[Q3PATHLENGTH]</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00227">r_qshader.h:227</a></div></div>
<div class="ttc" id="astructshader__t_html_a7fc5d523b40bd22a6cb6925a5324b149"><div class="ttname"><a href="structshader__t.html#a7fc5d523b40bd22a6cb6925a5324b149">shader_t::specularscalemod</a></div><div class="ttdeci">float specularscalemod</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00251">r_qshader.h:251</a></div></div>
<div class="ttc" id="astructshader__t_html_a864c77f1fa05593ec5e3befc413caa97"><div class="ttname"><a href="structshader__t.html#a864c77f1fa05593ec5e3befc413caa97">shader_t::dpmeshcollisions</a></div><div class="ttdeci">qbool dpmeshcollisions</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00221">r_qshader.h:221</a></div></div>
<div class="ttc" id="astructshader__t_html_a9244e6191cf2618c0e6d20a7d5c85ada"><div class="ttname"><a href="structshader__t.html#a9244e6191cf2618c0e6d20a7d5c85ada">shader_t::offsetbias</a></div><div class="ttdeci">float offsetbias</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00242">r_qshader.h:242</a></div></div>
<div class="ttc" id="astructshader__t_html_a94476ad1f4ec595f138a797bce2dc87a"><div class="ttname"><a href="structshader__t.html#a94476ad1f4ec595f138a797bce2dc87a">shader_t::reflectcolor4f</a></div><div class="ttdeci">vec4_t reflectcolor4f</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00235">r_qshader.h:235</a></div></div>
<div class="ttc" id="astructshader__t_html_aa438711a4d4780c646f03e5408f4eacf"><div class="ttname"><a href="structshader__t.html#aa438711a4d4780c646f03e5408f4eacf">shader_t::textureflags</a></div><div class="ttdeci">int textureflags</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00204">r_qshader.h:204</a></div></div>
<div class="ttc" id="astructshader__t_html_aa67e889c11fa842037167b0ab978c591"><div class="ttname"><a href="structshader__t.html#aa67e889c11fa842037167b0ab978c591">shader_t::dpshaderkill</a></div><div class="ttdeci">qbool dpshaderkill</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00224">r_qshader.h:224</a></div></div>
<div class="ttc" id="astructshader__t_html_aa96c8223c06587a7ca1c30030a373bd0"><div class="ttname"><a href="structshader__t.html#aa96c8223c06587a7ca1c30030a373bd0">shader_t::numlayers</a></div><div class="ttdeci">int numlayers</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00205">r_qshader.h:205</a></div></div>
<div class="ttc" id="astructshader__t_html_aadcb60b0d24f7bfc0cca20f59dfbcaf4"><div class="ttname"><a href="structshader__t.html#aadcb60b0d24f7bfc0cca20f59dfbcaf4">shader_t::specularpowermod</a></div><div class="ttdeci">float specularpowermod</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00252">r_qshader.h:252</a></div></div>
<div class="ttc" id="astructshader__t_html_ab8ce3230e062308ee4ea9d0da945c210"><div class="ttname"><a href="structshader__t.html#ab8ce3230e062308ee4ea9d0da945c210">shader_t::surfaceflags</a></div><div class="ttdeci">int surfaceflags</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00203">r_qshader.h:203</a></div></div>
<div class="ttc" id="astructshader__t_html_ab9eeca8e5121527e203776c4d333b761"><div class="ttname"><a href="structshader__t.html#ab9eeca8e5121527e203776c4d333b761">shader_t::textureblendalpha</a></div><div class="ttdeci">qbool textureblendalpha</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00208">r_qshader.h:208</a></div></div>
<div class="ttc" id="astructshader__t_html_abe620e7927be8c1122e5615a6988df14"><div class="ttname"><a href="structshader__t.html#abe620e7927be8c1122e5615a6988df14">shader_t::refractfactor</a></div><div class="ttdeci">float refractfactor</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00232">r_qshader.h:232</a></div></div>
<div class="ttc" id="astructshader__t_html_adff73628f26b39230df9d4b59a16139a"><div class="ttname"><a href="structshader__t.html#adff73628f26b39230df9d4b59a16139a">shader_t::surfaceparms</a></div><div class="ttdeci">int surfaceparms</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00202">r_qshader.h:202</a></div></div>
<div class="ttc" id="astructshader__t_html_ae914299869417c6f3b6c080c09bb8b31"><div class="ttname"><a href="structshader__t.html#ae914299869417c6f3b6c080c09bb8b31">shader_t::biaspolygonoffset</a></div><div class="ttdeci">float biaspolygonoffset</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00245">r_qshader.h:245</a></div></div>
<div class="ttc" id="astructshader__t_html_af24f9ce77f6e7db2105e3ad9676aaf6b"><div class="ttname"><a href="structshader__t.html#af24f9ce77f6e7db2105e3ad9676aaf6b">shader_t::reflectmax</a></div><div class="ttdeci">float reflectmax</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00231">r_qshader.h:231</a></div></div>
<div class="ttc" id="astructshader__t_html_afc99f5a477692440bc9b1dfd7de3a673"><div class="ttname"><a href="structshader__t.html#afc99f5a477692440bc9b1dfd7de3a673">shader_t::rtlightambient</a></div><div class="ttdeci">float rtlightambient</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00255">r_qshader.h:255</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html"><div class="ttname"><a href="structshadowmesh__t.html">shadowmesh_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00159">model_shared.h:160</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a40d64ff8a89ceb6e4dd1c458b46c8fd1"><div class="ttname"><a href="structshadowmesh__t.html#a40d64ff8a89ceb6e4dd1c458b46c8fd1">shadowmesh_t::vertexhashtable</a></div><div class="ttdeci">shadowmeshvertexhash_t ** vertexhashtable</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00183">model_shared.h:183</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a5448fa0c2d0c1765fb988c37fc9b820a"><div class="ttname"><a href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">shadowmesh_t::element3i</a></div><div class="ttdeci">int * element3i</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00171">model_shared.h:171</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a5683380ac9e160b2e899fe82aac36b90"><div class="ttname"><a href="structshadowmesh__t.html#a5683380ac9e160b2e899fe82aac36b90">shadowmesh_t::element3s_indexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * element3s_indexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00175">model_shared.h:175</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a582fa5838add0a8d91d5ff2f0ed6b4fb"><div class="ttname"><a href="structshadowmesh__t.html#a582fa5838add0a8d91d5ff2f0ed6b4fb">shadowmesh_t::maxtriangles</a></div><div class="ttdeci">int maxtriangles</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00170">model_shared.h:170</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a5cbf7b4739bcd39af044e58a2cf07d92"><div class="ttname"><a href="structshadowmesh__t.html#a5cbf7b4739bcd39af044e58a2cf07d92">shadowmesh_t::mempool</a></div><div class="ttdeci">struct mempool_s * mempool</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00161">model_shared.h:161</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a6a9b587fbcf8ef7a44140c46c8d2f4e1"><div class="ttname"><a href="structshadowmesh__t.html#a6a9b587fbcf8ef7a44140c46c8d2f4e1">shadowmesh_t::vbo_vertexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * vbo_vertexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00166">model_shared.h:166</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a9454d740852d83573778a16f084c003a"><div class="ttname"><a href="structshadowmesh__t.html#a9454d740852d83573778a16f084c003a">shadowmesh_t::maxverts</a></div><div class="ttdeci">int maxverts</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00164">model_shared.h:164</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_aa32211c31106d7f38d1404a7a3403d19"><div class="ttname"><a href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">shadowmesh_t::vertex3f</a></div><div class="ttdeci">float * vertex3f</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00165">model_shared.h:165</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_ab541863376b7d50d86fc7e9feadfde42"><div class="ttname"><a href="structshadowmesh__t.html#ab541863376b7d50d86fc7e9feadfde42">shadowmesh_t::element3i_indexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * element3i_indexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00172">model_shared.h:172</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_ab619fa0351de28e3e85368c9f6919482"><div class="ttname"><a href="structshadowmesh__t.html#ab619fa0351de28e3e85368c9f6919482">shadowmesh_t::element3s</a></div><div class="ttdeci">unsigned short * element3s</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00174">model_shared.h:174</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_aba509bf2aa5e66a84b969a224f96d5d5"><div class="ttname"><a href="structshadowmesh__t.html#aba509bf2aa5e66a84b969a224f96d5d5">shadowmesh_t::vbooffset_vertex3f</a></div><div class="ttdeci">int vbooffset_vertex3f</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00167">model_shared.h:167</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_abd85f7289c2c784f0a0941b88ab7199e"><div class="ttname"><a href="structshadowmesh__t.html#abd85f7289c2c784f0a0941b88ab7199e">shadowmesh_t::vertexhashentries</a></div><div class="ttdeci">shadowmeshvertexhash_t * vertexhashentries</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00183">model_shared.h:183</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_adc7a8949295560385e51a81d603e5e3b"><div class="ttname"><a href="structshadowmesh__t.html#adc7a8949295560385e51a81d603e5e3b">shadowmesh_t::numtriangles</a></div><div class="ttdeci">int numtriangles</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00169">model_shared.h:169</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_af413bcf52c779a36abce2af7ebfa31cf"><div class="ttname"><a href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">shadowmesh_t::numverts</a></div><div class="ttdeci">int numverts</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00163">model_shared.h:163</a></div></div>
<div class="ttc" id="astructshadowmeshvertexhash__t_html"><div class="ttname"><a href="structshadowmeshvertexhash__t.html">shadowmeshvertexhash_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00153">model_shared.h:154</a></div></div>
<div class="ttc" id="astructshadowmeshvertexhash__t_html_a55434eb8d676103ac8288bfb73d1898d"><div class="ttname"><a href="structshadowmeshvertexhash__t.html#a55434eb8d676103ac8288bfb73d1898d">shadowmeshvertexhash_t::next</a></div><div class="ttdeci">struct shadowmeshvertexhash_s * next</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00155">model_shared.h:155</a></div></div>
<div class="ttc" id="astructskinfile__t_html"><div class="ttname"><a href="structskinfile__t.html">skinfile_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00650">model_shared.h:651</a></div></div>
<div class="ttc" id="astructskinfile__t_html_a8b63a5aeae66db96d58fa1c1e847d405"><div class="ttname"><a href="structskinfile__t.html#a8b63a5aeae66db96d58fa1c1e847d405">skinfile_t::next</a></div><div class="ttdeci">struct skinfile_s * next</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00652">model_shared.h:652</a></div></div>
<div class="ttc" id="astructskinfileitem__t_html"><div class="ttname"><a href="structskinfileitem__t.html">skinfileitem_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00642">model_shared.h:643</a></div></div>
<div class="ttc" id="astructskinframe__t_html"><div class="ttname"><a href="structskinframe__t.html">skinframe_t</a></div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00125">r_textures.h:126</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html"><div class="ttname"><a href="structsurfmesh__t.html">surfmesh_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00086">model_shared.h:87</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a0064f2925b91731163e286f6ff0f5a76"><div class="ttname"><a href="structsurfmesh__t.html#a0064f2925b91731163e286f6ff0f5a76">surfmesh_t::data_svector3f_vertexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * data_svector3f_vertexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00113">model_shared.h:113</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a092c9af0ece66606a1a46ddc256c87d0"><div class="ttname"><a href="structsurfmesh__t.html#a092c9af0ece66606a1a46ddc256c87d0">surfmesh_t::data_normal3f_bufferoffset</a></div><div class="ttdeci">int data_normal3f_bufferoffset</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00118">model_shared.h:118</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a0fcecbac688c51080a69cce25e1e1aa1"><div class="ttname"><a href="structsurfmesh__t.html#a0fcecbac688c51080a69cce25e1e1aa1">surfmesh_t::data_element3s_bufferoffset</a></div><div class="ttdeci">int data_element3s_bufferoffset</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00109">model_shared.h:109</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a13b427ce0ede7a7346713986ff3596a9"><div class="ttname"><a href="structsurfmesh__t.html#a13b427ce0ede7a7346713986ff3596a9">surfmesh_t::data_skeletalweight4ub_bufferoffset</a></div><div class="ttdeci">int data_skeletalweight4ub_bufferoffset</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00128">model_shared.h:128</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a14978807f299ff4eb08fbc95f12f4390"><div class="ttname"><a href="structsurfmesh__t.html#a14978807f299ff4eb08fbc95f12f4390">surfmesh_t::data_lightmapcolor4f_vertexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * data_lightmapcolor4f_vertexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00123">model_shared.h:123</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a1fc3a10501c13b8da40b66116d8818b7"><div class="ttname"><a href="structsurfmesh__t.html#a1fc3a10501c13b8da40b66116d8818b7">surfmesh_t::data_normal3f_vertexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * data_normal3f_vertexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00117">model_shared.h:117</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a275c764d172dfe1774facdb3ed5546fd"><div class="ttname"><a href="structsurfmesh__t.html#a275c764d172dfe1774facdb3ed5546fd">surfmesh_t::data_element3i_bufferoffset</a></div><div class="ttdeci">int data_element3i_bufferoffset</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00106">model_shared.h:106</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a29d3f99e62735e29f5c4a9b2f30178fa"><div class="ttname"><a href="structsurfmesh__t.html#a29d3f99e62735e29f5c4a9b2f30178fa">surfmesh_t::data_texcoordlightmap2f_bufferoffset</a></div><div class="ttdeci">int data_texcoordlightmap2f_bufferoffset</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00122">model_shared.h:122</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a30f9cd35774cd30ddb4919a89d44f9c9"><div class="ttname"><a href="structsurfmesh__t.html#a30f9cd35774cd30ddb4919a89d44f9c9">surfmesh_t::data_vertexhash</a></div><div class="ttdeci">int * data_vertexhash</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00146">model_shared.h:146</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a359a49d4cf59430ef6aa29492b10c488"><div class="ttname"><a href="structsurfmesh__t.html#a359a49d4cf59430ef6aa29492b10c488">surfmesh_t::data_skeletalindex4ub_bufferoffset</a></div><div class="ttdeci">int data_skeletalindex4ub_bufferoffset</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00126">model_shared.h:126</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a41ce86dc0eefb29272f7d1e77238200a"><div class="ttname"><a href="structsurfmesh__t.html#a41ce86dc0eefb29272f7d1e77238200a">surfmesh_t::data_svector3f_bufferoffset</a></div><div class="ttdeci">int data_svector3f_bufferoffset</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00114">model_shared.h:114</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a43cdbcdab2d03322d1008bf50de6f353"><div class="ttname"><a href="structsurfmesh__t.html#a43cdbcdab2d03322d1008bf50de6f353">surfmesh_t::data_lightmapcolor4f</a></div><div class="ttdeci">float * data_lightmapcolor4f</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00100">model_shared.h:100</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a452cf124552a1501be5342525d5aa124"><div class="ttname"><a href="structsurfmesh__t.html#a452cf124552a1501be5342525d5aa124">surfmesh_t::data_skeletalweight4ub</a></div><div class="ttdeci">unsigned char * data_skeletalweight4ub</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00102">model_shared.h:102</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a454d82b1d9cdb4d96ece8b89c4ecbc7e"><div class="ttname"><a href="structsurfmesh__t.html#a454d82b1d9cdb4d96ece8b89c4ecbc7e">surfmesh_t::num_vertices</a></div><div class="ttdeci">int num_vertices</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00093">model_shared.h:93</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a5955263e1adbb8dedcfedf7caba77971"><div class="ttname"><a href="structsurfmesh__t.html#a5955263e1adbb8dedcfedf7caba77971">surfmesh_t::data_svector3f</a></div><div class="ttdeci">float * data_svector3f</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00095">model_shared.h:95</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a5a23f7f679399e0588c64df838a79779"><div class="ttname"><a href="structsurfmesh__t.html#a5a23f7f679399e0588c64df838a79779">surfmesh_t::data_skeletalindex4ub</a></div><div class="ttdeci">unsigned char * data_skeletalindex4ub</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00101">model_shared.h:101</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a5d967e3e6fc6a8a2fd27a6540a1caaa3"><div class="ttname"><a href="structsurfmesh__t.html#a5d967e3e6fc6a8a2fd27a6540a1caaa3">surfmesh_t::max_vertices</a></div><div class="ttdeci">int max_vertices</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00147">model_shared.h:147</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a6479eddc63fd441c963b4204d5da13d6"><div class="ttname"><a href="structsurfmesh__t.html#a6479eddc63fd441c963b4204d5da13d6">surfmesh_t::max_triangles</a></div><div class="ttdeci">int max_triangles</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00148">model_shared.h:148</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a6c79b7bfa30a7309fcfe31093edcfe06"><div class="ttname"><a href="structsurfmesh__t.html#a6c79b7bfa30a7309fcfe31093edcfe06">surfmesh_t::data_element3i</a></div><div class="ttdeci">int * data_element3i</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00090">model_shared.h:90</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a6ea70bbf33859b9ab111c9b875b34c1a"><div class="ttname"><a href="structsurfmesh__t.html#a6ea70bbf33859b9ab111c9b875b34c1a">surfmesh_t::data_element3s</a></div><div class="ttdeci">unsigned short * data_element3s</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00107">model_shared.h:107</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a7767026390ac39c88f7ce4d6f6432bfd"><div class="ttname"><a href="structsurfmesh__t.html#a7767026390ac39c88f7ce4d6f6432bfd">surfmesh_t::data_texcoordtexture2f_vertexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * data_texcoordtexture2f_vertexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00119">model_shared.h:119</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a7acee012733eb5e093982690193053ed"><div class="ttname"><a href="structsurfmesh__t.html#a7acee012733eb5e093982690193053ed">surfmesh_t::data_skeletalindex4ub_vertexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * data_skeletalindex4ub_vertexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00125">model_shared.h:125</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a7e8415435609398f52b4aff9f553ae20"><div class="ttname"><a href="structsurfmesh__t.html#a7e8415435609398f52b4aff9f553ae20">surfmesh_t::data_vertex3f</a></div><div class="ttdeci">float * data_vertex3f</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00094">model_shared.h:94</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a7fc323b763071fa72a24bd51b88e1f0c"><div class="ttname"><a href="structsurfmesh__t.html#a7fc323b763071fa72a24bd51b88e1f0c">surfmesh_t::data_tvector3f_vertexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * data_tvector3f_vertexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00115">model_shared.h:115</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a85cf7a011550b759899f963c1f68c98b"><div class="ttname"><a href="structsurfmesh__t.html#a85cf7a011550b759899f963c1f68c98b">surfmesh_t::data_element3i_indexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * data_element3i_indexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00105">model_shared.h:105</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a8e5cfd0075e30165db1a60a468201937"><div class="ttname"><a href="structsurfmesh__t.html#a8e5cfd0075e30165db1a60a468201937">surfmesh_t::data_tvector3f</a></div><div class="ttdeci">float * data_tvector3f</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00096">model_shared.h:96</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_a9fcffd7bd378736ae8fb0891651507de"><div class="ttname"><a href="structsurfmesh__t.html#a9fcffd7bd378736ae8fb0891651507de">surfmesh_t::data_blendweights</a></div><div class="ttdeci">struct blendweights_s * data_blendweights</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00138">model_shared.h:138</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_aa554d38b12c33f5c8903d189d5872496"><div class="ttname"><a href="structsurfmesh__t.html#aa554d38b12c33f5c8903d189d5872496">surfmesh_t::data_lightmapoffsets</a></div><div class="ttdeci">int * data_lightmapoffsets</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00103">model_shared.h:103</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_aa7d8570bd6e81d63b4ae584144e091ee"><div class="ttname"><a href="structsurfmesh__t.html#aa7d8570bd6e81d63b4ae584144e091ee">surfmesh_t::num_vertexhashsize</a></div><div class="ttdeci">int num_vertexhashsize</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00145">model_shared.h:145</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_ab13056777e09fa6109ab2c528389e0a9"><div class="ttname"><a href="structsurfmesh__t.html#ab13056777e09fa6109ab2c528389e0a9">surfmesh_t::data_texcoordtexture2f_bufferoffset</a></div><div class="ttdeci">int data_texcoordtexture2f_bufferoffset</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00120">model_shared.h:120</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_ab1541bccdbf92ee0c4310417ddec6af1"><div class="ttname"><a href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">surfmesh_t::num_triangles</a></div><div class="ttdeci">int num_triangles</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00089">model_shared.h:89</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_ab251f4a29a88b99365ea3a65a49700f6"><div class="ttname"><a href="structsurfmesh__t.html#ab251f4a29a88b99365ea3a65a49700f6">surfmesh_t::data_tvector3f_bufferoffset</a></div><div class="ttdeci">int data_tvector3f_bufferoffset</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00116">model_shared.h:116</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_acc34f19933b25ec4138101d2da7c0402"><div class="ttname"><a href="structsurfmesh__t.html#acc34f19933b25ec4138101d2da7c0402">surfmesh_t::data_texcoordlightmap2f_vertexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * data_texcoordlightmap2f_vertexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00121">model_shared.h:121</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_ad51f0f14598798ae166985f02a6378e5"><div class="ttname"><a href="structsurfmesh__t.html#ad51f0f14598798ae166985f02a6378e5">surfmesh_t::blends</a></div><div class="ttdeci">unsigned short * blends</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00140">model_shared.h:140</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_ae20f7ffe94f47df81dac465ec2888d2f"><div class="ttname"><a href="structsurfmesh__t.html#ae20f7ffe94f47df81dac465ec2888d2f">surfmesh_t::data_skeletalweight4ub_vertexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * data_skeletalweight4ub_vertexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00127">model_shared.h:127</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_ae5d89f1c30eff8f6a177e74504e20d9c"><div class="ttname"><a href="structsurfmesh__t.html#ae5d89f1c30eff8f6a177e74504e20d9c">surfmesh_t::data_vertex3f_bufferoffset</a></div><div class="ttdeci">int data_vertex3f_bufferoffset</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00112">model_shared.h:112</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_aeb555f8524bab5e10a1ca22c3899c2e7"><div class="ttname"><a href="structsurfmesh__t.html#aeb555f8524bab5e10a1ca22c3899c2e7">surfmesh_t::data_lightmapcolor4f_bufferoffset</a></div><div class="ttdeci">int data_lightmapcolor4f_bufferoffset</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00124">model_shared.h:124</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_aee9ff7e902169022620a5cdf6f7ce992"><div class="ttname"><a href="structsurfmesh__t.html#aee9ff7e902169022620a5cdf6f7ce992">surfmesh_t::data_texcoordtexture2f</a></div><div class="ttdeci">float * data_texcoordtexture2f</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00098">model_shared.h:98</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_af47d08768f0e0a846c272a9a8d443d03"><div class="ttname"><a href="structsurfmesh__t.html#af47d08768f0e0a846c272a9a8d443d03">surfmesh_t::data_element3s_indexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * data_element3s_indexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00108">model_shared.h:108</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_af7ab21ac40dc848a7238340260e106f4"><div class="ttname"><a href="structsurfmesh__t.html#af7ab21ac40dc848a7238340260e106f4">surfmesh_t::data_normal3f</a></div><div class="ttdeci">float * data_normal3f</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00097">model_shared.h:97</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_af8f455c3a1913bb8ba78da107dd8c7d8"><div class="ttname"><a href="structsurfmesh__t.html#af8f455c3a1913bb8ba78da107dd8c7d8">surfmesh_t::data_texcoordlightmap2f</a></div><div class="ttdeci">float * data_texcoordlightmap2f</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00099">model_shared.h:99</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_af9087f3e468e48dd0bf2a23bbc5efd4f"><div class="ttname"><a href="structsurfmesh__t.html#af9087f3e468e48dd0bf2a23bbc5efd4f">surfmesh_t::data_vertex3f_vertexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * data_vertex3f_vertexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00111">model_shared.h:111</a></div></div>
<div class="ttc" id="astructsvbsp__node__t_html"><div class="ttname"><a href="structsvbsp__node__t.html">svbsp_node_t</a></div><div class="ttdef"><b>Definition</b> <a href="svbsp_8h_source.html#l00008">svbsp.h:9</a></div></div>
<div class="ttc" id="astructsvbsp__node__t_html_a3f4c54a87630592f50e64e65f50a855e"><div class="ttname"><a href="structsvbsp__node__t.html#a3f4c54a87630592f50e64e65f50a855e">svbsp_node_t::children</a></div><div class="ttdeci">int children[2]</div><div class="ttdef"><b>Definition</b> <a href="svbsp_8h_source.html#l00015">svbsp.h:15</a></div></div>
<div class="ttc" id="astructsvbsp__t_html"><div class="ttname"><a href="structsvbsp__t.html">svbsp_t</a></div><div class="ttdef"><b>Definition</b> <a href="svbsp_8h_source.html#l00021">svbsp.h:22</a></div></div>
<div class="ttc" id="astructsvbsp__t_html_a270605f3b846bb9e4bd10bdf221d9803"><div class="ttname"><a href="structsvbsp__t.html#a270605f3b846bb9e4bd10bdf221d9803">svbsp_t::numnodes</a></div><div class="ttdeci">int numnodes</div><div class="ttdef"><b>Definition</b> <a href="svbsp_8h_source.html#l00026">svbsp.h:26</a></div></div>
<div class="ttc" id="astructsvbsp__t_html_a78e9fbe196989f7a666cfb9c38ab78b4"><div class="ttname"><a href="structsvbsp__t.html#a78e9fbe196989f7a666cfb9c38ab78b4">svbsp_t::ranoutofnodes</a></div><div class="ttdeci">int ranoutofnodes</div><div class="ttdef"><b>Definition</b> <a href="svbsp_8h_source.html#l00032">svbsp.h:32</a></div></div>
<div class="ttc" id="astructsvbsp__t_html_ac375fa02dbf20f6da54d4a2caa469f96"><div class="ttname"><a href="structsvbsp__t.html#ac375fa02dbf20f6da54d4a2caa469f96">svbsp_t::nodes</a></div><div class="ttdeci">svbsp_node_t * nodes</div><div class="ttdef"><b>Definition</b> <a href="svbsp_8h_source.html#l00030">svbsp.h:30</a></div></div>
<div class="ttc" id="astructtexture__shaderpass__t_html"><div class="ttname"><a href="structtexture__shaderpass__t.html">texture_shaderpass_t</a></div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00260">r_qshader.h:261</a></div></div>
<div class="ttc" id="astructtexture__shaderpass__t_html_a774f38966b8fcac6fe891f9a9ffe7bb9"><div class="ttname"><a href="structtexture__shaderpass__t.html#a774f38966b8fcac6fe891f9a9ffe7bb9">texture_shaderpass_t::alphatest</a></div><div class="ttdeci">qbool alphatest</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00262">r_qshader.h:262</a></div></div>
<div class="ttc" id="astructtexture__shaderpass__t_html_a9202519684b0bc068010eed98acba93d"><div class="ttname"><a href="structtexture__shaderpass__t.html#a9202519684b0bc068010eed98acba93d">texture_shaderpass_t::skinframes</a></div><div class="ttdeci">struct skinframe_s * skinframes[TEXTURE_MAXFRAMES]</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00265">r_qshader.h:265</a></div></div>
<div class="ttc" id="astructtexture__shaderpass__t_html_ac2de84fdbf6091c1b9f75cc15fbc1077"><div class="ttname"><a href="structtexture__shaderpass__t.html#ac2de84fdbf6091c1b9f75cc15fbc1077">texture_shaderpass_t::framerate</a></div><div class="ttdeci">float framerate</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00263">r_qshader.h:263</a></div></div>
<div class="ttc" id="astructtexture__shaderpass__t_html_ac4f878094f06ddd8a7cf035b0282e12b"><div class="ttname"><a href="structtexture__shaderpass__t.html#ac4f878094f06ddd8a7cf035b0282e12b">texture_shaderpass_t::numframes</a></div><div class="ttdeci">int numframes</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00264">r_qshader.h:264</a></div></div>
<div class="ttc" id="astructtexture__t_html"><div class="ttname"><a href="structtexture__t.html">texture_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00187">model_shared.h:188</a></div></div>
<div class="ttc" id="astructtexture__t_html_a16e0e9e04e623cfdfcc47724e4fc2731"><div class="ttname"><a href="structtexture__t.html#a16e0e9e04e623cfdfcc47724e4fc2731">texture_t::shaderpasses</a></div><div class="ttdeci">texture_shaderpass_t * shaderpasses[Q3SHADER_MAXLAYERS]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00243">model_shared.h:243</a></div></div>
<div class="ttc" id="astructtexture__t_html_a3cf738577a78c45a3c19a2e1e649f804"><div class="ttname"><a href="structtexture__t.html#a3cf738577a78c45a3c19a2e1e649f804">texture_t::currentmaterialflags</a></div><div class="ttdeci">int currentmaterialflags</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00201">model_shared.h:201</a></div></div>
<div class="ttc" id="astructtexture__t_html_a8095d6a5de58938c8ef472c95eca6496"><div class="ttname"><a href="structtexture__t.html#a8095d6a5de58938c8ef472c95eca6496">texture_t::basematerialflags</a></div><div class="ttdeci">int basematerialflags</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00199">model_shared.h:199</a></div></div>
<div class="ttc" id="astructtexture__t_html_ab58f580cd561f4e52a20e92098a06e2f"><div class="ttname"><a href="structtexture__t.html#ab58f580cd561f4e52a20e92098a06e2f">texture_t::name</a></div><div class="ttdeci">char name[64]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00190">model_shared.h:190</a></div></div>
<div class="ttc" id="astructtexture__t_html_ac3bdb8fb6f5bdd8d31cb2bec345df9eb"><div class="ttname"><a href="structtexture__t.html#ac3bdb8fb6f5bdd8d31cb2bec345df9eb">texture_t::mesh_drawflag</a></div><div class="ttdeci">int mesh_drawflag</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00336">model_shared.h:336</a></div></div>
<div class="ttc" id="astructtexture__t_html_ad5ff98c9436319f4471d9e6dda0428ed"><div class="ttname"><a href="structtexture__t.html#ad5ff98c9436319f4471d9e6dda0428ed">texture_t::mesh_defaulttexflags</a></div><div class="ttdeci">int mesh_defaulttexflags</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00337">model_shared.h:337</a></div></div>
<div class="ttc" id="astructtexture__t_html_afa08453814c5f7e285600818d42cadf0"><div class="ttname"><a href="structtexture__t.html#afa08453814c5f7e285600818d42cadf0">texture_t::mesh_defaultmaterialflags</a></div><div class="ttdeci">int mesh_defaultmaterialflags</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00338">model_shared.h:338</a></div></div>
<div class="ttc" id="astructtexture__t_html_aff4828a20cb181943119b7c64e3540b0"><div class="ttname"><a href="structtexture__t.html#aff4828a20cb181943119b7c64e3540b0">texture_t::customblendfunc</a></div><div class="ttdeci">int customblendfunc[2]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00291">model_shared.h:291</a></div></div>
<div class="ttc" id="astructtrace__t_html"><div class="ttname"><a href="structtrace__t.html">trace_t</a></div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00021">collision.h:22</a></div></div>
<div class="ttc" id="astructtrace__t_html_a37cb2b7f426f5a76265ddb8e7918a099"><div class="ttname"><a href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">trace_t::fraction</a></div><div class="ttdeci">double fraction</div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00040">collision.h:40</a></div></div>
<div class="ttc" id="astructviddef__t_html_a06a669057f01a0d02c34aa0ebc781a54"><div class="ttname"><a href="structviddef__t.html#a06a669057f01a0d02c34aa0ebc781a54">viddef_t::maxtexturesize_2d</a></div><div class="ttdeci">unsigned int maxtexturesize_2d</div><div class="ttdef"><b>Definition</b> <a href="vid_8h_source.html#l00090">vid.h:90</a></div></div>
<div class="ttc" id="asv__user_8c_html_a6cb5d7464231c3110d95905fb7d83cc7"><div class="ttname"><a href="sv__user_8c.html#a6cb5d7464231c3110d95905fb7d83cc7">forward</a></div><div class="ttdeci">static vec3_t forward</div><div class="ttdef"><b>Definition</b> <a href="sv__user_8c_source.html#l00305">sv_user.c:305</a></div></div>
<div class="ttc" id="asv__user_8c_html_adf3413f94f96a6089d7f6c71f33ac347"><div class="ttname"><a href="sv__user_8c.html#adf3413f94f96a6089d7f6c71f33ac347">up</a></div><div class="ttdeci">static vec3_t up</div><div class="ttdef"><b>Definition</b> <a href="sv__user_8c_source.html#l00305">sv_user.c:305</a></div></div>
<div class="ttc" id="asvbsp_8c_html_a0d77b69cc4ebcc825d218bd26a181922"><div class="ttname"><a href="svbsp_8c.html#a0d77b69cc4ebcc825d218bd26a181922">SVBSP_Init</a></div><div class="ttdeci">void SVBSP_Init(svbsp_t *b, const float *origin, int maxnodes, svbsp_node_t *nodes)</div><div class="ttdef"><b>Definition</b> <a href="svbsp_8c_source.html#l00099">svbsp.c:99</a></div></div>
<div class="ttc" id="asvbsp_8c_html_a92b7a96f58dca72dcdb8b59360ae580b"><div class="ttname"><a href="svbsp_8c.html#a92b7a96f58dca72dcdb8b59360ae580b">SVBSP_AddPolygon</a></div><div class="ttdeci">int SVBSP_AddPolygon(svbsp_t *b, int numpoints, const float *points, int insertoccluder, void(*fragmentcallback)(void *fragmentcallback_pointer1, int fragmentcallback_number1, svbsp_t *b, int numpoints, const float *points), void *fragmentcallback_pointer1, int fragmentcallback_number1)</div><div class="ttdef"><b>Definition</b> <a href="svbsp_8c_source.html#l00403">svbsp.c:403</a></div></div>
<div class="ttc" id="avid_8h_html_aa5f05f6f860c65da5834d6ff3d5655af"><div class="ttname"><a href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a></div><div class="ttdeci">viddef_t vid</div><div class="ttdef"><b>Definition</b> <a href="vid__shared_8c_source.html#l00064">vid_shared.c:64</a></div></div>
<div class="ttc" id="azone_8c_html_a1b1599deb1c7db8a64afe5cf4cdbd539"><div class="ttname"><a href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a></div><div class="ttdeci">size_t Mem_ExpandableArray_IndexRange(const memexpandablearray_t *l)</div><div class="ttdef"><b>Definition</b> <a href="zone_8c_source.html#l00763">zone.c:763</a></div></div>
<div class="ttc" id="azone_8c_html_a211e7367323b1791e87715797bdee714"><div class="ttname"><a href="zone_8c.html#a211e7367323b1791e87715797bdee714">Mem_ExpandableArray_NewArray</a></div><div class="ttdeci">void Mem_ExpandableArray_NewArray(memexpandablearray_t *l, mempool_t *mempool, size_t recordsize, int numrecordsperarray)</div><div class="ttdef"><b>Definition</b> <a href="zone_8c_source.html#l00675">zone.c:675</a></div></div>
<div class="ttc" id="azone_8c_html_a6809e6e38abd59c5583dc9b83843a7ee"><div class="ttname"><a href="zone_8c.html#a6809e6e38abd59c5583dc9b83843a7ee">Mem_ExpandableArray_FreeRecord</a></div><div class="ttdeci">void Mem_ExpandableArray_FreeRecord(memexpandablearray_t *l, void *record)</div><div class="ttdef"><b>Definition</b> <a href="zone_8c_source.html#l00743">zone.c:743</a></div></div>
<div class="ttc" id="azone_8c_html_a6e8351ce990cc9c3c7eb1c6ac8c91921"><div class="ttname"><a href="zone_8c.html#a6e8351ce990cc9c3c7eb1c6ac8c91921">Mem_ExpandableArray_AllocRecord</a></div><div class="ttdeci">void * Mem_ExpandableArray_AllocRecord(memexpandablearray_t *l)</div><div class="ttdef"><b>Definition</b> <a href="zone_8c_source.html#l00695">zone.c:695</a></div></div>
<div class="ttc" id="azone_8c_html_ac3c570c2a60e19b44ed16e7e0ba844fa"><div class="ttname"><a href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a></div><div class="ttdeci">void * Mem_ExpandableArray_RecordAtIndex(const memexpandablearray_t *l, size_t index)</div><div class="ttdef"><b>Definition</b> <a href="zone_8c_source.html#l00780">zone.c:780</a></div></div>
<div class="ttc" id="azone_8c_html_ac742acee1395c22ccf6d2370d465f844"><div class="ttname"><a href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a></div><div class="ttdeci">mempool_t * tempmempool</div><div class="ttdef"><b>Definition</b> <a href="zone_8c_source.html#l00794">zone.c:794</a></div></div>
<div class="ttc" id="azone_8h_html_a06bb588bb8d0406e051f04c1ca723d28"><div class="ttname"><a href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a></div><div class="ttdeci">#define Mem_Free(mem)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00096">zone.h:96</a></div></div>
<div class="ttc" id="azone_8h_html_a07374e605d328a588d2d738a56608ead"><div class="ttname"><a href="zone_8h.html#a07374e605d328a588d2d738a56608ead">Mem_FreePool</a></div><div class="ttdeci">#define Mem_FreePool(pool)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00105">zone.h:105</a></div></div>
<div class="ttc" id="azone_8h_html_a1f8b0c54fe3d32858da2b13a4f7e5783"><div class="ttname"><a href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a></div><div class="ttdeci">#define Mem_Alloc(pool, size)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00092">zone.h:92</a></div></div>
<div class="ttc" id="azone_8h_html_a35deb8ef816a08fb1bc8feac8db020c5"><div class="ttname"><a href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a></div><div class="ttdeci">#define Z_Malloc(size)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00154">zone.h:154</a></div></div>
<div class="ttc" id="azone_8h_html_a7971beb752868216b6887b77086ce57b"><div class="ttname"><a href="zone_8h.html#a7971beb752868216b6887b77086ce57b">Mem_strdup</a></div><div class="ttdeci">#define Mem_strdup(pool, s)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00097">zone.h:97</a></div></div>
<div class="ttc" id="azone_8h_html_a7da6ffdd01b3d31cb7c89e68fad87d0d"><div class="ttname"><a href="zone_8h.html#a7da6ffdd01b3d31cb7c89e68fad87d0d">Mem_AllocPool</a></div><div class="ttdeci">#define Mem_AllocPool(name, flags, parent)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00104">zone.h:104</a></div></div>
<div class="ttc" id="azone_8h_html_aa613261ffbc429e7212d3e9e42de9644"><div class="ttname"><a href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a></div><div class="ttdeci">#define Mem_Realloc(pool, data, size)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00094">zone.h:94</a></div></div>
<div class="ttc" id="azone_8h_html_abbce8ea44a12486a6b59f31f02bab5ee"><div class="ttname"><a href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a></div><div class="ttdeci">#define Z_Free(data)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00157">zone.h:157</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="model__shared_8c.html">model_shared.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
