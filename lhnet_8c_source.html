<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DarkPlaces: lhnet.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-customisations.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="darkplaces48x48.png"/></td>
  <td id="projectalign">
   <div id="projectname">DarkPlaces
   </div>
   <div id="projectbrief">Game engine based on the Quake 1 engine by id Software, developed by LadyHavoc</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('lhnet_8c_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">lhnet.c</div></div>
</div><!--header-->
<div class="contents">
<a href="lhnet_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// Written by Ashley Rose Hale (LadyHavoc) 2003-06-15 and placed into public domain.</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span> </div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor"># ifdef _MSC_VER</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#  pragma comment(lib, &quot;ws2_32.lib&quot;)</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor"># endif</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor"># ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">// Windows XP or higher is required for getaddrinfo, but the inclusion of wspiapi provides fallbacks for older versions</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#  define _WIN32_WINNT 0x0501</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor"># endif</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">// To increase FD_SETSIZE (defaults to 64 on Windows)</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">// it must be defined before the first inclusion of winsock2.h</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor"># define FD_SETSIZE 1024 </span><span class="comment">// Matches Linux and BSD defaults</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor"># include &lt;winsock2.h&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor"># include &lt;ws2tcpip.h&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor"># ifdef USE_WSPIAPI_H</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#  include &lt;wspiapi.h&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor"># endif</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#ifndef STANDALONETEST</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;<a class="code" href="darkplaces_8h.html">darkplaces.h</a>&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#ifndef WIN32</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &lt;sys/socket.h&gt;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &lt;sys/ioctl.h&gt;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &lt;netdb.h&gt;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &lt;netinet/in.h&gt;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &lt;arpa/inet.h&gt;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &lt;net/if.h&gt;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#ifdef __MORPHOS__</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &lt;proto/socket.h&gt;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="comment">// for Z_Malloc/Z_Free in quake</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#ifndef STANDALONETEST</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="preprocessor">#include &quot;<a class="code" href="zone_8h.html">zone.h</a>&quot;</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#include &quot;<a class="code" href="sys_8h.html">sys.h</a>&quot;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">#include &quot;<a class="code" href="netconn_8h.html">netconn.h</a>&quot;</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">#define Con_Print printf</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#define Con_Printf printf</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">#define Z_Malloc malloc</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">#define Z_Free free</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="preprocessor">#include &quot;<a class="code" href="lhnet_8h.html">lhnet.h</a>&quot;</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="preprocessor">#if defined(WIN32)</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="comment">// as of Visual Studio 2015, EWOULDBLOCK and ECONNREFUSED are real things, with different values than we want when talking to WinSock, so we have to undef them here or change the rest of the code.</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="preprocessor">#undef EWOULDBLOCK</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="preprocessor">#undef ECONNREFUSED</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="preprocessor">#define EWOULDBLOCK WSAEWOULDBLOCK</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="preprocessor">#define ECONNREFUSED WSAECONNREFUSED</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span> </div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="preprocessor">#define SOCKETERRNO WSAGetLastError()</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="preprocessor">#define IOC_VENDOR 0x18000000</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="preprocessor">#define _WSAIOW(x,y) (IOC_IN|(x)|(y))</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="preprocessor">#define SIO_UDP_CONNRESET _WSAIOW(IOC_VENDOR,12)</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="preprocessor">#define SOCKLEN_T int</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="preprocessor">#elif defined(__MORPHOS__)</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="preprocessor">#define ioctlsocket IoctlSocket</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="preprocessor">#define closesocket CloseSocket</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="preprocessor">#define SOCKETERRNO Errno()</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span> </div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="preprocessor">#define SOCKLEN_T int</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno"><a class="line" href="lhnet_8c.html#ad2d1c4dd0a32e296151deba96f1c9651">   83</a></span><span class="preprocessor">#define ioctlsocket ioctl</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno"><a class="line" href="lhnet_8c.html#afdbb9d84bd17efd2ae7290e664992c48">   84</a></span><span class="preprocessor">#define closesocket close</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a2de2b00e7a7ec775e23986034ae2bed1">   85</a></span><span class="preprocessor">#define SOCKETERRNO errno</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a7687159c87b8758364782b0b3f00215a">   87</a></span><span class="preprocessor">#define SOCKLEN_T socklen_t</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="preprocessor">#ifdef MSG_DONTWAIT</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span><span class="preprocessor">#define LHNET_RECVFROM_FLAGS MSG_DONTWAIT</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="preprocessor">#define LHNET_SENDTO_FLAGS 0</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno"><a class="line" href="lhnet_8c.html#af9dd83b5bebd3e596a01fdc8d83de46c">   94</a></span><span class="preprocessor">#define LHNET_RECVFROM_FLAGS 0</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a56dff094178abdc0661cba1c4d6e6b27">   95</a></span><span class="preprocessor">#define LHNET_SENDTO_FLAGS 0</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span> </div>
<div class="foldopen" id="foldopen00098" data-start="{" data-end="};">
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno"><a class="line" href="structlhnetaddressnative__t.html">   98</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetaddressnative_s</a></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>{</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno"><a class="line" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">  100</a></span>    <a class="code hl_enumeration" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183">lhnetaddresstype_t</a> <a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a>;</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno"><a class="line" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">  101</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a>;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="keyword">union</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    {</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno"><a class="line" href="structlhnetaddressnative__t.html#a15c3355b003b8881687e2809cf25f1cc">  104</a></span>        <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddr</a> sock;</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">  105</a></span>        <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddr_in</a> in;</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno"><a class="line" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">  107</a></span>        <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddr_in6</a> in6;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    }</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno"><a class="line" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">  110</a></span>    <a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>}</div>
</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span><a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a>;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span><span class="comment">// to make LHNETADDRESS_FromString resolve repeated hostnames faster, cache them</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a2d4155a75582d68f23163b010d4cbc96">  115</a></span><span class="preprocessor">#define MAX_NAMECACHE 64</span></div>
<div class="foldopen" id="foldopen00116" data-start="{" data-end="};">
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno"><a class="line" href="structnamecache__s.html">  116</a></span><span class="keyword">static</span> <span class="keyword">struct </span><a class="code hl_struct" href="structnamecache__s.html">namecache_s</a></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>{</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno"><a class="line" href="structnamecache__s.html#a5e60a2e42f3103d6b5480b08c541e131">  118</a></span>    <a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> <a class="code hl_variable" href="structnamecache__s.html#a5e60a2e42f3103d6b5480b08c541e131">address</a>;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno"><a class="line" href="structnamecache__s.html#a1c487aad13258ed89b4ce7cecaf2ed74">  119</a></span>    <span class="keywordtype">double</span> <a class="code hl_variable" href="structnamecache__s.html#a1c487aad13258ed89b4ce7cecaf2ed74">expirationtime</a>;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno"><a class="line" href="structnamecache__s.html#a0a606eb967d3a8b07b10ff0cad35e883">  120</a></span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="structnamecache__s.html#a0a606eb967d3a8b07b10ff0cad35e883">name</a>[64];</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>}</div>
</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno"><a class="line" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">  122</a></span><a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_define" href="lhnet_8c.html#a2d4155a75582d68f23163b010d4cbc96">MAX_NAMECACHE</a>];</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">  123</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a> = 0;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="foldopen" id="foldopen00125" data-start="{" data-end="}">
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a0bf8acfdb535455a716e3f3c31efcdeb">  125</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="lhnet_8c.html#a0bf8acfdb535455a716e3f3c31efcdeb">LHNETADDRESS_FromPort</a>(<a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>, <a class="code hl_enumeration" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183">lhnetaddresstype_t</a> addresstype, <span class="keywordtype">int</span> port)</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>{</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *address = (<a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <span class="keywordflow">if</span> (!address)</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <span class="keywordflow">switch</span>(addresstype)</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    {</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183afbc53a768575dbd36416369f993db8fe">LHNETADDRESSTYPE_LOOP</a>:</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <span class="comment">// local:port  (loopback)</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(address, 0, <span class="keyword">sizeof</span>(*address));</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183afbc53a768575dbd36416369f993db8fe">LHNETADDRESSTYPE_LOOP</a>;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = port;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>:</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        <span class="comment">// 0.0.0.0:port  (INADDR_ANY, binds to all interfaces)</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(address, 0, <span class="keyword">sizeof</span>(*address));</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>;</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = port;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_family = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_INET</a>;</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">htons</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)port);</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>:</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>        <span class="comment">// [0:0:0:0:0:0:0:0]:port  (IN6ADDR_ANY, binds to all interfaces)</span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(address, 0, <span class="keyword">sizeof</span>(*address));</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>;</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = port;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>.sin6_family = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_INET6</a>;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>.sin6_port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">htons</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)port);</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    }</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>}</div>
</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="foldopen" id="foldopen00163" data-start="{" data-end="}">
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno"><a class="line" href="lhnet_8c.html#aab8104857b333d2e9a79cb07605bbdf7">  163</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_function" href="lhnet_8c.html#aab8104857b333d2e9a79cb07605bbdf7">LHNETADDRESS_Resolve</a>(<a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *address, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keywordtype">int</span> port)</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>{</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">port_buff</a> [16];</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addrinfo</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hints</a>;</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addrinfo</a>* <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addrinf</a>;</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <span class="keywordtype">int</span> err;</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">port_buff</a>, <span class="keyword">sizeof</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">port_buff</a>), <span class="stringliteral">&quot;%d&quot;</span>, port);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">port_buff</a>[<span class="keyword">sizeof</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">port_buff</a>) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hints</a>, 0, <span class="keyword">sizeof</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hints</a>));</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hints</a>.ai_family = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_UNSPEC</a>;</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hints</a>.ai_socktype = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">SOCK_DGRAM</a>;</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="comment">//hints.ai_flags = AI_PASSIVE;</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span> </div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    err = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">getaddrinfo</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">port_buff</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hints</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addrinf</a>);</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <span class="keywordflow">if</span> (err != 0 || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addrinf</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addrinf</a>-&gt;ai_addr-&gt;sa_family != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_INET6</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addrinf</a>-&gt;ai_addr-&gt;sa_family != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_INET</a>)</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    {</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">freeaddrinfo</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addrinf</a>);</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    }</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="comment">// great it worked</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addrinf</a>-&gt;ai_addr-&gt;sa_family == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_INET6</a>)</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    {</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(&amp;address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addrinf</a>-&gt;ai_addr, <span class="keyword">sizeof</span>(address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>));</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    }</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>;</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(&amp;address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addrinf</a>-&gt;ai_addr, <span class="keyword">sizeof</span>(address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>));</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    }</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = port;</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">freeaddrinfo</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addrinf</a>);</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>}</div>
</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span> </div>
<div class="foldopen" id="foldopen00204" data-start="{" data-end="}">
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a5dbacd69a7b0e891167efa403d24be29">  204</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="lhnet_8c.html#a5dbacd69a7b0e891167efa403d24be29">LHNETADDRESS_FromString</a>(<a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">string</span>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultport</a>)</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>{</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    <a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *address = (<a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>;</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, port, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d1</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d3</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d4</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">resolved</a>;</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>;</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[128];</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span><span class="preprocessor">#ifdef STANDALONETEST</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>[128];</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_start</a>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_end</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">port_name</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_family</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_UNSPEC</a>;</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span> </div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    <span class="keywordflow">if</span> (!address || !<span class="keywordtype">string</span> || !*<span class="keywordtype">string</span>)</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(address, 0, <span class="keyword">sizeof</span>(*address));</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8133923ab10aecdccfb4612843118e96">LHNETADDRESSTYPE_NONE</a>;</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>    port = 0;</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span> </div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    <span class="comment">// If it&#39;s a bracketed IPv6 address</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="keywordflow">if</span> (<span class="keywordtype">string</span>[0] == <span class="charliteral">&#39;[&#39;</span>)</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    {</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">end_bracket</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strchr</a>(<span class="keywordtype">string</span>, <span class="charliteral">&#39;]&#39;</span>);</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span> </div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">end_bracket</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">end_bracket</a>[1] == <span class="charliteral">&#39;:&#39;</span>)</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">port_name</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">end_bracket</a> + 2;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">end_bracket</a>[1] != <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span> </div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_family</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_INET6</a>;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_start</a> = &amp;<span class="keywordtype">string</span>[1];</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_end</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">end_bracket</a>;</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    }</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    {</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>        <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">first_colon</a>;</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_start</a> = <a class="code hl_variable" href="glquake_8h.html#ae79dfeea357422bd20dbcaa2afe88ac6">string</a>;</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span> </div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>        <span class="comment">// If it&#39;s a numeric non-bracket IPv6 address (-&gt; no port),</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>        <span class="comment">// or it&#39;s a numeric IPv4 address, or a name, with a port</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">first_colon</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strchr</a>(<span class="keywordtype">string</span>, <span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">first_colon</a> != <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>        {</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>            <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">last_colon</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strrchr</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">first_colon</a> + 1, <span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>            <span class="comment">// If it&#39;s an numeric IPv4 address, or a name, with a port</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">last_colon</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>            {</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_end</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">first_colon</a>;</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">port_name</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">first_colon</a> + 1;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>            }</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_family</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_INET6</a>;</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>        }</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    }</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_end</a> != <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_end</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_start</a>;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_start</a>);</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a> &gt;= <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>))</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a> = <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>) - 1;</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a> (<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_start</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>);</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>] = 0;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span> </div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">port_name</a>)</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">port_name</a>);</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span> </div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    <span class="keywordflow">if</span> (port == 0)</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>        port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultport</a>;</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    <span class="comment">// handle loopback</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="stringliteral">&quot;local&quot;</span>))</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    {</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183afbc53a768575dbd36416369f993db8fe">LHNETADDRESSTYPE_LOOP</a>;</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = port;</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    }</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <span class="comment">// try to parse as dotted decimal ipv4 address first</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <span class="comment">// note this supports partial ip addresses</span></div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d4</a> = 0;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span><span class="preprocessor">#if _MSC_VER &gt;= 1400</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span><span class="preprocessor">#define sscanf sscanf_s</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addr_family</a> != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_INET6</a> &amp;&amp;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sscanf</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="stringliteral">&quot;%d.%d.%d.%d&quot;</span>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d1</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d2</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d3</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d4</a>) &gt;= 1 &amp;&amp; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d1</a> &lt; 256 &amp;&amp; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d2</a> &lt; 256 &amp;&amp; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d3</a> &lt; 256 &amp;&amp; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d4</a> &lt; 256)</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    {</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        <span class="comment">// parsed a valid ipv4 address</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>;</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = port;</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_family = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_INET</a>;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">htons</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)port);</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_addr;</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>        <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d1</a>;</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d2</a>;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d3</a>;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>        <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[3] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d4</a>;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span><span class="preprocessor">#ifdef STANDALONETEST</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>        <a class="code hl_function" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a>(address, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>), 1);</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;manual parsing of ipv4 dotted decimal address \&quot;%s\&quot; successful: %s\n&quot;</span>, <span class="keywordtype">string</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>);</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    }</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="lhnet_8c.html#a2d4155a75582d68f23163b010d4cbc96">MAX_NAMECACHE</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>))</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span><span class="preprocessor">#ifdef STANDALONETEST</span></div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="lhnet_8c.html#a2d4155a75582d68f23163b010d4cbc96">MAX_NAMECACHE</a>)</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="lhnet_8c.html#a2d4155a75582d68f23163b010d4cbc96">MAX_NAMECACHE</a> &amp;&amp; <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> &lt; <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structnamecache__s.html#a1c487aad13258ed89b4ce7cecaf2ed74">expirationtime</a>)</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    {</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        *address = <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structnamecache__s.html#a5e60a2e42f3103d6b5480b08c541e131">address</a>;</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = port;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        <span class="keywordflow">if</span> (address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>)</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        {</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>.sin6_port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">htons</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)port);</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        }</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>)</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>        {</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">htons</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)port);</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>        }</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    }</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span> </div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<span class="keyword">sizeof</span>(<a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>)-1 &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>        <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="structnamecache__s.html#a0a606eb967d3a8b07b10ff0cad35e883">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span><span class="preprocessor">#ifndef STANDALONETEST</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="structnamecache__s.html#a1c487aad13258ed89b4ce7cecaf2ed74">expirationtime</a> = <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> + 12 * 3600; <span class="comment">// 12 hours</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span> </div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    <span class="comment">// try resolving the address (handles dns and other ip formats)</span></div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">resolved</a> = <a class="code hl_function" href="lhnet_8c.html#aab8104857b333d2e9a79cb07605bbdf7">LHNETADDRESS_Resolve</a>(address, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, port);</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">resolved</a>)</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span><span class="preprocessor">#ifdef STANDALONETEST</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">protoname</a>;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>        <span class="keywordflow">switch</span> (address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a>)</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>        {</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>:</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">protoname</a> = <span class="stringliteral">&quot;ipv6&quot;</span>;</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>:</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">protoname</a> = <span class="stringliteral">&quot;ipv4&quot;</span>;</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">protoname</a> = <span class="stringliteral">&quot;UNKNOWN&quot;</span>;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        }</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        <a class="code hl_function" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>), 1);</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;LHNETADDRESS_Resolve(\&quot;%s\&quot;) returned %s address %s\n&quot;</span>, <span class="keywordtype">string</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">protoname</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>        <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="structnamecache__s.html#a5e60a2e42f3103d6b5480b08c541e131">address</a> = *address;</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    }</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    {</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span><span class="preprocessor">#ifdef STANDALONETEST</span></div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;name resolution failed on address \&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>);</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="structnamecache__s.html#a5e60a2e42f3103d6b5480b08c541e131">address</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8133923ab10aecdccfb4612843118e96">LHNETADDRESSTYPE_NONE</a>;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    }</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    </div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    <a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a> = (<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a> + 1) % <a class="code hl_define" href="lhnet_8c.html#a2d4155a75582d68f23163b010d4cbc96">MAX_NAMECACHE</a>;</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">resolved</a>;</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>}</div>
</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span><span class="keywordtype">int</span> <a class="code hl_function" href="lhnet_8c.html#a5dbacd69a7b0e891167efa403d24be29">LHNETADDRESS_FromString</a>(<a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">string</span>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultport</a>)</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>{</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    <a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *address = (<a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>;</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, port, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d1</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d3</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d4</a>;</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hostent</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hostentry</a>;</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>;</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">colon</a>;</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[128];</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span><span class="preprocessor">#ifdef STANDALONETEST</span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>[128];</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    <span class="keywordflow">if</span> (!address || !<span class="keywordtype">string</span> || !*<span class="keywordtype">string</span>)</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(address, 0, <span class="keyword">sizeof</span>(*address));</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8133923ab10aecdccfb4612843118e96">LHNETADDRESSTYPE_NONE</a>;</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    port = 0;</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">colon</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strrchr</a>(<span class="keywordtype">string</span>, <span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">colon</a> &amp;&amp; (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">colon</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strchr</a>(<span class="keywordtype">string</span>, <span class="charliteral">&#39;:&#39;</span>) || (<span class="keywordtype">string</span>[0] == <span class="charliteral">&#39;[&#39;</span> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">colon</a> - <span class="keywordtype">string</span> &gt; 0 &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">colon</a>[-1] == <span class="charliteral">&#39;]&#39;</span>)))</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    <span class="comment">//           EITHER: colon is the ONLY colon  OR: colon comes after [...] delimited IPv6 address</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>    <span class="comment">//           fixes misparsing of IPv6 addresses without port</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    {</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>        port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">colon</a> + 1);</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>    }</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">colon</a> = <span class="keywordtype">string</span> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(<span class="keywordtype">string</span>);</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <span class="keywordflow">if</span> (port == 0)</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>        port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">defaultport</a>;</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">colon</a> - <a class="code hl_variable" href="glquake_8h.html#ae79dfeea357422bd20dbcaa2afe88ac6">string</a>;</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a> &gt; 127)</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a> = 127;</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    <span class="keywordflow">if</span> (<span class="keywordtype">string</span>[0] == <span class="charliteral">&#39;[&#39;</span> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a> &gt; 0 &amp;&amp; <span class="keywordtype">string</span>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>-1] == <span class="charliteral">&#39;]&#39;</span>) <span class="comment">// ipv6</span></div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    {</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>        <span class="keywordtype">string</span>++;</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a> -= 2;</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>    }</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keywordtype">string</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>);</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>] = 0;</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    <span class="comment">// handle loopback</span></div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="stringliteral">&quot;local&quot;</span>))</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    {</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183afbc53a768575dbd36416369f993db8fe">LHNETADDRESSTYPE_LOOP</a>;</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = port;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    }</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>    <span class="comment">// try to parse as dotted decimal ipv4 address first</span></div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    <span class="comment">// note this supports partial ip addresses</span></div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d4</a> = 0;</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span><span class="preprocessor">#if _MSC_VER &gt;= 1400</span></div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span><span class="preprocessor">#define sscanf sscanf_s</span></div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sscanf</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="stringliteral">&quot;%d.%d.%d.%d&quot;</span>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d1</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d2</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d3</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d4</a>) &gt;= 1 &amp;&amp; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d1</a> &lt; 256 &amp;&amp; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d2</a> &lt; 256 &amp;&amp; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d3</a> &lt; 256 &amp;&amp; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d4</a> &lt; 256)</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>    {</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        <span class="comment">// parsed a valid ipv4 address</span></div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>;</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = port;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_family = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_INET</a>;</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">htons</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)port);</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>        <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)&amp;address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_addr;</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>        <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d1</a>;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>        <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d2</a>;</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>        <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d3</a>;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>        <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[3] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d4</a>;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span><span class="preprocessor">#ifdef STANDALONETEST</span></div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>        <a class="code hl_function" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a>(address, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>), 1);</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;manual parsing of ipv4 dotted decimal address \&quot;%s\&quot; successful: %s\n&quot;</span>, <span class="keywordtype">string</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>);</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    }</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="lhnet_8c.html#a2d4155a75582d68f23163b010d4cbc96">MAX_NAMECACHE</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>))</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span><span class="preprocessor">#ifdef STANDALONETEST</span></div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="lhnet_8c.html#a2d4155a75582d68f23163b010d4cbc96">MAX_NAMECACHE</a>)</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_define" href="lhnet_8c.html#a2d4155a75582d68f23163b010d4cbc96">MAX_NAMECACHE</a> &amp;&amp; <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> &lt; <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structnamecache__s.html#a1c487aad13258ed89b4ce7cecaf2ed74">expirationtime</a>)</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>    {</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>        *address = <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structnamecache__s.html#a5e60a2e42f3103d6b5480b08c541e131">address</a>;</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = port;</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>        <span class="keywordflow">if</span> (address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>)</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>        {</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>.sin6_port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">htons</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)port);</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>        }</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>)</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>        {</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">htons</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)port);</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>        }</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    }</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>    <span class="comment">// try gethostbyname (handles dns and other ip formats)</span></div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hostentry</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">gethostbyname</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>);</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hostentry</a>)</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    {</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hostentry</a>-&gt;h_addrtype == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_INET6</a>)</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>        {</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>            <span class="comment">// great it worked</span></div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>;</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = port;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>.sin6_family = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hostentry</a>-&gt;h_addrtype;</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>.sin6_port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">htons</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)port);</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(&amp;address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>.sin6_addr, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hostentry</a>-&gt;h_addr_list[0], <span class="keyword">sizeof</span>(address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>.sin6_addr));</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<span class="keyword">sizeof</span>(<a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>)-1 &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>                <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>            <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="structnamecache__s.html#a0a606eb967d3a8b07b10ff0cad35e883">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span><span class="preprocessor">#ifndef STANDALONETEST</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>            <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="structnamecache__s.html#a1c487aad13258ed89b4ce7cecaf2ed74">expirationtime</a> = <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> + 12 * 3600; <span class="comment">// 12 hours</span></div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>            <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="structnamecache__s.html#a5e60a2e42f3103d6b5480b08c541e131">address</a> = *address;</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>            <a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a> = (<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a> + 1) % <a class="code hl_define" href="lhnet_8c.html#a2d4155a75582d68f23163b010d4cbc96">MAX_NAMECACHE</a>;</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span><span class="preprocessor">#ifdef STANDALONETEST</span></div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>            <a class="code hl_function" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a>(address, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>), 1);</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;gethostbyname(\&quot;%s\&quot;) returned ipv6 address %s\n&quot;</span>, <span class="keywordtype">string</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>);</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>        }</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hostentry</a>-&gt;h_addrtype == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_INET</a>)</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        {</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>            <span class="comment">// great it worked</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>;</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = port;</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_family = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hostentry</a>-&gt;h_addrtype;</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">htons</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)port);</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(&amp;address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_addr, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">hostentry</a>-&gt;h_addr_list[0], <span class="keyword">sizeof</span>(address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_addr));</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<span class="keyword">sizeof</span>(<a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>)-1 &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>                <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>            <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="structnamecache__s.html#a0a606eb967d3a8b07b10ff0cad35e883">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span><span class="preprocessor">#ifndef STANDALONETEST</span></div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>            <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="structnamecache__s.html#a1c487aad13258ed89b4ce7cecaf2ed74">expirationtime</a> = <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> + 12 * 3600; <span class="comment">// 12 hours</span></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>            <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="structnamecache__s.html#a5e60a2e42f3103d6b5480b08c541e131">address</a> = *address;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>            <a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a> = (<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a> + 1) % <a class="code hl_define" href="lhnet_8c.html#a2d4155a75582d68f23163b010d4cbc96">MAX_NAMECACHE</a>;</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span><span class="preprocessor">#ifdef STANDALONETEST</span></div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>            <a class="code hl_function" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a>(address, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>), 1);</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;gethostbyname(\&quot;%s\&quot;) returned ipv4 address %s\n&quot;</span>, <span class="keywordtype">string</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">string2</a>);</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>        }</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    }</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span><span class="preprocessor">#ifdef STANDALONETEST</span></div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;gethostbyname failed on address \&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>);</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<span class="keyword">sizeof</span>(<a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>)-1 &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>        <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>    <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="structnamecache__s.html#a0a606eb967d3a8b07b10ff0cad35e883">name</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span><span class="preprocessor">#ifndef STANDALONETEST</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="structnamecache__s.html#a1c487aad13258ed89b4ce7cecaf2ed74">expirationtime</a> = <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> + 12 * 3600; <span class="comment">// 12 hours</span></div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>    <a class="code hl_variable" href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a>[<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a>].<a class="code hl_variable" href="structnamecache__s.html#a5e60a2e42f3103d6b5480b08c541e131">address</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8133923ab10aecdccfb4612843118e96">LHNETADDRESSTYPE_NONE</a>;</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    <a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a> = (<a class="code hl_variable" href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a> + 1) % <a class="code hl_define" href="lhnet_8c.html#a2d4155a75582d68f23163b010d4cbc96">MAX_NAMECACHE</a>;</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>}</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span> </div>
<div class="foldopen" id="foldopen00540" data-start="{" data-end="}">
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">  540</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>, <span class="keywordtype">char</span> *<span class="keywordtype">string</span>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stringbuffersize</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">includeport</a>)</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>{</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    <a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *address = (<a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>;</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>;</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    <span class="keywordflow">if</span> (!address || !<span class="keywordtype">string</span> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stringbuffersize</a> &lt; 1)</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    *<span class="keywordtype">string</span> = 0;</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <span class="keywordflow">switch</span>(address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a>)</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    {</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183afbc53a768575dbd36416369f993db8fe">LHNETADDRESSTYPE_LOOP</a>:</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">includeport</a>)</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>        {</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stringbuffersize</a> &gt;= 12)</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>            {</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<span class="keywordtype">string</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stringbuffersize</a>, <span class="stringliteral">&quot;local:%d&quot;</span>, address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a>);</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>            }</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>        }</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>        {</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stringbuffersize</a> &gt;= 6)</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>            {</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(<span class="keywordtype">string</span>, <span class="stringliteral">&quot;local&quot;</span>, 6);</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>                <span class="keywordflow">return</span> 5;</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>            }</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>        }</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>:</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> = (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(&amp;address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_addr);</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">includeport</a>)</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>        {</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stringbuffersize</a> &gt;= 22)</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>            {</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<span class="keywordtype">string</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stringbuffersize</a>, <span class="stringliteral">&quot;%d.%d.%d.%d:%d&quot;</span>, <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[0], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[1], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[2], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[3], address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a>);</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>            }</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>        }</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>        {</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stringbuffersize</a> &gt;= 16)</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>            {</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<span class="keywordtype">string</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stringbuffersize</a>, <span class="stringliteral">&quot;%d.%d.%d.%d&quot;</span>, <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[0], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[1], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[2], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[3]);</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>            }</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>        }</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>:</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>        <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> = (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(&amp;address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>.sin6_addr);</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">includeport</a>)</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>        {</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stringbuffersize</a> &gt;= 88)</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>            {</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<span class="keywordtype">string</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stringbuffersize</a>, <span class="stringliteral">&quot;[%x:%x:%x:%x:%x:%x:%x:%x]:%d&quot;</span>, <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[0] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[1], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[2] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[3], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[4] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[5], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[6] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[7], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[8] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[9], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[10] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[11], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[12] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[13], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[14] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[15], address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a>);</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>            }</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>        }</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>        {</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stringbuffersize</a> &gt;= 80)</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>            {</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<span class="keywordtype">string</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stringbuffersize</a>, <span class="stringliteral">&quot;%x:%x:%x:%x:%x:%x:%x:%x&quot;</span>, <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[0] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[1], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[2] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[3], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[4] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[5], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[6] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[7], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[8] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[9], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[10] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[11], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[12] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[13], <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[14] * 256 + <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>[15]);</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>            }</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>        }</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    }</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>}</div>
</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span> </div>
<div class="foldopen" id="foldopen00608" data-start="{" data-end="}">
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a27205413f567fb56ad7bb97d77938baa">  608</a></span><span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_function" href="lhnet_8c.html#a27205413f567fb56ad7bb97d77938baa">LHNETADDRESS_GetInterfaceName</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>, <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ifname</a>, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ifnamelength</a>)</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>{</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>    <a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *address = (<a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>;</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span> </div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>    <span class="keywordflow">if</span> (address &amp;&amp; address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>)</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    {</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span><span class="preprocessor">#ifndef _WIN32</span></div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span> </div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">if_indextoname</a>(address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>.sin6_scope_id, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ifname</a>) == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ifname</a>)</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ifname</a>;</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span> </div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span> </div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>        <span class="comment">// The Win32 API doesn&#39;t have if_indextoname() until Windows Vista,</span></div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>        <span class="comment">// but luckily it just uses the interface ID as the interface name</span></div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span> </div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ifname</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ifnamelength</a>, <span class="stringliteral">&quot;%lu&quot;</span>, address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>.sin6_scope_id) &gt; 0)</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ifname</a>;</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span> </div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    }</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span> </div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>}</div>
</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span> </div>
<div class="foldopen" id="foldopen00635" data-start="{" data-end="}">
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno"><a class="line" href="lhnet_8c.html#ad5efcc4b5bbf05a1dd889a298430ed94">  635</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="lhnet_8c.html#ad5efcc4b5bbf05a1dd889a298430ed94">LHNETADDRESS_GetPort</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> *address)</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>{</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>    <span class="keywordflow">if</span> (!address)</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>    <span class="keywordflow">return</span> address-&gt;<a class="code hl_variable" href="structlhnetaddress__t.html#ae5b92a9f2153024df7fb6032a728c7ce">port</a>;</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>}</div>
</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span> </div>
<div class="foldopen" id="foldopen00642" data-start="{" data-end="}">
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a08a46a5e7b9bcc97ddf4ab33bb411ae8">  642</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="lhnet_8c.html#a08a46a5e7b9bcc97ddf4ab33bb411ae8">LHNETADDRESS_SetPort</a>(<a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>, <span class="keywordtype">int</span> port)</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>{</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    <a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *address = (<a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>;</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    <span class="keywordflow">if</span> (!address)</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>    address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = port;</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <span class="keywordflow">switch</span>(address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a>)</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    {</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183afbc53a768575dbd36416369f993db8fe">LHNETADDRESSTYPE_LOOP</a>:</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>:</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">htons</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)port);</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>:</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>.sin6_port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">htons</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)port);</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>    }</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>}</div>
</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span> </div>
<div class="foldopen" id="foldopen00665" data-start="{" data-end="}">
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno"><a class="line" href="lhnet_8c.html#afcb50bceea3f2dc4d4c1663bb6d35e9e">  665</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="lhnet_8c.html#afcb50bceea3f2dc4d4c1663bb6d35e9e">LHNETADDRESS_Compare</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress1</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress2</a>)</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>{</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    <a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address1</a> = (<a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress1</a>;</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    <a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address2</a> = (<a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress2</a>;</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address1</a> || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address2</a>)</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address1</a>-&gt;addresstype != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address2</a>-&gt;addresstype)</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>    <span class="keywordflow">switch</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address1</a>-&gt;addresstype)</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>    {</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183afbc53a768575dbd36416369f993db8fe">LHNETADDRESSTYPE_LOOP</a>:</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address1</a>-&gt;port != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address2</a>-&gt;port)</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>:</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address1</a>-&gt;addr.in.sin_family != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address2</a>-&gt;addr.in.sin_family)</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcmp</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address1</a>-&gt;addr.in.sin_addr, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address2</a>-&gt;addr.in.sin_addr, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address1</a>-&gt;addr.in.sin_addr)))</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address1</a>-&gt;port != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address2</a>-&gt;port)</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>:</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address1</a>-&gt;addr.in6.sin6_family != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address2</a>-&gt;addr.in6.sin6_family)</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcmp</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address1</a>-&gt;addr.in6.sin6_addr, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address2</a>-&gt;addr.in6.sin6_addr, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address1</a>-&gt;addr.in6.sin6_addr)))</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address1</a>-&gt;port != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">address2</a>-&gt;port)</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>    }</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>}</div>
</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span> </div>
<div class="foldopen" id="foldopen00702" data-start="{" data-end="};">
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno"><a class="line" href="structlhnetpacket__t.html">  702</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetpacket_s</a></div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>{</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno"><a class="line" href="structlhnetpacket__t.html#a91ad552d9370412b7cf9531741d50371">  704</a></span>    <span class="keywordtype">void</span> *<a class="code hl_variable" href="structlhnetpacket__t.html#a91ad552d9370412b7cf9531741d50371">data</a>;</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno"><a class="line" href="structlhnetpacket__t.html#af08fd197114b1de5a3d53dd20a22a963">  705</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structlhnetpacket__t.html#af08fd197114b1de5a3d53dd20a22a963">length</a>;</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno"><a class="line" href="structlhnetpacket__t.html#aba63116b4250fa76cd58001bd23b4a25">  706</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structlhnetpacket__t.html#aba63116b4250fa76cd58001bd23b4a25">sourceport</a>;</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno"><a class="line" href="structlhnetpacket__t.html#a281a9de59fcfdaf482035d7c4f7f134b">  707</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structlhnetpacket__t.html#a281a9de59fcfdaf482035d7c4f7f134b">destinationport</a>;</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno"><a class="line" href="structlhnetpacket__t.html#ae0ce26fa3e2b9e92c5695d384da0d547">  708</a></span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">time_t</a> <a class="code hl_variable" href="structlhnetpacket__t.html#ae0ce26fa3e2b9e92c5695d384da0d547">timeout</a>;</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span><span class="preprocessor">#ifndef STANDALONETEST</span></div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno"><a class="line" href="structlhnetpacket__t.html#adb0fccc1a7460bfd078778ed9eb660c6">  710</a></span>    <span class="keywordtype">double</span> <a class="code hl_variable" href="structlhnetpacket__t.html#adb0fccc1a7460bfd078778ed9eb660c6">sentdoubletime</a>;</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno"><a class="line" href="structlhnetpacket__t.html#afa5f10d146cad13f481bc424f9937ff6">  712</a></span>    <a class="code hl_struct" href="structllist__t.html">llist_t</a> <a class="code hl_variable" href="structlhnetpacket__t.html#afa5f10d146cad13f481bc424f9937ff6">list</a>;</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>}</div>
</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span><a class="code hl_struct" href="structlhnetpacket__t.html">lhnetpacket_t</a>;</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span> </div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno"><a class="line" href="lhnet_8c.html#ab0df364a898388d217ff02d86282826d">  716</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="lhnet_8c.html#ab0df364a898388d217ff02d86282826d">lhnet_active</a>;</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a91c521e79c4333135c39ffbb3869eb25">  717</a></span><a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a> <a class="code hl_variable" href="lhnet_8c.html#a91c521e79c4333135c39ffbb3869eb25">lhnet_socketlist</a>;</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a7b221c5655c9a814a83ee1f4ff1cc48b">  718</a></span><span class="keyword">static</span> <a class="code hl_struct" href="structlhnetpacket__t.html">lhnetpacket_t</a> <a class="code hl_variable" href="lhnet_8c.html#a7b221c5655c9a814a83ee1f4ff1cc48b">lhnet_packetlist</a>;</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a8da89e290c15d954c1a64e65f3418499">  719</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="lhnet_8c.html#a8da89e290c15d954c1a64e65f3418499">lhnet_default_dscp</a> = 0;</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnet_didWSAStartup</a> = 0;</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span><span class="keyword">static</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSADATA</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnet_winsockdata</a>;</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span> </div>
<div class="foldopen" id="foldopen00725" data-start="{" data-end="}">
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a4ae51b1bcceb94c99fefa0b296797c8d">  725</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="lhnet_8c.html#a4ae51b1bcceb94c99fefa0b296797c8d">LHNET_Init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>{</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="lhnet_8c.html#ab0df364a898388d217ff02d86282826d">lhnet_active</a>)</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    <a class="code hl_function" href="com__list_8h.html#a5689fd1764530a075fc53b4f4e4bb0d1">List_Create</a>(&amp;<a class="code hl_variable" href="lhnet_8c.html#a91c521e79c4333135c39ffbb3869eb25">lhnet_socketlist</a>.<a class="code hl_variable" href="structlhnetsocket__t.html#a5c0d0623751d4eb3ed879a6aa659b28d">list</a>);</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>    <a class="code hl_function" href="com__list_8h.html#a5689fd1764530a075fc53b4f4e4bb0d1">List_Create</a>(&amp;<a class="code hl_variable" href="lhnet_8c.html#a7b221c5655c9a814a83ee1f4ff1cc48b">lhnet_packetlist</a>.<a class="code hl_variable" href="structlhnetpacket__t.html#afa5f10d146cad13f481bc424f9937ff6">list</a>);</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>    <a class="code hl_variable" href="lhnet_8c.html#ab0df364a898388d217ff02d86282826d">lhnet_active</a> = 1;</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnet_didWSAStartup</a> = !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAStartup</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">MAKEWORD</a>(1, 1), &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnet_winsockdata</a>);</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnet_didWSAStartup</a>)</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;LHNET_Init: WSAStartup failed, networking disabled\n&quot;</span>);</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>}</div>
</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span> </div>
<div class="foldopen" id="foldopen00739" data-start="{" data-end="}">
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a4f6d4151a55ef98d4fbcafd2fcd83559">  739</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="lhnet_8c.html#a4f6d4151a55ef98d4fbcafd2fcd83559">LHNET_DefaultDSCP</a>(<span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dscp</a>)</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>{</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span><span class="preprocessor">#ifdef IP_TOS</span></div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>    <span class="keywordtype">int</span> prev = <a class="code hl_variable" href="lhnet_8c.html#a8da89e290c15d954c1a64e65f3418499">lhnet_default_dscp</a>;</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dscp</a> &gt;= 0)</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>        <a class="code hl_variable" href="lhnet_8c.html#a8da89e290c15d954c1a64e65f3418499">lhnet_default_dscp</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dscp</a>;</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>    <span class="keywordflow">return</span> prev;</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>}</div>
</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span> </div>
<div class="foldopen" id="foldopen00751" data-start="{" data-end="}">
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a4ace1406ab47b73557f7e4378ca0149f">  751</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="lhnet_8c.html#a4ace1406ab47b73557f7e4378ca0149f">LHNET_Shutdown</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>{</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>    <a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a> *s, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">snext</a>;</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>    <a class="code hl_struct" href="structlhnetpacket__t.html">lhnetpacket_t</a> *p, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pnext</a>;</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="lhnet_8c.html#ab0df364a898388d217ff02d86282826d">lhnet_active</a>)</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>    <a class="code hl_define" href="com__list_8h.html#ac3e1d180a70bd9c49fb9838b081a6c27">List_For_Each_Entry_Safe</a>(s, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">snext</a>, &amp;<a class="code hl_variable" href="lhnet_8c.html#a91c521e79c4333135c39ffbb3869eb25">lhnet_socketlist</a>.<a class="code hl_variable" href="structlhnetsocket__t.html#a5c0d0623751d4eb3ed879a6aa659b28d">list</a>, <a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a>, list)</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>        <a class="code hl_function" href="lhnet_8c.html#a34257a8adab6a1b5e37ca4da181bf7bd">LHNET_CloseSocket</a>(s);</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>    <a class="code hl_define" href="com__list_8h.html#ac3e1d180a70bd9c49fb9838b081a6c27">List_For_Each_Entry_Safe</a>(p, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pnext</a>, &amp;<a class="code hl_variable" href="lhnet_8c.html#a7b221c5655c9a814a83ee1f4ff1cc48b">lhnet_packetlist</a>.<a class="code hl_variable" href="structlhnetpacket__t.html#afa5f10d146cad13f481bc424f9937ff6">list</a>, <a class="code hl_struct" href="structlhnetpacket__t.html">lhnetpacket_t</a>, list)</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>    {</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>        <a class="code hl_function" href="com__list_8h.html#ab178d2459c622921987ae5f92ce70bf2">List_Delete</a>(&amp;p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#afa5f10d146cad13f481bc424f9937ff6">list</a>);</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(p);</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>    }</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnet_didWSAStartup</a>)</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>    {</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnet_didWSAStartup</a> = 0;</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSACleanup</a>();</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>    }</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>    <a class="code hl_variable" href="lhnet_8c.html#ab0df364a898388d217ff02d86282826d">lhnet_active</a> = 0;</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>}</div>
</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span> </div>
<div class="foldopen" id="foldopen00774" data-start="{" data-end="}">
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno"><a class="line" href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">  774</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_function" href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">LHNETPRIVATE_StrError</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>{</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAGetLastError</a>();</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>    {</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEINTR</a>:           <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEINTR&quot;</span>;</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEBADF</a>:           <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEBADF&quot;</span>;</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEACCES</a>:          <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEACCES&quot;</span>;</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEFAULT</a>:          <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEFAULT&quot;</span>;</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEINVAL</a>:          <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEINVAL&quot;</span>;</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEMFILE</a>:          <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEMFILE&quot;</span>;</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEWOULDBLOCK</a>:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEWOULDBLOCK&quot;</span>;</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEINPROGRESS</a>:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEINPROGRESS&quot;</span>;</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEALREADY</a>:        <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEALREADY&quot;</span>;</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAENOTSOCK</a>:        <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAENOTSOCK&quot;</span>;</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEDESTADDRREQ</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEDESTADDRREQ&quot;</span>;</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEMSGSIZE</a>:        <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEMSGSIZE&quot;</span>;</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEPROTOTYPE</a>:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEPROTOTYPE&quot;</span>;</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAENOPROTOOPT</a>:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAENOPROTOOPT&quot;</span>;</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEPROTONOSUPPORT</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEPROTONOSUPPORT&quot;</span>;</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAESOCKTNOSUPPORT</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAESOCKTNOSUPPORT&quot;</span>;</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEOPNOTSUPP</a>:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEOPNOTSUPP&quot;</span>;</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEPFNOSUPPORT</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEPFNOSUPPORT&quot;</span>;</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEAFNOSUPPORT</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEAFNOSUPPORT&quot;</span>;</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEADDRINUSE</a>:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEADDRINUSE&quot;</span>;</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEADDRNOTAVAIL</a>:   <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEADDRNOTAVAIL&quot;</span>;</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAENETDOWN</a>:        <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAENETDOWN&quot;</span>;</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAENETUNREACH</a>:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAENETUNREACH&quot;</span>;</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAENETRESET</a>:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAENETRESET&quot;</span>;</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAECONNABORTED</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAECONNABORTED&quot;</span>;</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAECONNRESET</a>:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAECONNRESET&quot;</span>;</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAENOBUFS</a>:         <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAENOBUFS&quot;</span>;</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEISCONN</a>:         <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEISCONN&quot;</span>;</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAENOTCONN</a>:        <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAENOTCONN&quot;</span>;</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAESHUTDOWN</a>:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAESHUTDOWN&quot;</span>;</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAETOOMANYREFS</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAETOOMANYREFS&quot;</span>;</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAETIMEDOUT</a>:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAETIMEDOUT&quot;</span>;</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAECONNREFUSED</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAECONNREFUSED&quot;</span>;</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAELOOP</a>:           <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAELOOP&quot;</span>;</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAENAMETOOLONG</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAENAMETOOLONG&quot;</span>;</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEHOSTDOWN</a>:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEHOSTDOWN&quot;</span>;</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEHOSTUNREACH</a>:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEHOSTUNREACH&quot;</span>;</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAENOTEMPTY</a>:       <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAENOTEMPTY&quot;</span>;</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEPROCLIM</a>:        <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEPROCLIM&quot;</span>;</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEUSERS</a>:          <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEUSERS&quot;</span>;</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEDQUOT</a>:          <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEDQUOT&quot;</span>;</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAESTALE</a>:          <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAESTALE&quot;</span>;</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEREMOTE</a>:         <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEREMOTE&quot;</span>;</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>        <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAEDISCON</a>:         <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSAEDISCON&quot;</span>;</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>        <span class="keywordflow">case</span> 0:                  <span class="keywordflow">return</span> <span class="stringliteral">&quot;no error&quot;</span>;</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        <span class="keywordflow">default</span>:                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;unknown WSAE error&quot;</span>;</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>    }</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strerror</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">errno</a>);</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>}</div>
</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span> </div>
<div class="foldopen" id="foldopen00832" data-start="{" data-end="}">
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a4fe5025d9e503e04a4c2de41cf94317f">  832</a></span><a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a> *<a class="code hl_function" href="lhnet_8c.html#a4fe5025d9e503e04a4c2de41cf94317f">LHNET_OpenSocket_Connectionless</a>(<a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> *address)</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>{</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>    <a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>, *s;</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>    <span class="keywordflow">if</span> (!address)</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a> = (<a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a> *)<a class="code hl_define" href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<span class="keyword">sizeof</span>(*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>));</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>)</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>    {</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>, 0, <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>));</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address = *address;</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>        <span class="keywordflow">switch</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.addresstype)</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>        {</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183afbc53a768575dbd36416369f993db8fe">LHNETADDRESSTYPE_LOOP</a>:</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.port == 0)</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>            {</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>                <span class="comment">// allocate a port dynamically</span></div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>                <span class="comment">// this search will always terminate because there is never</span></div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>                <span class="comment">// an allocated socket with port 0, so if the number wraps it</span></div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>                <span class="comment">// will find the port is unused, and then refuse to use port</span></div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>                <span class="comment">// 0, causing an intentional failure condition</span></div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.<a class="code hl_variable" href="structlhnetaddress__t.html#ae5b92a9f2153024df7fb6032a728c7ce">port</a> = 1024;</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>                <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>                {</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>                    <a class="code hl_define" href="com__list_8h.html#adf2a19e6aecbb850500eb44ddfe17ef8">List_For_Each_Entry</a>(s, &amp;<a class="code hl_variable" href="lhnet_8c.html#a91c521e79c4333135c39ffbb3869eb25">lhnet_socketlist</a>.<a class="code hl_variable" href="structlhnetsocket__t.html#a5c0d0623751d4eb3ed879a6aa659b28d">list</a>, <a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a>, list)</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>                        <span class="keywordflow">if</span> (s-&gt;<a class="code hl_variable" href="structlhnetsocket__t.html#aca06685cb3bfd510c27944c09a8a529b">address</a>.<a class="code hl_variable" href="structlhnetaddress__t.html#a03061e1e9980e51aee4083e86829b0ad">addresstype</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.addresstype &amp;&amp; s-&gt;<a class="code hl_variable" href="structlhnetsocket__t.html#aca06685cb3bfd510c27944c09a8a529b">address</a>.<a class="code hl_variable" href="structlhnetaddress__t.html#ae5b92a9f2153024df7fb6032a728c7ce">port</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.port)</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>                    <span class="keywordflow">if</span> (s == &amp;<a class="code hl_variable" href="lhnet_8c.html#a91c521e79c4333135c39ffbb3869eb25">lhnet_socketlist</a>)</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.port++;</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>                }</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>            }</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>            <span class="comment">// check if the port is available</span></div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>            <a class="code hl_define" href="com__list_8h.html#adf2a19e6aecbb850500eb44ddfe17ef8">List_For_Each_Entry</a>(s, &amp;<a class="code hl_variable" href="lhnet_8c.html#a91c521e79c4333135c39ffbb3869eb25">lhnet_socketlist</a>.<a class="code hl_variable" href="structlhnetsocket__t.html#a5c0d0623751d4eb3ed879a6aa659b28d">list</a>, <a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a>, list)</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>                <span class="keywordflow">if</span> (s-&gt;<a class="code hl_variable" href="structlhnetsocket__t.html#aca06685cb3bfd510c27944c09a8a529b">address</a>.<a class="code hl_variable" href="structlhnetaddress__t.html#a03061e1e9980e51aee4083e86829b0ad">addresstype</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.addresstype &amp;&amp; s-&gt;<a class="code hl_variable" href="structlhnetsocket__t.html#aca06685cb3bfd510c27944c09a8a529b">address</a>.<a class="code hl_variable" href="structlhnetaddress__t.html#ae5b92a9f2153024df7fb6032a728c7ce">port</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.port)</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>            <span class="keywordflow">if</span> (s == &amp;<a class="code hl_variable" href="lhnet_8c.html#a91c521e79c4333135c39ffbb3869eb25">lhnet_socketlist</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;<a class="code hl_variable" href="structlhnetsocket__t.html#aca06685cb3bfd510c27944c09a8a529b">address</a>.<a class="code hl_variable" href="structlhnetaddress__t.html#ae5b92a9f2153024df7fb6032a728c7ce">port</a> != 0)</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>            {</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>                <a class="code hl_function" href="com__list_8h.html#a95b7e3d23190bec5810ef77ed997bb45">List_Add_Tail</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;list, &amp;<a class="code hl_variable" href="lhnet_8c.html#a91c521e79c4333135c39ffbb3869eb25">lhnet_socketlist</a>.<a class="code hl_variable" href="structlhnetsocket__t.html#a5c0d0623751d4eb3ed879a6aa659b28d">list</a>);</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>                <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>;</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>            }</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>:</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>:</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnet_didWSAStartup</a>)</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>            {</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>                <span class="keywordflow">if</span> ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">socket</a>(address-&gt;<a class="code hl_variable" href="structlhnetaddress__t.html#a03061e1e9980e51aee4083e86829b0ad">addresstype</a> == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a> ? <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">PF_INET6</a> : <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">PF_INET</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">SOCK_DGRAM</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">IPPROTO_UDP</a>)) != -1)</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>#<span class="keywordflow">else</span></div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>                <span class="keywordflow">if</span> ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">socket</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">AF_INET</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">SOCK_DGRAM</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">IPPROTO_UDP</a>)) != -1)</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>                {</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">u_long</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">_false</a> = 0;</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span><span class="preprocessor">#ifdef MSG_DONTWAIT</span></div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>                    <span class="keywordflow">if</span> (1)</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">u_long</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">_true</a> = 1;</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>                    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">_true</a> = 1;</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>                    <span class="keywordflow">if</span> (<a class="code hl_define" href="lhnet_8c.html#ad2d1c4dd0a32e296151deba96f1c9651">ioctlsocket</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">FIONBIO</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">_true</a>) != -1)</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>#<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">endif</a></div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>                    {</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span><span class="preprocessor">#ifdef IPV6_V6ONLY</span></div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>                        <span class="comment">// We need to set this flag to tell the OS that we only listen on IPv6. If we don&#39;t</span></div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>                        <span class="comment">// most OSes will create a dual-protocol socket that also listens on IPv4. In this case</span></div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>                        <span class="comment">// if an IPv4 socket is already bound to the port we want, our bind() call will fail.</span></div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>                        <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ipv6_only</a> = 1;</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>                        <span class="keywordflow">if</span> (address-&gt;<a class="code hl_variable" href="structlhnetaddress__t.html#a03061e1e9980e51aee4083e86829b0ad">addresstype</a> != <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a></div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>                            || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">setsockopt</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">IPPROTO_IPV6</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">IPV6_V6ONLY</a>,</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>                                           (<span class="keyword">const</span> <span class="keywordtype">char</span> *)&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ipv6_only</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ipv6_only</a>)) == 0</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>                            <span class="comment">// The Win32 API only supports IPV6_V6ONLY since Windows Vista, but fortunately</span></div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>                            <span class="comment">// the default value is what we want on Win32 anyway (IPV6_V6ONLY = true)</span></div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>                            || <a class="code hl_define" href="lhnet_8c.html#a2de2b00e7a7ec775e23986034ae2bed1">SOCKETERRNO</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">WSAENOPROTOOPT</a></div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>                            )</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>#<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">endif</a></div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>                        {</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>                            <a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localaddress</a> = (<a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *)&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address;</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>                            <a class="code hl_define" href="lhnet_8c.html#a7687159c87b8758364782b0b3f00215a">SOCKLEN_T</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>;</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>                            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bindresult</a>;</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span> </div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span><span class="preprocessor">#if defined(SOL_RFC1149) &amp;&amp; defined(RFC1149_1149ONLY)</span></div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>                            <span class="comment">// we got reports of massive lags when this protocol was chosen as transport</span></div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>                            <span class="comment">// so better turn it off</span></div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>                            {</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>                                <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rfc1149only</a> = 0;</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>                                <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rfc1149enabled</a> = 0;</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>                                <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">setsockopt</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">SOL_RFC1149</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">RFC1149_1149ONLY</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rfc1149only</a>))</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>                                    <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<a class="code hl_define" href="console_8h.html#ae151ed35a905aff75d5f5dc32cd965bb">CON_ERROR</a> <span class="stringliteral">&quot;LHNET_OpenSocket_Connectionless: warning: setsockopt(RFC1149_1149ONLY) returned error: %s\n&quot;</span>, <a class="code hl_function" href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">LHNETPRIVATE_StrError</a>());</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>                                <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">setsockopt</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">SOL_RFC1149</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">RFC1149_ENABLED</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rfc1149enabled</a>))</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>                                    <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<a class="code hl_define" href="console_8h.html#ae151ed35a905aff75d5f5dc32cd965bb">CON_ERROR</a> <span class="stringliteral">&quot;LHNET_OpenSocket_Connectionless: warning: setsockopt(RFC1149_ENABLED) returned error: %s\n&quot;</span>, <a class="code hl_function" href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">LHNETPRIVATE_StrError</a>());</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>                            }</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span> </div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>                            <span class="keywordflow">if</span> (address-&gt;<a class="code hl_variable" href="structlhnetaddress__t.html#a03061e1e9980e51aee4083e86829b0ad">addresstype</a> == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>)</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>                            {</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>                                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a> = <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localaddress</a>-&gt;addr.in6);</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>                                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bindresult</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bind</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localaddress</a>-&gt;addr.sock, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>);</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>                                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bindresult</a> != -1)</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>                                {</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>                                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">getsockname</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localaddress</a>-&gt;addr.sock, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>))</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>                                    {</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>                                        <span class="comment">// If getsockname failed, we can assume the bound socket is useless.</span></div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>                                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bindresult</a> = -1;</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>                                    }</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>                                }</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>                            }</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>                            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>                            {</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>                                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a> = <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localaddress</a>-&gt;addr.in);</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>                                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bindresult</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bind</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localaddress</a>-&gt;addr.sock, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>);</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>                                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bindresult</a> != -1)</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>                                {</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>                                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">getsockname</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localaddress</a>-&gt;addr.sock, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>))</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>                                    {</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>                                        <span class="comment">// If getsockname failed, we can assume the bound socket is useless.</span></div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>                                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bindresult</a> = -1;</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>                                    }</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>                                }</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>                            }</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>                            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bindresult</a> != -1)</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>                            {</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>                                <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1;</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>                                <span class="comment">// enable broadcast on this socket</span></div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>                                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">setsockopt</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">SOL_SOCKET</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">SO_BROADCAST</a>, (<span class="keywordtype">char</span> *)&amp;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span><span class="preprocessor">#ifdef IP_TOS</span></div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>                                {</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>                                    <span class="comment">// enable DSCP for ToS support</span></div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>                                    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tos</a> = <a class="code hl_variable" href="lhnet_8c.html#a8da89e290c15d954c1a64e65f3418499">lhnet_default_dscp</a> &lt;&lt; 2;</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>                                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">setsockopt</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">IPPROTO_IP</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">IP_TOS</a>, (<span class="keywordtype">char</span> *) &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tos</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tos</a>)))</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>                                    {</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>                                        <span class="comment">// Error in setsockopt - fine, we&#39;ll simply set no TOS then.</span></div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>                                    }</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>                                }</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>                                <a class="code hl_function" href="com__list_8h.html#a95b7e3d23190bec5810ef77ed997bb45">List_Add_Tail</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;list, &amp;<a class="code hl_variable" href="lhnet_8c.html#a91c521e79c4333135c39ffbb3869eb25">lhnet_socketlist</a>.<a class="code hl_variable" href="structlhnetsocket__t.html#a5c0d0623751d4eb3ed879a6aa659b28d">list</a>);</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>                                <span class="keywordflow">if</span> (<a class="code hl_define" href="lhnet_8c.html#ad2d1c4dd0a32e296151deba96f1c9651">ioctlsocket</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">SIO_UDP_CONNRESET</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">_false</a>) == -1)</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>                                    <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;LHNET_OpenSocket_Connectionless: ioctlsocket SIO_UDP_CONNRESET returned error: %s\n&quot;</span>, <a class="code hl_function" href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">LHNETPRIVATE_StrError</a>());</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>                                <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>;</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>                            }</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>                            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>                                <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;LHNET_OpenSocket_Connectionless: bind returned error: %s\n&quot;</span>, <a class="code hl_function" href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">LHNETPRIVATE_StrError</a>());</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>                        }</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span><span class="preprocessor">#ifdef IPV6_V6ONLY</span></div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>                        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>                            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;LHNET_OpenSocket_Connectionless: setsockopt(IPV6_V6ONLY) returned error: %s\n&quot;</span>, <a class="code hl_function" href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">LHNETPRIVATE_StrError</a>());</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>                    }</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>                        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;LHNET_OpenSocket_Connectionless: ioctlsocket returned error: %s\n&quot;</span>, <a class="code hl_function" href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">LHNETPRIVATE_StrError</a>());</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>                    <a class="code hl_define" href="lhnet_8c.html#afdbb9d84bd17efd2ae7290e664992c48">closesocket</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket);</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>                }</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>                    <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;LHNET_OpenSocket_Connectionless: socket returned error: %s\n&quot;</span>, <a class="code hl_function" href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">LHNETPRIVATE_StrError</a>());</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>            }</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>                <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;LHNET_OpenSocket_Connectionless: can&#39;t open a socket (WSAStartup failed during LHNET_Init)\n&quot;</span>);</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>        }</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>        <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>);</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>    }</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>}</div>
</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span> </div>
<div class="foldopen" id="foldopen01012" data-start="{" data-end="}">
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a34257a8adab6a1b5e37ca4da181bf7bd"> 1012</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="lhnet_8c.html#a34257a8adab6a1b5e37ca4da181bf7bd">LHNET_CloseSocket</a>(<a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>)</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>{</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>)</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>    {</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>        <a class="code hl_function" href="com__list_8h.html#ab178d2459c622921987ae5f92ce70bf2">List_Delete</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;list);</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>        <span class="comment">// no special close code for loopback, just inet</span></div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.addresstype == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.addresstype == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>)</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>        {</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>            <a class="code hl_define" href="lhnet_8c.html#afdbb9d84bd17efd2ae7290e664992c48">closesocket</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket);</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>        }</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>        <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>);</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>    }</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>}</div>
</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span> </div>
<div class="foldopen" id="foldopen01026" data-start="{" data-end="}">
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a913a13078838978f9efb05c09b8de24f"> 1026</a></span><a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> *<a class="code hl_function" href="lhnet_8c.html#a913a13078838978f9efb05c09b8de24f">LHNET_AddressFromSocket</a>(<a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a> *sock)</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>{</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>    <span class="keywordflow">if</span> (sock)</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>        <span class="keywordflow">return</span> &amp;sock-&gt;<a class="code hl_variable" href="structlhnetsocket__t.html#aca06685cb3bfd510c27944c09a8a529b">address</a>;</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>}</div>
</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span> </div>
<div class="foldopen" id="foldopen01034" data-start="{" data-end="}">
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a8a3d464803101e400e5358c8fde8e683"> 1034</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="lhnet_8c.html#a8a3d464803101e400e5358c8fde8e683">LHNET_Read</a>(<a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>, <span class="keywordtype">void</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">content</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">maxcontentlength</a>, <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>)</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>{</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    <a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *address = (<a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>;</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> = 0;</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a> || !address || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">content</a> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">maxcontentlength</a> &lt; 1)</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.addresstype == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183afbc53a768575dbd36416369f993db8fe">LHNETADDRESSTYPE_LOOP</a>)</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>    {</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">time_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">currenttime</a>;</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>        <a class="code hl_struct" href="structlhnetpacket__t.html">lhnetpacket_t</a> *p, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pnext</a>;</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>        <span class="comment">// scan for any old packets to timeout while searching for a packet</span></div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>        <span class="comment">// that is waiting to be delivered to this socket</span></div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">currenttime</a> = time(<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>        <a class="code hl_define" href="com__list_8h.html#ac3e1d180a70bd9c49fb9838b081a6c27">List_For_Each_Entry_Safe</a>(p, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pnext</a>, &amp;<a class="code hl_variable" href="lhnet_8c.html#a7b221c5655c9a814a83ee1f4ff1cc48b">lhnet_packetlist</a>.<a class="code hl_variable" href="structlhnetpacket__t.html#afa5f10d146cad13f481bc424f9937ff6">list</a>, <a class="code hl_struct" href="structlhnetpacket__t.html">lhnetpacket_t</a>, list)</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>        {</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>            <span class="keywordflow">if</span> (p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#ae0ce26fa3e2b9e92c5695d384da0d547">timeout</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">currenttime</a>)</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>            {</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>                <span class="comment">// unlink and free</span></div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>                <a class="code hl_function" href="com__list_8h.html#ab178d2459c622921987ae5f92ce70bf2">List_Delete</a>(&amp;p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#afa5f10d146cad13f481bc424f9937ff6">list</a>);</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>                <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(p);</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>            }</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span><span class="preprocessor">#ifndef STANDALONETEST</span></div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="netconn_8c.html#a296f91b40cc46d3fbd4bcfce195c4b72">net_fakelag</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> &amp;&amp; (<a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> - <a class="code hl_variable" href="netconn_8c.html#a296f91b40cc46d3fbd4bcfce195c4b72">net_fakelag</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * (1.0 / 2000.0)) &lt; p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#adb0fccc1a7460bfd078778ed9eb660c6">sentdoubletime</a>)</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> == 0 &amp;&amp; p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#a281a9de59fcfdaf482035d7c4f7f134b">destinationport</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.port)</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>            {</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>                <span class="keywordflow">if</span> (p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#af08fd197114b1de5a3d53dd20a22a963">length</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">maxcontentlength</a>)</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>                {</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>                    <a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localaddress</a> = (<a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *)&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address;</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>                    *address = *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localaddress</a>;</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>                    address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#aba63116b4250fa76cd58001bd23b4a25">sourceport</a>;</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">content</a>, p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#a91ad552d9370412b7cf9531741d50371">data</a>, p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#af08fd197114b1de5a3d53dd20a22a963">length</a>);</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>                    <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> = p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#af08fd197114b1de5a3d53dd20a22a963">length</a>;</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>                }</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>                    <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> = -1;</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>                <span class="comment">// unlink and free</span></div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>                <a class="code hl_function" href="com__list_8h.html#ab178d2459c622921987ae5f92ce70bf2">List_Delete</a>(&amp;p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#afa5f10d146cad13f481bc424f9937ff6">list</a>);</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>                <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(p);</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>            }</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>        }</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>    }</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.addresstype == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>)</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>    {</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>        <a class="code hl_define" href="lhnet_8c.html#a7687159c87b8758364782b0b3f00215a">SOCKLEN_T</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inetaddresslength</a>;</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8133923ab10aecdccfb4612843118e96">LHNETADDRESSTYPE_NONE</a>;</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inetaddresslength</a> = <span class="keyword">sizeof</span>(address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>);</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>        <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">recvfrom</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, (<span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">content</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">maxcontentlength</a>, <a class="code hl_define" href="lhnet_8c.html#af9dd83b5bebd3e596a01fdc8d83de46c">LHNET_RECVFROM_FLAGS</a>, &amp;address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a15c3355b003b8881687e2809cf25f1cc">sock</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inetaddresslength</a>);</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> &gt; 0)</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>        {</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>;</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ntohs</a>(address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>.sin_port);</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>;</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>        }</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> &lt; 0)</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>        {</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = <a class="code hl_define" href="lhnet_8c.html#a2de2b00e7a7ec775e23986034ae2bed1">SOCKETERRNO</a>;</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">EWOULDBLOCK</a>)</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>            <span class="keywordflow">switch</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>)</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>            {</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>                <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ECONNREFUSED</a>:</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>                    <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Connection refused\n&quot;</span>);</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>                    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>            }</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>            <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;LHNET_Read: recvfrom returned error: %s\n&quot;</span>, <a class="code hl_function" href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">LHNETPRIVATE_StrError</a>());</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>        }</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>    }</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.addresstype == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>)</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>    {</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>        <a class="code hl_define" href="lhnet_8c.html#a7687159c87b8758364782b0b3f00215a">SOCKLEN_T</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inetaddresslength</a>;</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>        address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8133923ab10aecdccfb4612843118e96">LHNETADDRESSTYPE_NONE</a>;</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inetaddresslength</a> = <span class="keyword">sizeof</span>(address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>);</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>        <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">recvfrom</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, (<span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">content</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">maxcontentlength</a>, <a class="code hl_define" href="lhnet_8c.html#af9dd83b5bebd3e596a01fdc8d83de46c">LHNET_RECVFROM_FLAGS</a>, &amp;address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a15c3355b003b8881687e2809cf25f1cc">sock</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inetaddresslength</a>);</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> &gt; 0)</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>        {</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a> = <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>;</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>            address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ntohs</a>(address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>.sin6_port);</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>;</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>        }</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> == -1)</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>        {</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = <a class="code hl_define" href="lhnet_8c.html#a2de2b00e7a7ec775e23986034ae2bed1">SOCKETERRNO</a>;</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">EWOULDBLOCK</a>)</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>            <span class="keywordflow">switch</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>)</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>            {</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>                <span class="keywordflow">case</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ECONNREFUSED</a>:</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>                    <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Connection refused\n&quot;</span>);</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>                    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>            }</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>            <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;LHNET_Read: recvfrom returned error: %s\n&quot;</span>, <a class="code hl_function" href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">LHNETPRIVATE_StrError</a>());</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>        }</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>    }</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>;</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>}</div>
</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span> </div>
<div class="foldopen" id="foldopen01135" data-start="{" data-end="}">
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"><a class="line" href="lhnet_8c.html#a1b518cb47f8232304886e63741a8cecb"> 1135</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="lhnet_8c.html#a1b518cb47f8232304886e63741a8cecb">LHNET_Write</a>(<a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">content</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">contentlength</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>)</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>{</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>    <a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *address = (<a class="code hl_struct" href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vaddress</a>;</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> = -1;</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a> || !address || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">content</a> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">contentlength</a> &lt; 1)</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.addresstype != address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">addresstype</a>)</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.addresstype == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183afbc53a768575dbd36416369f993db8fe">LHNETADDRESSTYPE_LOOP</a>)</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>    {</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>        <a class="code hl_struct" href="structlhnetpacket__t.html">lhnetpacket_t</a> *p;</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>        p = (<a class="code hl_struct" href="structlhnetpacket__t.html">lhnetpacket_t</a> *)<a class="code hl_define" href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<span class="keyword">sizeof</span>(*p) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">contentlength</a>);</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>        p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#a91ad552d9370412b7cf9531741d50371">data</a> = (<span class="keywordtype">void</span> *)(p + 1);</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#a91ad552d9370412b7cf9531741d50371">data</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">content</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">contentlength</a>);</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>        p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#af08fd197114b1de5a3d53dd20a22a963">length</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">contentlength</a>;</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>        p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#aba63116b4250fa76cd58001bd23b4a25">sourceport</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.port;</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>        p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#a281a9de59fcfdaf482035d7c4f7f134b">destinationport</a> = address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">port</a>;</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>        p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#ae0ce26fa3e2b9e92c5695d384da0d547">timeout</a> = time(<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) + 10;</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>        <a class="code hl_function" href="com__list_8h.html#a95b7e3d23190bec5810ef77ed997bb45">List_Add_Tail</a>(&amp;p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#afa5f10d146cad13f481bc424f9937ff6">list</a>, &amp;<a class="code hl_variable" href="lhnet_8c.html#a7b221c5655c9a814a83ee1f4ff1cc48b">lhnet_packetlist</a>.<a class="code hl_variable" href="structlhnetpacket__t.html#afa5f10d146cad13f481bc424f9937ff6">list</a>);</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span> </div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span><span class="preprocessor">#ifndef STANDALONETEST</span></div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>        p-&gt;<a class="code hl_variable" href="structlhnetpacket__t.html#adb0fccc1a7460bfd078778ed9eb660c6">sentdoubletime</a> = <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a>;</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>        <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">contentlength</a>;</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>    }</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.addresstype == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>)</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>    {</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>        <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendto</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, (<span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">content</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">contentlength</a>, <a class="code hl_define" href="lhnet_8c.html#a56dff094178abdc0661cba1c4d6e6b27">LHNET_SENDTO_FLAGS</a>, (<span class="keyword">struct</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddr</a> *)&amp;address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">in</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddr_in</a>));</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> == -1)</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>        {</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="lhnet_8c.html#a2de2b00e7a7ec775e23986034ae2bed1">SOCKETERRNO</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">EWOULDBLOCK</a>)</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>            <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;LHNET_Write: sendto returned error: %s\n&quot;</span>, <a class="code hl_function" href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">LHNETPRIVATE_StrError</a>());</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>        }</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>    }</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span><span class="preprocessor">#ifndef NOSUPPORTIPV6</span></div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;address.addresstype == <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>)</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>    {</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>        <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendto</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lhnetsocket</a>-&gt;inetsocket, (<span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">content</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">contentlength</a>, 0, (<span class="keyword">struct</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddr</a> *)&amp;address-&gt;<a class="code hl_variable" href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">addr</a>.<a class="code hl_variable" href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">in6</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddr_in6</a>));</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a> == -1)</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>        {</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="lhnet_8c.html#a2de2b00e7a7ec775e23986034ae2bed1">SOCKETERRNO</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">EWOULDBLOCK</a>)</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>            <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;LHNET_Write: sendto returned error: %s\n&quot;</span>, <a class="code hl_function" href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">LHNETPRIVATE_StrError</a>());</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>        }</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>    }</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>;</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>}</div>
</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span> </div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span><span class="preprocessor">#ifdef STANDALONETEST</span></div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span><span class="keywordtype">int</span> <a class="code hl_function" href="shader__glsl_8h.html#af206be2af8260b2763240b01ad0dc9c0">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>{</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span><span class="preprocessor">#if 1</span></div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>    <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#a39774db434725e51f4ad4c04150ed6a1">buffer</a> = <span class="stringliteral">&quot;test&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">buffer2</a>[1024];</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">blen</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(<a class="code hl_variable" href="glquake_8h.html#a39774db434725e51f4ad4c04150ed6a1">buffer</a>);</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">b2len</a> = 1024;</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>    <a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sock1</a>;</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>    <a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sock2</a>;</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>    <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">myaddy1</a>;</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>    <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">myaddy2</a>;</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>    <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">myaddy3</a>;</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>    <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localhostaddy1</a>;</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>    <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localhostaddy2</a>;</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test1</a>;</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test2</a>;</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span> </div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;calling LHNET_Init\n&quot;</span>);</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>    <a class="code hl_function" href="lhnet_8c.html#a4ae51b1bcceb94c99fefa0b296797c8d">LHNET_Init</a>();</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span> </div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;calling LHNET_FromPort twice to create two local addresses\n&quot;</span>);</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>    <a class="code hl_function" href="lhnet_8c.html#a0bf8acfdb535455a716e3f3c31efcdeb">LHNETADDRESS_FromPort</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">myaddy1</a>, <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>, 4000);</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>    <a class="code hl_function" href="lhnet_8c.html#a0bf8acfdb535455a716e3f3c31efcdeb">LHNETADDRESS_FromPort</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">myaddy2</a>, <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>, 4001);</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>    <a class="code hl_function" href="lhnet_8c.html#a5dbacd69a7b0e891167efa403d24be29">LHNETADDRESS_FromString</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localhostaddy1</a>, <span class="stringliteral">&quot;127.0.0.1&quot;</span>, 4000);</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>    <a class="code hl_function" href="lhnet_8c.html#a5dbacd69a7b0e891167efa403d24be29">LHNETADDRESS_FromString</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localhostaddy2</a>, <span class="stringliteral">&quot;127.0.0.1&quot;</span>, 4001);</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span> </div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;calling LHNET_OpenSocket_Connectionless twice to create two local sockets\n&quot;</span>);</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sock1</a> = <a class="code hl_function" href="lhnet_8c.html#a4fe5025d9e503e04a4c2de41cf94317f">LHNET_OpenSocket_Connectionless</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">myaddy1</a>);</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sock2</a> = <a class="code hl_function" href="lhnet_8c.html#a4fe5025d9e503e04a4c2de41cf94317f">LHNET_OpenSocket_Connectionless</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">myaddy2</a>);</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span> </div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;calling LHNET_Write to send a packet from the first socket to the second socket\n&quot;</span>);</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test1</a> = <a class="code hl_function" href="lhnet_8c.html#a1b518cb47f8232304886e63741a8cecb">LHNET_Write</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sock1</a>, <a class="code hl_variable" href="glquake_8h.html#a39774db434725e51f4ad4c04150ed6a1">buffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">blen</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">localhostaddy2</a>);</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;sleeping briefly\n&quot;</span>);</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Sleep</a> (100);</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">usleep</a> (100000);</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;calling LHNET_Read on the second socket to read the packet sent from the first socket\n&quot;</span>);</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test2</a> = <a class="code hl_function" href="lhnet_8c.html#a8a3d464803101e400e5358c8fde8e683">LHNET_Read</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sock2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">buffer2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">b2len</a> - 1, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">myaddy3</a>);</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">test2</a> &gt; 0)</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;socket to socket test succeeded\n&quot;</span>);</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;socket to socket test failed\n&quot;</span>);</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span> </div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;press any key to exit\n&quot;</span>);</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">getchar</a>();</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span> </div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;calling LHNET_Shutdown\n&quot;</span>);</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>    <a class="code hl_function" href="lhnet_8c.html#a4ace1406ab47b73557f7e4378ca0149f">LHNET_Shutdown</a>();</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;exiting\n&quot;</span>);</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>    <a class="code hl_struct" href="structlhnetsocket__t.html">lhnetsocket_t</a> *sock[16], *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendsock</a>;</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsockets</a>;</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>;</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a486f808b7baede12df3669de9b413b92">length</a>;</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>    <span class="keywordtype">int</span> port;</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">time_t</a> oldtime;</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">time_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newtime</a>;</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>    <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendmessage</a>;</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendmessagelength</a>;</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">destaddress</a>;</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>    <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receiveaddress</a>;</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>    <a class="code hl_struct" href="structlhnetaddress__t.html">lhnetaddress_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddress</a>[16];</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#a39774db434725e51f4ad4c04150ed6a1">buffer</a>[1536], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring</a>[128], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring2</a>[128];</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>    <span class="keywordflow">if</span> ((argc == 2 || argc == 5) &amp;&amp; (port = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(argv[1])) &gt;= 1 &amp;&amp; port &lt; 65535)</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>    {</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;calling LHNET_Init()\n&quot;</span>);</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>        <a class="code hl_function" href="lhnet_8c.html#a4ae51b1bcceb94c99fefa0b296797c8d">LHNET_Init</a>();</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span> </div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsockets</a> = 0;</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>        <a class="code hl_function" href="lhnet_8c.html#a0bf8acfdb535455a716e3f3c31efcdeb">LHNETADDRESS_FromPort</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddress</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsockets</a>++], <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183afbc53a768575dbd36416369f993db8fe">LHNETADDRESSTYPE_LOOP</a>, port);</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>        <a class="code hl_function" href="lhnet_8c.html#a0bf8acfdb535455a716e3f3c31efcdeb">LHNETADDRESS_FromPort</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddress</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsockets</a>++], <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a>, port);</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>        <a class="code hl_function" href="lhnet_8c.html#a0bf8acfdb535455a716e3f3c31efcdeb">LHNETADDRESS_FromPort</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddress</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsockets</a>++], <a class="code hl_enumvalue" href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a>, port+1);</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span> </div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendsock</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendmessage</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendmessagelength</a> = 0;</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span> </div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsockets</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>        {</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>            <a class="code hl_function" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddress</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring</a>), 1);</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;calling LHNET_OpenSocket_Connectionless(&lt;%s&gt;)\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring</a>);</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>            <span class="keywordflow">if</span> ((sock[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_function" href="lhnet_8c.html#a4fe5025d9e503e04a4c2de41cf94317f">LHNET_OpenSocket_Connectionless</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddress</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>])))</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>            {</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>                <a class="code hl_function" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a>(<a class="code hl_function" href="lhnet_8c.html#a913a13078838978f9efb05c09b8de24f">LHNET_AddressFromSocket</a>(sock[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring2</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring2</a>), 1);</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;opened socket successfully (address \&quot;%s\&quot;)\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring2</a>);</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>            }</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>            {</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;failed to open socket\n&quot;</span>);</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0)</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>                {</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>                    <a class="code hl_function" href="lhnet_8c.html#a4ace1406ab47b73557f7e4378ca0149f">LHNET_Shutdown</a>();</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>                    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>                }</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>            }</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>        }</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>        <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a> = 0;</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>        <span class="keywordflow">if</span> (argc == 5)</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>        {</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>            <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(argv[2]);</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="lhnet_8c.html#a5dbacd69a7b0e891167efa403d24be29">LHNETADDRESS_FromString</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">destaddress</a>, argv[3], -1))</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>            {</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendmessage</a> = argv[4];</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendmessagelength</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendmessage</a>);</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendsock</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>                <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsockets</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>                    <span class="keywordflow">if</span> (sock[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp;&amp; <a class="code hl_function" href="lhnet_8h.html#abc7dd16b78670fc52acefcd5df2b88e7">LHNETADDRESS_GetAddressType</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">destaddress</a>) == <a class="code hl_function" href="lhnet_8h.html#abc7dd16b78670fc52acefcd5df2b88e7">LHNETADDRESS_GetAddressType</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sockaddress</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]))</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendsock</a> = sock[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendsock</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>                {</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;Could not find an open socket matching the addresstype (%i) of destination address, switching to listen only mode\n&quot;</span>, <a class="code hl_function" href="lhnet_8h.html#abc7dd16b78670fc52acefcd5df2b88e7">LHNETADDRESS_GetAddressType</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">destaddress</a>));</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>                    argc = 2;</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>                }</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>            }</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>            {</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;LHNETADDRESS_FromString did not like the address \&quot;%s\&quot;, switching to listen only mode\n&quot;</span>, argv[3]);</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>                argc = 2;</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>            }</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>        }</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;started, now listening for \&quot;exit\&quot; on the opened sockets\n&quot;</span>);</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>        oldtime = time(<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>        <span class="keywordflow">for</span>(;;)</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>        {</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">Sleep</a>(1);</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">usleep</a>(1);</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsockets</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>            {</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>                <span class="keywordflow">if</span> (sock[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>                {</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>                    <a class="code hl_variable" href="glquake_8h.html#a486f808b7baede12df3669de9b413b92">length</a> = <a class="code hl_function" href="lhnet_8c.html#a8a3d464803101e400e5358c8fde8e683">LHNET_Read</a>(sock[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code hl_variable" href="glquake_8h.html#a39774db434725e51f4ad4c04150ed6a1">buffer</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#a39774db434725e51f4ad4c04150ed6a1">buffer</a>), &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receiveaddress</a>);</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a486f808b7baede12df3669de9b413b92">length</a> &lt; 0)</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;localsock read error: length &lt; 0&quot;</span>);</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a486f808b7baede12df3669de9b413b92">length</a> &gt; 0 &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#a486f808b7baede12df3669de9b413b92">length</a> &lt; (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#a39774db434725e51f4ad4c04150ed6a1">buffer</a>))</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>                    {</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>                        <a class="code hl_variable" href="glquake_8h.html#a39774db434725e51f4ad4c04150ed6a1">buffer</a>[<a class="code hl_variable" href="glquake_8h.html#a486f808b7baede12df3669de9b413b92">length</a>] = 0;</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>                        <a class="code hl_function" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receiveaddress</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring</a>), 1);</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>                        <a class="code hl_function" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a>(<a class="code hl_function" href="lhnet_8c.html#a913a13078838978f9efb05c09b8de24f">LHNET_AddressFromSocket</a>(sock[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring2</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring2</a>), 1);</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;received message \&quot;%s\&quot; from \&quot;%s\&quot; on socket \&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#a39774db434725e51f4ad4c04150ed6a1">buffer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring2</a>);</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>                        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#a39774db434725e51f4ad4c04150ed6a1">buffer</a>, <span class="stringliteral">&quot;exit&quot;</span>))</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>                    }</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>                }</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>            }</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsockets</a>)</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>            <span class="keywordflow">if</span> (argc == 5 &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a> &gt; 0)</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>            {</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newtime</a> = time(<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newtime</a> != oldtime)</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>                {</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>                    <a class="code hl_function" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">destaddress</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring</a>), 1);</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>                    <a class="code hl_function" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a>(<a class="code hl_function" href="lhnet_8c.html#a913a13078838978f9efb05c09b8de24f">LHNET_AddressFromSocket</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendsock</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring2</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring2</a>), 1);</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;calling LHNET_Write(&lt;%s&gt;, \&quot;%s\&quot;, %i, &lt;%s&gt;)\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendmessage</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendmessagelength</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring</a>);</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>                    <a class="code hl_variable" href="glquake_8h.html#a486f808b7baede12df3669de9b413b92">length</a> = <a class="code hl_function" href="lhnet_8c.html#a1b518cb47f8232304886e63741a8cecb">LHNET_Write</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendsock</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendmessage</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendmessagelength</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">destaddress</a>);</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a486f808b7baede12df3669de9b413b92">length</a> == <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sendmessagelength</a>)</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;sent successfully\n&quot;</span>);</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;LH_Write failed, returned %i (length of message was %i)\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#a486f808b7baede12df3669de9b413b92">length</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(argv[4]));</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>                    oldtime = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">newtime</a>;</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>                    <a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a>--;</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a> &lt;= 0)</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;Done sending, still listening for \&quot;exit\&quot;\n&quot;</span>);</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>                }</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>            }</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>        }</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsockets</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>        {</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>            <span class="keywordflow">if</span> (sock[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>            {</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>                <a class="code hl_function" href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a>(<a class="code hl_function" href="lhnet_8c.html#a913a13078838978f9efb05c09b8de24f">LHNET_AddressFromSocket</a>(sock[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring2</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring2</a>), 1);</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;calling LHNET_CloseSocket(&lt;%s&gt;)\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">addressstring2</a>);</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>                <a class="code hl_function" href="lhnet_8c.html#a34257a8adab6a1b5e37ca4da181bf7bd">LHNET_CloseSocket</a>(sock[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>            }</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>        }</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;calling LHNET_Shutdown()\n&quot;</span>);</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>        <a class="code hl_function" href="lhnet_8c.html#a4ace1406ab47b73557f7e4378ca0149f">LHNET_Shutdown</a>();</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>    }</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">printf</a>(<span class="stringliteral">&quot;Testing code for lhnet.c\nusage: lhnettest &lt;localportnumber&gt; [&lt;sendnumberoftimes&gt; &lt;sendaddress:port&gt; &lt;sendmessage&gt;]\n&quot;</span>);</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>}</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span> </div>
<div class="ttc" id="acom__list_8h_html_a5689fd1764530a075fc53b4f4e4bb0d1"><div class="ttname"><a href="com__list_8h.html#a5689fd1764530a075fc53b4f4e4bb0d1">List_Create</a></div><div class="ttdeci">static void List_Create(llist_t *list)</div><div class="ttdef"><b>Definition</b> <a href="com__list_8h_source.html#l00220">com_list.h:220</a></div></div>
<div class="ttc" id="acom__list_8h_html_a95b7e3d23190bec5810ef77ed997bb45"><div class="ttname"><a href="com__list_8h.html#a95b7e3d23190bec5810ef77ed997bb45">List_Add_Tail</a></div><div class="ttdeci">static void List_Add_Tail(llist_t *node, llist_t *head)</div><div class="ttdef"><b>Definition</b> <a href="com__list_8h_source.html#l00249">com_list.h:249</a></div></div>
<div class="ttc" id="acom__list_8h_html_ab178d2459c622921987ae5f92ce70bf2"><div class="ttname"><a href="com__list_8h.html#ab178d2459c622921987ae5f92ce70bf2">List_Delete</a></div><div class="ttdeci">static void List_Delete(llist_t *node)</div><div class="ttdef"><b>Definition</b> <a href="com__list_8h_source.html#l00274">com_list.h:274</a></div></div>
<div class="ttc" id="acom__list_8h_html_ac3e1d180a70bd9c49fb9838b081a6c27"><div class="ttname"><a href="com__list_8h.html#ac3e1d180a70bd9c49fb9838b081a6c27">List_For_Each_Entry_Safe</a></div><div class="ttdeci">#define List_For_Each_Entry_Safe(pos, n, head, type, member)</div><div class="ttdef"><b>Definition</b> <a href="com__list_8h_source.html#l00173">com_list.h:173</a></div></div>
<div class="ttc" id="acom__list_8h_html_adf2a19e6aecbb850500eb44ddfe17ef8"><div class="ttname"><a href="com__list_8h.html#adf2a19e6aecbb850500eb44ddfe17ef8">List_For_Each_Entry</a></div><div class="ttdeci">#define List_For_Each_Entry(pos, head, type, member)</div><div class="ttdef"><b>Definition</b> <a href="com__list_8h_source.html#l00121">com_list.h:121</a></div></div>
<div class="ttc" id="acommon_8c_html_ae36050083f45e395189fee6aa45fbb0c"><div class="ttname"><a href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a></div><div class="ttdeci">int dpsnprintf(char *buffer, size_t buffersize, const char *format,...)</div><div class="ttdoc">Returns the number of printed characters, excluding the final '\0' or returns -1 if the buffer isn't ...</div><div class="ttdef"><b>Definition</b> <a href="common_8c_source.html#l00997">common.c:997</a></div></div>
<div class="ttc" id="aconsole_8c_html_a1cf9711475097b11dc41f743254ec77e"><div class="ttname"><a href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a></div><div class="ttdeci">void Con_Print(const char *msg)</div><div class="ttdoc">Prints to all appropriate console targets, and adds timestamps.</div><div class="ttdef"><b>Definition</b> <a href="console_8c_source.html#l01450">console.c:1450</a></div></div>
<div class="ttc" id="aconsole_8c_html_a2696300802453d9333e9f52e5fae15bc"><div class="ttname"><a href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a></div><div class="ttdeci">void Con_DPrintf(const char *fmt,...)</div><div class="ttdoc">A Con_Printf that only shows up if the &quot;developer&quot; cvar is set.</div><div class="ttdef"><b>Definition</b> <a href="console_8c_source.html#l01490">console.c:1490</a></div></div>
<div class="ttc" id="aconsole_8c_html_a49b71fe9a87e57a440e07af4a869a9f6"><div class="ttname"><a href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a></div><div class="ttdeci">void Con_Printf(const char *fmt,...)</div><div class="ttdoc">Prints to all appropriate console targets.</div><div class="ttdef"><b>Definition</b> <a href="console_8c_source.html#l01460">console.c:1460</a></div></div>
<div class="ttc" id="aconsole_8h_html_ae151ed35a905aff75d5f5dc32cd965bb"><div class="ttname"><a href="console_8h.html#ae151ed35a905aff75d5f5dc32cd965bb">CON_ERROR</a></div><div class="ttdeci">#define CON_ERROR</div><div class="ttdef"><b>Definition</b> <a href="console_8h_source.html#l00097">console.h:97</a></div></div>
<div class="ttc" id="adarkplaces_8h_html"><div class="ttname"><a href="darkplaces_8h.html">darkplaces.h</a></div></div>
<div class="ttc" id="afs_8c_html_a93257bedba32e45fc3f07bea139c0604"><div class="ttname"><a href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a></div><div class="ttdeci">static int(ZEXPORT *qz_inflate)(z_stream *strm</div></div>
<div class="ttc" id="aglquake_8h_html_a303f3de7a8816217b5a6987c647164b1"><div class="ttname"><a href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a></div><div class="ttdeci">GLsizei const GLfloat * value</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00739">glquake.h:739</a></div></div>
<div class="ttc" id="aglquake_8h_html_a39774db434725e51f4ad4c04150ed6a1"><div class="ttname"><a href="glquake_8h.html#a39774db434725e51f4ad4c04150ed6a1">buffer</a></div><div class="ttdeci">GLuint buffer</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00629">glquake.h:629</a></div></div>
<div class="ttc" id="aglquake_8h_html_a486f808b7baede12df3669de9b413b92"><div class="ttname"><a href="glquake_8h.html#a486f808b7baede12df3669de9b413b92">length</a></div><div class="ttdeci">GLenum GLuint GLenum GLsizei length</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00656">glquake.h:656</a></div></div>
<div class="ttc" id="aglquake_8h_html_a51af0e2e7aa22f9dc0c188ee8baa7a11"><div class="ttname"><a href="glquake_8h.html#a51af0e2e7aa22f9dc0c188ee8baa7a11">count</a></div><div class="ttdeci">GLenum GLenum GLsizei count</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00655">glquake.h:655</a></div></div>
<div class="ttc" id="aglquake_8h_html_ac615821e7cf9469189648617cb1275be"><div class="ttname"><a href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a></div><div class="ttdeci">const GLchar * name</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00600">glquake.h:600</a></div></div>
<div class="ttc" id="aglquake_8h_html_ae79dfeea357422bd20dbcaa2afe88ac6"><div class="ttname"><a href="glquake_8h.html#ae79dfeea357422bd20dbcaa2afe88ac6">string</a></div><div class="ttdeci">GLsizei const GLchar ** string</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00727">glquake.h:727</a></div></div>
<div class="ttc" id="aglquake_8h_html_af7ca775b6d9354291c4d7d01b8b2a8bc"><div class="ttname"><a href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a></div><div class="ttdeci">GLuint index</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00628">glquake.h:628</a></div></div>
<div class="ttc" id="ahost_8c_html_a18cf3cec0ecbf5cc14125f494c49023d"><div class="ttname"><a href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a></div><div class="ttdeci">host_static_t host</div><div class="ttdef"><b>Definition</b> <a href="host_8c_source.html#l00041">host.c:41</a></div></div>
<div class="ttc" id="alhnet_8c_html_a08a46a5e7b9bcc97ddf4ab33bb411ae8"><div class="ttname"><a href="lhnet_8c.html#a08a46a5e7b9bcc97ddf4ab33bb411ae8">LHNETADDRESS_SetPort</a></div><div class="ttdeci">int LHNETADDRESS_SetPort(lhnetaddress_t *vaddress, int port)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00642">lhnet.c:642</a></div></div>
<div class="ttc" id="alhnet_8c_html_a0bf8acfdb535455a716e3f3c31efcdeb"><div class="ttname"><a href="lhnet_8c.html#a0bf8acfdb535455a716e3f3c31efcdeb">LHNETADDRESS_FromPort</a></div><div class="ttdeci">int LHNETADDRESS_FromPort(lhnetaddress_t *vaddress, lhnetaddresstype_t addresstype, int port)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00125">lhnet.c:125</a></div></div>
<div class="ttc" id="alhnet_8c_html_a191c91d25271eed39a5eb76e2d8e5dde"><div class="ttname"><a href="lhnet_8c.html#a191c91d25271eed39a5eb76e2d8e5dde">LHNETADDRESS_ToString</a></div><div class="ttdeci">int LHNETADDRESS_ToString(const lhnetaddress_t *vaddress, char *string, int stringbuffersize, int includeport)</div><div class="ttdoc">Returns the number of bytes written to *string excluding the \0 terminator.</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00540">lhnet.c:540</a></div></div>
<div class="ttc" id="alhnet_8c_html_a1b518cb47f8232304886e63741a8cecb"><div class="ttname"><a href="lhnet_8c.html#a1b518cb47f8232304886e63741a8cecb">LHNET_Write</a></div><div class="ttdeci">int LHNET_Write(lhnetsocket_t *lhnetsocket, const void *content, int contentlength, const lhnetaddress_t *vaddress)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l01135">lhnet.c:1135</a></div></div>
<div class="ttc" id="alhnet_8c_html_a27205413f567fb56ad7bb97d77938baa"><div class="ttname"><a href="lhnet_8c.html#a27205413f567fb56ad7bb97d77938baa">LHNETADDRESS_GetInterfaceName</a></div><div class="ttdeci">const char * LHNETADDRESS_GetInterfaceName(const lhnetaddress_t *vaddress, char *ifname, size_t ifnamelength)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00608">lhnet.c:608</a></div></div>
<div class="ttc" id="alhnet_8c_html_a2d4155a75582d68f23163b010d4cbc96"><div class="ttname"><a href="lhnet_8c.html#a2d4155a75582d68f23163b010d4cbc96">MAX_NAMECACHE</a></div><div class="ttdeci">#define MAX_NAMECACHE</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00115">lhnet.c:115</a></div></div>
<div class="ttc" id="alhnet_8c_html_a2de2b00e7a7ec775e23986034ae2bed1"><div class="ttname"><a href="lhnet_8c.html#a2de2b00e7a7ec775e23986034ae2bed1">SOCKETERRNO</a></div><div class="ttdeci">#define SOCKETERRNO</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00085">lhnet.c:85</a></div></div>
<div class="ttc" id="alhnet_8c_html_a34257a8adab6a1b5e37ca4da181bf7bd"><div class="ttname"><a href="lhnet_8c.html#a34257a8adab6a1b5e37ca4da181bf7bd">LHNET_CloseSocket</a></div><div class="ttdeci">void LHNET_CloseSocket(lhnetsocket_t *lhnetsocket)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l01012">lhnet.c:1012</a></div></div>
<div class="ttc" id="alhnet_8c_html_a4a6b5147b94394ed372373b6fc38f5a9"><div class="ttname"><a href="lhnet_8c.html#a4a6b5147b94394ed372373b6fc38f5a9">namecacheposition</a></div><div class="ttdeci">static int namecacheposition</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00123">lhnet.c:123</a></div></div>
<div class="ttc" id="alhnet_8c_html_a4ace1406ab47b73557f7e4378ca0149f"><div class="ttname"><a href="lhnet_8c.html#a4ace1406ab47b73557f7e4378ca0149f">LHNET_Shutdown</a></div><div class="ttdeci">void LHNET_Shutdown(void)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00751">lhnet.c:751</a></div></div>
<div class="ttc" id="alhnet_8c_html_a4ae51b1bcceb94c99fefa0b296797c8d"><div class="ttname"><a href="lhnet_8c.html#a4ae51b1bcceb94c99fefa0b296797c8d">LHNET_Init</a></div><div class="ttdeci">void LHNET_Init(void)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00725">lhnet.c:725</a></div></div>
<div class="ttc" id="alhnet_8c_html_a4f6d4151a55ef98d4fbcafd2fcd83559"><div class="ttname"><a href="lhnet_8c.html#a4f6d4151a55ef98d4fbcafd2fcd83559">LHNET_DefaultDSCP</a></div><div class="ttdeci">int LHNET_DefaultDSCP(int dscp)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00739">lhnet.c:739</a></div></div>
<div class="ttc" id="alhnet_8c_html_a4fe5025d9e503e04a4c2de41cf94317f"><div class="ttname"><a href="lhnet_8c.html#a4fe5025d9e503e04a4c2de41cf94317f">LHNET_OpenSocket_Connectionless</a></div><div class="ttdeci">lhnetsocket_t * LHNET_OpenSocket_Connectionless(lhnetaddress_t *address)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00832">lhnet.c:832</a></div></div>
<div class="ttc" id="alhnet_8c_html_a56dff094178abdc0661cba1c4d6e6b27"><div class="ttname"><a href="lhnet_8c.html#a56dff094178abdc0661cba1c4d6e6b27">LHNET_SENDTO_FLAGS</a></div><div class="ttdeci">#define LHNET_SENDTO_FLAGS</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00095">lhnet.c:95</a></div></div>
<div class="ttc" id="alhnet_8c_html_a5dbacd69a7b0e891167efa403d24be29"><div class="ttname"><a href="lhnet_8c.html#a5dbacd69a7b0e891167efa403d24be29">LHNETADDRESS_FromString</a></div><div class="ttdeci">int LHNETADDRESS_FromString(lhnetaddress_t *vaddress, const char *string, int defaultport)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00204">lhnet.c:204</a></div></div>
<div class="ttc" id="alhnet_8c_html_a7687159c87b8758364782b0b3f00215a"><div class="ttname"><a href="lhnet_8c.html#a7687159c87b8758364782b0b3f00215a">SOCKLEN_T</a></div><div class="ttdeci">#define SOCKLEN_T</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00087">lhnet.c:87</a></div></div>
<div class="ttc" id="alhnet_8c_html_a7b221c5655c9a814a83ee1f4ff1cc48b"><div class="ttname"><a href="lhnet_8c.html#a7b221c5655c9a814a83ee1f4ff1cc48b">lhnet_packetlist</a></div><div class="ttdeci">static lhnetpacket_t lhnet_packetlist</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00718">lhnet.c:718</a></div></div>
<div class="ttc" id="alhnet_8c_html_a8a3d464803101e400e5358c8fde8e683"><div class="ttname"><a href="lhnet_8c.html#a8a3d464803101e400e5358c8fde8e683">LHNET_Read</a></div><div class="ttdeci">int LHNET_Read(lhnetsocket_t *lhnetsocket, void *content, int maxcontentlength, lhnetaddress_t *vaddress)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l01034">lhnet.c:1034</a></div></div>
<div class="ttc" id="alhnet_8c_html_a8da89e290c15d954c1a64e65f3418499"><div class="ttname"><a href="lhnet_8c.html#a8da89e290c15d954c1a64e65f3418499">lhnet_default_dscp</a></div><div class="ttdeci">static int lhnet_default_dscp</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00719">lhnet.c:719</a></div></div>
<div class="ttc" id="alhnet_8c_html_a913a13078838978f9efb05c09b8de24f"><div class="ttname"><a href="lhnet_8c.html#a913a13078838978f9efb05c09b8de24f">LHNET_AddressFromSocket</a></div><div class="ttdeci">lhnetaddress_t * LHNET_AddressFromSocket(lhnetsocket_t *sock)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l01026">lhnet.c:1026</a></div></div>
<div class="ttc" id="alhnet_8c_html_a91c521e79c4333135c39ffbb3869eb25"><div class="ttname"><a href="lhnet_8c.html#a91c521e79c4333135c39ffbb3869eb25">lhnet_socketlist</a></div><div class="ttdeci">lhnetsocket_t lhnet_socketlist</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00717">lhnet.c:717</a></div></div>
<div class="ttc" id="alhnet_8c_html_aab8104857b333d2e9a79cb07605bbdf7"><div class="ttname"><a href="lhnet_8c.html#aab8104857b333d2e9a79cb07605bbdf7">LHNETADDRESS_Resolve</a></div><div class="ttdeci">static int LHNETADDRESS_Resolve(lhnetaddressnative_t *address, const char *name, int port)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00163">lhnet.c:163</a></div></div>
<div class="ttc" id="alhnet_8c_html_ab0df364a898388d217ff02d86282826d"><div class="ttname"><a href="lhnet_8c.html#ab0df364a898388d217ff02d86282826d">lhnet_active</a></div><div class="ttdeci">static int lhnet_active</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00716">lhnet.c:716</a></div></div>
<div class="ttc" id="alhnet_8c_html_ad2112bd6cf75f69c018ceae8a6351bd0"><div class="ttname"><a href="lhnet_8c.html#ad2112bd6cf75f69c018ceae8a6351bd0">namecache</a></div><div class="ttdeci">static struct namecache_s namecache[MAX_NAMECACHE]</div></div>
<div class="ttc" id="alhnet_8c_html_ad2d1c4dd0a32e296151deba96f1c9651"><div class="ttname"><a href="lhnet_8c.html#ad2d1c4dd0a32e296151deba96f1c9651">ioctlsocket</a></div><div class="ttdeci">#define ioctlsocket</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00083">lhnet.c:83</a></div></div>
<div class="ttc" id="alhnet_8c_html_ad5efcc4b5bbf05a1dd889a298430ed94"><div class="ttname"><a href="lhnet_8c.html#ad5efcc4b5bbf05a1dd889a298430ed94">LHNETADDRESS_GetPort</a></div><div class="ttdeci">int LHNETADDRESS_GetPort(const lhnetaddress_t *address)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00635">lhnet.c:635</a></div></div>
<div class="ttc" id="alhnet_8c_html_af9dd83b5bebd3e596a01fdc8d83de46c"><div class="ttname"><a href="lhnet_8c.html#af9dd83b5bebd3e596a01fdc8d83de46c">LHNET_RECVFROM_FLAGS</a></div><div class="ttdeci">#define LHNET_RECVFROM_FLAGS</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00094">lhnet.c:94</a></div></div>
<div class="ttc" id="alhnet_8c_html_afcb50bceea3f2dc4d4c1663bb6d35e9e"><div class="ttname"><a href="lhnet_8c.html#afcb50bceea3f2dc4d4c1663bb6d35e9e">LHNETADDRESS_Compare</a></div><div class="ttdeci">int LHNETADDRESS_Compare(const lhnetaddress_t *vaddress1, const lhnetaddress_t *vaddress2)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00665">lhnet.c:665</a></div></div>
<div class="ttc" id="alhnet_8c_html_afdbb9d84bd17efd2ae7290e664992c48"><div class="ttname"><a href="lhnet_8c.html#afdbb9d84bd17efd2ae7290e664992c48">closesocket</a></div><div class="ttdeci">#define closesocket</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00084">lhnet.c:84</a></div></div>
<div class="ttc" id="alhnet_8c_html_afde8bc4c159f4094dbbbea0668ba9014"><div class="ttname"><a href="lhnet_8c.html#afde8bc4c159f4094dbbbea0668ba9014">LHNETPRIVATE_StrError</a></div><div class="ttdeci">static const char * LHNETPRIVATE_StrError(void)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00774">lhnet.c:774</a></div></div>
<div class="ttc" id="alhnet_8h_html"><div class="ttname"><a href="lhnet_8h.html">lhnet.h</a></div></div>
<div class="ttc" id="alhnet_8h_html_aaf5f00c130fe2e819ddbe3e46cf84183"><div class="ttname"><a href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183">lhnetaddresstype_t</a></div><div class="ttdeci">lhnetaddresstype_t</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8h_source.html#l00010">lhnet.h:11</a></div></div>
<div class="ttc" id="alhnet_8h_html_aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e"><div class="ttname"><a href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a71820d6296fb379a882fd00e9f45e88e">LHNETADDRESSTYPE_INET6</a></div><div class="ttdeci">@ LHNETADDRESSTYPE_INET6</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8h_source.html#l00016">lhnet.h:15</a></div></div>
<div class="ttc" id="alhnet_8h_html_aaf5f00c130fe2e819ddbe3e46cf84183a8133923ab10aecdccfb4612843118e96"><div class="ttname"><a href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8133923ab10aecdccfb4612843118e96">LHNETADDRESSTYPE_NONE</a></div><div class="ttdeci">@ LHNETADDRESSTYPE_NONE</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8h_source.html#l00012">lhnet.h:12</a></div></div>
<div class="ttc" id="alhnet_8h_html_aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2"><div class="ttname"><a href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183a8d130db7ee413173dc374366816426f2">LHNETADDRESSTYPE_INET4</a></div><div class="ttdeci">@ LHNETADDRESSTYPE_INET4</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8h_source.html#l00014">lhnet.h:14</a></div></div>
<div class="ttc" id="alhnet_8h_html_aaf5f00c130fe2e819ddbe3e46cf84183afbc53a768575dbd36416369f993db8fe"><div class="ttname"><a href="lhnet_8h.html#aaf5f00c130fe2e819ddbe3e46cf84183afbc53a768575dbd36416369f993db8fe">LHNETADDRESSTYPE_LOOP</a></div><div class="ttdeci">@ LHNETADDRESSTYPE_LOOP</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8h_source.html#l00013">lhnet.h:13</a></div></div>
<div class="ttc" id="alhnet_8h_html_abc7dd16b78670fc52acefcd5df2b88e7"><div class="ttname"><a href="lhnet_8h.html#abc7dd16b78670fc52acefcd5df2b88e7">LHNETADDRESS_GetAddressType</a></div><div class="ttdeci">static lhnetaddresstype_t LHNETADDRESS_GetAddressType(const lhnetaddress_t *address)</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8h_source.html#l00031">lhnet.h:31</a></div></div>
<div class="ttc" id="anetconn_8c_html_a296f91b40cc46d3fbd4bcfce195c4b72"><div class="ttname"><a href="netconn_8c.html#a296f91b40cc46d3fbd4bcfce195c4b72">net_fakelag</a></div><div class="ttdeci">cvar_t net_fakelag</div><div class="ttdef"><b>Definition</b> <a href="netconn_8c_source.html#l00087">netconn.c:87</a></div></div>
<div class="ttc" id="anetconn_8h_html"><div class="ttname"><a href="netconn_8h.html">netconn.h</a></div></div>
<div class="ttc" id="aprvm__execprogram_8h_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition</b> <a href="prvm__execprogram_8h_source.html#l00002">prvm_execprogram.h:2</a></div></div>
<div class="ttc" id="aqtypes_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00012">qtypes.h:12</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_ada7daae51ef1e670767c18b83ea78044"><div class="ttname"><a href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a></div><div class="ttdeci">ret a</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00296">shader_glsl.h:296</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_af206be2af8260b2763240b01ad0dc9c0"><div class="ttname"><a href="shader__glsl_8h.html#af206be2af8260b2763240b01ad0dc9c0">main</a></div><div class="ttdeci">void main(void)\n&quot;</div></div>
<div class="ttc" id="astructcvar__t_html_a305faa0167494135297f1b8e6216d469"><div class="ttname"><a href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">cvar_t::value</a></div><div class="ttdeci">float value</div><div class="ttdef"><b>Definition</b> <a href="cvar_8h_source.html#l00074">cvar.h:74</a></div></div>
<div class="ttc" id="astructhost__static__t_html_ac38d937c03a5f5f973a77641c0ae1280"><div class="ttname"><a href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">host_static_t::realtime</a></div><div class="ttdeci">double realtime</div><div class="ttdef"><b>Definition</b> <a href="host_8h_source.html#l00037">host.h:37</a></div></div>
<div class="ttc" id="astructlhnetaddress__t_html"><div class="ttname"><a href="structlhnetaddress__t.html">lhnetaddress_t</a></div><div class="ttdef"><b>Definition</b> <a href="lhnet_8h_source.html#l00019">lhnet.h:20</a></div></div>
<div class="ttc" id="astructlhnetaddress__t_html_a03061e1e9980e51aee4083e86829b0ad"><div class="ttname"><a href="structlhnetaddress__t.html#a03061e1e9980e51aee4083e86829b0ad">lhnetaddress_t::addresstype</a></div><div class="ttdeci">lhnetaddresstype_t addresstype</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8h_source.html#l00021">lhnet.h:21</a></div></div>
<div class="ttc" id="astructlhnetaddress__t_html_ae5b92a9f2153024df7fb6032a728c7ce"><div class="ttname"><a href="structlhnetaddress__t.html#ae5b92a9f2153024df7fb6032a728c7ce">lhnetaddress_t::port</a></div><div class="ttdeci">int port</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8h_source.html#l00022">lhnet.h:22</a></div></div>
<div class="ttc" id="astructlhnetaddressnative__t_html"><div class="ttname"><a href="structlhnetaddressnative__t.html">lhnetaddressnative_t</a></div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00098">lhnet.c:99</a></div></div>
<div class="ttc" id="astructlhnetaddressnative__t_html_a15c3355b003b8881687e2809cf25f1cc"><div class="ttname"><a href="structlhnetaddressnative__t.html#a15c3355b003b8881687e2809cf25f1cc">lhnetaddressnative_t::sock</a></div><div class="ttdeci">struct sockaddr sock</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00104">lhnet.c:104</a></div></div>
<div class="ttc" id="astructlhnetaddressnative__t_html_a8911818fe95bb5bda341a4a3c4a6e7b5"><div class="ttname"><a href="structlhnetaddressnative__t.html#a8911818fe95bb5bda341a4a3c4a6e7b5">lhnetaddressnative_t::port</a></div><div class="ttdeci">int port</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00101">lhnet.c:101</a></div></div>
<div class="ttc" id="astructlhnetaddressnative__t_html_a9f956bf2cda06c401c4a16d483f9bcdf"><div class="ttname"><a href="structlhnetaddressnative__t.html#a9f956bf2cda06c401c4a16d483f9bcdf">lhnetaddressnative_t::in6</a></div><div class="ttdeci">struct sockaddr_in6 in6</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00107">lhnet.c:107</a></div></div>
<div class="ttc" id="astructlhnetaddressnative__t_html_aa10f5fe5742e29bf2ff01134205e1bd5"><div class="ttname"><a href="structlhnetaddressnative__t.html#aa10f5fe5742e29bf2ff01134205e1bd5">lhnetaddressnative_t::in</a></div><div class="ttdeci">struct sockaddr_in in</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00105">lhnet.c:105</a></div></div>
<div class="ttc" id="astructlhnetaddressnative__t_html_ac9a1ff60c9c70e5acac4e75617ebe186"><div class="ttname"><a href="structlhnetaddressnative__t.html#ac9a1ff60c9c70e5acac4e75617ebe186">lhnetaddressnative_t::addr</a></div><div class="ttdeci">union lhnetaddressnative_t::@11 addr</div></div>
<div class="ttc" id="astructlhnetaddressnative__t_html_ae0a6f90b388cc6a2c193b506024d29b4"><div class="ttname"><a href="structlhnetaddressnative__t.html#ae0a6f90b388cc6a2c193b506024d29b4">lhnetaddressnative_t::addresstype</a></div><div class="ttdeci">lhnetaddresstype_t addresstype</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00100">lhnet.c:100</a></div></div>
<div class="ttc" id="astructlhnetpacket__t_html"><div class="ttname"><a href="structlhnetpacket__t.html">lhnetpacket_t</a></div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00702">lhnet.c:703</a></div></div>
<div class="ttc" id="astructlhnetpacket__t_html_a281a9de59fcfdaf482035d7c4f7f134b"><div class="ttname"><a href="structlhnetpacket__t.html#a281a9de59fcfdaf482035d7c4f7f134b">lhnetpacket_t::destinationport</a></div><div class="ttdeci">int destinationport</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00707">lhnet.c:707</a></div></div>
<div class="ttc" id="astructlhnetpacket__t_html_a91ad552d9370412b7cf9531741d50371"><div class="ttname"><a href="structlhnetpacket__t.html#a91ad552d9370412b7cf9531741d50371">lhnetpacket_t::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00704">lhnet.c:704</a></div></div>
<div class="ttc" id="astructlhnetpacket__t_html_aba63116b4250fa76cd58001bd23b4a25"><div class="ttname"><a href="structlhnetpacket__t.html#aba63116b4250fa76cd58001bd23b4a25">lhnetpacket_t::sourceport</a></div><div class="ttdeci">int sourceport</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00706">lhnet.c:706</a></div></div>
<div class="ttc" id="astructlhnetpacket__t_html_adb0fccc1a7460bfd078778ed9eb660c6"><div class="ttname"><a href="structlhnetpacket__t.html#adb0fccc1a7460bfd078778ed9eb660c6">lhnetpacket_t::sentdoubletime</a></div><div class="ttdeci">double sentdoubletime</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00710">lhnet.c:710</a></div></div>
<div class="ttc" id="astructlhnetpacket__t_html_ae0ce26fa3e2b9e92c5695d384da0d547"><div class="ttname"><a href="structlhnetpacket__t.html#ae0ce26fa3e2b9e92c5695d384da0d547">lhnetpacket_t::timeout</a></div><div class="ttdeci">time_t timeout</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00708">lhnet.c:708</a></div></div>
<div class="ttc" id="astructlhnetpacket__t_html_af08fd197114b1de5a3d53dd20a22a963"><div class="ttname"><a href="structlhnetpacket__t.html#af08fd197114b1de5a3d53dd20a22a963">lhnetpacket_t::length</a></div><div class="ttdeci">int length</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00705">lhnet.c:705</a></div></div>
<div class="ttc" id="astructlhnetpacket__t_html_afa5f10d146cad13f481bc424f9937ff6"><div class="ttname"><a href="structlhnetpacket__t.html#afa5f10d146cad13f481bc424f9937ff6">lhnetpacket_t::list</a></div><div class="ttdeci">llist_t list</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00712">lhnet.c:712</a></div></div>
<div class="ttc" id="astructlhnetsocket__t_html"><div class="ttname"><a href="structlhnetsocket__t.html">lhnetsocket_t</a></div><div class="ttdef"><b>Definition</b> <a href="lhnet_8h_source.html#l00043">lhnet.h:44</a></div></div>
<div class="ttc" id="astructlhnetsocket__t_html_a5c0d0623751d4eb3ed879a6aa659b28d"><div class="ttname"><a href="structlhnetsocket__t.html#a5c0d0623751d4eb3ed879a6aa659b28d">lhnetsocket_t::list</a></div><div class="ttdeci">llist_t list</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8h_source.html#l00047">lhnet.h:47</a></div></div>
<div class="ttc" id="astructlhnetsocket__t_html_aca06685cb3bfd510c27944c09a8a529b"><div class="ttname"><a href="structlhnetsocket__t.html#aca06685cb3bfd510c27944c09a8a529b">lhnetsocket_t::address</a></div><div class="ttdeci">lhnetaddress_t address</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8h_source.html#l00045">lhnet.h:45</a></div></div>
<div class="ttc" id="astructllist__t_html"><div class="ttname"><a href="structllist__t.html">llist_t</a></div><div class="ttdef"><b>Definition</b> <a href="com__list_8h_source.html#l00030">com_list.h:31</a></div></div>
<div class="ttc" id="astructnamecache__s_html"><div class="ttname"><a href="structnamecache__s.html">namecache_s</a></div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00116">lhnet.c:117</a></div></div>
<div class="ttc" id="astructnamecache__s_html_a0a606eb967d3a8b07b10ff0cad35e883"><div class="ttname"><a href="structnamecache__s.html#a0a606eb967d3a8b07b10ff0cad35e883">namecache_s::name</a></div><div class="ttdeci">char name[64]</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00120">lhnet.c:120</a></div></div>
<div class="ttc" id="astructnamecache__s_html_a1c487aad13258ed89b4ce7cecaf2ed74"><div class="ttname"><a href="structnamecache__s.html#a1c487aad13258ed89b4ce7cecaf2ed74">namecache_s::expirationtime</a></div><div class="ttdeci">double expirationtime</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00119">lhnet.c:119</a></div></div>
<div class="ttc" id="astructnamecache__s_html_a5e60a2e42f3103d6b5480b08c541e131"><div class="ttname"><a href="structnamecache__s.html#a5e60a2e42f3103d6b5480b08c541e131">namecache_s::address</a></div><div class="ttdeci">lhnetaddressnative_t address</div><div class="ttdef"><b>Definition</b> <a href="lhnet_8c_source.html#l00118">lhnet.c:118</a></div></div>
<div class="ttc" id="asys_8h_html"><div class="ttname"><a href="sys_8h.html">sys.h</a></div></div>
<div class="ttc" id="azone_8h_html"><div class="ttname"><a href="zone_8h.html">zone.h</a></div></div>
<div class="ttc" id="azone_8h_html_a35deb8ef816a08fb1bc8feac8db020c5"><div class="ttname"><a href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a></div><div class="ttdeci">#define Z_Malloc(size)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00154">zone.h:154</a></div></div>
<div class="ttc" id="azone_8h_html_abbce8ea44a12486a6b59f31f02bab5ee"><div class="ttname"><a href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a></div><div class="ttdeci">#define Z_Free(data)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00157">zone.h:157</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="lhnet_8c.html">lhnet.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
