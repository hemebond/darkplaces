<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DarkPlaces: r_shadow.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-customisations.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="darkplaces48x48.png"/></td>
  <td id="projectalign">
   <div id="projectname">DarkPlaces
   </div>
   <div id="projectbrief">Game engine based on the Quake 1 engine by id Software, developed by LadyHavoc</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('r__shadow_8c_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">r_shadow.c</div></div>
</div><!--header-->
<div class="contents">
<a href="r__shadow_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#include &quot;<a class="code" href="quakedef_8h.html">quakedef.h</a>&quot;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="preprocessor">#include &quot;<a class="code" href="r__shadow_8h.html">r_shadow.h</a>&quot;</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#include &quot;<a class="code" href="cl__collision_8h.html">cl_collision.h</a>&quot;</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &quot;<a class="code" href="portals_8h.html">portals.h</a>&quot;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &quot;<a class="code" href="image_8h.html">image.h</a>&quot;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a5b8f19d6a9f6218c94730fb8dac80e07">R_Shadow_EditLights_Init</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span> </div>
<div class="foldopen" id="foldopen00009" data-start="{" data-end="};">
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357">    9</a></span><span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">r_shadow_rendermode_e</a></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span>{</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a1f38e678baa61a27d802e5327188da61">   11</a></span>    <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a1f38e678baa61a27d802e5327188da61">R_SHADOW_RENDERMODE_NONE</a>,</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a52928463af97761079255bdc89fe8c0a">   12</a></span>    <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a52928463af97761079255bdc89fe8c0a">R_SHADOW_RENDERMODE_ZPASS_STENCIL</a>,</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357ab68a02fb6cfea001216fdc11460daff3">   13</a></span>    <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357ab68a02fb6cfea001216fdc11460daff3">R_SHADOW_RENDERMODE_ZPASS_SEPARATESTENCIL</a>,</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357af313eb167acd53efc7b840e05e684d9c">   14</a></span>    <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357af313eb167acd53efc7b840e05e684d9c">R_SHADOW_RENDERMODE_ZPASS_STENCILTWOSIDE</a>,</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a73153195db3588e9cbacca71f0cc151b">   15</a></span>    <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a73153195db3588e9cbacca71f0cc151b">R_SHADOW_RENDERMODE_ZFAIL_STENCIL</a>,</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a8d5f3d61939ea9b79cfd4e6d69079266">   16</a></span>    <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a8d5f3d61939ea9b79cfd4e6d69079266">R_SHADOW_RENDERMODE_ZFAIL_SEPARATESTENCIL</a>,</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357ac53277841ac0f3cf0de1eff665e82ee4">   17</a></span>    <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357ac53277841ac0f3cf0de1eff665e82ee4">R_SHADOW_RENDERMODE_ZFAIL_STENCILTWOSIDE</a>,</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a8a705347d610f9d1611a45d02d370181">   18</a></span>    <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a8a705347d610f9d1611a45d02d370181">R_SHADOW_RENDERMODE_LIGHT_GLSL</a>,</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a026dc2e973b145d60c64058bbe6519fd">   19</a></span>    <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a026dc2e973b145d60c64058bbe6519fd">R_SHADOW_RENDERMODE_VISIBLEVOLUMES</a>,</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a74b70befe054db54ea9abc789e04ed50">   20</a></span>    <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a74b70befe054db54ea9abc789e04ed50">R_SHADOW_RENDERMODE_VISIBLELIGHTING</a>,</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>    <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a5fd9a94cedc2d458310fca10cd3124b9">R_SHADOW_RENDERMODE_SHADOWMAP2D</a></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a5fd9a94cedc2d458310fca10cd3124b9">   22</a></span>}</div>
</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><a class="code hl_enumeration" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357">r_shadow_rendermode_t</a>;</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="foldopen" id="foldopen00025" data-start="{" data-end="};">
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835">   25</a></span><span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">r_shadow_shadowmode_e</a></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>{</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835a502b4eb32a6583fccaeaeca27674d5a3">   27</a></span>    <a class="code hl_enumvalue" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835a502b4eb32a6583fccaeaeca27674d5a3">R_SHADOW_SHADOWMODE_DISABLED</a>,</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>    <a class="code hl_enumvalue" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835aca635c2eb9b6d41bf36cc8ab01f4444b">R_SHADOW_SHADOWMODE_SHADOWMAP2D</a></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835aca635c2eb9b6d41bf36cc8ab01f4444b">   29</a></span>}</div>
</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><a class="code hl_enumeration" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835">r_shadow_shadowmode_t</a>;</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">   32</a></span><a class="code hl_enumeration" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357">r_shadow_rendermode_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">r_shadow_rendermode</a> = <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a1f38e678baa61a27d802e5327188da61">R_SHADOW_RENDERMODE_NONE</a>;</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a98acf1f7275f30b9e00c35d08366a033">   33</a></span><a class="code hl_enumeration" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357">r_shadow_rendermode_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a98acf1f7275f30b9e00c35d08366a033">r_shadow_lightingrendermode</a> = <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a1f38e678baa61a27d802e5327188da61">R_SHADOW_RENDERMODE_NONE</a>;</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ab24c07551e3ecf58f94909820aaa2bfd">   34</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#ab24c07551e3ecf58f94909820aaa2bfd">r_shadow_scenemaxlights</a>;</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">   35</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a>;</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">   36</a></span><a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> **<a class="code hl_variable" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a>; <span class="comment">// includes both static lights and dlights, as filtered by appropriate flags</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7939d31dd5a7d473fb7625b64eae3509">   37</a></span><a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="r__shadow_8c.html#a7939d31dd5a7d473fb7625b64eae3509">r_shadow_usingshadowmap2d</a>;</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa3823db1be08fa2c34a3b428b40ada80">   38</a></span><a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="r__shadow_8c.html#aa3823db1be08fa2c34a3b428b40ada80">r_shadow_usingshadowmaportho</a>;</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5ab901070f430b33bd3e0bf48d525ad5">   39</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a5ab901070f430b33bd3e0bf48d525ad5">r_shadow_shadowmapside</a>;</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a8abd158068709262d7ae098c70cebc67">   40</a></span><span class="keywordtype">float</span> <a class="code hl_variable" href="r__shadow_8c.html#a8abd158068709262d7ae098c70cebc67">r_shadow_lightshadowmap_texturescale</a>[4]; <span class="comment">// xy = scale, zw = offset</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a72c84bfc3be828d0925b5aa7bd163541">   41</a></span><span class="keywordtype">float</span> <a class="code hl_variable" href="r__shadow_8c.html#a72c84bfc3be828d0925b5aa7bd163541">r_shadow_lightshadowmap_parameters</a>[4]; <span class="comment">// x = frustum width in pixels (excludes border), y = z scale, z = size of viewport, w = z center</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#afff8388ead8104ed51bceb8103cf1a60">   42</a></span><span class="keywordtype">float</span> <a class="code hl_variable" href="r__shadow_8c.html#afff8388ead8104ed51bceb8103cf1a60">r_shadow_modelshadowmap_texturescale</a>[4]; <span class="comment">// xy = scale, zw = offset</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0d70e8d1786aa6910f4584bbe64b3105">   43</a></span><span class="keywordtype">float</span> <a class="code hl_variable" href="r__shadow_8c.html#a0d70e8d1786aa6910f4584bbe64b3105">r_shadow_modelshadowmap_parameters</a>[4]; <span class="comment">// xyz = scale, w = shadow brightness</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">r_shadow_drawbuffer</a>;</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">r_shadow_readbuffer</a>;</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ad30e7b118fedfa505d770ffb922a7969">   48</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a48ad88d635e756c61dc92673ee055a9d">r_shadow_cullface_front</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad30e7b118fedfa505d770ffb922a7969">r_shadow_cullface_back</a>;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac362e58a7bea0632e15053a1e21b6d2c">   49</a></span><a class="code hl_typedef" href="glquake_8h.html#a087030f771e19c7145d9de2db60d773b">GLuint</a> <a class="code hl_variable" href="r__shadow_8c.html#ac362e58a7bea0632e15053a1e21b6d2c">r_shadow_fbo2d</a>;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a494d7f51c8713574c3d2b2585354b9e3">   50</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a494d7f51c8713574c3d2b2585354b9e3">r_shadow_shadowmode_shadowmapping</a>; <span class="comment">// cached value of r_shadow_shadowmapping cvar</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ae7c6f57d2c079948874a1052332c8daf">   51</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#ae7c6f57d2c079948874a1052332c8daf">r_shadow_shadowmode_deferred</a>; <span class="comment">// cached value of r_shadow_deferred cvar</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a8806bf00c50d87c860dce157ae250a48">   52</a></span><a class="code hl_enumeration" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835">r_shadow_shadowmode_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a8806bf00c50d87c860dce157ae250a48">r_shadow_shadowmode</a>;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a58f22ad2c088cb0bed84c43287259fa5">   53</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a58f22ad2c088cb0bed84c43287259fa5">r_shadow_shadowmapfilterquality</a>;</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a67409f727e6f049f035e240153f81678">   54</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a67409f727e6f049f035e240153f81678">r_shadow_shadowmapdepthbits</a>;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a2acc73bfba472354d3cb6c2998628eb0">   55</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a2acc73bfba472354d3cb6c2998628eb0">r_shadow_shadowmapmaxsize</a>;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">   56</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a>;</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a43e8c7a380aad0c6b987befbc9950b20">   57</a></span><a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="r__shadow_8c.html#a43e8c7a380aad0c6b987befbc9950b20">r_shadow_shadowmapvsdct</a>;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="gl__rmain_8c.html#a6538a2021d0ed79281be83552a020f24">   58</a></span><a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="r__shadow_8c.html#a6538a2021d0ed79281be83552a020f24">r_shadow_shadowmapsampler</a>;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a3597c68e03b049937f0a8d1f48b2d155">   59</a></span><a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="r__shadow_8c.html#a3597c68e03b049937f0a8d1f48b2d155">r_shadow_shadowmapshadowsampler</a>;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="gl__rmain_8c.html#a172880f0c24e4e10a2321b58c15aa385">   60</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a172880f0c24e4e10a2321b58c15aa385">r_shadow_shadowmappcf</a>;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">   61</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a>;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac02a3fba96cd698322ace2b608553089">   62</a></span><a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ac02a3fba96cd698322ace2b608553089">r_shadow_shadowmapmatrix</a>;</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">   63</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[4];</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="gl__rmain_8c.html#a4b5a72c38504bc6ea78e695f2ed16aca">   64</a></span><a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="r__shadow_8c.html#a4b5a72c38504bc6ea78e695f2ed16aca">r_shadow_usingdeferredprepass</a>;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ad03146a33674d1c4a225d77b41e3c296">   65</a></span><a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="r__shadow_8c.html#ad03146a33674d1c4a225d77b41e3c296">r_shadow_shadowmapdepthtexture</a>;</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a566ec440d28d0ebea734f64b463ad372">   66</a></span><a class="code hl_struct" href="structmod__alloclightmap__state__t.html">mod_alloclightmap_state_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a566ec440d28d0ebea734f64b463ad372">r_shadow_shadowmapatlas_state</a>;</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#af20ac9c28e45c74931539d36c4af3129">   67</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#af20ac9c28e45c74931539d36c4af3129">r_shadow_shadowmapatlas_modelshadows_x</a>;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac3bf8e273436551219a3b874ca5f29a3">   68</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#ac3bf8e273436551219a3b874ca5f29a3">r_shadow_shadowmapatlas_modelshadows_y</a>;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno"><a class="line" href="gl__rmain_8c.html#abcd3a00e258b83fb536152a846a9c4a5">   69</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#abcd3a00e258b83fb536152a846a9c4a5">r_shadow_shadowmapatlas_modelshadows_size</a>;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a50840da8047197b7b97ae48568ce04a1">   70</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a50840da8047197b7b97ae48568ce04a1">maxshadowtriangles</a>;</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aec9f83716e02d5827f1414d2e99633dc">   71</a></span><span class="keywordtype">int</span> *<a class="code hl_variable" href="r__shadow_8c.html#aec9f83716e02d5827f1414d2e99633dc">shadowelements</a>;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a65dfd4a4235d767e35c6be9c52b67cc8">   73</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a65dfd4a4235d767e35c6be9c52b67cc8">maxshadowvertices</a>;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7e9c22b3ec6affd555dada90f6bbdfb7">   74</a></span><span class="keywordtype">float</span> *<a class="code hl_variable" href="r__shadow_8c.html#a7e9c22b3ec6affd555dada90f6bbdfb7">shadowvertex3f</a>;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a1deb1046f27ec5ac942ae8e7374a3f22">   76</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a1deb1046f27ec5ac942ae8e7374a3f22">maxshadowmark</a>;</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a8180b5361a778c8f61f1b0b1dc844077">   77</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a8180b5361a778c8f61f1b0b1dc844077">numshadowmark</a>;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">   78</a></span><span class="keywordtype">int</span> *<a class="code hl_variable" href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">shadowmark</a>;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac972f0aabe9dc399b9e0400d60c69c3f">   79</a></span><span class="keywordtype">int</span> *<a class="code hl_variable" href="r__shadow_8c.html#ac972f0aabe9dc399b9e0400d60c69c3f">shadowmarklist</a>;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aac84d2ea256326d01ea2710316bb47ad">   80</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#aac84d2ea256326d01ea2710316bb47ad">shadowmarkcount</a>;</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span> </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a3360a755216b12b0928cf4e3e3842d0e">   82</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a3360a755216b12b0928cf4e3e3842d0e">maxshadowsides</a>;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">   83</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a>;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">   84</a></span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a>;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">   85</a></span><span class="keywordtype">int</span> *<a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a>;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a69929cbc19f8c80baa748a9cb1217769">   87</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a69929cbc19f8c80baa748a9cb1217769">maxvertexupdate</a>;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a3b04167aa9a5166d946d7a2ad69c0cfb">   88</a></span><span class="keywordtype">int</span> *<a class="code hl_variable" href="r__shadow_8c.html#a3b04167aa9a5166d946d7a2ad69c0cfb">vertexupdate</a>;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aff1170b5b07317b3b313b87f253d17dd">   89</a></span><span class="keywordtype">int</span> *<a class="code hl_variable" href="r__shadow_8c.html#aff1170b5b07317b3b313b87f253d17dd">vertexremap</a>;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#af3b133ac1cbd4a3def2c2ebd4d750073">   90</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#af3b133ac1cbd4a3def2c2ebd4d750073">vertexupdatenum</a>;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9a3fe0d597026f41083557ae9f030a11">   92</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a9a3fe0d597026f41083557ae9f030a11">r_shadow_buffer_numleafpvsbytes</a>;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a358d50682355dd070731495eb5ccd19c">   93</a></span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="r__shadow_8c.html#a358d50682355dd070731495eb5ccd19c">r_shadow_buffer_visitingleafpvs</a>;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">   94</a></span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a>;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">   95</a></span><span class="keywordtype">int</span> *<a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a>;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac93991e2e64a1b25ff5438c33122286d">   97</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#ac93991e2e64a1b25ff5438c33122286d">r_shadow_buffer_numsurfacepvsbytes</a>;</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a31e6522610c02f09559b7bd8bd75c558">   98</a></span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="r__shadow_8c.html#a31e6522610c02f09559b7bd8bd75c558">r_shadow_buffer_surfacepvs</a>;</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">   99</a></span><span class="keywordtype">int</span> *<a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a>;</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a064f7d12ba68cca46e785786d48e8985">  100</a></span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="r__shadow_8c.html#a064f7d12ba68cca46e785786d48e8985">r_shadow_buffer_surfacesides</a>;</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a39536fb5625169cacb76dad160685d55">  102</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a39536fb5625169cacb76dad160685d55">r_shadow_buffer_numshadowtrispvsbytes</a>;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">  103</a></span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a>;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0d465ed0b81809e1263706defa298e46">  104</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a0d465ed0b81809e1263706defa298e46">r_shadow_buffer_numlighttrispvsbytes</a>;</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">  105</a></span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">r_shadow_buffer_lighttrispvs</a>;</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">  107</a></span><a class="code hl_struct" href="structrtexturepool__t.html">rtexturepool_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5b73004bfb2234722770d895bc736f11">  108</a></span><a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#a5b73004bfb2234722770d895bc736f11">r_shadow_attenuationgradienttexture</a>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aed09fab0c0feac12235fc7fd4be8ab96">  109</a></span><a class="code hl_struct" href="structskinframe__t.html">skinframe_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#aed09fab0c0feac12235fc7fd4be8ab96">r_shadow_lightcorona</a>;</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">  110</a></span><a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a>;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">  111</a></span><a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a>;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ab04b93fe59cc8947d98de66c740eda01">  112</a></span><a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#ab04b93fe59cc8947d98de66c740eda01">r_shadow_shadowmapvsdcttexture</a>;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9ab5dac5aed1eab9783f6f731c4c5853">  114</a></span><a class="code hl_typedef" href="glquake_8h.html#a087030f771e19c7145d9de2db60d773b">GLuint</a> <a class="code hl_variable" href="r__shadow_8c.html#a9ab5dac5aed1eab9783f6f731c4c5853">r_shadow_prepassgeometryfbo</a>;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7239c53ebcb3083ca7bc8d5c2eac37dc">  115</a></span><a class="code hl_typedef" href="glquake_8h.html#a087030f771e19c7145d9de2db60d773b">GLuint</a> <a class="code hl_variable" href="r__shadow_8c.html#a7239c53ebcb3083ca7bc8d5c2eac37dc">r_shadow_prepasslightingdiffusespecularfbo</a>;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a240b7bb15f06d555fd4c6e03d511e88a">  116</a></span><a class="code hl_typedef" href="glquake_8h.html#a087030f771e19c7145d9de2db60d773b">GLuint</a> <a class="code hl_variable" href="r__shadow_8c.html#a240b7bb15f06d555fd4c6e03d511e88a">r_shadow_prepasslightingdiffusefbo</a>;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa07187db7c3c253b48338fc55201564e">  117</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#aa07187db7c3c253b48338fc55201564e">r_shadow_prepass_width</a>;</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac301c7bf5ab0840e76847ec294d41841">  118</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#ac301c7bf5ab0840e76847ec294d41841">r_shadow_prepass_height</a>;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">  119</a></span><a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a>;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a229a2a5570cb5633155c748b02fd6a2c">  120</a></span><a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#a229a2a5570cb5633155c748b02fd6a2c">r_shadow_prepassgeometrynormalmaptexture</a>;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno"><a class="line" href="gl__rmain_8c.html#a22ac54cfb268b98642e9d1e877028208">  121</a></span><a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#a22ac54cfb268b98642e9d1e877028208">r_shadow_prepasslightingdiffusetexture</a>;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno"><a class="line" href="gl__rmain_8c.html#a331b3d66802cecbb5b26ed13a429b8b6">  122</a></span><a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#a331b3d66802cecbb5b26ed13a429b8b6">r_shadow_prepasslightingspeculartexture</a>;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a55fd1afc983c3d9e9a6a5d703b8f5d1d">  124</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a55fd1afc983c3d9e9a6a5d703b8f5d1d">r_shadow_viewfbo</a>;</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a4e9b8a0c895ff2c589edb7590378f6a7">  125</a></span><a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#a4e9b8a0c895ff2c589edb7590378f6a7">r_shadow_viewdepthtexture</a>;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a8ecdf1edcd01493fadea346e2d63d1ea">  126</a></span><a class="code hl_struct" href="structrtexture__t.html">rtexture_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#a8ecdf1edcd01493fadea346e2d63d1ea">r_shadow_viewcolortexture</a>;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a07bb28e3a7e40d974a1f8677ca40e8a2">  127</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a07bb28e3a7e40d974a1f8677ca40e8a2">r_shadow_viewx</a>;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9901644fc65dc0afb8aad4c76f6669e0">  128</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a9901644fc65dc0afb8aad4c76f6669e0">r_shadow_viewy</a>;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aec7193132dc9c1651fce671d2cfb4841">  129</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#aec7193132dc9c1651fce671d2cfb4841">r_shadow_viewwidth</a>;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aef0c5abaa045d60cd80ee60646257abd">  130</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#aef0c5abaa045d60cd80ee60646257abd">r_shadow_viewheight</a>;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span> </div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span><span class="comment">// lights are reloaded when this changes</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a33b81d2dcd1d3054facf713441473db3">  133</a></span><span class="keywordtype">char</span> <a class="code hl_variable" href="r__shadow_8c.html#a33b81d2dcd1d3054facf713441473db3">r_shadow_mapname</a>[<a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span> </div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span><span class="comment">// buffer for doing corona fading</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno"><a class="line" href="gl__rmain_8c.html#ae814fd537c2109a56aa92fc4c493f616">  136</a></span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#ae814fd537c2109a56aa92fc4c493f616">r_shadow_occlusion_buf</a> = 0;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span><span class="comment">// used only for light filters (cubemaps)</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aedef61baead60ec7acf0d0cef86d158e">  139</a></span><a class="code hl_struct" href="structrtexturepool__t.html">rtexturepool_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#aedef61baead60ec7acf0d0cef86d158e">r_shadow_filters_texturepool</a>;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aed63693950ee25ff00f040d8980f52cd">  141</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#aed63693950ee25ff00f040d8980f52cd">r_shadow_bumpscale_basetexture</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_bumpscale_basetexture&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;generate fake bumpmaps from diffuse textures at this bumpyness, try 4 to match tenebrae, higher values increase depth, requires r_restart to take effect&quot;</span>};</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a081c49802042fb9793a40bd22709f433">  142</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a081c49802042fb9793a40bd22709f433">r_shadow_bumpscale_bumpmap</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_bumpscale_bumpmap&quot;</span>, <span class="stringliteral">&quot;4&quot;</span>, <span class="stringliteral">&quot;what magnitude to interpret _bump.tga textures as, higher values increase depth, requires r_restart to take effect&quot;</span>};</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a374db1ed8684badcb0995878fc9b4300">  143</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a374db1ed8684badcb0995878fc9b4300">r_shadow_debuglight</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_debuglight&quot;</span>, <span class="stringliteral">&quot;-1&quot;</span>, <span class="stringliteral">&quot;renders only one light, for level design purposes or debugging&quot;</span>};</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ab48847f5962cf96e707a015ec3e4630b">  144</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ab48847f5962cf96e707a015ec3e4630b">r_shadow_deferred</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_deferred&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;uses image-based lighting instead of geometry-based lighting, the method used renders a depth image and a normalmap image, renders lights into separate diffuse and specular images, and then combines this into the normal rendering, requires r_shadow_shadowmapping&quot;</span>};</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a2243a862a201b55113ee9b9dc3e1eb61">  145</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a2243a862a201b55113ee9b9dc3e1eb61">r_shadow_usebihculling</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_usebihculling&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;use BIH (Bounding Interval Hierarchy) for culling lit surfaces instead of BSP (Binary Space Partitioning)&quot;</span>};</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0e0cbe65920fb236c82e2c50f4f7880b">  146</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a0e0cbe65920fb236c82e2c50f4f7880b">r_shadow_usenormalmap</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_usenormalmap&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;enables use of directional shading on lights&quot;</span>};</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno"><a class="line" href="menu_8c.html#a9b2e5213a19ac569c1e89d8ffaaa7626">  147</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a9b2e5213a19ac569c1e89d8ffaaa7626">r_shadow_gloss</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_gloss&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;0 disables gloss (specularity) rendering, 1 uses gloss if textures are found, 2 forces a flat metallic specular effect on everything without textures (similar to tenebrae)&quot;</span>};</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac726c73e2b460a67406cfec8729bd07e">  148</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ac726c73e2b460a67406cfec8729bd07e">r_shadow_gloss2intensity</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_gloss2intensity&quot;</span>, <span class="stringliteral">&quot;0.125&quot;</span>, <span class="stringliteral">&quot;how bright the forced flat gloss should look if r_shadow_gloss is 2&quot;</span>};</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a00187bb13a24fc962ee8a462b07c6249">  149</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a00187bb13a24fc962ee8a462b07c6249">r_shadow_glossintensity</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_glossintensity&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;how bright textured glossmaps should look if r_shadow_gloss is 1 or 2&quot;</span>};</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#acf36a18c76e1f03dffe52f49b5c63f5c">  150</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#acf36a18c76e1f03dffe52f49b5c63f5c">r_shadow_glossexponent</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_glossexponent&quot;</span>, <span class="stringliteral">&quot;32&quot;</span>, <span class="stringliteral">&quot;how &#39;sharp&#39; the gloss should appear (specular power)&quot;</span>};</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ad4611b2c12dc964c3c778185d5ea6d94">  151</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ad4611b2c12dc964c3c778185d5ea6d94">r_shadow_gloss2exponent</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_gloss2exponent&quot;</span>, <span class="stringliteral">&quot;32&quot;</span>, <span class="stringliteral">&quot;same as r_shadow_glossexponent but for forced gloss (gloss 2) surfaces&quot;</span>};</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7fec1caa52c4f5971aec39a0d950218c">  152</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a7fec1caa52c4f5971aec39a0d950218c">r_shadow_glossexact</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_glossexact&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;use exact reflection math for gloss (slightly slower, but should look a tad better)&quot;</span>};</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno"><a class="line" href="model__shared_8c.html#a0f3acc72b271530ae45ed8b06f011976">  153</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a0f3acc72b271530ae45ed8b06f011976">r_shadow_lightattenuationdividebias</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_lightattenuationdividebias&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;changes attenuation texture generation&quot;</span>};</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno"><a class="line" href="model__shared_8c.html#ac983b35605fe044369c676ce33b58061">  154</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ac983b35605fe044369c676ce33b58061">r_shadow_lightattenuationlinearscale</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_lightattenuationlinearscale&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;changes attenuation texture generation&quot;</span>};</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a8b27974ce25cb2c28bbdc15bfb50f20f">  155</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a8b27974ce25cb2c28bbdc15bfb50f20f">r_shadow_lightintensityscale</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_lightintensityscale&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;renders all world lights brighter or darker&quot;</span>};</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a01ac7c513ed4e93f4ad227ca6592b63a">  156</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a01ac7c513ed4e93f4ad227ca6592b63a">r_shadow_lightradiusscale</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_lightradiusscale&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;renders all world lights larger or smaller&quot;</span>};</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a580c6f162a1e9c2a526f1bc8b0a3dcf4">  157</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a580c6f162a1e9c2a526f1bc8b0a3dcf4">r_shadow_projectdistance</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_projectdistance&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;how far to cast shadows&quot;</span>};</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa689749e561af4254355f6a9d83df692">  158</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#aa689749e561af4254355f6a9d83df692">r_shadow_frontsidecasting</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_frontsidecasting&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;whether to cast shadows from illuminated triangles (front side of model) or unlit triangles (back side of model)&quot;</span>};</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno"><a class="line" href="menu_8c.html#a29e4d44cd6610693db5aaeab62cace4e">  159</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a29e4d44cd6610693db5aaeab62cace4e">r_shadow_realtime_dlight</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_realtime_dlight&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;enables rendering of dynamic lights such as explosions and rocket light&quot;</span>};</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno"><a class="line" href="menu_8c.html#acc215d32de9b6b594936ef19c07bcefc">  160</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#acc215d32de9b6b594936ef19c07bcefc">r_shadow_realtime_dlight_shadows</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_realtime_dlight_shadows&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;enables rendering of shadows from dynamic lights&quot;</span>};</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5342d8e75e7cda04b07dc16c8b2ea400">  161</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a5342d8e75e7cda04b07dc16c8b2ea400">r_shadow_realtime_dlight_svbspculling</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_realtime_dlight_svbspculling&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;enables svbsp optimization on dynamic lights (very slow!)&quot;</span>};</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac41307501be00f584997e2b3d255c5d4">  162</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ac41307501be00f584997e2b3d255c5d4">r_shadow_realtime_dlight_portalculling</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_realtime_dlight_portalculling&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;enables portal optimization on dynamic lights (slow!)&quot;</span>};</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno"><a class="line" href="menu_8c.html#a4c785a1add44a23930cb620359737c4e">  163</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a4c785a1add44a23930cb620359737c4e">r_shadow_realtime_world</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_realtime_world&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;enables rendering of full world lighting (whether loaded from the map, or a .rtlights file, or a .ent file, or a .lights file produced by hlight)&quot;</span>};</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a61890ab94397eb127ab265b6dca41722">  164</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a61890ab94397eb127ab265b6dca41722">r_shadow_realtime_world_importlightentitiesfrommap</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_realtime_world_importlightentitiesfrommap&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;load lights from .ent file or map entities at startup if no .rtlights or .lights file is present (if set to 2, always use the .ent or map entities)&quot;</span>};</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno"><a class="line" href="menu_8c.html#aec39f8a22b4eabdbc1debd36c5f70211">  165</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#aec39f8a22b4eabdbc1debd36c5f70211">r_shadow_realtime_world_lightmaps</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_realtime_world_lightmaps&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;brightness to render lightmaps when using full world lighting, try 0.5 for a tenebrae-like appearance&quot;</span>};</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno"><a class="line" href="menu_8c.html#a411af1b46d0021a05736ed8d916cd89f">  166</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a411af1b46d0021a05736ed8d916cd89f">r_shadow_realtime_world_shadows</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_realtime_world_shadows&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;enables rendering of shadows from world lights&quot;</span>};</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a96bc72dc79c1396d6213950a2819381d">  167</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a96bc72dc79c1396d6213950a2819381d">r_shadow_realtime_world_compile</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_realtime_world_compile&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;enables compilation of world lights for higher performance rendering&quot;</span>};</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aae98730caa3cd73c0376ee07db2e4f23">  168</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#aae98730caa3cd73c0376ee07db2e4f23">r_shadow_realtime_world_compileshadow</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_realtime_world_compileshadow&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;enables compilation of shadows from world lights for higher performance rendering&quot;</span>};</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9e29d3ec8a4a146a8d90e096096f4e37">  169</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a9e29d3ec8a4a146a8d90e096096f4e37">r_shadow_realtime_world_compilesvbsp</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_realtime_world_compilesvbsp&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;enables svbsp optimization during compilation (slower than compileportalculling but more exact)&quot;</span>};</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0aa00614f3fcc1ca6f96c666ad0c9709">  170</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a0aa00614f3fcc1ca6f96c666ad0c9709">r_shadow_realtime_world_compileportalculling</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_realtime_world_compileportalculling&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;enables portal-based culling optimization during compilation (overrides compilesvbsp)&quot;</span>};</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a53f4535c03dadf6efe7d7ac109a5c2d3">  171</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a53f4535c03dadf6efe7d7ac109a5c2d3">r_shadow_scissor</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_scissor&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;use scissor optimization of light rendering (restricts rendering to the portion of the screen affected by the light)&quot;</span>};</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5363c849518fc64d491c1f7c6f612655">  172</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a5363c849518fc64d491c1f7c6f612655">r_shadow_shadowmapping</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;enables use of shadowmapping (shadow rendering by depth texture sampling)&quot;</span>};</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a00485eb415b8d269b0b411106ca73297">  173</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a00485eb415b8d269b0b411106ca73297">r_shadow_shadowmapping_filterquality</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping_filterquality&quot;</span>, <span class="stringliteral">&quot;-1&quot;</span>, <span class="stringliteral">&quot;shadowmap filter modes: -1 = auto-select, 0 = no filtering, 1 = bilinear, 2 = bilinear 2x2 blur (fast), 3 = 3x3 blur (moderate), 4 = 4x4 blur (slow)&quot;</span>};</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5a1b9f3c2977cc5264499e8871d516c8">  174</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a5a1b9f3c2977cc5264499e8871d516c8">r_shadow_shadowmapping_useshadowsampler</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping_useshadowsampler&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;whether to use sampler2DShadow if available&quot;</span>};</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a437cdd8c6d29ebd4b03f259f20e14415">  175</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a437cdd8c6d29ebd4b03f259f20e14415">r_shadow_shadowmapping_depthbits</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping_depthbits&quot;</span>, <span class="stringliteral">&quot;24&quot;</span>, <span class="stringliteral">&quot;requested minimum shadowmap texture depth bits&quot;</span>};</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0bf0a59428f24e0a923392d83630bd0b">  176</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a0bf0a59428f24e0a923392d83630bd0b">r_shadow_shadowmapping_vsdct</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping_vsdct&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;enables use of virtual shadow depth cube texture&quot;</span>};</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a37be7284dc0c2e90696440ee3ced0f12">  177</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a37be7284dc0c2e90696440ee3ced0f12">r_shadow_shadowmapping_minsize</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping_minsize&quot;</span>, <span class="stringliteral">&quot;32&quot;</span>, <span class="stringliteral">&quot;limit of shadowmap side size - must be at least r_shadow_shadowmapping_bordersize+2&quot;</span>};</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a020aca21f20ded8f0e7b7cfafcc52dcb">  178</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a020aca21f20ded8f0e7b7cfafcc52dcb">r_shadow_shadowmapping_maxsize</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping_maxsize&quot;</span>, <span class="stringliteral">&quot;512&quot;</span>, <span class="stringliteral">&quot;limit of shadowmap side size - can not be more than 1/8th of atlassize because lights store 6 sides (2x3 grid) and sometimes 12 sides (4x3 grid for shadows from EF_NOSELFSHADOW entities) and there are multiple lights...&quot;</span>};</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#af68f9b04e8943ef4226c2e76e530238a">  179</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#af68f9b04e8943ef4226c2e76e530238a">r_shadow_shadowmapping_texturesize</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping_texturesize&quot;</span>, <span class="stringliteral">&quot;8192&quot;</span>, <span class="stringliteral">&quot;size of shadowmap atlas texture - all shadowmaps are packed into this texture at frame start&quot;</span>};</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a56bd32784edad8eaa9a2e95494b5f929">  180</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a56bd32784edad8eaa9a2e95494b5f929">r_shadow_shadowmapping_precision</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping_precision&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;makes shadowmaps have a maximum resolution of this number of pixels per light source radius unit such that, for example, at precision 0.5 a light with radius 200 will have a maximum resolution of 100 pixels&quot;</span>};</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span><span class="comment">//cvar_t r_shadow_shadowmapping_lod_bias = {CF_CLIENT | CF_ARCHIVE, &quot;r_shadow_shadowmapping_lod_bias&quot;, &quot;16&quot;, &quot;shadowmap size bias&quot;};</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span><span class="comment">//cvar_t r_shadow_shadowmapping_lod_scale = {CF_CLIENT | CF_ARCHIVE, &quot;r_shadow_shadowmapping_lod_scale&quot;, &quot;128&quot;, &quot;shadowmap size scaling parameter&quot;};</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a310939d55b4b4314782679eb0381c248">  183</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a310939d55b4b4314782679eb0381c248">r_shadow_shadowmapping_bordersize</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping_bordersize&quot;</span>, <span class="stringliteral">&quot;5&quot;</span>, <span class="stringliteral">&quot;shadowmap size bias for filtering&quot;</span>};</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a1e147e72bbae8ca02ec9ae2568a00566">  184</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a1e147e72bbae8ca02ec9ae2568a00566">r_shadow_shadowmapping_nearclip</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping_nearclip&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;shadowmap nearclip in world units&quot;</span>};</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#acf4f5f168d0d5b4008cc00b2d3d69542">  185</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#acf4f5f168d0d5b4008cc00b2d3d69542">r_shadow_shadowmapping_bias</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping_bias&quot;</span>, <span class="stringliteral">&quot;0.03&quot;</span>, <span class="stringliteral">&quot;shadowmap bias parameter (this is multiplied by nearclip * 1024 / lodsize)&quot;</span>};</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#afddb236d36a82641a3c15b996f5ca9d4">  186</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#afddb236d36a82641a3c15b996f5ca9d4">r_shadow_shadowmapping_polygonfactor</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping_polygonfactor&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;slope-dependent shadowmapping bias&quot;</span>};</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aeead9091a82d97411391b129adccdc1d">  187</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#aeead9091a82d97411391b129adccdc1d">r_shadow_shadowmapping_polygonoffset</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_shadowmapping_polygonoffset&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;constant shadowmapping bias&quot;</span>};</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno"><a class="line" href="gl__rsurf_8c.html#a493f9b14dcdf6b9e807dd7bf5b6007cc">  188</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a493f9b14dcdf6b9e807dd7bf5b6007cc">r_shadow_sortsurfaces</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_shadow_sortsurfaces&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;improve performance by sorting illuminated surfaces by texture&quot;</span>};</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aab2089c6c18575adf51a542d79af6576">  189</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#aab2089c6c18575adf51a542d79af6576">r_shadow_culllights_pvs</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_culllights_pvs&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;check if light overlaps any visible bsp leafs when determining if the light is visible&quot;</span>};</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a02b2e2feca78908352ada34d75d81317">  190</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a02b2e2feca78908352ada34d75d81317">r_shadow_culllights_trace</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_culllights_trace&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;use raytraces from the eye to random places within light bounds to determine if the light is visible&quot;</span>};</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7a09edeeb5508e0a09dbf3c9ebc425d3">  191</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a7a09edeeb5508e0a09dbf3c9ebc425d3">r_shadow_culllights_trace_eyejitter</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_culllights_trace_eyejitter&quot;</span>, <span class="stringliteral">&quot;16&quot;</span>, <span class="stringliteral">&quot;offset eye location randomly by this much&quot;</span>};</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0dbe98d5b5b0ab64f5a82216b6b914ea">  192</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a0dbe98d5b5b0ab64f5a82216b6b914ea">r_shadow_culllights_trace_enlarge</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_culllights_trace_enlarge&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;make light bounds bigger by *(1.0+enlarge)&quot;</span>};</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a11c04eaa165865bb30ace640532be7ff">  193</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a11c04eaa165865bb30ace640532be7ff">r_shadow_culllights_trace_expand</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_culllights_trace_expand&quot;</span>, <span class="stringliteral">&quot;8&quot;</span>, <span class="stringliteral">&quot;make light bounds bigger by this many units&quot;</span>};</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7c6008b845bf6e182e4ae65068e0ee31">  194</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a7c6008b845bf6e182e4ae65068e0ee31">r_shadow_culllights_trace_pad</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_culllights_trace_pad&quot;</span>, <span class="stringliteral">&quot;8&quot;</span>, <span class="stringliteral">&quot;accept traces that hit within this many units of the light bounds&quot;</span>};</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a3d32cd502c430d47379019c578c9375e">  195</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a3d32cd502c430d47379019c578c9375e">r_shadow_culllights_trace_samples</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_culllights_trace_samples&quot;</span>, <span class="stringliteral">&quot;16&quot;</span>, <span class="stringliteral">&quot;use this many traces to random positions (in addition to center trace)&quot;</span>};</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ae2644f027256da38698199b0785682af">  196</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ae2644f027256da38698199b0785682af">r_shadow_culllights_trace_tempsamples</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_culllights_trace_tempsamples&quot;</span>, <span class="stringliteral">&quot;16&quot;</span>, <span class="stringliteral">&quot;use this many traces if the light was created by csqc (no inter-frame caching), -1 disables the check (to avoid flicker entirely)&quot;</span>};</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ab5e08902e85373b0756014349a87f244">  197</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ab5e08902e85373b0756014349a87f244">r_shadow_culllights_trace_delay</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_culllights_trace_delay&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;light will be considered visible for this many seconds after any trace connects&quot;</span>};</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno"><a class="line" href="gl__rmain_8c.html#abfb9569e9c4eb3d7d902bbea591a24d4">  198</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#abfb9569e9c4eb3d7d902bbea591a24d4">r_shadow_bouncegrid</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;perform particle tracing for indirect lighting (Global Illumination / radiosity) using a 3D texture covering the scene, only active on levels with realtime lights active (r_shadow_realtime_world is usually required for these)&quot;</span>};</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aafa9a61a3167b93b7e3db2a8e48d5812">  199</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#aafa9a61a3167b93b7e3db2a8e48d5812">r_shadow_bouncegrid_blur</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_blur&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;apply a 1-radius blur on bouncegrid to denoise it and deal with boundary issues with surfaces&quot;</span>};</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a74c912ec2e1a65ea07fbb99ad2197498">  200</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a74c912ec2e1a65ea07fbb99ad2197498">r_shadow_bouncegrid_dynamic_bounceminimumintensity</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_bounceminimumintensity&quot;</span>, <span class="stringliteral">&quot;0.05&quot;</span>, <span class="stringliteral">&quot;stop bouncing once intensity drops below this fraction of the original particle color&quot;</span>};</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#acd48963351e3b59fcea0383c095ce28b">  201</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#acd48963351e3b59fcea0383c095ce28b">r_shadow_bouncegrid_dynamic_culllightpaths</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_culllightpaths&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;skip accumulating light in the bouncegrid texture where the light paths are out of view (dynamic mode only)&quot;</span>};</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ae87aa6ea0cfb5bc265f8ef7c1ddcd227">  202</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ae87aa6ea0cfb5bc265f8ef7c1ddcd227">r_shadow_bouncegrid_dynamic_directionalshading</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_directionalshading&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;use diffuse shading rather than ambient, 3D texture becomes 8x as many pixels to hold the additional data&quot;</span>};</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a43ef251f8f1845074774c5f7306bd0c0">  203</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a43ef251f8f1845074774c5f7306bd0c0">r_shadow_bouncegrid_dynamic_dlightparticlemultiplier</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_dlightparticlemultiplier&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;if set to a high value like 16 this can make dlights look great, but 0 is recommended for performance reasons&quot;</span>};</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a2b7bcd906c1cdb64193eb99dd589abee">  204</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a2b7bcd906c1cdb64193eb99dd589abee">r_shadow_bouncegrid_dynamic_hitmodels</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_hitmodels&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;enables hitting character model geometry (SLOW)&quot;</span>};</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7b5a86f8c2c4c9c0d35c4b8d80bf005b">  205</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a7b5a86f8c2c4c9c0d35c4b8d80bf005b">r_shadow_bouncegrid_dynamic_lightradiusscale</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_lightradiusscale&quot;</span>, <span class="stringliteral">&quot;5&quot;</span>, <span class="stringliteral">&quot;particles stop at this fraction of light radius (can be more than 1)&quot;</span>};</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a44a028698612a93a390f119598e82ec8">  206</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a44a028698612a93a390f119598e82ec8">r_shadow_bouncegrid_dynamic_maxbounce</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_maxbounce&quot;</span>, <span class="stringliteral">&quot;5&quot;</span>, <span class="stringliteral">&quot;maximum number of bounces for a particle (minimum is 0)&quot;</span>};</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ab18407dfca8827e6dd2e204f6fcd4765">  207</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ab18407dfca8827e6dd2e204f6fcd4765">r_shadow_bouncegrid_dynamic_maxphotons</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_maxphotons&quot;</span>, <span class="stringliteral">&quot;25000&quot;</span>, <span class="stringliteral">&quot;upper bound on photons to shoot per update, divided proportionately between lights - normally the number of photons is calculated by energyperphoton&quot;</span>};</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ad84a092c3f4d913bd1e68b718b3b5d99">  208</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ad84a092c3f4d913bd1e68b718b3b5d99">r_shadow_bouncegrid_dynamic_quality</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_quality&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;amount of photons that should be fired (this is multiplied by spacing ^ 2 to make it adaptive with spacing changes)&quot;</span>};</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#acc41388e78420294a69dbcfc20a3dbd4">  209</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#acc41388e78420294a69dbcfc20a3dbd4">r_shadow_bouncegrid_dynamic_spacing</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_spacing&quot;</span>, <span class="stringliteral">&quot;64&quot;</span>, <span class="stringliteral">&quot;unit size of bouncegrid pixel&quot;</span>};</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7c9977ce102ee53957a2d53860228c44">  210</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a7c9977ce102ee53957a2d53860228c44">r_shadow_bouncegrid_dynamic_updateinterval</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_updateinterval&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;update bouncegrid texture once per this many seconds, useful values are 0, 0.05, or 1000000&quot;</span>};</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ae6a16264f1d993fbf7030849abb5ac2a">  211</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ae6a16264f1d993fbf7030849abb5ac2a">r_shadow_bouncegrid_dynamic_x</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_x&quot;</span>, <span class="stringliteral">&quot;64&quot;</span>, <span class="stringliteral">&quot;maximum texture size of bouncegrid on X axis&quot;</span>};</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9fdf894159a51ec01ebcce8ec90bb3e8">  212</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a9fdf894159a51ec01ebcce8ec90bb3e8">r_shadow_bouncegrid_dynamic_y</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_y&quot;</span>, <span class="stringliteral">&quot;64&quot;</span>, <span class="stringliteral">&quot;maximum texture size of bouncegrid on Y axis&quot;</span>};</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aca5a5c3ed528732c5986a853d0d5ddd3">  213</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#aca5a5c3ed528732c5986a853d0d5ddd3">r_shadow_bouncegrid_dynamic_z</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_dynamic_z&quot;</span>, <span class="stringliteral">&quot;32&quot;</span>, <span class="stringliteral">&quot;maximum texture size of bouncegrid on Z axis&quot;</span>};</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ad25ca00832ef2ab9633a450d3ede66cb">  214</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ad25ca00832ef2ab9633a450d3ede66cb">r_shadow_bouncegrid_floatcolors</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_floatcolors&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;upload texture as RGBA16F (or RGBA32F when set to 2) rather than RGBA8 format - this gives more dynamic range and accuracy&quot;</span>};</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a3003a3ce413694b402afb0f5418d14aa">  215</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a3003a3ce413694b402afb0f5418d14aa">r_shadow_bouncegrid_includedirectlighting</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_includedirectlighting&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;allows direct lighting to be recorded, not just indirect (gives an effect somewhat like r_shadow_realtime_world_lightmaps)&quot;</span>};</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a6db869294ff9626fbff8440312c677bb">  216</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a6db869294ff9626fbff8440312c677bb">r_shadow_bouncegrid_intensity</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_intensity&quot;</span>, <span class="stringliteral">&quot;4&quot;</span>, <span class="stringliteral">&quot;overall brightness of bouncegrid texture&quot;</span>};</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a57dd3198772dbe610732098d0b78726d">  217</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a57dd3198772dbe610732098d0b78726d">r_shadow_bouncegrid_lightpathsize</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_lightpathsize&quot;</span>, <span class="stringliteral">&quot;64&quot;</span>, <span class="stringliteral">&quot;radius (in game units) of the light path for accumulation of light in the bouncegrid texture&quot;</span>};</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ab26bbb86c9c9e2871e0e6a4d85db1e77">  218</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ab26bbb86c9c9e2871e0e6a4d85db1e77">r_shadow_bouncegrid_normalizevectors</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_normalizevectors&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;normalize random vectors (otherwise their length can vary, which dims the lighting further from the light)&quot;</span>};</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9234de8299b3999ded95f169ddc07c90">  219</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a9234de8299b3999ded95f169ddc07c90">r_shadow_bouncegrid_particlebounceintensity</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_particlebounceintensity&quot;</span>, <span class="stringliteral">&quot;4&quot;</span>, <span class="stringliteral">&quot;amount of energy carried over after each bounce, this is a multiplier of texture color and the result is clamped to 1 or less, to prevent adding energy on each bounce&quot;</span>};</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5654cc1c30edf8ffa1b071e08c5d1e53">  220</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a5654cc1c30edf8ffa1b071e08c5d1e53">r_shadow_bouncegrid_particleintensity</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_particleintensity&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;brightness of particles contributing to bouncegrid texture&quot;</span>};</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a77e03f6897836ffeafb2826cf903cdbd">  221</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a77e03f6897836ffeafb2826cf903cdbd">r_shadow_bouncegrid_rng_seed</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_rng_seed&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;0+ = use this number as RNG seed, -1 = use time instead for disco-like craziness in dynamic mode&quot;</span>};</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa248184b1d78dff49d490c33284d5bd8">  222</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#aa248184b1d78dff49d490c33284d5bd8">r_shadow_bouncegrid_rng_type</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_rng_type&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;0 = Lehmer 128bit RNG (slow but high quality), 1 = lhcheeserand 32bit RNG (quick)&quot;</span>};</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a1797156202d8d7e1a2442610a777970a">  223</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a1797156202d8d7e1a2442610a777970a">r_shadow_bouncegrid_static</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_static&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;use static radiosity solution (high quality) rather than dynamic (splotchy)&quot;</span>};</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7873c73de31a3ad5a895f2c13befcd36">  224</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a7873c73de31a3ad5a895f2c13befcd36">r_shadow_bouncegrid_static_bounceminimumintensity</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_static_bounceminimumintensity&quot;</span>, <span class="stringliteral">&quot;0.01&quot;</span>, <span class="stringliteral">&quot;stop bouncing once intensity drops below this fraction of the original particle color&quot;</span>};</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a51a3a6319e814d45b0966c62c46b7528">  225</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a51a3a6319e814d45b0966c62c46b7528">r_shadow_bouncegrid_static_directionalshading</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_static_directionalshading&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;whether to use directionalshading when in static mode&quot;</span>};</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a1b6befd427ebd6277712a04a925f58e1">  226</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a1b6befd427ebd6277712a04a925f58e1">r_shadow_bouncegrid_static_lightradiusscale</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_static_lightradiusscale&quot;</span>, <span class="stringliteral">&quot;5&quot;</span>, <span class="stringliteral">&quot;particles stop at this fraction of light radius (can be more than 1) when in static mode&quot;</span>};</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a19d274f4a09f26bc63ac80625ede0fb3">  227</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a19d274f4a09f26bc63ac80625ede0fb3">r_shadow_bouncegrid_static_maxbounce</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_static_maxbounce&quot;</span>, <span class="stringliteral">&quot;5&quot;</span>, <span class="stringliteral">&quot;maximum number of bounces for a particle (minimum is 0) in static mode&quot;</span>};</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#af06c93abec80f9e5931fd21fd440b977">  228</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#af06c93abec80f9e5931fd21fd440b977">r_shadow_bouncegrid_static_maxphotons</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_static_maxphotons&quot;</span>, <span class="stringliteral">&quot;250000&quot;</span>, <span class="stringliteral">&quot;upper bound on photons in static mode&quot;</span>};</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a4e765d143e27a63f01b4818eec6d17ad">  229</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a4e765d143e27a63f01b4818eec6d17ad">r_shadow_bouncegrid_static_quality</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_static_quality&quot;</span>, <span class="stringliteral">&quot;16&quot;</span>, <span class="stringliteral">&quot;amount of photons that should be fired (this is multiplied by spacing ^ 2 to make it adaptive with spacing changes)&quot;</span>};</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7e5e31d59f5e714bffcbd0aede762f1b">  230</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a7e5e31d59f5e714bffcbd0aede762f1b">r_shadow_bouncegrid_static_spacing</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_static_spacing&quot;</span>, <span class="stringliteral">&quot;64&quot;</span>, <span class="stringliteral">&quot;unit size of bouncegrid pixel when in static mode&quot;</span>};</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a90c936b84616d29559d3335016cfebdf">  231</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a90c936b84616d29559d3335016cfebdf">r_shadow_bouncegrid_subsamples</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_subsamples&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;when generating the texture, sample this many points along each dimension (multisampling uses more compute but not more memory bandwidth)&quot;</span>};</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ae5a80c33adccf8968cc4bd5ae656e805">  232</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ae5a80c33adccf8968cc4bd5ae656e805">r_shadow_bouncegrid_threaded</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_shadow_bouncegrid_threaded&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;enables use of taskqueue_maxthreads to perform the traces and slice rendering of bouncegrid&quot;</span>};</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno"><a class="line" href="menu_8c.html#a59782962755e6de424ec4559cf4577a3">  233</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a59782962755e6de424ec4559cf4577a3">r_coronas</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_coronas&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;brightness of corona flare effects around certain lights, 0 disables corona effects&quot;</span>};</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#afc049e9c0dc0d7e168e556a238dc2fbf">  234</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#afc049e9c0dc0d7e168e556a238dc2fbf">r_coronas_occlusionsizescale</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_coronas_occlusionsizescale&quot;</span>, <span class="stringliteral">&quot;0.1&quot;</span>, <span class="stringliteral">&quot;size of light source for corona occlusion checksum the proportion of hidden pixels controls corona intensity&quot;</span>};</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#accca61ee7412c65bb90ee0c7c09e6949">  235</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#accca61ee7412c65bb90ee0c7c09e6949">r_coronas_occlusionquery</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_coronas_occlusionquery&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;fades coronas according to visibility, requires OpenGL 4.4&quot;</span>};</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno"><a class="line" href="menu_8c.html#afdc165beb3e731178a1ba98872bee3b8">  236</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#afdc165beb3e731178a1ba98872bee3b8">gl_flashblend</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;gl_flashblend&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;render bright coronas for dynamic lights instead of actual lighting, fast but ugly&quot;</span>};</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">  237</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;enables .rtlights file editing mode&quot;</span>};</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a63dc439382d15f2dd4a7a884047bcbfd">  238</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a63dc439382d15f2dd4a7a884047bcbfd">r_editlights_cursordistance</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_cursordistance&quot;</span>, <span class="stringliteral">&quot;1024&quot;</span>, <span class="stringliteral">&quot;maximum distance of cursor from eye&quot;</span>};</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a8f1db553ca88c636f59323f60b06e0b3">  239</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a8f1db553ca88c636f59323f60b06e0b3">r_editlights_cursorpushback</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_cursorpushback&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;how far to pull the cursor back toward the eye&quot;</span>};</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a3ce848ab57627ac008049d2e6e768821">  240</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a3ce848ab57627ac008049d2e6e768821">r_editlights_cursorpushoff</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_cursorpushoff&quot;</span>, <span class="stringliteral">&quot;4&quot;</span>, <span class="stringliteral">&quot;how far to push the cursor off the impacted surface&quot;</span>};</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a8f7f45586c012211b7be74ce606e574c">  241</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a8f7f45586c012211b7be74ce606e574c">r_editlights_cursorgrid</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_cursorgrid&quot;</span>, <span class="stringliteral">&quot;4&quot;</span>, <span class="stringliteral">&quot;snaps cursor to this grid size&quot;</span>};</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a672a9d1cc4dc2c152a25e8b2a1c5caae">  242</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a672a9d1cc4dc2c152a25e8b2a1c5caae">r_editlights_quakelightsizescale</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a> | <a class="code hl_define" href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a>, <span class="stringliteral">&quot;r_editlights_quakelightsizescale&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;changes size of light entities loaded from a map&quot;</span>};</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#afeed6d6e238decaa3133bc5414df66d2">  243</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#afeed6d6e238decaa3133bc5414df66d2">r_editlights_drawproperties</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_drawproperties&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;draw properties of currently selected light&quot;</span>};</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a76b3a862e8e0f84844f788e717f412fb">  244</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a76b3a862e8e0f84844f788e717f412fb">r_editlights_current_origin</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_origin&quot;</span>, <span class="stringliteral">&quot;0 0 0&quot;</span>, <span class="stringliteral">&quot;origin of selected light&quot;</span>};</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a11bc0f6e4a8eae1a369b249b999fefb1">  245</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a11bc0f6e4a8eae1a369b249b999fefb1">r_editlights_current_angles</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_angles&quot;</span>, <span class="stringliteral">&quot;0 0 0&quot;</span>, <span class="stringliteral">&quot;angles of selected light&quot;</span>};</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a228f216a9270733c064700839e9fa188">  246</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a228f216a9270733c064700839e9fa188">r_editlights_current_color</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_color&quot;</span>, <span class="stringliteral">&quot;1 1 1&quot;</span>, <span class="stringliteral">&quot;color of selected light&quot;</span>};</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ae150b57d6c0612f7709e613e7aced1d3">  247</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ae150b57d6c0612f7709e613e7aced1d3">r_editlights_current_radius</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_radius&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;radius of selected light&quot;</span>};</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a8944edc1e16483db6f1dabdaaaf491b8">  248</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a8944edc1e16483db6f1dabdaaaf491b8">r_editlights_current_corona</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_corona&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;corona intensity of selected light&quot;</span>};</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a72a967a1ed0fa627326360f636a767ca">  249</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a72a967a1ed0fa627326360f636a767ca">r_editlights_current_coronasize</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_coronasize&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;corona size of selected light&quot;</span>};</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a327b768a966dbb9b7b2b9ed48fe87c40">  250</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a327b768a966dbb9b7b2b9ed48fe87c40">r_editlights_current_style</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_style&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;style of selected light&quot;</span>};</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#af2a4d49ec984ad0127331cba8e7debf1">  251</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#af2a4d49ec984ad0127331cba8e7debf1">r_editlights_current_shadows</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_shadows&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;shadows flag of selected light&quot;</span>};</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a6b2ce902beafb95b38fcdd788ddab802">  252</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a6b2ce902beafb95b38fcdd788ddab802">r_editlights_current_cubemap</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_cubemap&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;cubemap of selected light&quot;</span>};</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9b257bcf33a5e2829102f091b0981006">  253</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a9b257bcf33a5e2829102f091b0981006">r_editlights_current_ambient</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_ambient&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;ambient intensity of selected light&quot;</span>};</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#acd95c1f96dfaf981d25cc90ffe63f8eb">  254</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#acd95c1f96dfaf981d25cc90ffe63f8eb">r_editlights_current_diffuse</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_diffuse&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;diffuse intensity of selected light&quot;</span>};</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aeb7fd587e0d07d10f6a425cb693d08e2">  255</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#aeb7fd587e0d07d10f6a425cb693d08e2">r_editlights_current_specular</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_specular&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;specular intensity of selected light&quot;</span>};</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a491dbf84ab84d3d9a981d56f82d626f3">  256</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a491dbf84ab84d3d9a981d56f82d626f3">r_editlights_current_normalmode</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_normalmode&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;normalmode flag of selected light&quot;</span>};</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0a5c0469e4a2bdc175d837d81184f8a0">  257</a></span><a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a0a5c0469e4a2bdc175d837d81184f8a0">r_editlights_current_realtimemode</a> = {<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_current_realtimemode&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;realtimemode flag of selected light&quot;</span>};</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span> </div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">  259</a></span><a class="code hl_struct" href="structr__shadow__bouncegrid__state__t.html">r_shadow_bouncegrid_state_t</a> <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span> </div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span><span class="comment">// note the table actually includes one more value, just to avoid the need to clamp the distance index due to minor math error</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5a392abd3660ffeddcd31d617d756ef9">  262</a></span><span class="preprocessor">#define ATTENTABLESIZE 256</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span><span class="comment">// 1D gradient, 2D circle and 3D sphere attenuation textures</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aeb6886bbd1cf0b2d264895c983ac5d40">  264</a></span><span class="preprocessor">#define ATTEN1DSIZE 32</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a3bd90b680c3721ed0124b660332bd3f3">  265</a></span><span class="preprocessor">#define ATTEN2DSIZE 64</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ad077a8bcfd564f016dc4f5ee589c36b9">  266</a></span><span class="preprocessor">#define ATTEN3DSIZE 32</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span> </div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa05e61ca09411882a73c20031098d7a9">  268</a></span><span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="r__shadow_8c.html#aa05e61ca09411882a73c20031098d7a9">r_shadow_attendividebias</a>; <span class="comment">// r_shadow_lightattenuationdividebias</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#abe85cac9d47b95845357d5b059ad085c">  269</a></span><span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="r__shadow_8c.html#abe85cac9d47b95845357d5b059ad085c">r_shadow_attenlinearscale</a>; <span class="comment">// r_shadow_lightattenuationlinearscale</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#adf403909f42eb98bfa60734c71778bba">  270</a></span><span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="r__shadow_8c.html#adf403909f42eb98bfa60734c71778bba">r_shadow_attentable</a>[<a class="code hl_define" href="r__shadow_8c.html#a5a392abd3660ffeddcd31d617d756ef9">ATTENTABLESIZE</a>+1];</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span> </div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa270795a82b2335cb10e2c83f5e9aa76">  272</a></span><a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#aa270795a82b2335cb10e2c83f5e9aa76">r_shadow_compilingrtlight</a>;</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">  273</a></span><span class="keyword">static</span> <a class="code hl_struct" href="structmemexpandablearray__t.html">memexpandablearray_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">  274</a></span><a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">  275</a></span><a class="code hl_struct" href="structdlight__t.html">dlight_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>;</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a231b12d52440fde590bcee63e4d07d64">  276</a></span><a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a231b12d52440fde590bcee63e4d07d64">r_editlights_cursorlocation</a>;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#afe65ae6d734367fc70f16e1eb6df80c6">  277</a></span><a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="r__shadow_8c.html#afe65ae6d734367fc70f16e1eb6df80c6">r_editlights_lockcursor</a>;</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span> </div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span><span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#acdae77962f6ca032365eb4681a73a4a7">con_vislines</a>;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a2a9dc185bb3db2a01214f2f16a0a8143">R_Shadow_UncompileWorldLights</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#aa8fe16360e95a6a6658c7519cebf0b97">R_Shadow_ClearWorldLights</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ac864259a133582c8ceb11c08505e0c31">R_Shadow_SaveWorldLights</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ac94cccbef6ba7a6684c29ac1746a4370">R_Shadow_LoadWorldLights</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a2ad6f119241bf55bc48f5e3225b68638">R_Shadow_LoadLightsFile</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#aef0cd091bb977ece766820b8f107f53e">R_Shadow_LoadWorldLightsFromMap_LightArghliteTyrlite</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a06ac0a27bc6888c17169add1450b26e4">R_Shadow_EditLights_Reload_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd);</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a57a59322c075e1870bd1a4ded513c051">R_Shadow_MakeTextures</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span> </div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a846335344e4cccc5dad99d5778bd8ed4">  290</a></span><span class="preprocessor">#define EDLIGHTSPRSIZE          8</span></div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a77fcab02591cf32e02c8e5651e323d87">  291</a></span><a class="code hl_struct" href="structskinframe__t.html">skinframe_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#a77fcab02591cf32e02c8e5651e323d87">r_editlights_sprcursor</a>;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a4996623220b790e7682c23e4de6fc237">  292</a></span><a class="code hl_struct" href="structskinframe__t.html">skinframe_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#a4996623220b790e7682c23e4de6fc237">r_editlights_sprlight</a>;</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a23892b3c16ceec91c2a8df49795ec2e2">  293</a></span><a class="code hl_struct" href="structskinframe__t.html">skinframe_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#a23892b3c16ceec91c2a8df49795ec2e2">r_editlights_sprnoshadowlight</a>;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa8a7722a93e47750076d60e003e825b5">  294</a></span><a class="code hl_struct" href="structskinframe__t.html">skinframe_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#aa8a7722a93e47750076d60e003e825b5">r_editlights_sprcubemaplight</a>;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ae8447729362c0b4859f595ec86e15d6c">  295</a></span><a class="code hl_struct" href="structskinframe__t.html">skinframe_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#ae8447729362c0b4859f595ec86e15d6c">r_editlights_sprcubemapnoshadowlight</a>;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9941c1f23ab960b05549dacb0426ae71">  296</a></span><a class="code hl_struct" href="structskinframe__t.html">skinframe_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#a9941c1f23ab960b05549dacb0426ae71">r_editlights_sprselection</a>;</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a98692eae6f52e4fb205ee47f6e6cf56a">R_Shadow_DrawModelShadowMaps</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a7f5a67a5e4958c92207104d85f286e59">R_Shadow_MakeShadowMap</a>(<span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesize</a>);</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a63faf6a233a9783c2374780dd741a9ea">R_Shadow_MakeVSDCT</a>(<span class="keywordtype">void</span>);</div>
<div class="foldopen" id="foldopen00301" data-start="{" data-end="}">
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#adc0e191cf49d4f681d6e13a49d338c54">  301</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#adc0e191cf49d4f681d6e13a49d338c54">R_Shadow_SetShadowMode</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>{</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <a class="code hl_variable" href="r__shadow_8c.html#a494d7f51c8713574c3d2b2585354b9e3">r_shadow_shadowmode_shadowmapping</a> = <a class="code hl_variable" href="r__shadow_8c.html#a5363c849518fc64d491c1f7c6f612655">r_shadow_shadowmapping</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>;</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <a class="code hl_variable" href="r__shadow_8c.html#ae7c6f57d2c079948874a1052332c8daf">r_shadow_shadowmode_deferred</a> = <a class="code hl_variable" href="r__shadow_8c.html#ab48847f5962cf96e707a015ec3e4630b">r_shadow_deferred</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>;</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(1, <a class="code hl_variable" href="r__shadow_8c.html#a310939d55b4b4314782679eb0381c248">r_shadow_shadowmapping_bordersize</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>, 16);</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    <a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(256, <a class="code hl_variable" href="r__shadow_8c.html#af68f9b04e8943ef4226c2e76e530238a">r_shadow_shadowmapping_texturesize</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>, (<span class="keywordtype">int</span>)<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a06a669057f01a0d02c34aa0ebc781a54">maxtexturesize_2d</a>);</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    <a class="code hl_variable" href="r__shadow_8c.html#a2acc73bfba472354d3cb6c2998628eb0">r_shadow_shadowmapmaxsize</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(<a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a>+2, <a class="code hl_variable" href="r__shadow_8c.html#a020aca21f20ded8f0e7b7cfafcc52dcb">r_shadow_shadowmapping_maxsize</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a> / 8);</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    <a class="code hl_variable" href="r__shadow_8c.html#a43e8c7a380aad0c6b987befbc9950b20">r_shadow_shadowmapvsdct</a> = <a class="code hl_variable" href="r__shadow_8c.html#a0bf0a59428f24e0a923392d83630bd0b">r_shadow_shadowmapping_vsdct</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> != 0 &amp;&amp; <a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a77ee51e56202df8258781a0aa1dc1a2d">renderpath</a> == <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafcfef4a81b353e6ad9bfee33f0c6076a">RENDERPATH_GL32</a>;</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    <a class="code hl_variable" href="r__shadow_8c.html#a58f22ad2c088cb0bed84c43287259fa5">r_shadow_shadowmapfilterquality</a> = <a class="code hl_variable" href="r__shadow_8c.html#a00485eb415b8d269b0b411106ca73297">r_shadow_shadowmapping_filterquality</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    <a class="code hl_variable" href="r__shadow_8c.html#a3597c68e03b049937f0a8d1f48b2d155">r_shadow_shadowmapshadowsampler</a> = <a class="code hl_variable" href="r__shadow_8c.html#a5a1b9f3c2977cc5264499e8871d516c8">r_shadow_shadowmapping_useshadowsampler</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> != 0;</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    <a class="code hl_variable" href="r__shadow_8c.html#a67409f727e6f049f035e240153f81678">r_shadow_shadowmapdepthbits</a> = <a class="code hl_variable" href="r__shadow_8c.html#a437cdd8c6d29ebd4b03f259f20e14415">r_shadow_shadowmapping_depthbits</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>;</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    <a class="code hl_variable" href="r__shadow_8c.html#a6538a2021d0ed79281be83552a020f24">r_shadow_shadowmapsampler</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <a class="code hl_variable" href="r__shadow_8c.html#a172880f0c24e4e10a2321b58c15aa385">r_shadow_shadowmappcf</a> = 0;</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    <a class="code hl_variable" href="r__shadow_8c.html#ad03146a33674d1c4a225d77b41e3c296">r_shadow_shadowmapdepthtexture</a> = <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#a43e7d7c5065855167a45d14f3ec4a89e">usedepthtextures</a>;</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    <a class="code hl_variable" href="r__shadow_8c.html#a8806bf00c50d87c860dce157ae250a48">r_shadow_shadowmode</a> = <a class="code hl_enumvalue" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835a502b4eb32a6583fccaeaeca27674d5a3">R_SHADOW_SHADOWMODE_DISABLED</a>;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a494d7f51c8713574c3d2b2585354b9e3">r_shadow_shadowmode_shadowmapping</a> || <a class="code hl_variable" href="r__shadow_8c.html#ae7c6f57d2c079948874a1052332c8daf">r_shadow_shadowmode_deferred</a>)</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    {</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>        <span class="keywordflow">switch</span> (<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a77ee51e56202df8258781a0aa1dc1a2d">renderpath</a>)</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>        {</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafcfef4a81b353e6ad9bfee33f0c6076a">RENDERPATH_GL32</a>:</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a58f22ad2c088cb0bed84c43287259fa5">r_shadow_shadowmapfilterquality</a> &lt; 0)</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>            {</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#a43e7d7c5065855167a45d14f3ec4a89e">usedepthtextures</a>)</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>                    <a class="code hl_variable" href="r__shadow_8c.html#a172880f0c24e4e10a2321b58c15aa385">r_shadow_shadowmappcf</a> = 1;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strstr</a>(<a class="code hl_variable" href="vid_8h.html#a04bc8150d67111633f687f346ef11213">gl_vendor</a>, <span class="stringliteral">&quot;NVIDIA&quot;</span>) || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strstr</a>(<a class="code hl_variable" href="vid_8h.html#a9d1815b351cd8efde55a93191fb6b5d7">gl_renderer</a>, <span class="stringliteral">&quot;Radeon HD&quot;</span>)) &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#a3597c68e03b049937f0a8d1f48b2d155">r_shadow_shadowmapshadowsampler</a>)</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>                {</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>                    <a class="code hl_variable" href="r__shadow_8c.html#a6538a2021d0ed79281be83552a020f24">r_shadow_shadowmapsampler</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>                    <a class="code hl_variable" href="r__shadow_8c.html#a172880f0c24e4e10a2321b58c15aa385">r_shadow_shadowmappcf</a> = 1;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>                }</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a993a26a349fe3edd4be4cc65b42d261e">support</a>.<a class="code hl_variable" href="structviddef__support__t.html#a19c7955d9a5a2ec5a8e240e304605c1f">amd_texture_texture4</a> || <a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a993a26a349fe3edd4be4cc65b42d261e">support</a>.<a class="code hl_variable" href="structviddef__support__t.html#a1e47329aabd6e05c76a6309a6f487b00">arb_texture_gather</a>)</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>                    <a class="code hl_variable" href="r__shadow_8c.html#a172880f0c24e4e10a2321b58c15aa385">r_shadow_shadowmappcf</a> = 1;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strstr</a>(<a class="code hl_variable" href="vid_8h.html#a04bc8150d67111633f687f346ef11213">gl_vendor</a>, <span class="stringliteral">&quot;ATI&quot;</span>) || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strstr</a>(<a class="code hl_variable" href="vid_8h.html#a04bc8150d67111633f687f346ef11213">gl_vendor</a>, <span class="stringliteral">&quot;Advanced Micro Devices&quot;</span>)) &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strstr</a>(<a class="code hl_variable" href="vid_8h.html#a9d1815b351cd8efde55a93191fb6b5d7">gl_renderer</a>, <span class="stringliteral">&quot;Mesa&quot;</span>) &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strstr</a>(<a class="code hl_variable" href="vid_8h.html#a8ad4fd4a0fc26d32b2587f36584ec528">gl_version</a>, <span class="stringliteral">&quot;Mesa&quot;</span>))</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>                    <a class="code hl_variable" href="r__shadow_8c.html#a172880f0c24e4e10a2321b58c15aa385">r_shadow_shadowmappcf</a> = 1;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>                    <a class="code hl_variable" href="r__shadow_8c.html#a6538a2021d0ed79281be83552a020f24">r_shadow_shadowmapsampler</a> = <a class="code hl_variable" href="r__shadow_8c.html#a3597c68e03b049937f0a8d1f48b2d155">r_shadow_shadowmapshadowsampler</a>;</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>            }</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>            {</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>                <a class="code hl_variable" href="r__shadow_8c.html#a6538a2021d0ed79281be83552a020f24">r_shadow_shadowmapsampler</a> = <a class="code hl_variable" href="r__shadow_8c.html#a3597c68e03b049937f0a8d1f48b2d155">r_shadow_shadowmapshadowsampler</a>;</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>                <span class="keywordflow">switch</span> (<a class="code hl_variable" href="r__shadow_8c.html#a58f22ad2c088cb0bed84c43287259fa5">r_shadow_shadowmapfilterquality</a>)</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>                {</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>                <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>                <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>                    <a class="code hl_variable" href="r__shadow_8c.html#a172880f0c24e4e10a2321b58c15aa385">r_shadow_shadowmappcf</a> = 1;</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>                <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>                    <a class="code hl_variable" href="r__shadow_8c.html#a172880f0c24e4e10a2321b58c15aa385">r_shadow_shadowmappcf</a> = 1;</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>                <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>                    <a class="code hl_variable" href="r__shadow_8c.html#a172880f0c24e4e10a2321b58c15aa385">r_shadow_shadowmappcf</a> = 2;</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>                }</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>            }</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#a43e7d7c5065855167a45d14f3ec4a89e">usedepthtextures</a>)</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>                <a class="code hl_variable" href="r__shadow_8c.html#a6538a2021d0ed79281be83552a020f24">r_shadow_shadowmapsampler</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>            <a class="code hl_variable" href="r__shadow_8c.html#a8806bf00c50d87c860dce157ae250a48">r_shadow_shadowmode</a> = <a class="code hl_enumvalue" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835aca635c2eb9b6d41bf36cc8ab01f4444b">R_SHADOW_SHADOWMODE_SHADOWMAP2D</a>;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafbfa84c8848e1c609691f76637da178b">RENDERPATH_GLES2</a>:</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>            <a class="code hl_variable" href="r__shadow_8c.html#a8806bf00c50d87c860dce157ae250a48">r_shadow_shadowmode</a> = <a class="code hl_enumvalue" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835aca635c2eb9b6d41bf36cc8ab01f4444b">R_SHADOW_SHADOWMODE_SHADOWMAP2D</a>;</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        }</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    }</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span> </div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="r__shadow_8c.html#a8806bf00c50d87c860dce157ae250a48">r_shadow_shadowmode</a>)</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    {</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835aca635c2eb9b6d41bf36cc8ab01f4444b">R_SHADOW_SHADOWMODE_SHADOWMAP2D</a>:</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        <a class="code hl_function" href="model__shared_8c.html#a27be267e2cf2666a18e976df520e625b">Mod_AllocLightmap_Init</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a566ec440d28d0ebea734f64b463ad372">r_shadow_shadowmapatlas_state</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a>);</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835a502b4eb32a6583fccaeaeca27674d5a3">R_SHADOW_SHADOWMODE_DISABLED</a>:</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    }</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span> </div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="gl__rmain_8c.html#aa29b4395183d58569d13e4e40db33629">R_CompileShader_CheckStaticParms</a>())</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        <a class="code hl_function" href="gl__rmain_8c.html#a082032c84c6ef04defd86078638debce">R_GLSL_Restart_f</a>(<a class="code hl_variable" href="cmd_8c.html#aa617fb9e2fe1edc8bd6ce0fafccd3626">cmd_local</a>);</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>}</div>
</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span> </div>
<div class="foldopen" id="foldopen00378" data-start="{" data-end="}">
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a6a2b6b4ed69e837e20c465b31226b9e4">  378</a></span><a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_function" href="r__shadow_8c.html#a6a2b6b4ed69e837e20c465b31226b9e4">R_Shadow_ShadowMappingEnabled</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>{</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="r__shadow_8c.html#a8806bf00c50d87c860dce157ae250a48">r_shadow_shadowmode</a>)</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    {</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835aca635c2eb9b6d41bf36cc8ab01f4444b">R_SHADOW_SHADOWMODE_SHADOWMAP2D</a>:</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835a502b4eb32a6583fccaeaeca27674d5a3">R_SHADOW_SHADOWMODE_DISABLED</a>:</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    }</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>}</div>
</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span> </div>
<div class="foldopen" id="foldopen00390" data-start="{" data-end="}">
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a45077a7e2910775a9f6a02179a55a44b">  390</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a45077a7e2910775a9f6a02179a55a44b">R_Shadow_FreeShadowMaps</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>{</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    <a class="code hl_function" href="r__shadow_8c.html#a2a9dc185bb3db2a01214f2f16a0a8143">R_Shadow_UncompileWorldLights</a>();</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span> </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <a class="code hl_function" href="model__shared_8c.html#a2a3016fba1c91f35365a48717811edc3">Mod_AllocLightmap_Free</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a566ec440d28d0ebea734f64b463ad372">r_shadow_shadowmapatlas_state</a>);</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span> </div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <a class="code hl_function" href="r__shadow_8c.html#adc0e191cf49d4f681d6e13a49d338c54">R_Shadow_SetShadowMode</a>();</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span> </div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <a class="code hl_function" href="gl__backend_8c.html#afc361a7676a518ccccc3f0bb3b38b9c0">R_Mesh_DestroyFramebufferObject</a>(<a class="code hl_variable" href="r__shadow_8c.html#ac362e58a7bea0632e15053a1e21b6d2c">r_shadow_fbo2d</a>);</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span> </div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>    <a class="code hl_variable" href="r__shadow_8c.html#ac362e58a7bea0632e15053a1e21b6d2c">r_shadow_fbo2d</a> = 0;</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a>)</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>        <a class="code hl_function" href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a>);</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    <a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span> </div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a>)</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>        <a class="code hl_function" href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a>);</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    <a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span> </div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#ab04b93fe59cc8947d98de66c740eda01">r_shadow_shadowmapvsdcttexture</a>)</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>        <a class="code hl_function" href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#ab04b93fe59cc8947d98de66c740eda01">r_shadow_shadowmapvsdcttexture</a>);</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    <a class="code hl_variable" href="r__shadow_8c.html#ab04b93fe59cc8947d98de66c740eda01">r_shadow_shadowmapvsdcttexture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span> </div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>}</div>
</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span> </div>
<div class="foldopen" id="foldopen00416" data-start="{" data-end="}">
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac539c896d573c08c20b0a2c6b7eb7fba">  416</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ac539c896d573c08c20b0a2c6b7eb7fba">r_shadow_start</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>{</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    <span class="comment">// allocate vertex processing arrays</span></div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>));</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5b73004bfb2234722770d895bc736f11">r_shadow_attenuationgradienttexture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    <a class="code hl_variable" href="r__shadow_8c.html#a8806bf00c50d87c860dce157ae250a48">r_shadow_shadowmode</a> = <a class="code hl_enumvalue" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835a502b4eb32a6583fccaeaeca27674d5a3">R_SHADOW_SHADOWMODE_DISABLED</a>;</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    <a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    <a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    <a class="code hl_variable" href="r__shadow_8c.html#ab04b93fe59cc8947d98de66c740eda01">r_shadow_shadowmapvsdcttexture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>    <a class="code hl_variable" href="r__shadow_8c.html#a2acc73bfba472354d3cb6c2998628eb0">r_shadow_shadowmapmaxsize</a> = 0;</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    <a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a> = 0;</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    <a class="code hl_variable" href="r__shadow_8c.html#a58f22ad2c088cb0bed84c43287259fa5">r_shadow_shadowmapfilterquality</a> = -1;</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>    <a class="code hl_variable" href="r__shadow_8c.html#a67409f727e6f049f035e240153f81678">r_shadow_shadowmapdepthbits</a> = 0;</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    <a class="code hl_variable" href="r__shadow_8c.html#a43e8c7a380aad0c6b987befbc9950b20">r_shadow_shadowmapvsdct</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>    <a class="code hl_variable" href="r__shadow_8c.html#a6538a2021d0ed79281be83552a020f24">r_shadow_shadowmapsampler</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>    <a class="code hl_variable" href="r__shadow_8c.html#a172880f0c24e4e10a2321b58c15aa385">r_shadow_shadowmappcf</a> = 0;</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>    <a class="code hl_variable" href="r__shadow_8c.html#ac362e58a7bea0632e15053a1e21b6d2c">r_shadow_fbo2d</a> = 0;</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span> </div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    <a class="code hl_function" href="r__shadow_8c.html#a45077a7e2910775a9f6a02179a55a44b">R_Shadow_FreeShadowMaps</a>();</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span> </div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    <a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    <a class="code hl_variable" href="r__shadow_8c.html#aedef61baead60ec7acf0d0cef86d158e">r_shadow_filters_texturepool</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>    <a class="code hl_function" href="r__shadow_8c.html#a57a59322c075e1870bd1a4ded513c051">R_Shadow_MakeTextures</a>();</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>    <a class="code hl_variable" href="r__shadow_8c.html#ab24c07551e3ecf58f94909820aaa2bfd">r_shadow_scenemaxlights</a> = 0;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    <a class="code hl_variable" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a> = 0;</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>    <a class="code hl_variable" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>    <a class="code hl_variable" href="r__shadow_8c.html#a50840da8047197b7b97ae48568ce04a1">maxshadowtriangles</a> = 0;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>    <a class="code hl_variable" href="r__shadow_8c.html#aec9f83716e02d5827f1414d2e99633dc">shadowelements</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    <a class="code hl_variable" href="r__shadow_8c.html#a65dfd4a4235d767e35c6be9c52b67cc8">maxshadowvertices</a> = 0;</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    <a class="code hl_variable" href="r__shadow_8c.html#a7e9c22b3ec6affd555dada90f6bbdfb7">shadowvertex3f</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <a class="code hl_variable" href="r__shadow_8c.html#a69929cbc19f8c80baa748a9cb1217769">maxvertexupdate</a> = 0;</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    <a class="code hl_variable" href="r__shadow_8c.html#a3b04167aa9a5166d946d7a2ad69c0cfb">vertexupdate</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    <a class="code hl_variable" href="r__shadow_8c.html#aff1170b5b07317b3b313b87f253d17dd">vertexremap</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    <a class="code hl_variable" href="r__shadow_8c.html#af3b133ac1cbd4a3def2c2ebd4d750073">vertexupdatenum</a> = 0;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>    <a class="code hl_variable" href="r__shadow_8c.html#a1deb1046f27ec5ac942ae8e7374a3f22">maxshadowmark</a> = 0;</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    <a class="code hl_variable" href="r__shadow_8c.html#a8180b5361a778c8f61f1b0b1dc844077">numshadowmark</a> = 0;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>    <a class="code hl_variable" href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">shadowmark</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    <a class="code hl_variable" href="r__shadow_8c.html#ac972f0aabe9dc399b9e0400d60c69c3f">shadowmarklist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    <a class="code hl_variable" href="r__shadow_8c.html#aac84d2ea256326d01ea2710316bb47ad">shadowmarkcount</a> = 0;</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    <a class="code hl_variable" href="r__shadow_8c.html#a3360a755216b12b0928cf4e3e3842d0e">maxshadowsides</a> = 0;</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a> = 0;</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>    <a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    <a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    <a class="code hl_variable" href="r__shadow_8c.html#a9a3fe0d597026f41083557ae9f030a11">r_shadow_buffer_numleafpvsbytes</a> = 0;</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    <a class="code hl_variable" href="r__shadow_8c.html#a358d50682355dd070731495eb5ccd19c">r_shadow_buffer_visitingleafpvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>    <a class="code hl_variable" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>    <a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    <a class="code hl_variable" href="r__shadow_8c.html#ac93991e2e64a1b25ff5438c33122286d">r_shadow_buffer_numsurfacepvsbytes</a> = 0;</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    <a class="code hl_variable" href="r__shadow_8c.html#a31e6522610c02f09559b7bd8bd75c558">r_shadow_buffer_surfacepvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>    <a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    <a class="code hl_variable" href="r__shadow_8c.html#a064f7d12ba68cca46e785786d48e8985">r_shadow_buffer_surfacesides</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>    <a class="code hl_variable" href="r__shadow_8c.html#a39536fb5625169cacb76dad160685d55">r_shadow_buffer_numshadowtrispvsbytes</a> = 0;</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    <a class="code hl_variable" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>    <a class="code hl_variable" href="r__shadow_8c.html#a0d465ed0b81809e1263706defa298e46">r_shadow_buffer_numlighttrispvsbytes</a> = 0;</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>    <a class="code hl_variable" href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">r_shadow_buffer_lighttrispvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span> </div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>    <a class="code hl_variable" href="r__shadow_8c.html#a4b5a72c38504bc6ea78e695f2ed16aca">r_shadow_usingdeferredprepass</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    <a class="code hl_variable" href="r__shadow_8c.html#aa07187db7c3c253b48338fc55201564e">r_shadow_prepass_width</a> = <a class="code hl_variable" href="r__shadow_8c.html#ac301c7bf5ab0840e76847ec294d41841">r_shadow_prepass_height</a> = 0;</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span> </div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    <span class="comment">// determine renderpath specific capabilities, we don&#39;t need to figure</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    <span class="comment">// these out per frame...</span></div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    <span class="keywordflow">switch</span>(<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a77ee51e56202df8258781a0aa1dc1a2d">renderpath</a>)</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    {</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafcfef4a81b353e6ad9bfee33f0c6076a">RENDERPATH_GL32</a>:</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a6b14b6d8d898cec4fc16b67020812414">allowdirectionalshading</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a1d2dad554d64fe89c965cea311414b51">capable</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafbfa84c8848e1c609691f76637da178b">RENDERPATH_GLES2</a>:</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>        <span class="comment">// for performance reasons, do not use directional shading on GLES devices</span></div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a1d2dad554d64fe89c965cea311414b51">capable</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    }</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>}</div>
</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span> </div>
<div class="foldopen" id="foldopen00490" data-start="{" data-end="}">
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a2e12c3123d6cad1786cdbf7001ce3207">  490</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a2e12c3123d6cad1786cdbf7001ce3207">R_Shadow_BounceGrid_FreeHighPixels</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>{</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>    <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a2a1127f6d6a8017ef9f836a6c20749e1">highpixels</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[0]) { <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[0]); <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[0] = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; }</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[1]) { <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[1]); <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[1] = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; }</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a83026f8a045c783abf4bd2a10e1255a6">u8pixels</a>)      { <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a83026f8a045c783abf4bd2a10e1255a6">u8pixels</a>);      <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a83026f8a045c783abf4bd2a10e1255a6">u8pixels</a>      = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; }</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aa88f1872c4cfddb46de483f0eeb39f1d">fp16pixels</a>)    { <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aa88f1872c4cfddb46de483f0eeb39f1d">fp16pixels</a>);    <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aa88f1872c4cfddb46de483f0eeb39f1d">fp16pixels</a>    = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; }</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ae4981b1554885bab7fd99847a44ecb23">photons</a>)       { <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ae4981b1554885bab7fd99847a44ecb23">photons</a>);       <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ae4981b1554885bab7fd99847a44ecb23">photons</a>       = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; }</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a7e4e9f75b9619e00e9b290ff6c33f8ea">photons_tasks</a>) { <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a7e4e9f75b9619e00e9b290ff6c33f8ea">photons_tasks</a>); <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a7e4e9f75b9619e00e9b290ff6c33f8ea">photons_tasks</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; }</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ab7132e4b1581f8b6d909662b7e5b0308">slices_tasks</a>)  { <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ab7132e4b1581f8b6d909662b7e5b0308">slices_tasks</a>);  <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ab7132e4b1581f8b6d909662b7e5b0308">slices_tasks</a>  = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; }</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>}</div>
</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span> </div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a24e3d35efcffd1452bf8b5d900a08d2c">R_Shadow_FreeDeferred</a>(<span class="keywordtype">void</span>);</div>
<div class="foldopen" id="foldopen00503" data-start="{" data-end="}">
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a8ab5df521017cffa6ec59d0a9e7038fa">  503</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a8ab5df521017cffa6ec59d0a9e7038fa">r_shadow_shutdown</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>{</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    <a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span> </div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>    <a class="code hl_function" href="r__shadow_8c.html#a45077a7e2910775a9f6a02179a55a44b">R_Shadow_FreeShadowMaps</a>();</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span> </div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    <a class="code hl_variable" href="r__shadow_8c.html#a4b5a72c38504bc6ea78e695f2ed16aca">r_shadow_usingdeferredprepass</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aa07187db7c3c253b48338fc55201564e">r_shadow_prepass_width</a>)</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>        <a class="code hl_function" href="r__shadow_8c.html#a24e3d35efcffd1452bf8b5d900a08d2c">R_Shadow_FreeDeferred</a>();</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>    <a class="code hl_variable" href="r__shadow_8c.html#aa07187db7c3c253b48338fc55201564e">r_shadow_prepass_width</a> = <a class="code hl_variable" href="r__shadow_8c.html#ac301c7bf5ab0840e76847ec294d41841">r_shadow_prepass_height</a> = 0;</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span> </div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    <a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    <a class="code hl_variable" href="r__shadow_8c.html#ab24c07551e3ecf58f94909820aaa2bfd">r_shadow_scenemaxlights</a> = 0;</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    <a class="code hl_variable" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a> = 0;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a>)</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a>);</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <a class="code hl_variable" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>    <a class="code hl_function" href="r__shadow_8c.html#a2e12c3123d6cad1786cdbf7001ce3207">R_Shadow_BounceGrid_FreeHighPixels</a>();</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>));</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5b73004bfb2234722770d895bc736f11">r_shadow_attenuationgradienttexture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    <a class="code hl_function" href="gl__textures_8c.html#a114f2477dc7b969704fce4025b2a4b1b">R_FreeTexturePool</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>);</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    <a class="code hl_function" href="gl__textures_8c.html#a114f2477dc7b969704fce4025b2a4b1b">R_FreeTexturePool</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aedef61baead60ec7acf0d0cef86d158e">r_shadow_filters_texturepool</a>);</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>    <a class="code hl_variable" href="r__shadow_8c.html#a50840da8047197b7b97ae48568ce04a1">maxshadowtriangles</a> = 0;</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aec9f83716e02d5827f1414d2e99633dc">shadowelements</a>)</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#aec9f83716e02d5827f1414d2e99633dc">shadowelements</a>);</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    <a class="code hl_variable" href="r__shadow_8c.html#aec9f83716e02d5827f1414d2e99633dc">shadowelements</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a7e9c22b3ec6affd555dada90f6bbdfb7">shadowvertex3f</a>)</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a7e9c22b3ec6affd555dada90f6bbdfb7">shadowvertex3f</a>);</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    <a class="code hl_variable" href="r__shadow_8c.html#a7e9c22b3ec6affd555dada90f6bbdfb7">shadowvertex3f</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    <a class="code hl_variable" href="r__shadow_8c.html#a69929cbc19f8c80baa748a9cb1217769">maxvertexupdate</a> = 0;</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a3b04167aa9a5166d946d7a2ad69c0cfb">vertexupdate</a>)</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a3b04167aa9a5166d946d7a2ad69c0cfb">vertexupdate</a>);</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    <a class="code hl_variable" href="r__shadow_8c.html#a3b04167aa9a5166d946d7a2ad69c0cfb">vertexupdate</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aff1170b5b07317b3b313b87f253d17dd">vertexremap</a>)</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#aff1170b5b07317b3b313b87f253d17dd">vertexremap</a>);</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>    <a class="code hl_variable" href="r__shadow_8c.html#aff1170b5b07317b3b313b87f253d17dd">vertexremap</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    <a class="code hl_variable" href="r__shadow_8c.html#af3b133ac1cbd4a3def2c2ebd4d750073">vertexupdatenum</a> = 0;</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    <a class="code hl_variable" href="r__shadow_8c.html#a1deb1046f27ec5ac942ae8e7374a3f22">maxshadowmark</a> = 0;</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    <a class="code hl_variable" href="r__shadow_8c.html#a8180b5361a778c8f61f1b0b1dc844077">numshadowmark</a> = 0;</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">shadowmark</a>)</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">shadowmark</a>);</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    <a class="code hl_variable" href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">shadowmark</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#ac972f0aabe9dc399b9e0400d60c69c3f">shadowmarklist</a>)</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#ac972f0aabe9dc399b9e0400d60c69c3f">shadowmarklist</a>);</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <a class="code hl_variable" href="r__shadow_8c.html#ac972f0aabe9dc399b9e0400d60c69c3f">shadowmarklist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    <a class="code hl_variable" href="r__shadow_8c.html#aac84d2ea256326d01ea2710316bb47ad">shadowmarkcount</a> = 0;</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>    <a class="code hl_variable" href="r__shadow_8c.html#a3360a755216b12b0928cf4e3e3842d0e">maxshadowsides</a> = 0;</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a> = 0;</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a>)</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a>);</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>    <a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a>)</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a>);</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    <a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <a class="code hl_variable" href="r__shadow_8c.html#a9a3fe0d597026f41083557ae9f030a11">r_shadow_buffer_numleafpvsbytes</a> = 0;</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a358d50682355dd070731495eb5ccd19c">r_shadow_buffer_visitingleafpvs</a>)</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a358d50682355dd070731495eb5ccd19c">r_shadow_buffer_visitingleafpvs</a>);</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    <a class="code hl_variable" href="r__shadow_8c.html#a358d50682355dd070731495eb5ccd19c">r_shadow_buffer_visitingleafpvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a>)</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a>);</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    <a class="code hl_variable" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a>)</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a>);</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    <a class="code hl_variable" href="r__shadow_8c.html#ac93991e2e64a1b25ff5438c33122286d">r_shadow_buffer_numsurfacepvsbytes</a> = 0;</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a31e6522610c02f09559b7bd8bd75c558">r_shadow_buffer_surfacepvs</a>)</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a31e6522610c02f09559b7bd8bd75c558">r_shadow_buffer_surfacepvs</a>);</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    <a class="code hl_variable" href="r__shadow_8c.html#a31e6522610c02f09559b7bd8bd75c558">r_shadow_buffer_surfacepvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a>)</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a>);</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    <a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a064f7d12ba68cca46e785786d48e8985">r_shadow_buffer_surfacesides</a>)</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a064f7d12ba68cca46e785786d48e8985">r_shadow_buffer_surfacesides</a>);</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    <a class="code hl_variable" href="r__shadow_8c.html#a064f7d12ba68cca46e785786d48e8985">r_shadow_buffer_surfacesides</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    <a class="code hl_variable" href="r__shadow_8c.html#a39536fb5625169cacb76dad160685d55">r_shadow_buffer_numshadowtrispvsbytes</a> = 0;</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a>)</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a>);</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>    <a class="code hl_variable" href="r__shadow_8c.html#a0d465ed0b81809e1263706defa298e46">r_shadow_buffer_numlighttrispvsbytes</a> = 0;</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">r_shadow_buffer_lighttrispvs</a>)</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">r_shadow_buffer_lighttrispvs</a>);</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>}</div>
</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span> </div>
<div class="foldopen" id="foldopen00585" data-start="{" data-end="}">
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#adff96119013e5218f435422f7b13cee7">  585</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#adff96119013e5218f435422f7b13cee7">r_shadow_newmap</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>{</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    <a class="code hl_function" href="r__shadow_8c.html#a2e12c3123d6cad1786cdbf7001ce3207">R_Shadow_BounceGrid_FreeHighPixels</a>();</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span> </div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a>)    { <a class="code hl_function" href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a>);<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; }</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aed09fab0c0feac12235fc7fd4be8ab96">r_shadow_lightcorona</a>)                 { <a class="code hl_function" href="gl__rmain_8c.html#ac068333f6656190ddd5836765acdffe0">R_SkinFrame_MarkUsed</a>(<a class="code hl_variable" href="r__shadow_8c.html#aed09fab0c0feac12235fc7fd4be8ab96">r_shadow_lightcorona</a>); }</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a77fcab02591cf32e02c8e5651e323d87">r_editlights_sprcursor</a>)               { <a class="code hl_function" href="gl__rmain_8c.html#ac068333f6656190ddd5836765acdffe0">R_SkinFrame_MarkUsed</a>(<a class="code hl_variable" href="r__shadow_8c.html#a77fcab02591cf32e02c8e5651e323d87">r_editlights_sprcursor</a>); }</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a4996623220b790e7682c23e4de6fc237">r_editlights_sprlight</a>)                { <a class="code hl_function" href="gl__rmain_8c.html#ac068333f6656190ddd5836765acdffe0">R_SkinFrame_MarkUsed</a>(<a class="code hl_variable" href="r__shadow_8c.html#a4996623220b790e7682c23e4de6fc237">r_editlights_sprlight</a>); }</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a23892b3c16ceec91c2a8df49795ec2e2">r_editlights_sprnoshadowlight</a>)        { <a class="code hl_function" href="gl__rmain_8c.html#ac068333f6656190ddd5836765acdffe0">R_SkinFrame_MarkUsed</a>(<a class="code hl_variable" href="r__shadow_8c.html#a23892b3c16ceec91c2a8df49795ec2e2">r_editlights_sprnoshadowlight</a>); }</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aa8a7722a93e47750076d60e003e825b5">r_editlights_sprcubemaplight</a>)         { <a class="code hl_function" href="gl__rmain_8c.html#ac068333f6656190ddd5836765acdffe0">R_SkinFrame_MarkUsed</a>(<a class="code hl_variable" href="r__shadow_8c.html#aa8a7722a93e47750076d60e003e825b5">r_editlights_sprcubemaplight</a>); }</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#ae8447729362c0b4859f595ec86e15d6c">r_editlights_sprcubemapnoshadowlight</a>) { <a class="code hl_function" href="gl__rmain_8c.html#ac068333f6656190ddd5836765acdffe0">R_SkinFrame_MarkUsed</a>(<a class="code hl_variable" href="r__shadow_8c.html#ae8447729362c0b4859f595ec86e15d6c">r_editlights_sprcubemapnoshadowlight</a>); }</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a9941c1f23ab960b05549dacb0426ae71">r_editlights_sprselection</a>)            { <a class="code hl_function" href="gl__rmain_8c.html#ac068333f6656190ddd5836765acdffe0">R_SkinFrame_MarkUsed</a>(<a class="code hl_variable" href="r__shadow_8c.html#a9941c1f23ab960b05549dacb0426ae71">r_editlights_sprselection</a>); }</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strncmp</a>(<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#acda413bc16dea281731c311e05f5132b">worldname</a>, <a class="code hl_variable" href="r__shadow_8c.html#a33b81d2dcd1d3054facf713441473db3">r_shadow_mapname</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="r__shadow_8c.html#a33b81d2dcd1d3054facf713441473db3">r_shadow_mapname</a>)))</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>        <a class="code hl_function" href="r__shadow_8c.html#a06ac0a27bc6888c17169add1450b26e4">R_Shadow_EditLights_Reload_f</a>(<a class="code hl_variable" href="cmd_8c.html#aa617fb9e2fe1edc8bd6ce0fafccd3626">cmd_local</a>);</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>}</div>
</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span> </div>
<div class="foldopen" id="foldopen00601" data-start="{" data-end="}">
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac1653dcecac621abba0ed8a8f2ea8b07">  601</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ac1653dcecac621abba0ed8a8f2ea8b07">R_Shadow_Init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>{</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aed63693950ee25ff00f040d8980f52cd">r_shadow_bumpscale_basetexture</a>);</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a081c49802042fb9793a40bd22709f433">r_shadow_bumpscale_bumpmap</a>);</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a2243a862a201b55113ee9b9dc3e1eb61">r_shadow_usebihculling</a>);</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a0e0cbe65920fb236c82e2c50f4f7880b">r_shadow_usenormalmap</a>);</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a374db1ed8684badcb0995878fc9b4300">r_shadow_debuglight</a>);</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ab48847f5962cf96e707a015ec3e4630b">r_shadow_deferred</a>);</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a9b2e5213a19ac569c1e89d8ffaaa7626">r_shadow_gloss</a>);</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac726c73e2b460a67406cfec8729bd07e">r_shadow_gloss2intensity</a>);</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a00187bb13a24fc962ee8a462b07c6249">r_shadow_glossintensity</a>);</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#acf36a18c76e1f03dffe52f49b5c63f5c">r_shadow_glossexponent</a>);</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ad4611b2c12dc964c3c778185d5ea6d94">r_shadow_gloss2exponent</a>);</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a7fec1caa52c4f5971aec39a0d950218c">r_shadow_glossexact</a>);</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a0f3acc72b271530ae45ed8b06f011976">r_shadow_lightattenuationdividebias</a>);</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac983b35605fe044369c676ce33b58061">r_shadow_lightattenuationlinearscale</a>);</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a8b27974ce25cb2c28bbdc15bfb50f20f">r_shadow_lightintensityscale</a>);</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a01ac7c513ed4e93f4ad227ca6592b63a">r_shadow_lightradiusscale</a>);</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a580c6f162a1e9c2a526f1bc8b0a3dcf4">r_shadow_projectdistance</a>);</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aa689749e561af4254355f6a9d83df692">r_shadow_frontsidecasting</a>);</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a61890ab94397eb127ab265b6dca41722">r_shadow_realtime_world_importlightentitiesfrommap</a>);</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a29e4d44cd6610693db5aaeab62cace4e">r_shadow_realtime_dlight</a>);</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#acc215d32de9b6b594936ef19c07bcefc">r_shadow_realtime_dlight_shadows</a>);</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a5342d8e75e7cda04b07dc16c8b2ea400">r_shadow_realtime_dlight_svbspculling</a>);</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac41307501be00f584997e2b3d255c5d4">r_shadow_realtime_dlight_portalculling</a>);</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a4c785a1add44a23930cb620359737c4e">r_shadow_realtime_world</a>);</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aec39f8a22b4eabdbc1debd36c5f70211">r_shadow_realtime_world_lightmaps</a>);</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a411af1b46d0021a05736ed8d916cd89f">r_shadow_realtime_world_shadows</a>);</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a96bc72dc79c1396d6213950a2819381d">r_shadow_realtime_world_compile</a>);</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aae98730caa3cd73c0376ee07db2e4f23">r_shadow_realtime_world_compileshadow</a>);</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a9e29d3ec8a4a146a8d90e096096f4e37">r_shadow_realtime_world_compilesvbsp</a>);</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a0aa00614f3fcc1ca6f96c666ad0c9709">r_shadow_realtime_world_compileportalculling</a>);</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a53f4535c03dadf6efe7d7ac109a5c2d3">r_shadow_scissor</a>);</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a5363c849518fc64d491c1f7c6f612655">r_shadow_shadowmapping</a>);</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a0bf0a59428f24e0a923392d83630bd0b">r_shadow_shadowmapping_vsdct</a>);</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a00485eb415b8d269b0b411106ca73297">r_shadow_shadowmapping_filterquality</a>);</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a5a1b9f3c2977cc5264499e8871d516c8">r_shadow_shadowmapping_useshadowsampler</a>);</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a437cdd8c6d29ebd4b03f259f20e14415">r_shadow_shadowmapping_depthbits</a>);</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a56bd32784edad8eaa9a2e95494b5f929">r_shadow_shadowmapping_precision</a>);</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a020aca21f20ded8f0e7b7cfafcc52dcb">r_shadow_shadowmapping_maxsize</a>);</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a37be7284dc0c2e90696440ee3ced0f12">r_shadow_shadowmapping_minsize</a>);</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af68f9b04e8943ef4226c2e76e530238a">r_shadow_shadowmapping_texturesize</a>);</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span><span class="comment">//  Cvar_RegisterVariable(&amp;r_shadow_shadowmapping_lod_bias);</span></div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span><span class="comment">//  Cvar_RegisterVariable(&amp;r_shadow_shadowmapping_lod_scale);</span></div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a310939d55b4b4314782679eb0381c248">r_shadow_shadowmapping_bordersize</a>);</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a1e147e72bbae8ca02ec9ae2568a00566">r_shadow_shadowmapping_nearclip</a>);</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#acf4f5f168d0d5b4008cc00b2d3d69542">r_shadow_shadowmapping_bias</a>);</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#afddb236d36a82641a3c15b996f5ca9d4">r_shadow_shadowmapping_polygonfactor</a>);</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aeead9091a82d97411391b129adccdc1d">r_shadow_shadowmapping_polygonoffset</a>);</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a493f9b14dcdf6b9e807dd7bf5b6007cc">r_shadow_sortsurfaces</a>);</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aab2089c6c18575adf51a542d79af6576">r_shadow_culllights_pvs</a>);</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a02b2e2feca78908352ada34d75d81317">r_shadow_culllights_trace</a>);</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a7a09edeeb5508e0a09dbf3c9ebc425d3">r_shadow_culllights_trace_eyejitter</a>);</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a0dbe98d5b5b0ab64f5a82216b6b914ea">r_shadow_culllights_trace_enlarge</a>);</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a11c04eaa165865bb30ace640532be7ff">r_shadow_culllights_trace_expand</a>);</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a7c6008b845bf6e182e4ae65068e0ee31">r_shadow_culllights_trace_pad</a>);</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a3d32cd502c430d47379019c578c9375e">r_shadow_culllights_trace_samples</a>);</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ae2644f027256da38698199b0785682af">r_shadow_culllights_trace_tempsamples</a>);</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ab5e08902e85373b0756014349a87f244">r_shadow_culllights_trace_delay</a>);</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#abfb9569e9c4eb3d7d902bbea591a24d4">r_shadow_bouncegrid</a>);</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aafa9a61a3167b93b7e3db2a8e48d5812">r_shadow_bouncegrid_blur</a>);</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a74c912ec2e1a65ea07fbb99ad2197498">r_shadow_bouncegrid_dynamic_bounceminimumintensity</a>);</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#acd48963351e3b59fcea0383c095ce28b">r_shadow_bouncegrid_dynamic_culllightpaths</a>);</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ae87aa6ea0cfb5bc265f8ef7c1ddcd227">r_shadow_bouncegrid_dynamic_directionalshading</a>);</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a43ef251f8f1845074774c5f7306bd0c0">r_shadow_bouncegrid_dynamic_dlightparticlemultiplier</a>);</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a2b7bcd906c1cdb64193eb99dd589abee">r_shadow_bouncegrid_dynamic_hitmodels</a>);</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a7b5a86f8c2c4c9c0d35c4b8d80bf005b">r_shadow_bouncegrid_dynamic_lightradiusscale</a>);</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a44a028698612a93a390f119598e82ec8">r_shadow_bouncegrid_dynamic_maxbounce</a>);</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ab18407dfca8827e6dd2e204f6fcd4765">r_shadow_bouncegrid_dynamic_maxphotons</a>);</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ad84a092c3f4d913bd1e68b718b3b5d99">r_shadow_bouncegrid_dynamic_quality</a>);</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#acc41388e78420294a69dbcfc20a3dbd4">r_shadow_bouncegrid_dynamic_spacing</a>);</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a7c9977ce102ee53957a2d53860228c44">r_shadow_bouncegrid_dynamic_updateinterval</a>);</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ae6a16264f1d993fbf7030849abb5ac2a">r_shadow_bouncegrid_dynamic_x</a>);</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a9fdf894159a51ec01ebcce8ec90bb3e8">r_shadow_bouncegrid_dynamic_y</a>);</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aca5a5c3ed528732c5986a853d0d5ddd3">r_shadow_bouncegrid_dynamic_z</a>);</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ad25ca00832ef2ab9633a450d3ede66cb">r_shadow_bouncegrid_floatcolors</a>);</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a3003a3ce413694b402afb0f5418d14aa">r_shadow_bouncegrid_includedirectlighting</a>);</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a6db869294ff9626fbff8440312c677bb">r_shadow_bouncegrid_intensity</a>);</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a57dd3198772dbe610732098d0b78726d">r_shadow_bouncegrid_lightpathsize</a>);</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ab26bbb86c9c9e2871e0e6a4d85db1e77">r_shadow_bouncegrid_normalizevectors</a>);</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a9234de8299b3999ded95f169ddc07c90">r_shadow_bouncegrid_particlebounceintensity</a>);</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a5654cc1c30edf8ffa1b071e08c5d1e53">r_shadow_bouncegrid_particleintensity</a>);</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a77e03f6897836ffeafb2826cf903cdbd">r_shadow_bouncegrid_rng_seed</a>);</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aa248184b1d78dff49d490c33284d5bd8">r_shadow_bouncegrid_rng_type</a>);</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a1797156202d8d7e1a2442610a777970a">r_shadow_bouncegrid_static</a>);</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a7873c73de31a3ad5a895f2c13befcd36">r_shadow_bouncegrid_static_bounceminimumintensity</a>);</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a51a3a6319e814d45b0966c62c46b7528">r_shadow_bouncegrid_static_directionalshading</a>);</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a1b6befd427ebd6277712a04a925f58e1">r_shadow_bouncegrid_static_lightradiusscale</a>);</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a19d274f4a09f26bc63ac80625ede0fb3">r_shadow_bouncegrid_static_maxbounce</a>);</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af06c93abec80f9e5931fd21fd440b977">r_shadow_bouncegrid_static_maxphotons</a>);</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a4e765d143e27a63f01b4818eec6d17ad">r_shadow_bouncegrid_static_quality</a>);</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a7e5e31d59f5e714bffcbd0aede762f1b">r_shadow_bouncegrid_static_spacing</a>);</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a90c936b84616d29559d3335016cfebdf">r_shadow_bouncegrid_subsamples</a>);</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ae5a80c33adccf8968cc4bd5ae656e805">r_shadow_bouncegrid_threaded</a>);</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a59782962755e6de424ec4559cf4577a3">r_coronas</a>);</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#afc049e9c0dc0d7e168e556a238dc2fbf">r_coronas_occlusionsizescale</a>);</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#accca61ee7412c65bb90ee0c7c09e6949">r_coronas_occlusionquery</a>);</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#afdc165beb3e731178a1ba98872bee3b8">gl_flashblend</a>);</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>    <a class="code hl_function" href="r__shadow_8c.html#a5b8f19d6a9f6218c94730fb8dac80e07">R_Shadow_EditLights_Init</a>();</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>    <a class="code hl_function" href="zone_8c.html#a211e7367323b1791e87715797bdee714">Mem_ExpandableArray_NewArray</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structdlight__t.html">dlight_t</a>), 128);</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>    <a class="code hl_variable" href="r__shadow_8c.html#ab24c07551e3ecf58f94909820aaa2bfd">r_shadow_scenemaxlights</a> = 0;</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>    <a class="code hl_variable" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a> = 0;</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>    <a class="code hl_variable" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>    <a class="code hl_variable" href="r__shadow_8c.html#a50840da8047197b7b97ae48568ce04a1">maxshadowtriangles</a> = 0;</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>    <a class="code hl_variable" href="r__shadow_8c.html#aec9f83716e02d5827f1414d2e99633dc">shadowelements</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>    <a class="code hl_variable" href="r__shadow_8c.html#a65dfd4a4235d767e35c6be9c52b67cc8">maxshadowvertices</a> = 0;</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>    <a class="code hl_variable" href="r__shadow_8c.html#a7e9c22b3ec6affd555dada90f6bbdfb7">shadowvertex3f</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    <a class="code hl_variable" href="r__shadow_8c.html#a69929cbc19f8c80baa748a9cb1217769">maxvertexupdate</a> = 0;</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>    <a class="code hl_variable" href="r__shadow_8c.html#a3b04167aa9a5166d946d7a2ad69c0cfb">vertexupdate</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    <a class="code hl_variable" href="r__shadow_8c.html#aff1170b5b07317b3b313b87f253d17dd">vertexremap</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>    <a class="code hl_variable" href="r__shadow_8c.html#af3b133ac1cbd4a3def2c2ebd4d750073">vertexupdatenum</a> = 0;</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>    <a class="code hl_variable" href="r__shadow_8c.html#a1deb1046f27ec5ac942ae8e7374a3f22">maxshadowmark</a> = 0;</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>    <a class="code hl_variable" href="r__shadow_8c.html#a8180b5361a778c8f61f1b0b1dc844077">numshadowmark</a> = 0;</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>    <a class="code hl_variable" href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">shadowmark</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>    <a class="code hl_variable" href="r__shadow_8c.html#ac972f0aabe9dc399b9e0400d60c69c3f">shadowmarklist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>    <a class="code hl_variable" href="r__shadow_8c.html#aac84d2ea256326d01ea2710316bb47ad">shadowmarkcount</a> = 0;</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>    <a class="code hl_variable" href="r__shadow_8c.html#a3360a755216b12b0928cf4e3e3842d0e">maxshadowsides</a> = 0;</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a> = 0;</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    <a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>    <a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>    <a class="code hl_variable" href="r__shadow_8c.html#a9a3fe0d597026f41083557ae9f030a11">r_shadow_buffer_numleafpvsbytes</a> = 0;</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>    <a class="code hl_variable" href="r__shadow_8c.html#a358d50682355dd070731495eb5ccd19c">r_shadow_buffer_visitingleafpvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>    <a class="code hl_variable" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    <a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>    <a class="code hl_variable" href="r__shadow_8c.html#ac93991e2e64a1b25ff5438c33122286d">r_shadow_buffer_numsurfacepvsbytes</a> = 0;</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>    <a class="code hl_variable" href="r__shadow_8c.html#a31e6522610c02f09559b7bd8bd75c558">r_shadow_buffer_surfacepvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    <a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>    <a class="code hl_variable" href="r__shadow_8c.html#a064f7d12ba68cca46e785786d48e8985">r_shadow_buffer_surfacesides</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    <a class="code hl_variable" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>    <a class="code hl_variable" href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">r_shadow_buffer_lighttrispvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>    <a class="code hl_function" href="r__modules_8c.html#a7f982eee49a26b26f015596ac96edea0">R_RegisterModule</a>(<span class="stringliteral">&quot;R_Shadow&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#ac539c896d573c08c20b0a2c6b7eb7fba">r_shadow_start</a>, <a class="code hl_function" href="r__shadow_8c.html#a8ab5df521017cffa6ec59d0a9e7038fa">r_shadow_shutdown</a>, <a class="code hl_function" href="r__shadow_8c.html#adff96119013e5218f435422f7b13cee7">r_shadow_newmap</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>}</div>
</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span> </div>
<div class="foldopen" id="foldopen00734" data-start="{" data-end="};">
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a98c82189f2291563db33e4a6d35757e8">  734</a></span><a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a98c82189f2291563db33e4a6d35757e8">matrix_attenuationxyz</a> =</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>{</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>    {</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>        {0.5, 0.0, 0.0, 0.5},</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>        {0.0, 0.5, 0.0, 0.5},</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>        {0.0, 0.0, 0.5, 0.5},</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>        {0.0, 0.0, 0.0, 1.0}</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>    }</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>};</div>
</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span> </div>
<div class="foldopen" id="foldopen00744" data-start="{" data-end="};">
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a943c8cbc0aadf4d127032a1b6ad27329">  744</a></span><a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> <a class="code hl_variable" href="r__shadow_8c.html#a943c8cbc0aadf4d127032a1b6ad27329">matrix_attenuationz</a> =</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>{</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>    {</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>        {0.0, 0.0, 0.5, 0.5},</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>        {0.0, 0.0, 0.0, 0.5},</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>        {0.0, 0.0, 0.0, 0.5},</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>        {0.0, 0.0, 0.0, 1.0}</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>    }</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>};</div>
</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span> </div>
<div class="foldopen" id="foldopen00754" data-start="{" data-end="}">
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5a85e2f80e3549ff22d7f598d55cd02f">  754</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a5a85e2f80e3549ff22d7f598d55cd02f">R_Shadow_ResizeShadowArrays</a>(<span class="keywordtype">int</span> numvertices, <span class="keywordtype">int</span> numtriangles, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertscale</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triscale</a>)</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>{</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>    numvertices = ((numvertices + 255) &amp; ~255) * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vertscale</a>;</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>    numtriangles = ((numtriangles + 255) &amp; ~255) * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">triscale</a>;</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>    <span class="comment">// make sure shadowelements is big enough for this volume</span></div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a50840da8047197b7b97ae48568ce04a1">maxshadowtriangles</a> &lt; numtriangles)</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>    {</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>        <a class="code hl_variable" href="r__shadow_8c.html#a50840da8047197b7b97ae48568ce04a1">maxshadowtriangles</a> = numtriangles;</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aec9f83716e02d5827f1414d2e99633dc">shadowelements</a>)</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#aec9f83716e02d5827f1414d2e99633dc">shadowelements</a>);</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>        <a class="code hl_variable" href="r__shadow_8c.html#aec9f83716e02d5827f1414d2e99633dc">shadowelements</a> = (<span class="keywordtype">int</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#a50840da8047197b7b97ae48568ce04a1">maxshadowtriangles</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>[3]));</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>    }</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>    <span class="comment">// make sure shadowvertex3f is big enough for this volume</span></div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a65dfd4a4235d767e35c6be9c52b67cc8">maxshadowvertices</a> &lt; numvertices)</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>    {</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>        <a class="code hl_variable" href="r__shadow_8c.html#a65dfd4a4235d767e35c6be9c52b67cc8">maxshadowvertices</a> = numvertices;</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a7e9c22b3ec6affd555dada90f6bbdfb7">shadowvertex3f</a>)</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a7e9c22b3ec6affd555dada90f6bbdfb7">shadowvertex3f</a>);</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>        <a class="code hl_variable" href="r__shadow_8c.html#a7e9c22b3ec6affd555dada90f6bbdfb7">shadowvertex3f</a> = (<span class="keywordtype">float</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#a65dfd4a4235d767e35c6be9c52b67cc8">maxshadowvertices</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[3]));</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>    }</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>}</div>
</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span> </div>
<div class="foldopen" id="foldopen00776" data-start="{" data-end="}">
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a610c2953bf7e57ec697532f1d3135447">  776</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a610c2953bf7e57ec697532f1d3135447">R_Shadow_EnlargeLeafSurfaceTrisBuffer</a>(<span class="keywordtype">int</span> numleafs, <span class="keywordtype">int</span> numsurfaces, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowtriangles</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlighttriangles</a>)</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>{</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numleafpvsbytes</a> = (((numleafs + 7) &gt;&gt; 3) + 255) &amp; ~255;</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsurfacepvsbytes</a> = (((numsurfaces + 7) &gt;&gt; 3) + 255) &amp; ~255;</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowtrispvsbytes</a> = (((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowtriangles</a> + 7) &gt;&gt; 3) + 255) &amp; ~255;</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlighttrispvsbytes</a> = (((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlighttriangles</a> + 7) &gt;&gt; 3) + 255) &amp; ~255;</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a9a3fe0d597026f41083557ae9f030a11">r_shadow_buffer_numleafpvsbytes</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numleafpvsbytes</a>)</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>    {</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a358d50682355dd070731495eb5ccd19c">r_shadow_buffer_visitingleafpvs</a>)</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a358d50682355dd070731495eb5ccd19c">r_shadow_buffer_visitingleafpvs</a>);</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a>)</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a>);</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a>)</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a>);</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>        <a class="code hl_variable" href="r__shadow_8c.html#a9a3fe0d597026f41083557ae9f030a11">r_shadow_buffer_numleafpvsbytes</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numleafpvsbytes</a>;</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>        <a class="code hl_variable" href="r__shadow_8c.html#a358d50682355dd070731495eb5ccd19c">r_shadow_buffer_visitingleafpvs</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#a9a3fe0d597026f41083557ae9f030a11">r_shadow_buffer_numleafpvsbytes</a>);</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>        <a class="code hl_variable" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#a9a3fe0d597026f41083557ae9f030a11">r_shadow_buffer_numleafpvsbytes</a>);</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>        <a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a> = (<span class="keywordtype">int</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#a9a3fe0d597026f41083557ae9f030a11">r_shadow_buffer_numleafpvsbytes</a> * 8 * <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a>));</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>    }</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#ac93991e2e64a1b25ff5438c33122286d">r_shadow_buffer_numsurfacepvsbytes</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsurfacepvsbytes</a>)</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>    {</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a31e6522610c02f09559b7bd8bd75c558">r_shadow_buffer_surfacepvs</a>)</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a31e6522610c02f09559b7bd8bd75c558">r_shadow_buffer_surfacepvs</a>);</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a>)</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a>);</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a064f7d12ba68cca46e785786d48e8985">r_shadow_buffer_surfacesides</a>)</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a064f7d12ba68cca46e785786d48e8985">r_shadow_buffer_surfacesides</a>);</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>        <a class="code hl_variable" href="r__shadow_8c.html#ac93991e2e64a1b25ff5438c33122286d">r_shadow_buffer_numsurfacepvsbytes</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsurfacepvsbytes</a>;</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>        <a class="code hl_variable" href="r__shadow_8c.html#a31e6522610c02f09559b7bd8bd75c558">r_shadow_buffer_surfacepvs</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#ac93991e2e64a1b25ff5438c33122286d">r_shadow_buffer_numsurfacepvsbytes</a>);</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>        <a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a> = (<span class="keywordtype">int</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#ac93991e2e64a1b25ff5438c33122286d">r_shadow_buffer_numsurfacepvsbytes</a> * 8 * <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a>));</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>        <a class="code hl_variable" href="r__shadow_8c.html#a064f7d12ba68cca46e785786d48e8985">r_shadow_buffer_surfacesides</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#ac93991e2e64a1b25ff5438c33122286d">r_shadow_buffer_numsurfacepvsbytes</a> * 8 * <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a>));</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>    }</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a39536fb5625169cacb76dad160685d55">r_shadow_buffer_numshadowtrispvsbytes</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowtrispvsbytes</a>)</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>    {</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a>)</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a>);</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>        <a class="code hl_variable" href="r__shadow_8c.html#a39536fb5625169cacb76dad160685d55">r_shadow_buffer_numshadowtrispvsbytes</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowtrispvsbytes</a>;</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>        <a class="code hl_variable" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#a39536fb5625169cacb76dad160685d55">r_shadow_buffer_numshadowtrispvsbytes</a>);</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>    }</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a0d465ed0b81809e1263706defa298e46">r_shadow_buffer_numlighttrispvsbytes</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlighttrispvsbytes</a>)</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>    {</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">r_shadow_buffer_lighttrispvs</a>)</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">r_shadow_buffer_lighttrispvs</a>);</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>        <a class="code hl_variable" href="r__shadow_8c.html#a0d465ed0b81809e1263706defa298e46">r_shadow_buffer_numlighttrispvsbytes</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlighttrispvsbytes</a>;</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        <a class="code hl_variable" href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">r_shadow_buffer_lighttrispvs</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#a0d465ed0b81809e1263706defa298e46">r_shadow_buffer_numlighttrispvsbytes</a>);</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>    }</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>}</div>
</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span> </div>
<div class="foldopen" id="foldopen00824" data-start="{" data-end="}">
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a33e0b1cd3a48411ab9e255e226d63c8b">  824</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a33e0b1cd3a48411ab9e255e226d63c8b">R_Shadow_PrepareShadowMark</a>(<span class="keywordtype">int</span> numtris)</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>{</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>    <span class="comment">// make sure shadowmark is big enough for this volume</span></div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a1deb1046f27ec5ac942ae8e7374a3f22">maxshadowmark</a> &lt; numtris)</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    {</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>        <a class="code hl_variable" href="r__shadow_8c.html#a1deb1046f27ec5ac942ae8e7374a3f22">maxshadowmark</a> = numtris;</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">shadowmark</a>)</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">shadowmark</a>);</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#ac972f0aabe9dc399b9e0400d60c69c3f">shadowmarklist</a>)</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#ac972f0aabe9dc399b9e0400d60c69c3f">shadowmarklist</a>);</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>        <a class="code hl_variable" href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">shadowmark</a> = (<span class="keywordtype">int</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#a1deb1046f27ec5ac942ae8e7374a3f22">maxshadowmark</a> * <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">shadowmark</a>));</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>        <a class="code hl_variable" href="r__shadow_8c.html#ac972f0aabe9dc399b9e0400d60c69c3f">shadowmarklist</a> = (<span class="keywordtype">int</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#a1deb1046f27ec5ac942ae8e7374a3f22">maxshadowmark</a> * <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="r__shadow_8c.html#ac972f0aabe9dc399b9e0400d60c69c3f">shadowmarklist</a>));</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>        <a class="code hl_variable" href="r__shadow_8c.html#aac84d2ea256326d01ea2710316bb47ad">shadowmarkcount</a> = 0;</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>    }</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>    <a class="code hl_variable" href="r__shadow_8c.html#aac84d2ea256326d01ea2710316bb47ad">shadowmarkcount</a>++;</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>    <span class="comment">// if shadowmarkcount wrapped we clear the array and adjust accordingly</span></div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aac84d2ea256326d01ea2710316bb47ad">shadowmarkcount</a> == 0)</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>    {</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>        <a class="code hl_variable" href="r__shadow_8c.html#aac84d2ea256326d01ea2710316bb47ad">shadowmarkcount</a> = 1;</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">shadowmark</a>, 0, <a class="code hl_variable" href="r__shadow_8c.html#a1deb1046f27ec5ac942ae8e7374a3f22">maxshadowmark</a> * <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">shadowmark</a>));</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>    }</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>    <a class="code hl_variable" href="r__shadow_8c.html#a8180b5361a778c8f61f1b0b1dc844077">numshadowmark</a> = 0;</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>}</div>
</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span> </div>
<div class="foldopen" id="foldopen00848" data-start="{" data-end="}">
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a1308d1080c8d50afd01f7201682dee79">  848</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a1308d1080c8d50afd01f7201682dee79">R_Shadow_PrepareShadowSides</a>(<span class="keywordtype">int</span> numtris)</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>{</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a3360a755216b12b0928cf4e3e3842d0e">maxshadowsides</a> &lt; numtris)</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    {</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>        <a class="code hl_variable" href="r__shadow_8c.html#a3360a755216b12b0928cf4e3e3842d0e">maxshadowsides</a> = numtris;</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a>)</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a>);</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a>)</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a>);</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>        <a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#a3360a755216b12b0928cf4e3e3842d0e">maxshadowsides</a> * <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a>));</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>        <a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a> = (<span class="keywordtype">int</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#a3360a755216b12b0928cf4e3e3842d0e">maxshadowsides</a> * <span class="keyword">sizeof</span>(*<a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a>));</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>    }</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a> = 0;</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>}</div>
</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span> </div>
<div class="foldopen" id="foldopen00863" data-start="{" data-end="}">
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a18b21bd08b92f0b79427462d3f874828">  863</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="r__shadow_8c.html#a18b21bd08b92f0b79427462d3f874828">R_Shadow_CalcTriangleSideMask</a>(<span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p1</a>, <span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p2</a>, <span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p3</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>)</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>{</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>    <span class="comment">// p1, p2, p3 are in the cubemap&#39;s local coordinate system</span></div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>    <span class="comment">// bias = border/(size - border)</span></div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> = 0x3F;</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span> </div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p1</a>[0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p1</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p1</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p1</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a>),</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>          <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p2</a>[0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p2</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p2</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p2</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a>),</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>          <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p3</a>[0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p3</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p3</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p3</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp3</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn3</a>);</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap3</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an3</a>)</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>        <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= (3&lt;&lt;4)</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a> &gt;= 0 ? (1&lt;&lt;0)|(1&lt;&lt;2) : (2&lt;&lt;0)|(2&lt;&lt;2))</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a> &gt;= 0 ? (1&lt;&lt;0)|(1&lt;&lt;2) : (2&lt;&lt;0)|(2&lt;&lt;2))</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp3</a> &gt;= 0 ? (1&lt;&lt;0)|(1&lt;&lt;2) : (2&lt;&lt;0)|(2&lt;&lt;2));</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an3</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap3</a>)</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>        <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= (3&lt;&lt;4)</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a> &gt;= 0 ? (1&lt;&lt;0)|(2&lt;&lt;2) : (2&lt;&lt;0)|(1&lt;&lt;2))</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a> &gt;= 0 ? (1&lt;&lt;0)|(2&lt;&lt;2) : (2&lt;&lt;0)|(1&lt;&lt;2))            </div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn3</a> &gt;= 0 ? (1&lt;&lt;0)|(2&lt;&lt;2) : (2&lt;&lt;0)|(1&lt;&lt;2));</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span> </div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p1</a>[1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p1</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p1</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p1</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a>),</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p2</a>[1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p2</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p2</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p2</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a>),</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p3</a>[1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p3</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p3</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p3</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp3</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn3</a>);</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap3</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an3</a>)</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>        <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= (3&lt;&lt;0)</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a> &gt;= 0 ? (1&lt;&lt;2)|(1&lt;&lt;4) : (2&lt;&lt;2)|(2&lt;&lt;4))</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a> &gt;= 0 ? (1&lt;&lt;2)|(1&lt;&lt;4) : (2&lt;&lt;2)|(2&lt;&lt;4))            </div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp3</a> &gt;= 0 ? (1&lt;&lt;2)|(1&lt;&lt;4) : (2&lt;&lt;2)|(2&lt;&lt;4));</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an3</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap3</a>)</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>        <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= (3&lt;&lt;0)</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a> &gt;= 0 ? (1&lt;&lt;2)|(2&lt;&lt;4) : (2&lt;&lt;2)|(1&lt;&lt;4))</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a> &gt;= 0 ? (1&lt;&lt;2)|(2&lt;&lt;4) : (2&lt;&lt;2)|(1&lt;&lt;4))</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn3</a> &gt;= 0 ? (1&lt;&lt;2)|(2&lt;&lt;4) : (2&lt;&lt;2)|(1&lt;&lt;4));</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span> </div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p1</a>[2] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p1</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p1</a>[2] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p1</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a>),</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p2</a>[2] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p2</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p2</a>[2] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p2</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a>),</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p3</a>[2] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p3</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p3</a>[2] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">p3</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp3</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an3</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn3</a>);</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap3</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an3</a>)</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>        <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= (3&lt;&lt;2)</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a> &gt;= 0 ? (1&lt;&lt;4)|(1&lt;&lt;0) : (2&lt;&lt;4)|(2&lt;&lt;0))</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a> &gt;= 0 ? (1&lt;&lt;4)|(1&lt;&lt;0) : (2&lt;&lt;4)|(2&lt;&lt;0))</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp3</a> &gt;= 0 ? (1&lt;&lt;4)|(1&lt;&lt;0) : (2&lt;&lt;4)|(2&lt;&lt;0));</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an3</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap3</a>)</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>        <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= (3&lt;&lt;2)</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a> &gt;= 0 ? (1&lt;&lt;4)|(2&lt;&lt;0) : (2&lt;&lt;4)|(1&lt;&lt;0))</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a> &gt;= 0 ? (1&lt;&lt;4)|(2&lt;&lt;0) : (2&lt;&lt;4)|(1&lt;&lt;0))</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn3</a> &gt;= 0 ? (1&lt;&lt;4)|(2&lt;&lt;0) : (2&lt;&lt;4)|(1&lt;&lt;0));</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span> </div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>}</div>
</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span> </div>
<div class="foldopen" id="foldopen00914" data-start="{" data-end="}">
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a04d629dcbf12096a83779b9384b4fa91">  914</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_function" href="r__shadow_8c.html#a04d629dcbf12096a83779b9384b4fa91">R_Shadow_CalcBBoxSideMask</a>(<span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> mins, <span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> maxs, <span class="keyword">const</span> <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">radiustolight</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>)</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>{</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> center, radius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightcenter</a>, lightradius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>;</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a>;</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> = 0x3F;</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span> </div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>    <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(maxs, mins, radius);</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>    <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(radius, 0.5f, radius);</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(mins, radius, center);</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>    <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, center, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightcenter</a>);</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>    <a class="code hl_function" href="matrixlib_8c.html#a6cbe1d5f8ba3bfc1d91f98c4eb01ea5f">Matrix4x4_Transform3x3</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">radiustolight</a>, radius, lightradius);</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>    <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightcenter</a>, lightradius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>);</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightcenter</a>, lightradius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>);</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span> </div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>[0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a>),</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>[0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a>);</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a>)</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>        <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= (3&lt;&lt;4)</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a> &gt;= 0 ? (1&lt;&lt;0)|(1&lt;&lt;2) : (2&lt;&lt;0)|(2&lt;&lt;2))</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a> &gt;= 0 ? (1&lt;&lt;0)|(1&lt;&lt;2) : (2&lt;&lt;0)|(2&lt;&lt;2));</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a>)</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>        <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= (3&lt;&lt;4)</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a> &gt;= 0 ? (1&lt;&lt;0)|(2&lt;&lt;2) : (2&lt;&lt;0)|(1&lt;&lt;2))</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a> &gt;= 0 ? (1&lt;&lt;0)|(2&lt;&lt;2) : (2&lt;&lt;0)|(1&lt;&lt;2));</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span> </div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>[1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a>),</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>[1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a>);</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a>)</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>        <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= (3&lt;&lt;0)</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a> &gt;= 0 ? (1&lt;&lt;2)|(1&lt;&lt;4) : (2&lt;&lt;2)|(2&lt;&lt;4))</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a> &gt;= 0 ? (1&lt;&lt;2)|(1&lt;&lt;4) : (2&lt;&lt;2)|(2&lt;&lt;4));</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a>)</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>        <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= (3&lt;&lt;0)</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a> &gt;= 0 ? (1&lt;&lt;2)|(2&lt;&lt;4) : (2&lt;&lt;2)|(1&lt;&lt;4))</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a> &gt;= 0 ? (1&lt;&lt;2)|(2&lt;&lt;4) : (2&lt;&lt;2)|(1&lt;&lt;4));</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span> </div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>[2] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>[2] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a>),</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>[2] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmin</a>[2] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pmax</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a>);</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a>)</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>        <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= (3&lt;&lt;2)</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp1</a> &gt;= 0 ? (1&lt;&lt;4)|(1&lt;&lt;0) : (2&lt;&lt;4)|(2&lt;&lt;0))</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp2</a> &gt;= 0 ? (1&lt;&lt;4)|(1&lt;&lt;0) : (2&lt;&lt;4)|(2&lt;&lt;0));</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an1</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap1</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an2</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap2</a>)</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>        <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= (3&lt;&lt;2)</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn1</a> &gt;= 0 ? (1&lt;&lt;4)|(2&lt;&lt;0) : (2&lt;&lt;4)|(1&lt;&lt;0))</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>            | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn2</a> &gt;= 0 ? (1&lt;&lt;4)|(2&lt;&lt;0) : (2&lt;&lt;4)|(1&lt;&lt;0));</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span> </div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>}</div>
</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span> </div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a2d392398ed943f5b31fb70a9be2ecdd2">  964</a></span><span class="preprocessor">#define R_Shadow_CalcEntitySideMask(ent, worldtolight, radiustolight, bias) R_Shadow_CalcBBoxSideMask((ent)-&gt;mins, (ent)-&gt;maxs, worldtolight, radiustolight, bias)</span></div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span> </div>
<div class="foldopen" id="foldopen00966" data-start="{" data-end="}">
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a57db2fbafb97b199438f93788c8e7034">  966</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="r__shadow_8c.html#a57db2fbafb97b199438f93788c8e7034">R_Shadow_CalcSphereSideMask</a>(<span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> p, <span class="keywordtype">float</span> radius, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>)</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>{</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>    <span class="comment">// p is in the cubemap&#39;s local coordinate system</span></div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>    <span class="comment">// bias = border/(size - border)</span></div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dxyp</a> = p[0] + p[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dxyn</a> = p[0] - p[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axyp</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dxyp</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axyn</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dxyn</a>);</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dyzp</a> = p[1] + p[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dyzn</a> = p[1] - p[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ayzp</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dyzp</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ayzn</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dyzn</a>);</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dzxp</a> = p[2] + p[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dzxn</a> = p[2] - p[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">azxp</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dzxp</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">azxn</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dzxn</a>);</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> = 0x3F;</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axyp</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axyn</a> + radius) <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dxyp</a> &lt; 0 ? ~((1&lt;&lt;0)|(1&lt;&lt;2)) : ~((2&lt;&lt;0)|(2&lt;&lt;2));</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axyn</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">axyp</a> + radius) <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dxyn</a> &lt; 0 ? ~((1&lt;&lt;0)|(2&lt;&lt;2)) : ~((2&lt;&lt;0)|(1&lt;&lt;2));</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ayzp</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ayzn</a> + radius) <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dyzp</a> &lt; 0 ? ~((1&lt;&lt;2)|(1&lt;&lt;4)) : ~((2&lt;&lt;2)|(2&lt;&lt;4));</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ayzn</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ayzp</a> + radius) <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dyzn</a> &lt; 0 ? ~((1&lt;&lt;2)|(2&lt;&lt;4)) : ~((2&lt;&lt;2)|(1&lt;&lt;4));</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">azxp</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">azxn</a> + radius) <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dzxp</a> &lt; 0 ? ~((1&lt;&lt;4)|(1&lt;&lt;0)) : ~((2&lt;&lt;4)|(2&lt;&lt;0));</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">azxn</a> &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">azxp</a> + radius) <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> &amp;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dzxn</a> &lt; 0 ? ~((1&lt;&lt;4)|(2&lt;&lt;0)) : ~((2&lt;&lt;4)|(1&lt;&lt;0));</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>}</div>
</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span> </div>
<div class="foldopen" id="foldopen00983" data-start="{" data-end="}">
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac6934d9ab2fa894a14f01d84961e15ca">  983</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_function" href="r__shadow_8c.html#ac6934d9ab2fa894a14f01d84961e15ca">R_Shadow_CullFrustumSides</a>(<a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a14289b163cbea770a67c4766fd91d6f4">border</a>)</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>{</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">o</a>, p, <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>;</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>    <span class="keywordtype">int</span> sides = 0x3F, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[6] = { 3&lt;&lt;4, 3&lt;&lt;4, 3&lt;&lt;0, 3&lt;&lt;0, 3&lt;&lt;2, 3&lt;&lt;2 };</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>    <span class="keywordtype">float</span> scale = (<a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> - 2*<a class="code hl_variable" href="glquake_8h.html#a14289b163cbea770a67c4766fd91d6f4">border</a>)/<a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, len;</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a> = <a class="code hl_variable" href="glquake_8h.html#a14289b163cbea770a67c4766fd91d6f4">border</a> / (<a class="code hl_variable" href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a>)(<a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> - <a class="code hl_variable" href="glquake_8h.html#a14289b163cbea770a67c4766fd91d6f4">border</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a>;</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>    <span class="comment">// check if cone enclosing side would cross frustum plane</span></div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>    scale = 2 / (scale*scale + 2);</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>    <a class="code hl_function" href="matrixlib_8c.html#afa5873e4026ae22dd9e6aa9177930ef0">Matrix4x4_OriginFromMatrix</a>(&amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab89a43403b944e77e37a1e7433472964">matrix_lighttoworld</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">o</a>);</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>    {</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#ac1dbe9174f905df05e0d9c896cc4f877">PlaneDiff</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">o</a>, &amp;<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a87269e10a2b3ecce1e0d83986f2ebdac">frustum</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]) &gt; -0.03125)</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>        <a class="code hl_function" href="matrixlib_8c.html#a6cbe1d5f8ba3bfc1d91f98c4eb01ea5f">Matrix4x4_Transform3x3</a>(&amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a87269e10a2b3ecce1e0d83986f2ebdac">frustum</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>, <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>);</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>        len = scale*<a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>);</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[0]*<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[0] &gt; len) sides &amp;= <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[0] &lt; 0 ? ~(1&lt;&lt;0) : ~(2 &lt;&lt; 0);</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[1]*<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[1] &gt; len) sides &amp;= <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[1] &lt; 0 ? ~(1&lt;&lt;2) : ~(2 &lt;&lt; 2);</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[2]*<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[2] &gt; len) sides &amp;= <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[2] &lt; 0 ? ~(1&lt;&lt;4) : ~(2 &lt;&lt; 4);</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>    }</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#ac1dbe9174f905df05e0d9c896cc4f877">PlaneDiff</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">o</a>, &amp;<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a87269e10a2b3ecce1e0d83986f2ebdac">frustum</a>[4]) &gt;= <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ac522677f57df403dc99a8c3880ac7d61">farclip</a> - <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad3541c997b97332df8f4b39a5178aa09">nearclip</a> + 0.03125)</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>    {</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>        <a class="code hl_function" href="matrixlib_8c.html#a6cbe1d5f8ba3bfc1d91f98c4eb01ea5f">Matrix4x4_Transform3x3</a>(&amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a87269e10a2b3ecce1e0d83986f2ebdac">frustum</a>[4].<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>, <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>);</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>        len = scale*<a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>);</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[0]*<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[0] &gt; len) sides &amp;= <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[0] &gt;= 0 ? ~(1&lt;&lt;0) : ~(2 &lt;&lt; 0);</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[1]*<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[1] &gt; len) sides &amp;= <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[1] &gt;= 0 ? ~(1&lt;&lt;2) : ~(2 &lt;&lt; 2);</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[2]*<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[2] &gt; len) sides &amp;= <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[2] &gt;= 0 ? ~(1&lt;&lt;4) : ~(2 &lt;&lt; 4);</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>    }</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>    <span class="comment">// this next test usually clips off more sides than the former, but occasionally clips fewer/different ones, so do both and combine results</span></div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>    <span class="comment">// check if frustum corners/origin cross plane sides</span></div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span><span class="preprocessor">#if 1</span></div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>    <span class="comment">// infinite version, assumes frustum corners merely give direction and extend to infinite distance</span></div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>    <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(&amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, p);</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> = p[0] + p[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> = p[0] - p[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a>);</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[0] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> ? 0x3F : (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> &gt;= 0 ? (1&lt;&lt;0)|(1&lt;&lt;2) : (2&lt;&lt;0)|(2&lt;&lt;2));</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[1] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> ? 0x3F : (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> &gt;= 0 ? (1&lt;&lt;0)|(2&lt;&lt;2) : (2&lt;&lt;0)|(1&lt;&lt;2));</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> = p[1] + p[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> = p[1] - p[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a>);</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[2] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> ? 0x3F : (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> &gt;= 0 ? (1&lt;&lt;2)|(1&lt;&lt;4) : (2&lt;&lt;2)|(2&lt;&lt;4));</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[3] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> ? 0x3F : (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> &gt;= 0 ? (1&lt;&lt;2)|(2&lt;&lt;4) : (2&lt;&lt;2)|(1&lt;&lt;4));</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> = p[2] + p[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> = p[2] - p[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a>);</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[4] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> ? 0x3F : (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> &gt;= 0 ? (1&lt;&lt;4)|(1&lt;&lt;0) : (2&lt;&lt;4)|(2&lt;&lt;0));</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[5] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> ? 0x3F : (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> &gt;= 0 ? (1&lt;&lt;4)|(2&lt;&lt;0) : (2&lt;&lt;4)|(1&lt;&lt;0));</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>    {</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>        <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(&amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ad4152067688a3e428ffeb16338def83f">frustumcorner</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>);</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>        <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>, p, <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>);</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> = <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[0] + <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> = <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[0] - <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a>);</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> &gt; 0) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[0] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> &gt;= 0 ? (1&lt;&lt;0)|(1&lt;&lt;2) : (2&lt;&lt;0)|(2&lt;&lt;2);</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> &gt; 0) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[1] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> &gt;= 0 ? (1&lt;&lt;0)|(2&lt;&lt;2) : (2&lt;&lt;0)|(1&lt;&lt;2);</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> = <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[1] + <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> = <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[1] - <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a>);</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> &gt; 0) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[2] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> &gt;= 0 ? (1&lt;&lt;2)|(1&lt;&lt;4) : (2&lt;&lt;2)|(2&lt;&lt;4);</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> &gt; 0) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[3] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> &gt;= 0 ? (1&lt;&lt;2)|(2&lt;&lt;4) : (2&lt;&lt;2)|(1&lt;&lt;4);</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> = <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[2] + <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> = <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[2] - <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a>);</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> &gt; 0) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[4] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> &gt;= 0 ? (1&lt;&lt;4)|(1&lt;&lt;0) : (2&lt;&lt;4)|(2&lt;&lt;0);</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> &gt; 0) <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[5] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> &gt;= 0 ? (1&lt;&lt;4)|(2&lt;&lt;0) : (2&lt;&lt;4)|(1&lt;&lt;0);</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>    }</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>    <span class="comment">// finite version, assumes corners are a finite distance from origin dependent on far plane</span></div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 5;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>    {</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>        <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(&amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>, !<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> ? <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a> : <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ad4152067688a3e428ffeb16338def83f">frustumcorner</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>-1], p);</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> = p[0] + p[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> = p[0] - p[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a>);</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[0] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> ? 0x3F : (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> &gt;= 0 ? (1&lt;&lt;0)|(1&lt;&lt;2) : (2&lt;&lt;0)|(2&lt;&lt;2));</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[1] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> ? 0x3F : (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> &gt;= 0 ? (1&lt;&lt;0)|(2&lt;&lt;2) : (2&lt;&lt;0)|(1&lt;&lt;2));</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> = p[1] + p[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> = p[1] - p[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a>);</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[2] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> ? 0x3F : (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> &gt;= 0 ? (1&lt;&lt;2)|(1&lt;&lt;4) : (2&lt;&lt;2)|(2&lt;&lt;4));</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[3] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> ? 0x3F : (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> &gt;= 0 ? (1&lt;&lt;2)|(2&lt;&lt;4) : (2&lt;&lt;2)|(1&lt;&lt;4));</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> = p[2] + p[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> = p[2] - p[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a>), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a>);</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[4] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> ? 0x3F : (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dp</a> &gt;= 0 ? (1&lt;&lt;4)|(1&lt;&lt;0) : (2&lt;&lt;4)|(2&lt;&lt;0));</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[5] |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">an</a> &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ap</a> ? 0x3F : (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dn</a> &gt;= 0 ? (1&lt;&lt;4)|(2&lt;&lt;0) : (2&lt;&lt;4)|(1&lt;&lt;0));</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>    }</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>    <span class="keywordflow">return</span> sides &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[0] &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[1] &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[2] &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[3] &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[4] &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">masks</a>[5];</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>}</div>
</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span> </div>
<div class="foldopen" id="foldopen01058" data-start="{" data-end="}">
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a1e111165716559406b80ea14d95ec0dd"> 1058</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="r__shadow_8c.html#a1e111165716559406b80ea14d95ec0dd">R_Shadow_ChooseSidesFromBox</a>(<span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firsttriangle</a>, <span class="keywordtype">int</span> numtris, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invertex3f</a>, <span class="keyword">const</span> <span class="keywordtype">int</span> *elements, <span class="keyword">const</span> <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">projectorigin</a>, <span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">projectdirection</a>, <span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> lightmins, <span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> lightmaxs, <span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacemins</a>, <span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacemaxs</a>, <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>)</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>{</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>    <span class="keywordtype">int</span> t, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tend</a>;</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>;</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[3];</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>[3];</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> p[3];</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>;</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacemask</a> = 0;</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="mathlib_8h.html#a3f4b2cfbd3195eddeb10b2e14b7e4d8c">BoxesOverlap</a>(lightmins, lightmaxs, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacemins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacemaxs</a>))</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a> = <a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a> / (<a class="code hl_variable" href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a>)(<a class="code hl_variable" href="r__shadow_8c.html#a2acc73bfba472354d3cb6c2998628eb0">r_shadow_shadowmapmaxsize</a> - <a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a>);</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tend</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firsttriangle</a> + numtris;</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#a4e677405f1faea6a9d9dc644d366b646">BoxInsideBox</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacemins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacemaxs</a>, lightmins, lightmaxs))</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>    {</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>        <span class="comment">// surface box entirely inside light box, no box cull</span></div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">projectdirection</a>)</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>        {</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>            <span class="keywordflow">for</span> (t = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firsttriangle</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = elements + t * 3;t &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tend</a>;t++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> += 3)</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>            {</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>                <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invertex3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[0] * 3, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invertex3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[1] * 3, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invertex3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[2] * 3;</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>                <a class="code hl_define" href="mathlib_8h.html#abd107e00eca870c28df1518302fee3df">TriangleNormal</a>(<a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>);</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aa689749e561af4254355f6a9d83df692">r_shadow_frontsidecasting</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> == (<a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">projectdirection</a>) &lt; 0))</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>                {</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>                    <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], p[0]), <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], p[1]), <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], p[2]);</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>                    <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> = <a class="code hl_function" href="r__shadow_8c.html#a18b21bd08b92f0b79427462d3f874828">R_Shadow_CalcTriangleSideMask</a>(p[0], p[1], p[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>);</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacemask</a> |= <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>                    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>)</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>                    {</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[0] += <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[1] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;1)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[2] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;2)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[3] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;3)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[4] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;4)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[5] += <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;5;</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>                        <a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a>[<a class="code hl_variable" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a>] = <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>                        <a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a>[<a class="code hl_variable" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a>++] = t;</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>                    }</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>                }</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>            }</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>        }</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>        {</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>            <span class="keywordflow">for</span> (t = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firsttriangle</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = elements + t * 3;t &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tend</a>;t++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> += 3)</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>            {</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>                <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invertex3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[0] * 3, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invertex3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[1] * 3, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invertex3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[2] * 3;</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aa689749e561af4254355f6a9d83df692">r_shadow_frontsidecasting</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> == <a class="code hl_define" href="mathlib_8h.html#aa13eeb7bc310534b8ba5ea92d6e540a3">PointInfrontOfTriangle</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">projectorigin</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2]))</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>                {</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>                    <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], p[0]), <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], p[1]), <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], p[2]);</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>                    <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> = <a class="code hl_function" href="r__shadow_8c.html#a18b21bd08b92f0b79427462d3f874828">R_Shadow_CalcTriangleSideMask</a>(p[0], p[1], p[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>);</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacemask</a> |= <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>                    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>)</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>                    {</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[0] += <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[1] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;1)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[2] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;2)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[3] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;3)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[4] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;4)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[5] += <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;5;</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>                        <a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a>[<a class="code hl_variable" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a>] = <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>                        <a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a>[<a class="code hl_variable" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a>++] = t;</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>                    }</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>                }</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>            }</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>        }</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>    }</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    {</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>        <span class="comment">// surface box not entirely inside light box, cull each triangle</span></div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">projectdirection</a>)</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>        {</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>            <span class="keywordflow">for</span> (t = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firsttriangle</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = elements + t * 3;t &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tend</a>;t++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> += 3)</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>            {</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>                <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invertex3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[0] * 3, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invertex3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[1] * 3, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invertex3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[2] * 3;</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>                <a class="code hl_define" href="mathlib_8h.html#abd107e00eca870c28df1518302fee3df">TriangleNormal</a>(<a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>);</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aa689749e561af4254355f6a9d83df692">r_shadow_frontsidecasting</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> == (<a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">projectdirection</a>) &lt; 0)</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>                 &amp;&amp; <a class="code hl_define" href="mathlib_8h.html#afe288980104408902300b9e7f523e08a">TriangleBBoxOverlapsBox</a>(<a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], lightmins, lightmaxs))</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>                {</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>                    <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], p[0]), <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], p[1]), <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], p[2]);</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>                    <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> = <a class="code hl_function" href="r__shadow_8c.html#a18b21bd08b92f0b79427462d3f874828">R_Shadow_CalcTriangleSideMask</a>(p[0], p[1], p[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>);</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacemask</a> |= <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>                    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>)</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>                    {</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[0] += <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[1] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;1)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[2] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;2)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[3] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;3)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[4] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;4)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[5] += <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;5;</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>                        <a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a>[<a class="code hl_variable" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a>] = <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>                        <a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a>[<a class="code hl_variable" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a>++] = t;</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>                    }</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>                }</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>            }</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>        }</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>        {</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>            <span class="keywordflow">for</span> (t = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">firsttriangle</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> = elements + t * 3;t &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tend</a>;t++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a> += 3)</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>            {</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>                <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invertex3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[0] * 3, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invertex3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[1] * 3, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invertex3f</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">e</a>[2] * 3;</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aa689749e561af4254355f6a9d83df692">r_shadow_frontsidecasting</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> == <a class="code hl_define" href="mathlib_8h.html#aa13eeb7bc310534b8ba5ea92d6e540a3">PointInfrontOfTriangle</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">projectorigin</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2])</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>                 &amp;&amp; <a class="code hl_define" href="mathlib_8h.html#afe288980104408902300b9e7f523e08a">TriangleBBoxOverlapsBox</a>(<a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], lightmins, lightmaxs))</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>                {</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>                    <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[0], p[0]), <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[1], p[1]), <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">worldtolight</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[2], p[2]);</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>                    <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a> = <a class="code hl_function" href="r__shadow_8c.html#a18b21bd08b92f0b79427462d3f874828">R_Shadow_CalcTriangleSideMask</a>(p[0], p[1], p[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>);</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacemask</a> |= <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>                    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>)</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>                    {</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[0] += <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[1] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;1)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[2] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;2)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[3] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;3)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[4] += (<a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;4)&amp;1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">totals</a>[5] += <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>&gt;&gt;5;</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>                        <a class="code hl_variable" href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a>[<a class="code hl_variable" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a>] = <a class="code hl_variable" href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a>;</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>                        <a class="code hl_variable" href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a>[<a class="code hl_variable" href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a>++] = t;</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>                    }</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>                }</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>            }</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>        }</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>    }</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacemask</a>;</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>}</div>
</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span> </div>
<div class="foldopen" id="foldopen01162" data-start="{" data-end="}">
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#afe5c326cb87dc3516112a9f12607f3fb"> 1162</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#afe5c326cb87dc3516112a9f12607f3fb">R_Shadow_ShadowMapFromList</a>(<span class="keywordtype">int</span> numverts, <span class="keywordtype">int</span> numtris, <span class="keyword">const</span> <span class="keywordtype">float</span> *vertex3f, <span class="keyword">const</span> <span class="keywordtype">int</span> *elements, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsidetris</a>, <span class="keyword">const</span> <span class="keywordtype">int</span> *sidetotals, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *sides, <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sidetris</a>)</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>{</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outtriangles</a> = 0;</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>    <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outelement3i</a>[6];</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>    <span class="keywordflow">if</span> (!numverts || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsidetris</a> || !<a class="code hl_variable" href="r__shadow_8c.html#aa270795a82b2335cb10e2c83f5e9aa76">r_shadow_compilingrtlight</a>)</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outtriangles</a> = sidetotals[0] + sidetotals[1] + sidetotals[2] + sidetotals[3] + sidetotals[4] + sidetotals[5];</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>    <span class="comment">// make sure shadowelements is big enough for this mesh</span></div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a50840da8047197b7b97ae48568ce04a1">maxshadowtriangles</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outtriangles</a>)</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>        <a class="code hl_function" href="r__shadow_8c.html#a5a85e2f80e3549ff22d7f598d55cd02f">R_Shadow_ResizeShadowArrays</a>(0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outtriangles</a>, 0, 1);</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span> </div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>    <span class="comment">// compute the offset and size of the separate index lists for each cubemap side</span></div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outtriangles</a> = 0;</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>    {</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outelement3i</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="r__shadow_8c.html#aec9f83716e02d5827f1414d2e99633dc">shadowelements</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outtriangles</a> * 3;</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>        <a class="code hl_variable" href="r__shadow_8c.html#aa270795a82b2335cb10e2c83f5e9aa76">r_shadow_compilingrtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a98ea18bbb779ac1aa193be665e3f3142">static_meshchain_shadow_shadowmap</a>-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a9a1f3f13d9b1053376a8a5473c3c9986">sideoffsets</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outtriangles</a>;</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>        <a class="code hl_variable" href="r__shadow_8c.html#aa270795a82b2335cb10e2c83f5e9aa76">r_shadow_compilingrtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a98ea18bbb779ac1aa193be665e3f3142">static_meshchain_shadow_shadowmap</a>-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a37799ba83637ae362f443fbacdf3ab1e">sidetotals</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = sidetotals[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outtriangles</a> += sidetotals[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>    }</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span> </div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>    <span class="comment">// gather up the (sparse) triangles into separate index lists for each cubemap side</span></div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numsidetris</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>    {</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">element</a> = elements + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sidetris</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] * 3;</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; 6;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>        {</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>            <span class="keywordflow">if</span> (sides[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp; (1 &lt;&lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>))</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>            {</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outelement3i</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>][0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">element</a>[0];</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outelement3i</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>][1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">element</a>[1];</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outelement3i</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>][2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">element</a>[2];</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outelement3i</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>] += 3;</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>            }</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>        }</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>    }</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span> </div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>    <a class="code hl_function" href="model__shared_8c.html#ab807c8ef48ac23255f9e8b7a7ab5caf0">Mod_ShadowMesh_AddMesh</a>(<a class="code hl_variable" href="r__shadow_8c.html#aa270795a82b2335cb10e2c83f5e9aa76">r_shadow_compilingrtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a98ea18bbb779ac1aa193be665e3f3142">static_meshchain_shadow_shadowmap</a>, vertex3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outtriangles</a>, <a class="code hl_variable" href="r__shadow_8c.html#aec9f83716e02d5827f1414d2e99633dc">shadowelements</a>);</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>}</div>
</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span> </div>
<div class="foldopen" id="foldopen01202" data-start="{" data-end="}">
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a081a16409450b472945fffe89f208cf5"> 1202</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a081a16409450b472945fffe89f208cf5">R_Shadow_MakeTextures_MakeCorona</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>{</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dx</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dy</a>;</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>;</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[32][32][4];</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &lt; 32;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++)</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>    {</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dy</a> = (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> - 15.5f) * (1.0f / 16.0f);</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> &lt; 32;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>++)</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>        {</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dx</a> = (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> - 15.5f) * (1.0f / 16.0f);</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>            <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)(((1.0f / (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dx</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dx</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dy</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dy</a> + 0.2f)) - (1.0f / (1.0f + 0.2))) * 32.0f / (1.0f / (1.0f + 0.2)));</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>            <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0, <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>, 255);</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>            <a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>][<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>][0] = <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>;</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>            <a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>][<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>][1] = <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>;</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>            <a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>][<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>][2] = <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>;</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>            <a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>][<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>][3] = 255;</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>        }</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>    }</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>    <a class="code hl_variable" href="r__shadow_8c.html#aed09fab0c0feac12235fc7fd4be8ab96">r_shadow_lightcorona</a> = <a class="code hl_function" href="gl__rmain_8c.html#a6254a8f908da05ab79804175be40aec9">R_SkinFrame_LoadInternalBGRA</a>(<span class="stringliteral">&quot;lightcorona&quot;</span>, <a class="code hl_define" href="r__textures_8h.html#a7ebf18782aefc1f1ff9fc5cb169e2dbb">TEXF_FORCELINEAR</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[0][0][0], 32, 32, 0, 0, 0, <span class="keyword">false</span>);</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>}</div>
</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span> </div>
<div class="foldopen" id="foldopen01224" data-start="{" data-end="}">
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aaff87c16eef046720942b85894fb74b2"> 1224</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_function" href="r__shadow_8c.html#aaff87c16eef046720942b85894fb74b2">R_Shadow_MakeTextures_SamplePoint</a>(<span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>)</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>{</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>    <span class="keywordtype">float</span> dist = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>*<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>+<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>*<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>+<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>*<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>);</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> = dist &lt; 1 ? ((1.0f - dist) * <a class="code hl_variable" href="r__shadow_8c.html#ac983b35605fe044369c676ce33b58061">r_shadow_lightattenuationlinearscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> / (<a class="code hl_variable" href="r__shadow_8c.html#a0f3acc72b271530ae45ed8b06f011976">r_shadow_lightattenuationdividebias</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> + dist*dist)) : 0;</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>    <span class="comment">// note this code could suffer byte order issues except that it is multiplying by an integer that reads the same both ways</span></div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)(<a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> * 256.0f), 255) * 0x01010101U;</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>}</div>
</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span> </div>
<div class="foldopen" id="foldopen01232" data-start="{" data-end="}">
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a57a59322c075e1870bd1a4ded513c051"> 1232</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a57a59322c075e1870bd1a4ded513c051">R_Shadow_MakeTextures</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>{</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>;</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>, dist;</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>    <a class="code hl_function" href="r__shadow_8c.html#a45077a7e2910775a9f6a02179a55a44b">R_Shadow_FreeShadowMaps</a>();</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>    <a class="code hl_function" href="gl__textures_8c.html#a114f2477dc7b969704fce4025b2a4b1b">R_FreeTexturePool</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>);</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>    <a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a> = <a class="code hl_function" href="gl__textures_8c.html#ab60a02391841e828427f5cc24cb5dd29">R_AllocTexturePool</a>();</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>    <a class="code hl_variable" href="r__shadow_8c.html#abe85cac9d47b95845357d5b059ad085c">r_shadow_attenlinearscale</a> = <a class="code hl_variable" href="r__shadow_8c.html#ac983b35605fe044369c676ce33b58061">r_shadow_lightattenuationlinearscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>    <a class="code hl_variable" href="r__shadow_8c.html#aa05e61ca09411882a73c20031098d7a9">r_shadow_attendividebias</a> = <a class="code hl_variable" href="r__shadow_8c.html#a0f3acc72b271530ae45ed8b06f011976">r_shadow_lightattenuationdividebias</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>    <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_define" href="r__shadow_8c.html#ad077a8bcfd564f016dc4f5ee589c36b9">ATTEN3DSIZE</a>*<a class="code hl_define" href="r__shadow_8c.html#ad077a8bcfd564f016dc4f5ee589c36b9">ATTEN3DSIZE</a>*<a class="code hl_define" href="r__shadow_8c.html#ad077a8bcfd564f016dc4f5ee589c36b9">ATTEN3DSIZE</a>, <a class="code hl_define" href="r__shadow_8c.html#a3bd90b680c3721ed0124b660332bd3f3">ATTEN2DSIZE</a>*<a class="code hl_define" href="r__shadow_8c.html#a3bd90b680c3721ed0124b660332bd3f3">ATTEN2DSIZE</a>), <a class="code hl_define" href="r__shadow_8c.html#aeb6886bbd1cf0b2d264895c983ac5d40">ATTEN1DSIZE</a>) * 4);</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>    <span class="comment">// the table includes one additional value to avoid the need to clamp indexing due to minor math errors</span></div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> &lt;= <a class="code hl_define" href="r__shadow_8c.html#a5a392abd3660ffeddcd31d617d756ef9">ATTENTABLESIZE</a>;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>++)</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>    {</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>        dist = (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> + 0.5f) * (1.0f / <a class="code hl_define" href="r__shadow_8c.html#a5a392abd3660ffeddcd31d617d756ef9">ATTENTABLESIZE</a>) * (1.0f / 0.9375);</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>        <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> = dist &lt; 1 ? ((1.0f - dist) * <a class="code hl_variable" href="r__shadow_8c.html#ac983b35605fe044369c676ce33b58061">r_shadow_lightattenuationlinearscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> / (<a class="code hl_variable" href="r__shadow_8c.html#a0f3acc72b271530ae45ed8b06f011976">r_shadow_lightattenuationdividebias</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> + dist*dist)) : 0;</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>        <a class="code hl_variable" href="r__shadow_8c.html#adf403909f42eb98bfa60734c71778bba">r_shadow_attentable</a>[<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0, <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>, 1);</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>    }</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    <span class="comment">// 1D gradient texture</span></div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> &lt; <a class="code hl_define" href="r__shadow_8c.html#aeb6886bbd1cf0b2d264895c983ac5d40">ATTEN1DSIZE</a>;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>++)</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>        <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>[<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>] = <a class="code hl_function" href="r__shadow_8c.html#aaff87c16eef046720942b85894fb74b2">R_Shadow_MakeTextures_SamplePoint</a>((<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> + 0.5f) * (1.0f / <a class="code hl_define" href="r__shadow_8c.html#aeb6886bbd1cf0b2d264895c983ac5d40">ATTEN1DSIZE</a>) * (1.0f / 0.9375), 0, 0);</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5b73004bfb2234722770d895bc736f11">r_shadow_attenuationgradienttexture</a> = <a class="code hl_function" href="gl__textures_8c.html#afe6f33ec05da1bce9cd3a847610e7384">R_LoadTexture2D</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>, <span class="stringliteral">&quot;attenuation1d&quot;</span>, <a class="code hl_define" href="r__shadow_8c.html#aeb6886bbd1cf0b2d264895c983ac5d40">ATTEN1DSIZE</a>, 1, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49ab887b36a912241930415c7f1db44d094">TEXTYPE_BGRA</a>, <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a> | <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a> | <a class="code hl_define" href="r__textures_8h.html#a7ebf18782aefc1f1ff9fc5cb169e2dbb">TEXF_FORCELINEAR</a>, -1, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>    <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>);</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span> </div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>    <a class="code hl_function" href="r__shadow_8c.html#a081a16409450b472945fffe89f208cf5">R_Shadow_MakeTextures_MakeCorona</a>();</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span> </div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>    <span class="comment">// Editor light sprites</span></div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>    <a class="code hl_variable" href="r__shadow_8c.html#a77fcab02591cf32e02c8e5651e323d87">r_editlights_sprcursor</a> = <a class="code hl_function" href="gl__rmain_8c.html#af718c071d07fd4a6fc7a524a2edd641e">R_SkinFrame_LoadInternal8bit</a>(<span class="stringliteral">&quot;gfx/editlights/cursor&quot;</span>, <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a> | <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a>, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>    <span class="stringliteral">&quot;.3............3.&quot;</span></div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>    <span class="stringliteral">&quot;..5...2332...5..&quot;</span></div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>    <span class="stringliteral">&quot;...7.3....3.7...&quot;</span></div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>    <span class="stringliteral">&quot;....7......7....&quot;</span></div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>    <span class="stringliteral">&quot;...3.7....7.3...&quot;</span></div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>    <span class="stringliteral">&quot;..2...7..7...2..&quot;</span></div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>    <span class="stringliteral">&quot;..3..........3..&quot;</span></div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>    <span class="stringliteral">&quot;..3..........3..&quot;</span></div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>    <span class="stringliteral">&quot;..2...7..7...2..&quot;</span></div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>    <span class="stringliteral">&quot;...3.7....7.3...&quot;</span></div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>    <span class="stringliteral">&quot;....7......7....&quot;</span></div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>    <span class="stringliteral">&quot;...7.3....3.7...&quot;</span></div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>    <span class="stringliteral">&quot;..5...2332...5..&quot;</span></div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>    <span class="stringliteral">&quot;.3............3.&quot;</span></div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>    , 16, 16, <a class="code hl_variable" href="palette_8c.html#a8cfd13040e568d58482cc9070a6b0e39">palette_bgra_embeddedpic</a>, <a class="code hl_variable" href="palette_8c.html#a8cfd13040e568d58482cc9070a6b0e39">palette_bgra_embeddedpic</a>);</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>    <a class="code hl_variable" href="r__shadow_8c.html#a4996623220b790e7682c23e4de6fc237">r_editlights_sprlight</a> = <a class="code hl_function" href="gl__rmain_8c.html#af718c071d07fd4a6fc7a524a2edd641e">R_SkinFrame_LoadInternal8bit</a>(<span class="stringliteral">&quot;gfx/editlights/light&quot;</span>, <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a> | <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a>, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>    <span class="stringliteral">&quot;......1111......&quot;</span></div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>    <span class="stringliteral">&quot;....11233211....&quot;</span></div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>    <span class="stringliteral">&quot;...1234554321...&quot;</span></div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>    <span class="stringliteral">&quot;...1356776531...&quot;</span></div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>    <span class="stringliteral">&quot;..124677776421..&quot;</span></div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>    <span class="stringliteral">&quot;..135777777531..&quot;</span></div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>    <span class="stringliteral">&quot;..135777777531..&quot;</span></div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>    <span class="stringliteral">&quot;..124677776421..&quot;</span></div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>    <span class="stringliteral">&quot;...1356776531...&quot;</span></div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>    <span class="stringliteral">&quot;...1234554321...&quot;</span></div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>    <span class="stringliteral">&quot;....11233211....&quot;</span></div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>    <span class="stringliteral">&quot;......1111......&quot;</span></div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>    , 16, 16, <a class="code hl_variable" href="palette_8c.html#a8cfd13040e568d58482cc9070a6b0e39">palette_bgra_embeddedpic</a>, <a class="code hl_variable" href="palette_8c.html#a8cfd13040e568d58482cc9070a6b0e39">palette_bgra_embeddedpic</a>);</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>    <a class="code hl_variable" href="r__shadow_8c.html#a23892b3c16ceec91c2a8df49795ec2e2">r_editlights_sprnoshadowlight</a> = <a class="code hl_function" href="gl__rmain_8c.html#af718c071d07fd4a6fc7a524a2edd641e">R_SkinFrame_LoadInternal8bit</a>(<span class="stringliteral">&quot;gfx/editlights/noshadow&quot;</span>, <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a> | <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a>, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>    <span class="stringliteral">&quot;......1111......&quot;</span></div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>    <span class="stringliteral">&quot;....11233211....&quot;</span></div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>    <span class="stringliteral">&quot;...1234554321...&quot;</span></div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>    <span class="stringliteral">&quot;...1356226531...&quot;</span></div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>    <span class="stringliteral">&quot;..12462..26421..&quot;</span></div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>    <span class="stringliteral">&quot;..1352....2531..&quot;</span></div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>    <span class="stringliteral">&quot;..1352....2531..&quot;</span></div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>    <span class="stringliteral">&quot;..12462..26421..&quot;</span></div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>    <span class="stringliteral">&quot;...1356226531...&quot;</span></div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>    <span class="stringliteral">&quot;...1234554321...&quot;</span></div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>    <span class="stringliteral">&quot;....11233211....&quot;</span></div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>    <span class="stringliteral">&quot;......1111......&quot;</span></div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>    , 16, 16, <a class="code hl_variable" href="palette_8c.html#a8cfd13040e568d58482cc9070a6b0e39">palette_bgra_embeddedpic</a>, <a class="code hl_variable" href="palette_8c.html#a8cfd13040e568d58482cc9070a6b0e39">palette_bgra_embeddedpic</a>);</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>    <a class="code hl_variable" href="r__shadow_8c.html#aa8a7722a93e47750076d60e003e825b5">r_editlights_sprcubemaplight</a> = <a class="code hl_function" href="gl__rmain_8c.html#af718c071d07fd4a6fc7a524a2edd641e">R_SkinFrame_LoadInternal8bit</a>(<span class="stringliteral">&quot;gfx/editlights/cubemaplight&quot;</span>, <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a> | <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a>, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>    <span class="stringliteral">&quot;......2772......&quot;</span></div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>    <span class="stringliteral">&quot;....27755772....&quot;</span></div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>    <span class="stringliteral">&quot;..277533335772..&quot;</span></div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>    <span class="stringliteral">&quot;..753333333357..&quot;</span></div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>    <span class="stringliteral">&quot;..777533335777..&quot;</span></div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>    <span class="stringliteral">&quot;..735775577537..&quot;</span></div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>    <span class="stringliteral">&quot;..733357753337..&quot;</span></div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>    <span class="stringliteral">&quot;..733337733337..&quot;</span></div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>    <span class="stringliteral">&quot;..753337733357..&quot;</span></div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>    <span class="stringliteral">&quot;..277537735772..&quot;</span></div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>    <span class="stringliteral">&quot;....27777772....&quot;</span></div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>    <span class="stringliteral">&quot;......2772......&quot;</span></div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>    , 16, 16, <a class="code hl_variable" href="palette_8c.html#a8cfd13040e568d58482cc9070a6b0e39">palette_bgra_embeddedpic</a>, <a class="code hl_variable" href="palette_8c.html#a8cfd13040e568d58482cc9070a6b0e39">palette_bgra_embeddedpic</a>);</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>    <a class="code hl_variable" href="r__shadow_8c.html#ae8447729362c0b4859f595ec86e15d6c">r_editlights_sprcubemapnoshadowlight</a> = <a class="code hl_function" href="gl__rmain_8c.html#af718c071d07fd4a6fc7a524a2edd641e">R_SkinFrame_LoadInternal8bit</a>(<span class="stringliteral">&quot;gfx/editlights/cubemapnoshadowlight&quot;</span>, <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a> | <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a>, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>    <span class="stringliteral">&quot;......2772......&quot;</span></div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>    <span class="stringliteral">&quot;....27722772....&quot;</span></div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>    <span class="stringliteral">&quot;..2772....2772..&quot;</span></div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>    <span class="stringliteral">&quot;..72........27..&quot;</span></div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>    <span class="stringliteral">&quot;..7772....2777..&quot;</span></div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>    <span class="stringliteral">&quot;..7.27722772.7..&quot;</span></div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>    <span class="stringliteral">&quot;..7...2772...7..&quot;</span></div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>    <span class="stringliteral">&quot;..7....77....7..&quot;</span></div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>    <span class="stringliteral">&quot;..72...77...27..&quot;</span></div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>    <span class="stringliteral">&quot;..2772.77.2772..&quot;</span></div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>    <span class="stringliteral">&quot;....27777772....&quot;</span></div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>    <span class="stringliteral">&quot;......2772......&quot;</span></div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>    , 16, 16, <a class="code hl_variable" href="palette_8c.html#a8cfd13040e568d58482cc9070a6b0e39">palette_bgra_embeddedpic</a>, <a class="code hl_variable" href="palette_8c.html#a8cfd13040e568d58482cc9070a6b0e39">palette_bgra_embeddedpic</a>);</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>    <a class="code hl_variable" href="r__shadow_8c.html#a9941c1f23ab960b05549dacb0426ae71">r_editlights_sprselection</a> = <a class="code hl_function" href="gl__rmain_8c.html#af718c071d07fd4a6fc7a524a2edd641e">R_SkinFrame_LoadInternal8bit</a>(<span class="stringliteral">&quot;gfx/editlights/selection&quot;</span>, <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a> | <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>    <span class="stringliteral">&quot;.777752..257777.&quot;</span></div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>    <span class="stringliteral">&quot;.742........247.&quot;</span></div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>    <span class="stringliteral">&quot;.72..........27.&quot;</span></div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>    <span class="stringliteral">&quot;.7............7.&quot;</span></div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>    <span class="stringliteral">&quot;.5............5.&quot;</span></div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>    <span class="stringliteral">&quot;.2............2.&quot;</span></div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>    <span class="stringliteral">&quot;.2............2.&quot;</span></div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>    <span class="stringliteral">&quot;.5............5.&quot;</span></div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>    <span class="stringliteral">&quot;.7............7.&quot;</span></div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>    <span class="stringliteral">&quot;.72..........27.&quot;</span></div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>    <span class="stringliteral">&quot;.742........247.&quot;</span></div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>    <span class="stringliteral">&quot;.777752..257777.&quot;</span></div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>    <span class="stringliteral">&quot;................&quot;</span></div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>    , 16, 16, <a class="code hl_variable" href="palette_8c.html#a8cfd13040e568d58482cc9070a6b0e39">palette_bgra_embeddedpic</a>, <a class="code hl_variable" href="palette_8c.html#a8cfd13040e568d58482cc9070a6b0e39">palette_bgra_embeddedpic</a>);</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>}</div>
</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span> </div>
<div class="foldopen" id="foldopen01369" data-start="{" data-end="}">
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a002be2a22d2ec51fb6a09ca24fe3ff25"> 1369</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a002be2a22d2ec51fb6a09ca24fe3ff25">R_Shadow_RenderMode_Begin</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>{</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>    <a class="code hl_typedef" href="glquake_8h.html#a1df7fac5bc539d8661f0690e59a3c1b8">GLint</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">drawbuffer</a>;</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>    <a class="code hl_typedef" href="glquake_8h.html#a1df7fac5bc539d8661f0690e59a3c1b8">GLint</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">readbuffer</a>;</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span> </div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a0f3acc72b271530ae45ed8b06f011976">r_shadow_lightattenuationdividebias</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> != <a class="code hl_variable" href="r__shadow_8c.html#aa05e61ca09411882a73c20031098d7a9">r_shadow_attendividebias</a></div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>     || <a class="code hl_variable" href="r__shadow_8c.html#ac983b35605fe044369c676ce33b58061">r_shadow_lightattenuationlinearscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> != <a class="code hl_variable" href="r__shadow_8c.html#abe85cac9d47b95845357d5b059ad085c">r_shadow_attenlinearscale</a>)</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>        <a class="code hl_function" href="r__shadow_8c.html#a57a59322c075e1870bd1a4ded513c051">R_Shadow_MakeTextures</a>();</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span> </div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>    <a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>    <a class="code hl_function" href="gl__backend_8c.html#ab0845d5ed92717ad1158e8a559db073d">R_Mesh_ResetTextureState</a>();</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>    <a class="code hl_function" href="gl__backend_8c.html#aca3e3f9f03357db16ce588778b258020">GL_BlendFunc</a>(<a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>, <a class="code hl_define" href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>);</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>    <a class="code hl_function" href="gl__backend_8c.html#a736b5d13ba47fb7de5dafb73b3026e1a">GL_DepthRange</a>(0, 1);</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>    <a class="code hl_function" href="gl__backend_8c.html#a888e5667bc275712bc1407f459c9e67e">GL_PolygonOffset</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad9a34d0ef198367c33d316bba0c6d3b7">polygonfactor</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a59c35765795980fa3607ecbbff7f3f31">polygonoffset</a>);</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>    <a class="code hl_function" href="gl__backend_8c.html#a712c082566b5939b265260c5cd929033">GL_DepthTest</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>    <a class="code hl_function" href="gl__backend_8c.html#a369132de82d4015a01e164c63255403f">GL_DepthMask</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>    <a class="code hl_function" href="gl__backend_8c.html#ab838ec7c7331d12af34180a8b19a9b15">GL_Color</a>(0, 0, 0, 1);</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>    <a class="code hl_function" href="gl__backend_8c.html#adadda08f98e1c2d849d38d6885073148">GL_Scissor</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#ab6e28cd0da86d0623897a480caf26aa8">x</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a43bf621388acf637d4d3bbc2a2f2d1c0">y</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a2c03a2d70555c2d93c2623dabd706a4d">width</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a588496c0ad6b768495bee4c4d8f22979">height</a>);</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>    </div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">r_shadow_rendermode</a> = <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a1f38e678baa61a27d802e5327188da61">R_SHADOW_RENDERMODE_NONE</a>;</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>    <a class="code hl_variable" href="r__shadow_8c.html#a98acf1f7275f30b9e00c35d08366a033">r_shadow_lightingrendermode</a> = <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a8a705347d610f9d1611a45d02d370181">R_SHADOW_RENDERMODE_LIGHT_GLSL</a>;</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span> </div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>    <a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglGetIntegerv</a>(<a class="code hl_define" href="glquake_8h.html#ac58908ecadcf6f35d3fd58fc26e3ef18">GL_DRAW_BUFFER</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">drawbuffer</a>);<a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglGetIntegerv</a>(<a class="code hl_define" href="glquake_8h.html#a424bfd04f8f6ca1bb13ff143f64740e1">GL_READ_BUFFER</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">readbuffer</a>);<a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">r_shadow_drawbuffer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">drawbuffer</a>;</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">r_shadow_readbuffer</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">readbuffer</a>;</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>    <a class="code hl_variable" href="r__shadow_8c.html#a48ad88d635e756c61dc92673ee055a9d">r_shadow_cullface_front</a> = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aca6bf405fb02edf2857333ad5a939f59">cullface_front</a>;</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>    <a class="code hl_variable" href="r__shadow_8c.html#ad30e7b118fedfa505d770ffb922a7969">r_shadow_cullface_back</a> = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a482a3499822c3f36801b146269f2db2c">cullface_back</a>;</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>}</div>
</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span> </div>
<div class="foldopen" id="foldopen01404" data-start="{" data-end="}">
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#adc3c945c3bc028142dddad245179892f"> 1404</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#adc3c945c3bc028142dddad245179892f">R_Shadow_RenderMode_ActiveLight</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight)</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>{</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>    <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a> = rtlight;</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>}</div>
</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span> </div>
<div class="foldopen" id="foldopen01409" data-start="{" data-end="}">
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aab840c0d105f7951bbafe35dd8f2f1cc"> 1409</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#aab840c0d105f7951bbafe35dd8f2f1cc">R_Shadow_RenderMode_Reset</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>{</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>    <a class="code hl_function" href="gl__backend_8c.html#ab0845d5ed92717ad1158e8a559db073d">R_Mesh_ResetTextureState</a>();</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>    <a class="code hl_function" href="gl__backend_8c.html#ab9979b96d01546862e3ea80ab069c614">R_Mesh_SetRenderTargets</a>(<a class="code hl_variable" href="r__shadow_8c.html#a55fd1afc983c3d9e9a6a5d703b8f5d1d">r_shadow_viewfbo</a>, <a class="code hl_variable" href="r__shadow_8c.html#a4e9b8a0c895ff2c589edb7590378f6a7">r_shadow_viewdepthtexture</a>, <a class="code hl_variable" href="r__shadow_8c.html#a8ecdf1edcd01493fadea346e2d63d1ea">r_shadow_viewcolortexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>    <a class="code hl_function" href="gl__backend_8c.html#aa241fd9a2ecba640ec39c782948c9916">R_SetViewport</a>(&amp;<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>);</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>    <a class="code hl_function" href="gl__backend_8c.html#adadda08f98e1c2d849d38d6885073148">GL_Scissor</a>(<a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[0], <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[1], <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[2], <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[3]);</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>    <a class="code hl_function" href="gl__backend_8c.html#a736b5d13ba47fb7de5dafb73b3026e1a">GL_DepthRange</a>(0, 1);</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>    <a class="code hl_function" href="gl__backend_8c.html#a712c082566b5939b265260c5cd929033">GL_DepthTest</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>    <a class="code hl_function" href="gl__backend_8c.html#a369132de82d4015a01e164c63255403f">GL_DepthMask</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>    <a class="code hl_function" href="gl__backend_8c.html#a5d98d0078d5c884b3e382d6ddd7eb2e1">GL_DepthFunc</a>(<a class="code hl_define" href="glquake_8h.html#a8b778a06f153b4d59ebc6aa1d0996191">GL_LEQUAL</a>);</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>    <a class="code hl_function" href="gl__backend_8c.html#a888e5667bc275712bc1407f459c9e67e">GL_PolygonOffset</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad9a34d0ef198367c33d316bba0c6d3b7">polygonfactor</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a59c35765795980fa3607ecbbff7f3f31">polygonoffset</a>);<a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>    <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aca6bf405fb02edf2857333ad5a939f59">cullface_front</a> = <a class="code hl_variable" href="r__shadow_8c.html#a48ad88d635e756c61dc92673ee055a9d">r_shadow_cullface_front</a>;</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>    <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a482a3499822c3f36801b146269f2db2c">cullface_back</a> = <a class="code hl_variable" href="r__shadow_8c.html#ad30e7b118fedfa505d770ffb922a7969">r_shadow_cullface_back</a>;</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>    <a class="code hl_function" href="gl__backend_8c.html#a28f12ab6551743428797e62bf183ebde">GL_CullFace</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a482a3499822c3f36801b146269f2db2c">cullface_back</a>);</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>    <a class="code hl_function" href="gl__backend_8c.html#ab838ec7c7331d12af34180a8b19a9b15">GL_Color</a>(1, 1, 1, 1);</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>    <a class="code hl_function" href="gl__backend_8c.html#a2a511f73b51c9eca7a2e20b21b543944">GL_ColorMask</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ab7a5e64bc6069ece5f689252683d5e9b">colormask</a>[0], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ab7a5e64bc6069ece5f689252683d5e9b">colormask</a>[1], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ab7a5e64bc6069ece5f689252683d5e9b">colormask</a>[2], 1);</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>    <a class="code hl_function" href="gl__backend_8c.html#aca3e3f9f03357db16ce588778b258020">GL_BlendFunc</a>(<a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>, <a class="code hl_define" href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>);</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>    <a class="code hl_function" href="gl__rmain_8c.html#a0948c688f9095e3c6e7a16c53636696f">R_SetupShader_Generic_NoTexture</a>(<span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>    <a class="code hl_variable" href="r__shadow_8c.html#a7939d31dd5a7d473fb7625b64eae3509">r_shadow_usingshadowmap2d</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>}</div>
</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span> </div>
<div class="foldopen" id="foldopen01430" data-start="{" data-end="}">
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a23ec7667fc510c98e441b42587cf0e12"> 1430</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a23ec7667fc510c98e441b42587cf0e12">R_Shadow_ClearStencil</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>{</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>    <a class="code hl_function" href="gl__backend_8c.html#a202e06e98ec098852ac82ee767c8f770">GL_Clear</a>(<a class="code hl_define" href="glquake_8h.html#abe3e281237b175db178879e0988f5a78">GL_STENCIL_BUFFER_BIT</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1.0f, 0);</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>    <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#acb0c53994baa529557477269d81d5507">stats</a>[<a class="code hl_enumvalue" href="r__stats_8h.html#ae611154931c203d788794752dda991f8a47d6bd851ff5b01df7552b6721944992">r_stat_lights_clears</a>]++;</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>}</div>
</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span> </div>
<div class="foldopen" id="foldopen01436" data-start="{" data-end="}">
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a63faf6a233a9783c2374780dd741a9ea"> 1436</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a63faf6a233a9783c2374780dd741a9ea">R_Shadow_MakeVSDCT</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>{</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>    <span class="comment">// maps to a 2x3 texture rectangle with normalized coordinates</span></div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>    <span class="comment">// +-</span></div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>    <span class="comment">// XX</span></div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>    <span class="comment">// YY</span></div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>    <span class="comment">// ZZ</span></div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>    <span class="comment">// stores abs(dir.xy), offset.xy/2.5</span></div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>[4*6] =</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>    {</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>        255, 0, 0x33, 0x33, <span class="comment">// +X: &lt;1, 0&gt;, &lt;0.5, 0.5&gt;</span></div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>        255, 0, 0x99, 0x33, <span class="comment">// -X: &lt;1, 0&gt;, &lt;1.5, 0.5&gt;</span></div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>        0, 255, 0x33, 0x99, <span class="comment">// +Y: &lt;0, 1&gt;, &lt;0.5, 1.5&gt;</span></div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>        0, 255, 0x99, 0x99, <span class="comment">// -Y: &lt;0, 1&gt;, &lt;1.5, 1.5&gt;</span></div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>        0,   0, 0x33, 0xFF, <span class="comment">// +Z: &lt;0, 0&gt;, &lt;0.5, 2.5&gt;</span></div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>        0,   0, 0x99, 0xFF, <span class="comment">// -Z: &lt;0, 0&gt;, &lt;1.5, 2.5&gt;</span></div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>    };</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>    <a class="code hl_variable" href="r__shadow_8c.html#ab04b93fe59cc8947d98de66c740eda01">r_shadow_shadowmapvsdcttexture</a> = <a class="code hl_function" href="gl__textures_8c.html#aae064c0cd5965363555303294ef23873">R_LoadTextureCubeMap</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>, <span class="stringliteral">&quot;shadowmapvsdct&quot;</span>, 1, <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49adbde783f57a05c835bacd7edfcde1536">TEXTYPE_RGBA</a>, <a class="code hl_define" href="r__textures_8h.html#aa97b4aaf90cefe1dff4cb00f2b232127">TEXF_FORCENEAREST</a> | <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a> | <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a>, -1, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>}</div>
</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span> </div>
<div class="foldopen" id="foldopen01456" data-start="{" data-end="}">
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7f5a67a5e4958c92207104d85f286e59"> 1456</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a7f5a67a5e4958c92207104d85f286e59">R_Shadow_MakeShadowMap</a>(<span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesize</a>)</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>{</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="r__shadow_8c.html#a8806bf00c50d87c860dce157ae250a48">r_shadow_shadowmode</a>)</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>    {</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835aca635c2eb9b6d41bf36cc8ab01f4444b">R_SHADOW_SHADOWMODE_SHADOWMAP2D</a>:</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#a43e7d7c5065855167a45d14f3ec4a89e">usedepthtextures</a>)</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>        {</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>            <a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a> = <a class="code hl_function" href="gl__textures_8c.html#a626964d959ef3a7dbf9bb4800d519a0d">R_LoadTextureShadowMap2D</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>, <span class="stringliteral">&quot;shadowmap&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesize</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesize</a>, <a class="code hl_variable" href="r__shadow_8c.html#a67409f727e6f049f035e240153f81678">r_shadow_shadowmapdepthbits</a> &gt;= 24 ? (<a class="code hl_variable" href="r__shadow_8c.html#a6538a2021d0ed79281be83552a020f24">r_shadow_shadowmapsampler</a> ? <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49aebd75dc810a90799cf24bc6a2b1fdd86">TEXTYPE_SHADOWMAP24_COMP</a> : <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49addcdfd96b68683438678b6a2a4d5f298">TEXTYPE_SHADOWMAP24_RAW</a>) : (<a class="code hl_variable" href="r__shadow_8c.html#a6538a2021d0ed79281be83552a020f24">r_shadow_shadowmapsampler</a> ? <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49a8aa45b002c0da7b51b90b3d980dde237">TEXTYPE_SHADOWMAP16_COMP</a> : <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49a3de163d8565fc8aabd0cf9c6b8a09f3e">TEXTYPE_SHADOWMAP16_RAW</a>), <a class="code hl_variable" href="r__shadow_8c.html#a6538a2021d0ed79281be83552a020f24">r_shadow_shadowmapsampler</a>);</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>            <a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>            <a class="code hl_variable" href="r__shadow_8c.html#ac362e58a7bea0632e15053a1e21b6d2c">r_shadow_fbo2d</a> = <a class="code hl_function" href="gl__backend_8c.html#a8e8660f06000abab66f3d141de416092">R_Mesh_CreateFramebufferObject</a>(<a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>        }</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>        {</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>            <a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a> = <a class="code hl_function" href="gl__textures_8c.html#afe6f33ec05da1bce9cd3a847610e7384">R_LoadTexture2D</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>, <span class="stringliteral">&quot;shadowmaprendertarget&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesize</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesize</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49a78217cdbd846be90ada3c3e6e34b54e2">TEXTYPE_COLORBUFFER</a>, <a class="code hl_define" href="r__textures_8h.html#ae7321fcd751438a62912cc8cf7715d6e">TEXF_RENDERTARGET</a> | <a class="code hl_define" href="r__textures_8h.html#aa97b4aaf90cefe1dff4cb00f2b232127">TEXF_FORCENEAREST</a> | <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a> | <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a>, -1, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>            <a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a> = <a class="code hl_function" href="gl__textures_8c.html#a347f3b0720f84542111247e0033f768e">R_LoadTextureRenderBuffer</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>, <span class="stringliteral">&quot;shadowmap&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesize</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesize</a>, <a class="code hl_variable" href="r__shadow_8c.html#a67409f727e6f049f035e240153f81678">r_shadow_shadowmapdepthbits</a> &gt;= 24 ? <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49aa2466cecf47c58a7989d45c5b45273f3">TEXTYPE_DEPTHBUFFER24</a> : <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49ab1c740b5f5da1c8392ab8615a7f786e5">TEXTYPE_DEPTHBUFFER16</a>);</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>            <a class="code hl_variable" href="r__shadow_8c.html#ac362e58a7bea0632e15053a1e21b6d2c">r_shadow_fbo2d</a> = <a class="code hl_function" href="gl__backend_8c.html#a8e8660f06000abab66f3d141de416092">R_Mesh_CreateFramebufferObject</a>(<a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a>, <a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>        }</div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835a502b4eb32a6583fccaeaeca27674d5a3">R_SHADOW_SHADOWMODE_DISABLED</a>:</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>    }</div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>}</div>
</div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span> </div>
<div class="foldopen" id="foldopen01480" data-start="{" data-end="}">
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ad0ac3912153c4fc807b0455777f3b0c6"> 1480</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ad0ac3912153c4fc807b0455777f3b0c6">R_Shadow_ClearShadowMapTexture</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>{</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>    <a class="code hl_struct" href="structr__viewport__t.html">r_viewport_t</a> viewport;</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">clearcolor</a>[4];</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span> </div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>    <span class="comment">// if they don&#39;t exist, create our textures now</span></div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a>)</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>        <a class="code hl_function" href="r__shadow_8c.html#a7f5a67a5e4958c92207104d85f286e59">R_Shadow_MakeShadowMap</a>(<a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a>);</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a43e8c7a380aad0c6b987befbc9950b20">r_shadow_shadowmapvsdct</a> &amp;&amp; !<a class="code hl_variable" href="r__shadow_8c.html#ab04b93fe59cc8947d98de66c740eda01">r_shadow_shadowmapvsdcttexture</a>)</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>        <a class="code hl_function" href="r__shadow_8c.html#a63faf6a233a9783c2374780dd741a9ea">R_Shadow_MakeVSDCT</a>();</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span> </div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>    <span class="comment">// we&#39;re setting up to render shadowmaps, so change rendermode</span></div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">r_shadow_rendermode</a> = <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a5fd9a94cedc2d458310fca10cd3124b9">R_SHADOW_RENDERMODE_SHADOWMAP2D</a>;</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span> </div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>    <a class="code hl_function" href="gl__backend_8c.html#ab0845d5ed92717ad1158e8a559db073d">R_Mesh_ResetTextureState</a>();</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>    <a class="code hl_function" href="r__shadow_8c.html#aab840c0d105f7951bbafe35dd8f2f1cc">R_Shadow_RenderMode_Reset</a>();</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a>)</div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>        <a class="code hl_function" href="gl__backend_8c.html#ab9979b96d01546862e3ea80ab069c614">R_Mesh_SetRenderTargets</a>(<a class="code hl_variable" href="r__shadow_8c.html#ac362e58a7bea0632e15053a1e21b6d2c">r_shadow_fbo2d</a>, <a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a>, <a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>        <a class="code hl_function" href="gl__backend_8c.html#ab9979b96d01546862e3ea80ab069c614">R_Mesh_SetRenderTargets</a>(<a class="code hl_variable" href="r__shadow_8c.html#ac362e58a7bea0632e15053a1e21b6d2c">r_shadow_fbo2d</a>, <a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>    <a class="code hl_function" href="gl__rmain_8c.html#a239a0e33d1c93c5fda8c6d1a2b10830b">R_SetupShader_DepthOrShadow</a>(<span class="keyword">true</span>, <a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a> != <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">false</span>); <span class="comment">// FIXME test if we have a skeletal model?</span></div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>    <a class="code hl_function" href="gl__backend_8c.html#a888e5667bc275712bc1407f459c9e67e">GL_PolygonOffset</a>(<a class="code hl_variable" href="r__shadow_8c.html#afddb236d36a82641a3c15b996f5ca9d4">r_shadow_shadowmapping_polygonfactor</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <a class="code hl_variable" href="r__shadow_8c.html#aeead9091a82d97411391b129adccdc1d">r_shadow_shadowmapping_polygonoffset</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>);</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>    <a class="code hl_function" href="gl__backend_8c.html#a369132de82d4015a01e164c63255403f">GL_DepthMask</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>    <a class="code hl_function" href="gl__backend_8c.html#a712c082566b5939b265260c5cd929033">GL_DepthTest</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span> </div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>    <span class="comment">// we have to set a viewport to clear anything in some renderpaths (D3D)</span></div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>    <a class="code hl_function" href="gl__backend_8c.html#aa367cce31c9af183e5fc889eb5f818d9">R_Viewport_InitOrtho</a>(&amp;viewport, &amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>, 0, 0, <a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a>, 0, 0, 1.0, 1.0, 0.001f, 1.0f, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>    <a class="code hl_function" href="gl__backend_8c.html#aa241fd9a2ecba640ec39c782948c9916">R_SetViewport</a>(&amp;viewport);</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>    <a class="code hl_function" href="gl__backend_8c.html#adadda08f98e1c2d849d38d6885073148">GL_Scissor</a>(viewport.<a class="code hl_variable" href="structr__viewport__t.html#ab6e28cd0da86d0623897a480caf26aa8">x</a>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a43bf621388acf637d4d3bbc2a2f2d1c0">y</a>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a2c03a2d70555c2d93c2623dabd706a4d">width</a>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a588496c0ad6b768495bee4c4d8f22979">height</a>);</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a>)</div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>        <a class="code hl_function" href="gl__backend_8c.html#a2a511f73b51c9eca7a2e20b21b543944">GL_ColorMask</a>(1, 1, 1, 1);</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>        <a class="code hl_function" href="gl__backend_8c.html#a2a511f73b51c9eca7a2e20b21b543944">GL_ColorMask</a>(0, 0, 0, 0);</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a77ee51e56202df8258781a0aa1dc1a2d">renderpath</a>)</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>    {</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafcfef4a81b353e6ad9bfee33f0c6076a">RENDERPATH_GL32</a>:</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafbfa84c8848e1c609691f76637da178b">RENDERPATH_GLES2</a>:</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>        <a class="code hl_function" href="gl__backend_8c.html#a28f12ab6551743428797e62bf183ebde">GL_CullFace</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a482a3499822c3f36801b146269f2db2c">cullface_back</a>);</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>    }</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>    <a class="code hl_define" href="mathlib_8h.html#a14557f9ae9e8f7db1736479bc3eccc4b">Vector4Set</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">clearcolor</a>, 1, 1, 1, 1);</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a>)</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>        <a class="code hl_function" href="gl__backend_8c.html#a202e06e98ec098852ac82ee767c8f770">GL_Clear</a>(<a class="code hl_define" href="glquake_8h.html#aef2a9e9a4b130bc4de57514327847b4f">GL_DEPTH_BUFFER_BIT</a> | <a class="code hl_define" href="glquake_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">clearcolor</a>, 1.0f, 0);</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>        <a class="code hl_function" href="gl__backend_8c.html#a202e06e98ec098852ac82ee767c8f770">GL_Clear</a>(<a class="code hl_define" href="glquake_8h.html#aef2a9e9a4b130bc4de57514327847b4f">GL_DEPTH_BUFFER_BIT</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">clearcolor</a>, 1.0f, 0);</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>}</div>
</div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span> </div>
<div class="foldopen" id="foldopen01527" data-start="{" data-end="}">
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a03ef6db3d64682913c33034c6fa47ff3"> 1527</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a03ef6db3d64682913c33034c6fa47ff3">R_Shadow_SetShadowmapParametersForLight</a>(<a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">noselfshadowpass</a>)</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>{</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> = <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a241dacf73c783ce200946897b338ca04">shadowmapatlassidesize</a>;</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>    <span class="keywordtype">float</span> nearclip = <a class="code hl_variable" href="r__shadow_8c.html#a1e147e72bbae8ca02ec9ae2568a00566">r_shadow_shadowmapping_nearclip</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> / <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>    <span class="keywordtype">float</span> farclip = 1.0f;</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a> = <a class="code hl_variable" href="r__shadow_8c.html#acf4f5f168d0d5b4008cc00b2d3d69542">r_shadow_shadowmapping_bias</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * nearclip * (1024.0f / <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>);<span class="comment">// * rsurface.rtlight-&gt;radius;</span></div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>    <a class="code hl_variable" href="r__shadow_8c.html#a8abd158068709262d7ae098c70cebc67">r_shadow_lightshadowmap_texturescale</a>[0] = 1.0f / <a class="code hl_function" href="gl__textures_8c.html#a738ec012beff0c3bc4bfb9b023130534">R_TextureWidth</a>(<a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a>);</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>    <a class="code hl_variable" href="r__shadow_8c.html#a8abd158068709262d7ae098c70cebc67">r_shadow_lightshadowmap_texturescale</a>[1] = 1.0f / <a class="code hl_function" href="gl__textures_8c.html#a4bc984e9e2d032d8cd37aaa4fef168bd">R_TextureHeight</a>(<a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a>);</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>    <a class="code hl_variable" href="r__shadow_8c.html#a8abd158068709262d7ae098c70cebc67">r_shadow_lightshadowmap_texturescale</a>[2] = <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#ae92ae64bc83b7ca422ee2f4897fa86aa">shadowmapatlasposition</a>[0] + (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">noselfshadowpass</a> ? <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> * 2 : 0);</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>    <a class="code hl_variable" href="r__shadow_8c.html#a8abd158068709262d7ae098c70cebc67">r_shadow_lightshadowmap_texturescale</a>[3] = <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#ae92ae64bc83b7ca422ee2f4897fa86aa">shadowmapatlasposition</a>[1];</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>    <a class="code hl_variable" href="r__shadow_8c.html#a72c84bfc3be828d0925b5aa7bd163541">r_shadow_lightshadowmap_parameters</a>[0] = 0.5f * (<a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> - <a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a>);</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>    <a class="code hl_variable" href="r__shadow_8c.html#a72c84bfc3be828d0925b5aa7bd163541">r_shadow_lightshadowmap_parameters</a>[1] = -nearclip * farclip / (farclip - nearclip) - 0.5f * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>;</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>    <a class="code hl_variable" href="r__shadow_8c.html#a72c84bfc3be828d0925b5aa7bd163541">r_shadow_lightshadowmap_parameters</a>[2] = <a class="code hl_variable" href="r__shadow_8c.html#a43e8c7a380aad0c6b987befbc9950b20">r_shadow_shadowmapvsdct</a> ? 2.5f*<a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> : <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>    <a class="code hl_variable" href="r__shadow_8c.html#a72c84bfc3be828d0925b5aa7bd163541">r_shadow_lightshadowmap_parameters</a>[3] = 0.5f + 0.5f * (farclip + nearclip) / (farclip - nearclip);</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a>)</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>    {</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>        <span class="comment">// completely different meaning than in depthtexture approach</span></div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>        <a class="code hl_variable" href="r__shadow_8c.html#a72c84bfc3be828d0925b5aa7bd163541">r_shadow_lightshadowmap_parameters</a>[1] = 0;</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>        <a class="code hl_variable" href="r__shadow_8c.html#a72c84bfc3be828d0925b5aa7bd163541">r_shadow_lightshadowmap_parameters</a>[3] = -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>;</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>    }</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>}</div>
</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span> </div>
<div class="foldopen" id="foldopen01549" data-start="{" data-end="}">
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9e657a20931acb0ccfca4a4a7013d858"> 1549</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a9e657a20931acb0ccfca4a4a7013d858">R_Shadow_RenderMode_ShadowMap</a>(<span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>)</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>{</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>    <span class="keywordtype">float</span> nearclip, farclip;</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>    <a class="code hl_struct" href="structr__viewport__t.html">r_viewport_t</a> viewport;</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">flipped</a>;</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span> </div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">r_shadow_rendermode</a> != <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a5fd9a94cedc2d458310fca10cd3124b9">R_SHADOW_RENDERMODE_SHADOWMAP2D</a>)</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>    {</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>        <a class="code hl_variable" href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">r_shadow_rendermode</a> = <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a5fd9a94cedc2d458310fca10cd3124b9">R_SHADOW_RENDERMODE_SHADOWMAP2D</a>;</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span> </div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>        <a class="code hl_function" href="gl__backend_8c.html#ab0845d5ed92717ad1158e8a559db073d">R_Mesh_ResetTextureState</a>();</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>        <a class="code hl_function" href="r__shadow_8c.html#aab840c0d105f7951bbafe35dd8f2f1cc">R_Shadow_RenderMode_Reset</a>();</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a>)</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>            <a class="code hl_function" href="gl__backend_8c.html#ab9979b96d01546862e3ea80ab069c614">R_Mesh_SetRenderTargets</a>(<a class="code hl_variable" href="r__shadow_8c.html#ac362e58a7bea0632e15053a1e21b6d2c">r_shadow_fbo2d</a>, <a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a>, <a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>            <a class="code hl_function" href="gl__backend_8c.html#ab9979b96d01546862e3ea80ab069c614">R_Mesh_SetRenderTargets</a>(<a class="code hl_variable" href="r__shadow_8c.html#ac362e58a7bea0632e15053a1e21b6d2c">r_shadow_fbo2d</a>, <a class="code hl_variable" href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>        <a class="code hl_function" href="gl__rmain_8c.html#a239a0e33d1c93c5fda8c6d1a2b10830b">R_SetupShader_DepthOrShadow</a>(<span class="keyword">true</span>, <a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a> != <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">false</span>); <span class="comment">// FIXME test if we have a skeletal model?</span></div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>        <a class="code hl_function" href="gl__backend_8c.html#a888e5667bc275712bc1407f459c9e67e">GL_PolygonOffset</a>(<a class="code hl_variable" href="r__shadow_8c.html#afddb236d36a82641a3c15b996f5ca9d4">r_shadow_shadowmapping_polygonfactor</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <a class="code hl_variable" href="r__shadow_8c.html#aeead9091a82d97411391b129adccdc1d">r_shadow_shadowmapping_polygonoffset</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>);</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>        <a class="code hl_function" href="gl__backend_8c.html#a369132de82d4015a01e164c63255403f">GL_DepthMask</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>        <a class="code hl_function" href="gl__backend_8c.html#a712c082566b5939b265260c5cd929033">GL_DepthTest</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>    }</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span> </div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>    nearclip = <a class="code hl_variable" href="r__shadow_8c.html#a1e147e72bbae8ca02ec9ae2568a00566">r_shadow_shadowmapping_nearclip</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> / <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>    farclip = 1.0f;</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span> </div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>    <a class="code hl_function" href="gl__backend_8c.html#a5fe02ffa3b291e192588223026a0a13b">R_Viewport_InitRectSideView</a>(&amp;viewport, &amp;<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab89a43403b944e77e37a1e7433472964">matrix_lighttoworld</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a>, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, <a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a>, nearclip, farclip, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>);</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>    <a class="code hl_function" href="gl__backend_8c.html#aa241fd9a2ecba640ec39c782948c9916">R_SetViewport</a>(&amp;viewport);</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>    <a class="code hl_function" href="gl__backend_8c.html#adadda08f98e1c2d849d38d6885073148">GL_Scissor</a>(viewport.<a class="code hl_variable" href="structr__viewport__t.html#ab6e28cd0da86d0623897a480caf26aa8">x</a>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a43bf621388acf637d4d3bbc2a2f2d1c0">y</a>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a2c03a2d70555c2d93c2623dabd706a4d">width</a>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a588496c0ad6b768495bee4c4d8f22979">height</a>);</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">flipped</a> = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a> &amp; 1) ^ (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a> &gt;&gt; 2);</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>    <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aca6bf405fb02edf2857333ad5a939f59">cullface_front</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">flipped</a> ? <a class="code hl_variable" href="r__shadow_8c.html#ad30e7b118fedfa505d770ffb922a7969">r_shadow_cullface_back</a> : <a class="code hl_variable" href="r__shadow_8c.html#a48ad88d635e756c61dc92673ee055a9d">r_shadow_cullface_front</a>;</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>    <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a482a3499822c3f36801b146269f2db2c">cullface_back</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">flipped</a> ? <a class="code hl_variable" href="r__shadow_8c.html#a48ad88d635e756c61dc92673ee055a9d">r_shadow_cullface_front</a> : <a class="code hl_variable" href="r__shadow_8c.html#ad30e7b118fedfa505d770ffb922a7969">r_shadow_cullface_back</a>;</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span> </div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a>)</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>        <a class="code hl_function" href="gl__backend_8c.html#a2a511f73b51c9eca7a2e20b21b543944">GL_ColorMask</a>(1,1,1,1);</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>        <a class="code hl_function" href="gl__backend_8c.html#a2a511f73b51c9eca7a2e20b21b543944">GL_ColorMask</a>(0,0,0,0);</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>    <span class="keywordflow">switch</span>(<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a77ee51e56202df8258781a0aa1dc1a2d">renderpath</a>)</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>    {</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafcfef4a81b353e6ad9bfee33f0c6076a">RENDERPATH_GL32</a>:</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafbfa84c8848e1c609691f76637da178b">RENDERPATH_GLES2</a>:</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>        <a class="code hl_function" href="gl__backend_8c.html#a28f12ab6551743428797e62bf183ebde">GL_CullFace</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a482a3499822c3f36801b146269f2db2c">cullface_back</a>);</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>    }</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span> </div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>    <span class="comment">// used in R_Q1BSP_DrawShadowMap code to check surfacesides[]</span></div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5ab901070f430b33bd3e0bf48d525ad5">r_shadow_shadowmapside</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a>;</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>}</div>
</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span> </div>
<div class="foldopen" id="foldopen01597" data-start="{" data-end="}">
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a00d0fbb6cc4becc92625bcea3a857507"> 1597</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a00d0fbb6cc4becc92625bcea3a857507">R_Shadow_RenderMode_Lighting</a>(<a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transparent</a>, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmapping</a>, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">noselfshadowpass</a>)</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>{</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>    <a class="code hl_function" href="gl__backend_8c.html#ab0845d5ed92717ad1158e8a559db073d">R_Mesh_ResetTextureState</a>();</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transparent</a>)</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>    {</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>        <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[0] = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#ab6e28cd0da86d0623897a480caf26aa8">x</a>;</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>        <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[1] = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a43bf621388acf637d4d3bbc2a2f2d1c0">y</a>;</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>        <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[2] = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a2c03a2d70555c2d93c2623dabd706a4d">width</a>;</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>        <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[3] = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a588496c0ad6b768495bee4c4d8f22979">height</a>;</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>    }</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmapping</a>)</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>        <a class="code hl_function" href="r__shadow_8c.html#a03ef6db3d64682913c33034c6fa47ff3">R_Shadow_SetShadowmapParametersForLight</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">noselfshadowpass</a>);</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>    <a class="code hl_function" href="r__shadow_8c.html#aab840c0d105f7951bbafe35dd8f2f1cc">R_Shadow_RenderMode_Reset</a>();</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>    <a class="code hl_function" href="gl__backend_8c.html#aca3e3f9f03357db16ce588778b258020">GL_BlendFunc</a>(<a class="code hl_define" href="glquake_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a>, <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>);</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transparent</a>)</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>        <a class="code hl_function" href="gl__backend_8c.html#a5d98d0078d5c884b3e382d6ddd7eb2e1">GL_DepthFunc</a>(<a class="code hl_define" href="glquake_8h.html#ac71bf5145721bbb6c3286c70834f4394">GL_EQUAL</a>);</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>    <span class="comment">// do global setup needed for the chosen lighting mode</span></div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">r_shadow_rendermode</a> == <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a8a705347d610f9d1611a45d02d370181">R_SHADOW_RENDERMODE_LIGHT_GLSL</a>)</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>        <a class="code hl_function" href="gl__backend_8c.html#a2a511f73b51c9eca7a2e20b21b543944">GL_ColorMask</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ab7a5e64bc6069ece5f689252683d5e9b">colormask</a>[0], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ab7a5e64bc6069ece5f689252683d5e9b">colormask</a>[1], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ab7a5e64bc6069ece5f689252683d5e9b">colormask</a>[2], 0);</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>    <a class="code hl_variable" href="r__shadow_8c.html#a7939d31dd5a7d473fb7625b64eae3509">r_shadow_usingshadowmap2d</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmapping</a>;</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">r_shadow_rendermode</a> = <a class="code hl_variable" href="r__shadow_8c.html#a98acf1f7275f30b9e00c35d08366a033">r_shadow_lightingrendermode</a>;</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>}</div>
</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span> </div>
<div class="foldopen" id="foldopen01620" data-start="{" data-end="};">
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a71be92ad152f9abe030afe08648c86ba"> 1620</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code hl_variable" href="r__shadow_8c.html#a71be92ad152f9abe030afe08648c86ba">bboxelements</a>[36] =</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>{</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>    5, 1, 3, 5, 3, 7,</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>    6, 2, 0, 6, 0, 4,</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>    7, 3, 2, 7, 2, 6,</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>    4, 0, 1, 4, 1, 5,</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>    4, 5, 7, 4, 7, 6,</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>    1, 0, 2, 1, 2, 3,</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>};</div>
</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span> </div>
<div class="foldopen" id="foldopen01630" data-start="{" data-end="};">
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a96d768bd137d35cb7fa6377b54ec9063"> 1630</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="r__shadow_8c.html#a96d768bd137d35cb7fa6377b54ec9063">bboxpoints</a>[8][3] =</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>{</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>    {-1,-1,-1},</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>    { 1,-1,-1},</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>    {-1, 1,-1},</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>    { 1, 1,-1},</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>    {-1,-1, 1},</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>    { 1,-1, 1},</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>    {-1, 1, 1},</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>    { 1, 1, 1},</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>};</div>
</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span> </div>
<div class="foldopen" id="foldopen01642" data-start="{" data-end="}">
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a6756c2a0bed93299d516312dbd9b834d"> 1642</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a6756c2a0bed93299d516312dbd9b834d">R_Shadow_RenderMode_DrawDeferredLight</a>(<a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmapping</a>)</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>{</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>    <span class="keywordtype">float</span> vertex3f[8*3];</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> *matrix = &amp;<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab89a43403b944e77e37a1e7433472964">matrix_lighttoworld</a>;</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span><span class="comment">// do global setup needed for the chosen lighting mode</span></div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>    <a class="code hl_function" href="r__shadow_8c.html#aab840c0d105f7951bbafe35dd8f2f1cc">R_Shadow_RenderMode_Reset</a>();</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">r_shadow_rendermode</a> = <a class="code hl_variable" href="r__shadow_8c.html#a98acf1f7275f30b9e00c35d08366a033">r_shadow_lightingrendermode</a>;</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>    <a class="code hl_function" href="gl__backend_8h.html#a13799234825714fe81a6a09d9c9c0548">R_EntityMatrix</a>(&amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>);</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>    <a class="code hl_function" href="gl__backend_8c.html#aca3e3f9f03357db16ce588778b258020">GL_BlendFunc</a>(<a class="code hl_define" href="glquake_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a>, <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>);</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a69efc0c4f5d373479bb9487d6bec228f">specularscale</a> &gt; 0 &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#a9b2e5213a19ac569c1e89d8ffaaa7626">r_shadow_gloss</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &gt; 0)</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>        <a class="code hl_function" href="gl__backend_8c.html#ab9979b96d01546862e3ea80ab069c614">R_Mesh_SetRenderTargets</a>(<a class="code hl_variable" href="r__shadow_8c.html#a7239c53ebcb3083ca7bc8d5c2eac37dc">r_shadow_prepasslightingdiffusespecularfbo</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a>, <a class="code hl_variable" href="r__shadow_8c.html#a22ac54cfb268b98642e9d1e877028208">r_shadow_prepasslightingdiffusetexture</a>, <a class="code hl_variable" href="r__shadow_8c.html#a331b3d66802cecbb5b26ed13a429b8b6">r_shadow_prepasslightingspeculartexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>        <a class="code hl_function" href="gl__backend_8c.html#ab9979b96d01546862e3ea80ab069c614">R_Mesh_SetRenderTargets</a>(<a class="code hl_variable" href="r__shadow_8c.html#a240b7bb15f06d555fd4c6e03d511e88a">r_shadow_prepasslightingdiffusefbo</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a>, <a class="code hl_variable" href="r__shadow_8c.html#a22ac54cfb268b98642e9d1e877028208">r_shadow_prepasslightingdiffusetexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span> </div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>    <a class="code hl_variable" href="r__shadow_8c.html#a7939d31dd5a7d473fb7625b64eae3509">r_shadow_usingshadowmap2d</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmapping</a>;</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span> </div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>    <span class="comment">// render the lighting</span></div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>    <a class="code hl_function" href="gl__rmain_8c.html#a6a9a1d6b87daf4b5991847cd90c0887d">R_SetupShader_DeferredLight</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>);</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>        <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(matrix, <a class="code hl_variable" href="r__shadow_8c.html#a96d768bd137d35cb7fa6377b54ec9063">bboxpoints</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], vertex3f + <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>*3);</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>    <a class="code hl_function" href="gl__backend_8c.html#a2a511f73b51c9eca7a2e20b21b543944">GL_ColorMask</a>(1,1,1,1);</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>    <a class="code hl_function" href="gl__backend_8c.html#a369132de82d4015a01e164c63255403f">GL_DepthMask</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>    <a class="code hl_function" href="gl__backend_8c.html#a736b5d13ba47fb7de5dafb73b3026e1a">GL_DepthRange</a>(0, 1);</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>    <a class="code hl_function" href="gl__backend_8c.html#a888e5667bc275712bc1407f459c9e67e">GL_PolygonOffset</a>(0, 0);</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>    <a class="code hl_function" href="gl__backend_8c.html#a712c082566b5939b265260c5cd929033">GL_DepthTest</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>    <a class="code hl_function" href="gl__backend_8c.html#a5d98d0078d5c884b3e382d6ddd7eb2e1">GL_DepthFunc</a>(<a class="code hl_define" href="glquake_8h.html#aa3bfa1f454ff5072bc1b64e7d30e9584">GL_GREATER</a>);</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>    <a class="code hl_function" href="gl__backend_8c.html#a28f12ab6551743428797e62bf183ebde">GL_CullFace</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a482a3499822c3f36801b146269f2db2c">cullface_back</a>);</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>    <a class="code hl_function" href="gl__backend_8c.html#a160faabf0f2b8616f192c5d3046ac477">R_Mesh_PrepareVertices_Vertex3f</a>(8, vertex3f, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>    <a class="code hl_function" href="gl__backend_8c.html#a5fd11a8a3e5cbb27690e870134b36675">R_Mesh_Draw</a>(0, 8, 0, 12, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code hl_variable" href="r__shadow_8c.html#a71be92ad152f9abe030afe08648c86ba">bboxelements</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>}</div>
</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span> </div>
<div class="foldopen" id="foldopen01674" data-start="{" data-end="}">
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ad693ecd5b97a8657e668145bd0249b75"> 1674</a></span><span class="keyword">static</span> <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_function" href="r__shadow_8c.html#ad693ecd5b97a8657e668145bd0249b75">R_Shadow_BounceGrid_CheckEnable</a>(<span class="keywordtype">int</span> flag)</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>{</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">enable</a> = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a1d2dad554d64fe89c965cea311414b51">capable</a> &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#abfb9569e9c4eb3d7d902bbea591a24d4">r_shadow_bouncegrid</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> != 0 &amp;&amp; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>;</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>;</div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light;</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>    <a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight;</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> lightcolor;</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span> </div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>    <span class="comment">// see if there are really any lights to render...</span></div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">enable</a> &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#a1797156202d8d7e1a2442610a777970a">r_shadow_bouncegrid_static</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>    {</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">enable</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> = (<span class="keywordtype">unsigned</span> <a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>); <span class="comment">// checked</span></div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>        {</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>            light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>            <span class="keywordflow">if</span> (!light || !(light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a> &amp; flag))</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>            rtlight = &amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>;</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>            <span class="comment">// when static, we skip styled lights because they tend to change...</span></div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>            <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a86717e6c13a6c77eb41f0f0dd6d2fca6">style</a> &gt; 0)</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>            <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a478dcfe9a294410ade3e764a7905d597">color</a>, (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a03ef425e5912ea3081d21e59478cd954">ambientscale</a> + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad8280f61360048850261e9c3e502c179">diffusescale</a> + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a69efc0c4f5d373479bb9487d6bec228f">specularscale</a>), lightcolor);</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>            <span class="keywordflow">if</span> (!<a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(lightcolor))</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">enable</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>        }</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>    }</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span> </div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">enable</a>;</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>}</div>
</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span> </div>
<div class="foldopen" id="foldopen01708" data-start="{" data-end="}">
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac66be86206739f14d3c6035c32d28b26"> 1708</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ac66be86206739f14d3c6035c32d28b26">R_Shadow_BounceGrid_GenerateSettings</a>(<a class="code hl_struct" href="structr__shadow__bouncegrid__settings__t.html">r_shadow_bouncegrid_settings_t</a> *settings)</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>{</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> s = <a class="code hl_variable" href="r__shadow_8c.html#a1797156202d8d7e1a2442610a777970a">r_shadow_bouncegrid_static</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> != 0;</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>    <span class="keywordtype">float</span> spacing = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(1.0f, s ? <a class="code hl_variable" href="r__shadow_8c.html#a7e5e31d59f5e714bffcbd0aede762f1b">r_shadow_bouncegrid_static_spacing</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> : <a class="code hl_variable" href="r__shadow_8c.html#acc41388e78420294a69dbcfc20a3dbd4">r_shadow_bouncegrid_dynamic_spacing</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, 1024.0f);</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>    <span class="keywordtype">float</span> quality = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0.0001f, (s ? <a class="code hl_variable" href="r__shadow_8c.html#a4e765d143e27a63f01b4818eec6d17ad">r_shadow_bouncegrid_static_quality</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> : <a class="code hl_variable" href="r__shadow_8c.html#ad84a092c3f4d913bd1e68b718b3b5d99">r_shadow_bouncegrid_dynamic_quality</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>), 1024.0f);</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bounceminimumintensity</a> = s ? <a class="code hl_variable" href="r__shadow_8c.html#a7873c73de31a3ad5a895f2c13befcd36">r_shadow_bouncegrid_static_bounceminimumintensity</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> : <a class="code hl_variable" href="r__shadow_8c.html#a74c912ec2e1a65ea07fbb99ad2197498">r_shadow_bouncegrid_dynamic_bounceminimumintensity</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span> </div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>    <span class="comment">// prevent any garbage in alignment padded areas as we&#39;ll be using memcmp</span></div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(settings, 0, <span class="keyword">sizeof</span>(*settings));</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span> </div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>    <span class="comment">// build up a complete collection of the desired settings, so that memcmp can be used to compare parameters</span></div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8d513a7e8aa112d3c13aff3b9c2e494c">staticmode</a>                    = s;</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a6878511fe2646c944e266721092352dd">blur</a>                          = <a class="code hl_variable" href="r__shadow_8c.html#aafa9a61a3167b93b7e3db2a8e48d5812">r_shadow_bouncegrid_blur</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> != 0;</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a45853ca9a1bfb1daf271e6e67c96f5a2">floatcolors</a>                   = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0, <a class="code hl_variable" href="r__shadow_8c.html#ad25ca00832ef2ab9633a450d3ede66cb">r_shadow_bouncegrid_floatcolors</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>, 2);</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ad756b38998171ce24997036307b95d4b">lightpathsize</a>                 = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0.0f, <a class="code hl_variable" href="r__shadow_8c.html#a57dd3198772dbe610732098d0b78726d">r_shadow_bouncegrid_lightpathsize</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, 1024.0f);</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a199fb433d9cbe8e7bbe9f9fb78dcf7d2">directionalshading</a>            = (s ? <a class="code hl_variable" href="r__shadow_8c.html#a51a3a6319e814d45b0966c62c46b7528">r_shadow_bouncegrid_static_directionalshading</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> != 0 : <a class="code hl_variable" href="r__shadow_8c.html#ae87aa6ea0cfb5bc265f8ef7c1ddcd227">r_shadow_bouncegrid_dynamic_directionalshading</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> != 0) &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a6b14b6d8d898cec4fc16b67020812414">allowdirectionalshading</a>;</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a72fe7e17dcb3ee2b40416366d245bad2">dlightparticlemultiplier</a>      = s ? 0 : <a class="code hl_variable" href="r__shadow_8c.html#a43ef251f8f1845074774c5f7306bd0c0">r_shadow_bouncegrid_dynamic_dlightparticlemultiplier</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8747973cb45c8fe9b496b43b7e087b34">hitmodels</a>                     = s ? <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">false</a> : <a class="code hl_variable" href="r__shadow_8c.html#a2b7bcd906c1cdb64193eb99dd589abee">r_shadow_bouncegrid_dynamic_hitmodels</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> != 0;</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a84678707d62b536244f2ecc579e6cf1b">includedirectlighting</a>         = <a class="code hl_variable" href="r__shadow_8c.html#a3003a3ce413694b402afb0f5418d14aa">r_shadow_bouncegrid_includedirectlighting</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> != 0 || <a class="code hl_variable" href="r__shadow_8c.html#abfb9569e9c4eb3d7d902bbea591a24d4">r_shadow_bouncegrid</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> == 2;</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a7420ad1dbb6f581ce36460599c4732ca">lightradiusscale</a>              = (s ? <a class="code hl_variable" href="r__shadow_8c.html#a1b6befd427ebd6277712a04a925f58e1">r_shadow_bouncegrid_static_lightradiusscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> : <a class="code hl_variable" href="r__shadow_8c.html#a7b5a86f8c2c4c9c0d35c4b8d80bf005b">r_shadow_bouncegrid_dynamic_lightradiusscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>);</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a5702438e73be1467f108b9e496ea6113">maxbounce</a>                     = (s ? <a class="code hl_variable" href="r__shadow_8c.html#a19d274f4a09f26bc63ac80625ede0fb3">r_shadow_bouncegrid_static_maxbounce</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> : <a class="code hl_variable" href="r__shadow_8c.html#a44a028698612a93a390f119598e82ec8">r_shadow_bouncegrid_dynamic_maxbounce</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>);</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ac297ceaa68f6a01dad6792ce83ed8968">particlebounceintensity</a>       = <a class="code hl_variable" href="r__shadow_8c.html#a9234de8299b3999ded95f169ddc07c90">r_shadow_bouncegrid_particlebounceintensity</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a813142ee855923b52968936abd4c1559">particleintensity</a>             = <a class="code hl_variable" href="r__shadow_8c.html#a5654cc1c30edf8ffa1b071e08c5d1e53">r_shadow_bouncegrid_particleintensity</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * (settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a199fb433d9cbe8e7bbe9f9fb78dcf7d2">directionalshading</a> ? 4.0f : 1.0f) / 65536.0f;</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ac4b95087fb9dd0229aef6517f29a1286">maxphotons</a>                    = s ? <a class="code hl_variable" href="r__shadow_8c.html#af06c93abec80f9e5931fd21fd440b977">r_shadow_bouncegrid_static_maxphotons</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> : <a class="code hl_variable" href="r__shadow_8c.html#ab18407dfca8827e6dd2e204f6fcd4765">r_shadow_bouncegrid_dynamic_maxphotons</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>;</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a67607d32867d1e30dabf30300545348e">energyperphoton</a>               = 4096.0f / quality;</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[0]                    = spacing;</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[1]                    = spacing;</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[2]                    = spacing;</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a557b9b58d79fcf90f89dd6e628000505">rng_type</a>                      = <a class="code hl_variable" href="r__shadow_8c.html#aa248184b1d78dff49d490c33284d5bd8">r_shadow_bouncegrid_rng_type</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>;</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ae9f101140bddb1b46aa7621675818824">rng_seed</a>                      = <a class="code hl_variable" href="r__shadow_8c.html#a77e03f6897836ffeafb2826cf903cdbd">r_shadow_bouncegrid_rng_seed</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>;</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a29565246dc8e3108fa9f9825d3b57466">bounceminimumintensity2</a>       = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bounceminimumintensity</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bounceminimumintensity</a>;</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a21bf8c8e3f98bb0ba79f184fb2d2c12e">normalizevectors</a>              = <a class="code hl_variable" href="r__shadow_8c.html#ab26bbb86c9c9e2871e0e6a4d85db1e77">r_shadow_bouncegrid_normalizevectors</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> != 0;</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#adf0ef9fc9b1499f7bbb6c09b79d5e107">subsamples</a>                    = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(1, <a class="code hl_variable" href="r__shadow_8c.html#a90c936b84616d29559d3335016cfebdf">r_shadow_bouncegrid_subsamples</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>, 4);</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span> </div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>    <span class="comment">// bound the values for sanity</span></div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ac4b95087fb9dd0229aef6517f29a1286">maxphotons</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(1, settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ac4b95087fb9dd0229aef6517f29a1286">maxphotons</a>, 25000000);</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a7420ad1dbb6f581ce36460599c4732ca">lightradiusscale</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0.0001f, settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a7420ad1dbb6f581ce36460599c4732ca">lightradiusscale</a>, 1024.0f);</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a5702438e73be1467f108b9e496ea6113">maxbounce</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0, settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a5702438e73be1467f108b9e496ea6113">maxbounce</a>, 16);</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[0] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(1, settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[0], 512);</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[1] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(1, settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[1], 512);</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>    settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[2] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(1, settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[2], 512);</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>}</div>
</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span> </div>
<div class="foldopen" id="foldopen01751" data-start="{" data-end="}">
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a162a37b012229cefcc5ee45d146e20ff"> 1751</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a162a37b012229cefcc5ee45d146e20ff">R_Shadow_BounceGrid_UpdateSpacing</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>{</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>    <span class="keywordtype">float</span> m[16];</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>    <span class="keywordtype">int</span> c[4];</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>    <span class="keywordtype">int</span> resolution[3];</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>    <span class="keywordtype">int</span> numpixels;</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> ispacing;</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> maxs = {0,0,0};</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> mins = {0,0,0};</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> spacing;</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>    <a class="code hl_struct" href="structr__shadow__bouncegrid__settings__t.html">r_shadow_bouncegrid_settings_t</a> *settings = &amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>;</div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span> </div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>    <span class="comment">// get the spacing values</span></div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>    spacing[0] = settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[0];</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>    spacing[1] = settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[1];</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>    spacing[2] = settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[2];</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>    ispacing[0] = 1.0f / spacing[0];</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>    ispacing[1] = 1.0f / spacing[1];</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>    ispacing[2] = 1.0f / spacing[2];</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span> </div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>    <span class="comment">// calculate texture size enclosing entire world bounds at the spacing</span></div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>)</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>    {</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>;</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>        <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bounds_set</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>        <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light;</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>        <a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight;</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span> </div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>        <span class="comment">// calculate bounds enclosing world lights as they should be noticably tighter </span></div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>        <span class="comment">// than the world bounds on maps with unlit monster containers (see e1m7 etc)</span></div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> = (<span class="keywordtype">unsigned</span> <a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>); <span class="comment">// checked</span></div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>        {</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>            <span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rtlmins</a>, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rtlmaxs</a>;</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span> </div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>            light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>            <span class="keywordflow">if</span> (!light)</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span> </div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>            rtlight = &amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>;</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rtlmins</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>;</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rtlmaxs</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>;</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span> </div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bounds_set</a>)</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>            {</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>                <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rtlmins</a>, mins);</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>                <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rtlmaxs</a>, maxs);</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bounds_set</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>            }</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>            {</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>                mins[0] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(mins[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rtlmins</a>[0]);</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>                mins[1] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(mins[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rtlmins</a>[1]);</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>                mins[2] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(mins[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rtlmins</a>[2]);</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>                maxs[0] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(maxs[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rtlmaxs</a>[0]);</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>                maxs[1] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(maxs[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rtlmaxs</a>[1]);</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>                maxs[2] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(maxs[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rtlmaxs</a>[2]);</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>            }</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>        }</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span> </div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>        <span class="comment">// limit to no larger than the world bounds</span></div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>        mins[0] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(mins[0], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[0]);</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>        mins[1] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(mins[1], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[1]);</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>        mins[2] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(mins[2], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">normalmins</a>[2]);</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>        maxs[0] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(maxs[0], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[0]);</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>        maxs[1] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(maxs[1], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[1]);</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>        maxs[2] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(maxs[2], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">normalmaxs</a>[2]);</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span> </div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(mins, -2.0f, spacing, mins);</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(maxs, 2.0f, spacing, maxs);</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>    }</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>    {</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>        <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(mins, -1048576.0f, -1048576.0f, -1048576.0f);</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>        <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(maxs,  1048576.0f,  1048576.0f,  1048576.0f);</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>    }</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>    <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(maxs, mins, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>);</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>    <span class="comment">// now we can calculate the resolution we want</span></div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>    c[0] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(<a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>[0] / spacing[0] + 0.5f);</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>    c[1] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(<a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>[1] / spacing[1] + 0.5f);</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>    c[2] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(<a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>[2] / spacing[2] + 0.5f);</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>    <span class="comment">// figure out the exact texture size (honoring power of 2 if required)</span></div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>    resolution[0] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(4, c[0], (<span class="keywordtype">int</span>)<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a1da5ca679bbe12b196fc8af97dac46be">maxtexturesize_3d</a>);</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>    resolution[1] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(4, c[1], (<span class="keywordtype">int</span>)<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a1da5ca679bbe12b196fc8af97dac46be">maxtexturesize_3d</a>);</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>    resolution[2] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(4, c[2], (<span class="keywordtype">int</span>)<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a1da5ca679bbe12b196fc8af97dac46be">maxtexturesize_3d</a>);</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>[0] = spacing[0] * resolution[0];</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>[1] = spacing[1] * resolution[1];</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>[2] = spacing[2] * resolution[2];</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span> </div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>    <span class="comment">// if dynamic we may or may not want to use the world bounds</span></div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>    <span class="comment">// if the dynamic size is smaller than the world bounds, use it instead</span></div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>    <span class="keywordflow">if</span> (!settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8d513a7e8aa112d3c13aff3b9c2e494c">staticmode</a> &amp;&amp; (<a class="code hl_variable" href="r__shadow_8c.html#ae6a16264f1d993fbf7030849abb5ac2a">r_shadow_bouncegrid_dynamic_x</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> * <a class="code hl_variable" href="r__shadow_8c.html#a9fdf894159a51ec01ebcce8ec90bb3e8">r_shadow_bouncegrid_dynamic_y</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> * <a class="code hl_variable" href="r__shadow_8c.html#aca5a5c3ed528732c5986a853d0d5ddd3">r_shadow_bouncegrid_dynamic_z</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &lt; resolution[0] * resolution[1] * resolution[2]))</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>    {</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>        <span class="comment">// we know the resolution we want</span></div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>        c[0] = <a class="code hl_variable" href="r__shadow_8c.html#ae6a16264f1d993fbf7030849abb5ac2a">r_shadow_bouncegrid_dynamic_x</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>;</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>        c[1] = <a class="code hl_variable" href="r__shadow_8c.html#a9fdf894159a51ec01ebcce8ec90bb3e8">r_shadow_bouncegrid_dynamic_y</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>;</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>        c[2] = <a class="code hl_variable" href="r__shadow_8c.html#aca5a5c3ed528732c5986a853d0d5ddd3">r_shadow_bouncegrid_dynamic_z</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>;</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>        <span class="comment">// now we can calculate the texture size</span></div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>        resolution[0] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(4, c[0], (<span class="keywordtype">int</span>)<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a1da5ca679bbe12b196fc8af97dac46be">maxtexturesize_3d</a>);</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>        resolution[1] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(4, c[1], (<span class="keywordtype">int</span>)<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a1da5ca679bbe12b196fc8af97dac46be">maxtexturesize_3d</a>);</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>        resolution[2] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(4, c[2], (<span class="keywordtype">int</span>)<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a1da5ca679bbe12b196fc8af97dac46be">maxtexturesize_3d</a>);</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>        <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>[0] = spacing[0] * resolution[0];</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>        <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>[1] = spacing[1] * resolution[1];</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>        <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>[2] = spacing[2] * resolution[2];</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>        <span class="comment">// center the rendering on the view</span></div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>        mins[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>[0] * ispacing[0] + 0.5f) * spacing[0] - 0.5f * <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>[0];</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>        mins[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>[1] * ispacing[1] + 0.5f) * spacing[1] - 0.5f * <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>[1];</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>        mins[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>[2] * ispacing[2] + 0.5f) * spacing[2] - 0.5f * <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>[2];</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>    }</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span> </div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>    <span class="comment">// recalculate the maxs in case the resolution was not satisfactory</span></div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(mins, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, maxs);</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span> </div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>    <span class="comment">// check if this changed the texture size</span></div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>    <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af6e42792358a36ee9d68ce5c5060e0fa">createtexture</a> = !(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a> &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a16e391324a28bcb1fc08763122eb4349">resolution</a>[0] == resolution[0] &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a16e391324a28bcb1fc08763122eb4349">resolution</a>[1] == resolution[1] &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a16e391324a28bcb1fc08763122eb4349">resolution</a>[2] == resolution[2] &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a8b67e9c1e43b650a0d46f9f9addcbba6">directional</a> == <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a199fb433d9cbe8e7bbe9f9fb78dcf7d2">directionalshading</a>);</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>    <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a8b67e9c1e43b650a0d46f9f9addcbba6">directional</a> = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a199fb433d9cbe8e7bbe9f9fb78dcf7d2">directionalshading</a>;</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(mins, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a28178f6b78dc7dac499235f44acea3f8">mins</a>);</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(maxs, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a17f66a105879ac5abf878d9ec6ffadb0">maxs</a>);</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a0b3c36a7a180aaa22c63a32977d365c7">size</a>);</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(spacing, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#abff20fdcae2c335a310235f60e86197d">spacing</a>);</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(ispacing, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9295daf41c7de4ed219bf71ab2946502">ispacing</a>);</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(resolution, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a16e391324a28bcb1fc08763122eb4349">resolution</a>);</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span> </div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>    <span class="comment">// reallocate pixels for this update if needed...</span></div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>    <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a26f1540c538f115e11043b6e05a8f540">pixelbands</a> = settings-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a199fb433d9cbe8e7bbe9f9fb78dcf7d2">directionalshading</a> ? 8 : 1;</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>    <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a42eda904d89aba6c648513454394944a">pixelsperband</a> = resolution[0]*resolution[1]*resolution[2];</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>    <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a83cdb6ec9024bf830f01d09d9465124a">bytesperband</a> = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a42eda904d89aba6c648513454394944a">pixelsperband</a>*4;</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>    numpixels = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a42eda904d89aba6c648513454394944a">pixelsperband</a>*<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a26f1540c538f115e11043b6e05a8f540">pixelbands</a>;</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a513a8bcbc2369fbaf76f1ed6db270064">numpixels</a> != numpixels)</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>    {</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a>) { <a class="code hl_function" href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a>);<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; }</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span> </div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>        <a class="code hl_function" href="r__shadow_8c.html#a2e12c3123d6cad1786cdbf7001ce3207">R_Shadow_BounceGrid_FreeHighPixels</a>();</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span> </div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a513a8bcbc2369fbaf76f1ed6db270064">numpixels</a> = numpixels;</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>    }</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span> </div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>    <span class="comment">// update the bouncegrid matrix to put it in the world properly</span></div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(m, 0, <span class="keyword">sizeof</span>(m));</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>    m[0] = 1.0f / <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a0b3c36a7a180aaa22c63a32977d365c7">size</a>[0];</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>    m[3] = -<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a28178f6b78dc7dac499235f44acea3f8">mins</a>[0] * m[0];</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>    m[5] = 1.0f / <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a0b3c36a7a180aaa22c63a32977d365c7">size</a>[1];</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>    m[7] = -<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a28178f6b78dc7dac499235f44acea3f8">mins</a>[1] * m[5];</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>    m[10] = 1.0f / <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a0b3c36a7a180aaa22c63a32977d365c7">size</a>[2];</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>    m[11] = -<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a28178f6b78dc7dac499235f44acea3f8">mins</a>[2] * m[10];</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>    m[15] = 1.0f;</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>    <a class="code hl_function" href="matrixlib_8c.html#a4ca4d9f16fd1375dcec70c1411b5cb52">Matrix4x4_FromArrayFloatD3D</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af23bd533884cf387a5aac4b57d3fbbd7">matrix</a>, m);</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>}</div>
</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span> </div>
<div class="foldopen" id="foldopen01902" data-start="{" data-end="}">
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5078f7b2b8e1ef5cfcefa05402f06831"> 1902</a></span><span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code hl_function" href="r__shadow_8c.html#a5078f7b2b8e1ef5cfcefa05402f06831">R_Shadow_BounceGrid_RefractiveIndexAtPoint</a>(<a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">point</a>)</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>{</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>    <span class="comment">// check material at shadoworigin to see what the initial refractive index should be</span></div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>    <span class="keywordtype">int</span> hitsupercontentsmask = <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a> | <a class="code hl_define" href="bspfile_8h.html#a86cebf49778299337e696bf0abc2d046">SUPERCONTENTS_LIQUIDSMASK</a>;</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>    <span class="keywordtype">int</span> skipsupercontentsmask = 0;</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>    <span class="keywordtype">int</span> skipmaterialflagsmask = <a class="code hl_define" href="model__brush_8h.html#afd200d146636dc15acd310fa22c6b279">MATERIALFLAG_CUSTOMBLEND</a>;</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>    <a class="code hl_struct" href="structtrace__t.html">trace_t</a> trace = <a class="code hl_function" href="cl__collision_8c.html#a7ff233acc35349210e7a5790cabbf8ee">CL_TracePoint</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">point</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8d513a7e8aa112d3c13aff3b9c2e494c">staticmode</a> ? <a class="code hl_define" href="world_8h.html#a90df952ad5c2daedd0295eb3a7ecae12">MOVE_WORLDONLY</a> : (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8747973cb45c8fe9b496b43b7e087b34">hitmodels</a> ? <a class="code hl_define" href="world_8h.html#a7ee9b968e24c893e13a349b765b5096b">MOVE_HITMODEL</a> : <a class="code hl_define" href="world_8h.html#ad9b31bede6128044de93b93641630437">MOVE_NOMONSTERS</a>), <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, hitsupercontentsmask, skipsupercontentsmask, skipmaterialflagsmask, <span class="keyword">true</span>, <span class="keyword">false</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>    <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structtrace__t.html#a446c2c0421931cabc9e437e285453505">starttexture</a> &amp;&amp; (trace.<a class="code hl_variable" href="structtrace__t.html#a446c2c0421931cabc9e437e285453505">starttexture</a>-&gt;currentmaterialflags &amp; (<a class="code hl_define" href="model__brush_8h.html#a22de374860637bd38095828d776a3028">MATERIALFLAG_REFRACTION</a> | <a class="code hl_define" href="model__brush_8h.html#a7055dcfb7e841b4f8df429bc32e9212f">MATERIALFLAG_WATERSHADER</a>)))</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>        <span class="keywordflow">return</span> trace.<a class="code hl_variable" href="structtrace__t.html#a446c2c0421931cabc9e437e285453505">starttexture</a>-&gt;refractive_index;</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structtrace__t.html#a78edab108c78f91aaa4aec7aee8b898a">startsupercontents</a> &amp; <a class="code hl_define" href="bspfile_8h.html#a86cebf49778299337e696bf0abc2d046">SUPERCONTENTS_LIQUIDSMASK</a>)</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>        <span class="keywordflow">return</span> 1.333f; <span class="comment">// water</span></div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>        <span class="keywordflow">return</span> 1.0003f; <span class="comment">// air</span></div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>}</div>
</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span> </div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span><span class="comment">// enumerate world rtlights and sum the overall amount of light in the world,</span></div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span><span class="comment">// from that we can calculate a scaling factor to fairly distribute photons</span></div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span><span class="comment">// to all the lights</span></div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span><span class="comment">//</span></div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span><span class="comment">// this modifies rtlight-&gt;photoncolor and rtlight-&gt;photons</span></div>
<div class="foldopen" id="foldopen01922" data-start="{" data-end="}">
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aaf4fb1a43b7e6335253c0f3a68d6e8ca"> 1922</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#aaf4fb1a43b7e6335253c0f3a68d6e8ca">R_Shadow_BounceGrid_AssignPhotons_Task</a>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a> *t)</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>{</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>    <span class="comment">// get the range of light numbers we&#39;ll be looping over:</span></div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>    <span class="comment">// range = static lights</span></div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>    <span class="comment">// range1 = dynamic lights (optional)</span></div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>    <span class="comment">// range2 = range + range1</span></div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> = (<span class="keywordtype">unsigned</span> <a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>); <span class="comment">// checked</span></div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range1</a> = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8d513a7e8aa112d3c13aff3b9c2e494c">staticmode</a> ? 0 : <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a0d2e420f14635b0aff07275fa6b74d82">numlights</a>;</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range2</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range1</a>;</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>    <span class="keywordtype">int</span> flag = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ad6fc2a07d8d706f5daf13c5849db84fc">rtworld</a> ? <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a> : <a class="code hl_define" href="client_8h.html#a02b341fb62e7f8268a5f7f684ab0f2f2">LIGHTFLAG_NORMALMODE</a>;</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span> </div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">normalphotonscaling</a>;</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonscaling</a>;</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonintensity</a>;</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photoncount</a> = 0.0f;</div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightintensity</a>;</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>    <span class="keywordtype">float</span> radius;</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>    <span class="keywordtype">float</span> s;</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a>;</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> cullmins;</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> cullmaxs;</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>;</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light;</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>    <a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight;</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shootparticles</a>;</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotparticles</a>;</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>    <span class="keywordtype">float</span> bounceminimumintensity2;</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>    <span class="keywordtype">float</span> startrefractiveindex;</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">seed</a>;</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>    <a class="code hl_struct" href="structrandomseed__t.html">randomseed_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">randomseed</a>;</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">baseshotcolor</a>;</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span> </div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">normalphotonscaling</a> = 1.0f / <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0000001f, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a67607d32867d1e30dabf30300545348e">energyperphoton</a>);</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range2</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>    {</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>)</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>        {</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>            light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *)<a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>            <span class="keywordflow">if</span> (!light)</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>            rtlight = &amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>;</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>            <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad693ee6a96c479120992214f8a3702f5">bouncegrid_photoncolor</a>);</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>            rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac93c51702312e67d26a545caaea9a286">bouncegrid_photons</a> = 0;</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>            rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac87b49cfb5af0aa6822590972ed574d1">bouncegrid_hits</a> = 0;</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>            rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a33614e6f1e8d62a71d79e57a9b3cf80e">bouncegrid_traces</a> = 0;</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>            rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9e0c20f5fffcd612cff745e2bd7a8fa7">bouncegrid_effectiveradius</a> = 0;</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>            <span class="keywordflow">if</span> (!(light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a> &amp; flag))</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8d513a7e8aa112d3c13aff3b9c2e494c">staticmode</a>)</div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>            {</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>                <span class="comment">// when static, we skip styled lights because they tend to change...</span></div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>                <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a86717e6c13a6c77eb41f0f0dd6d2fca6">style</a> &gt; 0 &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#abfb9569e9c4eb3d7d902bbea591a24d4">r_shadow_bouncegrid</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> != 2)</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>            }</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a374db1ed8684badcb0995878fc9b4300">r_shadow_debuglight</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &gt;= 0 &amp;&amp; (<span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> != <a class="code hl_variable" href="r__shadow_8c.html#a374db1ed8684badcb0995878fc9b4300">r_shadow_debuglight</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>        }</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>        {</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>            rtlight = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aec6438e3812387c92681237d33bfe46f">lights</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>];</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>            <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad693ee6a96c479120992214f8a3702f5">bouncegrid_photoncolor</a>);</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>            rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac93c51702312e67d26a545caaea9a286">bouncegrid_photons</a> = 0;</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>            rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac87b49cfb5af0aa6822590972ed574d1">bouncegrid_hits</a> = 0;</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>            rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a33614e6f1e8d62a71d79e57a9b3cf80e">bouncegrid_traces</a> = 0;</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>            rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9e0c20f5fffcd612cff745e2bd7a8fa7">bouncegrid_effectiveradius</a> = 0;</div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>        }</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>        <span class="comment">// draw only visible lights (major speedup)</span></div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>        radius = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a> * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a7420ad1dbb6f581ce36460599c4732ca">lightradiusscale</a>;</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>        cullmins[0] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[0] - radius;</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>        cullmins[1] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[1] - radius;</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>        cullmins[2] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[2] - radius;</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>        cullmaxs[0] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[0] + radius;</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>        cullmaxs[1] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[1] + radius;</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>        cullmaxs[2] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[2] + radius;</div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>        <a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a> = <a class="code hl_variable" href="r__shadow_8c.html#a8b27974ce25cb2c28bbdc15bfb50f20f">r_shadow_lightintensityscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a03ef425e5912ea3081d21e59478cd954">ambientscale</a> + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad8280f61360048850261e9c3e502c179">diffusescale</a> + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a69efc0c4f5d373479bb9487d6bec228f">specularscale</a>);</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8d513a7e8aa112d3c13aff3b9c2e494c">staticmode</a>)</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>        {</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>            <span class="comment">// skip if the expanded light box does not touch any visible leafs</span></div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a></div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>                &amp;&amp; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a03c8c1a0218fe2b32ea5d039ad0e1932">BoxTouchingVisibleLeafs</a></div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>                &amp;&amp; !<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a03c8c1a0218fe2b32ea5d039ad0e1932">BoxTouchingVisibleLeafs</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a1fe645bfc26ff5aef11c6be3db359a11">viewcache</a>.<a class="code hl_variable" href="structr__refdef__viewcache__t.html#a307e3b8919e542344422bf08579c7bfa">world_leafvisible</a>, cullmins, cullmaxs))</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>            <span class="comment">// skip if the expanded light box is not visible to traceline</span></div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>            <span class="comment">// note that PrepareLight already did this check but for a smaller box, so we</span></div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>            <span class="comment">// end up casting more traces per frame per light when using bouncegrid, which</span></div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>            <span class="comment">// is probably fine (and they use the same timer)</span></div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a02b2e2feca78908352ada34d75d81317">r_shadow_culllights_trace</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>            {</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>                <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a51044efd43b63e9d1ae4cac917a88f36">trace_timer</a> != <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> &amp;&amp; <a class="code hl_function" href="gl__rmain_8c.html#a0c00b6cff8149799615236dd08a34616">R_CanSeeBox</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a51044efd43b63e9d1ae4cac917a88f36">trace_timer</a> == 0 ? <a class="code hl_variable" href="r__shadow_8c.html#ae2644f027256da38698199b0785682af">r_shadow_culllights_trace_tempsamples</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> : <a class="code hl_variable" href="r__shadow_8c.html#a3d32cd502c430d47379019c578c9375e">r_shadow_culllights_trace_samples</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7a09edeeb5508e0a09dbf3c9ebc425d3">r_shadow_culllights_trace_eyejitter</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <a class="code hl_variable" href="r__shadow_8c.html#a0dbe98d5b5b0ab64f5a82216b6b914ea">r_shadow_culllights_trace_enlarge</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <a class="code hl_variable" href="r__shadow_8c.html#a11c04eaa165865bb30ace640532be7ff">r_shadow_culllights_trace_expand</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7c6008b845bf6e182e4ae65068e0ee31">r_shadow_culllights_trace_pad</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>))</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>                    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a51044efd43b63e9d1ae4cac917a88f36">trace_timer</a> = <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a>;</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> - rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a51044efd43b63e9d1ae4cac917a88f36">trace_timer</a> &gt; <a class="code hl_variable" href="r__shadow_8c.html#ab5e08902e85373b0756014349a87f244">r_shadow_culllights_trace_delay</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>)</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>            }</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>            <span class="comment">// skip if expanded light box is offscreen</span></div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="gl__rmain_8c.html#ad828a2865ae4baf75678ea5ba4e74242">R_CullFrustum</a>(cullmins, cullmaxs))</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>            <span class="comment">// skip if overall light intensity is zero</span></div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a> * <a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a478dcfe9a294410ade3e764a7905d597">color</a>) == 0.0f)</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>        }</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>        <span class="comment">// a light that does not emit any light before style is applied, can be</span></div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>        <span class="comment">// skipped entirely (it may just be a corona)</span></div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a> == 0.0f || <a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a478dcfe9a294410ade3e764a7905d597">color</a>) == 0.0f)</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>        <a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a> *= ((rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a86717e6c13a6c77eb41f0f0dd6d2fca6">style</a> &gt;= 0 &amp;&amp; rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a86717e6c13a6c77eb41f0f0dd6d2fca6">style</a> &lt; <a class="code hl_define" href="qdefs_8h.html#a48b85f1ccb414316c117e943ba927f19">MAX_LIGHTSTYLES</a>) ? <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a660519b32b5ce0399970d9869890ab87">rtlightstylevalue</a>[rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a86717e6c13a6c77eb41f0f0dd6d2fca6">style</a>] : 1);</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>        <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a478dcfe9a294410ade3e764a7905d597">color</a>, <a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad693ee6a96c479120992214f8a3702f5">bouncegrid_photoncolor</a>);</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>        <span class="comment">// skip lights that will emit no photons</span></div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad693ee6a96c479120992214f8a3702f5">bouncegrid_photoncolor</a>))</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>        <span class="comment">// shoot particles from this light</span></div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>        <span class="comment">// use a calculation for the number of particles that will not</span></div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>        <span class="comment">// vary with lightstyle, otherwise we get randomized particle</span></div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>        <span class="comment">// distribution, the seeded random is only consistent for a</span></div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>        <span class="comment">// consistent number of particles on this light...</span></div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>        s = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightintensity</a> = <a class="code hl_define" href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a478dcfe9a294410ade3e764a7905d597">color</a>) * (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a03ef425e5912ea3081d21e59478cd954">ambientscale</a> + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad8280f61360048850261e9c3e502c179">diffusescale</a> + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a69efc0c4f5d373479bb9487d6bec228f">specularscale</a>);</div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>)</div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightintensity</a> *= <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a72fe7e17dcb3ee2b40416366d245bad2">dlightparticlemultiplier</a>;</div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac93c51702312e67d26a545caaea9a286">bouncegrid_photons</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightintensity</a> * s * s * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">normalphotonscaling</a>;</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photoncount</a> += rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac93c51702312e67d26a545caaea9a286">bouncegrid_photons</a>;</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>        <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad693ee6a96c479120992214f8a3702f5">bouncegrid_photoncolor</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a813142ee855923b52968936abd4c1559">particleintensity</a> * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a67607d32867d1e30dabf30300545348e">energyperphoton</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad693ee6a96c479120992214f8a3702f5">bouncegrid_photoncolor</a>);</div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>        <span class="comment">// if the lightstyle happens to be off right now, we can skip actually</span></div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>        <span class="comment">// firing the photons, but we did have to count them in the total.</span></div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>        <span class="comment">//if (VectorLength2(rtlight-&gt;photoncolor) == 0.0f)</span></div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>        <span class="comment">//  rtlight-&gt;bouncegrid_photons = 0;</span></div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>    }</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>    <span class="comment">// the user provided an energyperphoton value which we try to use</span></div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>    <span class="comment">// if that results in too many photons to shoot this frame, then we cap it</span></div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>    <span class="comment">// which causes photons to appear/disappear from frame to frame, so we don&#39;t</span></div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>    <span class="comment">// like doing that in the typical case</span></div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonscaling</a> = 1.0f;</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonintensity</a> = 1.0f;</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photoncount</a> &gt; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ac4b95087fb9dd0229aef6517f29a1286">maxphotons</a>)</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>    {</div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonscaling</a> = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ac4b95087fb9dd0229aef6517f29a1286">maxphotons</a> / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photoncount</a>;</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonintensity</a> = 1.0f / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonscaling</a>;</div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>    }</div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span> </div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>    <span class="comment">// modify the lights to reflect our computed scaling</span></div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range2</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>    {</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>)</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>        {</div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>            light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *)<a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>            <span class="keywordflow">if</span> (!light)</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>            rtlight = &amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>;</div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span>        }</div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>            rtlight = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aec6438e3812387c92681237d33bfe46f">lights</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>];</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac93c51702312e67d26a545caaea9a286">bouncegrid_photons</a> *= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonscaling</a>;</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>        <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad693ee6a96c479120992214f8a3702f5">bouncegrid_photoncolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonintensity</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad693ee6a96c479120992214f8a3702f5">bouncegrid_photoncolor</a>);</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>    }</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span> </div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>    <span class="comment">// compute a seed for the unstable random modes</span></div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>    <a class="code hl_function" href="mathlib_8c.html#a29120a8a83f3d44b83c77ee8c508055f">Math_RandomSeed_FromInts</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">randomseed</a>, 0, 0, 0, <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> * 1000.0);</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">seed</a> = <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> * 1000.0;</div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span> </div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range2</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>    {</div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>)</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>        {</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>            light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *)<a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>            <span class="keywordflow">if</span> (!light)</div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>            rtlight = &amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>;</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>        }</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span>            rtlight = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aec6438e3812387c92681237d33bfe46f">lights</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>];</div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span>        <span class="comment">// note that this code used to keep track of residual photons and</span></div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>        <span class="comment">// distribute them evenly to achieve exactly a desired photon count,</span></div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>        <span class="comment">// but that caused unwanted flickering in dynamic mode</span></div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shootparticles</a> = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac93c51702312e67d26a545caaea9a286">bouncegrid_photons</a>);</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>        <span class="comment">// skip if we won&#39;t be shooting any photons</span></div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shootparticles</a>)</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>        radius = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a> * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a7420ad1dbb6f581ce36460599c4732ca">lightradiusscale</a>;</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>        <span class="comment">//s = settings.particleintensity / shootparticles;</span></div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span>        <span class="comment">//VectorScale(rtlight-&gt;bouncegrid_photoncolor, s, baseshotcolor);</span></div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>        <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad693ee6a96c479120992214f8a3702f5">bouncegrid_photoncolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">baseshotcolor</a>);</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">baseshotcolor</a>) &lt;= 0.0f)</div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>        <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#acb0c53994baa529557477269d81d5507">stats</a>[<a class="code hl_enumvalue" href="r__stats_8h.html#ae611154931c203d788794752dda991f8a3a2af959be4b0acf8b543e4eb8618407">r_stat_bouncegrid_lights</a>]++;</div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>        <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#acb0c53994baa529557477269d81d5507">stats</a>[<a class="code hl_enumvalue" href="r__stats_8h.html#ae611154931c203d788794752dda991f8a1380d12ec2d5d6a01857e928761fd3cc">r_stat_bouncegrid_particles</a>] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shootparticles</a>;</div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>        <span class="comment">// we stop caring about bounces once the brightness goes below this fraction of the original intensity</span></div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>        bounceminimumintensity2 = <a class="code hl_define" href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">baseshotcolor</a>) * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a29565246dc8e3108fa9f9825d3b57466">bounceminimumintensity2</a>;</div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span> </div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>        <span class="comment">// check material at shadoworigin to see what the initial refractive index should be</span></div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>        startrefractiveindex = <a class="code hl_function" href="r__shadow_8c.html#a5078f7b2b8e1ef5cfcefa05402f06831">R_Shadow_BounceGrid_RefractiveIndexAtPoint</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>);</div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span> </div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>        <span class="comment">// for seeded random we start the RNG with the position of the light</span></div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ae9f101140bddb1b46aa7621675818824">rng_seed</a> &gt;= 0)</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>        {</div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>            <span class="keyword">union</span></div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span>            {</div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>[4];</div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>                <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>[4];</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>            }</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>            u;</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span>            u.f[0] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[0];</div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>            u.f[1] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[1];</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>            u.f[2] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[2];</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>            u.f[3] = 1;</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>            <span class="keywordflow">switch</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a557b9b58d79fcf90f89dd6e628000505">rng_type</a>)</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>            {</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>            <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>                <span class="comment">// we have to shift the seed provided by the user because the result must be odd</span></div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>                <a class="code hl_function" href="mathlib_8c.html#a29120a8a83f3d44b83c77ee8c508055f">Math_RandomSeed_FromInts</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">randomseed</a>, u.i[0], u.i[1], u.i[2], u.i[3] ^ (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ae9f101140bddb1b46aa7621675818824">rng_seed</a> &lt;&lt; 1));</div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">seed</a> = u.i[0] ^ u.i[1] ^ u.i[2] ^ u.i[3] ^ <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ae9f101140bddb1b46aa7621675818824">rng_seed</a>;</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>            }</div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>        }</div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span> </div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotparticles</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotparticles</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shootparticles</a> &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aeee3bca7fc4e2365e4f916ed115165a3">numphotons</a> &lt; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ac4b95087fb9dd0229aef6517f29a1286">maxphotons</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotparticles</a>++)</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>        {</div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>            <a class="code hl_struct" href="structr__shadow__bouncegrid__photon__t.html">r_shadow_bouncegrid_photon_t</a> *p = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ae4981b1554885bab7fd99847a44ecb23">photons</a> + <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aeee3bca7fc4e2365e4f916ed115165a3">numphotons</a>++;</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">baseshotcolor</a>, p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#a1e13b4d7780f918795fcef34a2c3b0e7">color</a>);</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#aa30adc25920a8d6a532d0aca3afdbc80">start</a>);</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>            <span class="keywordflow">switch</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a557b9b58d79fcf90f89dd6e628000505">rng_type</a>)</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span>            {</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>            <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>                <span class="comment">// figure out a random direction for the initial photon to go</span></div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>                <a class="code hl_define" href="mathlib_8h.html#a95f7e689aded79b60b2aceb26116025c">VectorLehmerRandom</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">randomseed</a>, p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#a05571edab24da8207e4283a614e4e838">end</a>);</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>                <span class="comment">// figure out a random direction for the initial photon to go</span></div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>                <a class="code hl_define" href="mathlib_8h.html#ab686767cbceb9857beed1888e7ed58be">VectorCheeseRandom</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">seed</a>, p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#a05571edab24da8207e4283a614e4e838">end</a>);</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>            }</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span> </div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>            <span class="comment">// we want a uniform distribution spherically, not merely within the sphere</span></div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a21bf8c8e3f98bb0ba79f184fb2d2c12e">normalizevectors</a>)</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>                <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#a05571edab24da8207e4283a614e4e838">end</a>);</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span> </div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>            <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#aa30adc25920a8d6a532d0aca3afdbc80">start</a>, radius, p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#a05571edab24da8207e4283a614e4e838">end</a>, p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#a05571edab24da8207e4283a614e4e838">end</a>);</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>            p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#afda0df55b963c68e191aebd3bd734466">bounceminimumintensity2</a> = bounceminimumintensity2;</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>            p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#aae3b4c1ebab0d42c36562bff43664bec">startrefractiveindex</a> = startrefractiveindex;</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>            p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#af71eecd31b7a6b25a935ea88e39c01f6">numpaths</a> = 0;</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>        }</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>    }</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span> </div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>    t-&gt;<a class="code hl_variable" href="structtaskqueue__task__t.html#abd75c1628f072fbcab8138627c465383">done</a> = 1;</div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>}</div>
</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span> </div>
<div class="foldopen" id="foldopen02170" data-start="{" data-end="}">
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a2ac98c9ce0bd2f311fece91216a3dc60"> 2170</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a2ac98c9ce0bd2f311fece91216a3dc60">R_Shadow_BounceGrid_Slice</a>(<span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zi</a>)</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>{</div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>    <span class="keywordtype">float</span> *highpixels = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a2a1127f6d6a8017ef9f836a6c20749e1">highpixels</a>;</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">xi</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">yi</a>; <span class="comment">// pixel increments</span></div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[32] = { 0 };</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>    <span class="keywordtype">float</span> radius = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ad756b38998171ce24997036307b95d4b">lightpathsize</a>;</div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>    <span class="keywordtype">float</span> iradius = 1.0f / radius;</div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemins</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemaxs</a>[3];</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>    <span class="keywordtype">int</span> resolution[3];</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>    <span class="keywordtype">int</span> pixelsperband = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a42eda904d89aba6c648513454394944a">pixelsperband</a>;</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>    <span class="keywordtype">int</span> pixelbands = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a26f1540c538f115e11043b6e05a8f540">pixelbands</a>;</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonindex</a>;</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a1f94d24932a88c1767fcea5e56bfef73">samples</a> = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#adf0ef9fc9b1499f7bbb6c09b79d5e107">subsamples</a>;</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">isamples</a> = 1.0f / <a class="code hl_variable" href="glquake_8h.html#a1f94d24932a88c1767fcea5e56bfef73">samples</a>;</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplescolorscale</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">isamples</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">isamples</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">isamples</a>;</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span> </div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>    <span class="comment">// we use these a lot, so get a local copy</span></div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a16e391324a28bcb1fc08763122eb4349">resolution</a>, resolution);</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span> </div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonindex</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonindex</a> &lt; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aeee3bca7fc4e2365e4f916ed115165a3">numphotons</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonindex</a>++)</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>    {</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>        <a class="code hl_struct" href="structr__shadow__bouncegrid__photon__t.html">r_shadow_bouncegrid_photon_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photon</a> = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ae4981b1554885bab7fd99847a44ecb23">photons</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photonindex</a>;</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathindex</a>;</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathindex</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photon</a>-&gt;numpaths; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathindex</a>++)</div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>        {</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>            <a class="code hl_struct" href="structr__shadow__bouncegrid__photon__path__t.html">r_shadow_bouncegrid_photon_path_t</a> *path = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">photon</a>-&gt;paths + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathindex</a>;</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathstart</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathend</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmins</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmaxs</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdelta</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathlength2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathilength</a>;</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span> </div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>            <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(path-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__path__t.html#abd593ae4ee39b58e1a678fd522bc9dd8">start</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a28178f6b78dc7dac499235f44acea3f8">mins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathstart</a>);</div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>            <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(path-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__path__t.html#ac39875e3543070e359bb7de28bc3b713">end</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a28178f6b78dc7dac499235f44acea3f8">mins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathend</a>);</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span> </div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmins</a>[2] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathstart</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathend</a>[2]);</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemins</a>[2] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmins</a>[2] - radius) * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9295daf41c7de4ed219bf71ab2946502">ispacing</a>[2]);</div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmaxs</a>[2] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathstart</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathend</a>[2]);</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemaxs</a>[2] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmaxs</a>[2] + radius) * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9295daf41c7de4ed219bf71ab2946502">ispacing</a>[2] + 1);</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span> </div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>            <span class="comment">// skip if the path doesn&#39;t touch this slice</span></div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zi</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemins</a>[2] || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zi</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemaxs</a>[2])</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span> </div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmins</a>[0] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathstart</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathend</a>[0]);</div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemins</a>[0] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmins</a>[0] - radius) * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9295daf41c7de4ed219bf71ab2946502">ispacing</a>[0]);</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemins</a>[0] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemins</a>[0], 1);</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmaxs</a>[0] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathstart</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathend</a>[0]);</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemaxs</a>[0] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmaxs</a>[0] + radius) * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9295daf41c7de4ed219bf71ab2946502">ispacing</a>[0]);</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemaxs</a>[0] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemaxs</a>[0], resolution[0] - 1);</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span> </div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmins</a>[1] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathstart</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathend</a>[1]);</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemins</a>[1] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmins</a>[1] - radius) * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9295daf41c7de4ed219bf71ab2946502">ispacing</a>[1] + 1);</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemins</a>[1] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemins</a>[1], 1);</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmaxs</a>[1] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathstart</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathend</a>[1]);</div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemaxs</a>[1] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathmaxs</a>[1] + radius) * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9295daf41c7de4ed219bf71ab2946502">ispacing</a>[1] + 1);</div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemaxs</a>[1] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemaxs</a>[1], resolution[1] - 1);</div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span> </div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>            <span class="comment">// skip if the path is out of bounds on X or Y</span></div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemins</a>[0] &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemaxs</a>[0] || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemins</a>[1] &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemaxs</a>[1])</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span> </div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>            <span class="comment">// calculate second order spherical harmonics values (average, slopeX, slopeY, slopeZ)</span></div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>            <span class="comment">// accumulate average shotcolor</span></div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>            <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathend</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathstart</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdelta</a>);</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathlength2</a> = <a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdelta</a>);</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathilength</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathlength2</a> &gt; 0.0f ? 1.0f / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathlength2</a>) : 0.0f;</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span>            <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdelta</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathilength</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>);</div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>            <span class="comment">// the color is scaled by the number of subsamples</span></div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] = path-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__path__t.html#a09991f97df28c319435a858fdd6ab413">color</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplescolorscale</a>;</div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] = path-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__path__t.html#a09991f97df28c319435a858fdd6ab413">color</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplescolorscale</a>;</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] = path-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__path__t.html#a09991f97df28c319435a858fdd6ab413">color</a>[2] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">samplescolorscale</a>;</div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[3] = 0.0f;</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>            <span class="keywordflow">if</span> (pixelbands &gt; 1)</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>            {</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>                <span class="comment">// store bentnormal in case the shader has a use for it,</span></div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>                <span class="comment">// bentnormal is an intensity-weighted average of the directions,</span></div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span>                <span class="comment">// and will be normalized on conversion to texture pixels.</span></div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>                <span class="keywordtype">float</span> <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> = <a class="code hl_define" href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[4] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[0] * <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>;</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[5] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[1] * <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>;</div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[6] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[2] * <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>;</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[7] = <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>;</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>                <span class="comment">// for each color component (R, G, B) calculate the amount that a</span></div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>                <span class="comment">// direction contributes</span></div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[8] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[0]);</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[9] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[1]);</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[10] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[2]);</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[11] = 0.0f;</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[12] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[0]);</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[13] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[1]);</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[14] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[2]);</div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[15] = 0.0f;</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[16] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[0]);</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[17] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[1]);</div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[18] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[2]);</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[19] = 0.0f;</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span>                <span class="comment">// and do the same for negative directions</span></div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[20] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[0]);</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[21] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[1]);</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[22] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[2]);</div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[23] = 0.0f;</div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[24] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[0]);</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[25] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[1]);</div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[26] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[2]);</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[27] = 0.0f;</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[28] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[0]);</div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[29] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[1]);</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[30] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0.0f, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>[2]);</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[31] = 0.0f;</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>            }</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span> </div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">yi</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemins</a>[1]; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">yi</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemaxs</a>[1]; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">yi</a>++)</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>            {</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span>                <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">xi</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemins</a>[0]; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">xi</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slicemaxs</a>[0]; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">xi</a>++)</div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>                {</div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>                    <span class="keywordtype">float</span> sample[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diff</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nearest</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">along</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">distance2</a>;</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>                    <span class="keywordtype">float</span> *p = highpixels + 4 * ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zi</a> * resolution[1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">yi</a>) * resolution[0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">xi</a>);</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>                    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">xs</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ys</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zs</a>;</div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>                    <span class="comment">// loop over the subsamples</span></div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>                    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zs</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zs</a> &lt; <a class="code hl_variable" href="glquake_8h.html#a1f94d24932a88c1767fcea5e56bfef73">samples</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zs</a>++)</div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>                    {</div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>                        sample[2] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zi</a> + (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zs</a> + 0.5f) * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">isamples</a>) * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#abff20fdcae2c335a310235f60e86197d">spacing</a>[2];</div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>                        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ys</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ys</a> &lt; <a class="code hl_variable" href="glquake_8h.html#a1f94d24932a88c1767fcea5e56bfef73">samples</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ys</a>++)</div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>                        {</div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>                            sample[1] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">yi</a> + (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ys</a> + 0.5f) * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">isamples</a>) * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#abff20fdcae2c335a310235f60e86197d">spacing</a>[1];</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>                            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">xs</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">xs</a> &lt; <a class="code hl_variable" href="glquake_8h.html#a1f94d24932a88c1767fcea5e56bfef73">samples</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">xs</a>++)</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>                            {</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>                                sample[0] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">xi</a> + (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">xs</a> + 0.5f) * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">isamples</a>) * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#abff20fdcae2c335a310235f60e86197d">spacing</a>[0];</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span> </div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>                                <span class="comment">// measure distance from subsample to line segment and see if it is within radius</span></div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>                                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">along</a> = <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(sample, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathdir</a>) * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathilength</a>;</div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>                                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">along</a> &lt;= 0)</div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>                                    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathstart</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nearest</a>);</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">along</a> &gt;= 1)</div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>                                    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathend</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nearest</a>);</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span>                                <span class="keywordflow">else</span></div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>                                    <a class="code hl_define" href="mathlib_8h.html#a4d2bc0c336e3e2a9b13448341ab83c10">VectorLerp</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathstart</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">along</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pathend</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nearest</a>);</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>                                <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(sample, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nearest</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diff</a>);</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>                                <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diff</a>, iradius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diff</a>);</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>                                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">distance2</a> = <a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diff</a>);</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>                                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">distance2</a> &lt; 1.0f)</div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>                                {</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>                                    <span class="comment">// contribute some color to this pixel, across all bands</span></div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>                                    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a> = 1.0f - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">distance2</a>);</div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>                                    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">band</a>;</div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span>                                    <a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a> *= <a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a>;</div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>                                    <span class="keywordflow">if</span> (pixelbands &gt; 1)</div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>                                    {</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>                                        <span class="comment">// small optimization for alpha - only color[7] is non-zero, so skip the rest of the alpha elements.</span></div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>                                        p[pixelsperband * 4 + 3] += <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[7] * <a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a>;</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>                                    }</div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>                                    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">band</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">band</a> &lt; pixelbands; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">band</a>++)</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span>                                    {</div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span>                                        <span class="comment">// add to the pixel color (RGB only - see above)</span></div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>                                        p[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">band</a> * pixelsperband * 4 + 0] += <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">band</a> * 4 + 0] * <a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a>;</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>                                        p[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">band</a> * pixelsperband * 4 + 1] += <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">band</a> * 4 + 1] * <a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a>;</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>                                        p[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">band</a> * pixelsperband * 4 + 2] += <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">band</a> * 4 + 2] * <a class="code hl_variable" href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a>;</div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>                                    }</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>                                }</div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>                            }</div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>                        }</div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>                    }</div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>                }</div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>            }</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span>        }</div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>    }</div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>}</div>
</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span> </div>
<div class="foldopen" id="foldopen02335" data-start="{" data-end="}">
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ae68f51fb59bece8e8a35a996f527c889"> 2335</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ae68f51fb59bece8e8a35a996f527c889">R_Shadow_BounceGrid_Slice_Task</a>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a> *t)</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>{</div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>    <a class="code hl_function" href="r__shadow_8c.html#a2ac98c9ce0bd2f311fece91216a3dc60">R_Shadow_BounceGrid_Slice</a>((<span class="keywordtype">int</span>)t-&gt;<a class="code hl_variable" href="structtaskqueue__task__t.html#a23579f1d7ab68a87c93c8b034883301d">i</a>[0]);</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>    t-&gt;<a class="code hl_variable" href="structtaskqueue__task__t.html#abd75c1628f072fbcab8138627c465383">done</a> = 1;</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>}</div>
</div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span> </div>
<div class="foldopen" id="foldopen02341" data-start="{" data-end="}">
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a25e217236f416451ebf1be392ad48b0c"> 2341</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a25e217236f416451ebf1be392ad48b0c">R_Shadow_BounceGrid_EnqueueSlices_Task</a>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a> *t)</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>{</div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slices</a>;</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>    <span class="comment">// we need to wait for the texture clear to finish before we start adding light to it</span></div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aa1c90d5cebf0598c868db133746b1924">cleartex_task</a>.<a class="code hl_variable" href="structtaskqueue__task__t.html#abd75c1628f072fbcab8138627c465383">done</a> == 0)</div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span>    {</div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span>        <a class="code hl_function" href="taskqueue_8c.html#a12dd9d26e317dc09afe48c6d5cc64051">TaskQueue_Yield</a>(t);</div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>    }</div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slices</a> = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a16e391324a28bcb1fc08763122eb4349">resolution</a>[2] - 2;</div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slices</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span>        <a class="code hl_function" href="taskqueue_8c.html#a9d3bce934d8556370189575fc769691e">TaskQueue_Setup</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ab7132e4b1581f8b6d909662b7e5b0308">slices_tasks</a> + <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_function" href="r__shadow_8c.html#ae68f51fb59bece8e8a35a996f527c889">R_Shadow_BounceGrid_Slice_Task</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span>    <a class="code hl_function" href="taskqueue_8c.html#ad3874e08e0963699402a0d894b9102df">TaskQueue_Enqueue</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slices</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ab7132e4b1581f8b6d909662b7e5b0308">slices_tasks</a>);</div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span>    <a class="code hl_function" href="taskqueue_8c.html#a9d3bce934d8556370189575fc769691e">TaskQueue_Setup</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a6a3baf0107986149aa2aecca4f18eae5">slices_done_task</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_function" href="taskqueue_8c.html#ae4ea029dfef884645b521265061de550">TaskQueue_Task_CheckTasksDone</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">slices</a>, 0, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ab7132e4b1581f8b6d909662b7e5b0308">slices_tasks</a>, 0);</div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>    <a class="code hl_function" href="taskqueue_8c.html#ad3874e08e0963699402a0d894b9102df">TaskQueue_Enqueue</a>(1, &amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a6a3baf0107986149aa2aecca4f18eae5">slices_done_task</a>);</div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span>    t-&gt;<a class="code hl_variable" href="structtaskqueue__task__t.html#abd75c1628f072fbcab8138627c465383">done</a> = 1;</div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>}</div>
</div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span> </div>
<div class="foldopen" id="foldopen02359" data-start="{" data-end="}">
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#adc00d2dcd8b227ce97e063580c41c269"> 2359</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#adc00d2dcd8b227ce97e063580c41c269">R_Shadow_BounceGrid_BlurPixelsInDirection</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixels</a>, <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outpixels</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">off</a>)</div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>{</div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a>;</div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span>    <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outpixel</a>;</div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>    <span class="keywordtype">int</span> pixelbands = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a26f1540c538f115e11043b6e05a8f540">pixelbands</a>;</div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a>;</div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>;</div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>;</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> resolution[3];</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a16e391324a28bcb1fc08763122eb4349">resolution</a>, resolution);</div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> &lt; pixelbands;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a>++)</div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>    {</div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a> = 1;<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a> &lt; resolution[2]-1;<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>++)</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>        {</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = 1;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &lt; resolution[1]-1;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++)</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>            {</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>                <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> = 1;</div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> = ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a>*resolution[2]+<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>)*resolution[1]+<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>)*resolution[0]+<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>;</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixels</a> + 4*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>;</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outpixel</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outpixels</a> + 4*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>;</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>                <span class="keywordflow">for</span> (;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> &lt; resolution[0]-1;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a> += 4, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outpixel</a> += 4)</div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>                {</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outpixel</a>[0] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a>[0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a>[  <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">off</a>] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a>[0-<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">off</a>]) * (1.0f / 3.0);</div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outpixel</a>[1] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a>[1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a>[1+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">off</a>] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a>[1-<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">off</a>]) * (1.0f / 3.0);</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outpixel</a>[2] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a>[2] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a>[2+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">off</a>] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a>[2-<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">off</a>]) * (1.0f / 3.0);</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">outpixel</a>[3] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a>[3] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a>[3+<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">off</a>] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">inpixel</a>[3-<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">off</a>]) * (1.0f / 3.0);</div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>                }</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>            }</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span>        }</div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>    }</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>}</div>
</div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span> </div>
<div class="foldopen" id="foldopen02391" data-start="{" data-end="}">
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0e9d92e272adc56f7011415d517e134f"> 2391</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a0e9d92e272adc56f7011415d517e134f">R_Shadow_BounceGrid_BlurPixels_Task</a>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a> *t)</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>{</div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span>    <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[4];</div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> resolution[3];</div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a6878511fe2646c944e266721092352dd">blur</a>)</div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>    {</div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>        <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a16e391324a28bcb1fc08763122eb4349">resolution</a>, resolution);</div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span> </div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>        <a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[0] = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a49e8545c0df81be7f4d06f06b4bf3777">highpixels_index</a>];</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>        <a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[1] = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a49e8545c0df81be7f4d06f06b4bf3777">highpixels_index</a> ^ 1];</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>        <a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[2] = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a49e8545c0df81be7f4d06f06b4bf3777">highpixels_index</a>];</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>        <a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[3] = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a49e8545c0df81be7f4d06f06b4bf3777">highpixels_index</a> ^ 1];</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span> </div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>        <span class="comment">// blur on X</span></div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>        <a class="code hl_function" href="r__shadow_8c.html#adc00d2dcd8b227ce97e063580c41c269">R_Shadow_BounceGrid_BlurPixelsInDirection</a>(<a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[0], <a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[1], 4);</div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>        <span class="comment">// blur on Y</span></div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>        <a class="code hl_function" href="r__shadow_8c.html#adc00d2dcd8b227ce97e063580c41c269">R_Shadow_BounceGrid_BlurPixelsInDirection</a>(<a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[1], <a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[2], resolution[0] * 4);</div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>        <span class="comment">// blur on Z</span></div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span>        <a class="code hl_function" href="r__shadow_8c.html#adc00d2dcd8b227ce97e063580c41c269">R_Shadow_BounceGrid_BlurPixelsInDirection</a>(<a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[2], <a class="code hl_variable" href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a>[3], resolution[0] * resolution[1] * 4);</div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span> </div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>        <span class="comment">// toggle the state, highpixels now points to pixels[3] result</span></div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a49e8545c0df81be7f4d06f06b4bf3777">highpixels_index</a> ^= 1;</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a2a1127f6d6a8017ef9f836a6c20749e1">highpixels</a> = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a49e8545c0df81be7f4d06f06b4bf3777">highpixels_index</a>];</div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span>    }</div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>    t-&gt;<a class="code hl_variable" href="structtaskqueue__task__t.html#abd75c1628f072fbcab8138627c465383">done</a> = 1;</div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>}</div>
</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span> </div>
<div class="foldopen" id="foldopen02418" data-start="{" data-end="}">
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa7e690d5ac165d8522a86fada3f43350"> 2418</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#aa7e690d5ac165d8522a86fada3f43350">R_Shadow_BounceGrid_ConvertPixelsAndUpload</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>{</div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>    <span class="keywordtype">int</span> floatcolors = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a45853ca9a1bfb1daf271e6e67c96f5a2">floatcolors</a>;</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsbgra8</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelbgra8</a>;</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsrgba16f</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelrgba16f</a>;</div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span>    <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsrgba32f</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>    <span class="keywordtype">float</span> *highpixels = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a2a1127f6d6a8017ef9f836a6c20749e1">highpixels</a>;</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>    <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a>;</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>    <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandpixel</a>;</div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pixelsperband = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a42eda904d89aba6c648513454394944a">pixelsperband</a>;</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pixelbands = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a26f1540c538f115e11043b6e05a8f540">pixelbands</a>;</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a>;</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>;</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandindex</a>;</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> resolution[3];</div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>    <span class="keywordtype">int</span> c[4];</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a16e391324a28bcb1fc08763122eb4349">resolution</a>, resolution);</div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span> </div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af6e42792358a36ee9d68ce5c5060e0fa">createtexture</a> &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a>)</div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span>    {</div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>        <a class="code hl_function" href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a>);</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>    }</div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span> </div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>    <span class="comment">// if bentnormals exist, we need to normalize and bias them for the shader</span></div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>    <span class="keywordflow">if</span> (pixelbands &gt; 1)</div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>    {</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> = 1;</div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a> &lt; resolution[2]-1;<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>++)</div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>        {</div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = 0;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &lt; resolution[1]-1;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++)</div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>            {</div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>                <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> = 1;</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> = ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a>*resolution[2]+<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>)*resolution[1]+<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>)*resolution[0]+<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>;</div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a> = highpixels + 4*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>;</div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>                <span class="keywordflow">for</span> (;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> &lt; resolution[0]-1;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a> += 4)</div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>                {</div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>                    <span class="comment">// only convert pixels that were hit by photons</span></div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a>[3] != 0.0f)</div>
<div class="line"><a id="l02459" name="l02459"></a><span class="lineno"> 2459</span>                        <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a>);</div>
<div class="line"><a id="l02460" name="l02460"></a><span class="lineno"> 2460</span>                    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a>[0] * 0.5f + 0.5f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a>[1] * 0.5f + 0.5f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a>[2] * 0.5f + 0.5f);</div>
<div class="line"><a id="l02461" name="l02461"></a><span class="lineno"> 2461</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a>[pixelsperband * 4 + 3] = 1.0f;</div>
<div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span>                }</div>
<div class="line"><a id="l02463" name="l02463"></a><span class="lineno"> 2463</span>            }</div>
<div class="line"><a id="l02464" name="l02464"></a><span class="lineno"> 2464</span>        }</div>
<div class="line"><a id="l02465" name="l02465"></a><span class="lineno"> 2465</span>    }</div>
<div class="line"><a id="l02466" name="l02466"></a><span class="lineno"> 2466</span> </div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span>    <span class="comment">// start by clearing the pixels array - we won&#39;t be writing to all of it</span></div>
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"> 2468</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span>    <span class="comment">// then process only the pixels that have at least some color, skipping</span></div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>    <span class="comment">// the higher bands for speed on pixels that are black</span></div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span>    <span class="keywordflow">switch</span> (floatcolors)</div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span>    {</div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span>    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a83026f8a045c783abf4bd2a10e1255a6">u8pixels</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l02475" name="l02475"></a><span class="lineno"> 2475</span>            <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a83026f8a045c783abf4bd2a10e1255a6">u8pixels</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a513a8bcbc2369fbaf76f1ed6db270064">numpixels</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[4]));</div>
<div class="line"><a id="l02476" name="l02476"></a><span class="lineno"> 2476</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsbgra8</a> = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a83026f8a045c783abf4bd2a10e1255a6">u8pixels</a>;</div>
<div class="line"><a id="l02477" name="l02477"></a><span class="lineno"> 2477</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> &lt; pixelbands;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a>++)</div>
<div class="line"><a id="l02478" name="l02478"></a><span class="lineno"> 2478</span>        {</div>
<div class="line"><a id="l02479" name="l02479"></a><span class="lineno"> 2479</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> == 1)</div>
<div class="line"><a id="l02480" name="l02480"></a><span class="lineno"> 2480</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsbgra8</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a83cdb6ec9024bf830f01d09d9465124a">bytesperband</a>, 128, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a83cdb6ec9024bf830f01d09d9465124a">bytesperband</a>);</div>
<div class="line"><a id="l02481" name="l02481"></a><span class="lineno"> 2481</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l02482" name="l02482"></a><span class="lineno"> 2482</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsbgra8</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> * <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a83cdb6ec9024bf830f01d09d9465124a">bytesperband</a>, 0, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a83cdb6ec9024bf830f01d09d9465124a">bytesperband</a>);</div>
<div class="line"><a id="l02483" name="l02483"></a><span class="lineno"> 2483</span>        }</div>
<div class="line"><a id="l02484" name="l02484"></a><span class="lineno"> 2484</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a> = 1;<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a> &lt; resolution[2]-1;<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>++)</div>
<div class="line"><a id="l02485" name="l02485"></a><span class="lineno"> 2485</span>        {</div>
<div class="line"><a id="l02486" name="l02486"></a><span class="lineno"> 2486</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = 1;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &lt; resolution[1]-1;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++)</div>
<div class="line"><a id="l02487" name="l02487"></a><span class="lineno"> 2487</span>            {</div>
<div class="line"><a id="l02488" name="l02488"></a><span class="lineno"> 2488</span>                <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> = 1;</div>
<div class="line"><a id="l02489" name="l02489"></a><span class="lineno"> 2489</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> = 0;</div>
<div class="line"><a id="l02490" name="l02490"></a><span class="lineno"> 2490</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> = ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a>*resolution[2]+<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>)*resolution[1]+<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>)*resolution[0]+<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>;</div>
<div class="line"><a id="l02491" name="l02491"></a><span class="lineno"> 2491</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a> = highpixels + 4*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>;</div>
<div class="line"><a id="l02492" name="l02492"></a><span class="lineno"> 2492</span>                <span class="keywordflow">for</span> (;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> &lt; resolution[0]-1;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a> += 4)</div>
<div class="line"><a id="l02493" name="l02493"></a><span class="lineno"> 2493</span>                {</div>
<div class="line"><a id="l02494" name="l02494"></a><span class="lineno"> 2494</span>                    <span class="comment">// only convert pixels that were hit by photons</span></div>
<div class="line"><a id="l02495" name="l02495"></a><span class="lineno"> 2495</span>                    <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a>))</div>
<div class="line"><a id="l02496" name="l02496"></a><span class="lineno"> 2496</span>                    {</div>
<div class="line"><a id="l02497" name="l02497"></a><span class="lineno"> 2497</span>                        <span class="comment">// normalize the bentnormal now</span></div>
<div class="line"><a id="l02498" name="l02498"></a><span class="lineno"> 2498</span>                        <span class="keywordflow">if</span> (pixelbands &gt; 1)</div>
<div class="line"><a id="l02499" name="l02499"></a><span class="lineno"> 2499</span>                        {</div>
<div class="line"><a id="l02500" name="l02500"></a><span class="lineno"> 2500</span>                            <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a> + pixelsperband * 4);</div>
<div class="line"><a id="l02501" name="l02501"></a><span class="lineno"> 2501</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a>[pixelsperband * 4 + 3] = 1.0f;</div>
<div class="line"><a id="l02502" name="l02502"></a><span class="lineno"> 2502</span>                        }</div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span>                        <span class="comment">// process all of the pixelbands for this pixel</span></div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span>                        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandindex</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> &lt; pixelbands;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandindex</a> += pixelsperband)</div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span>                        {</div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelbgra8</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsbgra8</a> + 4*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandindex</a>;</div>
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"> 2507</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandpixel</a> = highpixels + 4*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandindex</a>;</div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span>                            c[0] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandpixel</a>[0]*256.0f);</div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span>                            c[1] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandpixel</a>[1]*256.0f);</div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span>                            c[2] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandpixel</a>[2]*256.0f);</div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span>                            c[3] = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandpixel</a>[3]*256.0f);</div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelbgra8</a>[2] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0, c[0], 255);</div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelbgra8</a>[1] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0, c[1], 255);</div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelbgra8</a>[0] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0, c[2], 255);</div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelbgra8</a>[3] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">char</a>)<a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0, c[3], 255);</div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span>                        }</div>
<div class="line"><a id="l02517" name="l02517"></a><span class="lineno"> 2517</span>                    }</div>
<div class="line"><a id="l02518" name="l02518"></a><span class="lineno"> 2518</span>                }</div>
<div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span>            }</div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span>        }</div>
<div class="line"><a id="l02521" name="l02521"></a><span class="lineno"> 2521</span> </div>
<div class="line"><a id="l02522" name="l02522"></a><span class="lineno"> 2522</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af6e42792358a36ee9d68ce5c5060e0fa">createtexture</a>)</div>
<div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span>            <a class="code hl_function" href="gl__textures_8c.html#a558d3efbd11eedd4f9e47c0dbc704090">R_UpdateTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsbgra8</a>, 0, 0, 0, resolution[0], resolution[1], resolution[2]*pixelbands, 0);</div>
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span>            <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a> = <a class="code hl_function" href="gl__textures_8c.html#ad4df59df0b150a5f85d36b5f3f8be05d">R_LoadTexture3D</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>, <span class="stringliteral">&quot;bouncegrid&quot;</span>, resolution[0], resolution[1], resolution[2]*pixelbands, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsbgra8</a>, <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49ab887b36a912241930415c7f1db44d094">TEXTYPE_BGRA</a>, <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a> | <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a> | <a class="code hl_define" href="r__textures_8h.html#a7ebf18782aefc1f1ff9fc5cb169e2dbb">TEXF_FORCELINEAR</a>, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span>    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aa88f1872c4cfddb46de483f0eeb39f1d">fp16pixels</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span>            <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aa88f1872c4cfddb46de483f0eeb39f1d">fp16pixels</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a513a8bcbc2369fbaf76f1ed6db270064">numpixels</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>[4]));</div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsrgba16f</a> = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aa88f1872c4cfddb46de483f0eeb39f1d">fp16pixels</a>;</div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsrgba16f</a>, 0, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a513a8bcbc2369fbaf76f1ed6db270064">numpixels</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>[4]));</div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a> = 1;<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a> &lt; resolution[2]-1;<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>++)</div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span>        {</div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = 1;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> &lt; resolution[1]-1;<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++)</div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span>            {</div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span>                <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> = 1;</div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> = 0;</div>
<div class="line"><a id="l02538" name="l02538"></a><span class="lineno"> 2538</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a> = ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a>*resolution[2]+<a class="code hl_variable" href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a>)*resolution[1]+<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>)*resolution[0]+<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>;</div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a> = highpixels + 4*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>;</div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span>                <span class="keywordflow">for</span> (;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> &lt; resolution[0]-1;<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a> += 4)</div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span>                {</div>
<div class="line"><a id="l02542" name="l02542"></a><span class="lineno"> 2542</span>                    <span class="comment">// only convert pixels that were hit by photons</span></div>
<div class="line"><a id="l02543" name="l02543"></a><span class="lineno"> 2543</span>                    <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">highpixel</a>))</div>
<div class="line"><a id="l02544" name="l02544"></a><span class="lineno"> 2544</span>                    {</div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span>                        <span class="comment">// process all of the pixelbands for this pixel</span></div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span>                        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> = 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandindex</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a> &lt; pixelbands;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelband</a>++, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandindex</a> += pixelsperband)</div>
<div class="line"><a id="l02547" name="l02547"></a><span class="lineno"> 2547</span>                        {</div>
<div class="line"><a id="l02548" name="l02548"></a><span class="lineno"> 2548</span>                            <span class="comment">// time to have fun with IEEE 754 bit hacking...</span></div>
<div class="line"><a id="l02549" name="l02549"></a><span class="lineno"> 2549</span>                            <span class="keyword">union </span>{</div>
<div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span>                                <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>[4];</div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span>                                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">raw</a>[4];</div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span>                            } u;</div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelrgba16f</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsrgba16f</a> + 4*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandindex</a>;</div>
<div class="line"><a id="l02554" name="l02554"></a><span class="lineno"> 2554</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandpixel</a> = highpixels + 4*<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandindex</a>;</div>
<div class="line"><a id="l02555" name="l02555"></a><span class="lineno"> 2555</span>                            <a class="code hl_define" href="mathlib_8h.html#aef97643f8b42714785136050d7fcea9f">VectorCopy4</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bandpixel</a>, u.f);</div>
<div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span>                            <a class="code hl_define" href="mathlib_8h.html#aef97643f8b42714785136050d7fcea9f">VectorCopy4</a>(u.raw, c);</div>
<div class="line"><a id="l02557" name="l02557"></a><span class="lineno"> 2557</span>                            <span class="comment">// this math supports negative numbers, snaps denormals to zero</span></div>
<div class="line"><a id="l02558" name="l02558"></a><span class="lineno"> 2558</span>                            <span class="comment">//pixelrgba16f[0] = (unsigned short)(((c[0] &amp; 0x7FFFFFFF) &lt; 0x38000000) ? 0 : (((c[0] - 0x38000000) &gt;&gt; 13) &amp; 0x7FFF) | ((c[0] &gt;&gt; 16) &amp; 0x8000));</span></div>
<div class="line"><a id="l02559" name="l02559"></a><span class="lineno"> 2559</span>                            <span class="comment">//pixelrgba16f[1] = (unsigned short)(((c[1] &amp; 0x7FFFFFFF) &lt; 0x38000000) ? 0 : (((c[1] - 0x38000000) &gt;&gt; 13) &amp; 0x7FFF) | ((c[1] &gt;&gt; 16) &amp; 0x8000));</span></div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span>                            <span class="comment">//pixelrgba16f[2] = (unsigned short)(((c[2] &amp; 0x7FFFFFFF) &lt; 0x38000000) ? 0 : (((c[2] - 0x38000000) &gt;&gt; 13) &amp; 0x7FFF) | ((c[2] &gt;&gt; 16) &amp; 0x8000));</span></div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span>                            <span class="comment">//pixelrgba16f[3] = (unsigned short)(((c[3] &amp; 0x7FFFFFFF) &lt; 0x38000000) ? 0 : (((c[3] - 0x38000000) &gt;&gt; 13) &amp; 0x7FFF) | ((c[3] &gt;&gt; 16) &amp; 0x8000));</span></div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span>                            <span class="comment">// this math does not support negative</span></div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelrgba16f</a>[0] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">short</a>)((c[0] &lt; 0x38000000) ? 0 : ((c[0] - 0x38000000) &gt;&gt; 13));</div>
<div class="line"><a id="l02564" name="l02564"></a><span class="lineno"> 2564</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelrgba16f</a>[1] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">short</a>)((c[1] &lt; 0x38000000) ? 0 : ((c[1] - 0x38000000) &gt;&gt; 13));</div>
<div class="line"><a id="l02565" name="l02565"></a><span class="lineno"> 2565</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelrgba16f</a>[2] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">short</a>)((c[2] &lt; 0x38000000) ? 0 : ((c[2] - 0x38000000) &gt;&gt; 13));</div>
<div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span>                            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelrgba16f</a>[3] = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">short</a>)((c[3] &lt; 0x38000000) ? 0 : ((c[3] - 0x38000000) &gt;&gt; 13));</div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span>                        }</div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span>                    }</div>
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"> 2569</span>                }</div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span>            }</div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span>        }</div>
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"> 2572</span> </div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af6e42792358a36ee9d68ce5c5060e0fa">createtexture</a>)</div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span>            <a class="code hl_function" href="gl__textures_8c.html#a558d3efbd11eedd4f9e47c0dbc704090">R_UpdateTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a>, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsrgba16f</a>, 0, 0, 0, resolution[0], resolution[1], resolution[2]*pixelbands, 0);</div>
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"> 2575</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span>            <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a> = <a class="code hl_function" href="gl__textures_8c.html#ad4df59df0b150a5f85d36b5f3f8be05d">R_LoadTexture3D</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>, <span class="stringliteral">&quot;bouncegrid&quot;</span>, resolution[0], resolution[1], resolution[2]*pixelbands, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsrgba16f</a>, <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49aff2b1b2f2f1450232e4c087a7ef6df1b">TEXTYPE_COLORBUFFER16F</a>, <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a> | <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a> | <a class="code hl_define" href="r__textures_8h.html#a7ebf18782aefc1f1ff9fc5cb169e2dbb">TEXF_FORCELINEAR</a>, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span>    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l02579" name="l02579"></a><span class="lineno"> 2579</span>        <span class="comment">// our native format happens to match, so this is easy.</span></div>
<div class="line"><a id="l02580" name="l02580"></a><span class="lineno"> 2580</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsrgba32f</a> = highpixels;</div>
<div class="line"><a id="l02581" name="l02581"></a><span class="lineno"> 2581</span> </div>
<div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af6e42792358a36ee9d68ce5c5060e0fa">createtexture</a>)</div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span>            <a class="code hl_function" href="gl__textures_8c.html#a558d3efbd11eedd4f9e47c0dbc704090">R_UpdateTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a>, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsrgba32f</a>, 0, 0, 0, resolution[0], resolution[1], resolution[2]*pixelbands, 0);</div>
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"> 2584</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span>            <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a> = <a class="code hl_function" href="gl__textures_8c.html#ad4df59df0b150a5f85d36b5f3f8be05d">R_LoadTexture3D</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>, <span class="stringliteral">&quot;bouncegrid&quot;</span>, resolution[0], resolution[1], resolution[2]*pixelbands, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pixelsrgba32f</a>, <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49a99bf132eb3b3d5fedaa8e07719e126ed">TEXTYPE_COLORBUFFER32F</a>, <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a> | <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a> | <a class="code hl_define" href="r__textures_8h.html#a7ebf18782aefc1f1ff9fc5cb169e2dbb">TEXF_FORCELINEAR</a>, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span>    }</div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span> </div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span>    <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a945a52cdbccee0730a0dadd2424498d3">lastupdatetime</a> = <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a>;</div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span>}</div>
</div>
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span> </div>
<div class="foldopen" id="foldopen02592" data-start="{" data-end="}">
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0f3e0637f87b72439d92141be7304aa6"> 2592</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a0f3e0637f87b72439d92141be7304aa6">R_Shadow_BounceGrid_ClearTex_Task</a>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a> *t)</div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>{</div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a2a1127f6d6a8017ef9f836a6c20749e1">highpixels</a>, 0, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a513a8bcbc2369fbaf76f1ed6db270064">numpixels</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[4]));</div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>    t-&gt;<a class="code hl_variable" href="structtaskqueue__task__t.html#abd75c1628f072fbcab8138627c465383">done</a> = 1;</div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span>}</div>
</div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span> </div>
<div class="foldopen" id="foldopen02598" data-start="{" data-end="}">
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7383997584e9a05d0d1016ec4fa517cd"> 2598</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a7383997584e9a05d0d1016ec4fa517cd">R_Shadow_BounceGrid_TracePhotons_Shot</a>(<a class="code hl_struct" href="structr__shadow__bouncegrid__photon__t.html">r_shadow_bouncegrid_photon_t</a> *p, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">remainingbounces</a>, <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotstart</a>, <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotend</a>, <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotcolor</a>, <span class="keywordtype">float</span> bounceminimumintensity2, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">previousrefractiveindex</a>)</div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span>{</div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span>    <span class="keywordtype">int</span> hitsupercontentsmask, skipsupercontentsmask, skipmaterialflagsmask;</div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>;</div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacenormal</a>;</div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectstart</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectend</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>;</div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractstart</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractend</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>;</div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span>    <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> s;</div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectamount</a> = 1.0f;</div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>    <a class="code hl_struct" href="structtrace__t.html">trace_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>;</div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span>    <span class="comment">// figure out what we want to interact with</span></div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span>    hitsupercontentsmask = <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a> | <a class="code hl_define" href="bspfile_8h.html#a86cebf49778299337e696bf0abc2d046">SUPERCONTENTS_LIQUIDSMASK</a>;</div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span>    skipsupercontentsmask = 0;</div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span>    skipmaterialflagsmask = <a class="code hl_define" href="model__brush_8h.html#afd200d146636dc15acd310fa22c6b279">MATERIALFLAG_CUSTOMBLEND</a>;</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>    <span class="comment">//r_refdef.scene.worldmodel-&gt;TraceLineAgainstSurfaces(r_refdef.scene.worldmodel, NULL, NULL, &amp;cliptrace, clipstart, clipend, hitsupercontentsmask);</span></div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span>    <span class="comment">//r_refdef.scene.worldmodel-&gt;TraceLine(r_refdef.scene.worldmodel, NULL, NULL, &amp;cliptrace2, clipstart, clipend, hitsupercontentsmask);</span></div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8d513a7e8aa112d3c13aff3b9c2e494c">staticmode</a> || <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ae9f101140bddb1b46aa7621675818824">rng_seed</a> &lt; 0 || <a class="code hl_variable" href="r__shadow_8c.html#ae5a80c33adccf8968cc4bd5ae656e805">r_shadow_bouncegrid_threaded</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>    {</div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span>        <span class="comment">// static mode fires a LOT of rays but none of them are identical, so they are not cached</span></div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span>        <span class="comment">// non-stable random in dynamic mode also never reuses a direction, so there&#39;s no reason to cache it</span></div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a> = <a class="code hl_function" href="cl__collision_8c.html#a3844376c9cc74935d902373d216acc75">CL_TraceLine</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotstart</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotend</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8d513a7e8aa112d3c13aff3b9c2e494c">staticmode</a> ? <a class="code hl_define" href="world_8h.html#a90df952ad5c2daedd0295eb3a7ecae12">MOVE_WORLDONLY</a> : (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8747973cb45c8fe9b496b43b7e087b34">hitmodels</a> ? <a class="code hl_define" href="world_8h.html#a7ee9b968e24c893e13a349b765b5096b">MOVE_HITMODEL</a> : <a class="code hl_define" href="world_8h.html#ad9b31bede6128044de93b93641630437">MOVE_NOMONSTERS</a>), <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, hitsupercontentsmask, skipsupercontentsmask, skipmaterialflagsmask, <a class="code hl_variable" href="collision_8c.html#ac0a2160fccec6a28f98e2df5e39d1f7c">collision_extendmovelength</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span>    }</div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span>    {</div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span>        <span class="comment">// dynamic mode fires many rays and most will match the cache from the previous frame</span></div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a> = <a class="code hl_function" href="cl__collision_8c.html#afaf23d22697d0f04fa66b5ee89b6157d">CL_Cache_TraceLineSurfaces</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotstart</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotend</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8d513a7e8aa112d3c13aff3b9c2e494c">staticmode</a> ? <a class="code hl_define" href="world_8h.html#a90df952ad5c2daedd0295eb3a7ecae12">MOVE_WORLDONLY</a> : (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8747973cb45c8fe9b496b43b7e087b34">hitmodels</a> ? <a class="code hl_define" href="world_8h.html#a7ee9b968e24c893e13a349b765b5096b">MOVE_HITMODEL</a> : <a class="code hl_define" href="world_8h.html#ad9b31bede6128044de93b93641630437">MOVE_NOMONSTERS</a>), hitsupercontentsmask, skipsupercontentsmask, skipmaterialflagsmask);</div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span>    }</div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.endpos, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>);</div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span>    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">remainingbounces</a> == <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a5702438e73be1467f108b9e496ea6113">maxbounce</a> || <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a84678707d62b536244f2ecc579e6cf1b">includedirectlighting</a>) &amp;&amp; p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#af71eecd31b7a6b25a935ea88e39c01f6">numpaths</a> &lt; <a class="code hl_define" href="r__shadow_8h.html#a1d973c91b725371a9e677426dd722cba">PHOTON_MAX_PATHS</a>)</div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span>    {</div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span>        <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">notculled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span>        <span class="comment">// cull paths that fail R_CullFrustum in dynamic mode</span></div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8d513a7e8aa112d3c13aff3b9c2e494c">staticmode</a></div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span>            &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#acd48963351e3b59fcea0383c095ce28b">r_shadow_bouncegrid_dynamic_culllightpaths</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span>        {</div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span>            <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> cullmins, cullmaxs;</div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span>            cullmins[0] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotstart</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>[0]) - <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[0] - <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ad756b38998171ce24997036307b95d4b">lightpathsize</a>;</div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span>            cullmins[1] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotstart</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>[1]) - <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[1] - <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ad756b38998171ce24997036307b95d4b">lightpathsize</a>;</div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span>            cullmins[2] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotstart</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>[2]) - <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[2] - <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ad756b38998171ce24997036307b95d4b">lightpathsize</a>;</div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span>            cullmaxs[0] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotstart</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>[0]) + <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[0] + <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ad756b38998171ce24997036307b95d4b">lightpathsize</a>;</div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>            cullmaxs[1] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotstart</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>[1]) + <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[1] + <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ad756b38998171ce24997036307b95d4b">lightpathsize</a>;</div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span>            cullmaxs[2] = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotstart</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>[2]) + <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">spacing</a>[2] + <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ad756b38998171ce24997036307b95d4b">lightpathsize</a>;</div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="gl__rmain_8c.html#ad828a2865ae4baf75678ea5ba4e74242">R_CullFrustum</a>(cullmins, cullmaxs))</div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">notculled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span>        }</div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">notculled</a>)</div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span>        {</div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span>            <a class="code hl_struct" href="structr__shadow__bouncegrid__photon__path__t.html">r_shadow_bouncegrid_photon_path_t</a> *path = p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#a5e988471e4bdcfeb86b2dd0d87ee90d0">paths</a> + p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#af71eecd31b7a6b25a935ea88e39c01f6">numpaths</a>++;</div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotstart</a>, path-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__path__t.html#abd593ae4ee39b58e1a678fd522bc9dd8">start</a>);</div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>, path-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__path__t.html#ac39875e3543070e359bb7de28bc3b713">end</a>);</div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotcolor</a>, path-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__path__t.html#a09991f97df28c319435a858fdd6ab413">color</a>);</div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span>        }</div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>    }</div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.fraction &lt; 1.0f &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">remainingbounces</a> &gt; 0)</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span>    {</div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span>        <span class="comment">// scale down shot color by bounce intensity and texture color (or 50% if no texture reported)</span></div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>        <span class="comment">// also clamp the resulting color to never add energy, even if the user requests extreme values</span></div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span>        <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.plane.normal, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacenormal</a>);</div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span>        <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>, 0.5f, 0.5f, 0.5f);</div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>);</div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>        <span class="comment">// FIXME: we need to determine the exact triangle, vertex color and texcoords and texture color and texture normal for the impacted point</span></div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture)</div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span>        {</div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;currentskinframe)</div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>                <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;currentskinframe-&gt;avgcolor, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>);</div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;currentalpha &lt; 1.0f &amp;&amp; (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;currentmaterialflags &amp; (<a class="code hl_define" href="model__brush_8h.html#a226c2113f3731bc223694bd3e391504a">MATERIALFLAG_ALPHA</a> | <a class="code hl_define" href="model__brush_8h.html#a37fea1966eaa92d59dfa7f277d4a82a5">MATERIALFLAG_ALPHATEST</a>)))</div>
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"> 2664</span>            {</div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectamount</a> *= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;currentalpha;</div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;currentskinframe)</div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectamount</a> *= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;currentskinframe-&gt;avgcolor[3];</div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span>            }</div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;currentmaterialflags &amp; <a class="code hl_define" href="model__brush_8h.html#a7055dcfb7e841b4f8df429bc32e9212f">MATERIALFLAG_WATERSHADER</a>)</div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span>            {</div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>                <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a43c562cd4d69a6398eab1369a808653e">Fresnel</a>;</div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span>                <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightdir</a>;</div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span>                <span class="comment">//reflectchance = pow(min(1.0f, 1.0f - cliptrace.</span></div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span>                <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotstart</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotend</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightdir</a>);</div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span>                <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightdir</a>);</div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a43c562cd4d69a6398eab1369a808653e">Fresnel</a> = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(1.0f, 1.0f - <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacenormal</a>));</div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a43c562cd4d69a6398eab1369a808653e">Fresnel</a> = <a class="code hl_variable" href="shader__glsl_8h.html#a43c562cd4d69a6398eab1369a808653e">Fresnel</a> * <a class="code hl_variable" href="shader__glsl_8h.html#a43c562cd4d69a6398eab1369a808653e">Fresnel</a> * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;reflectmax - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;reflectmin) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;reflectmin;</div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectamount</a> *= <a class="code hl_variable" href="shader__glsl_8h.html#a43c562cd4d69a6398eab1369a808653e">Fresnel</a>;</div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span>                <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;refractcolor4f, <a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>);</div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span>            }</div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;currentmaterialflags &amp; <a class="code hl_define" href="model__brush_8h.html#a22de374860637bd38095828d776a3028">MATERIALFLAG_REFRACTION</a>)</div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>                <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.hittexture-&gt;refractcolor4f, <a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>);</div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>            <span class="comment">// make sure we do not gain energy even if surface colors are out of bounds</span></div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>[0] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>[0], 1.0f);</div>
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"> 2685</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>[1] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>[1], 1.0f);</div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>[2] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>[2], 1.0f);</div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>[0] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>[0], 1.0f);</div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>[1] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>[1], 1.0f);</div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>[2] = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>[2], 1.0f);</div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span>        }</div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>        <span class="comment">// reflected and refracted shots</span></div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>        <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ac297ceaa68f6a01dad6792ce83ed8968">particlebounceintensity</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectamount</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>);</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>        <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>, (1.0f - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectamount</a>), <a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>);</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span>        <a class="code hl_define" href="mathlib_8h.html#a98b9777201ede3788372b98e190aed44">VectorMultiply</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotcolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>);</div>
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"> 2695</span>        <a class="code hl_define" href="mathlib_8h.html#a98b9777201ede3788372b98e190aed44">VectorMultiply</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotcolor</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>);</div>
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span> </div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>) &gt;= bounceminimumintensity2)</div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>        {</div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>            <span class="comment">// reflect the remaining portion of the line across plane normal</span></div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span>            <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotend</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectend</a>);</div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span>            <a class="code hl_define" href="mathlib_8h.html#a05bb88eaf46949f56cfec7ebef8fc5d9">VectorReflect</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectend</a>, 1.0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacenormal</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectend</a>);</div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span>            <span class="comment">// calculate the new line start and end</span></div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectstart</a>);</div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span>            <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectstart</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectend</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectend</a>);</div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span>            <a class="code hl_function" href="r__shadow_8c.html#a7383997584e9a05d0d1016ec4fa517cd">R_Shadow_BounceGrid_TracePhotons_Shot</a>(p, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">remainingbounces</a> - 1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectstart</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectend</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">reflectcolor</a>, bounceminimumintensity2, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">previousrefractiveindex</a>);</div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>        }</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span> </div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>) &gt;= bounceminimumintensity2)</div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span>        {</div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span>            <span class="comment">// Check what refractive index is on the other side</span></div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractiveindex</a>;</div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>            <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>, 0.0625f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.plane.normal, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractstart</a>);</div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractiveindex</a> = <a class="code hl_function" href="r__shadow_8c.html#a5078f7b2b8e1ef5cfcefa05402f06831">R_Shadow_BounceGrid_RefractiveIndexAtPoint</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractstart</a>);</div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span>            <span class="comment">// reflect the remaining portion of the line across plane normal</span></div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span>            <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shotend</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractend</a>);</div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>            s = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractiveindex</a> / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">previousrefractiveindex</a>;</div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span>            <a class="code hl_define" href="mathlib_8h.html#a05bb88eaf46949f56cfec7ebef8fc5d9">VectorReflect</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractend</a>, -1.0f / s, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacenormal</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractend</a>);</div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span>            <span class="comment">// we also need to reflect the start to the other side of the plane so it doesn&#39;t just hit the same surface again</span></div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span>            <span class="comment">// calculate the new line start and end</span></div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span>            <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shothit</a>, 0.0625f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cliptrace</a>.plane.normal, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractstart</a>);</div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span>            <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractstart</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractend</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractend</a>);</div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span>            <a class="code hl_function" href="r__shadow_8c.html#a7383997584e9a05d0d1016ec4fa517cd">R_Shadow_BounceGrid_TracePhotons_Shot</a>(p, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">remainingbounces</a> - 1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractstart</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractend</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a>, bounceminimumintensity2, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">refractiveindex</a>);</div>
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span>        }</div>
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"> 2724</span>    }</div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>}</div>
</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span> </div>
<div class="foldopen" id="foldopen02727" data-start="{" data-end="}">
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a70712833e104b0bcd7eec639054bd164"> 2727</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a70712833e104b0bcd7eec639054bd164">R_Shadow_BounceGrid_TracePhotons_ShotTask</a>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a> *t)</div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span>{</div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span>    <a class="code hl_struct" href="structr__shadow__bouncegrid__photon__t.html">r_shadow_bouncegrid_photon_t</a> *p = (<a class="code hl_struct" href="structr__shadow__bouncegrid__photon__t.html">r_shadow_bouncegrid_photon_t</a> *)t-&gt;<a class="code hl_variable" href="structtaskqueue__task__t.html#a21eb660d9178b732ea760772c8879f35">p</a>[0];</div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>    <a class="code hl_function" href="r__shadow_8c.html#a7383997584e9a05d0d1016ec4fa517cd">R_Shadow_BounceGrid_TracePhotons_Shot</a>(p, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a5702438e73be1467f108b9e496ea6113">maxbounce</a>, p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#aa30adc25920a8d6a532d0aca3afdbc80">start</a>, p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#a05571edab24da8207e4283a614e4e838">end</a>, p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#a1e13b4d7780f918795fcef34a2c3b0e7">color</a>, p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#afda0df55b963c68e191aebd3bd734466">bounceminimumintensity2</a>, p-&gt;<a class="code hl_variable" href="structr__shadow__bouncegrid__photon__t.html#aae3b4c1ebab0d42c36562bff43664bec">startrefractiveindex</a>);</div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span>    t-&gt;<a class="code hl_variable" href="structtaskqueue__task__t.html#abd75c1628f072fbcab8138627c465383">done</a> = 1;</div>
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>}</div>
</div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span> </div>
<div class="foldopen" id="foldopen02734" data-start="{" data-end="}">
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9bdae801d1f2a6704de0754b19adf5d1"> 2734</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a9bdae801d1f2a6704de0754b19adf5d1">R_Shadow_BounceGrid_EnqueuePhotons_Task</a>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a> *t)</div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span>{</div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aeee3bca7fc4e2365e4f916ed115165a3">numphotons</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>        <a class="code hl_function" href="taskqueue_8c.html#a9d3bce934d8556370189575fc769691e">TaskQueue_Setup</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a7e4e9f75b9619e00e9b290ff6c33f8ea">photons_tasks</a> + <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_function" href="r__shadow_8c.html#a70712833e104b0bcd7eec639054bd164">R_Shadow_BounceGrid_TracePhotons_ShotTask</a>, 0, 0, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ae4981b1554885bab7fd99847a44ecb23">photons</a> + <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span>    <a class="code hl_function" href="taskqueue_8c.html#a9d3bce934d8556370189575fc769691e">TaskQueue_Setup</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a6987ee55dc9d0685dacf0a70ef855efd">photons_done_task</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_function" href="taskqueue_8c.html#ae4ea029dfef884645b521265061de550">TaskQueue_Task_CheckTasksDone</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aeee3bca7fc4e2365e4f916ed115165a3">numphotons</a>, 0, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a7e4e9f75b9619e00e9b290ff6c33f8ea">photons_tasks</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"> 2740</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#ae5a80c33adccf8968cc4bd5ae656e805">r_shadow_bouncegrid_threaded</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span>    {</div>
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"> 2742</span>        <a class="code hl_function" href="taskqueue_8c.html#ad3874e08e0963699402a0d894b9102df">TaskQueue_Enqueue</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aeee3bca7fc4e2365e4f916ed115165a3">numphotons</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a7e4e9f75b9619e00e9b290ff6c33f8ea">photons_tasks</a>);</div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span>        <a class="code hl_function" href="taskqueue_8c.html#ad3874e08e0963699402a0d894b9102df">TaskQueue_Enqueue</a>(1, &amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a6987ee55dc9d0685dacf0a70ef855efd">photons_done_task</a>);</div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span>    }</div>
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"> 2745</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>    {</div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span>        <span class="comment">// when not threaded we still have to report task status</span></div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aeee3bca7fc4e2365e4f916ed115165a3">numphotons</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span>            <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a7e4e9f75b9619e00e9b290ff6c33f8ea">photons_tasks</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code hl_variable" href="structtaskqueue__task__t.html#af186f8ae6d1ea8c0cc4a621e6f766e9f">func</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a7e4e9f75b9619e00e9b290ff6c33f8ea">photons_tasks</a> + <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a6987ee55dc9d0685dacf0a70ef855efd">photons_done_task</a>.<a class="code hl_variable" href="structtaskqueue__task__t.html#abd75c1628f072fbcab8138627c465383">done</a> = 1;</div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span>    }</div>
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"> 2752</span>    t-&gt;<a class="code hl_variable" href="structtaskqueue__task__t.html#abd75c1628f072fbcab8138627c465383">done</a> = 1;</div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>}</div>
</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span> </div>
<div class="foldopen" id="foldopen02755" data-start="{" data-end="}">
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aab41b3558585dce98a0da4bf121d88f9"> 2755</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#aab41b3558585dce98a0da4bf121d88f9">R_Shadow_UpdateBounceGridTexture</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l02756" name="l02756"></a><span class="lineno"> 2756</span>{</div>
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"> 2757</span>    <span class="keywordtype">int</span> flag = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ad6fc2a07d8d706f5daf13c5849db84fc">rtworld</a> ? <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a> : <a class="code hl_define" href="client_8h.html#a02b341fb62e7f8268a5f7f684ab0f2f2">LIGHTFLAG_NORMALMODE</a>;</div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span>    <a class="code hl_struct" href="structr__shadow__bouncegrid__settings__t.html">r_shadow_bouncegrid_settings_t</a> settings;</div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">enable</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">settingschanged</a>;</div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span> </div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">enable</a> = <a class="code hl_function" href="r__shadow_8c.html#ad693ecd5b97a8657e668145bd0249b75">R_Shadow_BounceGrid_CheckEnable</a>(flag);</div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span>    </div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span>    <a class="code hl_function" href="r__shadow_8c.html#ac66be86206739f14d3c6035c32d28b26">R_Shadow_BounceGrid_GenerateSettings</a>(&amp;settings);</div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>    </div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span>    <span class="comment">// changing intensity does not require an update</span></div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span>    <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#adcd8cbf51a961fee119206a61479a320">intensity</a> = <a class="code hl_variable" href="r__shadow_8c.html#a6db869294ff9626fbff8440312c677bb">r_shadow_bouncegrid_intensity</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span> </div>
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">settingschanged</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcmp</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>, &amp;settings, <span class="keyword">sizeof</span>(settings)) != 0;</div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span> </div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>    <span class="comment">// when settings change, we free everything as it is just simpler that way.</span></div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">settingschanged</a> || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">enable</a>)</div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>    {</div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span>        <span class="comment">// not enabled, make sure we free anything we don&#39;t need anymore.</span></div>
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"> 2775</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a>)</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span>        {</div>
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"> 2777</span>            <a class="code hl_function" href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a>);</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>            <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>        }</div>
<div class="line"><a id="l02780" name="l02780"></a><span class="lineno"> 2780</span>        <a class="code hl_function" href="r__shadow_8c.html#a2e12c3123d6cad1786cdbf7001ce3207">R_Shadow_BounceGrid_FreeHighPixels</a>();</div>
<div class="line"><a id="l02781" name="l02781"></a><span class="lineno"> 2781</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a513a8bcbc2369fbaf76f1ed6db270064">numpixels</a> = 0;</div>
<div class="line"><a id="l02782" name="l02782"></a><span class="lineno"> 2782</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aeee3bca7fc4e2365e4f916ed115165a3">numphotons</a> = 0;</div>
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"> 2783</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a8b67e9c1e43b650a0d46f9f9addcbba6">directional</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span> </div>
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"> 2785</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">enable</a>)</div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02787" name="l02787"></a><span class="lineno"> 2787</span>    }</div>
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"> 2788</span> </div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span>    <span class="comment">// if all the settings seem identical to the previous update, return</span></div>
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">texture</a> &amp;&amp; (settings.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8d513a7e8aa112d3c13aff3b9c2e494c">staticmode</a> || <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> &lt; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a945a52cdbccee0730a0dadd2424498d3">lastupdatetime</a> + <a class="code hl_variable" href="r__shadow_8c.html#a7c9977ce102ee53957a2d53860228c44">r_shadow_bouncegrid_dynamic_updateinterval</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>) &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">settingschanged</a>)</div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span> </div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span>    <span class="comment">// store the new settings</span></div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span>    <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a> = settings;</div>
<div class="line"><a id="l02795" name="l02795"></a><span class="lineno"> 2795</span> </div>
<div class="line"><a id="l02796" name="l02796"></a><span class="lineno"> 2796</span>    <a class="code hl_function" href="r__shadow_8c.html#a162a37b012229cefcc5ee45d146e20ff">R_Shadow_BounceGrid_UpdateSpacing</a>();</div>
<div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span> </div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>    <span class="comment">// allocate the highpixels array we&#39;ll be accumulating light into</span></div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[0] == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[0] = (<span class="keywordtype">float</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a513a8bcbc2369fbaf76f1ed6db270064">numpixels</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[4]));</div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a6878511fe2646c944e266721092352dd">blur</a> &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[1] == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[1] = (<span class="keywordtype">float</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a513a8bcbc2369fbaf76f1ed6db270064">numpixels</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>[4]));</div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>    <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a49e8545c0df81be7f4d06f06b4bf3777">highpixels_index</a> = 0;</div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span>    <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a2a1127f6d6a8017ef9f836a6c20749e1">highpixels</a> = <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">blurpixels</a>[<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a49e8545c0df81be7f4d06f06b4bf3777">highpixels_index</a>];</div>
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"> 2805</span> </div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>    <span class="comment">// set up the tracking of photon data</span></div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ae4981b1554885bab7fd99847a44ecb23">photons</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ae4981b1554885bab7fd99847a44ecb23">photons</a> = (<a class="code hl_struct" href="structr__shadow__bouncegrid__photon__t.html">r_shadow_bouncegrid_photon_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ac4b95087fb9dd0229aef6517f29a1286">maxphotons</a> * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structr__shadow__bouncegrid__photon__t.html">r_shadow_bouncegrid_photon_t</a>));</div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a7e4e9f75b9619e00e9b290ff6c33f8ea">photons_tasks</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"> 2810</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a7e4e9f75b9619e00e9b290ff6c33f8ea">photons_tasks</a> = (<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ac4b95087fb9dd0229aef6517f29a1286">maxphotons</a> * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a>));</div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span>    <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aeee3bca7fc4e2365e4f916ed115165a3">numphotons</a> = 0;</div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span> </div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span>    <span class="comment">// set up the tracking of slice tasks</span></div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ab7132e4b1581f8b6d909662b7e5b0308">slices_tasks</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span>        <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ab7132e4b1581f8b6d909662b7e5b0308">slices_tasks</a> = (<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a16e391324a28bcb1fc08763122eb4349">resolution</a>[2] * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a>));</div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span> </div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aa1c90d5cebf0598c868db133746b1924">cleartex_task</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a>));</div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aed7427c6db85135933b7f3d636a279a4">assignphotons_task</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a>));</div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a2494753cb5b6f582ea01eeb7581b9007">enqueuephotons_task</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a>));</div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a7e4e9f75b9619e00e9b290ff6c33f8ea">photons_tasks</a>, 0, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">settings</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#ac4b95087fb9dd0229aef6517f29a1286">maxphotons</a> * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a>));</div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a6987ee55dc9d0685dacf0a70ef855efd">photons_done_task</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a>));</div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a534c8d842134247332565592bba6be7a">enqueue_slices_task</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a>));</div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ab7132e4b1581f8b6d909662b7e5b0308">slices_tasks</a>, 0, <a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a16e391324a28bcb1fc08763122eb4349">resolution</a>[2] * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a>));</div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a6a3baf0107986149aa2aecca4f18eae5">slices_done_task</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a>));</div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad893c8dbd961ac662ee86363ae23b2d3">blurpixels_task</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtaskqueue__task__t.html">taskqueue_task_t</a>));</div>
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"> 2826</span> </div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span>    <span class="comment">// clear the texture</span></div>
<div class="line"><a id="l02828" name="l02828"></a><span class="lineno"> 2828</span>    <a class="code hl_function" href="taskqueue_8c.html#a9d3bce934d8556370189575fc769691e">TaskQueue_Setup</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aa1c90d5cebf0598c868db133746b1924">cleartex_task</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_function" href="r__shadow_8c.html#a0f3e0637f87b72439d92141be7304aa6">R_Shadow_BounceGrid_ClearTex_Task</a>, 0, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02829" name="l02829"></a><span class="lineno"> 2829</span>    <a class="code hl_function" href="taskqueue_8c.html#ad3874e08e0963699402a0d894b9102df">TaskQueue_Enqueue</a>(1, &amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aa1c90d5cebf0598c868db133746b1924">cleartex_task</a>);</div>
<div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span> </div>
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"> 2831</span>    <span class="comment">// calculate weighting factors for distributing photons among the lights</span></div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span>    <a class="code hl_function" href="taskqueue_8c.html#a9d3bce934d8556370189575fc769691e">TaskQueue_Setup</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aed7427c6db85135933b7f3d636a279a4">assignphotons_task</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_function" href="r__shadow_8c.html#aaf4fb1a43b7e6335253c0f3a68d6e8ca">R_Shadow_BounceGrid_AssignPhotons_Task</a>, 0, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"> 2833</span>    <a class="code hl_function" href="taskqueue_8c.html#ad3874e08e0963699402a0d894b9102df">TaskQueue_Enqueue</a>(1, &amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aed7427c6db85135933b7f3d636a279a4">assignphotons_task</a>);</div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span> </div>
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"> 2835</span>    <span class="comment">// enqueue tasks to trace the photons from lights</span></div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span>    <a class="code hl_function" href="taskqueue_8c.html#a9d3bce934d8556370189575fc769691e">TaskQueue_Setup</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a2494753cb5b6f582ea01eeb7581b9007">enqueuephotons_task</a>, &amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#aed7427c6db85135933b7f3d636a279a4">assignphotons_task</a>, <a class="code hl_function" href="r__shadow_8c.html#a9bdae801d1f2a6704de0754b19adf5d1">R_Shadow_BounceGrid_EnqueuePhotons_Task</a>, 0, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>    <a class="code hl_function" href="taskqueue_8c.html#ad3874e08e0963699402a0d894b9102df">TaskQueue_Enqueue</a>(1, &amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a2494753cb5b6f582ea01eeb7581b9007">enqueuephotons_task</a>);</div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span> </div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span>    <span class="comment">// accumulate the light paths into texture</span></div>
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"> 2840</span>    <a class="code hl_function" href="taskqueue_8c.html#a9d3bce934d8556370189575fc769691e">TaskQueue_Setup</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a534c8d842134247332565592bba6be7a">enqueue_slices_task</a>, &amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a6987ee55dc9d0685dacf0a70ef855efd">photons_done_task</a>, <a class="code hl_function" href="r__shadow_8c.html#a25e217236f416451ebf1be392ad48b0c">R_Shadow_BounceGrid_EnqueueSlices_Task</a>, 0, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"> 2841</span>    <a class="code hl_function" href="taskqueue_8c.html#ad3874e08e0963699402a0d894b9102df">TaskQueue_Enqueue</a>(1, &amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a534c8d842134247332565592bba6be7a">enqueue_slices_task</a>);</div>
<div class="line"><a id="l02842" name="l02842"></a><span class="lineno"> 2842</span> </div>
<div class="line"><a id="l02843" name="l02843"></a><span class="lineno"> 2843</span>    <span class="comment">// apply a mild blur filter to the texture</span></div>
<div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span>    <a class="code hl_function" href="taskqueue_8c.html#a9d3bce934d8556370189575fc769691e">TaskQueue_Setup</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad893c8dbd961ac662ee86363ae23b2d3">blurpixels_task</a>, &amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#a6a3baf0107986149aa2aecca4f18eae5">slices_done_task</a>, <a class="code hl_function" href="r__shadow_8c.html#a0e9d92e272adc56f7011415d517e134f">R_Shadow_BounceGrid_BlurPixels_Task</a>, 0, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span>    <a class="code hl_function" href="taskqueue_8c.html#ad3874e08e0963699402a0d894b9102df">TaskQueue_Enqueue</a>(1, &amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad893c8dbd961ac662ee86363ae23b2d3">blurpixels_task</a>);</div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span> </div>
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"> 2847</span>    <a class="code hl_function" href="taskqueue_8c.html#a63a391616e61b5636b93b6611ad65303">TaskQueue_WaitForTaskDone</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a>.<a class="code hl_variable" href="structr__shadow__bouncegrid__state__t.html#ad893c8dbd961ac662ee86363ae23b2d3">blurpixels_task</a>);</div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span>    <a class="code hl_function" href="r__stats_8c.html#a37d0d0ea10d6d220c6c01e86f944704c">R_TimeReport</a>(<span class="stringliteral">&quot;bouncegrid_gen&quot;</span>);</div>
<div class="line"><a id="l02849" name="l02849"></a><span class="lineno"> 2849</span> </div>
<div class="line"><a id="l02850" name="l02850"></a><span class="lineno"> 2850</span>    <span class="comment">// convert the pixels to lower precision and upload the texture</span></div>
<div class="line"><a id="l02851" name="l02851"></a><span class="lineno"> 2851</span>    <span class="comment">// this unfortunately has to run on the main thread for OpenGL calls, so we have to block on the previous task...</span></div>
<div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>    <a class="code hl_function" href="r__shadow_8c.html#aa7e690d5ac165d8522a86fada3f43350">R_Shadow_BounceGrid_ConvertPixelsAndUpload</a>();</div>
<div class="line"><a id="l02853" name="l02853"></a><span class="lineno"> 2853</span>    <a class="code hl_function" href="r__stats_8c.html#a37d0d0ea10d6d220c6c01e86f944704c">R_TimeReport</a>(<span class="stringliteral">&quot;bouncegrid_tex&quot;</span>);</div>
<div class="line"><a id="l02854" name="l02854"></a><span class="lineno"> 2854</span> </div>
<div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span>    <span class="comment">// after we compute the static lighting we don&#39;t need to keep the highpixels array around</span></div>
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"> 2856</span>    <span class="keywordflow">if</span> (settings.<a class="code hl_variable" href="structr__shadow__bouncegrid__settings__t.html#a8d513a7e8aa112d3c13aff3b9c2e494c">staticmode</a>)</div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span>        <a class="code hl_function" href="r__shadow_8c.html#a2e12c3123d6cad1786cdbf7001ce3207">R_Shadow_BounceGrid_FreeHighPixels</a>();</div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span>}</div>
</div>
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"> 2859</span> </div>
<div class="foldopen" id="foldopen02860" data-start="{" data-end="}">
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9726bbf07d8b90fc592f1ec058584ba8"> 2860</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a9726bbf07d8b90fc592f1ec058584ba8">R_Shadow_RenderMode_VisibleLighting</a>(<a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transparent</a>)</div>
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"> 2861</span>{</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span>    <a class="code hl_function" href="r__shadow_8c.html#aab840c0d105f7951bbafe35dd8f2f1cc">R_Shadow_RenderMode_Reset</a>();</div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>    <a class="code hl_function" href="gl__backend_8c.html#aca3e3f9f03357db16ce588778b258020">GL_BlendFunc</a>(<a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>, <a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>);</div>
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"> 2864</span>    <a class="code hl_function" href="gl__backend_8c.html#a736b5d13ba47fb7de5dafb73b3026e1a">GL_DepthRange</a>(0, 1);</div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span>    <a class="code hl_function" href="gl__backend_8c.html#a712c082566b5939b265260c5cd929033">GL_DepthTest</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a06a2f8c2455e92727760628c72f15b18">r_showlighting</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &lt; 2);</div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>    <a class="code hl_function" href="gl__backend_8c.html#ab838ec7c7331d12af34180a8b19a9b15">GL_Color</a>(0.1 * <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a1e8124ff88085c5f0235fe55d7c874b5">colorscale</a>, 0.0125 * <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a1e8124ff88085c5f0235fe55d7c874b5">colorscale</a>, 0, 1);</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">transparent</a>)</div>
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span>        <a class="code hl_function" href="gl__backend_8c.html#a5d98d0078d5c884b3e382d6ddd7eb2e1">GL_DepthFunc</a>(<a class="code hl_define" href="glquake_8h.html#ac71bf5145721bbb6c3286c70834f4394">GL_EQUAL</a>);</div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">r_shadow_rendermode</a> = <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a74b70befe054db54ea9abc789e04ed50">R_SHADOW_RENDERMODE_VISIBLELIGHTING</a>;</div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span>}</div>
</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span> </div>
<div class="foldopen" id="foldopen02872" data-start="{" data-end="}">
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ae2175aaad1171cce1dd9f531909c7732"> 2872</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ae2175aaad1171cce1dd9f531909c7732">R_Shadow_RenderMode_End</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span>{</div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span>    <a class="code hl_function" href="r__shadow_8c.html#aab840c0d105f7951bbafe35dd8f2f1cc">R_Shadow_RenderMode_Reset</a>();</div>
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"> 2875</span>    <a class="code hl_function" href="r__shadow_8c.html#adc3c945c3bc028142dddad245179892f">R_Shadow_RenderMode_ActiveLight</a>(<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span>    <a class="code hl_function" href="gl__backend_8c.html#a369132de82d4015a01e164c63255403f">GL_DepthMask</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"> 2877</span>    <a class="code hl_function" href="gl__backend_8c.html#adadda08f98e1c2d849d38d6885073148">GL_Scissor</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#ab6e28cd0da86d0623897a480caf26aa8">x</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a43bf621388acf637d4d3bbc2a2f2d1c0">y</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a2c03a2d70555c2d93c2623dabd706a4d">width</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a588496c0ad6b768495bee4c4d8f22979">height</a>);</div>
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"> 2878</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">r_shadow_rendermode</a> = <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a1f38e678baa61a27d802e5327188da61">R_SHADOW_RENDERMODE_NONE</a>;</div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>}</div>
</div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span> </div>
<div class="foldopen" id="foldopen02881" data-start="{" data-end="};">
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a153a099b2f9e5dff97df9e62c223d4d5"> 2881</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a153a099b2f9e5dff97df9e62c223d4d5">bboxedges</a>[12][2] =</div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>{</div>
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"> 2883</span>    <span class="comment">// top</span></div>
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"> 2884</span>    {0, 1}, <span class="comment">// +X</span></div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span>    {0, 2}, <span class="comment">// +Y</span></div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span>    {1, 3}, <span class="comment">// Y, +X</span></div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span>    {2, 3}, <span class="comment">// X, +Y</span></div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>    <span class="comment">// bottom</span></div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span>    {4, 5}, <span class="comment">// +X</span></div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>    {4, 6}, <span class="comment">// +Y</span></div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span>    {5, 7}, <span class="comment">// Y, +X</span></div>
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"> 2892</span>    {6, 7}, <span class="comment">// X, +Y</span></div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>    <span class="comment">// verticals</span></div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span>    {0, 4}, <span class="comment">// +Z</span></div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span>    {1, 5}, <span class="comment">// X, +Z</span></div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>    {2, 6}, <span class="comment">// Y, +Z</span></div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>    {3, 7}, <span class="comment">// XY, +Z</span></div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span>};</div>
</div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span> </div>
<div class="foldopen" id="foldopen02900" data-start="{" data-end="}">
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a20d4a825a2a263eec0869a8372fac5e2"> 2900</a></span><a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_function" href="r__shadow_8c.html#a20d4a825a2a263eec0869a8372fac5e2">R_Shadow_ScissorForBBox</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> *mins, <span class="keyword">const</span> <span class="keywordtype">float</span> *maxs)</div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span>{</div>
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"> 2902</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a53f4535c03dadf6efe7d7ac109a5c2d3">r_shadow_scissor</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> || <a class="code hl_variable" href="r__shadow_8c.html#a4b5a72c38504bc6ea78e695f2ed16aca">r_shadow_usingdeferredprepass</a> || <a class="code hl_variable" href="model__brush_8c.html#ad36726f56533f8ed61f03c9bf2faa194">r_trippy</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span>    {</div>
<div class="line"><a id="l02904" name="l02904"></a><span class="lineno"> 2904</span>        <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[0] = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#ab6e28cd0da86d0623897a480caf26aa8">x</a>;</div>
<div class="line"><a id="l02905" name="l02905"></a><span class="lineno"> 2905</span>        <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[1] = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a43bf621388acf637d4d3bbc2a2f2d1c0">y</a>;</div>
<div class="line"><a id="l02906" name="l02906"></a><span class="lineno"> 2906</span>        <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[2] = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a2c03a2d70555c2d93c2623dabd706a4d">width</a>;</div>
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"> 2907</span>        <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[3] = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a588496c0ad6b768495bee4c4d8f22979">height</a>;</div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"> 2908</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"> 2909</span>    }</div>
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"> 2910</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="gl__backend_8c.html#acb01973bd77bf8b8275950e1cd2a3249">R_ScissorForBBox</a>(mins, maxs, <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>))</div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// invisible</span></div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[0] != <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#ab6e28cd0da86d0623897a480caf26aa8">x</a></div>
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"> 2913</span>    || <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[1] != <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a43bf621388acf637d4d3bbc2a2f2d1c0">y</a></div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>    || <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[2] != <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a2c03a2d70555c2d93c2623dabd706a4d">width</a></div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>    || <a class="code hl_variable" href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a>[3] != <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a588496c0ad6b768495bee4c4d8f22979">height</a>)</div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span>        <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#acb0c53994baa529557477269d81d5507">stats</a>[<a class="code hl_enumvalue" href="r__stats_8h.html#ae611154931c203d788794752dda991f8ab6e706a1e0de55074264af370a89ff7b">r_stat_lights_scissored</a>]++;</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02918" name="l02918"></a><span class="lineno"> 2918</span>}</div>
</div>
<div class="line"><a id="l02919" name="l02919"></a><span class="lineno"> 2919</span> </div>
<div class="foldopen" id="foldopen02920" data-start="{" data-end="}">
<div class="line"><a id="l02920" name="l02920"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0079ca9804591c3f0dc035fdcae085b5"> 2920</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a0079ca9804591c3f0dc035fdcae085b5">R_Shadow_RenderLighting_VisibleLighting</a>(<span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturenumsurfaces</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> **<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesurfacelist</a>)</div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span>{</div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>    <span class="comment">// used to display how many times a surface is lit for level design purposes</span></div>
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"> 2923</span>    <a class="code hl_function" href="gl__rmain_8c.html#a0ca297a89eef7f0e1dcf0c12676700da">RSurf_PrepareVerticesForBatch</a>(<a class="code hl_define" href="render_8h.html#ad1829856c3a0d7372af1a488c10ac60c">BATCHNEED_ARRAY_VERTEX</a> | <a class="code hl_define" href="render_8h.html#a7b49f2edb9fa235d6b832598b25ee37a">BATCHNEED_NOGAPS</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturenumsurfaces</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesurfacelist</a>);</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span>    <a class="code hl_function" href="gl__backend_8c.html#add6233d245d2e22c748e7d0e03204acd">R_Mesh_PrepareVertices_Generic_Arrays</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a56b195e7a473f8b990268a1c669962f2">batchnumvertices</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#ad1645a9257b4f998f1b34ed4846d0e95">batchvertex3f</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02925" name="l02925"></a><span class="lineno"> 2925</span>    <a class="code hl_function" href="gl__rmain_8c.html#a3d9e4102d980a25f2241b1801076ee19">RSurf_DrawBatch</a>();</div>
<div class="line"><a id="l02926" name="l02926"></a><span class="lineno"> 2926</span>}</div>
</div>
<div class="line"><a id="l02927" name="l02927"></a><span class="lineno"> 2927</span> </div>
<div class="foldopen" id="foldopen02928" data-start="{" data-end="}">
<div class="line"><a id="l02928" name="l02928"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a83b983e2608dba70436eb85cdaf33e5a"> 2928</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a83b983e2608dba70436eb85cdaf33e5a">R_Shadow_RenderLighting_Light_GLSL</a>(<span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturenumsurfaces</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> **<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesurfacelist</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambientcolor</a>[3], <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffusecolor</a>[3], <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">specularcolor</a>[3])</div>
<div class="line"><a id="l02929" name="l02929"></a><span class="lineno"> 2929</span>{</div>
<div class="line"><a id="l02930" name="l02930"></a><span class="lineno"> 2930</span>    <span class="comment">// ARB2 GLSL shader path (GFFX5200, Radeon 9500)</span></div>
<div class="line"><a id="l02931" name="l02931"></a><span class="lineno"> 2931</span>    <a class="code hl_function" href="gl__rmain_8c.html#ace4a2750caaa0bcbe5bbaa56e8fd306d">R_SetupShader_Surface</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambientcolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffusecolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">specularcolor</a>, <a class="code hl_enumvalue" href="render_8h.html#ae4703cc674971877b867746f23b8fbdaab5c42761f33d7c34e8d72203c78cee84">RSURFPASS_RTLIGHT</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturenumsurfaces</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesurfacelist</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l02932" name="l02932"></a><span class="lineno"> 2932</span>    <a class="code hl_function" href="gl__rmain_8c.html#a3d9e4102d980a25f2241b1801076ee19">RSurf_DrawBatch</a>();</div>
<div class="line"><a id="l02933" name="l02933"></a><span class="lineno"> 2933</span>}</div>
</div>
<div class="line"><a id="l02934" name="l02934"></a><span class="lineno"> 2934</span> </div>
<div class="line"><a id="l02935" name="l02935"></a><span class="lineno"> 2935</span><span class="keyword">extern</span> <a class="code hl_struct" href="structcvar__t.html">cvar_t</a> <a class="code hl_variable" href="r__shadow_8c.html#ab586eaf6c1873d6f552adffc83869980">gl_lightmaps</a>;</div>
<div class="foldopen" id="foldopen02936" data-start="{" data-end="}">
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a8c4f4f24a1d9fdc0e94394241efc163f"> 2936</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a8c4f4f24a1d9fdc0e94394241efc163f">R_Shadow_RenderLighting</a>(<span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturenumsurfaces</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> **<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesurfacelist</a>)</div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span>{</div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">negated</a>;</div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambientcolor</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffusecolor</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">specularcolor</a>[3];</div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span>    <a class="code hl_define" href="mathlib_8h.html#af70318c5d2e391de8700dad56d5db315">VectorM</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a03ef425e5912ea3081d21e59478cd954">ambientscale</a> + <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a802a90bb31d5e1ba2ef6cbad52bb8c95">texture</a>-&gt;<a class="code hl_variable" href="structtexture__t.html#a8946bca9c9255580592833f2675de406">rtlightambient</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a802a90bb31d5e1ba2ef6cbad52bb8c95">texture</a>-&gt;<a class="code hl_variable" href="structtexture__t.html#a677b2d189df2a69c92cf8bd928cdcf2e">render_rtlight_diffuse</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambientcolor</a>);</div>
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"> 2941</span>    <a class="code hl_define" href="mathlib_8h.html#af70318c5d2e391de8700dad56d5db315">VectorM</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad8280f61360048850261e9c3e502c179">diffusescale</a> * <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(0, 1.0 - <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a802a90bb31d5e1ba2ef6cbad52bb8c95">texture</a>-&gt;<a class="code hl_variable" href="structtexture__t.html#a8946bca9c9255580592833f2675de406">rtlightambient</a>), <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a802a90bb31d5e1ba2ef6cbad52bb8c95">texture</a>-&gt;<a class="code hl_variable" href="structtexture__t.html#a677b2d189df2a69c92cf8bd928cdcf2e">render_rtlight_diffuse</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffusecolor</a>);</div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span>    <a class="code hl_define" href="mathlib_8h.html#af70318c5d2e391de8700dad56d5db315">VectorM</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a69efc0c4f5d373479bb9487d6bec228f">specularscale</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a802a90bb31d5e1ba2ef6cbad52bb8c95">texture</a>-&gt;<a class="code hl_variable" href="structtexture__t.html#a0e73ef069b96d5d2b8cbda0d336296f0">render_rtlight_specular</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">specularcolor</a>);</div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a0e0cbe65920fb236c82e2c50f4f7880b">r_shadow_usenormalmap</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span>    {</div>
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"> 2945</span>        <a class="code hl_define" href="mathlib_8h.html#aa81f0bf735070a2a0876095e289c0e9b">VectorMAM</a>(1.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambientcolor</a>, 1.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffusecolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambientcolor</a>);</div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffusecolor</a>);</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">specularcolor</a>);</div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span>    }</div>
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"> 2949</span>    <a class="code hl_define" href="mathlib_8h.html#a98b9777201ede3788372b98e190aed44">VectorMultiply</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambientcolor</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambientcolor</a>);</div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span>    <a class="code hl_define" href="mathlib_8h.html#a98b9777201ede3788372b98e190aed44">VectorMultiply</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffusecolor</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffusecolor</a>);</div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>    <a class="code hl_define" href="mathlib_8h.html#a98b9777201ede3788372b98e190aed44">VectorMultiply</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">specularcolor</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">specularcolor</a>);</div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambientcolor</a>) + <a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffusecolor</a>) + <a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">specularcolor</a>) &lt; (1.0f / 1048576.0f))</div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">negated</a> = (<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>[0] + <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>[1] + <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>[2] &lt; 0);</div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">negated</a>)</div>
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"> 2956</span>    {</div>
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"> 2957</span>        <a class="code hl_define" href="mathlib_8h.html#a28f9f1fe5f50e359e016f7e4e04f8cf1">VectorNegate</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambientcolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambientcolor</a>);</div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span>        <a class="code hl_define" href="mathlib_8h.html#a28f9f1fe5f50e359e016f7e4e04f8cf1">VectorNegate</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffusecolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffusecolor</a>);</div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span>        <a class="code hl_define" href="mathlib_8h.html#a28f9f1fe5f50e359e016f7e4e04f8cf1">VectorNegate</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">specularcolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">specularcolor</a>);</div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span>        <a class="code hl_function" href="gl__backend_8c.html#a23c98d4ba5a86391a8ecb2363252e874">GL_BlendEquationSubtract</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span>    }</div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span>    <a class="code hl_function" href="gl__rmain_8c.html#a95ff76317961bca4d507e2a301cc3278">RSurf_SetupDepthAndCulling</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l02963" name="l02963"></a><span class="lineno"> 2963</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">r_shadow_rendermode</a>)</div>
<div class="line"><a id="l02964" name="l02964"></a><span class="lineno"> 2964</span>    {</div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a74b70befe054db54ea9abc789e04ed50">R_SHADOW_RENDERMODE_VISIBLELIGHTING</a>:</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span>        <a class="code hl_function" href="gl__backend_8c.html#a712c082566b5939b265260c5cd929033">GL_DepthTest</a>(!(<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a802a90bb31d5e1ba2ef6cbad52bb8c95">texture</a>-&gt;<a class="code hl_variable" href="structtexture__t.html#a3cf738577a78c45a3c19a2e1e649f804">currentmaterialflags</a> &amp; <a class="code hl_define" href="model__brush_8h.html#a9253d0a5f545e0dbe55388deee9624ec">MATERIALFLAG_NODEPTHTEST</a>) &amp;&amp; !<a class="code hl_variable" href="gl__rmain_8c.html#ac8946f774e762f253a86b6a8171a7aba">r_showdisabledepthtest</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>);</div>
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"> 2967</span>        <a class="code hl_function" href="r__shadow_8c.html#a0079ca9804591c3f0dc035fdcae085b5">R_Shadow_RenderLighting_VisibleLighting</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturenumsurfaces</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesurfacelist</a>);</div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02969" name="l02969"></a><span class="lineno"> 2969</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a8a705347d610f9d1611a45d02d370181">R_SHADOW_RENDERMODE_LIGHT_GLSL</a>:</div>
<div class="line"><a id="l02970" name="l02970"></a><span class="lineno"> 2970</span>        <a class="code hl_function" href="r__shadow_8c.html#a83b983e2608dba70436eb85cdaf33e5a">R_Shadow_RenderLighting_Light_GLSL</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturenumsurfaces</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texturesurfacelist</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambientcolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffusecolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">specularcolor</a>);</div>
<div class="line"><a id="l02971" name="l02971"></a><span class="lineno"> 2971</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;R_Shadow_RenderLighting: unknown r_shadow_rendermode %i\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">r_shadow_rendermode</a>);</div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02975" name="l02975"></a><span class="lineno"> 2975</span>    }</div>
<div class="line"><a id="l02976" name="l02976"></a><span class="lineno"> 2976</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">negated</a>)</div>
<div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span>        <a class="code hl_function" href="gl__backend_8c.html#a23c98d4ba5a86391a8ecb2363252e874">GL_BlendEquationSubtract</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span>}</div>
</div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span> </div>
<div class="foldopen" id="foldopen02980" data-start="{" data-end="}">
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a808b4850191116867f66c1e6fb2ced6a"> 2980</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a808b4850191116867f66c1e6fb2ced6a">R_RTLight_Update</a>(<a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight, <span class="keywordtype">int</span> isstatic, <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> *matrix, <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, <span class="keywordtype">int</span> style, <span class="keyword">const</span> <span class="keywordtype">char</span> *cubemapname, <span class="keywordtype">int</span> shadow, <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> corona, <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> coronasizescale, <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> ambientscale, <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> diffusescale, <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> specularscale, <span class="keywordtype">int</span> flags)</div>
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"> 2981</span>{</div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span>    <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempmatrix</a> = *matrix;</div>
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"> 2983</span>    <a class="code hl_function" href="matrixlib_8c.html#af65cf0cf8374d8107db25a439fbd2d94">Matrix4x4_Scale</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempmatrix</a>, <a class="code hl_variable" href="r__shadow_8c.html#a01ac7c513ed4e93f4ad227ca6592b63a">r_shadow_lightradiusscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, 1);</div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span> </div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span>    <span class="comment">// if this light has been compiled before, free the associated data</span></div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span>    <a class="code hl_function" href="r__shadow_8c.html#a7ea0ca4b83d5a9b2d6168c80253b6324">R_RTLight_Uncompile</a>(rtlight);</div>
<div class="line"><a id="l02987" name="l02987"></a><span class="lineno"> 2987</span> </div>
<div class="line"><a id="l02988" name="l02988"></a><span class="lineno"> 2988</span>    <span class="comment">// clear it completely to avoid any lingering data</span></div>
<div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memset</a>(rtlight, 0, <span class="keyword">sizeof</span>(*rtlight));</div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span> </div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span>    <span class="comment">// copy the properties</span></div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab89a43403b944e77e37a1e7433472964">matrix_lighttoworld</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempmatrix</a>;</div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span>    <a class="code hl_function" href="matrixlib_8c.html#aa9b7b6f7c5bbf266334f17a9c5e125bc">Matrix4x4_Invert_Simple</a>(&amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempmatrix</a>);</div>
<div class="line"><a id="l02994" name="l02994"></a><span class="lineno"> 2994</span>    <a class="code hl_function" href="matrixlib_8c.html#afa5873e4026ae22dd9e6aa9177930ef0">Matrix4x4_OriginFromMatrix</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempmatrix</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>);</div>
<div class="line"><a id="l02995" name="l02995"></a><span class="lineno"> 2995</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a> = <a class="code hl_function" href="matrixlib_8c.html#ab6b9fb4e085d3cd32f5e9043d3d884ec">Matrix4x4_ScaleFromMatrix</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempmatrix</a>);</div>
<div class="line"><a id="l02996" name="l02996"></a><span class="lineno"> 2996</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a478dcfe9a294410ade3e764a7905d597">color</a>);</div>
<div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aafd3538635e6fe28af39579aee2ac8d1">cubemapname</a>[0] = 0;</div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span>    <span class="keywordflow">if</span> (cubemapname &amp;&amp; cubemapname[0])</div>
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"> 2999</span>        <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aafd3538635e6fe28af39579aee2ac8d1">cubemapname</a>, cubemapname, <span class="keyword">sizeof</span>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aafd3538635e6fe28af39579aee2ac8d1">cubemapname</a>));</div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a24a17e99722f1493e45d4a240584a80c">shadow</a> = shadow;</div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a613df3791630f957d8826553a01f9a83">corona</a> = corona;</div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a86717e6c13a6c77eb41f0f0dd6d2fca6">style</a> = style;</div>
<div class="line"><a id="l03003" name="l03003"></a><span class="lineno"> 3003</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa2160b1bf94f48ab6fad8b05a23f9ad4">isstatic</a> = isstatic;</div>
<div class="line"><a id="l03004" name="l03004"></a><span class="lineno"> 3004</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa823bfc56c4908849e655db66dbdab89">coronasizescale</a> = coronasizescale;</div>
<div class="line"><a id="l03005" name="l03005"></a><span class="lineno"> 3005</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a03ef425e5912ea3081d21e59478cd954">ambientscale</a> = ambientscale;</div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad8280f61360048850261e9c3e502c179">diffusescale</a> = diffusescale;</div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a69efc0c4f5d373479bb9487d6bec228f">specularscale</a> = specularscale;</div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a78fc39a7fe3cda236c6209eebcde22c9">flags</a> = flags;</div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span> </div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span>    <span class="comment">// compute derived data</span></div>
<div class="line"><a id="l03011" name="l03011"></a><span class="lineno"> 3011</span>    <span class="comment">//rtlight-&gt;cullradius = rtlight-&gt;radius;</span></div>
<div class="line"><a id="l03012" name="l03012"></a><span class="lineno"> 3012</span>    <span class="comment">//rtlight-&gt;cullradius2 = rtlight-&gt;radius * rtlight-&gt;radius;</span></div>
<div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>[0] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[0] - rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>[1] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[1] - rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>[2] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[2] - rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l03016" name="l03016"></a><span class="lineno"> 3016</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>[0] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[0] + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l03017" name="l03017"></a><span class="lineno"> 3017</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>[1] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[1] + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>[2] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[2] + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span>}</div>
</div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span> </div>
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"> 3021</span><span class="comment">// compiles rtlight geometry</span></div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span><span class="comment">// (undone by R_FreeCompiledRTLight, which R_UpdateLight calls)</span></div>
<div class="foldopen" id="foldopen03023" data-start="{" data-end="}">
<div class="line"><a id="l03023" name="l03023"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aeb1bb97aa2a8b56c567074f7a1ae93ff"> 3023</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#aeb1bb97aa2a8b56c567074f7a1ae93ff">R_RTLight_Compile</a>(<a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight)</div>
<div class="line"><a id="l03024" name="l03024"></a><span class="lineno"> 3024</span>{</div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span>    <span class="keywordtype">int</span> numsurfaces, numleafs, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numleafpvsbytes</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowtrispvsbytes</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlighttrispvsbytes</a>;</div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lighttris</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowtris</a>;</div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>    <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *ent = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ae4dfd0ad65bd2cecac4d12f329e331ca">worldentity</a>;</div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *model = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>;</div>
<div class="line"><a id="l03030" name="l03030"></a><span class="lineno"> 3030</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;</div>
<div class="line"><a id="l03031" name="l03031"></a><span class="lineno"> 3031</span> </div>
<div class="line"><a id="l03032" name="l03032"></a><span class="lineno"> 3032</span>    <span class="comment">// compile the light</span></div>
<div class="line"><a id="l03033" name="l03033"></a><span class="lineno"> 3033</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7c0681e500106dd86254191a2605b83e">compiled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03034" name="l03034"></a><span class="lineno"> 3034</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad9e77f1a895bbf4a497b638012042312">static_numleafs</a> = 0;</div>
<div class="line"><a id="l03035" name="l03035"></a><span class="lineno"> 3035</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a6855ee98352b318752d7700e87015c9f">static_numleafpvsbytes</a> = 0;</div>
<div class="line"><a id="l03036" name="l03036"></a><span class="lineno"> 3036</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aaf33c55cde8363f4070be2acb1a55e1f">static_leaflist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03037" name="l03037"></a><span class="lineno"> 3037</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a3803b95ad10433c09d2974d5b58479f6">static_leafpvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03038" name="l03038"></a><span class="lineno"> 3038</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab05c3b11158c2d4cb373e8e07c17cce6">static_numsurfaces</a> = 0;</div>
<div class="line"><a id="l03039" name="l03039"></a><span class="lineno"> 3039</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adfa63f879a3f5d78dc6b3c10b34c52b6">static_surfacelist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03040" name="l03040"></a><span class="lineno"> 3040</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a292c8a191142204ba5103e7ff65d126c">static_shadowmap_receivers</a> = 0x3F;</div>
<div class="line"><a id="l03041" name="l03041"></a><span class="lineno"> 3041</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a48f75788286c6cc3afaf9b358836f60a">static_shadowmap_casters</a> = 0x3F;</div>
<div class="line"><a id="l03042" name="l03042"></a><span class="lineno"> 3042</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>[0] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[0] - rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l03043" name="l03043"></a><span class="lineno"> 3043</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>[1] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[1] - rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l03044" name="l03044"></a><span class="lineno"> 3044</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>[2] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[2] - rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l03045" name="l03045"></a><span class="lineno"> 3045</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>[0] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[0] + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l03046" name="l03046"></a><span class="lineno"> 3046</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>[1] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[1] + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l03047" name="l03047"></a><span class="lineno"> 3047</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>[2] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>[2] + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l03048" name="l03048"></a><span class="lineno"> 3048</span> </div>
<div class="line"><a id="l03049" name="l03049"></a><span class="lineno"> 3049</span>    <span class="keywordflow">if</span> (model &amp;&amp; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a7a0081b6e77854bd75ae206afba89148">GetLightInfo</a>)</div>
<div class="line"><a id="l03050" name="l03050"></a><span class="lineno"> 3050</span>    {</div>
<div class="line"><a id="l03051" name="l03051"></a><span class="lineno"> 3051</span>        <span class="comment">// this variable must be set for the CompileShadowMap code</span></div>
<div class="line"><a id="l03052" name="l03052"></a><span class="lineno"> 3052</span>        <a class="code hl_variable" href="r__shadow_8c.html#aa270795a82b2335cb10e2c83f5e9aa76">r_shadow_compilingrtlight</a> = rtlight;</div>
<div class="line"><a id="l03053" name="l03053"></a><span class="lineno"> 3053</span>        <a class="code hl_function" href="gl__rmain_8c.html#a01cb2adf1d532722b7b349786a3d55f3">R_FrameData_SetMark</a>();</div>
<div class="line"><a id="l03054" name="l03054"></a><span class="lineno"> 3054</span>        model-&gt;<a class="code hl_variable" href="structmodel__t.html#a7a0081b6e77854bd75ae206afba89148">GetLightInfo</a>(ent, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>, <a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a>, <a class="code hl_variable" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a>, &amp;numleafs, <a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a>, <a class="code hl_variable" href="r__shadow_8c.html#a31e6522610c02f09559b7bd8bd75c558">r_shadow_buffer_surfacepvs</a>, &amp;numsurfaces, <a class="code hl_variable" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a>, <a class="code hl_variable" href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">r_shadow_buffer_lighttrispvs</a>, <a class="code hl_variable" href="r__shadow_8c.html#a358d50682355dd070731495eb5ccd19c">r_shadow_buffer_visitingleafpvs</a>, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a24a17e99722f1493e45d4a240584a80c">shadow</a> == 0);</div>
<div class="line"><a id="l03055" name="l03055"></a><span class="lineno"> 3055</span>        <a class="code hl_function" href="gl__rmain_8c.html#a13b4f59e3ee0aaddd39baf188b714b08">R_FrameData_ReturnToMark</a>();</div>
<div class="line"><a id="l03056" name="l03056"></a><span class="lineno"> 3056</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numleafpvsbytes</a> = (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ad2ccc84f01460e7bde735898ed077860">num_leafs</a> + 7) &gt;&gt; 3;</div>
<div class="line"><a id="l03057" name="l03057"></a><span class="lineno"> 3057</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowtrispvsbytes</a> = (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> + 7) &gt;&gt; 3;</div>
<div class="line"><a id="l03058" name="l03058"></a><span class="lineno"> 3058</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlighttrispvsbytes</a> = (model-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> + 7) &gt;&gt; 3;</div>
<div class="line"><a id="l03059" name="l03059"></a><span class="lineno"> 3059</span>        <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * numsurfaces + <span class="keyword">sizeof</span>(<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>) * numleafs + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numleafpvsbytes</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowtrispvsbytes</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlighttrispvsbytes</a>);</div>
<div class="line"><a id="l03060" name="l03060"></a><span class="lineno"> 3060</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab05c3b11158c2d4cb373e8e07c17cce6">static_numsurfaces</a> = numsurfaces;</div>
<div class="line"><a id="l03061" name="l03061"></a><span class="lineno"> 3061</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adfa63f879a3f5d78dc6b3c10b34c52b6">static_surfacelist</a> = (<span class="keywordtype">int</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <span class="keyword">sizeof</span>(<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>) * numsurfaces;</div>
<div class="line"><a id="l03062" name="l03062"></a><span class="lineno"> 3062</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad9e77f1a895bbf4a497b638012042312">static_numleafs</a> = numleafs;</div>
<div class="line"><a id="l03063" name="l03063"></a><span class="lineno"> 3063</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aaf33c55cde8363f4070be2acb1a55e1f">static_leaflist</a> = (<span class="keywordtype">int</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <span class="keyword">sizeof</span>(<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>) * numleafs;</div>
<div class="line"><a id="l03064" name="l03064"></a><span class="lineno"> 3064</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a6855ee98352b318752d7700e87015c9f">static_numleafpvsbytes</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numleafpvsbytes</a>;</div>
<div class="line"><a id="l03065" name="l03065"></a><span class="lineno"> 3065</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a3803b95ad10433c09d2974d5b58479f6">static_leafpvs</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numleafpvsbytes</a>;</div>
<div class="line"><a id="l03066" name="l03066"></a><span class="lineno"> 3066</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac7712a9c6887d6e456e70a0a2f1d4063">static_numshadowtrispvsbytes</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowtrispvsbytes</a>;</div>
<div class="line"><a id="l03067" name="l03067"></a><span class="lineno"> 3067</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1ba178cb4540e85311afb777cff67eed">static_shadowtrispvs</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowtrispvsbytes</a>;</div>
<div class="line"><a id="l03068" name="l03068"></a><span class="lineno"> 3068</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa7c4f77c4ff139744687e4e97370207c">static_numlighttrispvsbytes</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlighttrispvsbytes</a>;</div>
<div class="line"><a id="l03069" name="l03069"></a><span class="lineno"> 3069</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a843540e766395ab0cf86fdb2976d3016">static_lighttrispvs</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlighttrispvsbytes</a>;</div>
<div class="line"><a id="l03070" name="l03070"></a><span class="lineno"> 3070</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab05c3b11158c2d4cb373e8e07c17cce6">static_numsurfaces</a>)</div>
<div class="line"><a id="l03071" name="l03071"></a><span class="lineno"> 3071</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adfa63f879a3f5d78dc6b3c10b34c52b6">static_surfacelist</a>, <a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab05c3b11158c2d4cb373e8e07c17cce6">static_numsurfaces</a> * <span class="keyword">sizeof</span>(*rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adfa63f879a3f5d78dc6b3c10b34c52b6">static_surfacelist</a>));</div>
<div class="line"><a id="l03072" name="l03072"></a><span class="lineno"> 3072</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad9e77f1a895bbf4a497b638012042312">static_numleafs</a>)</div>
<div class="line"><a id="l03073" name="l03073"></a><span class="lineno"> 3073</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aaf33c55cde8363f4070be2acb1a55e1f">static_leaflist</a>, <a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad9e77f1a895bbf4a497b638012042312">static_numleafs</a> * <span class="keyword">sizeof</span>(*rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aaf33c55cde8363f4070be2acb1a55e1f">static_leaflist</a>));</div>
<div class="line"><a id="l03074" name="l03074"></a><span class="lineno"> 3074</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a6855ee98352b318752d7700e87015c9f">static_numleafpvsbytes</a>)</div>
<div class="line"><a id="l03075" name="l03075"></a><span class="lineno"> 3075</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a3803b95ad10433c09d2974d5b58479f6">static_leafpvs</a>, <a class="code hl_variable" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a6855ee98352b318752d7700e87015c9f">static_numleafpvsbytes</a>);</div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac7712a9c6887d6e456e70a0a2f1d4063">static_numshadowtrispvsbytes</a>)</div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1ba178cb4540e85311afb777cff67eed">static_shadowtrispvs</a>, <a class="code hl_variable" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac7712a9c6887d6e456e70a0a2f1d4063">static_numshadowtrispvsbytes</a>);</div>
<div class="line"><a id="l03078" name="l03078"></a><span class="lineno"> 3078</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa7c4f77c4ff139744687e4e97370207c">static_numlighttrispvsbytes</a>)</div>
<div class="line"><a id="l03079" name="l03079"></a><span class="lineno"> 3079</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a843540e766395ab0cf86fdb2976d3016">static_lighttrispvs</a>, <a class="code hl_variable" href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">r_shadow_buffer_lighttrispvs</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa7c4f77c4ff139744687e4e97370207c">static_numlighttrispvsbytes</a>);</div>
<div class="line"><a id="l03080" name="l03080"></a><span class="lineno"> 3080</span>        <a class="code hl_function" href="gl__rmain_8c.html#a01cb2adf1d532722b7b349786a3d55f3">R_FrameData_SetMark</a>();</div>
<div class="line"><a id="l03081" name="l03081"></a><span class="lineno"> 3081</span>        <span class="keywordflow">if</span> (model-&gt;<a class="code hl_variable" href="structmodel__t.html#aaba719ee8f91d844c266a62e4661aad9">CompileShadowMap</a> &amp;&amp; rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a24a17e99722f1493e45d4a240584a80c">shadow</a>)</div>
<div class="line"><a id="l03082" name="l03082"></a><span class="lineno"> 3082</span>            model-&gt;<a class="code hl_variable" href="structmodel__t.html#aaba719ee8f91d844c266a62e4661aad9">CompileShadowMap</a>(ent, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>, numsurfaces, <a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a>);</div>
<div class="line"><a id="l03083" name="l03083"></a><span class="lineno"> 3083</span>        <a class="code hl_function" href="gl__rmain_8c.html#a13b4f59e3ee0aaddd39baf188b714b08">R_FrameData_ReturnToMark</a>();</div>
<div class="line"><a id="l03084" name="l03084"></a><span class="lineno"> 3084</span>        <span class="comment">// now we&#39;re done compiling the rtlight</span></div>
<div class="line"><a id="l03085" name="l03085"></a><span class="lineno"> 3085</span>        <a class="code hl_variable" href="r__shadow_8c.html#aa270795a82b2335cb10e2c83f5e9aa76">r_shadow_compilingrtlight</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03086" name="l03086"></a><span class="lineno"> 3086</span>    }</div>
<div class="line"><a id="l03087" name="l03087"></a><span class="lineno"> 3087</span> </div>
<div class="line"><a id="l03088" name="l03088"></a><span class="lineno"> 3088</span> </div>
<div class="line"><a id="l03089" name="l03089"></a><span class="lineno"> 3089</span>    <span class="comment">// use smallest available cullradius - box radius or light radius</span></div>
<div class="line"><a id="l03090" name="l03090"></a><span class="lineno"> 3090</span>    <span class="comment">//rtlight-&gt;cullradius = RadiusFromBoundsAndOrigin(rtlight-&gt;cullmins, rtlight-&gt;cullmaxs, rtlight-&gt;shadoworigin);</span></div>
<div class="line"><a id="l03091" name="l03091"></a><span class="lineno"> 3091</span>    <span class="comment">//rtlight-&gt;cullradius = min(rtlight-&gt;cullradius, rtlight-&gt;radius);</span></div>
<div class="line"><a id="l03092" name="l03092"></a><span class="lineno"> 3092</span> </div>
<div class="line"><a id="l03093" name="l03093"></a><span class="lineno"> 3093</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lighttris</a> = 0;</div>
<div class="line"><a id="l03094" name="l03094"></a><span class="lineno"> 3094</span>    <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa7c4f77c4ff139744687e4e97370207c">static_numlighttrispvsbytes</a>)</div>
<div class="line"><a id="l03095" name="l03095"></a><span class="lineno"> 3095</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa7c4f77c4ff139744687e4e97370207c">static_numlighttrispvsbytes</a>*8;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03096" name="l03096"></a><span class="lineno"> 3096</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="model__brush_8h.html#a6aaa281ecfff2614bfd32a87a353ad5f">CHECKPVSBIT</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a843540e766395ab0cf86fdb2976d3016">static_lighttrispvs</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>))</div>
<div class="line"><a id="l03097" name="l03097"></a><span class="lineno"> 3097</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lighttris</a>++;</div>
<div class="line"><a id="l03098" name="l03098"></a><span class="lineno"> 3098</span> </div>
<div class="line"><a id="l03099" name="l03099"></a><span class="lineno"> 3099</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowtris</a> = 0;</div>
<div class="line"><a id="l03100" name="l03100"></a><span class="lineno"> 3100</span>    <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac7712a9c6887d6e456e70a0a2f1d4063">static_numshadowtrispvsbytes</a>)</div>
<div class="line"><a id="l03101" name="l03101"></a><span class="lineno"> 3101</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac7712a9c6887d6e456e70a0a2f1d4063">static_numshadowtrispvsbytes</a>*8;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03102" name="l03102"></a><span class="lineno"> 3102</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="model__brush_8h.html#a6aaa281ecfff2614bfd32a87a353ad5f">CHECKPVSBIT</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1ba178cb4540e85311afb777cff67eed">static_shadowtrispvs</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>))</div>
<div class="line"><a id="l03103" name="l03103"></a><span class="lineno"> 3103</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowtris</a>++;</div>
<div class="line"><a id="l03104" name="l03104"></a><span class="lineno"> 3104</span> </div>
<div class="line"><a id="l03105" name="l03105"></a><span class="lineno"> 3105</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a2d29d0100dc86ae96b813350bb2b6c32">developer_extra</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l03106" name="l03106"></a><span class="lineno"> 3106</span>        <a class="code hl_function" href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a>(<span class="stringliteral">&quot;static light built: %f %f %f : %f %f %f box, %i light triangles, %i shadow triangles\n&quot;</span>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>[1], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>[2], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>[1], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>[2], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lighttris</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowtris</a>);</div>
<div class="line"><a id="l03107" name="l03107"></a><span class="lineno"> 3107</span>}</div>
</div>
<div class="line"><a id="l03108" name="l03108"></a><span class="lineno"> 3108</span> </div>
<div class="foldopen" id="foldopen03109" data-start="{" data-end="}">
<div class="line"><a id="l03109" name="l03109"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7ea0ca4b83d5a9b2d6168c80253b6324"> 3109</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a7ea0ca4b83d5a9b2d6168c80253b6324">R_RTLight_Uncompile</a>(<a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight)</div>
<div class="line"><a id="l03110" name="l03110"></a><span class="lineno"> 3110</span>{</div>
<div class="line"><a id="l03111" name="l03111"></a><span class="lineno"> 3111</span>    <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7c0681e500106dd86254191a2605b83e">compiled</a>)</div>
<div class="line"><a id="l03112" name="l03112"></a><span class="lineno"> 3112</span>    {</div>
<div class="line"><a id="l03113" name="l03113"></a><span class="lineno"> 3113</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a98ea18bbb779ac1aa193be665e3f3142">static_meshchain_shadow_shadowmap</a>)</div>
<div class="line"><a id="l03114" name="l03114"></a><span class="lineno"> 3114</span>            <a class="code hl_function" href="model__shared_8c.html#a3ec29c084356454f725c32198d27544d">Mod_ShadowMesh_Free</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a98ea18bbb779ac1aa193be665e3f3142">static_meshchain_shadow_shadowmap</a>);</div>
<div class="line"><a id="l03115" name="l03115"></a><span class="lineno"> 3115</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a98ea18bbb779ac1aa193be665e3f3142">static_meshchain_shadow_shadowmap</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03116" name="l03116"></a><span class="lineno"> 3116</span>        <span class="comment">// these allocations are grouped</span></div>
<div class="line"><a id="l03117" name="l03117"></a><span class="lineno"> 3117</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adfa63f879a3f5d78dc6b3c10b34c52b6">static_surfacelist</a>)</div>
<div class="line"><a id="l03118" name="l03118"></a><span class="lineno"> 3118</span>            <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adfa63f879a3f5d78dc6b3c10b34c52b6">static_surfacelist</a>);</div>
<div class="line"><a id="l03119" name="l03119"></a><span class="lineno"> 3119</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad9e77f1a895bbf4a497b638012042312">static_numleafs</a> = 0;</div>
<div class="line"><a id="l03120" name="l03120"></a><span class="lineno"> 3120</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a6855ee98352b318752d7700e87015c9f">static_numleafpvsbytes</a> = 0;</div>
<div class="line"><a id="l03121" name="l03121"></a><span class="lineno"> 3121</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aaf33c55cde8363f4070be2acb1a55e1f">static_leaflist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03122" name="l03122"></a><span class="lineno"> 3122</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a3803b95ad10433c09d2974d5b58479f6">static_leafpvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03123" name="l03123"></a><span class="lineno"> 3123</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab05c3b11158c2d4cb373e8e07c17cce6">static_numsurfaces</a> = 0;</div>
<div class="line"><a id="l03124" name="l03124"></a><span class="lineno"> 3124</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adfa63f879a3f5d78dc6b3c10b34c52b6">static_surfacelist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03125" name="l03125"></a><span class="lineno"> 3125</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac7712a9c6887d6e456e70a0a2f1d4063">static_numshadowtrispvsbytes</a> = 0;</div>
<div class="line"><a id="l03126" name="l03126"></a><span class="lineno"> 3126</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1ba178cb4540e85311afb777cff67eed">static_shadowtrispvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03127" name="l03127"></a><span class="lineno"> 3127</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa7c4f77c4ff139744687e4e97370207c">static_numlighttrispvsbytes</a> = 0;</div>
<div class="line"><a id="l03128" name="l03128"></a><span class="lineno"> 3128</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a843540e766395ab0cf86fdb2976d3016">static_lighttrispvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03129" name="l03129"></a><span class="lineno"> 3129</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7c0681e500106dd86254191a2605b83e">compiled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03130" name="l03130"></a><span class="lineno"> 3130</span>    }</div>
<div class="line"><a id="l03131" name="l03131"></a><span class="lineno"> 3131</span>}</div>
</div>
<div class="line"><a id="l03132" name="l03132"></a><span class="lineno"> 3132</span> </div>
<div class="foldopen" id="foldopen03133" data-start="{" data-end="}">
<div class="line"><a id="l03133" name="l03133"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a2a9dc185bb3db2a01214f2f16a0a8143"> 3133</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a2a9dc185bb3db2a01214f2f16a0a8143">R_Shadow_UncompileWorldLights</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l03134" name="l03134"></a><span class="lineno"> 3134</span>{</div>
<div class="line"><a id="l03135" name="l03135"></a><span class="lineno"> 3135</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>;</div>
<div class="line"><a id="l03136" name="l03136"></a><span class="lineno"> 3136</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light;</div>
<div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> = <a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>); <span class="comment">// checked</span></div>
<div class="line"><a id="l03138" name="l03138"></a><span class="lineno"> 3138</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l03139" name="l03139"></a><span class="lineno"> 3139</span>    {</div>
<div class="line"><a id="l03140" name="l03140"></a><span class="lineno"> 3140</span>        light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l03141" name="l03141"></a><span class="lineno"> 3141</span>        <span class="keywordflow">if</span> (!light)</div>
<div class="line"><a id="l03142" name="l03142"></a><span class="lineno"> 3142</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03143" name="l03143"></a><span class="lineno"> 3143</span>        <a class="code hl_function" href="r__shadow_8c.html#a7ea0ca4b83d5a9b2d6168c80253b6324">R_RTLight_Uncompile</a>(&amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>);</div>
<div class="line"><a id="l03144" name="l03144"></a><span class="lineno"> 3144</span>    }</div>
<div class="line"><a id="l03145" name="l03145"></a><span class="lineno"> 3145</span>}</div>
</div>
<div class="line"><a id="l03146" name="l03146"></a><span class="lineno"> 3146</span> </div>
<div class="foldopen" id="foldopen03147" data-start="{" data-end="}">
<div class="line"><a id="l03147" name="l03147"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac8fae18c7ee489ebfaf1c8b0532edc99"> 3147</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ac8fae18c7ee489ebfaf1c8b0532edc99">R_Shadow_ComputeShadowCasterCullingPlanes</a>(<a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight)</div>
<div class="line"><a id="l03148" name="l03148"></a><span class="lineno"> 3148</span>{</div>
<div class="line"><a id="l03149" name="l03149"></a><span class="lineno"> 3149</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>;</div>
<div class="line"><a id="l03150" name="l03150"></a><span class="lineno"> 3150</span>    <a class="code hl_struct" href="structmplane__t.html">mplane_t</a> plane;</div>
<div class="line"><a id="l03151" name="l03151"></a><span class="lineno"> 3151</span>    <span class="comment">// reset the count of frustum planes</span></div>
<div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span>    <span class="comment">// see rtlight-&gt;cached_frustumplanes definition for how much this array</span></div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span>    <span class="comment">// can hold</span></div>
<div class="line"><a id="l03154" name="l03154"></a><span class="lineno"> 3154</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a> = 0;</div>
<div class="line"><a id="l03155" name="l03155"></a><span class="lineno"> 3155</span> </div>
<div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="model__brush_8c.html#ad36726f56533f8ed61f03c9bf2faa194">r_trippy</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span> </div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span>    <span class="comment">// haven&#39;t implemented a culling path for ortho rendering</span></div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7b16684d5900ba97b0545874a31df5fb">useperspective</a>)</div>
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"> 3161</span>    {</div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span>        <span class="comment">// check if the light is on screen and copy the 4 planes if it is</span></div>
<div class="line"><a id="l03163" name="l03163"></a><span class="lineno"> 3163</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03164" name="l03164"></a><span class="lineno"> 3164</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#ac1dbe9174f905df05e0d9c896cc4f877">PlaneDiff</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, &amp;<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a87269e10a2b3ecce1e0d83986f2ebdac">frustum</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]) &lt; -0.03125)</div>
<div class="line"><a id="l03165" name="l03165"></a><span class="lineno"> 3165</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> == 4)</div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03168" name="l03168"></a><span class="lineno"> 3168</span>                rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a>++] = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a87269e10a2b3ecce1e0d83986f2ebdac">frustum</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"> 3170</span>    }</div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span> </div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span><span class="preprocessor">#if 1</span></div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span>    <span class="comment">// generate a deformed frustum that includes the light origin, this is</span></div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span>    <span class="comment">// used to cull shadow casting surfaces that can not possibly cast a</span></div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span>    <span class="comment">// shadow onto the visible light-receiving surfaces, which can be a</span></div>
<div class="line"><a id="l03176" name="l03176"></a><span class="lineno"> 3176</span>    <span class="comment">// performance gain</span></div>
<div class="line"><a id="l03177" name="l03177"></a><span class="lineno"> 3177</span>    <span class="comment">//</span></div>
<div class="line"><a id="l03178" name="l03178"></a><span class="lineno"> 3178</span>    <span class="comment">// if the light origin is onscreen the result will be 4 planes exactly</span></div>
<div class="line"><a id="l03179" name="l03179"></a><span class="lineno"> 3179</span>    <span class="comment">// if the light origin is offscreen on only one axis the result will</span></div>
<div class="line"><a id="l03180" name="l03180"></a><span class="lineno"> 3180</span>    <span class="comment">// be exactly 5 planes (split-side case)</span></div>
<div class="line"><a id="l03181" name="l03181"></a><span class="lineno"> 3181</span>    <span class="comment">// if the light origin is offscreen on two axes the result will be</span></div>
<div class="line"><a id="l03182" name="l03182"></a><span class="lineno"> 3182</span>    <span class="comment">// exactly 4 planes (stretched corner case)</span></div>
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"> 3183</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span>    {</div>
<div class="line"><a id="l03185" name="l03185"></a><span class="lineno"> 3185</span>        <span class="comment">// quickly reject standard frustum planes that put the light</span></div>
<div class="line"><a id="l03186" name="l03186"></a><span class="lineno"> 3186</span>        <span class="comment">// origin outside the frustum</span></div>
<div class="line"><a id="l03187" name="l03187"></a><span class="lineno"> 3187</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#ac1dbe9174f905df05e0d9c896cc4f877">PlaneDiff</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, &amp;<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a87269e10a2b3ecce1e0d83986f2ebdac">frustum</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]) &lt; -0.03125)</div>
<div class="line"><a id="l03188" name="l03188"></a><span class="lineno"> 3188</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03189" name="l03189"></a><span class="lineno"> 3189</span>        <span class="comment">// copy the plane</span></div>
<div class="line"><a id="l03190" name="l03190"></a><span class="lineno"> 3190</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a>++] = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a87269e10a2b3ecce1e0d83986f2ebdac">frustum</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l03191" name="l03191"></a><span class="lineno"> 3191</span>    }</div>
<div class="line"><a id="l03192" name="l03192"></a><span class="lineno"> 3192</span>    <span class="comment">// if all the standard frustum planes were accepted, the light is onscreen</span></div>
<div class="line"><a id="l03193" name="l03193"></a><span class="lineno"> 3193</span>    <span class="comment">// otherwise we need to generate some more planes below...</span></div>
<div class="line"><a id="l03194" name="l03194"></a><span class="lineno"> 3194</span>    <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a> &lt; 4)</div>
<div class="line"><a id="l03195" name="l03195"></a><span class="lineno"> 3195</span>    {</div>
<div class="line"><a id="l03196" name="l03196"></a><span class="lineno"> 3196</span>        <span class="comment">// at least one of the stock frustum planes failed, so we need to</span></div>
<div class="line"><a id="l03197" name="l03197"></a><span class="lineno"> 3197</span>        <span class="comment">// create one or two custom planes to enclose the light origin</span></div>
<div class="line"><a id="l03198" name="l03198"></a><span class="lineno"> 3198</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03199" name="l03199"></a><span class="lineno"> 3199</span>        {</div>
<div class="line"><a id="l03200" name="l03200"></a><span class="lineno"> 3200</span>            <span class="comment">// create a plane using the view origin and light origin, and a</span></div>
<div class="line"><a id="l03201" name="l03201"></a><span class="lineno"> 3201</span>            <span class="comment">// single point from the frustum corner set</span></div>
<div class="line"><a id="l03202" name="l03202"></a><span class="lineno"> 3202</span>            <a class="code hl_define" href="mathlib_8h.html#abd107e00eca870c28df1518302fee3df">TriangleNormal</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ad4152067688a3e428ffeb16338def83f">frustumcorner</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>);</div>
<div class="line"><a id="l03203" name="l03203"></a><span class="lineno"> 3203</span>            <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>);</div>
<div class="line"><a id="l03204" name="l03204"></a><span class="lineno"> 3204</span>            plane.<a class="code hl_variable" href="structmplane__t.html#a72369d2eb517748a74711956e158ea91">dist</a> = <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>);</div>
<div class="line"><a id="l03205" name="l03205"></a><span class="lineno"> 3205</span>            <span class="comment">// see if this plane is backwards and flip it if so</span></div>
<div class="line"><a id="l03206" name="l03206"></a><span class="lineno"> 3206</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; 4;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l03207" name="l03207"></a><span class="lineno"> 3207</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> != <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp;&amp; <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ad4152067688a3e428ffeb16338def83f">frustumcorner</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>], plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>) - plane.<a class="code hl_variable" href="structmplane__t.html#a72369d2eb517748a74711956e158ea91">dist</a> &lt; -0.03125)</div>
<div class="line"><a id="l03208" name="l03208"></a><span class="lineno"> 3208</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03209" name="l03209"></a><span class="lineno"> 3209</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; 4)</div>
<div class="line"><a id="l03210" name="l03210"></a><span class="lineno"> 3210</span>            {</div>
<div class="line"><a id="l03211" name="l03211"></a><span class="lineno"> 3211</span>                <a class="code hl_define" href="mathlib_8h.html#a28f9f1fe5f50e359e016f7e4e04f8cf1">VectorNegate</a>(plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>, plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>);</div>
<div class="line"><a id="l03212" name="l03212"></a><span class="lineno"> 3212</span>                plane.<a class="code hl_variable" href="structmplane__t.html#a72369d2eb517748a74711956e158ea91">dist</a> *= -1;</div>
<div class="line"><a id="l03213" name="l03213"></a><span class="lineno"> 3213</span>                <span class="comment">// flipped plane, test again to see if it is now valid</span></div>
<div class="line"><a id="l03214" name="l03214"></a><span class="lineno"> 3214</span>                <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; 4;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l03215" name="l03215"></a><span class="lineno"> 3215</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> != <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp;&amp; <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ad4152067688a3e428ffeb16338def83f">frustumcorner</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>], plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>) - plane.<a class="code hl_variable" href="structmplane__t.html#a72369d2eb517748a74711956e158ea91">dist</a> &lt; -0.03125)</div>
<div class="line"><a id="l03216" name="l03216"></a><span class="lineno"> 3216</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03217" name="l03217"></a><span class="lineno"> 3217</span>                <span class="comment">// if the plane is still not valid, then it is dividing the</span></div>
<div class="line"><a id="l03218" name="l03218"></a><span class="lineno"> 3218</span>                <span class="comment">// frustum and has to be rejected</span></div>
<div class="line"><a id="l03219" name="l03219"></a><span class="lineno"> 3219</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; 4)</div>
<div class="line"><a id="l03220" name="l03220"></a><span class="lineno"> 3220</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03221" name="l03221"></a><span class="lineno"> 3221</span>            }</div>
<div class="line"><a id="l03222" name="l03222"></a><span class="lineno"> 3222</span>            <span class="comment">// we have created a valid plane, compute extra info</span></div>
<div class="line"><a id="l03223" name="l03223"></a><span class="lineno"> 3223</span>            <a class="code hl_function" href="mathlib_8c.html#ac6346bdac2617a1fce578c20b3520a79">PlaneClassify</a>(&amp;plane);</div>
<div class="line"><a id="l03224" name="l03224"></a><span class="lineno"> 3224</span>            <span class="comment">// copy the plane</span></div>
<div class="line"><a id="l03225" name="l03225"></a><span class="lineno"> 3225</span>            rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a>++] = plane;</div>
<div class="line"><a id="l03226" name="l03226"></a><span class="lineno"> 3226</span><span class="preprocessor">#if 1</span></div>
<div class="line"><a id="l03227" name="l03227"></a><span class="lineno"> 3227</span>            <span class="comment">// if we&#39;ve found 5 frustum planes then we have constructed a</span></div>
<div class="line"><a id="l03228" name="l03228"></a><span class="lineno"> 3228</span>            <span class="comment">// proper split-side case and do not need to keep searching for</span></div>
<div class="line"><a id="l03229" name="l03229"></a><span class="lineno"> 3229</span>            <span class="comment">// planes to enclose the light origin</span></div>
<div class="line"><a id="l03230" name="l03230"></a><span class="lineno"> 3230</span>            <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a> == 5)</div>
<div class="line"><a id="l03231" name="l03231"></a><span class="lineno"> 3231</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03232" name="l03232"></a><span class="lineno"> 3232</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03233" name="l03233"></a><span class="lineno"> 3233</span>        }</div>
<div class="line"><a id="l03234" name="l03234"></a><span class="lineno"> 3234</span>    }</div>
<div class="line"><a id="l03235" name="l03235"></a><span class="lineno"> 3235</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03236" name="l03236"></a><span class="lineno"> 3236</span> </div>
<div class="line"><a id="l03237" name="l03237"></a><span class="lineno"> 3237</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l03238" name="l03238"></a><span class="lineno"> 3238</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03239" name="l03239"></a><span class="lineno"> 3239</span>    {</div>
<div class="line"><a id="l03240" name="l03240"></a><span class="lineno"> 3240</span>        plane = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l03241" name="l03241"></a><span class="lineno"> 3241</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;light %p plane #%i %f %f %f : %f (%f %f %f %f %f)\n&quot;</span>, rtlight, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>[0], plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>[1], plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>[2], plane.<a class="code hl_variable" href="structmplane__t.html#a72369d2eb517748a74711956e158ea91">dist</a>, <a class="code hl_define" href="mathlib_8h.html#ac1dbe9174f905df05e0d9c896cc4f877">PlaneDiff</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ad4152067688a3e428ffeb16338def83f">frustumcorner</a>[0], &amp;plane), <a class="code hl_define" href="mathlib_8h.html#ac1dbe9174f905df05e0d9c896cc4f877">PlaneDiff</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ad4152067688a3e428ffeb16338def83f">frustumcorner</a>[1], &amp;plane), <a class="code hl_define" href="mathlib_8h.html#ac1dbe9174f905df05e0d9c896cc4f877">PlaneDiff</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ad4152067688a3e428ffeb16338def83f">frustumcorner</a>[2], &amp;plane), <a class="code hl_define" href="mathlib_8h.html#ac1dbe9174f905df05e0d9c896cc4f877">PlaneDiff</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ad4152067688a3e428ffeb16338def83f">frustumcorner</a>[3], &amp;plane), <a class="code hl_define" href="mathlib_8h.html#ac1dbe9174f905df05e0d9c896cc4f877">PlaneDiff</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, &amp;plane));</div>
<div class="line"><a id="l03242" name="l03242"></a><span class="lineno"> 3242</span>    }</div>
<div class="line"><a id="l03243" name="l03243"></a><span class="lineno"> 3243</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03244" name="l03244"></a><span class="lineno"> 3244</span> </div>
<div class="line"><a id="l03245" name="l03245"></a><span class="lineno"> 3245</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l03246" name="l03246"></a><span class="lineno"> 3246</span>    <span class="comment">// now add the light-space box planes if the light box is rotated, as any</span></div>
<div class="line"><a id="l03247" name="l03247"></a><span class="lineno"> 3247</span>    <span class="comment">// caster outside the oriented light box is irrelevant (even if it passed</span></div>
<div class="line"><a id="l03248" name="l03248"></a><span class="lineno"> 3248</span>    <span class="comment">// the worldspace light box, which is axial)</span></div>
<div class="line"><a id="l03249" name="l03249"></a><span class="lineno"> 3249</span>    <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab89a43403b944e77e37a1e7433472964">matrix_lighttoworld</a>.<a class="code hl_variable" href="structmatrix4x4__t.html#a87e53ca6a2e9235ffd666f220abd9b87">m</a>[0][0] != 1 || rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab89a43403b944e77e37a1e7433472964">matrix_lighttoworld</a>.<a class="code hl_variable" href="structmatrix4x4__t.html#a87e53ca6a2e9235ffd666f220abd9b87">m</a>[1][1] != 1 || rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab89a43403b944e77e37a1e7433472964">matrix_lighttoworld</a>.<a class="code hl_variable" href="structmatrix4x4__t.html#a87e53ca6a2e9235ffd666f220abd9b87">m</a>[2][2] != 1)</div>
<div class="line"><a id="l03250" name="l03250"></a><span class="lineno"> 3250</span>    {</div>
<div class="line"><a id="l03251" name="l03251"></a><span class="lineno"> 3251</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03252" name="l03252"></a><span class="lineno"> 3252</span>        {</div>
<div class="line"><a id="l03253" name="l03253"></a><span class="lineno"> 3253</span>            <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>;</div>
<div class="line"><a id="l03254" name="l03254"></a><span class="lineno"> 3254</span>            <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(<a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>);</div>
<div class="line"><a id="l03255" name="l03255"></a><span class="lineno"> 3255</span>            <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;&gt; 1] = (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp; 1) ? -1 : 1;</div>
<div class="line"><a id="l03256" name="l03256"></a><span class="lineno"> 3256</span>            <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(&amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab89a43403b944e77e37a1e7433472964">matrix_lighttoworld</a>, <a class="code hl_variable" href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a>, plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>);</div>
<div class="line"><a id="l03257" name="l03257"></a><span class="lineno"> 3257</span>            <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>);</div>
<div class="line"><a id="l03258" name="l03258"></a><span class="lineno"> 3258</span>            plane.<a class="code hl_variable" href="structmplane__t.html#a72369d2eb517748a74711956e158ea91">dist</a> = <a class="code hl_function" href="mathlib_8c.html#aa0f8c2537c1cf8bd8c418b1a9a854de5">VectorNormalizeLength</a>(plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>);</div>
<div class="line"><a id="l03259" name="l03259"></a><span class="lineno"> 3259</span>            plane.<a class="code hl_variable" href="structmplane__t.html#a72369d2eb517748a74711956e158ea91">dist</a> += <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>);</div>
<div class="line"><a id="l03260" name="l03260"></a><span class="lineno"> 3260</span>            rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a>++] = plane;</div>
<div class="line"><a id="l03261" name="l03261"></a><span class="lineno"> 3261</span>        }</div>
<div class="line"><a id="l03262" name="l03262"></a><span class="lineno"> 3262</span>    }</div>
<div class="line"><a id="l03263" name="l03263"></a><span class="lineno"> 3263</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03264" name="l03264"></a><span class="lineno"> 3264</span> </div>
<div class="line"><a id="l03265" name="l03265"></a><span class="lineno"> 3265</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l03266" name="l03266"></a><span class="lineno"> 3266</span>    <span class="comment">// add the world-space reduced box planes</span></div>
<div class="line"><a id="l03267" name="l03267"></a><span class="lineno"> 3267</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03268" name="l03268"></a><span class="lineno"> 3268</span>    {</div>
<div class="line"><a id="l03269" name="l03269"></a><span class="lineno"> 3269</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>);</div>
<div class="line"><a id="l03270" name="l03270"></a><span class="lineno"> 3270</span>        plane.<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;&gt; 1] = (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp; 1) ? -1 : 1;</div>
<div class="line"><a id="l03271" name="l03271"></a><span class="lineno"> 3271</span>        plane.<a class="code hl_variable" href="structmplane__t.html#a72369d2eb517748a74711956e158ea91">dist</a> = (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp; 1) ? -rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;&gt; 1] : rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;&gt; 1];</div>
<div class="line"><a id="l03272" name="l03272"></a><span class="lineno"> 3272</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a>++] = plane;</div>
<div class="line"><a id="l03273" name="l03273"></a><span class="lineno"> 3273</span>    }</div>
<div class="line"><a id="l03274" name="l03274"></a><span class="lineno"> 3274</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03275" name="l03275"></a><span class="lineno"> 3275</span> </div>
<div class="line"><a id="l03276" name="l03276"></a><span class="lineno"> 3276</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l03277" name="l03277"></a><span class="lineno"> 3277</span>    {</div>
<div class="line"><a id="l03278" name="l03278"></a><span class="lineno"> 3278</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldnum</a>;</div>
<div class="line"><a id="l03279" name="l03279"></a><span class="lineno"> 3279</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> points[8];</div>
<div class="line"><a id="l03280" name="l03280"></a><span class="lineno"> 3280</span>    <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> bestdist;</div>
<div class="line"><a id="l03281" name="l03281"></a><span class="lineno"> 3281</span>    <span class="comment">// reduce all plane distances to tightly fit the rtlight cull box, which</span></div>
<div class="line"><a id="l03282" name="l03282"></a><span class="lineno"> 3282</span>    <span class="comment">// is in worldspace</span></div>
<div class="line"><a id="l03283" name="l03283"></a><span class="lineno"> 3283</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(points[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>[1], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>[2]);</div>
<div class="line"><a id="l03284" name="l03284"></a><span class="lineno"> 3284</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(points[1], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>[1], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>[2]);</div>
<div class="line"><a id="l03285" name="l03285"></a><span class="lineno"> 3285</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(points[2], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>[1], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>[2]);</div>
<div class="line"><a id="l03286" name="l03286"></a><span class="lineno"> 3286</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(points[3], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>[1], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>[2]);</div>
<div class="line"><a id="l03287" name="l03287"></a><span class="lineno"> 3287</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(points[4], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>[1], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>[2]);</div>
<div class="line"><a id="l03288" name="l03288"></a><span class="lineno"> 3288</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(points[5], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>[1], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>[2]);</div>
<div class="line"><a id="l03289" name="l03289"></a><span class="lineno"> 3289</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(points[6], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>[1], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>[2]);</div>
<div class="line"><a id="l03290" name="l03290"></a><span class="lineno"> 3290</span>    <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(points[7], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>[1], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>[2]);</div>
<div class="line"><a id="l03291" name="l03291"></a><span class="lineno"> 3291</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldnum</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a>;</div>
<div class="line"><a id="l03292" name="l03292"></a><span class="lineno"> 3292</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a> = 0;</div>
<div class="line"><a id="l03293" name="l03293"></a><span class="lineno"> 3293</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldnum</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>++)</div>
<div class="line"><a id="l03294" name="l03294"></a><span class="lineno"> 3294</span>    {</div>
<div class="line"><a id="l03295" name="l03295"></a><span class="lineno"> 3295</span>        <span class="comment">// find the nearest point on the box to this plane</span></div>
<div class="line"><a id="l03296" name="l03296"></a><span class="lineno"> 3296</span>        bestdist = <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>, points[0]);</div>
<div class="line"><a id="l03297" name="l03297"></a><span class="lineno"> 3297</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03298" name="l03298"></a><span class="lineno"> 3298</span>        {</div>
<div class="line"><a id="l03299" name="l03299"></a><span class="lineno"> 3299</span>            dist = <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>, points[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l03300" name="l03300"></a><span class="lineno"> 3300</span>            <span class="keywordflow">if</span> (bestdist &gt; dist)</div>
<div class="line"><a id="l03301" name="l03301"></a><span class="lineno"> 3301</span>                bestdist = dist;</div>
<div class="line"><a id="l03302" name="l03302"></a><span class="lineno"> 3302</span>        }</div>
<div class="line"><a id="l03303" name="l03303"></a><span class="lineno"> 3303</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;light %p %splane #%i %f %f %f : %f &lt; %f\n&quot;</span>, rtlight, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmplane__t.html#a72369d2eb517748a74711956e158ea91">dist</a> &lt; bestdist + 0.03125 ? <span class="stringliteral">&quot;^2&quot;</span> : <span class="stringliteral">&quot;^1&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>[1], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">normal</a>[2], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmplane__t.html#a72369d2eb517748a74711956e158ea91">dist</a>, bestdist);</div>
<div class="line"><a id="l03304" name="l03304"></a><span class="lineno"> 3304</span>        <span class="comment">// if the nearest point is near or behind the plane, we want this</span></div>
<div class="line"><a id="l03305" name="l03305"></a><span class="lineno"> 3305</span>        <span class="comment">// plane, otherwise the plane is useless as it won&#39;t cull anything</span></div>
<div class="line"><a id="l03306" name="l03306"></a><span class="lineno"> 3306</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>].<a class="code hl_variable" href="structmplane__t.html#a72369d2eb517748a74711956e158ea91">dist</a> &lt; bestdist + 0.03125)</div>
<div class="line"><a id="l03307" name="l03307"></a><span class="lineno"> 3307</span>        {</div>
<div class="line"><a id="l03308" name="l03308"></a><span class="lineno"> 3308</span>            <a class="code hl_function" href="mathlib_8c.html#ac6346bdac2617a1fce578c20b3520a79">PlaneClassify</a>(&amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>]);</div>
<div class="line"><a id="l03309" name="l03309"></a><span class="lineno"> 3309</span>            rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a>++] = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">j</a>];</div>
<div class="line"><a id="l03310" name="l03310"></a><span class="lineno"> 3310</span>        }</div>
<div class="line"><a id="l03311" name="l03311"></a><span class="lineno"> 3311</span>    }</div>
<div class="line"><a id="l03312" name="l03312"></a><span class="lineno"> 3312</span>    }</div>
<div class="line"><a id="l03313" name="l03313"></a><span class="lineno"> 3313</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03314" name="l03314"></a><span class="lineno"> 3314</span>}</div>
</div>
<div class="line"><a id="l03315" name="l03315"></a><span class="lineno"> 3315</span> </div>
<div class="foldopen" id="foldopen03316" data-start="{" data-end="}">
<div class="line"><a id="l03316" name="l03316"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac715ef2e77ddf2827ab304c2dbe6e17e"> 3316</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ac715ef2e77ddf2827ab304c2dbe6e17e">R_Shadow_DrawWorldShadow_ShadowMap</a>(<span class="keywordtype">int</span> numsurfaces, <span class="keywordtype">int</span> *surfacelist, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">trispvs</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacesides</a>)</div>
<div class="line"><a id="l03317" name="l03317"></a><span class="lineno"> 3317</span>{</div>
<div class="line"><a id="l03318" name="l03318"></a><span class="lineno"> 3318</span>    <a class="code hl_function" href="gl__rmain_8c.html#ab91218d4fb985f2c4ffc9622a4e28fe2">RSurf_ActiveModelEntity</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ae4dfd0ad65bd2cecac4d12f329e331ca">worldentity</a>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l03319" name="l03319"></a><span class="lineno"> 3319</span> </div>
<div class="line"><a id="l03320" name="l03320"></a><span class="lineno"> 3320</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7c0681e500106dd86254191a2605b83e">compiled</a> &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#a96bc72dc79c1396d6213950a2819381d">r_shadow_realtime_world_compile</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#aae98730caa3cd73c0376ee07db2e4f23">r_shadow_realtime_world_compileshadow</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l03321" name="l03321"></a><span class="lineno"> 3321</span>    {</div>
<div class="line"><a id="l03322" name="l03322"></a><span class="lineno"> 3322</span>        <a class="code hl_struct" href="structshadowmesh__t.html">shadowmesh_t</a> *mesh = <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a98ea18bbb779ac1aa193be665e3f3142">static_meshchain_shadow_shadowmap</a>;</div>
<div class="line"><a id="l03323" name="l03323"></a><span class="lineno"> 3323</span>        <span class="keywordflow">if</span> (mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a37799ba83637ae362f443fbacdf3ab1e">sidetotals</a>[<a class="code hl_variable" href="r__shadow_8c.html#a5ab901070f430b33bd3e0bf48d525ad5">r_shadow_shadowmapside</a>])</div>
<div class="line"><a id="l03324" name="l03324"></a><span class="lineno"> 3324</span>        {</div>
<div class="line"><a id="l03325" name="l03325"></a><span class="lineno"> 3325</span>            <a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l03326" name="l03326"></a><span class="lineno"> 3326</span>            <a class="code hl_function" href="gl__backend_8c.html#a28f12ab6551743428797e62bf183ebde">GL_CullFace</a>(<a class="code hl_define" href="glquake_8h.html#a089a3736e5280b9c7cc50129e2659974">GL_NONE</a>);</div>
<div class="line"><a id="l03327" name="l03327"></a><span class="lineno"> 3327</span>            <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#acb0c53994baa529557477269d81d5507">stats</a>[<a class="code hl_enumvalue" href="r__stats_8h.html#ae611154931c203d788794752dda991f8ab7c04c35cb8be16e1f757d5b8b45bfc5">r_stat_lights_shadowtriangles</a>] += mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a37799ba83637ae362f443fbacdf3ab1e">sidetotals</a>[<a class="code hl_variable" href="r__shadow_8c.html#a5ab901070f430b33bd3e0bf48d525ad5">r_shadow_shadowmapside</a>];</div>
<div class="line"><a id="l03328" name="l03328"></a><span class="lineno"> 3328</span>            <a class="code hl_function" href="gl__backend_8c.html#a160faabf0f2b8616f192c5d3046ac477">R_Mesh_PrepareVertices_Vertex3f</a>(mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">numverts</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">vertex3f</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a6a9b587fbcf8ef7a44140c46c8d2f4e1">vbo_vertexbuffer</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#aba509bf2aa5e66a84b969a224f96d5d5">vbooffset_vertex3f</a>);</div>
<div class="line"><a id="l03329" name="l03329"></a><span class="lineno"> 3329</span>            <a class="code hl_function" href="gl__backend_8c.html#a5fd11a8a3e5cbb27690e870134b36675">R_Mesh_Draw</a>(0, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">numverts</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a9a1f3f13d9b1053376a8a5473c3c9986">sideoffsets</a>[<a class="code hl_variable" href="r__shadow_8c.html#a5ab901070f430b33bd3e0bf48d525ad5">r_shadow_shadowmapside</a>], mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a37799ba83637ae362f443fbacdf3ab1e">sidetotals</a>[<a class="code hl_variable" href="r__shadow_8c.html#a5ab901070f430b33bd3e0bf48d525ad5">r_shadow_shadowmapside</a>], mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">element3i</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab541863376b7d50d86fc7e9feadfde42">element3i_indexbuffer</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5502672a6e19c8d5144a2143b8617ad3">element3i_bufferoffset</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#ab619fa0351de28e3e85368c9f6919482">element3s</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a5683380ac9e160b2e899fe82aac36b90">element3s_indexbuffer</a>, mesh-&gt;<a class="code hl_variable" href="structshadowmesh__t.html#a2da5a556c5633f6fb998c3b8bae08d44">element3s_bufferoffset</a>);</div>
<div class="line"><a id="l03330" name="l03330"></a><span class="lineno"> 3330</span>            <a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l03331" name="l03331"></a><span class="lineno"> 3331</span>        }</div>
<div class="line"><a id="l03332" name="l03332"></a><span class="lineno"> 3332</span>    }</div>
<div class="line"><a id="l03333" name="l03333"></a><span class="lineno"> 3333</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ae4dfd0ad65bd2cecac4d12f329e331ca">worldentity</a>-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>)</div>
<div class="line"><a id="l03334" name="l03334"></a><span class="lineno"> 3334</span>        <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a71121e7ef28a949af258f4611ce21e9c">DrawShadowMap</a>(<a class="code hl_variable" href="r__shadow_8c.html#a5ab901070f430b33bd3e0bf48d525ad5">r_shadow_shadowmapside</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ae4dfd0ad65bd2cecac4d12f329e331ca">worldentity</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>, numsurfaces, surfacelist, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacesides</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>);</div>
<div class="line"><a id="l03335" name="l03335"></a><span class="lineno"> 3335</span> </div>
<div class="line"><a id="l03336" name="l03336"></a><span class="lineno"> 3336</span>    <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a882f84c3c787f26a402cb48df0af7043">entity</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">// used only by R_GetCurrentTexture and RSurf_ActiveModelEntity</span></div>
<div class="line"><a id="l03337" name="l03337"></a><span class="lineno"> 3337</span>}</div>
</div>
<div class="line"><a id="l03338" name="l03338"></a><span class="lineno"> 3338</span> </div>
<div class="foldopen" id="foldopen03339" data-start="{" data-end="}">
<div class="line"><a id="l03339" name="l03339"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a99d38a120a6bd9f7d41a417371ded304"> 3339</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a99d38a120a6bd9f7d41a417371ded304">R_Shadow_DrawEntityShadow</a>(<a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *ent)</div>
<div class="line"><a id="l03340" name="l03340"></a><span class="lineno"> 3340</span>{</div>
<div class="line"><a id="l03341" name="l03341"></a><span class="lineno"> 3341</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadoworigin</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmaxs</a>;</div>
<div class="line"><a id="l03342" name="l03342"></a><span class="lineno"> 3342</span>    <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowradius</a>;</div>
<div class="line"><a id="l03343" name="l03343"></a><span class="lineno"> 3343</span>    <a class="code hl_function" href="gl__rmain_8c.html#ab91218d4fb985f2c4ffc9622a4e28fe2">RSurf_ActiveModelEntity</a>(ent, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l03344" name="l03344"></a><span class="lineno"> 3344</span>    <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(&amp;ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a2a953613d4d38178f6b4b662aace412d">inversematrix</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadoworigin</a>);</div>
<div class="line"><a id="l03345" name="l03345"></a><span class="lineno"> 3345</span>    <span class="comment">// we need to re-init the shader for each entity because the matrix changed</span></div>
<div class="line"><a id="l03346" name="l03346"></a><span class="lineno"> 3346</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowradius</a> = <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a> / ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a8bf8aaa8b5264bb089f446bf09c75338">scale</a>;</div>
<div class="line"><a id="l03347" name="l03347"></a><span class="lineno"> 3347</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmins</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadoworigin</a>[0] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowradius</a>;</div>
<div class="line"><a id="l03348" name="l03348"></a><span class="lineno"> 3348</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmins</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadoworigin</a>[1] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowradius</a>;</div>
<div class="line"><a id="l03349" name="l03349"></a><span class="lineno"> 3349</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmins</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadoworigin</a>[2] - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowradius</a>;</div>
<div class="line"><a id="l03350" name="l03350"></a><span class="lineno"> 3350</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmaxs</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadoworigin</a>[0] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowradius</a>;</div>
<div class="line"><a id="l03351" name="l03351"></a><span class="lineno"> 3351</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmaxs</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadoworigin</a>[1] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowradius</a>;</div>
<div class="line"><a id="l03352" name="l03352"></a><span class="lineno"> 3352</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmaxs</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadoworigin</a>[2] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowradius</a>;</div>
<div class="line"><a id="l03353" name="l03353"></a><span class="lineno"> 3353</span>    ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a71121e7ef28a949af258f4611ce21e9c">DrawShadowMap</a>(<a class="code hl_variable" href="r__shadow_8c.html#a5ab901070f430b33bd3e0bf48d525ad5">r_shadow_shadowmapside</a>, ent, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadoworigin</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowradius</a>, ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a3cf3f78e305583268585ef7bde7aaa16">submodelsurfaces_end</a> - ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">submodelsurfaces_start</a>, ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a37ed77c0d67434b15280684a8ba42814">modelsurfaces_sorted</a> + ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">submodelsurfaces_start</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmaxs</a>);</div>
<div class="line"><a id="l03354" name="l03354"></a><span class="lineno"> 3354</span>    <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a882f84c3c787f26a402cb48df0af7043">entity</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">// used only by R_GetCurrentTexture and RSurf_ActiveModelEntity</span></div>
<div class="line"><a id="l03355" name="l03355"></a><span class="lineno"> 3355</span>}</div>
</div>
<div class="line"><a id="l03356" name="l03356"></a><span class="lineno"> 3356</span> </div>
<div class="foldopen" id="foldopen03357" data-start="{" data-end="}">
<div class="line"><a id="l03357" name="l03357"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0f9ba7a3fe1f071a82dbd0329c8fd6d1"> 3357</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a0f9ba7a3fe1f071a82dbd0329c8fd6d1">R_Shadow_SetupEntityLight</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *ent)</div>
<div class="line"><a id="l03358" name="l03358"></a><span class="lineno"> 3358</span>{</div>
<div class="line"><a id="l03359" name="l03359"></a><span class="lineno"> 3359</span>    <span class="comment">// set up properties for rendering light onto this entity</span></div>
<div class="line"><a id="l03360" name="l03360"></a><span class="lineno"> 3360</span>    <a class="code hl_function" href="gl__rmain_8c.html#ab91218d4fb985f2c4ffc9622a4e28fe2">RSurf_ActiveModelEntity</a>(ent, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l03361" name="l03361"></a><span class="lineno"> 3361</span>    <a class="code hl_function" href="matrixlib_8c.html#a0f17f61f7e6dd5b4f8dc94ff587526c0">Matrix4x4_Concat</a>(&amp;<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a4078def0642eb8743b46ef5949e5c0e8">entitytolight</a>, &amp;<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>, &amp;ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a35e44e80da95a4aad81a3fcec2aa3fab">matrix</a>);</div>
<div class="line"><a id="l03362" name="l03362"></a><span class="lineno"> 3362</span>    <a class="code hl_function" href="matrixlib_8c.html#a0f17f61f7e6dd5b4f8dc94ff587526c0">Matrix4x4_Concat</a>(&amp;<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#aca7ab6778dd3874ae419ad80ff05e70d">entitytoattenuationxyz</a>, &amp;<a class="code hl_variable" href="r__shadow_8c.html#a98c82189f2291563db33e4a6d35757e8">matrix_attenuationxyz</a>, &amp;<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a4078def0642eb8743b46ef5949e5c0e8">entitytolight</a>);</div>
<div class="line"><a id="l03363" name="l03363"></a><span class="lineno"> 3363</span>    <a class="code hl_function" href="matrixlib_8c.html#a0f17f61f7e6dd5b4f8dc94ff587526c0">Matrix4x4_Concat</a>(&amp;<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a4a767fb8bfbdd4b678f43f216a4c5f07">entitytoattenuationz</a>, &amp;<a class="code hl_variable" href="r__shadow_8c.html#a943c8cbc0aadf4d127032a1b6ad27329">matrix_attenuationz</a>, &amp;<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a4078def0642eb8743b46ef5949e5c0e8">entitytolight</a>);</div>
<div class="line"><a id="l03364" name="l03364"></a><span class="lineno"> 3364</span>    <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(&amp;ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a2a953613d4d38178f6b4b662aace412d">inversematrix</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a95dd0f0a018acf46efaa2cbed67d1553">entitylightorigin</a>);</div>
<div class="line"><a id="l03365" name="l03365"></a><span class="lineno"> 3365</span>}</div>
</div>
<div class="line"><a id="l03366" name="l03366"></a><span class="lineno"> 3366</span> </div>
<div class="foldopen" id="foldopen03367" data-start="{" data-end="}">
<div class="line"><a id="l03367" name="l03367"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#af065abef516db94b9a4185099ddb92ab"> 3367</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#af065abef516db94b9a4185099ddb92ab">R_Shadow_DrawWorldLight</a>(<span class="keywordtype">int</span> numsurfaces, <span class="keywordtype">int</span> *surfacelist, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *lighttrispvs)</div>
<div class="line"><a id="l03368" name="l03368"></a><span class="lineno"> 3368</span>{</div>
<div class="line"><a id="l03369" name="l03369"></a><span class="lineno"> 3369</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#af206eaa0040c5a5e297fa1c0191b22dd">DrawLight</a>)</div>
<div class="line"><a id="l03370" name="l03370"></a><span class="lineno"> 3370</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03371" name="l03371"></a><span class="lineno"> 3371</span> </div>
<div class="line"><a id="l03372" name="l03372"></a><span class="lineno"> 3372</span>    <span class="comment">// set up properties for rendering light onto this entity</span></div>
<div class="line"><a id="l03373" name="l03373"></a><span class="lineno"> 3373</span>    <a class="code hl_function" href="gl__rmain_8c.html#ab91218d4fb985f2c4ffc9622a4e28fe2">RSurf_ActiveModelEntity</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ae4dfd0ad65bd2cecac4d12f329e331ca">worldentity</a>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l03374" name="l03374"></a><span class="lineno"> 3374</span>    <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a4078def0642eb8743b46ef5949e5c0e8">entitytolight</a> = <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>;</div>
<div class="line"><a id="l03375" name="l03375"></a><span class="lineno"> 3375</span>    <a class="code hl_function" href="matrixlib_8c.html#a0f17f61f7e6dd5b4f8dc94ff587526c0">Matrix4x4_Concat</a>(&amp;<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#aca7ab6778dd3874ae419ad80ff05e70d">entitytoattenuationxyz</a>, &amp;<a class="code hl_variable" href="r__shadow_8c.html#a98c82189f2291563db33e4a6d35757e8">matrix_attenuationxyz</a>, &amp;<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a4078def0642eb8743b46ef5949e5c0e8">entitytolight</a>);</div>
<div class="line"><a id="l03376" name="l03376"></a><span class="lineno"> 3376</span>    <a class="code hl_function" href="matrixlib_8c.html#a0f17f61f7e6dd5b4f8dc94ff587526c0">Matrix4x4_Concat</a>(&amp;<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a4a767fb8bfbdd4b678f43f216a4c5f07">entitytoattenuationz</a>, &amp;<a class="code hl_variable" href="r__shadow_8c.html#a943c8cbc0aadf4d127032a1b6ad27329">matrix_attenuationz</a>, &amp;<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a4078def0642eb8743b46ef5949e5c0e8">entitytolight</a>);</div>
<div class="line"><a id="l03377" name="l03377"></a><span class="lineno"> 3377</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rtlight</a>-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a95dd0f0a018acf46efaa2cbed67d1553">entitylightorigin</a>);</div>
<div class="line"><a id="l03378" name="l03378"></a><span class="lineno"> 3378</span> </div>
<div class="line"><a id="l03379" name="l03379"></a><span class="lineno"> 3379</span>    <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#af206eaa0040c5a5e297fa1c0191b22dd">DrawLight</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ae4dfd0ad65bd2cecac4d12f329e331ca">worldentity</a>, numsurfaces, surfacelist, lighttrispvs);</div>
<div class="line"><a id="l03380" name="l03380"></a><span class="lineno"> 3380</span> </div>
<div class="line"><a id="l03381" name="l03381"></a><span class="lineno"> 3381</span>    <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a882f84c3c787f26a402cb48df0af7043">entity</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">// used only by R_GetCurrentTexture and RSurf_ActiveModelEntity</span></div>
<div class="line"><a id="l03382" name="l03382"></a><span class="lineno"> 3382</span>}</div>
</div>
<div class="line"><a id="l03383" name="l03383"></a><span class="lineno"> 3383</span> </div>
<div class="foldopen" id="foldopen03384" data-start="{" data-end="}">
<div class="line"><a id="l03384" name="l03384"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a4e6dc58667f284a549e3dde6d0b7bf7c"> 3384</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a4e6dc58667f284a549e3dde6d0b7bf7c">R_Shadow_DrawEntityLight</a>(<a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *ent)</div>
<div class="line"><a id="l03385" name="l03385"></a><span class="lineno"> 3385</span>{</div>
<div class="line"><a id="l03386" name="l03386"></a><span class="lineno"> 3386</span>    <a class="code hl_struct" href="structmodel__t.html">model_t</a> *model = ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>;</div>
<div class="line"><a id="l03387" name="l03387"></a><span class="lineno"> 3387</span>    <span class="keywordflow">if</span> (!model-&gt;<a class="code hl_variable" href="structmodel__t.html#af206eaa0040c5a5e297fa1c0191b22dd">DrawLight</a>)</div>
<div class="line"><a id="l03388" name="l03388"></a><span class="lineno"> 3388</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03389" name="l03389"></a><span class="lineno"> 3389</span> </div>
<div class="line"><a id="l03390" name="l03390"></a><span class="lineno"> 3390</span>    <a class="code hl_function" href="r__shadow_8c.html#a0f9ba7a3fe1f071a82dbd0329c8fd6d1">R_Shadow_SetupEntityLight</a>(ent);</div>
<div class="line"><a id="l03391" name="l03391"></a><span class="lineno"> 3391</span> </div>
<div class="line"><a id="l03392" name="l03392"></a><span class="lineno"> 3392</span>    model-&gt;<a class="code hl_variable" href="structmodel__t.html#af206eaa0040c5a5e297fa1c0191b22dd">DrawLight</a>(ent, model-&gt;<a class="code hl_variable" href="structmodel__t.html#a3cf3f78e305583268585ef7bde7aaa16">submodelsurfaces_end</a> - model-&gt;<a class="code hl_variable" href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">submodelsurfaces_start</a>, model-&gt;<a class="code hl_variable" href="structmodel__t.html#a37ed77c0d67434b15280684a8ba42814">modelsurfaces_sorted</a> + model-&gt;<a class="code hl_variable" href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">submodelsurfaces_start</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l03393" name="l03393"></a><span class="lineno"> 3393</span> </div>
<div class="line"><a id="l03394" name="l03394"></a><span class="lineno"> 3394</span>    <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a882f84c3c787f26a402cb48df0af7043">entity</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">// used only by R_GetCurrentTexture and RSurf_ActiveModelEntity</span></div>
<div class="line"><a id="l03395" name="l03395"></a><span class="lineno"> 3395</span>}</div>
</div>
<div class="line"><a id="l03396" name="l03396"></a><span class="lineno"> 3396</span> </div>
<div class="foldopen" id="foldopen03397" data-start="{" data-end="}">
<div class="line"><a id="l03397" name="l03397"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#af447ee4df75ad54b8f31d00ecd6ef765"> 3397</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#af447ee4df75ad54b8f31d00ecd6ef765">R_Shadow_PrepareLight</a>(<a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight)</div>
<div class="line"><a id="l03398" name="l03398"></a><span class="lineno"> 3398</span>{</div>
<div class="line"><a id="l03399" name="l03399"></a><span class="lineno"> 3399</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l03400" name="l03400"></a><span class="lineno"> 3400</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>;</div>
<div class="line"><a id="l03401" name="l03401"></a><span class="lineno"> 3401</span>    <span class="keywordtype">int</span> numleafs, numsurfaces;</div>
<div class="line"><a id="l03402" name="l03402"></a><span class="lineno"> 3402</span>    <span class="keywordtype">int</span> *leaflist, *surfacelist;</div>
<div class="line"><a id="l03403" name="l03403"></a><span class="lineno"> 3403</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *leafpvs;</div>
<div class="line"><a id="l03404" name="l03404"></a><span class="lineno"> 3404</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *shadowtrispvs;</div>
<div class="line"><a id="l03405" name="l03405"></a><span class="lineno"> 3405</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *lighttrispvs;</div>
<div class="line"><a id="l03406" name="l03406"></a><span class="lineno"> 3406</span>    <span class="comment">//unsigned char *surfacesides;</span></div>
<div class="line"><a id="l03407" name="l03407"></a><span class="lineno"> 3407</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a>;</div>
<div class="line"><a id="l03408" name="l03408"></a><span class="lineno"> 3408</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a>;</div>
<div class="line"><a id="l03409" name="l03409"></a><span class="lineno"> 3409</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a>;</div>
<div class="line"><a id="l03410" name="l03410"></a><span class="lineno"> 3410</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a>;</div>
<div class="line"><a id="l03411" name="l03411"></a><span class="lineno"> 3411</span>    <span class="comment">// FIXME: bounds check lightentities and shadowentities, etc.</span></div>
<div class="line"><a id="l03412" name="l03412"></a><span class="lineno"> 3412</span>    <span class="keyword">static</span> <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities</a>[<a class="code hl_define" href="qdefs_8h.html#a31ca9f5408b1f7610882c97c3db48826">MAX_EDICTS</a>];</div>
<div class="line"><a id="l03413" name="l03413"></a><span class="lineno"> 3413</span>    <span class="keyword">static</span> <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities_noselfshadow</a>[<a class="code hl_define" href="qdefs_8h.html#a31ca9f5408b1f7610882c97c3db48826">MAX_EDICTS</a>];</div>
<div class="line"><a id="l03414" name="l03414"></a><span class="lineno"> 3414</span>    <span class="keyword">static</span> <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities</a>[<a class="code hl_define" href="qdefs_8h.html#a31ca9f5408b1f7610882c97c3db48826">MAX_EDICTS</a>];</div>
<div class="line"><a id="l03415" name="l03415"></a><span class="lineno"> 3415</span>    <span class="keyword">static</span> <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities_noselfshadow</a>[<a class="code hl_define" href="qdefs_8h.html#a31ca9f5408b1f7610882c97c3db48826">MAX_EDICTS</a>];</div>
<div class="line"><a id="l03416" name="l03416"></a><span class="lineno"> 3416</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nolight</a>;</div>
<div class="line"><a id="l03417" name="l03417"></a><span class="lineno"> 3417</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> castshadows;</div>
<div class="line"><a id="l03418" name="l03418"></a><span class="lineno"> 3418</span> </div>
<div class="line"><a id="l03419" name="l03419"></a><span class="lineno"> 3419</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a96ebca5b533ab334f4a061fb1acfdd5b">draw</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03420" name="l03420"></a><span class="lineno"> 3420</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a3288a752fb67a0bb1b531a3230b9cb60">cached_numlightentities</a> = 0;</div>
<div class="line"><a id="l03421" name="l03421"></a><span class="lineno"> 3421</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a70f4709295c5b83a5ed0c472f7b7a24d">cached_numlightentities_noselfshadow</a> = 0;</div>
<div class="line"><a id="l03422" name="l03422"></a><span class="lineno"> 3422</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a853096703e9ec8500de7c912cba40084">cached_numshadowentities</a> = 0;</div>
<div class="line"><a id="l03423" name="l03423"></a><span class="lineno"> 3423</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adae53566fd63b1633f5f3110dd8048c4">cached_numshadowentities_noselfshadow</a> = 0;</div>
<div class="line"><a id="l03424" name="l03424"></a><span class="lineno"> 3424</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#abd7dcefaa62c6eefd09f6f80de65487a">cached_numsurfaces</a> = 0;</div>
<div class="line"><a id="l03425" name="l03425"></a><span class="lineno"> 3425</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad9c05c79882566ece9814a3b20b4243f">cached_lightentities</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03426" name="l03426"></a><span class="lineno"> 3426</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a198e5c2d343454e9a2526f2e2be5f669">cached_lightentities_noselfshadow</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03427" name="l03427"></a><span class="lineno"> 3427</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#af22b957bb78c17bfd0a79f49abe3b8b0">cached_shadowentities</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03428" name="l03428"></a><span class="lineno"> 3428</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac68df87c216a55c350f962fda6f3ae2d">cached_shadowentities_noselfshadow</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03429" name="l03429"></a><span class="lineno"> 3429</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a598222b04c5a637ad2a8dff2acb33806">cached_shadowtrispvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03430" name="l03430"></a><span class="lineno"> 3430</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#addf32d395978ac7b2aa14f3676ea420b">cached_lighttrispvs</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03431" name="l03431"></a><span class="lineno"> 3431</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adbc1e51da19086eebde0e3d34a79f341">cached_surfacelist</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03432" name="l03432"></a><span class="lineno"> 3432</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab3450b2ecfa6eab9b7dbb12105dc370e">shadowmapsidesize</a> = 0;</div>
<div class="line"><a id="l03433" name="l03433"></a><span class="lineno"> 3433</span> </div>
<div class="line"><a id="l03434" name="l03434"></a><span class="lineno"> 3434</span>    <span class="comment">// skip lights that don&#39;t light because of ambientscale+diffusescale+specularscale being 0 (corona only lights)</span></div>
<div class="line"><a id="l03435" name="l03435"></a><span class="lineno"> 3435</span>    <span class="comment">// skip lights that are basically invisible (color 0 0 0)</span></div>
<div class="line"><a id="l03436" name="l03436"></a><span class="lineno"> 3436</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nolight</a> = <a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a478dcfe9a294410ade3e764a7905d597">color</a>) * (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a03ef425e5912ea3081d21e59478cd954">ambientscale</a> + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad8280f61360048850261e9c3e502c179">diffusescale</a> + rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a69efc0c4f5d373479bb9487d6bec228f">specularscale</a>) &lt; (1.0f / 1048576.0f);</div>
<div class="line"><a id="l03437" name="l03437"></a><span class="lineno"> 3437</span> </div>
<div class="line"><a id="l03438" name="l03438"></a><span class="lineno"> 3438</span>    <span class="comment">// loading is done before visibility checks because loading should happen</span></div>
<div class="line"><a id="l03439" name="l03439"></a><span class="lineno"> 3439</span>    <span class="comment">// all at once at the start of a level, not when it stalls gameplay.</span></div>
<div class="line"><a id="l03440" name="l03440"></a><span class="lineno"> 3440</span>    <span class="comment">// (especially important to benchmarks)</span></div>
<div class="line"><a id="l03441" name="l03441"></a><span class="lineno"> 3441</span>    <span class="comment">// compile light</span></div>
<div class="line"><a id="l03442" name="l03442"></a><span class="lineno"> 3442</span>    <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa2160b1bf94f48ab6fad8b05a23f9ad4">isstatic</a> &amp;&amp; !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nolight</a> &amp;&amp; !rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7c0681e500106dd86254191a2605b83e">compiled</a> &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#a96bc72dc79c1396d6213950a2819381d">r_shadow_realtime_world_compile</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l03443" name="l03443"></a><span class="lineno"> 3443</span>        <a class="code hl_function" href="r__shadow_8c.html#aeb1bb97aa2a8b56c567074f7a1ae93ff">R_RTLight_Compile</a>(rtlight);</div>
<div class="line"><a id="l03444" name="l03444"></a><span class="lineno"> 3444</span> </div>
<div class="line"><a id="l03445" name="l03445"></a><span class="lineno"> 3445</span>    <span class="comment">// load cubemap</span></div>
<div class="line"><a id="l03446" name="l03446"></a><span class="lineno"> 3446</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a048a9a61cd9f6dc84d8a4a14ce9b17aa">currentcubemap</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aafd3538635e6fe28af39579aee2ac8d1">cubemapname</a>[0] ? <a class="code hl_function" href="gl__rmain_8c.html#a9f892d1cf76c82c30d00abdd0187301a">R_GetCubemap</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aafd3538635e6fe28af39579aee2ac8d1">cubemapname</a>) : <a class="code hl_variable" href="gl__rmain_8c.html#a00905d7477a75b0ba23ce9bf00d167b1">r_texture_whitecube</a>;</div>
<div class="line"><a id="l03447" name="l03447"></a><span class="lineno"> 3447</span> </div>
<div class="line"><a id="l03448" name="l03448"></a><span class="lineno"> 3448</span>    <span class="comment">// look up the light style value at this time</span></div>
<div class="line"><a id="l03449" name="l03449"></a><span class="lineno"> 3449</span>    <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> = ((rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a86717e6c13a6c77eb41f0f0dd6d2fca6">style</a> &gt;= 0 &amp;&amp; rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a86717e6c13a6c77eb41f0f0dd6d2fca6">style</a> &lt; <a class="code hl_define" href="qdefs_8h.html#a48b85f1ccb414316c117e943ba927f19">MAX_LIGHTSTYLES</a>) ? <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a660519b32b5ce0399970d9869890ab87">rtlightstylevalue</a>[rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a86717e6c13a6c77eb41f0f0dd6d2fca6">style</a>] : 1) * <a class="code hl_variable" href="r__shadow_8c.html#a8b27974ce25cb2c28bbdc15bfb50f20f">r_shadow_lightintensityscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l03450" name="l03450"></a><span class="lineno"> 3450</span>    <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a478dcfe9a294410ade3e764a7905d597">color</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>);</div>
<div class="line"><a id="l03451" name="l03451"></a><span class="lineno"> 3451</span>    <span class="comment">/*</span></div>
<div class="line"><a id="l03452" name="l03452"></a><span class="lineno"> 3452</span><span class="comment">    if (rtlight-&gt;selected)</span></div>
<div class="line"><a id="l03453" name="l03453"></a><span class="lineno"> 3453</span><span class="comment">    {</span></div>
<div class="line"><a id="l03454" name="l03454"></a><span class="lineno"> 3454</span><span class="comment">        f = 2 + sin(host.realtime * M_PI * 4.0);</span></div>
<div class="line"><a id="l03455" name="l03455"></a><span class="lineno"> 3455</span><span class="comment">        VectorScale(rtlight-&gt;currentcolor, f, rtlight-&gt;currentcolor);</span></div>
<div class="line"><a id="l03456" name="l03456"></a><span class="lineno"> 3456</span><span class="comment">    }</span></div>
<div class="line"><a id="l03457" name="l03457"></a><span class="lineno"> 3457</span><span class="comment">    */</span></div>
<div class="line"><a id="l03458" name="l03458"></a><span class="lineno"> 3458</span> </div>
<div class="line"><a id="l03459" name="l03459"></a><span class="lineno"> 3459</span>    <span class="comment">// skip if lightstyle is currently off</span></div>
<div class="line"><a id="l03460" name="l03460"></a><span class="lineno"> 3460</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>) &lt; (1.0f / 1048576.0f))</div>
<div class="line"><a id="l03461" name="l03461"></a><span class="lineno"> 3461</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03462" name="l03462"></a><span class="lineno"> 3462</span> </div>
<div class="line"><a id="l03463" name="l03463"></a><span class="lineno"> 3463</span>    <span class="comment">// skip processing on corona-only lights</span></div>
<div class="line"><a id="l03464" name="l03464"></a><span class="lineno"> 3464</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nolight</a>)</div>
<div class="line"><a id="l03465" name="l03465"></a><span class="lineno"> 3465</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03466" name="l03466"></a><span class="lineno"> 3466</span> </div>
<div class="line"><a id="l03467" name="l03467"></a><span class="lineno"> 3467</span>    <span class="comment">// skip if the light box is not touching any visible leafs</span></div>
<div class="line"><a id="l03468" name="l03468"></a><span class="lineno"> 3468</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aab2089c6c18575adf51a542d79af6576">r_shadow_culllights_pvs</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a></div>
<div class="line"><a id="l03469" name="l03469"></a><span class="lineno"> 3469</span>        &amp;&amp; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a></div>
<div class="line"><a id="l03470" name="l03470"></a><span class="lineno"> 3470</span>        &amp;&amp; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a03c8c1a0218fe2b32ea5d039ad0e1932">BoxTouchingVisibleLeafs</a></div>
<div class="line"><a id="l03471" name="l03471"></a><span class="lineno"> 3471</span>        &amp;&amp; !<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a03c8c1a0218fe2b32ea5d039ad0e1932">BoxTouchingVisibleLeafs</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a1fe645bfc26ff5aef11c6be3db359a11">viewcache</a>.<a class="code hl_variable" href="structr__refdef__viewcache__t.html#a307e3b8919e542344422bf08579c7bfa">world_leafvisible</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>))</div>
<div class="line"><a id="l03472" name="l03472"></a><span class="lineno"> 3472</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03473" name="l03473"></a><span class="lineno"> 3473</span> </div>
<div class="line"><a id="l03474" name="l03474"></a><span class="lineno"> 3474</span>    <span class="comment">// skip if the light box is not visible to traceline</span></div>
<div class="line"><a id="l03475" name="l03475"></a><span class="lineno"> 3475</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a02b2e2feca78908352ada34d75d81317">r_shadow_culllights_trace</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l03476" name="l03476"></a><span class="lineno"> 3476</span>    {</div>
<div class="line"><a id="l03477" name="l03477"></a><span class="lineno"> 3477</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a51044efd43b63e9d1ae4cac917a88f36">trace_timer</a> != <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> &amp;&amp; <a class="code hl_function" href="gl__rmain_8c.html#a0c00b6cff8149799615236dd08a34616">R_CanSeeBox</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a51044efd43b63e9d1ae4cac917a88f36">trace_timer</a> == 0 ? <a class="code hl_variable" href="r__shadow_8c.html#ae2644f027256da38698199b0785682af">r_shadow_culllights_trace_tempsamples</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> : <a class="code hl_variable" href="r__shadow_8c.html#a3d32cd502c430d47379019c578c9375e">r_shadow_culllights_trace_samples</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7a09edeeb5508e0a09dbf3c9ebc425d3">r_shadow_culllights_trace_eyejitter</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <a class="code hl_variable" href="r__shadow_8c.html#a0dbe98d5b5b0ab64f5a82216b6b914ea">r_shadow_culllights_trace_enlarge</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <a class="code hl_variable" href="r__shadow_8c.html#a11c04eaa165865bb30ace640532be7ff">r_shadow_culllights_trace_expand</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7c6008b845bf6e182e4ae65068e0ee31">r_shadow_culllights_trace_pad</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>))</div>
<div class="line"><a id="l03478" name="l03478"></a><span class="lineno"> 3478</span>            rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a51044efd43b63e9d1ae4cac917a88f36">trace_timer</a> = <a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a>;</div>
<div class="line"><a id="l03479" name="l03479"></a><span class="lineno"> 3479</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a>.<a class="code hl_variable" href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">realtime</a> - rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a51044efd43b63e9d1ae4cac917a88f36">trace_timer</a> &gt; <a class="code hl_variable" href="r__shadow_8c.html#ab5e08902e85373b0756014349a87f244">r_shadow_culllights_trace_delay</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>)</div>
<div class="line"><a id="l03480" name="l03480"></a><span class="lineno"> 3480</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03481" name="l03481"></a><span class="lineno"> 3481</span>    }</div>
<div class="line"><a id="l03482" name="l03482"></a><span class="lineno"> 3482</span> </div>
<div class="line"><a id="l03483" name="l03483"></a><span class="lineno"> 3483</span>    <span class="comment">// skip if the light box is off screen</span></div>
<div class="line"><a id="l03484" name="l03484"></a><span class="lineno"> 3484</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="gl__rmain_8c.html#ad828a2865ae4baf75678ea5ba4e74242">R_CullFrustum</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>))</div>
<div class="line"><a id="l03485" name="l03485"></a><span class="lineno"> 3485</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03486" name="l03486"></a><span class="lineno"> 3486</span> </div>
<div class="line"><a id="l03487" name="l03487"></a><span class="lineno"> 3487</span>    <span class="comment">// in the typical case this will be quickly replaced by GetLightInfo</span></div>
<div class="line"><a id="l03488" name="l03488"></a><span class="lineno"> 3488</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>);</div>
<div class="line"><a id="l03489" name="l03489"></a><span class="lineno"> 3489</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>);</div>
<div class="line"><a id="l03490" name="l03490"></a><span class="lineno"> 3490</span> </div>
<div class="line"><a id="l03491" name="l03491"></a><span class="lineno"> 3491</span>    <a class="code hl_function" href="r__shadow_8c.html#ac8fae18c7ee489ebfaf1c8b0532edc99">R_Shadow_ComputeShadowCasterCullingPlanes</a>(rtlight);</div>
<div class="line"><a id="l03492" name="l03492"></a><span class="lineno"> 3492</span> </div>
<div class="line"><a id="l03493" name="l03493"></a><span class="lineno"> 3493</span>    <span class="comment">// don&#39;t allow lights to be drawn if using r_shadow_bouncegrid 2, except if we&#39;re using static bouncegrid where dynamic lights still need to draw</span></div>
<div class="line"><a id="l03494" name="l03494"></a><span class="lineno"> 3494</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#abfb9569e9c4eb3d7d902bbea591a24d4">r_shadow_bouncegrid</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> == 2 &amp;&amp; (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa2160b1bf94f48ab6fad8b05a23f9ad4">isstatic</a> || !<a class="code hl_variable" href="r__shadow_8c.html#a1797156202d8d7e1a2442610a777970a">r_shadow_bouncegrid_static</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>))</div>
<div class="line"><a id="l03495" name="l03495"></a><span class="lineno"> 3495</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03496" name="l03496"></a><span class="lineno"> 3496</span> </div>
<div class="line"><a id="l03497" name="l03497"></a><span class="lineno"> 3497</span>    <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7c0681e500106dd86254191a2605b83e">compiled</a> &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#a96bc72dc79c1396d6213950a2819381d">r_shadow_realtime_world_compile</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l03498" name="l03498"></a><span class="lineno"> 3498</span>    {</div>
<div class="line"><a id="l03499" name="l03499"></a><span class="lineno"> 3499</span>        <span class="comment">// compiled light, world available and can receive realtime lighting</span></div>
<div class="line"><a id="l03500" name="l03500"></a><span class="lineno"> 3500</span>        <span class="comment">// retrieve leaf information</span></div>
<div class="line"><a id="l03501" name="l03501"></a><span class="lineno"> 3501</span>        numleafs = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad9e77f1a895bbf4a497b638012042312">static_numleafs</a>;</div>
<div class="line"><a id="l03502" name="l03502"></a><span class="lineno"> 3502</span>        leaflist = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aaf33c55cde8363f4070be2acb1a55e1f">static_leaflist</a>;</div>
<div class="line"><a id="l03503" name="l03503"></a><span class="lineno"> 3503</span>        leafpvs = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a3803b95ad10433c09d2974d5b58479f6">static_leafpvs</a>;</div>
<div class="line"><a id="l03504" name="l03504"></a><span class="lineno"> 3504</span>        numsurfaces = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab05c3b11158c2d4cb373e8e07c17cce6">static_numsurfaces</a>;</div>
<div class="line"><a id="l03505" name="l03505"></a><span class="lineno"> 3505</span>        surfacelist = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adfa63f879a3f5d78dc6b3c10b34c52b6">static_surfacelist</a>;</div>
<div class="line"><a id="l03506" name="l03506"></a><span class="lineno"> 3506</span>        <span class="comment">//surfacesides = NULL;</span></div>
<div class="line"><a id="l03507" name="l03507"></a><span class="lineno"> 3507</span>        shadowtrispvs = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1ba178cb4540e85311afb777cff67eed">static_shadowtrispvs</a>;</div>
<div class="line"><a id="l03508" name="l03508"></a><span class="lineno"> 3508</span>        lighttrispvs = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a843540e766395ab0cf86fdb2976d3016">static_lighttrispvs</a>;</div>
<div class="line"><a id="l03509" name="l03509"></a><span class="lineno"> 3509</span>    }</div>
<div class="line"><a id="l03510" name="l03510"></a><span class="lineno"> 3510</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a> &amp;&amp; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a7a0081b6e77854bd75ae206afba89148">GetLightInfo</a>)</div>
<div class="line"><a id="l03511" name="l03511"></a><span class="lineno"> 3511</span>    {</div>
<div class="line"><a id="l03512" name="l03512"></a><span class="lineno"> 3512</span>        <span class="comment">// dynamic light, world available and can receive realtime lighting</span></div>
<div class="line"><a id="l03513" name="l03513"></a><span class="lineno"> 3513</span>        <span class="comment">// calculate lit surfaces and leafs</span></div>
<div class="line"><a id="l03514" name="l03514"></a><span class="lineno"> 3514</span>        <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a7a0081b6e77854bd75ae206afba89148">GetLightInfo</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ae4dfd0ad65bd2cecac4d12f329e331ca">worldentity</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>, <a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a>, <a class="code hl_variable" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a>, &amp;numleafs, <a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a>, <a class="code hl_variable" href="r__shadow_8c.html#a31e6522610c02f09559b7bd8bd75c558">r_shadow_buffer_surfacepvs</a>, &amp;numsurfaces, <a class="code hl_variable" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a>, <a class="code hl_variable" href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">r_shadow_buffer_lighttrispvs</a>, <a class="code hl_variable" href="r__shadow_8c.html#a358d50682355dd070731495eb5ccd19c">r_shadow_buffer_visitingleafpvs</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a24a17e99722f1493e45d4a240584a80c">shadow</a> == 0);</div>
<div class="line"><a id="l03515" name="l03515"></a><span class="lineno"> 3515</span>        <a class="code hl_function" href="r__shadow_8c.html#ac8fae18c7ee489ebfaf1c8b0532edc99">R_Shadow_ComputeShadowCasterCullingPlanes</a>(rtlight);</div>
<div class="line"><a id="l03516" name="l03516"></a><span class="lineno"> 3516</span>        leaflist = <a class="code hl_variable" href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a>;</div>
<div class="line"><a id="l03517" name="l03517"></a><span class="lineno"> 3517</span>        leafpvs = <a class="code hl_variable" href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a>;</div>
<div class="line"><a id="l03518" name="l03518"></a><span class="lineno"> 3518</span>        surfacelist = <a class="code hl_variable" href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a>;</div>
<div class="line"><a id="l03519" name="l03519"></a><span class="lineno"> 3519</span>        <span class="comment">//surfacesides = r_shadow_buffer_surfacesides;</span></div>
<div class="line"><a id="l03520" name="l03520"></a><span class="lineno"> 3520</span>        shadowtrispvs = <a class="code hl_variable" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a>;</div>
<div class="line"><a id="l03521" name="l03521"></a><span class="lineno"> 3521</span>        lighttrispvs = <a class="code hl_variable" href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">r_shadow_buffer_lighttrispvs</a>;</div>
<div class="line"><a id="l03522" name="l03522"></a><span class="lineno"> 3522</span>        <span class="comment">// if the reduced leaf bounds are offscreen, skip it</span></div>
<div class="line"><a id="l03523" name="l03523"></a><span class="lineno"> 3523</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="gl__rmain_8c.html#ad828a2865ae4baf75678ea5ba4e74242">R_CullFrustum</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>))</div>
<div class="line"><a id="l03524" name="l03524"></a><span class="lineno"> 3524</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03525" name="l03525"></a><span class="lineno"> 3525</span>    }</div>
<div class="line"><a id="l03526" name="l03526"></a><span class="lineno"> 3526</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l03527" name="l03527"></a><span class="lineno"> 3527</span>    {</div>
<div class="line"><a id="l03528" name="l03528"></a><span class="lineno"> 3528</span>        <span class="comment">// no world</span></div>
<div class="line"><a id="l03529" name="l03529"></a><span class="lineno"> 3529</span>        numleafs = 0;</div>
<div class="line"><a id="l03530" name="l03530"></a><span class="lineno"> 3530</span>        leaflist = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03531" name="l03531"></a><span class="lineno"> 3531</span>        leafpvs = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03532" name="l03532"></a><span class="lineno"> 3532</span>        numsurfaces = 0;</div>
<div class="line"><a id="l03533" name="l03533"></a><span class="lineno"> 3533</span>        surfacelist = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03534" name="l03534"></a><span class="lineno"> 3534</span>        <span class="comment">//surfacesides = NULL;</span></div>
<div class="line"><a id="l03535" name="l03535"></a><span class="lineno"> 3535</span>        shadowtrispvs = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03536" name="l03536"></a><span class="lineno"> 3536</span>        lighttrispvs = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03537" name="l03537"></a><span class="lineno"> 3537</span>    }</div>
<div class="line"><a id="l03538" name="l03538"></a><span class="lineno"> 3538</span>    <span class="comment">// check if light is illuminating any visible leafs</span></div>
<div class="line"><a id="l03539" name="l03539"></a><span class="lineno"> 3539</span>    <span class="keywordflow">if</span> (numleafs)</div>
<div class="line"><a id="l03540" name="l03540"></a><span class="lineno"> 3540</span>    {</div>
<div class="line"><a id="l03541" name="l03541"></a><span class="lineno"> 3541</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numleafs; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03542" name="l03542"></a><span class="lineno"> 3542</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a1fe645bfc26ff5aef11c6be3db359a11">viewcache</a>.<a class="code hl_variable" href="structr__refdef__viewcache__t.html#a307e3b8919e542344422bf08579c7bfa">world_leafvisible</a>[leaflist[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]])</div>
<div class="line"><a id="l03543" name="l03543"></a><span class="lineno"> 3543</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03544" name="l03544"></a><span class="lineno"> 3544</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> == numleafs)</div>
<div class="line"><a id="l03545" name="l03545"></a><span class="lineno"> 3545</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03546" name="l03546"></a><span class="lineno"> 3546</span>    }</div>
<div class="line"><a id="l03547" name="l03547"></a><span class="lineno"> 3547</span> </div>
<div class="line"><a id="l03548" name="l03548"></a><span class="lineno"> 3548</span>    <span class="comment">// make a list of lit entities and shadow casting entities</span></div>
<div class="line"><a id="l03549" name="l03549"></a><span class="lineno"> 3549</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a> = 0;</div>
<div class="line"><a id="l03550" name="l03550"></a><span class="lineno"> 3550</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a> = 0;</div>
<div class="line"><a id="l03551" name="l03551"></a><span class="lineno"> 3551</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a> = 0;</div>
<div class="line"><a id="l03552" name="l03552"></a><span class="lineno"> 3552</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a> = 0;</div>
<div class="line"><a id="l03553" name="l03553"></a><span class="lineno"> 3553</span> </div>
<div class="line"><a id="l03554" name="l03554"></a><span class="lineno"> 3554</span>    <span class="comment">// add dynamic entities that are lit by the light</span></div>
<div class="line"><a id="l03555" name="l03555"></a><span class="lineno"> 3555</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ab8c4efc627714dd8b1d5840851b45220">numentities</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03556" name="l03556"></a><span class="lineno"> 3556</span>    {</div>
<div class="line"><a id="l03557" name="l03557"></a><span class="lineno"> 3557</span>        <a class="code hl_struct" href="structmodel__t.html">model_t</a> *model;</div>
<div class="line"><a id="l03558" name="l03558"></a><span class="lineno"> 3558</span>        <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *ent = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a6e9b9caf2253fce60dcd0c86d1400c63">entities</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l03559" name="l03559"></a><span class="lineno"> 3559</span>        <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> org;</div>
<div class="line"><a id="l03560" name="l03560"></a><span class="lineno"> 3560</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="mathlib_8h.html#a3f4b2cfbd3195eddeb10b2e14b7e4d8c">BoxesOverlap</a>(ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a44bb671562e49c023bd13ebcae8d29a1">mins</a>, ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#af3bede297910947fd1b34ab74bbc690a">maxs</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>))</div>
<div class="line"><a id="l03561" name="l03561"></a><span class="lineno"> 3561</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03562" name="l03562"></a><span class="lineno"> 3562</span>        <span class="comment">// skip the object entirely if it is not within the valid</span></div>
<div class="line"><a id="l03563" name="l03563"></a><span class="lineno"> 3563</span>        <span class="comment">// shadow-casting region (which includes the lit region)</span></div>
<div class="line"><a id="l03564" name="l03564"></a><span class="lineno"> 3564</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="gl__rmain_8c.html#aa05549217fc8dd06da062b617140ffe6">R_CullBox</a>(ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a44bb671562e49c023bd13ebcae8d29a1">mins</a>, ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#af3bede297910947fd1b34ab74bbc690a">maxs</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">cached_numfrustumplanes</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">cached_frustumplanes</a>))</div>
<div class="line"><a id="l03565" name="l03565"></a><span class="lineno"> 3565</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03566" name="l03566"></a><span class="lineno"> 3566</span>        <span class="keywordflow">if</span> (!(model = ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>))</div>
<div class="line"><a id="l03567" name="l03567"></a><span class="lineno"> 3567</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03568" name="l03568"></a><span class="lineno"> 3568</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a1fe645bfc26ff5aef11c6be3db359a11">viewcache</a>.<a class="code hl_variable" href="structr__refdef__viewcache__t.html#abd40af0c9cb4c935c883e6135cd9d07d">entityvisible</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp;&amp; model-&gt;<a class="code hl_variable" href="structmodel__t.html#af206eaa0040c5a5e297fa1c0191b22dd">DrawLight</a> &amp;&amp; (ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a771a7b129ac67f0139f5b4920a722360">flags</a> &amp; <a class="code hl_define" href="protocol_8h.html#ac71e31bc2b5436d508b25b444d60783e">RENDER_LIGHT</a>))</div>
<div class="line"><a id="l03569" name="l03569"></a><span class="lineno"> 3569</span>        {</div>
<div class="line"><a id="l03570" name="l03570"></a><span class="lineno"> 3570</span>            <span class="comment">// this entity wants to receive light, is visible, and is</span></div>
<div class="line"><a id="l03571" name="l03571"></a><span class="lineno"> 3571</span>            <span class="comment">// inside the light box</span></div>
<div class="line"><a id="l03572" name="l03572"></a><span class="lineno"> 3572</span>            <span class="comment">// TODO: check if the surfaces in the model can receive light</span></div>
<div class="line"><a id="l03573" name="l03573"></a><span class="lineno"> 3573</span>            <span class="comment">// so now check if it&#39;s in a leaf seen by the light</span></div>
<div class="line"><a id="l03574" name="l03574"></a><span class="lineno"> 3574</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a> &amp;&amp; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ad61f56d9901c3877d3cc297d41f6118b">BoxTouchingLeafPVS</a> &amp;&amp; !<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ad61f56d9901c3877d3cc297d41f6118b">BoxTouchingLeafPVS</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>, leafpvs, ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a44bb671562e49c023bd13ebcae8d29a1">mins</a>, ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#af3bede297910947fd1b34ab74bbc690a">maxs</a>))</div>
<div class="line"><a id="l03575" name="l03575"></a><span class="lineno"> 3575</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03576" name="l03576"></a><span class="lineno"> 3576</span>            <span class="keywordflow">if</span> (ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a771a7b129ac67f0139f5b4920a722360">flags</a> &amp; <a class="code hl_define" href="protocol_8h.html#ac2914ad7842a27f20404bdd38f2e25a1">RENDER_NOSELFSHADOW</a>)</div>
<div class="line"><a id="l03577" name="l03577"></a><span class="lineno"> 3577</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities_noselfshadow</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a>++] = ent;</div>
<div class="line"><a id="l03578" name="l03578"></a><span class="lineno"> 3578</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l03579" name="l03579"></a><span class="lineno"> 3579</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a>++] = ent;</div>
<div class="line"><a id="l03580" name="l03580"></a><span class="lineno"> 3580</span>            <span class="comment">// since it is lit, it probably also casts a shadow...</span></div>
<div class="line"><a id="l03581" name="l03581"></a><span class="lineno"> 3581</span>            <span class="comment">// about the VectorDistance2 - light emitting entities should not cast their own shadow</span></div>
<div class="line"><a id="l03582" name="l03582"></a><span class="lineno"> 3582</span>            <a class="code hl_function" href="matrixlib_8c.html#afa5873e4026ae22dd9e6aa9177930ef0">Matrix4x4_OriginFromMatrix</a>(&amp;ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a35e44e80da95a4aad81a3fcec2aa3fab">matrix</a>, org);</div>
<div class="line"><a id="l03583" name="l03583"></a><span class="lineno"> 3583</span>            <span class="keywordflow">if</span> ((ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a771a7b129ac67f0139f5b4920a722360">flags</a> &amp; <a class="code hl_define" href="protocol_8h.html#a73aa38a060145a0da1a2bd3a54c12cd6">RENDER_SHADOW</a>) &amp;&amp; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a71121e7ef28a949af258f4611ce21e9c">DrawShadowMap</a> &amp;&amp; <a class="code hl_define" href="mathlib_8h.html#a9a5748d2424dee5c44d5d358e1944125">VectorDistance2</a>(org, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>) &gt; 0.1)</div>
<div class="line"><a id="l03584" name="l03584"></a><span class="lineno"> 3584</span>            {</div>
<div class="line"><a id="l03585" name="l03585"></a><span class="lineno"> 3585</span>                <span class="comment">// note: exterior models without the RENDER_NOSELFSHADOW</span></div>
<div class="line"><a id="l03586" name="l03586"></a><span class="lineno"> 3586</span>                <span class="comment">// flag still create a RENDER_NOSELFSHADOW shadow but</span></div>
<div class="line"><a id="l03587" name="l03587"></a><span class="lineno"> 3587</span>                <span class="comment">// are lit normally, this means that they are</span></div>
<div class="line"><a id="l03588" name="l03588"></a><span class="lineno"> 3588</span>                <span class="comment">// self-shadowing but do not shadow other</span></div>
<div class="line"><a id="l03589" name="l03589"></a><span class="lineno"> 3589</span>                <span class="comment">// RENDER_NOSELFSHADOW entities such as the gun</span></div>
<div class="line"><a id="l03590" name="l03590"></a><span class="lineno"> 3590</span>                <span class="comment">// (very weird, but keeps the player shadow off the gun)</span></div>
<div class="line"><a id="l03591" name="l03591"></a><span class="lineno"> 3591</span>                <span class="keywordflow">if</span> (ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a771a7b129ac67f0139f5b4920a722360">flags</a> &amp; (<a class="code hl_define" href="protocol_8h.html#ac2914ad7842a27f20404bdd38f2e25a1">RENDER_NOSELFSHADOW</a> | <a class="code hl_define" href="protocol_8h.html#a10e582f2bc1acafa1be980bfcfa31a03">RENDER_EXTERIORMODEL</a>))</div>
<div class="line"><a id="l03592" name="l03592"></a><span class="lineno"> 3592</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities_noselfshadow</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a>++] = ent;</div>
<div class="line"><a id="l03593" name="l03593"></a><span class="lineno"> 3593</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l03594" name="l03594"></a><span class="lineno"> 3594</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a>++] = ent;</div>
<div class="line"><a id="l03595" name="l03595"></a><span class="lineno"> 3595</span>            }</div>
<div class="line"><a id="l03596" name="l03596"></a><span class="lineno"> 3596</span>        }</div>
<div class="line"><a id="l03597" name="l03597"></a><span class="lineno"> 3597</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a771a7b129ac67f0139f5b4920a722360">flags</a> &amp; <a class="code hl_define" href="protocol_8h.html#a73aa38a060145a0da1a2bd3a54c12cd6">RENDER_SHADOW</a>)</div>
<div class="line"><a id="l03598" name="l03598"></a><span class="lineno"> 3598</span>        {</div>
<div class="line"><a id="l03599" name="l03599"></a><span class="lineno"> 3599</span>            <span class="comment">// this entity is not receiving light, but may still need to</span></div>
<div class="line"><a id="l03600" name="l03600"></a><span class="lineno"> 3600</span>            <span class="comment">// cast a shadow...</span></div>
<div class="line"><a id="l03601" name="l03601"></a><span class="lineno"> 3601</span>            <span class="comment">// TODO: check if the surfaces in the model can cast shadow</span></div>
<div class="line"><a id="l03602" name="l03602"></a><span class="lineno"> 3602</span>            <span class="comment">// now check if it is in a leaf seen by the light</span></div>
<div class="line"><a id="l03603" name="l03603"></a><span class="lineno"> 3603</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a> &amp;&amp; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ad61f56d9901c3877d3cc297d41f6118b">BoxTouchingLeafPVS</a> &amp;&amp; !<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ad61f56d9901c3877d3cc297d41f6118b">BoxTouchingLeafPVS</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>, leafpvs, ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a44bb671562e49c023bd13ebcae8d29a1">mins</a>, ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#af3bede297910947fd1b34ab74bbc690a">maxs</a>))</div>
<div class="line"><a id="l03604" name="l03604"></a><span class="lineno"> 3604</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03605" name="l03605"></a><span class="lineno"> 3605</span>            <span class="comment">// about the VectorDistance2 - light emitting entities should not cast their own shadow</span></div>
<div class="line"><a id="l03606" name="l03606"></a><span class="lineno"> 3606</span>            <a class="code hl_function" href="matrixlib_8c.html#afa5873e4026ae22dd9e6aa9177930ef0">Matrix4x4_OriginFromMatrix</a>(&amp;ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a35e44e80da95a4aad81a3fcec2aa3fab">matrix</a>, org);</div>
<div class="line"><a id="l03607" name="l03607"></a><span class="lineno"> 3607</span>            <span class="keywordflow">if</span> ((ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a771a7b129ac67f0139f5b4920a722360">flags</a> &amp; <a class="code hl_define" href="protocol_8h.html#a73aa38a060145a0da1a2bd3a54c12cd6">RENDER_SHADOW</a>) &amp;&amp; model-&gt;<a class="code hl_variable" href="structmodel__t.html#a71121e7ef28a949af258f4611ce21e9c">DrawShadowMap</a> &amp;&amp; <a class="code hl_define" href="mathlib_8h.html#a9a5748d2424dee5c44d5d358e1944125">VectorDistance2</a>(org, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>) &gt; 0.1)</div>
<div class="line"><a id="l03608" name="l03608"></a><span class="lineno"> 3608</span>            {</div>
<div class="line"><a id="l03609" name="l03609"></a><span class="lineno"> 3609</span>                <span class="keywordflow">if</span> (ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a771a7b129ac67f0139f5b4920a722360">flags</a> &amp; (<a class="code hl_define" href="protocol_8h.html#ac2914ad7842a27f20404bdd38f2e25a1">RENDER_NOSELFSHADOW</a> | <a class="code hl_define" href="protocol_8h.html#a10e582f2bc1acafa1be980bfcfa31a03">RENDER_EXTERIORMODEL</a>))</div>
<div class="line"><a id="l03610" name="l03610"></a><span class="lineno"> 3610</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities_noselfshadow</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a>++] = ent;</div>
<div class="line"><a id="l03611" name="l03611"></a><span class="lineno"> 3611</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l03612" name="l03612"></a><span class="lineno"> 3612</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a>++] = ent;</div>
<div class="line"><a id="l03613" name="l03613"></a><span class="lineno"> 3613</span>            }</div>
<div class="line"><a id="l03614" name="l03614"></a><span class="lineno"> 3614</span>        }</div>
<div class="line"><a id="l03615" name="l03615"></a><span class="lineno"> 3615</span>    }</div>
<div class="line"><a id="l03616" name="l03616"></a><span class="lineno"> 3616</span> </div>
<div class="line"><a id="l03617" name="l03617"></a><span class="lineno"> 3617</span>    <span class="comment">// return if there&#39;s nothing at all to light</span></div>
<div class="line"><a id="l03618" name="l03618"></a><span class="lineno"> 3618</span>    <span class="keywordflow">if</span> (numsurfaces + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a> == 0)</div>
<div class="line"><a id="l03619" name="l03619"></a><span class="lineno"> 3619</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03620" name="l03620"></a><span class="lineno"> 3620</span> </div>
<div class="line"><a id="l03621" name="l03621"></a><span class="lineno"> 3621</span>    <span class="comment">// count this light in the r_speeds</span></div>
<div class="line"><a id="l03622" name="l03622"></a><span class="lineno"> 3622</span>    <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#acb0c53994baa529557477269d81d5507">stats</a>[<a class="code hl_enumvalue" href="r__stats_8h.html#ae611154931c203d788794752dda991f8ab3b2f10ad08dae9618178b8c6942b972">r_stat_lights</a>]++;</div>
<div class="line"><a id="l03623" name="l03623"></a><span class="lineno"> 3623</span> </div>
<div class="line"><a id="l03624" name="l03624"></a><span class="lineno"> 3624</span>    <span class="comment">// flag it as worth drawing later</span></div>
<div class="line"><a id="l03625" name="l03625"></a><span class="lineno"> 3625</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a96ebca5b533ab334f4a061fb1acfdd5b">draw</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03626" name="l03626"></a><span class="lineno"> 3626</span> </div>
<div class="line"><a id="l03627" name="l03627"></a><span class="lineno"> 3627</span>    <span class="comment">// if we have shadows disabled, don&#39;t count the shadow entities, this way we don&#39;t do the R_AnimCache_GetEntity on each one</span></div>
<div class="line"><a id="l03628" name="l03628"></a><span class="lineno"> 3628</span>    castshadows = numsurfaces + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a> &gt; 0 &amp;&amp; rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a24a17e99722f1493e45d4a240584a80c">shadow</a> &amp;&amp; (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa2160b1bf94f48ab6fad8b05a23f9ad4">isstatic</a> ? <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ac261c344d37b7155ff7421f98b48e36b">rtworldshadows</a> : <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ac37d87f99c54b619604ddbe0fddd3c94">rtdlightshadows</a>);</div>
<div class="line"><a id="l03629" name="l03629"></a><span class="lineno"> 3629</span>    <span class="keywordflow">if</span> (!castshadows)</div>
<div class="line"><a id="l03630" name="l03630"></a><span class="lineno"> 3630</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a> = 0;</div>
<div class="line"><a id="l03631" name="l03631"></a><span class="lineno"> 3631</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ade7605138e2c6380603cdb402c62b3c8">castshadows</a> = castshadows;</div>
<div class="line"><a id="l03632" name="l03632"></a><span class="lineno"> 3632</span> </div>
<div class="line"><a id="l03633" name="l03633"></a><span class="lineno"> 3633</span>    <span class="comment">// cache all the animated entities that cast a shadow but are not visible</span></div>
<div class="line"><a id="l03634" name="l03634"></a><span class="lineno"> 3634</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03635" name="l03635"></a><span class="lineno"> 3635</span>        <a class="code hl_function" href="gl__rmain_8c.html#a2ebd69dd33cef88cb5280d6a31e0a5d6">R_AnimCache_GetEntity</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l03636" name="l03636"></a><span class="lineno"> 3636</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03637" name="l03637"></a><span class="lineno"> 3637</span>        <a class="code hl_function" href="gl__rmain_8c.html#a2ebd69dd33cef88cb5280d6a31e0a5d6">R_AnimCache_GetEntity</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities_noselfshadow</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l03638" name="l03638"></a><span class="lineno"> 3638</span> </div>
<div class="line"><a id="l03639" name="l03639"></a><span class="lineno"> 3639</span>    <span class="comment">// we can convert noselfshadow to regular if there are no receivers of that type (or we&#39;re using r_shadow_deferred which doesn&#39;t support noselfshadow anyway)</span></div>
<div class="line"><a id="l03640" name="l03640"></a><span class="lineno"> 3640</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a> &gt; 0 &amp;&amp; (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a> == 0 || <a class="code hl_variable" href="r__shadow_8c.html#a4b5a72c38504bc6ea78e695f2ed16aca">r_shadow_usingdeferredprepass</a>))</div>
<div class="line"><a id="l03641" name="l03641"></a><span class="lineno"> 3641</span>    {</div>
<div class="line"><a id="l03642" name="l03642"></a><span class="lineno"> 3642</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03643" name="l03643"></a><span class="lineno"> 3643</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a>++] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities_noselfshadow</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l03644" name="l03644"></a><span class="lineno"> 3644</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a> = 0;</div>
<div class="line"><a id="l03645" name="l03645"></a><span class="lineno"> 3645</span>    }</div>
<div class="line"><a id="l03646" name="l03646"></a><span class="lineno"> 3646</span> </div>
<div class="line"><a id="l03647" name="l03647"></a><span class="lineno"> 3647</span>    <span class="comment">// we can convert noselfshadow to regular if there are no casters of that type</span></div>
<div class="line"><a id="l03648" name="l03648"></a><span class="lineno"> 3648</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a> &gt; 0 &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a> == 0)</div>
<div class="line"><a id="l03649" name="l03649"></a><span class="lineno"> 3649</span>    {</div>
<div class="line"><a id="l03650" name="l03650"></a><span class="lineno"> 3650</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03651" name="l03651"></a><span class="lineno"> 3651</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a>++] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities_noselfshadow</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l03652" name="l03652"></a><span class="lineno"> 3652</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a> = 0;</div>
<div class="line"><a id="l03653" name="l03653"></a><span class="lineno"> 3653</span>    }</div>
<div class="line"><a id="l03654" name="l03654"></a><span class="lineno"> 3654</span> </div>
<div class="line"><a id="l03655" name="l03655"></a><span class="lineno"> 3655</span>    <span class="comment">// allocate some temporary memory for rendering this light later in the frame</span></div>
<div class="line"><a id="l03656" name="l03656"></a><span class="lineno"> 3656</span>    <span class="comment">// reusable buffers need to be copied, static data can be used as-is</span></div>
<div class="line"><a id="l03657" name="l03657"></a><span class="lineno"> 3657</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a3288a752fb67a0bb1b531a3230b9cb60">cached_numlightentities</a>               = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a>;</div>
<div class="line"><a id="l03658" name="l03658"></a><span class="lineno"> 3658</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a70f4709295c5b83a5ed0c472f7b7a24d">cached_numlightentities_noselfshadow</a>  = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a>;</div>
<div class="line"><a id="l03659" name="l03659"></a><span class="lineno"> 3659</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a853096703e9ec8500de7c912cba40084">cached_numshadowentities</a>              = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a>;</div>
<div class="line"><a id="l03660" name="l03660"></a><span class="lineno"> 3660</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adae53566fd63b1633f5f3110dd8048c4">cached_numshadowentities_noselfshadow</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a>;</div>
<div class="line"><a id="l03661" name="l03661"></a><span class="lineno"> 3661</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#abd7dcefaa62c6eefd09f6f80de65487a">cached_numsurfaces</a>                    = numsurfaces;</div>
<div class="line"><a id="l03662" name="l03662"></a><span class="lineno"> 3662</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad9c05c79882566ece9814a3b20b4243f">cached_lightentities</a>                  = (<a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a>**)<a class="code hl_function" href="gl__rmain_8c.html#aefbad90ca99fed9fd3be95f04f07eb08">R_FrameData_Store</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a>*<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a>*), (<span class="keywordtype">void</span>*)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities</a>);</div>
<div class="line"><a id="l03663" name="l03663"></a><span class="lineno"> 3663</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a198e5c2d343454e9a2526f2e2be5f669">cached_lightentities_noselfshadow</a>     = (<a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a>**)<a class="code hl_function" href="gl__rmain_8c.html#aefbad90ca99fed9fd3be95f04f07eb08">R_FrameData_Store</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a>*<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a>*), (<span class="keywordtype">void</span>*)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities_noselfshadow</a>);</div>
<div class="line"><a id="l03664" name="l03664"></a><span class="lineno"> 3664</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#af22b957bb78c17bfd0a79f49abe3b8b0">cached_shadowentities</a>                 = (<a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a>**)<a class="code hl_function" href="gl__rmain_8c.html#aefbad90ca99fed9fd3be95f04f07eb08">R_FrameData_Store</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a>*<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a>*), (<span class="keywordtype">void</span>*)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities</a>);</div>
<div class="line"><a id="l03665" name="l03665"></a><span class="lineno"> 3665</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac68df87c216a55c350f962fda6f3ae2d">cached_shadowentities_noselfshadow</a>    = (<a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a>**)<a class="code hl_function" href="gl__rmain_8c.html#aefbad90ca99fed9fd3be95f04f07eb08">R_FrameData_Store</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a>*<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *), (<span class="keywordtype">void</span>*)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities_noselfshadow</a>);</div>
<div class="line"><a id="l03666" name="l03666"></a><span class="lineno"> 3666</span>    <span class="keywordflow">if</span> (shadowtrispvs == <a class="code hl_variable" href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a>)</div>
<div class="line"><a id="l03667" name="l03667"></a><span class="lineno"> 3667</span>    {</div>
<div class="line"><a id="l03668" name="l03668"></a><span class="lineno"> 3668</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowtrispvsbytes</a> = ((<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> + 7) &gt;&gt; 3);</div>
<div class="line"><a id="l03669" name="l03669"></a><span class="lineno"> 3669</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlighttrispvsbytes</a> = ((<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a> + 7) &gt;&gt; 3);</div>
<div class="line"><a id="l03670" name="l03670"></a><span class="lineno"> 3670</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a598222b04c5a637ad2a8dff2acb33806">cached_shadowtrispvs</a>                  =   (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_function" href="gl__rmain_8c.html#aefbad90ca99fed9fd3be95f04f07eb08">R_FrameData_Store</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowtrispvsbytes</a>, shadowtrispvs);</div>
<div class="line"><a id="l03671" name="l03671"></a><span class="lineno"> 3671</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#addf32d395978ac7b2aa14f3676ea420b">cached_lighttrispvs</a>                   =   (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code hl_function" href="gl__rmain_8c.html#aefbad90ca99fed9fd3be95f04f07eb08">R_FrameData_Store</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlighttrispvsbytes</a>, lighttrispvs);</div>
<div class="line"><a id="l03672" name="l03672"></a><span class="lineno"> 3672</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adbc1e51da19086eebde0e3d34a79f341">cached_surfacelist</a>                    =              (<span class="keywordtype">int</span>*)<a class="code hl_function" href="gl__rmain_8c.html#aefbad90ca99fed9fd3be95f04f07eb08">R_FrameData_Store</a>(numsurfaces*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), (<span class="keywordtype">void</span>*)surfacelist);</div>
<div class="line"><a id="l03673" name="l03673"></a><span class="lineno"> 3673</span>    }</div>
<div class="line"><a id="l03674" name="l03674"></a><span class="lineno"> 3674</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l03675" name="l03675"></a><span class="lineno"> 3675</span>    {</div>
<div class="line"><a id="l03676" name="l03676"></a><span class="lineno"> 3676</span>        <span class="comment">// compiled light data</span></div>
<div class="line"><a id="l03677" name="l03677"></a><span class="lineno"> 3677</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a598222b04c5a637ad2a8dff2acb33806">cached_shadowtrispvs</a> = shadowtrispvs;</div>
<div class="line"><a id="l03678" name="l03678"></a><span class="lineno"> 3678</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#addf32d395978ac7b2aa14f3676ea420b">cached_lighttrispvs</a> = lighttrispvs;</div>
<div class="line"><a id="l03679" name="l03679"></a><span class="lineno"> 3679</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adbc1e51da19086eebde0e3d34a79f341">cached_surfacelist</a> = surfacelist;</div>
<div class="line"><a id="l03680" name="l03680"></a><span class="lineno"> 3680</span>    }</div>
<div class="line"><a id="l03681" name="l03681"></a><span class="lineno"> 3681</span> </div>
<div class="line"><a id="l03682" name="l03682"></a><span class="lineno"> 3682</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="r__shadow_8c.html#a6a2b6b4ed69e837e20c465b31226b9e4">R_Shadow_ShadowMappingEnabled</a>())</div>
<div class="line"><a id="l03683" name="l03683"></a><span class="lineno"> 3683</span>    {</div>
<div class="line"><a id="l03684" name="l03684"></a><span class="lineno"> 3684</span>        <span class="comment">// figure out the shadowmapping parameters for this light</span></div>
<div class="line"><a id="l03685" name="l03685"></a><span class="lineno"> 3685</span>        <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nearestpoint</a>;</div>
<div class="line"><a id="l03686" name="l03686"></a><span class="lineno"> 3686</span>        <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">distance</a>;</div>
<div class="line"><a id="l03687" name="l03687"></a><span class="lineno"> 3687</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lodlinear</a>;</div>
<div class="line"><a id="l03688" name="l03688"></a><span class="lineno"> 3688</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nearestpoint</a>[0] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>[0], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>[0]);</div>
<div class="line"><a id="l03689" name="l03689"></a><span class="lineno"> 3689</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nearestpoint</a>[1] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>[1], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>[1], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>[1]);</div>
<div class="line"><a id="l03690" name="l03690"></a><span class="lineno"> 3690</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nearestpoint</a>[2] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">cullmins</a>[2], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>[2], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">cullmaxs</a>[2]);</div>
<div class="line"><a id="l03691" name="l03691"></a><span class="lineno"> 3691</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">distance</a> = <a class="code hl_define" href="mathlib_8h.html#ac5e3717306036960d4619258d3d4bca2">VectorDistance</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">nearestpoint</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>);</div>
<div class="line"><a id="l03692" name="l03692"></a><span class="lineno"> 3692</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lodlinear</a> = (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a> * <a class="code hl_variable" href="r__shadow_8c.html#a56bd32784edad8eaa9a2e95494b5f929">r_shadow_shadowmapping_precision</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>) / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(1.0f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">distance</a> / rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>));</div>
<div class="line"><a id="l03693" name="l03693"></a><span class="lineno"> 3693</span>        <span class="comment">//lodlinear = (int)(r_shadow_shadowmapping_lod_bias.value + r_shadow_shadowmapping_lod_scale.value * rtlight-&gt;radius / max(1.0f, distance));</span></div>
<div class="line"><a id="l03694" name="l03694"></a><span class="lineno"> 3694</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lodlinear</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(<a class="code hl_variable" href="r__shadow_8c.html#a37be7284dc0c2e90696440ee3ced0f12">r_shadow_shadowmapping_minsize</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lodlinear</a>, <a class="code hl_variable" href="r__shadow_8c.html#a2acc73bfba472354d3cb6c2998628eb0">r_shadow_shadowmapmaxsize</a>);</div>
<div class="line"><a id="l03695" name="l03695"></a><span class="lineno"> 3695</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab3450b2ecfa6eab9b7dbb12105dc370e">shadowmapsidesize</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(<a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lodlinear</a>, <a class="code hl_variable" href="r__shadow_8c.html#a2acc73bfba472354d3cb6c2998628eb0">r_shadow_shadowmapmaxsize</a>);</div>
<div class="line"><a id="l03696" name="l03696"></a><span class="lineno"> 3696</span>        <span class="comment">// shadowmapatlas* variables will be set by R_Shadow_PrepareLights()</span></div>
<div class="line"><a id="l03697" name="l03697"></a><span class="lineno"> 3697</span>    }</div>
<div class="line"><a id="l03698" name="l03698"></a><span class="lineno"> 3698</span>}</div>
</div>
<div class="line"><a id="l03699" name="l03699"></a><span class="lineno"> 3699</span> </div>
<div class="foldopen" id="foldopen03700" data-start="{" data-end="}">
<div class="line"><a id="l03700" name="l03700"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a85c48b5fadf41ff35eb2c65a2feb4212"> 3700</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a85c48b5fadf41ff35eb2c65a2feb4212">R_Shadow_DrawLightShadowMaps</a>(<a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight)</div>
<div class="line"><a id="l03701" name="l03701"></a><span class="lineno"> 3701</span>{</div>
<div class="line"><a id="l03702" name="l03702"></a><span class="lineno"> 3702</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l03703" name="l03703"></a><span class="lineno"> 3703</span>    <span class="keywordtype">int</span> numsurfaces;</div>
<div class="line"><a id="l03704" name="l03704"></a><span class="lineno"> 3704</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *shadowtrispvs, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacesides</a>;</div>
<div class="line"><a id="l03705" name="l03705"></a><span class="lineno"> 3705</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a>;</div>
<div class="line"><a id="l03706" name="l03706"></a><span class="lineno"> 3706</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a>;</div>
<div class="line"><a id="l03707" name="l03707"></a><span class="lineno"> 3707</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a>;</div>
<div class="line"><a id="l03708" name="l03708"></a><span class="lineno"> 3708</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a>;</div>
<div class="line"><a id="l03709" name="l03709"></a><span class="lineno"> 3709</span>    <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> **<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities</a>;</div>
<div class="line"><a id="l03710" name="l03710"></a><span class="lineno"> 3710</span>    <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> **<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities_noselfshadow</a>;</div>
<div class="line"><a id="l03711" name="l03711"></a><span class="lineno"> 3711</span>    <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> **<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities</a>;</div>
<div class="line"><a id="l03712" name="l03712"></a><span class="lineno"> 3712</span>    <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> **<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities_noselfshadow</a>;</div>
<div class="line"><a id="l03713" name="l03713"></a><span class="lineno"> 3713</span>    <span class="keywordtype">int</span> *surfacelist;</div>
<div class="line"><a id="l03714" name="l03714"></a><span class="lineno"> 3714</span>    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entitysides</a>[<a class="code hl_define" href="qdefs_8h.html#a31ca9f5408b1f7610882c97c3db48826">MAX_EDICTS</a>];</div>
<div class="line"><a id="l03715" name="l03715"></a><span class="lineno"> 3715</span>    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entitysides_noselfshadow</a>[<a class="code hl_define" href="qdefs_8h.html#a31ca9f5408b1f7610882c97c3db48826">MAX_EDICTS</a>];</div>
<div class="line"><a id="l03716" name="l03716"></a><span class="lineno"> 3716</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">borderbias</a>;</div>
<div class="line"><a id="l03717" name="l03717"></a><span class="lineno"> 3717</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a>;</div>
<div class="line"><a id="l03718" name="l03718"></a><span class="lineno"> 3718</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;</div>
<div class="line"><a id="l03719" name="l03719"></a><span class="lineno"> 3719</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">castermask</a>;</div>
<div class="line"><a id="l03720" name="l03720"></a><span class="lineno"> 3720</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receivermask</a>;</div>
<div class="line"><a id="l03721" name="l03721"></a><span class="lineno"> 3721</span>    <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">radiustolight</a>;</div>
<div class="line"><a id="l03722" name="l03722"></a><span class="lineno"> 3722</span> </div>
<div class="line"><a id="l03723" name="l03723"></a><span class="lineno"> 3723</span>    <span class="comment">// check if we cached this light this frame (meaning it is worth drawing)</span></div>
<div class="line"><a id="l03724" name="l03724"></a><span class="lineno"> 3724</span>    <span class="keywordflow">if</span> (!rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a96ebca5b533ab334f4a061fb1acfdd5b">draw</a> || !rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ade7605138e2c6380603cdb402c62b3c8">castshadows</a>)</div>
<div class="line"><a id="l03725" name="l03725"></a><span class="lineno"> 3725</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03726" name="l03726"></a><span class="lineno"> 3726</span> </div>
<div class="line"><a id="l03727" name="l03727"></a><span class="lineno"> 3727</span>    <span class="comment">// if PrepareLights could not find any space for this shadowmap, we may as well mark it as not casting shadows...</span></div>
<div class="line"><a id="l03728" name="l03728"></a><span class="lineno"> 3728</span>    <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a241dacf73c783ce200946897b338ca04">shadowmapatlassidesize</a> == 0)</div>
<div class="line"><a id="l03729" name="l03729"></a><span class="lineno"> 3729</span>    {</div>
<div class="line"><a id="l03730" name="l03730"></a><span class="lineno"> 3730</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ade7605138e2c6380603cdb402c62b3c8">castshadows</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03731" name="l03731"></a><span class="lineno"> 3731</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03732" name="l03732"></a><span class="lineno"> 3732</span>    }</div>
<div class="line"><a id="l03733" name="l03733"></a><span class="lineno"> 3733</span> </div>
<div class="line"><a id="l03734" name="l03734"></a><span class="lineno"> 3734</span>    <span class="comment">// set up a scissor rectangle for this light</span></div>
<div class="line"><a id="l03735" name="l03735"></a><span class="lineno"> 3735</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="r__shadow_8c.html#a20d4a825a2a263eec0869a8372fac5e2">R_Shadow_ScissorForBBox</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>))</div>
<div class="line"><a id="l03736" name="l03736"></a><span class="lineno"> 3736</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03737" name="l03737"></a><span class="lineno"> 3737</span> </div>
<div class="line"><a id="l03738" name="l03738"></a><span class="lineno"> 3738</span>    <span class="comment">// don&#39;t let sound skip if going slow</span></div>
<div class="line"><a id="l03739" name="l03739"></a><span class="lineno"> 3739</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a5e522da90373661c46825181a717d610">extraupdate</a>)</div>
<div class="line"><a id="l03740" name="l03740"></a><span class="lineno"> 3740</span>        <a class="code hl_function" href="snd__main_8c.html#ac8f1d491f70a504540240cbb8c97b7a4">S_ExtraUpdate</a>();</div>
<div class="line"><a id="l03741" name="l03741"></a><span class="lineno"> 3741</span> </div>
<div class="line"><a id="l03742" name="l03742"></a><span class="lineno"> 3742</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a3288a752fb67a0bb1b531a3230b9cb60">cached_numlightentities</a>;</div>
<div class="line"><a id="l03743" name="l03743"></a><span class="lineno"> 3743</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a70f4709295c5b83a5ed0c472f7b7a24d">cached_numlightentities_noselfshadow</a>;</div>
<div class="line"><a id="l03744" name="l03744"></a><span class="lineno"> 3744</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a853096703e9ec8500de7c912cba40084">cached_numshadowentities</a>;</div>
<div class="line"><a id="l03745" name="l03745"></a><span class="lineno"> 3745</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adae53566fd63b1633f5f3110dd8048c4">cached_numshadowentities_noselfshadow</a>;</div>
<div class="line"><a id="l03746" name="l03746"></a><span class="lineno"> 3746</span>    numsurfaces = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#abd7dcefaa62c6eefd09f6f80de65487a">cached_numsurfaces</a>;</div>
<div class="line"><a id="l03747" name="l03747"></a><span class="lineno"> 3747</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad9c05c79882566ece9814a3b20b4243f">cached_lightentities</a>;</div>
<div class="line"><a id="l03748" name="l03748"></a><span class="lineno"> 3748</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities_noselfshadow</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a198e5c2d343454e9a2526f2e2be5f669">cached_lightentities_noselfshadow</a>;</div>
<div class="line"><a id="l03749" name="l03749"></a><span class="lineno"> 3749</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#af22b957bb78c17bfd0a79f49abe3b8b0">cached_shadowentities</a>;</div>
<div class="line"><a id="l03750" name="l03750"></a><span class="lineno"> 3750</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities_noselfshadow</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac68df87c216a55c350f962fda6f3ae2d">cached_shadowentities_noselfshadow</a>;</div>
<div class="line"><a id="l03751" name="l03751"></a><span class="lineno"> 3751</span>    shadowtrispvs = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a598222b04c5a637ad2a8dff2acb33806">cached_shadowtrispvs</a>;</div>
<div class="line"><a id="l03752" name="l03752"></a><span class="lineno"> 3752</span>    surfacelist = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adbc1e51da19086eebde0e3d34a79f341">cached_surfacelist</a>;</div>
<div class="line"><a id="l03753" name="l03753"></a><span class="lineno"> 3753</span> </div>
<div class="line"><a id="l03754" name="l03754"></a><span class="lineno"> 3754</span>    <span class="comment">// make this the active rtlight for rendering purposes</span></div>
<div class="line"><a id="l03755" name="l03755"></a><span class="lineno"> 3755</span>    <a class="code hl_function" href="r__shadow_8c.html#adc3c945c3bc028142dddad245179892f">R_Shadow_RenderMode_ActiveLight</a>(rtlight);</div>
<div class="line"><a id="l03756" name="l03756"></a><span class="lineno"> 3756</span> </div>
<div class="line"><a id="l03757" name="l03757"></a><span class="lineno"> 3757</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">radiustolight</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>;</div>
<div class="line"><a id="l03758" name="l03758"></a><span class="lineno"> 3758</span>    <a class="code hl_function" href="matrixlib_8c.html#ab47e78509c43b39508fcf65d042437f3">Matrix4x4_Abs</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">radiustolight</a>);</div>
<div class="line"><a id="l03759" name="l03759"></a><span class="lineno"> 3759</span> </div>
<div class="line"><a id="l03760" name="l03760"></a><span class="lineno"> 3760</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a241dacf73c783ce200946897b338ca04">shadowmapatlassidesize</a>;</div>
<div class="line"><a id="l03761" name="l03761"></a><span class="lineno"> 3761</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">borderbias</a> = <a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a> / (<a class="code hl_variable" href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a>)(<a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> - <a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a>);</div>
<div class="line"><a id="l03762" name="l03762"></a><span class="lineno"> 3762</span> </div>
<div class="line"><a id="l03763" name="l03763"></a><span class="lineno"> 3763</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacesides</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03764" name="l03764"></a><span class="lineno"> 3764</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">castermask</a> = 0;</div>
<div class="line"><a id="l03765" name="l03765"></a><span class="lineno"> 3765</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receivermask</a> = 0;</div>
<div class="line"><a id="l03766" name="l03766"></a><span class="lineno"> 3766</span>    <span class="keywordflow">if</span> (numsurfaces)</div>
<div class="line"><a id="l03767" name="l03767"></a><span class="lineno"> 3767</span>    {</div>
<div class="line"><a id="l03768" name="l03768"></a><span class="lineno"> 3768</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a7c0681e500106dd86254191a2605b83e">compiled</a> &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#a96bc72dc79c1396d6213950a2819381d">r_shadow_realtime_world_compile</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#aae98730caa3cd73c0376ee07db2e4f23">r_shadow_realtime_world_compileshadow</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l03769" name="l03769"></a><span class="lineno"> 3769</span>        {</div>
<div class="line"><a id="l03770" name="l03770"></a><span class="lineno"> 3770</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">castermask</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a48f75788286c6cc3afaf9b358836f60a">static_shadowmap_casters</a>;</div>
<div class="line"><a id="l03771" name="l03771"></a><span class="lineno"> 3771</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receivermask</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a292c8a191142204ba5103e7ff65d126c">static_shadowmap_receivers</a>;</div>
<div class="line"><a id="l03772" name="l03772"></a><span class="lineno"> 3772</span>        }</div>
<div class="line"><a id="l03773" name="l03773"></a><span class="lineno"> 3773</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l03774" name="l03774"></a><span class="lineno"> 3774</span>        {</div>
<div class="line"><a id="l03775" name="l03775"></a><span class="lineno"> 3775</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacesides</a> = <a class="code hl_variable" href="r__shadow_8c.html#a064f7d12ba68cca46e785786d48e8985">r_shadow_buffer_surfacesides</a>;</div>
<div class="line"><a id="l03776" name="l03776"></a><span class="lineno"> 3776</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numsurfaces; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03777" name="l03777"></a><span class="lineno"> 3777</span>            {</div>
<div class="line"><a id="l03778" name="l03778"></a><span class="lineno"> 3778</span>                <a class="code hl_struct" href="structmsurface__t.html">msurface_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a> = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">data_surfaces</a> + surfacelist[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l03779" name="l03779"></a><span class="lineno"> 3779</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacesides</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_function" href="r__shadow_8c.html#a04d629dcbf12096a83779b9384b4fa91">R_Shadow_CalcBBoxSideMask</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;mins, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surface</a>-&gt;maxs, &amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">radiustolight</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">borderbias</a>);</div>
<div class="line"><a id="l03780" name="l03780"></a><span class="lineno"> 3780</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">castermask</a> |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacesides</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l03781" name="l03781"></a><span class="lineno"> 3781</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receivermask</a> |= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacesides</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l03782" name="l03782"></a><span class="lineno"> 3782</span>            }</div>
<div class="line"><a id="l03783" name="l03783"></a><span class="lineno"> 3783</span>        }</div>
<div class="line"><a id="l03784" name="l03784"></a><span class="lineno"> 3784</span>    }</div>
<div class="line"><a id="l03785" name="l03785"></a><span class="lineno"> 3785</span> </div>
<div class="line"><a id="l03786" name="l03786"></a><span class="lineno"> 3786</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receivermask</a> &lt; 0x3F; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03787" name="l03787"></a><span class="lineno"> 3787</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receivermask</a> |= <a class="code hl_define" href="r__shadow_8c.html#a2d392398ed943f5b31fb70a9be2ecdd2">R_Shadow_CalcEntitySideMask</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], &amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">radiustolight</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">borderbias</a>);</div>
<div class="line"><a id="l03788" name="l03788"></a><span class="lineno"> 3788</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receivermask</a> &lt; 0x3F; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03789" name="l03789"></a><span class="lineno"> 3789</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receivermask</a> |= <a class="code hl_define" href="r__shadow_8c.html#a2d392398ed943f5b31fb70a9be2ecdd2">R_Shadow_CalcEntitySideMask</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities_noselfshadow</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], &amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">radiustolight</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">borderbias</a>);</div>
<div class="line"><a id="l03790" name="l03790"></a><span class="lineno"> 3790</span> </div>
<div class="line"><a id="l03791" name="l03791"></a><span class="lineno"> 3791</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receivermask</a> &amp;= <a class="code hl_function" href="r__shadow_8c.html#ac6934d9ab2fa894a14f01d84961e15ca">R_Shadow_CullFrustumSides</a>(rtlight, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, <a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a>);</div>
<div class="line"><a id="l03792" name="l03792"></a><span class="lineno"> 3792</span> </div>
<div class="line"><a id="l03793" name="l03793"></a><span class="lineno"> 3793</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receivermask</a>)</div>
<div class="line"><a id="l03794" name="l03794"></a><span class="lineno"> 3794</span>    {</div>
<div class="line"><a id="l03795" name="l03795"></a><span class="lineno"> 3795</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03796" name="l03796"></a><span class="lineno"> 3796</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">castermask</a> |= (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entitysides</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_define" href="r__shadow_8c.html#a2d392398ed943f5b31fb70a9be2ecdd2">R_Shadow_CalcEntitySideMask</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], &amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">radiustolight</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">borderbias</a>));</div>
<div class="line"><a id="l03797" name="l03797"></a><span class="lineno"> 3797</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03798" name="l03798"></a><span class="lineno"> 3798</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">castermask</a> |= (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entitysides_noselfshadow</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code hl_define" href="r__shadow_8c.html#a2d392398ed943f5b31fb70a9be2ecdd2">R_Shadow_CalcEntitySideMask</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities_noselfshadow</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>], &amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">radiustolight</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">borderbias</a>));</div>
<div class="line"><a id="l03799" name="l03799"></a><span class="lineno"> 3799</span>    }</div>
<div class="line"><a id="l03800" name="l03800"></a><span class="lineno"> 3800</span> </div>
<div class="line"><a id="l03801" name="l03801"></a><span class="lineno"> 3801</span>    <span class="comment">// there is no need to render shadows for sides that have no receivers...</span></div>
<div class="line"><a id="l03802" name="l03802"></a><span class="lineno"> 3802</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">castermask</a> &amp;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">receivermask</a>;</div>
<div class="line"><a id="l03803" name="l03803"></a><span class="lineno"> 3803</span> </div>
<div class="line"><a id="l03804" name="l03804"></a><span class="lineno"> 3804</span>    <span class="comment">//Con_Printf(&quot;distance %f lodlinear %i size %i\n&quot;, distance, lodlinear, size);</span></div>
<div class="line"><a id="l03805" name="l03805"></a><span class="lineno"> 3805</span> </div>
<div class="line"><a id="l03806" name="l03806"></a><span class="lineno"> 3806</span>    <span class="comment">// render shadow casters into shadowmaps for this light</span></div>
<div class="line"><a id="l03807" name="l03807"></a><span class="lineno"> 3807</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a> &lt; 6; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a>++)</div>
<div class="line"><a id="l03808" name="l03808"></a><span class="lineno"> 3808</span>    {</div>
<div class="line"><a id="l03809" name="l03809"></a><span class="lineno"> 3809</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bit</a> = 1 &lt;&lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a>;</div>
<div class="line"><a id="l03810" name="l03810"></a><span class="lineno"> 3810</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">castermask</a> &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bit</a>)</div>
<div class="line"><a id="l03811" name="l03811"></a><span class="lineno"> 3811</span>        {</div>
<div class="line"><a id="l03812" name="l03812"></a><span class="lineno"> 3812</span>            <a class="code hl_function" href="r__shadow_8c.html#a9e657a20931acb0ccfca4a4a7013d858">R_Shadow_RenderMode_ShadowMap</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a>, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ae92ae64bc83b7ca422ee2f4897fa86aa">shadowmapatlasposition</a>[0], rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ae92ae64bc83b7ca422ee2f4897fa86aa">shadowmapatlasposition</a>[1]);</div>
<div class="line"><a id="l03813" name="l03813"></a><span class="lineno"> 3813</span>            <span class="keywordflow">if</span> (numsurfaces)</div>
<div class="line"><a id="l03814" name="l03814"></a><span class="lineno"> 3814</span>                <a class="code hl_function" href="r__shadow_8c.html#ac715ef2e77ddf2827ab304c2dbe6e17e">R_Shadow_DrawWorldShadow_ShadowMap</a>(numsurfaces, surfacelist, shadowtrispvs, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacesides</a>);</div>
<div class="line"><a id="l03815" name="l03815"></a><span class="lineno"> 3815</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03816" name="l03816"></a><span class="lineno"> 3816</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entitysides</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bit</a>)</div>
<div class="line"><a id="l03817" name="l03817"></a><span class="lineno"> 3817</span>                    <a class="code hl_function" href="r__shadow_8c.html#a99d38a120a6bd9f7d41a417371ded304">R_Shadow_DrawEntityShadow</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l03818" name="l03818"></a><span class="lineno"> 3818</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03819" name="l03819"></a><span class="lineno"> 3819</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entitysides_noselfshadow</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bit</a>)</div>
<div class="line"><a id="l03820" name="l03820"></a><span class="lineno"> 3820</span>                    <a class="code hl_function" href="r__shadow_8c.html#a99d38a120a6bd9f7d41a417371ded304">R_Shadow_DrawEntityShadow</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities_noselfshadow</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l03821" name="l03821"></a><span class="lineno"> 3821</span>        }</div>
<div class="line"><a id="l03822" name="l03822"></a><span class="lineno"> 3822</span>    }</div>
<div class="line"><a id="l03823" name="l03823"></a><span class="lineno"> 3823</span>    <span class="comment">// additionally if there are any noselfshadow casters we have to render a second set of shadowmaps without those :(</span></div>
<div class="line"><a id="l03824" name="l03824"></a><span class="lineno"> 3824</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities_noselfshadow</a>)</div>
<div class="line"><a id="l03825" name="l03825"></a><span class="lineno"> 3825</span>    {</div>
<div class="line"><a id="l03826" name="l03826"></a><span class="lineno"> 3826</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a> &lt; 6; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a>++)</div>
<div class="line"><a id="l03827" name="l03827"></a><span class="lineno"> 3827</span>        {</div>
<div class="line"><a id="l03828" name="l03828"></a><span class="lineno"> 3828</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bit</a> = 1 &lt;&lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a>;</div>
<div class="line"><a id="l03829" name="l03829"></a><span class="lineno"> 3829</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">castermask</a> &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bit</a>)</div>
<div class="line"><a id="l03830" name="l03830"></a><span class="lineno"> 3830</span>            {</div>
<div class="line"><a id="l03831" name="l03831"></a><span class="lineno"> 3831</span>                <a class="code hl_function" href="r__shadow_8c.html#a9e657a20931acb0ccfca4a4a7013d858">R_Shadow_RenderMode_ShadowMap</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">side</a>, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ae92ae64bc83b7ca422ee2f4897fa86aa">shadowmapatlasposition</a>[0] + <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> * 2, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ae92ae64bc83b7ca422ee2f4897fa86aa">shadowmapatlasposition</a>[1]);</div>
<div class="line"><a id="l03832" name="l03832"></a><span class="lineno"> 3832</span>                <span class="keywordflow">if</span> (numsurfaces)</div>
<div class="line"><a id="l03833" name="l03833"></a><span class="lineno"> 3833</span>                    <a class="code hl_function" href="r__shadow_8c.html#ac715ef2e77ddf2827ab304c2dbe6e17e">R_Shadow_DrawWorldShadow_ShadowMap</a>(numsurfaces, surfacelist, shadowtrispvs, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">surfacesides</a>);</div>
<div class="line"><a id="l03834" name="l03834"></a><span class="lineno"> 3834</span>                <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numshadowentities</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03835" name="l03835"></a><span class="lineno"> 3835</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entitysides</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bit</a>)</div>
<div class="line"><a id="l03836" name="l03836"></a><span class="lineno"> 3836</span>                        <a class="code hl_function" href="r__shadow_8c.html#a99d38a120a6bd9f7d41a417371ded304">R_Shadow_DrawEntityShadow</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowentities</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l03837" name="l03837"></a><span class="lineno"> 3837</span>            }</div>
<div class="line"><a id="l03838" name="l03838"></a><span class="lineno"> 3838</span>        }</div>
<div class="line"><a id="l03839" name="l03839"></a><span class="lineno"> 3839</span>    }</div>
<div class="line"><a id="l03840" name="l03840"></a><span class="lineno"> 3840</span>}</div>
</div>
<div class="line"><a id="l03841" name="l03841"></a><span class="lineno"> 3841</span> </div>
<div class="foldopen" id="foldopen03842" data-start="{" data-end="}">
<div class="line"><a id="l03842" name="l03842"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#acf3856ee38d8738a7617d3781f384683"> 3842</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#acf3856ee38d8738a7617d3781f384683">R_Shadow_DrawLight</a>(<a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight)</div>
<div class="line"><a id="l03843" name="l03843"></a><span class="lineno"> 3843</span>{</div>
<div class="line"><a id="l03844" name="l03844"></a><span class="lineno"> 3844</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l03845" name="l03845"></a><span class="lineno"> 3845</span>    <span class="keywordtype">int</span> numsurfaces;</div>
<div class="line"><a id="l03846" name="l03846"></a><span class="lineno"> 3846</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *lighttrispvs;</div>
<div class="line"><a id="l03847" name="l03847"></a><span class="lineno"> 3847</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a>;</div>
<div class="line"><a id="l03848" name="l03848"></a><span class="lineno"> 3848</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a>;</div>
<div class="line"><a id="l03849" name="l03849"></a><span class="lineno"> 3849</span>    <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> **<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities</a>;</div>
<div class="line"><a id="l03850" name="l03850"></a><span class="lineno"> 3850</span>    <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> **<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities_noselfshadow</a>;</div>
<div class="line"><a id="l03851" name="l03851"></a><span class="lineno"> 3851</span>    <span class="keywordtype">int</span> *surfacelist;</div>
<div class="line"><a id="l03852" name="l03852"></a><span class="lineno"> 3852</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> castshadows;</div>
<div class="line"><a id="l03853" name="l03853"></a><span class="lineno"> 3853</span> </div>
<div class="line"><a id="l03854" name="l03854"></a><span class="lineno"> 3854</span>    <span class="comment">// check if we cached this light this frame (meaning it is worth drawing)</span></div>
<div class="line"><a id="l03855" name="l03855"></a><span class="lineno"> 3855</span>    <span class="keywordflow">if</span> (!rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a96ebca5b533ab334f4a061fb1acfdd5b">draw</a>)</div>
<div class="line"><a id="l03856" name="l03856"></a><span class="lineno"> 3856</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03857" name="l03857"></a><span class="lineno"> 3857</span> </div>
<div class="line"><a id="l03858" name="l03858"></a><span class="lineno"> 3858</span>    <span class="comment">// set up a scissor rectangle for this light</span></div>
<div class="line"><a id="l03859" name="l03859"></a><span class="lineno"> 3859</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="r__shadow_8c.html#a20d4a825a2a263eec0869a8372fac5e2">R_Shadow_ScissorForBBox</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">cached_cullmins</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">cached_cullmaxs</a>))</div>
<div class="line"><a id="l03860" name="l03860"></a><span class="lineno"> 3860</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03861" name="l03861"></a><span class="lineno"> 3861</span> </div>
<div class="line"><a id="l03862" name="l03862"></a><span class="lineno"> 3862</span>    <span class="comment">// don&#39;t let sound skip if going slow</span></div>
<div class="line"><a id="l03863" name="l03863"></a><span class="lineno"> 3863</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a5e522da90373661c46825181a717d610">extraupdate</a>)</div>
<div class="line"><a id="l03864" name="l03864"></a><span class="lineno"> 3864</span>        <a class="code hl_function" href="snd__main_8c.html#ac8f1d491f70a504540240cbb8c97b7a4">S_ExtraUpdate</a>();</div>
<div class="line"><a id="l03865" name="l03865"></a><span class="lineno"> 3865</span> </div>
<div class="line"><a id="l03866" name="l03866"></a><span class="lineno"> 3866</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a3288a752fb67a0bb1b531a3230b9cb60">cached_numlightentities</a>;</div>
<div class="line"><a id="l03867" name="l03867"></a><span class="lineno"> 3867</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a70f4709295c5b83a5ed0c472f7b7a24d">cached_numlightentities_noselfshadow</a>;</div>
<div class="line"><a id="l03868" name="l03868"></a><span class="lineno"> 3868</span>    numsurfaces = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#abd7dcefaa62c6eefd09f6f80de65487a">cached_numsurfaces</a>;</div>
<div class="line"><a id="l03869" name="l03869"></a><span class="lineno"> 3869</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ad9c05c79882566ece9814a3b20b4243f">cached_lightentities</a>;</div>
<div class="line"><a id="l03870" name="l03870"></a><span class="lineno"> 3870</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities_noselfshadow</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a198e5c2d343454e9a2526f2e2be5f669">cached_lightentities_noselfshadow</a>;</div>
<div class="line"><a id="l03871" name="l03871"></a><span class="lineno"> 3871</span>    lighttrispvs = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#addf32d395978ac7b2aa14f3676ea420b">cached_lighttrispvs</a>;</div>
<div class="line"><a id="l03872" name="l03872"></a><span class="lineno"> 3872</span>    surfacelist = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adbc1e51da19086eebde0e3d34a79f341">cached_surfacelist</a>;</div>
<div class="line"><a id="l03873" name="l03873"></a><span class="lineno"> 3873</span>    castshadows = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ade7605138e2c6380603cdb402c62b3c8">castshadows</a>;</div>
<div class="line"><a id="l03874" name="l03874"></a><span class="lineno"> 3874</span> </div>
<div class="line"><a id="l03875" name="l03875"></a><span class="lineno"> 3875</span>    <span class="comment">// make this the active rtlight for rendering purposes</span></div>
<div class="line"><a id="l03876" name="l03876"></a><span class="lineno"> 3876</span>    <a class="code hl_function" href="r__shadow_8c.html#adc3c945c3bc028142dddad245179892f">R_Shadow_RenderMode_ActiveLight</a>(rtlight);</div>
<div class="line"><a id="l03877" name="l03877"></a><span class="lineno"> 3877</span> </div>
<div class="line"><a id="l03878" name="l03878"></a><span class="lineno"> 3878</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#a06a2f8c2455e92727760628c72f15b18">r_showlighting</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &amp;&amp; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a2049dafdd8ddecb20619b9771392876e">showdebug</a> &amp;&amp; numsurfaces + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a>)</div>
<div class="line"><a id="l03879" name="l03879"></a><span class="lineno"> 3879</span>    {</div>
<div class="line"><a id="l03880" name="l03880"></a><span class="lineno"> 3880</span>        <span class="comment">// optionally draw the illuminated areas</span></div>
<div class="line"><a id="l03881" name="l03881"></a><span class="lineno"> 3881</span>        <span class="comment">// for performance analysis by level designers</span></div>
<div class="line"><a id="l03882" name="l03882"></a><span class="lineno"> 3882</span>        <a class="code hl_function" href="r__shadow_8c.html#a9726bbf07d8b90fc592f1ec058584ba8">R_Shadow_RenderMode_VisibleLighting</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l03883" name="l03883"></a><span class="lineno"> 3883</span>        <span class="keywordflow">if</span> (numsurfaces)</div>
<div class="line"><a id="l03884" name="l03884"></a><span class="lineno"> 3884</span>            <a class="code hl_function" href="r__shadow_8c.html#af065abef516db94b9a4185099ddb92ab">R_Shadow_DrawWorldLight</a>(numsurfaces, surfacelist, lighttrispvs);</div>
<div class="line"><a id="l03885" name="l03885"></a><span class="lineno"> 3885</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03886" name="l03886"></a><span class="lineno"> 3886</span>            <a class="code hl_function" href="r__shadow_8c.html#a4e6dc58667f284a549e3dde6d0b7bf7c">R_Shadow_DrawEntityLight</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l03887" name="l03887"></a><span class="lineno"> 3887</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03888" name="l03888"></a><span class="lineno"> 3888</span>            <a class="code hl_function" href="r__shadow_8c.html#a4e6dc58667f284a549e3dde6d0b7bf7c">R_Shadow_DrawEntityLight</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities_noselfshadow</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l03889" name="l03889"></a><span class="lineno"> 3889</span>    }</div>
<div class="line"><a id="l03890" name="l03890"></a><span class="lineno"> 3890</span> </div>
<div class="line"><a id="l03891" name="l03891"></a><span class="lineno"> 3891</span>    <span class="keywordflow">if</span> (castshadows &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#a8806bf00c50d87c860dce157ae250a48">r_shadow_shadowmode</a> == <a class="code hl_enumvalue" href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835aca635c2eb9b6d41bf36cc8ab01f4444b">R_SHADOW_SHADOWMODE_SHADOWMAP2D</a>)</div>
<div class="line"><a id="l03892" name="l03892"></a><span class="lineno"> 3892</span>    {</div>
<div class="line"><a id="l03893" name="l03893"></a><span class="lineno"> 3893</span>        <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">radiustolight</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">matrix_worldtolight</a>;</div>
<div class="line"><a id="l03894" name="l03894"></a><span class="lineno"> 3894</span>        <a class="code hl_function" href="matrixlib_8c.html#ab47e78509c43b39508fcf65d042437f3">Matrix4x4_Abs</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">radiustolight</a>);</div>
<div class="line"><a id="l03895" name="l03895"></a><span class="lineno"> 3895</span> </div>
<div class="line"><a id="l03896" name="l03896"></a><span class="lineno"> 3896</span>        <span class="comment">//Con_Printf(&quot;distance %f lodlinear %i size %i\n&quot;, distance, lodlinear, size);</span></div>
<div class="line"><a id="l03897" name="l03897"></a><span class="lineno"> 3897</span> </div>
<div class="line"><a id="l03898" name="l03898"></a><span class="lineno"> 3898</span>        <span class="comment">// render lighting using the depth texture as shadowmap</span></div>
<div class="line"><a id="l03899" name="l03899"></a><span class="lineno"> 3899</span>        <span class="comment">// draw lighting in the unmasked areas</span></div>
<div class="line"><a id="l03900" name="l03900"></a><span class="lineno"> 3900</span>        <span class="keywordflow">if</span> (numsurfaces + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a>)</div>
<div class="line"><a id="l03901" name="l03901"></a><span class="lineno"> 3901</span>        {</div>
<div class="line"><a id="l03902" name="l03902"></a><span class="lineno"> 3902</span>            <a class="code hl_function" href="r__shadow_8c.html#a00d0fbb6cc4becc92625bcea3a857507">R_Shadow_RenderMode_Lighting</a>(<span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l03903" name="l03903"></a><span class="lineno"> 3903</span>            <span class="comment">// draw lighting in the unmasked areas</span></div>
<div class="line"><a id="l03904" name="l03904"></a><span class="lineno"> 3904</span>            <span class="keywordflow">if</span> (numsurfaces)</div>
<div class="line"><a id="l03905" name="l03905"></a><span class="lineno"> 3905</span>                <a class="code hl_function" href="r__shadow_8c.html#af065abef516db94b9a4185099ddb92ab">R_Shadow_DrawWorldLight</a>(numsurfaces, surfacelist, lighttrispvs);</div>
<div class="line"><a id="l03906" name="l03906"></a><span class="lineno"> 3906</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03907" name="l03907"></a><span class="lineno"> 3907</span>                <a class="code hl_function" href="r__shadow_8c.html#a4e6dc58667f284a549e3dde6d0b7bf7c">R_Shadow_DrawEntityLight</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l03908" name="l03908"></a><span class="lineno"> 3908</span>        }</div>
<div class="line"><a id="l03909" name="l03909"></a><span class="lineno"> 3909</span>        <span class="comment">// offset to the noselfshadow part of the atlas and draw those too</span></div>
<div class="line"><a id="l03910" name="l03910"></a><span class="lineno"> 3910</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a>)</div>
<div class="line"><a id="l03911" name="l03911"></a><span class="lineno"> 3911</span>        {</div>
<div class="line"><a id="l03912" name="l03912"></a><span class="lineno"> 3912</span>            <a class="code hl_function" href="r__shadow_8c.html#a00d0fbb6cc4becc92625bcea3a857507">R_Shadow_RenderMode_Lighting</a>(<span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l03913" name="l03913"></a><span class="lineno"> 3913</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03914" name="l03914"></a><span class="lineno"> 3914</span>                <a class="code hl_function" href="r__shadow_8c.html#a4e6dc58667f284a549e3dde6d0b7bf7c">R_Shadow_DrawEntityLight</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities_noselfshadow</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l03915" name="l03915"></a><span class="lineno"> 3915</span>        }</div>
<div class="line"><a id="l03916" name="l03916"></a><span class="lineno"> 3916</span> </div>
<div class="line"><a id="l03917" name="l03917"></a><span class="lineno"> 3917</span>        <span class="comment">// rasterize the box when rendering deferred lighting - the regular surface lighting only applies to transparent surfaces</span></div>
<div class="line"><a id="l03918" name="l03918"></a><span class="lineno"> 3918</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a4b5a72c38504bc6ea78e695f2ed16aca">r_shadow_usingdeferredprepass</a>)</div>
<div class="line"><a id="l03919" name="l03919"></a><span class="lineno"> 3919</span>            <a class="code hl_function" href="r__shadow_8c.html#a6756c2a0bed93299d516312dbd9b834d">R_Shadow_RenderMode_DrawDeferredLight</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l03920" name="l03920"></a><span class="lineno"> 3920</span>    }</div>
<div class="line"><a id="l03921" name="l03921"></a><span class="lineno"> 3921</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l03922" name="l03922"></a><span class="lineno"> 3922</span>    {</div>
<div class="line"><a id="l03923" name="l03923"></a><span class="lineno"> 3923</span>        <span class="comment">// draw lighting in the unmasked areas</span></div>
<div class="line"><a id="l03924" name="l03924"></a><span class="lineno"> 3924</span>        <a class="code hl_function" href="r__shadow_8c.html#a00d0fbb6cc4becc92625bcea3a857507">R_Shadow_RenderMode_Lighting</a>(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l03925" name="l03925"></a><span class="lineno"> 3925</span>        <span class="keywordflow">if</span> (numsurfaces)</div>
<div class="line"><a id="l03926" name="l03926"></a><span class="lineno"> 3926</span>            <a class="code hl_function" href="r__shadow_8c.html#af065abef516db94b9a4185099ddb92ab">R_Shadow_DrawWorldLight</a>(numsurfaces, surfacelist, lighttrispvs);</div>
<div class="line"><a id="l03927" name="l03927"></a><span class="lineno"> 3927</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03928" name="l03928"></a><span class="lineno"> 3928</span>            <a class="code hl_function" href="r__shadow_8c.html#a4e6dc58667f284a549e3dde6d0b7bf7c">R_Shadow_DrawEntityLight</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l03929" name="l03929"></a><span class="lineno"> 3929</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">numlightentities_noselfshadow</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03930" name="l03930"></a><span class="lineno"> 3930</span>            <a class="code hl_function" href="r__shadow_8c.html#a4e6dc58667f284a549e3dde6d0b7bf7c">R_Shadow_DrawEntityLight</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightentities_noselfshadow</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a id="l03931" name="l03931"></a><span class="lineno"> 3931</span> </div>
<div class="line"><a id="l03932" name="l03932"></a><span class="lineno"> 3932</span>        <span class="comment">// rasterize the box when rendering deferred lighting - the regular surface lighting only applies to transparent surfaces</span></div>
<div class="line"><a id="l03933" name="l03933"></a><span class="lineno"> 3933</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a4b5a72c38504bc6ea78e695f2ed16aca">r_shadow_usingdeferredprepass</a>)</div>
<div class="line"><a id="l03934" name="l03934"></a><span class="lineno"> 3934</span>            <a class="code hl_function" href="r__shadow_8c.html#a6756c2a0bed93299d516312dbd9b834d">R_Shadow_RenderMode_DrawDeferredLight</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l03935" name="l03935"></a><span class="lineno"> 3935</span>    }</div>
<div class="line"><a id="l03936" name="l03936"></a><span class="lineno"> 3936</span>}</div>
</div>
<div class="line"><a id="l03937" name="l03937"></a><span class="lineno"> 3937</span> </div>
<div class="foldopen" id="foldopen03938" data-start="{" data-end="}">
<div class="line"><a id="l03938" name="l03938"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a24e3d35efcffd1452bf8b5d900a08d2c"> 3938</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a24e3d35efcffd1452bf8b5d900a08d2c">R_Shadow_FreeDeferred</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l03939" name="l03939"></a><span class="lineno"> 3939</span>{</div>
<div class="line"><a id="l03940" name="l03940"></a><span class="lineno"> 3940</span>    <a class="code hl_function" href="gl__backend_8c.html#afc361a7676a518ccccc3f0bb3b38b9c0">R_Mesh_DestroyFramebufferObject</a>(<a class="code hl_variable" href="r__shadow_8c.html#a9ab5dac5aed1eab9783f6f731c4c5853">r_shadow_prepassgeometryfbo</a>);</div>
<div class="line"><a id="l03941" name="l03941"></a><span class="lineno"> 3941</span>    <a class="code hl_variable" href="r__shadow_8c.html#a9ab5dac5aed1eab9783f6f731c4c5853">r_shadow_prepassgeometryfbo</a> = 0;</div>
<div class="line"><a id="l03942" name="l03942"></a><span class="lineno"> 3942</span> </div>
<div class="line"><a id="l03943" name="l03943"></a><span class="lineno"> 3943</span>    <a class="code hl_function" href="gl__backend_8c.html#afc361a7676a518ccccc3f0bb3b38b9c0">R_Mesh_DestroyFramebufferObject</a>(<a class="code hl_variable" href="r__shadow_8c.html#a7239c53ebcb3083ca7bc8d5c2eac37dc">r_shadow_prepasslightingdiffusespecularfbo</a>);</div>
<div class="line"><a id="l03944" name="l03944"></a><span class="lineno"> 3944</span>    <a class="code hl_variable" href="r__shadow_8c.html#a7239c53ebcb3083ca7bc8d5c2eac37dc">r_shadow_prepasslightingdiffusespecularfbo</a> = 0;</div>
<div class="line"><a id="l03945" name="l03945"></a><span class="lineno"> 3945</span> </div>
<div class="line"><a id="l03946" name="l03946"></a><span class="lineno"> 3946</span>    <a class="code hl_function" href="gl__backend_8c.html#afc361a7676a518ccccc3f0bb3b38b9c0">R_Mesh_DestroyFramebufferObject</a>(<a class="code hl_variable" href="r__shadow_8c.html#a240b7bb15f06d555fd4c6e03d511e88a">r_shadow_prepasslightingdiffusefbo</a>);</div>
<div class="line"><a id="l03947" name="l03947"></a><span class="lineno"> 3947</span>    <a class="code hl_variable" href="r__shadow_8c.html#a240b7bb15f06d555fd4c6e03d511e88a">r_shadow_prepasslightingdiffusefbo</a> = 0;</div>
<div class="line"><a id="l03948" name="l03948"></a><span class="lineno"> 3948</span> </div>
<div class="line"><a id="l03949" name="l03949"></a><span class="lineno"> 3949</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a>)</div>
<div class="line"><a id="l03950" name="l03950"></a><span class="lineno"> 3950</span>        <a class="code hl_function" href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a>);</div>
<div class="line"><a id="l03951" name="l03951"></a><span class="lineno"> 3951</span>    <a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03952" name="l03952"></a><span class="lineno"> 3952</span> </div>
<div class="line"><a id="l03953" name="l03953"></a><span class="lineno"> 3953</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a229a2a5570cb5633155c748b02fd6a2c">r_shadow_prepassgeometrynormalmaptexture</a>)</div>
<div class="line"><a id="l03954" name="l03954"></a><span class="lineno"> 3954</span>        <a class="code hl_function" href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#a229a2a5570cb5633155c748b02fd6a2c">r_shadow_prepassgeometrynormalmaptexture</a>);</div>
<div class="line"><a id="l03955" name="l03955"></a><span class="lineno"> 3955</span>    <a class="code hl_variable" href="r__shadow_8c.html#a229a2a5570cb5633155c748b02fd6a2c">r_shadow_prepassgeometrynormalmaptexture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03956" name="l03956"></a><span class="lineno"> 3956</span> </div>
<div class="line"><a id="l03957" name="l03957"></a><span class="lineno"> 3957</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a22ac54cfb268b98642e9d1e877028208">r_shadow_prepasslightingdiffusetexture</a>)</div>
<div class="line"><a id="l03958" name="l03958"></a><span class="lineno"> 3958</span>        <a class="code hl_function" href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#a22ac54cfb268b98642e9d1e877028208">r_shadow_prepasslightingdiffusetexture</a>);</div>
<div class="line"><a id="l03959" name="l03959"></a><span class="lineno"> 3959</span>    <a class="code hl_variable" href="r__shadow_8c.html#a22ac54cfb268b98642e9d1e877028208">r_shadow_prepasslightingdiffusetexture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03960" name="l03960"></a><span class="lineno"> 3960</span> </div>
<div class="line"><a id="l03961" name="l03961"></a><span class="lineno"> 3961</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a331b3d66802cecbb5b26ed13a429b8b6">r_shadow_prepasslightingspeculartexture</a>)</div>
<div class="line"><a id="l03962" name="l03962"></a><span class="lineno"> 3962</span>        <a class="code hl_function" href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a>(<a class="code hl_variable" href="r__shadow_8c.html#a331b3d66802cecbb5b26ed13a429b8b6">r_shadow_prepasslightingspeculartexture</a>);</div>
<div class="line"><a id="l03963" name="l03963"></a><span class="lineno"> 3963</span>    <a class="code hl_variable" href="r__shadow_8c.html#a331b3d66802cecbb5b26ed13a429b8b6">r_shadow_prepasslightingspeculartexture</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03964" name="l03964"></a><span class="lineno"> 3964</span>}</div>
</div>
<div class="line"><a id="l03965" name="l03965"></a><span class="lineno"> 3965</span> </div>
<div class="foldopen" id="foldopen03966" data-start="{" data-end="}">
<div class="line"><a id="l03966" name="l03966"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ae416b570a296feba69cecddc8ddbafea"> 3966</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ae416b570a296feba69cecddc8ddbafea">R_Shadow_DrawPrepass</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l03967" name="l03967"></a><span class="lineno"> 3967</span>{</div>
<div class="line"><a id="l03968" name="l03968"></a><span class="lineno"> 3968</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l03969" name="l03969"></a><span class="lineno"> 3969</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>;</div>
<div class="line"><a id="l03970" name="l03970"></a><span class="lineno"> 3970</span>    <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *ent;</div>
<div class="line"><a id="l03971" name="l03971"></a><span class="lineno"> 3971</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">clearcolor</a>[4];</div>
<div class="line"><a id="l03972" name="l03972"></a><span class="lineno"> 3972</span> </div>
<div class="line"><a id="l03973" name="l03973"></a><span class="lineno"> 3973</span>    <a class="code hl_function" href="gl__backend_8c.html#ab0845d5ed92717ad1158e8a559db073d">R_Mesh_ResetTextureState</a>();</div>
<div class="line"><a id="l03974" name="l03974"></a><span class="lineno"> 3974</span>    <a class="code hl_function" href="gl__backend_8c.html#a369132de82d4015a01e164c63255403f">GL_DepthMask</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l03975" name="l03975"></a><span class="lineno"> 3975</span>    <a class="code hl_function" href="gl__backend_8c.html#a2a511f73b51c9eca7a2e20b21b543944">GL_ColorMask</a>(1,1,1,1);</div>
<div class="line"><a id="l03976" name="l03976"></a><span class="lineno"> 3976</span>    <a class="code hl_function" href="gl__backend_8c.html#aca3e3f9f03357db16ce588778b258020">GL_BlendFunc</a>(<a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>, <a class="code hl_define" href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>);</div>
<div class="line"><a id="l03977" name="l03977"></a><span class="lineno"> 3977</span>    <a class="code hl_function" href="gl__backend_8c.html#ab838ec7c7331d12af34180a8b19a9b15">GL_Color</a>(1,1,1,1);</div>
<div class="line"><a id="l03978" name="l03978"></a><span class="lineno"> 3978</span>    <a class="code hl_function" href="gl__backend_8c.html#a712c082566b5939b265260c5cd929033">GL_DepthTest</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l03979" name="l03979"></a><span class="lineno"> 3979</span>    <a class="code hl_function" href="gl__backend_8c.html#ab9979b96d01546862e3ea80ab069c614">R_Mesh_SetRenderTargets</a>(<a class="code hl_variable" href="r__shadow_8c.html#a9ab5dac5aed1eab9783f6f731c4c5853">r_shadow_prepassgeometryfbo</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a>, <a class="code hl_variable" href="r__shadow_8c.html#a229a2a5570cb5633155c748b02fd6a2c">r_shadow_prepassgeometrynormalmaptexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l03980" name="l03980"></a><span class="lineno"> 3980</span>    <a class="code hl_define" href="mathlib_8h.html#a14557f9ae9e8f7db1736479bc3eccc4b">Vector4Set</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">clearcolor</a>, 0.5f,0.5f,0.5f,1.0f);</div>
<div class="line"><a id="l03981" name="l03981"></a><span class="lineno"> 3981</span>    <a class="code hl_function" href="gl__backend_8c.html#a202e06e98ec098852ac82ee767c8f770">GL_Clear</a>(<a class="code hl_define" href="glquake_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a> | <a class="code hl_define" href="glquake_8h.html#aef2a9e9a4b130bc4de57514327847b4f">GL_DEPTH_BUFFER_BIT</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">clearcolor</a>, 1.0f, 0);</div>
<div class="line"><a id="l03982" name="l03982"></a><span class="lineno"> 3982</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__stats_8c.html#a31430a1fcc7d583a077f671156662c73">r_timereport_active</a>)</div>
<div class="line"><a id="l03983" name="l03983"></a><span class="lineno"> 3983</span>        <a class="code hl_function" href="r__stats_8c.html#a37d0d0ea10d6d220c6c01e86f944704c">R_TimeReport</a>(<span class="stringliteral">&quot;prepasscleargeom&quot;</span>);</div>
<div class="line"><a id="l03984" name="l03984"></a><span class="lineno"> 3984</span> </div>
<div class="line"><a id="l03985" name="l03985"></a><span class="lineno"> 3985</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#ae7a60c16f01b15d307b2bce38ff6c75d">csqc_vidvars</a>.<a class="code hl_variable" href="structcsqc__vidvars__t.html#a6efd082defb0698bbacc6c89285df092">drawworld</a> &amp;&amp; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a> &amp;&amp; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a5a5b038598ccef5f670521d169edb025">DrawPrepass</a>)</div>
<div class="line"><a id="l03986" name="l03986"></a><span class="lineno"> 3986</span>        <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a5a5b038598ccef5f670521d169edb025">DrawPrepass</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ae4dfd0ad65bd2cecac4d12f329e331ca">worldentity</a>);</div>
<div class="line"><a id="l03987" name="l03987"></a><span class="lineno"> 3987</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__stats_8c.html#a31430a1fcc7d583a077f671156662c73">r_timereport_active</a>)</div>
<div class="line"><a id="l03988" name="l03988"></a><span class="lineno"> 3988</span>        <a class="code hl_function" href="r__stats_8c.html#a37d0d0ea10d6d220c6c01e86f944704c">R_TimeReport</a>(<span class="stringliteral">&quot;prepassworld&quot;</span>);</div>
<div class="line"><a id="l03989" name="l03989"></a><span class="lineno"> 3989</span> </div>
<div class="line"><a id="l03990" name="l03990"></a><span class="lineno"> 3990</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ab8c4efc627714dd8b1d5840851b45220">numentities</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l03991" name="l03991"></a><span class="lineno"> 3991</span>    {</div>
<div class="line"><a id="l03992" name="l03992"></a><span class="lineno"> 3992</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a1fe645bfc26ff5aef11c6be3db359a11">viewcache</a>.<a class="code hl_variable" href="structr__refdef__viewcache__t.html#abd40af0c9cb4c935c883e6135cd9d07d">entityvisible</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a id="l03993" name="l03993"></a><span class="lineno"> 3993</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03994" name="l03994"></a><span class="lineno"> 3994</span>        ent = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a6e9b9caf2253fce60dcd0c86d1400c63">entities</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l03995" name="l03995"></a><span class="lineno"> 3995</span>        <span class="keywordflow">if</span> (ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a> &amp;&amp; ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a5a5b038598ccef5f670521d169edb025">DrawPrepass</a> != <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l03996" name="l03996"></a><span class="lineno"> 3996</span>            ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a5a5b038598ccef5f670521d169edb025">DrawPrepass</a>(ent);</div>
<div class="line"><a id="l03997" name="l03997"></a><span class="lineno"> 3997</span>    }</div>
<div class="line"><a id="l03998" name="l03998"></a><span class="lineno"> 3998</span> </div>
<div class="line"><a id="l03999" name="l03999"></a><span class="lineno"> 3999</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__stats_8c.html#a31430a1fcc7d583a077f671156662c73">r_timereport_active</a>)</div>
<div class="line"><a id="l04000" name="l04000"></a><span class="lineno"> 4000</span>        <a class="code hl_function" href="r__stats_8c.html#a37d0d0ea10d6d220c6c01e86f944704c">R_TimeReport</a>(<span class="stringliteral">&quot;prepassmodels&quot;</span>);</div>
<div class="line"><a id="l04001" name="l04001"></a><span class="lineno"> 4001</span> </div>
<div class="line"><a id="l04002" name="l04002"></a><span class="lineno"> 4002</span>    <a class="code hl_function" href="gl__backend_8c.html#a369132de82d4015a01e164c63255403f">GL_DepthMask</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l04003" name="l04003"></a><span class="lineno"> 4003</span>    <a class="code hl_function" href="gl__backend_8c.html#a2a511f73b51c9eca7a2e20b21b543944">GL_ColorMask</a>(1,1,1,1);</div>
<div class="line"><a id="l04004" name="l04004"></a><span class="lineno"> 4004</span>    <a class="code hl_function" href="gl__backend_8c.html#ab838ec7c7331d12af34180a8b19a9b15">GL_Color</a>(1,1,1,1);</div>
<div class="line"><a id="l04005" name="l04005"></a><span class="lineno"> 4005</span>    <a class="code hl_function" href="gl__backend_8c.html#a712c082566b5939b265260c5cd929033">GL_DepthTest</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l04006" name="l04006"></a><span class="lineno"> 4006</span>    <a class="code hl_function" href="gl__backend_8c.html#ab9979b96d01546862e3ea80ab069c614">R_Mesh_SetRenderTargets</a>(<a class="code hl_variable" href="r__shadow_8c.html#a7239c53ebcb3083ca7bc8d5c2eac37dc">r_shadow_prepasslightingdiffusespecularfbo</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a>, <a class="code hl_variable" href="r__shadow_8c.html#a22ac54cfb268b98642e9d1e877028208">r_shadow_prepasslightingdiffusetexture</a>, <a class="code hl_variable" href="r__shadow_8c.html#a331b3d66802cecbb5b26ed13a429b8b6">r_shadow_prepasslightingspeculartexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04007" name="l04007"></a><span class="lineno"> 4007</span>    <a class="code hl_define" href="mathlib_8h.html#a14557f9ae9e8f7db1736479bc3eccc4b">Vector4Set</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">clearcolor</a>, 0, 0, 0, 0);</div>
<div class="line"><a id="l04008" name="l04008"></a><span class="lineno"> 4008</span>    <a class="code hl_function" href="gl__backend_8c.html#a202e06e98ec098852ac82ee767c8f770">GL_Clear</a>(<a class="code hl_define" href="glquake_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">clearcolor</a>, 1.0f, 0);</div>
<div class="line"><a id="l04009" name="l04009"></a><span class="lineno"> 4009</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__stats_8c.html#a31430a1fcc7d583a077f671156662c73">r_timereport_active</a>)</div>
<div class="line"><a id="l04010" name="l04010"></a><span class="lineno"> 4010</span>        <a class="code hl_function" href="r__stats_8c.html#a37d0d0ea10d6d220c6c01e86f944704c">R_TimeReport</a>(<span class="stringliteral">&quot;prepassclearlit&quot;</span>);</div>
<div class="line"><a id="l04011" name="l04011"></a><span class="lineno"> 4011</span> </div>
<div class="line"><a id="l04012" name="l04012"></a><span class="lineno"> 4012</span>    <a class="code hl_function" href="r__shadow_8c.html#a002be2a22d2ec51fb6a09ca24fe3ff25">R_Shadow_RenderMode_Begin</a>();</div>
<div class="line"><a id="l04013" name="l04013"></a><span class="lineno"> 4013</span> </div>
<div class="line"><a id="l04014" name="l04014"></a><span class="lineno"> 4014</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a> &lt; <a class="code hl_variable" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>++)</div>
<div class="line"><a id="l04015" name="l04015"></a><span class="lineno"> 4015</span>        <a class="code hl_function" href="r__shadow_8c.html#acf3856ee38d8738a7617d3781f384683">R_Shadow_DrawLight</a>(<a class="code hl_variable" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>]);</div>
<div class="line"><a id="l04016" name="l04016"></a><span class="lineno"> 4016</span> </div>
<div class="line"><a id="l04017" name="l04017"></a><span class="lineno"> 4017</span>    <a class="code hl_function" href="r__shadow_8c.html#ae2175aaad1171cce1dd9f531909c7732">R_Shadow_RenderMode_End</a>();</div>
<div class="line"><a id="l04018" name="l04018"></a><span class="lineno"> 4018</span> </div>
<div class="line"><a id="l04019" name="l04019"></a><span class="lineno"> 4019</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__stats_8c.html#a31430a1fcc7d583a077f671156662c73">r_timereport_active</a>)</div>
<div class="line"><a id="l04020" name="l04020"></a><span class="lineno"> 4020</span>        <a class="code hl_function" href="r__stats_8c.html#a37d0d0ea10d6d220c6c01e86f944704c">R_TimeReport</a>(<span class="stringliteral">&quot;prepasslights&quot;</span>);</div>
<div class="line"><a id="l04021" name="l04021"></a><span class="lineno"> 4021</span>}</div>
</div>
<div class="line"><a id="l04022" name="l04022"></a><span class="lineno"> 4022</span> </div>
<div class="line"><a id="l04023" name="l04023"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa447ed7042deafbe5c45a3f0e1571df0"> 4023</a></span><span class="preprocessor">#define MAX_SCENELIGHTS 65536</span></div>
<div class="foldopen" id="foldopen04024" data-start="{" data-end="}">
<div class="line"><a id="l04024" name="l04024"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a784709ef5ba6a70c0ca0d66976289e9c"> 4024</a></span><span class="keyword">static</span> <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_function" href="r__shadow_8c.html#a784709ef5ba6a70c0ca0d66976289e9c">R_Shadow_PrepareLights_AddSceneLight</a>(<a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight)</div>
<div class="line"><a id="l04025" name="l04025"></a><span class="lineno"> 4025</span>{</div>
<div class="line"><a id="l04026" name="l04026"></a><span class="lineno"> 4026</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#ab24c07551e3ecf58f94909820aaa2bfd">r_shadow_scenemaxlights</a> &lt;= <a class="code hl_variable" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a>)</div>
<div class="line"><a id="l04027" name="l04027"></a><span class="lineno"> 4027</span>    {</div>
<div class="line"><a id="l04028" name="l04028"></a><span class="lineno"> 4028</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a> &gt;= <a class="code hl_define" href="r__shadow_8c.html#aa447ed7042deafbe5c45a3f0e1571df0">MAX_SCENELIGHTS</a>)</div>
<div class="line"><a id="l04029" name="l04029"></a><span class="lineno"> 4029</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04030" name="l04030"></a><span class="lineno"> 4030</span>        <a class="code hl_variable" href="r__shadow_8c.html#ab24c07551e3ecf58f94909820aaa2bfd">r_shadow_scenemaxlights</a> *= 2;</div>
<div class="line"><a id="l04031" name="l04031"></a><span class="lineno"> 4031</span>        <a class="code hl_variable" href="r__shadow_8c.html#ab24c07551e3ecf58f94909820aaa2bfd">r_shadow_scenemaxlights</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(1024, <a class="code hl_variable" href="r__shadow_8c.html#ab24c07551e3ecf58f94909820aaa2bfd">r_shadow_scenemaxlights</a>, <a class="code hl_define" href="r__shadow_8c.html#aa447ed7042deafbe5c45a3f0e1571df0">MAX_SCENELIGHTS</a>);</div>
<div class="line"><a id="l04032" name="l04032"></a><span class="lineno"> 4032</span>        <a class="code hl_variable" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a> = (<a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> **)<a class="code hl_define" href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a>, <a class="code hl_variable" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a>, <a class="code hl_variable" href="r__shadow_8c.html#ab24c07551e3ecf58f94909820aaa2bfd">r_shadow_scenemaxlights</a> * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *));</div>
<div class="line"><a id="l04033" name="l04033"></a><span class="lineno"> 4033</span>    }</div>
<div class="line"><a id="l04034" name="l04034"></a><span class="lineno"> 4034</span>    <a class="code hl_variable" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a>[<a class="code hl_variable" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a>++] = rtlight;</div>
<div class="line"><a id="l04035" name="l04035"></a><span class="lineno"> 4035</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04036" name="l04036"></a><span class="lineno"> 4036</span>}</div>
</div>
<div class="line"><a id="l04037" name="l04037"></a><span class="lineno"> 4037</span> </div>
<div class="line"><a id="l04038" name="l04038"></a><span class="lineno"> 4038</span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a1eb35da16c1f26b84c7e7b4817203936">R_Shadow_DrawLightSprites</a>(<span class="keywordtype">void</span>);</div>
<div class="foldopen" id="foldopen04039" data-start="{" data-end="}">
<div class="line"><a id="l04039" name="l04039"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a683ab93525d4a7b22f04fd013961a33b"> 4039</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a683ab93525d4a7b22f04fd013961a33b">R_Shadow_PrepareLights</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l04040" name="l04040"></a><span class="lineno"> 4040</span>{</div>
<div class="line"><a id="l04041" name="l04041"></a><span class="lineno"> 4041</span>    <span class="keywordtype">int</span> flag;</div>
<div class="line"><a id="l04042" name="l04042"></a><span class="lineno"> 4042</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>;</div>
<div class="line"><a id="l04043" name="l04043"></a><span class="lineno"> 4043</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>;</div>
<div class="line"><a id="l04044" name="l04044"></a><span class="lineno"> 4044</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light;</div>
<div class="line"><a id="l04045" name="l04045"></a><span class="lineno"> 4045</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;</div>
<div class="line"><a id="l04046" name="l04046"></a><span class="lineno"> 4046</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>;</div>
<div class="line"><a id="l04047" name="l04047"></a><span class="lineno"> 4047</span> </div>
<div class="line"><a id="l04048" name="l04048"></a><span class="lineno"> 4048</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmapborder</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(1, <a class="code hl_variable" href="r__shadow_8c.html#a310939d55b4b4314782679eb0381c248">r_shadow_shadowmapping_bordersize</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>, 16);</div>
<div class="line"><a id="l04049" name="l04049"></a><span class="lineno"> 4049</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmaptexturesize</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(256, <a class="code hl_variable" href="r__shadow_8c.html#af68f9b04e8943ef4226c2e76e530238a">r_shadow_shadowmapping_texturesize</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>, (<span class="keywordtype">int</span>)<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a06a669057f01a0d02c34aa0ebc781a54">maxtexturesize_2d</a>);</div>
<div class="line"><a id="l04050" name="l04050"></a><span class="lineno"> 4050</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmapmaxsize</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmapborder</a>+2, <a class="code hl_variable" href="r__shadow_8c.html#a020aca21f20ded8f0e7b7cfafcc52dcb">r_shadow_shadowmapping_maxsize</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmaptexturesize</a> / 8);</div>
<div class="line"><a id="l04051" name="l04051"></a><span class="lineno"> 4051</span> </div>
<div class="line"><a id="l04052" name="l04052"></a><span class="lineno"> 4052</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a494d7f51c8713574c3d2b2585354b9e3">r_shadow_shadowmode_shadowmapping</a> != <a class="code hl_variable" href="r__shadow_8c.html#a5363c849518fc64d491c1f7c6f612655">r_shadow_shadowmapping</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> ||</div>
<div class="line"><a id="l04053" name="l04053"></a><span class="lineno"> 4053</span>        <a class="code hl_variable" href="r__shadow_8c.html#ae7c6f57d2c079948874a1052332c8daf">r_shadow_shadowmode_deferred</a> != <a class="code hl_variable" href="r__shadow_8c.html#ab48847f5962cf96e707a015ec3e4630b">r_shadow_deferred</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> ||</div>
<div class="line"><a id="l04054" name="l04054"></a><span class="lineno"> 4054</span>        <a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a> != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmaptexturesize</a> ||</div>
<div class="line"><a id="l04055" name="l04055"></a><span class="lineno"> 4055</span>        <a class="code hl_variable" href="r__shadow_8c.html#a43e8c7a380aad0c6b987befbc9950b20">r_shadow_shadowmapvsdct</a> != (<a class="code hl_variable" href="r__shadow_8c.html#a0bf0a59428f24e0a923392d83630bd0b">r_shadow_shadowmapping_vsdct</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> != 0 &amp;&amp; <a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a77ee51e56202df8258781a0aa1dc1a2d">renderpath</a> == <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafcfef4a81b353e6ad9bfee33f0c6076a">RENDERPATH_GL32</a>) ||</div>
<div class="line"><a id="l04056" name="l04056"></a><span class="lineno"> 4056</span>        <a class="code hl_variable" href="r__shadow_8c.html#a58f22ad2c088cb0bed84c43287259fa5">r_shadow_shadowmapfilterquality</a> != <a class="code hl_variable" href="r__shadow_8c.html#a00485eb415b8d269b0b411106ca73297">r_shadow_shadowmapping_filterquality</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> ||</div>
<div class="line"><a id="l04057" name="l04057"></a><span class="lineno"> 4057</span>        <a class="code hl_variable" href="r__shadow_8c.html#a3597c68e03b049937f0a8d1f48b2d155">r_shadow_shadowmapshadowsampler</a> != <a class="code hl_variable" href="r__shadow_8c.html#a5a1b9f3c2977cc5264499e8871d516c8">r_shadow_shadowmapping_useshadowsampler</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> ||</div>
<div class="line"><a id="l04058" name="l04058"></a><span class="lineno"> 4058</span>        <a class="code hl_variable" href="r__shadow_8c.html#a67409f727e6f049f035e240153f81678">r_shadow_shadowmapdepthbits</a> != <a class="code hl_variable" href="r__shadow_8c.html#a437cdd8c6d29ebd4b03f259f20e14415">r_shadow_shadowmapping_depthbits</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> ||</div>
<div class="line"><a id="l04059" name="l04059"></a><span class="lineno"> 4059</span>        <a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a> != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmapborder</a> ||</div>
<div class="line"><a id="l04060" name="l04060"></a><span class="lineno"> 4060</span>        <a class="code hl_variable" href="r__shadow_8c.html#a2acc73bfba472354d3cb6c2998628eb0">r_shadow_shadowmapmaxsize</a> != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmapmaxsize</a> ||</div>
<div class="line"><a id="l04061" name="l04061"></a><span class="lineno"> 4061</span>        <a class="code hl_variable" href="r__shadow_8c.html#ad03146a33674d1c4a225d77b41e3c296">r_shadow_shadowmapdepthtexture</a> != <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#a43e7d7c5065855167a45d14f3ec4a89e">usedepthtextures</a>)</div>
<div class="line"><a id="l04062" name="l04062"></a><span class="lineno"> 4062</span>        <a class="code hl_function" href="r__shadow_8c.html#a45077a7e2910775a9f6a02179a55a44b">R_Shadow_FreeShadowMaps</a>();</div>
<div class="line"><a id="l04063" name="l04063"></a><span class="lineno"> 4063</span> </div>
<div class="line"><a id="l04064" name="l04064"></a><span class="lineno"> 4064</span>    <a class="code hl_variable" href="r__shadow_8c.html#aa3823db1be08fa2c34a3b428b40ada80">r_shadow_usingshadowmaportho</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04065" name="l04065"></a><span class="lineno"> 4065</span> </div>
<div class="line"><a id="l04066" name="l04066"></a><span class="lineno"> 4066</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a77ee51e56202df8258781a0aa1dc1a2d">renderpath</a>)</div>
<div class="line"><a id="l04067" name="l04067"></a><span class="lineno"> 4067</span>    {</div>
<div class="line"><a id="l04068" name="l04068"></a><span class="lineno"> 4068</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafcfef4a81b353e6ad9bfee33f0c6076a">RENDERPATH_GL32</a>:</div>
<div class="line"><a id="l04069" name="l04069"></a><span class="lineno"> 4069</span><span class="preprocessor">#ifndef USE_GLES2</span></div>
<div class="line"><a id="l04070" name="l04070"></a><span class="lineno"> 4070</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#ab48847f5962cf96e707a015ec3e4630b">r_shadow_deferred</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> || <a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#ac81e1bd84e154919571ff6952fdf2f22">maxdrawbuffers</a> &lt; 2)</div>
<div class="line"><a id="l04071" name="l04071"></a><span class="lineno"> 4071</span>        {</div>
<div class="line"><a id="l04072" name="l04072"></a><span class="lineno"> 4072</span>            <a class="code hl_variable" href="r__shadow_8c.html#a4b5a72c38504bc6ea78e695f2ed16aca">r_shadow_usingdeferredprepass</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04073" name="l04073"></a><span class="lineno"> 4073</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aa07187db7c3c253b48338fc55201564e">r_shadow_prepass_width</a>)</div>
<div class="line"><a id="l04074" name="l04074"></a><span class="lineno"> 4074</span>                <a class="code hl_function" href="r__shadow_8c.html#a24e3d35efcffd1452bf8b5d900a08d2c">R_Shadow_FreeDeferred</a>();</div>
<div class="line"><a id="l04075" name="l04075"></a><span class="lineno"> 4075</span>            <a class="code hl_variable" href="r__shadow_8c.html#aa07187db7c3c253b48338fc55201564e">r_shadow_prepass_width</a> = <a class="code hl_variable" href="r__shadow_8c.html#ac301c7bf5ab0840e76847ec294d41841">r_shadow_prepass_height</a> = 0;</div>
<div class="line"><a id="l04076" name="l04076"></a><span class="lineno"> 4076</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04077" name="l04077"></a><span class="lineno"> 4077</span>        }</div>
<div class="line"><a id="l04078" name="l04078"></a><span class="lineno"> 4078</span> </div>
<div class="line"><a id="l04079" name="l04079"></a><span class="lineno"> 4079</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#aa07187db7c3c253b48338fc55201564e">r_shadow_prepass_width</a> != <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#ac83e72c3e227b127efcf573fc2e3aba9">screentexturewidth</a> || <a class="code hl_variable" href="r__shadow_8c.html#ac301c7bf5ab0840e76847ec294d41841">r_shadow_prepass_height</a> != <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#af69aa65b1f80238f380733bafd91cf24">screentextureheight</a>)</div>
<div class="line"><a id="l04080" name="l04080"></a><span class="lineno"> 4080</span>        {</div>
<div class="line"><a id="l04081" name="l04081"></a><span class="lineno"> 4081</span>            <a class="code hl_function" href="r__shadow_8c.html#a24e3d35efcffd1452bf8b5d900a08d2c">R_Shadow_FreeDeferred</a>();</div>
<div class="line"><a id="l04082" name="l04082"></a><span class="lineno"> 4082</span> </div>
<div class="line"><a id="l04083" name="l04083"></a><span class="lineno"> 4083</span>            <a class="code hl_variable" href="r__shadow_8c.html#a4b5a72c38504bc6ea78e695f2ed16aca">r_shadow_usingdeferredprepass</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04084" name="l04084"></a><span class="lineno"> 4084</span>            <a class="code hl_variable" href="r__shadow_8c.html#aa07187db7c3c253b48338fc55201564e">r_shadow_prepass_width</a> = <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#ac83e72c3e227b127efcf573fc2e3aba9">screentexturewidth</a>;</div>
<div class="line"><a id="l04085" name="l04085"></a><span class="lineno"> 4085</span>            <a class="code hl_variable" href="r__shadow_8c.html#ac301c7bf5ab0840e76847ec294d41841">r_shadow_prepass_height</a> = <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#af69aa65b1f80238f380733bafd91cf24">screentextureheight</a>;</div>
<div class="line"><a id="l04086" name="l04086"></a><span class="lineno"> 4086</span>            <a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a> = <a class="code hl_function" href="gl__textures_8c.html#a347f3b0720f84542111247e0033f768e">R_LoadTextureRenderBuffer</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>, <span class="stringliteral">&quot;prepassgeometrydepthbuffer&quot;</span>, <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#ac83e72c3e227b127efcf573fc2e3aba9">screentexturewidth</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#af69aa65b1f80238f380733bafd91cf24">screentextureheight</a>, <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49aa2466cecf47c58a7989d45c5b45273f3">TEXTYPE_DEPTHBUFFER24</a>);</div>
<div class="line"><a id="l04087" name="l04087"></a><span class="lineno"> 4087</span>            <a class="code hl_variable" href="r__shadow_8c.html#a229a2a5570cb5633155c748b02fd6a2c">r_shadow_prepassgeometrynormalmaptexture</a> = <a class="code hl_function" href="gl__textures_8c.html#afe6f33ec05da1bce9cd3a847610e7384">R_LoadTexture2D</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>, <span class="stringliteral">&quot;prepassgeometrynormalmap&quot;</span>, <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#ac83e72c3e227b127efcf573fc2e3aba9">screentexturewidth</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#af69aa65b1f80238f380733bafd91cf24">screentextureheight</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49a99bf132eb3b3d5fedaa8e07719e126ed">TEXTYPE_COLORBUFFER32F</a>, <a class="code hl_define" href="r__textures_8h.html#ae7321fcd751438a62912cc8cf7715d6e">TEXF_RENDERTARGET</a> | <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a> | <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a> | <a class="code hl_define" href="r__textures_8h.html#aa97b4aaf90cefe1dff4cb00f2b232127">TEXF_FORCENEAREST</a>, -1, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04088" name="l04088"></a><span class="lineno"> 4088</span>            <a class="code hl_variable" href="r__shadow_8c.html#a22ac54cfb268b98642e9d1e877028208">r_shadow_prepasslightingdiffusetexture</a> = <a class="code hl_function" href="gl__textures_8c.html#afe6f33ec05da1bce9cd3a847610e7384">R_LoadTexture2D</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>, <span class="stringliteral">&quot;prepasslightingdiffuse&quot;</span>, <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#ac83e72c3e227b127efcf573fc2e3aba9">screentexturewidth</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#af69aa65b1f80238f380733bafd91cf24">screentextureheight</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49aff2b1b2f2f1450232e4c087a7ef6df1b">TEXTYPE_COLORBUFFER16F</a>, <a class="code hl_define" href="r__textures_8h.html#ae7321fcd751438a62912cc8cf7715d6e">TEXF_RENDERTARGET</a> | <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a> | <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a> | <a class="code hl_define" href="r__textures_8h.html#aa97b4aaf90cefe1dff4cb00f2b232127">TEXF_FORCENEAREST</a>, -1, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04089" name="l04089"></a><span class="lineno"> 4089</span>            <a class="code hl_variable" href="r__shadow_8c.html#a331b3d66802cecbb5b26ed13a429b8b6">r_shadow_prepasslightingspeculartexture</a> = <a class="code hl_function" href="gl__textures_8c.html#afe6f33ec05da1bce9cd3a847610e7384">R_LoadTexture2D</a>(<a class="code hl_variable" href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a>, <span class="stringliteral">&quot;prepasslightingspecular&quot;</span>, <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#ac83e72c3e227b127efcf573fc2e3aba9">screentexturewidth</a>, <a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#af69aa65b1f80238f380733bafd91cf24">screentextureheight</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_enumvalue" href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49aff2b1b2f2f1450232e4c087a7ef6df1b">TEXTYPE_COLORBUFFER16F</a>, <a class="code hl_define" href="r__textures_8h.html#ae7321fcd751438a62912cc8cf7715d6e">TEXF_RENDERTARGET</a> | <a class="code hl_define" href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a> | <a class="code hl_define" href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a> | <a class="code hl_define" href="r__textures_8h.html#aa97b4aaf90cefe1dff4cb00f2b232127">TEXF_FORCENEAREST</a>, -1, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04090" name="l04090"></a><span class="lineno"> 4090</span> </div>
<div class="line"><a id="l04091" name="l04091"></a><span class="lineno"> 4091</span>            <span class="comment">// set up the geometry pass fbo (depth + normalmap)</span></div>
<div class="line"><a id="l04092" name="l04092"></a><span class="lineno"> 4092</span>            <a class="code hl_variable" href="r__shadow_8c.html#a9ab5dac5aed1eab9783f6f731c4c5853">r_shadow_prepassgeometryfbo</a> = <a class="code hl_function" href="gl__backend_8c.html#a8e8660f06000abab66f3d141de416092">R_Mesh_CreateFramebufferObject</a>(<a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a>, <a class="code hl_variable" href="r__shadow_8c.html#a229a2a5570cb5633155c748b02fd6a2c">r_shadow_prepassgeometrynormalmaptexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04093" name="l04093"></a><span class="lineno"> 4093</span>            <a class="code hl_function" href="gl__backend_8c.html#ab9979b96d01546862e3ea80ab069c614">R_Mesh_SetRenderTargets</a>(<a class="code hl_variable" href="r__shadow_8c.html#a9ab5dac5aed1eab9783f6f731c4c5853">r_shadow_prepassgeometryfbo</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a>, <a class="code hl_variable" href="r__shadow_8c.html#a229a2a5570cb5633155c748b02fd6a2c">r_shadow_prepassgeometrynormalmaptexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04094" name="l04094"></a><span class="lineno"> 4094</span>            <span class="comment">// render depth into a renderbuffer and other important properties into the normalmap texture</span></div>
<div class="line"><a id="l04095" name="l04095"></a><span class="lineno"> 4095</span> </div>
<div class="line"><a id="l04096" name="l04096"></a><span class="lineno"> 4096</span>            <span class="comment">// set up the lighting pass fbo (diffuse + specular)</span></div>
<div class="line"><a id="l04097" name="l04097"></a><span class="lineno"> 4097</span>            <a class="code hl_variable" href="r__shadow_8c.html#a7239c53ebcb3083ca7bc8d5c2eac37dc">r_shadow_prepasslightingdiffusespecularfbo</a> = <a class="code hl_function" href="gl__backend_8c.html#a8e8660f06000abab66f3d141de416092">R_Mesh_CreateFramebufferObject</a>(<a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a>, <a class="code hl_variable" href="r__shadow_8c.html#a22ac54cfb268b98642e9d1e877028208">r_shadow_prepasslightingdiffusetexture</a>, <a class="code hl_variable" href="r__shadow_8c.html#a331b3d66802cecbb5b26ed13a429b8b6">r_shadow_prepasslightingspeculartexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04098" name="l04098"></a><span class="lineno"> 4098</span>            <a class="code hl_function" href="gl__backend_8c.html#ab9979b96d01546862e3ea80ab069c614">R_Mesh_SetRenderTargets</a>(<a class="code hl_variable" href="r__shadow_8c.html#a7239c53ebcb3083ca7bc8d5c2eac37dc">r_shadow_prepasslightingdiffusespecularfbo</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a>, <a class="code hl_variable" href="r__shadow_8c.html#a22ac54cfb268b98642e9d1e877028208">r_shadow_prepasslightingdiffusetexture</a>, <a class="code hl_variable" href="r__shadow_8c.html#a331b3d66802cecbb5b26ed13a429b8b6">r_shadow_prepasslightingspeculartexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04099" name="l04099"></a><span class="lineno"> 4099</span>            <span class="comment">// render diffuse into one texture and specular into another,</span></div>
<div class="line"><a id="l04100" name="l04100"></a><span class="lineno"> 4100</span>            <span class="comment">// with depth and normalmap bound as textures,</span></div>
<div class="line"><a id="l04101" name="l04101"></a><span class="lineno"> 4101</span>            <span class="comment">// with depth bound as attachment as well</span></div>
<div class="line"><a id="l04102" name="l04102"></a><span class="lineno"> 4102</span> </div>
<div class="line"><a id="l04103" name="l04103"></a><span class="lineno"> 4103</span>            <span class="comment">// set up the lighting pass fbo (diffuse)</span></div>
<div class="line"><a id="l04104" name="l04104"></a><span class="lineno"> 4104</span>            <a class="code hl_variable" href="r__shadow_8c.html#a240b7bb15f06d555fd4c6e03d511e88a">r_shadow_prepasslightingdiffusefbo</a> = <a class="code hl_function" href="gl__backend_8c.html#a8e8660f06000abab66f3d141de416092">R_Mesh_CreateFramebufferObject</a>(<a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a>, <a class="code hl_variable" href="r__shadow_8c.html#a22ac54cfb268b98642e9d1e877028208">r_shadow_prepasslightingdiffusetexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04105" name="l04105"></a><span class="lineno"> 4105</span>            <a class="code hl_function" href="gl__backend_8c.html#ab9979b96d01546862e3ea80ab069c614">R_Mesh_SetRenderTargets</a>(<a class="code hl_variable" href="r__shadow_8c.html#a240b7bb15f06d555fd4c6e03d511e88a">r_shadow_prepasslightingdiffusefbo</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a>, <a class="code hl_variable" href="r__shadow_8c.html#a22ac54cfb268b98642e9d1e877028208">r_shadow_prepasslightingdiffusetexture</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04106" name="l04106"></a><span class="lineno"> 4106</span>            <span class="comment">// render diffuse into one texture,</span></div>
<div class="line"><a id="l04107" name="l04107"></a><span class="lineno"> 4107</span>            <span class="comment">// with depth and normalmap bound as textures,</span></div>
<div class="line"><a id="l04108" name="l04108"></a><span class="lineno"> 4108</span>            <span class="comment">// with depth bound as attachment as well</span></div>
<div class="line"><a id="l04109" name="l04109"></a><span class="lineno"> 4109</span>        }</div>
<div class="line"><a id="l04110" name="l04110"></a><span class="lineno"> 4110</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04111" name="l04111"></a><span class="lineno"> 4111</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04112" name="l04112"></a><span class="lineno"> 4112</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafbfa84c8848e1c609691f76637da178b">RENDERPATH_GLES2</a>:</div>
<div class="line"><a id="l04113" name="l04113"></a><span class="lineno"> 4113</span>        <a class="code hl_variable" href="r__shadow_8c.html#a4b5a72c38504bc6ea78e695f2ed16aca">r_shadow_usingdeferredprepass</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04114" name="l04114"></a><span class="lineno"> 4114</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04115" name="l04115"></a><span class="lineno"> 4115</span>    }</div>
<div class="line"><a id="l04116" name="l04116"></a><span class="lineno"> 4116</span> </div>
<div class="line"><a id="l04117" name="l04117"></a><span class="lineno"> 4117</span>    <a class="code hl_function" href="r__shadow_8c.html#a610c2953bf7e57ec697532f1d3135447">R_Shadow_EnlargeLeafSurfaceTrisBuffer</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#ad2ccc84f01460e7bde735898ed077860">num_leafs</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">num_surfaces</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">surfmesh</a>.<a class="code hl_variable" href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">num_triangles</a>);</div>
<div class="line"><a id="l04118" name="l04118"></a><span class="lineno"> 4118</span> </div>
<div class="line"><a id="l04119" name="l04119"></a><span class="lineno"> 4119</span>    <a class="code hl_variable" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a> = 0;</div>
<div class="line"><a id="l04120" name="l04120"></a><span class="lineno"> 4120</span>    flag = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ad6fc2a07d8d706f5daf13c5849db84fc">rtworld</a> ? <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a> : <a class="code hl_define" href="client_8h.html#a02b341fb62e7f8268a5f7f684ab0f2f2">LIGHTFLAG_NORMALMODE</a>;</div>
<div class="line"><a id="l04121" name="l04121"></a><span class="lineno"> 4121</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> = <a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>); <span class="comment">// checked</span></div>
<div class="line"><a id="l04122" name="l04122"></a><span class="lineno"> 4122</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l04123" name="l04123"></a><span class="lineno"> 4123</span>    {</div>
<div class="line"><a id="l04124" name="l04124"></a><span class="lineno"> 4124</span>        light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *)<a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l04125" name="l04125"></a><span class="lineno"> 4125</span>        <span class="keywordflow">if</span> (light &amp;&amp; (light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a> &amp; flag))</div>
<div class="line"><a id="l04126" name="l04126"></a><span class="lineno"> 4126</span>        {</div>
<div class="line"><a id="l04127" name="l04127"></a><span class="lineno"> 4127</span>            <a class="code hl_function" href="r__shadow_8c.html#af447ee4df75ad54b8f31d00ecd6ef765">R_Shadow_PrepareLight</a>(&amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>);</div>
<div class="line"><a id="l04128" name="l04128"></a><span class="lineno"> 4128</span>            <a class="code hl_function" href="r__shadow_8c.html#a784709ef5ba6a70c0ca0d66976289e9c">R_Shadow_PrepareLights_AddSceneLight</a>(&amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>);</div>
<div class="line"><a id="l04129" name="l04129"></a><span class="lineno"> 4129</span>        }</div>
<div class="line"><a id="l04130" name="l04130"></a><span class="lineno"> 4130</span>    }</div>
<div class="line"><a id="l04131" name="l04131"></a><span class="lineno"> 4131</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#abc931d4756002d9eac83fc0f292adc09">rtdlight</a>)</div>
<div class="line"><a id="l04132" name="l04132"></a><span class="lineno"> 4132</span>    {</div>
<div class="line"><a id="l04133" name="l04133"></a><span class="lineno"> 4133</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a> &lt; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a0d2e420f14635b0aff07275fa6b74d82">numlights</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>++)</div>
<div class="line"><a id="l04134" name="l04134"></a><span class="lineno"> 4134</span>        {</div>
<div class="line"><a id="l04135" name="l04135"></a><span class="lineno"> 4135</span>            <a class="code hl_function" href="r__shadow_8c.html#af447ee4df75ad54b8f31d00ecd6ef765">R_Shadow_PrepareLight</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aec6438e3812387c92681237d33bfe46f">lights</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>]);</div>
<div class="line"><a id="l04136" name="l04136"></a><span class="lineno"> 4136</span>            <a class="code hl_function" href="r__shadow_8c.html#a784709ef5ba6a70c0ca0d66976289e9c">R_Shadow_PrepareLights_AddSceneLight</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aec6438e3812387c92681237d33bfe46f">lights</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>]);</div>
<div class="line"><a id="l04137" name="l04137"></a><span class="lineno"> 4137</span>        }</div>
<div class="line"><a id="l04138" name="l04138"></a><span class="lineno"> 4138</span>    }</div>
<div class="line"><a id="l04139" name="l04139"></a><span class="lineno"> 4139</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#afdc165beb3e731178a1ba98872bee3b8">gl_flashblend</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l04140" name="l04140"></a><span class="lineno"> 4140</span>    {</div>
<div class="line"><a id="l04141" name="l04141"></a><span class="lineno"> 4141</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a> &lt; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a0d2e420f14635b0aff07275fa6b74d82">numlights</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>++)</div>
<div class="line"><a id="l04142" name="l04142"></a><span class="lineno"> 4142</span>        {</div>
<div class="line"><a id="l04143" name="l04143"></a><span class="lineno"> 4143</span>            <a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aec6438e3812387c92681237d33bfe46f">lights</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>];</div>
<div class="line"><a id="l04144" name="l04144"></a><span class="lineno"> 4144</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a> = ((rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a86717e6c13a6c77eb41f0f0dd6d2fca6">style</a> &gt;= 0 &amp;&amp; rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a86717e6c13a6c77eb41f0f0dd6d2fca6">style</a> &lt; <a class="code hl_define" href="qdefs_8h.html#a48b85f1ccb414316c117e943ba927f19">MAX_LIGHTSTYLES</a>) ? <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ac62427e93af8fe1079c18d69619fb699">lightstylevalue</a>[rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a86717e6c13a6c77eb41f0f0dd6d2fca6">style</a>] : 1) * <a class="code hl_variable" href="r__shadow_8c.html#a8b27974ce25cb2c28bbdc15bfb50f20f">r_shadow_lightintensityscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l04145" name="l04145"></a><span class="lineno"> 4145</span>            <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a478dcfe9a294410ade3e764a7905d597">color</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>);</div>
<div class="line"><a id="l04146" name="l04146"></a><span class="lineno"> 4146</span>        }</div>
<div class="line"><a id="l04147" name="l04147"></a><span class="lineno"> 4147</span>    }</div>
<div class="line"><a id="l04148" name="l04148"></a><span class="lineno"> 4148</span> </div>
<div class="line"><a id="l04149" name="l04149"></a><span class="lineno"> 4149</span>    <span class="comment">// when debugging a single light, we still want to run the prepare, so we only replace the light list afterward...</span></div>
<div class="line"><a id="l04150" name="l04150"></a><span class="lineno"> 4150</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a374db1ed8684badcb0995878fc9b4300">r_shadow_debuglight</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &gt;= 0)</div>
<div class="line"><a id="l04151" name="l04151"></a><span class="lineno"> 4151</span>    {</div>
<div class="line"><a id="l04152" name="l04152"></a><span class="lineno"> 4152</span>        <a class="code hl_variable" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a> = 0;</div>
<div class="line"><a id="l04153" name="l04153"></a><span class="lineno"> 4153</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = <a class="code hl_variable" href="r__shadow_8c.html#a374db1ed8684badcb0995878fc9b4300">r_shadow_debuglight</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>;</div>
<div class="line"><a id="l04154" name="l04154"></a><span class="lineno"> 4154</span>        light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *)<a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l04155" name="l04155"></a><span class="lineno"> 4155</span>        <span class="keywordflow">if</span> (light)</div>
<div class="line"><a id="l04156" name="l04156"></a><span class="lineno"> 4156</span>        {</div>
<div class="line"><a id="l04157" name="l04157"></a><span class="lineno"> 4157</span>            <a class="code hl_function" href="r__shadow_8c.html#af447ee4df75ad54b8f31d00ecd6ef765">R_Shadow_PrepareLight</a>(&amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>);</div>
<div class="line"><a id="l04158" name="l04158"></a><span class="lineno"> 4158</span>            <a class="code hl_function" href="r__shadow_8c.html#a784709ef5ba6a70c0ca0d66976289e9c">R_Shadow_PrepareLights_AddSceneLight</a>(&amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>);</div>
<div class="line"><a id="l04159" name="l04159"></a><span class="lineno"> 4159</span>        }</div>
<div class="line"><a id="l04160" name="l04160"></a><span class="lineno"> 4160</span>    }</div>
<div class="line"><a id="l04161" name="l04161"></a><span class="lineno"> 4161</span> </div>
<div class="line"><a id="l04162" name="l04162"></a><span class="lineno"> 4162</span>    <span class="comment">// if we&#39;re doing shadowmaps we need to prepare the atlas layout now</span></div>
<div class="line"><a id="l04163" name="l04163"></a><span class="lineno"> 4163</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="r__shadow_8c.html#a6a2b6b4ed69e837e20c465b31226b9e4">R_Shadow_ShadowMappingEnabled</a>())</div>
<div class="line"><a id="l04164" name="l04164"></a><span class="lineno"> 4164</span>    {</div>
<div class="line"><a id="l04165" name="l04165"></a><span class="lineno"> 4165</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a6135619fa2b01798a441a929fd836e40">lod</a>;</div>
<div class="line"><a id="l04166" name="l04166"></a><span class="lineno"> 4166</span> </div>
<div class="line"><a id="l04167" name="l04167"></a><span class="lineno"> 4167</span>        <span class="comment">// allocate shadowmaps in the atlas now</span></div>
<div class="line"><a id="l04168" name="l04168"></a><span class="lineno"> 4168</span>        <span class="comment">// we may have to make multiple attempts to fit the shadowmaps in the limited space of the atlas, this will appear as lod popping of all shadowmaps whenever it changes, but at least we can still cast shadows from all lights...</span></div>
<div class="line"><a id="l04169" name="l04169"></a><span class="lineno"> 4169</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a6135619fa2b01798a441a929fd836e40">lod</a> = 0; <a class="code hl_variable" href="glquake_8h.html#a6135619fa2b01798a441a929fd836e40">lod</a> &lt; 16; <a class="code hl_variable" href="glquake_8h.html#a6135619fa2b01798a441a929fd836e40">lod</a>++)</div>
<div class="line"><a id="l04170" name="l04170"></a><span class="lineno"> 4170</span>        {</div>
<div class="line"><a id="l04171" name="l04171"></a><span class="lineno"> 4171</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">packing_success</a> = 0;</div>
<div class="line"><a id="l04172" name="l04172"></a><span class="lineno"> 4172</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">packing_failure</a> = 0;</div>
<div class="line"><a id="l04173" name="l04173"></a><span class="lineno"> 4173</span>            <a class="code hl_function" href="model__shared_8c.html#a1e063ce17b7be8462ffafa0f8f8ff8b1">Mod_AllocLightmap_Reset</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a566ec440d28d0ebea734f64b463ad372">r_shadow_shadowmapatlas_state</a>);</div>
<div class="line"><a id="l04174" name="l04174"></a><span class="lineno"> 4174</span>            <span class="comment">// we actually have to reserve space for the R_DrawModelShadowMaps if that feature is active, it uses 0,0 so this is easy.</span></div>
<div class="line"><a id="l04175" name="l04175"></a><span class="lineno"> 4175</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#abcd3a00e258b83fb536152a846a9c4a5">r_shadow_shadowmapatlas_modelshadows_size</a>)</div>
<div class="line"><a id="l04176" name="l04176"></a><span class="lineno"> 4176</span>                <a class="code hl_function" href="model__shared_8c.html#a835cf8e835979953163e64c7eea95186">Mod_AllocLightmap_Block</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a566ec440d28d0ebea734f64b463ad372">r_shadow_shadowmapatlas_state</a>, <a class="code hl_variable" href="r__shadow_8c.html#abcd3a00e258b83fb536152a846a9c4a5">r_shadow_shadowmapatlas_modelshadows_size</a>, <a class="code hl_variable" href="r__shadow_8c.html#abcd3a00e258b83fb536152a846a9c4a5">r_shadow_shadowmapatlas_modelshadows_size</a>, &amp;<a class="code hl_variable" href="r__shadow_8c.html#af20ac9c28e45c74931539d36c4af3129">r_shadow_shadowmapatlas_modelshadows_x</a>, &amp;<a class="code hl_variable" href="r__shadow_8c.html#ac3bf8e273436551219a3b874ca5f29a3">r_shadow_shadowmapatlas_modelshadows_y</a>);</div>
<div class="line"><a id="l04177" name="l04177"></a><span class="lineno"> 4177</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a> &lt; <a class="code hl_variable" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>++)</div>
<div class="line"><a id="l04178" name="l04178"></a><span class="lineno"> 4178</span>            {</div>
<div class="line"><a id="l04179" name="l04179"></a><span class="lineno"> 4179</span>                <a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight = <a class="code hl_variable" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>];</div>
<div class="line"><a id="l04180" name="l04180"></a><span class="lineno"> 4180</span>                <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ab3450b2ecfa6eab9b7dbb12105dc370e">shadowmapsidesize</a> &gt;&gt; <a class="code hl_variable" href="glquake_8h.html#a6135619fa2b01798a441a929fd836e40">lod</a>;</div>
<div class="line"><a id="l04181" name="l04181"></a><span class="lineno"> 4181</span>                <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a>, <a class="code hl_variable" href="glquake_8h.html#a136cce2f78c36b837ec3c8cf72c96aad">height</a>;</div>
<div class="line"><a id="l04182" name="l04182"></a><span class="lineno"> 4182</span>                <span class="keywordflow">if</span> (!rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ade7605138e2c6380603cdb402c62b3c8">castshadows</a>)</div>
<div class="line"><a id="l04183" name="l04183"></a><span class="lineno"> 4183</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04184" name="l04184"></a><span class="lineno"> 4184</span>                <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(<a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a>, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, <a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a>);</div>
<div class="line"><a id="l04185" name="l04185"></a><span class="lineno"> 4185</span>                <a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a> = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> * 2;</div>
<div class="line"><a id="l04186" name="l04186"></a><span class="lineno"> 4186</span>                <a class="code hl_variable" href="glquake_8h.html#a136cce2f78c36b837ec3c8cf72c96aad">height</a> = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> * 3;</div>
<div class="line"><a id="l04187" name="l04187"></a><span class="lineno"> 4187</span>                <span class="comment">// when there are noselfshadow entities in the light bounds, we have to render two separate sets of shadowmaps :(</span></div>
<div class="line"><a id="l04188" name="l04188"></a><span class="lineno"> 4188</span>                <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adae53566fd63b1633f5f3110dd8048c4">cached_numshadowentities_noselfshadow</a>)</div>
<div class="line"><a id="l04189" name="l04189"></a><span class="lineno"> 4189</span>                    <a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a> *= 2;</div>
<div class="line"><a id="l04190" name="l04190"></a><span class="lineno"> 4190</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="model__shared_8c.html#a835cf8e835979953163e64c7eea95186">Mod_AllocLightmap_Block</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a566ec440d28d0ebea734f64b463ad372">r_shadow_shadowmapatlas_state</a>, <a class="code hl_variable" href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a>, <a class="code hl_variable" href="glquake_8h.html#a136cce2f78c36b837ec3c8cf72c96aad">height</a>, &amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ae92ae64bc83b7ca422ee2f4897fa86aa">shadowmapatlasposition</a>[0], &amp;rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#ae92ae64bc83b7ca422ee2f4897fa86aa">shadowmapatlasposition</a>[1]))</div>
<div class="line"><a id="l04191" name="l04191"></a><span class="lineno"> 4191</span>                {</div>
<div class="line"><a id="l04192" name="l04192"></a><span class="lineno"> 4192</span>                    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a241dacf73c783ce200946897b338ca04">shadowmapatlassidesize</a> = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;</div>
<div class="line"><a id="l04193" name="l04193"></a><span class="lineno"> 4193</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">packing_success</a>++;</div>
<div class="line"><a id="l04194" name="l04194"></a><span class="lineno"> 4194</span>                }</div>
<div class="line"><a id="l04195" name="l04195"></a><span class="lineno"> 4195</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l04196" name="l04196"></a><span class="lineno"> 4196</span>                {</div>
<div class="line"><a id="l04197" name="l04197"></a><span class="lineno"> 4197</span>                    <span class="comment">// note down that we failed to pack this one, it will have to disable shadows</span></div>
<div class="line"><a id="l04198" name="l04198"></a><span class="lineno"> 4198</span>                    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a241dacf73c783ce200946897b338ca04">shadowmapatlassidesize</a> = 0;</div>
<div class="line"><a id="l04199" name="l04199"></a><span class="lineno"> 4199</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">packing_failure</a>++;</div>
<div class="line"><a id="l04200" name="l04200"></a><span class="lineno"> 4200</span>                }</div>
<div class="line"><a id="l04201" name="l04201"></a><span class="lineno"> 4201</span>            }</div>
<div class="line"><a id="l04202" name="l04202"></a><span class="lineno"> 4202</span>            <span class="comment">// generally everything fits and we stop here on the first iteration</span></div>
<div class="line"><a id="l04203" name="l04203"></a><span class="lineno"> 4203</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">packing_failure</a> == 0)</div>
<div class="line"><a id="l04204" name="l04204"></a><span class="lineno"> 4204</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04205" name="l04205"></a><span class="lineno"> 4205</span>        }</div>
<div class="line"><a id="l04206" name="l04206"></a><span class="lineno"> 4206</span>    }</div>
<div class="line"><a id="l04207" name="l04207"></a><span class="lineno"> 4207</span> </div>
<div class="line"><a id="l04208" name="l04208"></a><span class="lineno"> 4208</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l04209" name="l04209"></a><span class="lineno"> 4209</span>        <a class="code hl_function" href="r__shadow_8c.html#a1eb35da16c1f26b84c7e7b4817203936">R_Shadow_DrawLightSprites</a>();</div>
<div class="line"><a id="l04210" name="l04210"></a><span class="lineno"> 4210</span>}</div>
</div>
<div class="line"><a id="l04211" name="l04211"></a><span class="lineno"> 4211</span> </div>
<div class="foldopen" id="foldopen04212" data-start="{" data-end="}">
<div class="line"><a id="l04212" name="l04212"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a25e49340cbedaaa28d6bacc42c9a5a42"> 4212</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a25e49340cbedaaa28d6bacc42c9a5a42">R_Shadow_DrawShadowMaps</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l04213" name="l04213"></a><span class="lineno"> 4213</span>{</div>
<div class="line"><a id="l04214" name="l04214"></a><span class="lineno"> 4214</span>    <a class="code hl_function" href="r__shadow_8c.html#a002be2a22d2ec51fb6a09ca24fe3ff25">R_Shadow_RenderMode_Begin</a>();</div>
<div class="line"><a id="l04215" name="l04215"></a><span class="lineno"> 4215</span>    <a class="code hl_function" href="r__shadow_8c.html#adc3c945c3bc028142dddad245179892f">R_Shadow_RenderMode_ActiveLight</a>(<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04216" name="l04216"></a><span class="lineno"> 4216</span> </div>
<div class="line"><a id="l04217" name="l04217"></a><span class="lineno"> 4217</span>    <span class="comment">// now that we have a layout of shadowmaps in the atlas, we can render the shadowmaps</span></div>
<div class="line"><a id="l04218" name="l04218"></a><span class="lineno"> 4218</span>    <a class="code hl_function" href="r__shadow_8c.html#ad0ac3912153c4fc807b0455777f3b0c6">R_Shadow_ClearShadowMapTexture</a>();</div>
<div class="line"><a id="l04219" name="l04219"></a><span class="lineno"> 4219</span> </div>
<div class="line"><a id="l04220" name="l04220"></a><span class="lineno"> 4220</span>    <span class="comment">// render model shadowmaps (r_shadows 2) if desired which will be sampled in the forward pass</span></div>
<div class="line"><a id="l04221" name="l04221"></a><span class="lineno"> 4221</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#abcd3a00e258b83fb536152a846a9c4a5">r_shadow_shadowmapatlas_modelshadows_size</a>)</div>
<div class="line"><a id="l04222" name="l04222"></a><span class="lineno"> 4222</span>    {</div>
<div class="line"><a id="l04223" name="l04223"></a><span class="lineno"> 4223</span>        <a class="code hl_function" href="r__shadow_8c.html#a98692eae6f52e4fb205ee47f6e6cf56a">R_Shadow_DrawModelShadowMaps</a>();</div>
<div class="line"><a id="l04224" name="l04224"></a><span class="lineno"> 4224</span>        <span class="comment">// don&#39;t let sound skip if going slow</span></div>
<div class="line"><a id="l04225" name="l04225"></a><span class="lineno"> 4225</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a5e522da90373661c46825181a717d610">extraupdate</a>)</div>
<div class="line"><a id="l04226" name="l04226"></a><span class="lineno"> 4226</span>            <a class="code hl_function" href="snd__main_8c.html#ac8f1d491f70a504540240cbb8c97b7a4">S_ExtraUpdate</a>();</div>
<div class="line"><a id="l04227" name="l04227"></a><span class="lineno"> 4227</span>    }</div>
<div class="line"><a id="l04228" name="l04228"></a><span class="lineno"> 4228</span> </div>
<div class="line"><a id="l04229" name="l04229"></a><span class="lineno"> 4229</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="r__shadow_8c.html#a6a2b6b4ed69e837e20c465b31226b9e4">R_Shadow_ShadowMappingEnabled</a>())</div>
<div class="line"><a id="l04230" name="l04230"></a><span class="lineno"> 4230</span>    {</div>
<div class="line"><a id="l04231" name="l04231"></a><span class="lineno"> 4231</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>;</div>
<div class="line"><a id="l04232" name="l04232"></a><span class="lineno"> 4232</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a> &lt; <a class="code hl_variable" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>++)</div>
<div class="line"><a id="l04233" name="l04233"></a><span class="lineno"> 4233</span>            <a class="code hl_function" href="r__shadow_8c.html#a85c48b5fadf41ff35eb2c65a2feb4212">R_Shadow_DrawLightShadowMaps</a>(<a class="code hl_variable" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>]);</div>
<div class="line"><a id="l04234" name="l04234"></a><span class="lineno"> 4234</span>    }</div>
<div class="line"><a id="l04235" name="l04235"></a><span class="lineno"> 4235</span> </div>
<div class="line"><a id="l04236" name="l04236"></a><span class="lineno"> 4236</span>    <a class="code hl_function" href="r__shadow_8c.html#ae2175aaad1171cce1dd9f531909c7732">R_Shadow_RenderMode_End</a>();</div>
<div class="line"><a id="l04237" name="l04237"></a><span class="lineno"> 4237</span>}</div>
</div>
<div class="line"><a id="l04238" name="l04238"></a><span class="lineno"> 4238</span> </div>
<div class="foldopen" id="foldopen04239" data-start="{" data-end="}">
<div class="line"><a id="l04239" name="l04239"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#acde2bdd647e19d4b5e2789d569068fb1"> 4239</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#acde2bdd647e19d4b5e2789d569068fb1">R_Shadow_DrawLights</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l04240" name="l04240"></a><span class="lineno"> 4240</span>{</div>
<div class="line"><a id="l04241" name="l04241"></a><span class="lineno"> 4241</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>;</div>
<div class="line"><a id="l04242" name="l04242"></a><span class="lineno"> 4242</span> </div>
<div class="line"><a id="l04243" name="l04243"></a><span class="lineno"> 4243</span>    <a class="code hl_function" href="r__shadow_8c.html#a002be2a22d2ec51fb6a09ca24fe3ff25">R_Shadow_RenderMode_Begin</a>();</div>
<div class="line"><a id="l04244" name="l04244"></a><span class="lineno"> 4244</span> </div>
<div class="line"><a id="l04245" name="l04245"></a><span class="lineno"> 4245</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a> &lt; <a class="code hl_variable" href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a>; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>++)</div>
<div class="line"><a id="l04246" name="l04246"></a><span class="lineno"> 4246</span>        <a class="code hl_function" href="r__shadow_8c.html#acf3856ee38d8738a7617d3781f384683">R_Shadow_DrawLight</a>(<a class="code hl_variable" href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lnum</a>]);</div>
<div class="line"><a id="l04247" name="l04247"></a><span class="lineno"> 4247</span> </div>
<div class="line"><a id="l04248" name="l04248"></a><span class="lineno"> 4248</span>    <a class="code hl_function" href="r__shadow_8c.html#ae2175aaad1171cce1dd9f531909c7732">R_Shadow_RenderMode_End</a>();</div>
<div class="line"><a id="l04249" name="l04249"></a><span class="lineno"> 4249</span>}</div>
</div>
<div class="line"><a id="l04250" name="l04250"></a><span class="lineno"> 4250</span> </div>
<div class="line"><a id="l04251" name="l04251"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ad141da34e49308e0bdb1acff3d24b7ab"> 4251</a></span><span class="preprocessor">#define MAX_MODELSHADOWS 1024</span></div>
<div class="line"><a id="l04252" name="l04252"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9cdd48988e7e20a19511a5ea5d0b1f4f"> 4252</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="r__shadow_8c.html#a9cdd48988e7e20a19511a5ea5d0b1f4f">r_shadow_nummodelshadows</a>;</div>
<div class="line"><a id="l04253" name="l04253"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5ab42593459491484d9d54f1b51fef48"> 4253</a></span><span class="keyword">static</span> <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *<a class="code hl_variable" href="r__shadow_8c.html#a5ab42593459491484d9d54f1b51fef48">r_shadow_modelshadows</a>[<a class="code hl_define" href="r__shadow_8c.html#ad141da34e49308e0bdb1acff3d24b7ab">MAX_MODELSHADOWS</a>];</div>
<div class="line"><a id="l04254" name="l04254"></a><span class="lineno"> 4254</span> </div>
<div class="foldopen" id="foldopen04255" data-start="{" data-end="}">
<div class="line"><a id="l04255" name="l04255"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a767d01ae9fb1a276469a264ffdf4f1bf"> 4255</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a767d01ae9fb1a276469a264ffdf4f1bf">R_Shadow_PrepareModelShadows</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l04256" name="l04256"></a><span class="lineno"> 4256</span>{</div>
<div class="line"><a id="l04257" name="l04257"></a><span class="lineno"> 4257</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l04258" name="l04258"></a><span class="lineno"> 4258</span>    <span class="keywordtype">float</span> scale, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, radius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot1</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot2</a>;</div>
<div class="line"><a id="l04259" name="l04259"></a><span class="lineno"> 4259</span>    <a class="code hl_typedef" href="qtypes_8h.html#a74bc4b300862fe52bf3d855e89caff65">prvm_vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">prvmshadowdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">prvmshadowfocus</a>;</div>
<div class="line"><a id="l04260" name="l04260"></a><span class="lineno"> 4260</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowright</a>, shadoworigin, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmaxs</a>;</div>
<div class="line"><a id="l04261" name="l04261"></a><span class="lineno"> 4261</span>    <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *ent;</div>
<div class="line"><a id="l04262" name="l04262"></a><span class="lineno"> 4262</span> </div>
<div class="line"><a id="l04263" name="l04263"></a><span class="lineno"> 4263</span>    <a class="code hl_variable" href="r__shadow_8c.html#a9cdd48988e7e20a19511a5ea5d0b1f4f">r_shadow_nummodelshadows</a> = 0;</div>
<div class="line"><a id="l04264" name="l04264"></a><span class="lineno"> 4264</span>    <a class="code hl_variable" href="r__shadow_8c.html#abcd3a00e258b83fb536152a846a9c4a5">r_shadow_shadowmapatlas_modelshadows_size</a> = 0;</div>
<div class="line"><a id="l04265" name="l04265"></a><span class="lineno"> 4265</span> </div>
<div class="line"><a id="l04266" name="l04266"></a><span class="lineno"> 4266</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ab8c4efc627714dd8b1d5840851b45220">numentities</a> || <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a4cb3e4b7d463102f104be9f3af762fc1">lightmapintensity</a> &lt;= 0.0f || <a class="code hl_variable" href="gl__rmain_8c.html#a4c5a17db9ede9320416c2bf2df6a06e8">r_shadows</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &lt;= 0)</div>
<div class="line"><a id="l04267" name="l04267"></a><span class="lineno"> 4267</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04268" name="l04268"></a><span class="lineno"> 4268</span> </div>
<div class="line"><a id="l04269" name="l04269"></a><span class="lineno"> 4269</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> = <a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a> / 4;</div>
<div class="line"><a id="l04270" name="l04270"></a><span class="lineno"> 4270</span>    scale = <a class="code hl_variable" href="r__shadow_8c.html#a56bd32784edad8eaa9a2e95494b5f929">r_shadow_shadowmapping_precision</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="gl__rmain_8c.html#a9b65dfdb28f6b15ccc9a666c82662ba8">r_shadows_shadowmapscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l04271" name="l04271"></a><span class="lineno"> 4271</span>    radius = 0.5f * <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> / scale;</div>
<div class="line"><a id="l04272" name="l04272"></a><span class="lineno"> 4272</span> </div>
<div class="line"><a id="l04273" name="l04273"></a><span class="lineno"> 4273</span>    <a class="code hl_function" href="mathlib_8c.html#a492f2a8698bdd39461dc8560cced2db1">Math_atov</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a3c92f82dffe53dad2abf31a6b878de6a">r_shadows_throwdirection</a>.<a class="code hl_variable" href="structcvar__t.html#aa8b859b9332810d238c09b51ea54a2f4">string</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">prvmshadowdir</a>);</div>
<div class="line"><a id="l04274" name="l04274"></a><span class="lineno"> 4274</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">prvmshadowdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>);</div>
<div class="line"><a id="l04275" name="l04275"></a><span class="lineno"> 4275</span>    <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>);</div>
<div class="line"><a id="l04276" name="l04276"></a><span class="lineno"> 4276</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot1</a> = <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae77b6ccbb4e40b1132239a12c91438f9">forward</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>);</div>
<div class="line"><a id="l04277" name="l04277"></a><span class="lineno"> 4277</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot2</a> = <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae1bd25ebdf975e2daba47f7367d8323b">up</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>);</div>
<div class="line"><a id="l04278" name="l04278"></a><span class="lineno"> 4278</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot1</a>) &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot2</a>))</div>
<div class="line"><a id="l04279" name="l04279"></a><span class="lineno"> 4279</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae77b6ccbb4e40b1132239a12c91438f9">forward</a>, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot1</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>);</div>
<div class="line"><a id="l04280" name="l04280"></a><span class="lineno"> 4280</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l04281" name="l04281"></a><span class="lineno"> 4281</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae1bd25ebdf975e2daba47f7367d8323b">up</a>, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>);</div>
<div class="line"><a id="l04282" name="l04282"></a><span class="lineno"> 4282</span>    <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>);</div>
<div class="line"><a id="l04283" name="l04283"></a><span class="lineno"> 4283</span>    <a class="code hl_define" href="mathlib_8h.html#aa3c5114e57f89ea32ef8f41e00631e44">CrossProduct</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowright</a>);</div>
<div class="line"><a id="l04284" name="l04284"></a><span class="lineno"> 4284</span>    <a class="code hl_function" href="mathlib_8c.html#a492f2a8698bdd39461dc8560cced2db1">Math_atov</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a283516ef65f48b279a6b19fb3ac53a40">r_shadows_focus</a>.<a class="code hl_variable" href="structcvar__t.html#aa8b859b9332810d238c09b51ea54a2f4">string</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">prvmshadowfocus</a>);</div>
<div class="line"><a id="l04285" name="l04285"></a><span class="lineno"> 4285</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">prvmshadowfocus</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>);</div>
<div class="line"><a id="l04286" name="l04286"></a><span class="lineno"> 4286</span>    <a class="code hl_define" href="mathlib_8h.html#af70318c5d2e391de8700dad56d5db315">VectorM</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>[0], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a3310bef30f5ee5f2e5504e6abbabc4f4">right</a>, shadoworigin);</div>
<div class="line"><a id="l04287" name="l04287"></a><span class="lineno"> 4287</span>    <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(shadoworigin, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>[1], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae1bd25ebdf975e2daba47f7367d8323b">up</a>, shadoworigin);</div>
<div class="line"><a id="l04288" name="l04288"></a><span class="lineno"> 4288</span>    <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(shadoworigin, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>[2], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae77b6ccbb4e40b1132239a12c91438f9">forward</a>, shadoworigin);</div>
<div class="line"><a id="l04289" name="l04289"></a><span class="lineno"> 4289</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(shadoworigin, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, shadoworigin);</div>
<div class="line"><a id="l04290" name="l04290"></a><span class="lineno"> 4290</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>[0] || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>[1] || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>[2])</div>
<div class="line"><a id="l04291" name="l04291"></a><span class="lineno"> 4291</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot1</a> = 1;</div>
<div class="line"><a id="l04292" name="l04292"></a><span class="lineno"> 4292</span>    <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(shadoworigin, (1.0f - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot1</a>)) * radius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>, shadoworigin);</div>
<div class="line"><a id="l04293" name="l04293"></a><span class="lineno"> 4293</span> </div>
<div class="line"><a id="l04294" name="l04294"></a><span class="lineno"> 4294</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmins</a>[0] = shadoworigin[0] - <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>[0]) - radius * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>[0]) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowright</a>[0]));</div>
<div class="line"><a id="l04295" name="l04295"></a><span class="lineno"> 4295</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmins</a>[1] = shadoworigin[1] - <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>[1]) - radius * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>[1]) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowright</a>[1]));</div>
<div class="line"><a id="l04296" name="l04296"></a><span class="lineno"> 4296</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmins</a>[2] = shadoworigin[2] - <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>[2]) - radius * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>[2]) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowright</a>[2]));</div>
<div class="line"><a id="l04297" name="l04297"></a><span class="lineno"> 4297</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmaxs</a>[0] = shadoworigin[0] + <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>[0]) + radius * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>[0]) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowright</a>[0]));</div>
<div class="line"><a id="l04298" name="l04298"></a><span class="lineno"> 4298</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmaxs</a>[1] = shadoworigin[1] + <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>[1]) + radius * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>[1]) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowright</a>[1]));</div>
<div class="line"><a id="l04299" name="l04299"></a><span class="lineno"> 4299</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmaxs</a>[2] = shadoworigin[2] + <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>[2]) + radius * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>[2]) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowright</a>[2]));</div>
<div class="line"><a id="l04300" name="l04300"></a><span class="lineno"> 4300</span> </div>
<div class="line"><a id="l04301" name="l04301"></a><span class="lineno"> 4301</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ab8c4efc627714dd8b1d5840851b45220">numentities</a>; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04302" name="l04302"></a><span class="lineno"> 4302</span>    {</div>
<div class="line"><a id="l04303" name="l04303"></a><span class="lineno"> 4303</span>        ent = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a6e9b9caf2253fce60dcd0c86d1400c63">entities</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l04304" name="l04304"></a><span class="lineno"> 4304</span>        <span class="keywordflow">if</span> (!<a class="code hl_define" href="mathlib_8h.html#a3f4b2cfbd3195eddeb10b2e14b7e4d8c">BoxesOverlap</a>(ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a44bb671562e49c023bd13ebcae8d29a1">mins</a>, ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#af3bede297910947fd1b34ab74bbc690a">maxs</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmaxs</a>))</div>
<div class="line"><a id="l04305" name="l04305"></a><span class="lineno"> 4305</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04306" name="l04306"></a><span class="lineno"> 4306</span>        <span class="comment">// cast shadows from anything of the map (submodels are optional)</span></div>
<div class="line"><a id="l04307" name="l04307"></a><span class="lineno"> 4307</span>        <span class="keywordflow">if</span> (ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a> &amp;&amp; ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a71121e7ef28a949af258f4611ce21e9c">DrawShadowMap</a> != <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; (!ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a1bb35c00721be56c390df0b877791cac">submodel</a> || <a class="code hl_variable" href="gl__rmain_8c.html#a02cb1671919ce8b41440de9ff892d074">r_shadows_castfrombmodels</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>) &amp;&amp; (ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a771a7b129ac67f0139f5b4920a722360">flags</a> &amp; <a class="code hl_define" href="protocol_8h.html#a73aa38a060145a0da1a2bd3a54c12cd6">RENDER_SHADOW</a>))</div>
<div class="line"><a id="l04308" name="l04308"></a><span class="lineno"> 4308</span>        {</div>
<div class="line"><a id="l04309" name="l04309"></a><span class="lineno"> 4309</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a9cdd48988e7e20a19511a5ea5d0b1f4f">r_shadow_nummodelshadows</a> &gt;= <a class="code hl_define" href="r__shadow_8c.html#ad141da34e49308e0bdb1acff3d24b7ab">MAX_MODELSHADOWS</a>)</div>
<div class="line"><a id="l04310" name="l04310"></a><span class="lineno"> 4310</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04311" name="l04311"></a><span class="lineno"> 4311</span>            <a class="code hl_variable" href="r__shadow_8c.html#a5ab42593459491484d9d54f1b51fef48">r_shadow_modelshadows</a>[<a class="code hl_variable" href="r__shadow_8c.html#a9cdd48988e7e20a19511a5ea5d0b1f4f">r_shadow_nummodelshadows</a>++] = ent;</div>
<div class="line"><a id="l04312" name="l04312"></a><span class="lineno"> 4312</span>            <a class="code hl_function" href="gl__rmain_8c.html#a2ebd69dd33cef88cb5280d6a31e0a5d6">R_AnimCache_GetEntity</a>(ent, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l04313" name="l04313"></a><span class="lineno"> 4313</span>        }</div>
<div class="line"><a id="l04314" name="l04314"></a><span class="lineno"> 4314</span>    }</div>
<div class="line"><a id="l04315" name="l04315"></a><span class="lineno"> 4315</span> </div>
<div class="line"><a id="l04316" name="l04316"></a><span class="lineno"> 4316</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a9cdd48988e7e20a19511a5ea5d0b1f4f">r_shadow_nummodelshadows</a>)</div>
<div class="line"><a id="l04317" name="l04317"></a><span class="lineno"> 4317</span>    {</div>
<div class="line"><a id="l04318" name="l04318"></a><span class="lineno"> 4318</span>        <a class="code hl_variable" href="r__shadow_8c.html#af20ac9c28e45c74931539d36c4af3129">r_shadow_shadowmapatlas_modelshadows_x</a> = 0;</div>
<div class="line"><a id="l04319" name="l04319"></a><span class="lineno"> 4319</span>        <a class="code hl_variable" href="r__shadow_8c.html#ac3bf8e273436551219a3b874ca5f29a3">r_shadow_shadowmapatlas_modelshadows_y</a> = 0;</div>
<div class="line"><a id="l04320" name="l04320"></a><span class="lineno"> 4320</span>        <a class="code hl_variable" href="r__shadow_8c.html#abcd3a00e258b83fb536152a846a9c4a5">r_shadow_shadowmapatlas_modelshadows_size</a> = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;</div>
<div class="line"><a id="l04321" name="l04321"></a><span class="lineno"> 4321</span>    }</div>
<div class="line"><a id="l04322" name="l04322"></a><span class="lineno"> 4322</span>}</div>
</div>
<div class="line"><a id="l04323" name="l04323"></a><span class="lineno"> 4323</span> </div>
<div class="foldopen" id="foldopen04324" data-start="{" data-end="}">
<div class="line"><a id="l04324" name="l04324"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a98692eae6f52e4fb205ee47f6e6cf56a"> 4324</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a98692eae6f52e4fb205ee47f6e6cf56a">R_Shadow_DrawModelShadowMaps</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l04325" name="l04325"></a><span class="lineno"> 4325</span>{</div>
<div class="line"><a id="l04326" name="l04326"></a><span class="lineno"> 4326</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a id="l04327" name="l04327"></a><span class="lineno"> 4327</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativethrowdistance</a>, scale, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, radius, nearclip, farclip, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot1</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot2</a>;</div>
<div class="line"><a id="l04328" name="l04328"></a><span class="lineno"> 4328</span>    <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *ent;</div>
<div class="line"><a id="l04329" name="l04329"></a><span class="lineno"> 4329</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> relativelightorigin;</div>
<div class="line"><a id="l04330" name="l04330"></a><span class="lineno"> 4330</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativelightdirection</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeforward</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeright</a>;</div>
<div class="line"><a id="l04331" name="l04331"></a><span class="lineno"> 4331</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmaxs</a>;</div>
<div class="line"><a id="l04332" name="l04332"></a><span class="lineno"> 4332</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowright</a>, shadoworigin, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>;</div>
<div class="line"><a id="l04333" name="l04333"></a><span class="lineno"> 4333</span>    <a class="code hl_typedef" href="qtypes_8h.html#a74bc4b300862fe52bf3d855e89caff65">prvm_vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">prvmshadowdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">prvmshadowfocus</a>;</div>
<div class="line"><a id="l04334" name="l04334"></a><span class="lineno"> 4334</span>    <span class="keywordtype">float</span> m[12];</div>
<div class="line"><a id="l04335" name="l04335"></a><span class="lineno"> 4335</span>    <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmatrix</a>, cameramatrix, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mvpmatrix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invmvpmatrix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">scalematrix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texmatrix</a>;</div>
<div class="line"><a id="l04336" name="l04336"></a><span class="lineno"> 4336</span>    <a class="code hl_struct" href="structr__viewport__t.html">r_viewport_t</a> viewport;</div>
<div class="line"><a id="l04337" name="l04337"></a><span class="lineno"> 4337</span> </div>
<div class="line"><a id="l04338" name="l04338"></a><span class="lineno"> 4338</span>    <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a> = <a class="code hl_variable" href="r__shadow_8c.html#abcd3a00e258b83fb536152a846a9c4a5">r_shadow_shadowmapatlas_modelshadows_size</a>;</div>
<div class="line"><a id="l04339" name="l04339"></a><span class="lineno"> 4339</span>    scale = (<a class="code hl_variable" href="r__shadow_8c.html#a56bd32784edad8eaa9a2e95494b5f929">r_shadow_shadowmapping_precision</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="gl__rmain_8c.html#a9b65dfdb28f6b15ccc9a666c82662ba8">r_shadows_shadowmapscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>) / <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;</div>
<div class="line"><a id="l04340" name="l04340"></a><span class="lineno"> 4340</span>    radius = 0.5f / scale;</div>
<div class="line"><a id="l04341" name="l04341"></a><span class="lineno"> 4341</span>    nearclip = -<a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l04342" name="l04342"></a><span class="lineno"> 4342</span>    farclip = <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l04343" name="l04343"></a><span class="lineno"> 4343</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a> = (<a class="code hl_variable" href="gl__rmain_8c.html#a0753494883ac11a96bbf58c57312d691">r_shadows_shadowmapbias</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> &lt; 0) ? <a class="code hl_variable" href="r__shadow_8c.html#acf4f5f168d0d5b4008cc00b2d3d69542">r_shadow_shadowmapping_bias</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> : <a class="code hl_variable" href="gl__rmain_8c.html#a0753494883ac11a96bbf58c57312d691">r_shadows_shadowmapbias</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="r__shadow_8c.html#a1e147e72bbae8ca02ec9ae2568a00566">r_shadow_shadowmapping_nearclip</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> / (2 * <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>) * (1024.0f / <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>);</div>
<div class="line"><a id="l04344" name="l04344"></a><span class="lineno"> 4344</span> </div>
<div class="line"><a id="l04345" name="l04345"></a><span class="lineno"> 4345</span>    <span class="comment">// set the parameters that will be used on the regular model renders using these shadows we&#39;re about to produce</span></div>
<div class="line"><a id="l04346" name="l04346"></a><span class="lineno"> 4346</span>    <a class="code hl_variable" href="r__shadow_8c.html#a0d70e8d1786aa6910f4584bbe64b3105">r_shadow_modelshadowmap_parameters</a>[0] = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;</div>
<div class="line"><a id="l04347" name="l04347"></a><span class="lineno"> 4347</span>    <a class="code hl_variable" href="r__shadow_8c.html#a0d70e8d1786aa6910f4584bbe64b3105">r_shadow_modelshadowmap_parameters</a>[1] = <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>;</div>
<div class="line"><a id="l04348" name="l04348"></a><span class="lineno"> 4348</span>    <a class="code hl_variable" href="r__shadow_8c.html#a0d70e8d1786aa6910f4584bbe64b3105">r_shadow_modelshadowmap_parameters</a>[2] = 1.0;</div>
<div class="line"><a id="l04349" name="l04349"></a><span class="lineno"> 4349</span>    <a class="code hl_variable" href="r__shadow_8c.html#a0d70e8d1786aa6910f4584bbe64b3105">r_shadow_modelshadowmap_parameters</a>[3] = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0.0f, 1.0f - <a class="code hl_variable" href="gl__rmain_8c.html#a2d60da38c87bb227441e6c71449e940d">r_shadows_darken</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, 1.0f);</div>
<div class="line"><a id="l04350" name="l04350"></a><span class="lineno"> 4350</span>    <a class="code hl_variable" href="r__shadow_8c.html#afff8388ead8104ed51bceb8103cf1a60">r_shadow_modelshadowmap_texturescale</a>[0] = 1.0f / <a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a>;</div>
<div class="line"><a id="l04351" name="l04351"></a><span class="lineno"> 4351</span>    <a class="code hl_variable" href="r__shadow_8c.html#afff8388ead8104ed51bceb8103cf1a60">r_shadow_modelshadowmap_texturescale</a>[1] = 1.0f / <a class="code hl_variable" href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a>;</div>
<div class="line"><a id="l04352" name="l04352"></a><span class="lineno"> 4352</span>    <a class="code hl_variable" href="r__shadow_8c.html#afff8388ead8104ed51bceb8103cf1a60">r_shadow_modelshadowmap_texturescale</a>[2] = <a class="code hl_variable" href="r__shadow_8c.html#af20ac9c28e45c74931539d36c4af3129">r_shadow_shadowmapatlas_modelshadows_x</a>;</div>
<div class="line"><a id="l04353" name="l04353"></a><span class="lineno"> 4353</span>    <a class="code hl_variable" href="r__shadow_8c.html#afff8388ead8104ed51bceb8103cf1a60">r_shadow_modelshadowmap_texturescale</a>[3] = <a class="code hl_variable" href="r__shadow_8c.html#ac3bf8e273436551219a3b874ca5f29a3">r_shadow_shadowmapatlas_modelshadows_y</a>;</div>
<div class="line"><a id="l04354" name="l04354"></a><span class="lineno"> 4354</span>    <a class="code hl_variable" href="r__shadow_8c.html#aa3823db1be08fa2c34a3b428b40ada80">r_shadow_usingshadowmaportho</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04355" name="l04355"></a><span class="lineno"> 4355</span> </div>
<div class="line"><a id="l04356" name="l04356"></a><span class="lineno"> 4356</span>    <a class="code hl_function" href="mathlib_8c.html#a492f2a8698bdd39461dc8560cced2db1">Math_atov</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a3c92f82dffe53dad2abf31a6b878de6a">r_shadows_throwdirection</a>.<a class="code hl_variable" href="structcvar__t.html#aa8b859b9332810d238c09b51ea54a2f4">string</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">prvmshadowdir</a>);</div>
<div class="line"><a id="l04357" name="l04357"></a><span class="lineno"> 4357</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">prvmshadowdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>);</div>
<div class="line"><a id="l04358" name="l04358"></a><span class="lineno"> 4358</span>    <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>);</div>
<div class="line"><a id="l04359" name="l04359"></a><span class="lineno"> 4359</span>    <a class="code hl_function" href="mathlib_8c.html#a492f2a8698bdd39461dc8560cced2db1">Math_atov</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a283516ef65f48b279a6b19fb3ac53a40">r_shadows_focus</a>.<a class="code hl_variable" href="structcvar__t.html#aa8b859b9332810d238c09b51ea54a2f4">string</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">prvmshadowfocus</a>);</div>
<div class="line"><a id="l04360" name="l04360"></a><span class="lineno"> 4360</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">prvmshadowfocus</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>);</div>
<div class="line"><a id="l04361" name="l04361"></a><span class="lineno"> 4361</span>    <a class="code hl_define" href="mathlib_8h.html#af70318c5d2e391de8700dad56d5db315">VectorM</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>[0], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a3310bef30f5ee5f2e5504e6abbabc4f4">right</a>, shadoworigin);</div>
<div class="line"><a id="l04362" name="l04362"></a><span class="lineno"> 4362</span>    <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(shadoworigin, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>[1], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae1bd25ebdf975e2daba47f7367d8323b">up</a>, shadoworigin);</div>
<div class="line"><a id="l04363" name="l04363"></a><span class="lineno"> 4363</span>    <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(shadoworigin, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>[2], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae77b6ccbb4e40b1132239a12c91438f9">forward</a>, shadoworigin);</div>
<div class="line"><a id="l04364" name="l04364"></a><span class="lineno"> 4364</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(shadoworigin, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, shadoworigin);</div>
<div class="line"><a id="l04365" name="l04365"></a><span class="lineno"> 4365</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot1</a> = <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae77b6ccbb4e40b1132239a12c91438f9">forward</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>);</div>
<div class="line"><a id="l04366" name="l04366"></a><span class="lineno"> 4366</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot2</a> = <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae1bd25ebdf975e2daba47f7367d8323b">up</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>);</div>
<div class="line"><a id="l04367" name="l04367"></a><span class="lineno"> 4367</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot1</a>) &lt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot2</a>))</div>
<div class="line"><a id="l04368" name="l04368"></a><span class="lineno"> 4368</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae77b6ccbb4e40b1132239a12c91438f9">forward</a>, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot1</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>);</div>
<div class="line"><a id="l04369" name="l04369"></a><span class="lineno"> 4369</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l04370" name="l04370"></a><span class="lineno"> 4370</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae1bd25ebdf975e2daba47f7367d8323b">up</a>, -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot2</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>);</div>
<div class="line"><a id="l04371" name="l04371"></a><span class="lineno"> 4371</span>    <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>);</div>
<div class="line"><a id="l04372" name="l04372"></a><span class="lineno"> 4372</span>    <a class="code hl_define" href="mathlib_8h.html#af70318c5d2e391de8700dad56d5db315">VectorM</a>(scale, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>, &amp;m[0]);</div>
<div class="line"><a id="l04373" name="l04373"></a><span class="lineno"> 4373</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>[0] || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>[1] || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowfocus</a>[2])</div>
<div class="line"><a id="l04374" name="l04374"></a><span class="lineno"> 4374</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot1</a> = 1;</div>
<div class="line"><a id="l04375" name="l04375"></a><span class="lineno"> 4375</span>    m[3] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot1</a>) * 0.5f - <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(shadoworigin, &amp;m[0]);</div>
<div class="line"><a id="l04376" name="l04376"></a><span class="lineno"> 4376</span>    <a class="code hl_define" href="mathlib_8h.html#aa3c5114e57f89ea32ef8f41e00631e44">CrossProduct</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowright</a>);</div>
<div class="line"><a id="l04377" name="l04377"></a><span class="lineno"> 4377</span>    <a class="code hl_define" href="mathlib_8h.html#af70318c5d2e391de8700dad56d5db315">VectorM</a>(scale, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowright</a>, &amp;m[4]);</div>
<div class="line"><a id="l04378" name="l04378"></a><span class="lineno"> 4378</span>    m[7] = 0.5f - <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(shadoworigin, &amp;m[4]);</div>
<div class="line"><a id="l04379" name="l04379"></a><span class="lineno"> 4379</span>    <a class="code hl_define" href="mathlib_8h.html#af70318c5d2e391de8700dad56d5db315">VectorM</a>(1.0f / (farclip - nearclip), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>, &amp;m[8]);</div>
<div class="line"><a id="l04380" name="l04380"></a><span class="lineno"> 4380</span>    m[11] = 0.5f - <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(shadoworigin, &amp;m[8]);</div>
<div class="line"><a id="l04381" name="l04381"></a><span class="lineno"> 4381</span>    <a class="code hl_function" href="matrixlib_8c.html#a932d1dfd93e2a0a52fc4f63ff07c3d1f">Matrix4x4_FromArray12FloatD3D</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmatrix</a>, m);</div>
<div class="line"><a id="l04382" name="l04382"></a><span class="lineno"> 4382</span>    <a class="code hl_function" href="matrixlib_8c.html#a8226adb345f8fce3f139f2c3db5ca71e">Matrix4x4_Invert_Full</a>(&amp;cameramatrix, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmatrix</a>);</div>
<div class="line"><a id="l04383" name="l04383"></a><span class="lineno"> 4383</span>    <a class="code hl_function" href="gl__backend_8c.html#aa367cce31c9af183e5fc889eb5f818d9">R_Viewport_InitOrtho</a>(&amp;viewport, &amp;cameramatrix, <a class="code hl_variable" href="r__shadow_8c.html#af20ac9c28e45c74931539d36c4af3129">r_shadow_shadowmapatlas_modelshadows_x</a>, <a class="code hl_variable" href="r__shadow_8c.html#ac3bf8e273436551219a3b874ca5f29a3">r_shadow_shadowmapatlas_modelshadows_y</a>, <a class="code hl_variable" href="r__shadow_8c.html#abcd3a00e258b83fb536152a846a9c4a5">r_shadow_shadowmapatlas_modelshadows_size</a>, <a class="code hl_variable" href="r__shadow_8c.html#abcd3a00e258b83fb536152a846a9c4a5">r_shadow_shadowmapatlas_modelshadows_size</a>, 0, 0, 1, 1, 0, -1, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04384" name="l04384"></a><span class="lineno"> 4384</span>    <a class="code hl_function" href="gl__backend_8c.html#aa241fd9a2ecba640ec39c782948c9916">R_SetViewport</a>(&amp;viewport);</div>
<div class="line"><a id="l04385" name="l04385"></a><span class="lineno"> 4385</span> </div>
<div class="line"><a id="l04386" name="l04386"></a><span class="lineno"> 4386</span>    <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(shadoworigin, (1.0f - <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dot1</a>)) * radius, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>, shadoworigin);</div>
<div class="line"><a id="l04387" name="l04387"></a><span class="lineno"> 4387</span> </div>
<div class="line"><a id="l04388" name="l04388"></a><span class="lineno"> 4388</span>    <span class="comment">// render into a slightly restricted region so that the borders of the</span></div>
<div class="line"><a id="l04389" name="l04389"></a><span class="lineno"> 4389</span>    <span class="comment">// shadowmap area fade away, rather than streaking across everything</span></div>
<div class="line"><a id="l04390" name="l04390"></a><span class="lineno"> 4390</span>    <span class="comment">// outside the usable area</span></div>
<div class="line"><a id="l04391" name="l04391"></a><span class="lineno"> 4391</span>    <a class="code hl_function" href="gl__backend_8c.html#adadda08f98e1c2d849d38d6885073148">GL_Scissor</a>(viewport.<a class="code hl_variable" href="structr__viewport__t.html#ab6e28cd0da86d0623897a480caf26aa8">x</a> + <a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a43bf621388acf637d4d3bbc2a2f2d1c0">y</a> + <a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a2c03a2d70555c2d93c2623dabd706a4d">width</a> - 2*<a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a588496c0ad6b768495bee4c4d8f22979">height</a> - 2*<a class="code hl_variable" href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a>);</div>
<div class="line"><a id="l04392" name="l04392"></a><span class="lineno"> 4392</span> </div>
<div class="line"><a id="l04393" name="l04393"></a><span class="lineno"> 4393</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="r__shadow_8c.html#a9cdd48988e7e20a19511a5ea5d0b1f4f">r_shadow_nummodelshadows</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04394" name="l04394"></a><span class="lineno"> 4394</span>    {</div>
<div class="line"><a id="l04395" name="l04395"></a><span class="lineno"> 4395</span>        ent = <a class="code hl_variable" href="r__shadow_8c.html#a5ab42593459491484d9d54f1b51fef48">r_shadow_modelshadows</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l04396" name="l04396"></a><span class="lineno"> 4396</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativethrowdistance</a> = <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_function" href="matrixlib_8c.html#ab6b9fb4e085d3cd32f5e9043d3d884ec">Matrix4x4_ScaleFromMatrix</a>(&amp;ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a2a953613d4d38178f6b4b662aace412d">inversematrix</a>);</div>
<div class="line"><a id="l04397" name="l04397"></a><span class="lineno"> 4397</span>        <a class="code hl_function" href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a>(&amp;ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a2a953613d4d38178f6b4b662aace412d">inversematrix</a>, shadoworigin, relativelightorigin);</div>
<div class="line"><a id="l04398" name="l04398"></a><span class="lineno"> 4398</span>        <a class="code hl_function" href="matrixlib_8c.html#a6cbe1d5f8ba3bfc1d91f98c4eb01ea5f">Matrix4x4_Transform3x3</a>(&amp;ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a2a953613d4d38178f6b4b662aace412d">inversematrix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativelightdirection</a>);</div>
<div class="line"><a id="l04399" name="l04399"></a><span class="lineno"> 4399</span>        <a class="code hl_function" href="matrixlib_8c.html#a6cbe1d5f8ba3bfc1d91f98c4eb01ea5f">Matrix4x4_Transform3x3</a>(&amp;ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a2a953613d4d38178f6b4b662aace412d">inversematrix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowforward</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeforward</a>);</div>
<div class="line"><a id="l04400" name="l04400"></a><span class="lineno"> 4400</span>        <a class="code hl_function" href="matrixlib_8c.html#a6cbe1d5f8ba3bfc1d91f98c4eb01ea5f">Matrix4x4_Transform3x3</a>(&amp;ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a2a953613d4d38178f6b4b662aace412d">inversematrix</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowright</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeright</a>);</div>
<div class="line"><a id="l04401" name="l04401"></a><span class="lineno"> 4401</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmins</a>[0] = relativelightorigin[0] - <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativelightdirection</a>[0]) - radius * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeforward</a>[0]) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeright</a>[0]));</div>
<div class="line"><a id="l04402" name="l04402"></a><span class="lineno"> 4402</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmins</a>[1] = relativelightorigin[1] - <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativelightdirection</a>[1]) - radius * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeforward</a>[1]) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeright</a>[1]));</div>
<div class="line"><a id="l04403" name="l04403"></a><span class="lineno"> 4403</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmins</a>[2] = relativelightorigin[2] - <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativelightdirection</a>[2]) - radius * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeforward</a>[2]) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeright</a>[2]));</div>
<div class="line"><a id="l04404" name="l04404"></a><span class="lineno"> 4404</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmaxs</a>[0] = relativelightorigin[0] + <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativelightdirection</a>[0]) + radius * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeforward</a>[0]) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeright</a>[0]));</div>
<div class="line"><a id="l04405" name="l04405"></a><span class="lineno"> 4405</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmaxs</a>[1] = relativelightorigin[1] + <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativelightdirection</a>[1]) + radius * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeforward</a>[1]) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeright</a>[1]));</div>
<div class="line"><a id="l04406" name="l04406"></a><span class="lineno"> 4406</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmaxs</a>[2] = relativelightorigin[2] + <a class="code hl_variable" href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativelightdirection</a>[2]) + radius * (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeforward</a>[2]) + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeright</a>[2]));</div>
<div class="line"><a id="l04407" name="l04407"></a><span class="lineno"> 4407</span>        <a class="code hl_function" href="gl__rmain_8c.html#ab91218d4fb985f2c4ffc9622a4e28fe2">RSurf_ActiveModelEntity</a>(ent, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l04408" name="l04408"></a><span class="lineno"> 4408</span>        ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a71121e7ef28a949af258f4611ce21e9c">DrawShadowMap</a>(0, ent, relativelightorigin, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativelightdirection</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativethrowdistance</a>, ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a3cf3f78e305583268585ef7bde7aaa16">submodelsurfaces_end</a> - ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">submodelsurfaces_start</a>, ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a37ed77c0d67434b15280684a8ba42814">modelsurfaces_sorted</a> + ent-&gt;<a class="code hl_variable" href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">model</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">submodelsurfaces_start</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativeshadowmaxs</a>);</div>
<div class="line"><a id="l04409" name="l04409"></a><span class="lineno"> 4409</span>        <a class="code hl_variable" href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a>.<a class="code hl_variable" href="structrsurfacestate__t.html#a882f84c3c787f26a402cb48df0af7043">entity</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">// used only by R_GetCurrentTexture and RSurf_ActiveModelEntity</span></div>
<div class="line"><a id="l04410" name="l04410"></a><span class="lineno"> 4410</span>    }</div>
<div class="line"><a id="l04411" name="l04411"></a><span class="lineno"> 4411</span> </div>
<div class="line"><a id="l04412" name="l04412"></a><span class="lineno"> 4412</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l04413" name="l04413"></a><span class="lineno"> 4413</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#a3ad0995fdb9cf4e470aea8263aa2bf50">r_test</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l04414" name="l04414"></a><span class="lineno"> 4414</span>    {</div>
<div class="line"><a id="l04415" name="l04415"></a><span class="lineno"> 4415</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rawpixels</a> = <a class="code hl_define" href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(viewport.<a class="code hl_variable" href="structr__viewport__t.html#a2c03a2d70555c2d93c2623dabd706a4d">width</a>*viewport.<a class="code hl_variable" href="structr__viewport__t.html#a588496c0ad6b768495bee4c4d8f22979">height</a>*4);</div>
<div class="line"><a id="l04416" name="l04416"></a><span class="lineno"> 4416</span>        <a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l04417" name="l04417"></a><span class="lineno"> 4417</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglReadPixels</a>(viewport.<a class="code hl_variable" href="structr__viewport__t.html#ab6e28cd0da86d0623897a480caf26aa8">x</a>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a43bf621388acf637d4d3bbc2a2f2d1c0">y</a>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a2c03a2d70555c2d93c2623dabd706a4d">width</a>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a588496c0ad6b768495bee4c4d8f22979">height</a>, <a class="code hl_define" href="glquake_8h.html#aac16527902deb1ddf6b84a9ce3da6e84">GL_DEPTH_COMPONENT</a>, <a class="code hl_define" href="glquake_8h.html#a69b1c02ba0bd93c643c6d82e0c16eb99">GL_UNSIGNED_INT</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rawpixels</a>);</div>
<div class="line"><a id="l04418" name="l04418"></a><span class="lineno"> 4418</span>        <a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l04419" name="l04419"></a><span class="lineno"> 4419</span>        <a class="code hl_function" href="image_8c.html#ab44ad0eba0b665ae7af8b13c9513cc71">Image_WriteTGABGRA</a>(<span class="stringliteral">&quot;r_shadows_2.tga&quot;</span>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a2c03a2d70555c2d93c2623dabd706a4d">width</a>, viewport.<a class="code hl_variable" href="structr__viewport__t.html#a588496c0ad6b768495bee4c4d8f22979">height</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rawpixels</a>);</div>
<div class="line"><a id="l04420" name="l04420"></a><span class="lineno"> 4420</span>        <a class="code hl_function" href="cvar_8c.html#a65b55ce35a5bd18e379065651d5d6e15">Cvar_SetValueQuick</a>(&amp;<a class="code hl_variable" href="gl__rmain_8c.html#a3ad0995fdb9cf4e470aea8263aa2bf50">r_test</a>, 0);</div>
<div class="line"><a id="l04421" name="l04421"></a><span class="lineno"> 4421</span>        <a class="code hl_define" href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rawpixels</a>);</div>
<div class="line"><a id="l04422" name="l04422"></a><span class="lineno"> 4422</span>    }</div>
<div class="line"><a id="l04423" name="l04423"></a><span class="lineno"> 4423</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04424" name="l04424"></a><span class="lineno"> 4424</span> </div>
<div class="line"><a id="l04425" name="l04425"></a><span class="lineno"> 4425</span>    <a class="code hl_function" href="matrixlib_8c.html#a0f17f61f7e6dd5b4f8dc94ff587526c0">Matrix4x4_Concat</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mvpmatrix</a>, &amp;<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a592300d55716a0e434c4e53f0d0a507d">projectmatrix</a>, &amp;<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">viewport</a>.<a class="code hl_variable" href="structr__viewport__t.html#a6f1a80b8c8079cbf896e393bf1856147">viewmatrix</a>);</div>
<div class="line"><a id="l04426" name="l04426"></a><span class="lineno"> 4426</span>    <a class="code hl_function" href="matrixlib_8c.html#a8226adb345f8fce3f139f2c3db5ca71e">Matrix4x4_Invert_Full</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invmvpmatrix</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mvpmatrix</a>);</div>
<div class="line"><a id="l04427" name="l04427"></a><span class="lineno"> 4427</span>    <a class="code hl_function" href="matrixlib_8c.html#a822f29c5872a6c4908bfea0a2cb481d2">Matrix4x4_CreateScale3</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">scalematrix</a>, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, -<a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, 1);</div>
<div class="line"><a id="l04428" name="l04428"></a><span class="lineno"> 4428</span>    <a class="code hl_function" href="matrixlib_8c.html#a0a9887ddef6db16c10e2c79fa01854b0">Matrix4x4_AdjustOrigin</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">scalematrix</a>, 0, <a class="code hl_variable" href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a>, -0.5f * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bias</a>);</div>
<div class="line"><a id="l04429" name="l04429"></a><span class="lineno"> 4429</span>    <a class="code hl_function" href="matrixlib_8c.html#a0f17f61f7e6dd5b4f8dc94ff587526c0">Matrix4x4_Concat</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texmatrix</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">scalematrix</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowmatrix</a>);</div>
<div class="line"><a id="l04430" name="l04430"></a><span class="lineno"> 4430</span>    <a class="code hl_function" href="matrixlib_8c.html#a0f17f61f7e6dd5b4f8dc94ff587526c0">Matrix4x4_Concat</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac02a3fba96cd698322ace2b608553089">r_shadow_shadowmapmatrix</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">texmatrix</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">invmvpmatrix</a>);</div>
<div class="line"><a id="l04431" name="l04431"></a><span class="lineno"> 4431</span>}</div>
</div>
<div class="line"><a id="l04432" name="l04432"></a><span class="lineno"> 4432</span> </div>
<div class="foldopen" id="foldopen04433" data-start="{" data-end="}">
<div class="line"><a id="l04433" name="l04433"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ab9700b21ff398060ec0f612ba4b22de3"> 4433</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ab9700b21ff398060ec0f612ba4b22de3">R_BeginCoronaQuery</a>(<a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight, <span class="keywordtype">float</span> scale, <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">usequery</a>)</div>
<div class="line"><a id="l04434" name="l04434"></a><span class="lineno"> 4434</span>{</div>
<div class="line"><a id="l04435" name="l04435"></a><span class="lineno"> 4435</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zdist</a>;</div>
<div class="line"><a id="l04436" name="l04436"></a><span class="lineno"> 4436</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">centerorigin</a>;</div>
<div class="line"><a id="l04437" name="l04437"></a><span class="lineno"> 4437</span><span class="preprocessor">#ifndef USE_GLES2</span></div>
<div class="line"><a id="l04438" name="l04438"></a><span class="lineno"> 4438</span>    <span class="keywordtype">float</span> vertex3f[12];</div>
<div class="line"><a id="l04439" name="l04439"></a><span class="lineno"> 4439</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04440" name="l04440"></a><span class="lineno"> 4440</span>    <span class="comment">// if it&#39;s too close, skip it</span></div>
<div class="line"><a id="l04441" name="l04441"></a><span class="lineno"> 4441</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>) &lt; (1.0f / 256.0f))</div>
<div class="line"><a id="l04442" name="l04442"></a><span class="lineno"> 4442</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04443" name="l04443"></a><span class="lineno"> 4443</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zdist</a> = (<a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae77b6ccbb4e40b1132239a12c91438f9">forward</a>) - <a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae77b6ccbb4e40b1132239a12c91438f9">forward</a>));</div>
<div class="line"><a id="l04444" name="l04444"></a><span class="lineno"> 4444</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zdist</a> &lt; 32)</div>
<div class="line"><a id="l04445" name="l04445"></a><span class="lineno"> 4445</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04446" name="l04446"></a><span class="lineno"> 4446</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">usequery</a> &amp;&amp; <a class="code hl_variable" href="gl__rmain_8c.html#a84ee03d338f553e5d384e10073d105dd">r_numqueries</a> + 2 &lt;= <a class="code hl_variable" href="gl__rmain_8c.html#a1fc9307fe84d14cbfeebbf3d59ecef25">r_maxqueries</a>)</div>
<div class="line"><a id="l04447" name="l04447"></a><span class="lineno"> 4447</span>    {</div>
<div class="line"><a id="l04448" name="l04448"></a><span class="lineno"> 4448</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#af545270adf7443a1d5e85912b1fc17a2">corona_queryindex_allpixels</a> = <a class="code hl_variable" href="gl__rmain_8c.html#aff92062082d530fb0baab83bf5269420">r_queries</a>[<a class="code hl_variable" href="gl__rmain_8c.html#a84ee03d338f553e5d384e10073d105dd">r_numqueries</a>++];</div>
<div class="line"><a id="l04449" name="l04449"></a><span class="lineno"> 4449</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a6f77db5ffb8d85d3cef6e9e77c7533a9">corona_queryindex_visiblepixels</a> = <a class="code hl_variable" href="gl__rmain_8c.html#aff92062082d530fb0baab83bf5269420">r_queries</a>[<a class="code hl_variable" href="gl__rmain_8c.html#a84ee03d338f553e5d384e10073d105dd">r_numqueries</a>++];</div>
<div class="line"><a id="l04450" name="l04450"></a><span class="lineno"> 4450</span>        <span class="comment">// we count potential samples in the middle of the screen, we count actual samples at the light location, this allows counting potential samples of off-screen lights</span></div>
<div class="line"><a id="l04451" name="l04451"></a><span class="lineno"> 4451</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zdist</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae77b6ccbb4e40b1132239a12c91438f9">forward</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">centerorigin</a>);</div>
<div class="line"><a id="l04452" name="l04452"></a><span class="lineno"> 4452</span> </div>
<div class="line"><a id="l04453" name="l04453"></a><span class="lineno"> 4453</span>        <span class="keywordflow">switch</span>(<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a77ee51e56202df8258781a0aa1dc1a2d">renderpath</a>)</div>
<div class="line"><a id="l04454" name="l04454"></a><span class="lineno"> 4454</span>        {</div>
<div class="line"><a id="l04455" name="l04455"></a><span class="lineno"> 4455</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafcfef4a81b353e6ad9bfee33f0c6076a">RENDERPATH_GL32</a>:</div>
<div class="line"><a id="l04456" name="l04456"></a><span class="lineno"> 4456</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafbfa84c8848e1c609691f76637da178b">RENDERPATH_GLES2</a>:</div>
<div class="line"><a id="l04457" name="l04457"></a><span class="lineno"> 4457</span><span class="preprocessor">#ifndef USE_GLES2</span></div>
<div class="line"><a id="l04458" name="l04458"></a><span class="lineno"> 4458</span>            <a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l04459" name="l04459"></a><span class="lineno"> 4459</span>            <span class="comment">// NOTE: GL_DEPTH_TEST must be enabled or ATI won&#39;t count samples, so use GL_DepthFunc instead</span></div>
<div class="line"><a id="l04460" name="l04460"></a><span class="lineno"> 4460</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglBeginQuery</a>(<a class="code hl_define" href="glquake_8h.html#ab0f6ab004415a67dd3d9be86546c0391">GL_SAMPLES_PASSED</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#af545270adf7443a1d5e85912b1fc17a2">corona_queryindex_allpixels</a>);</div>
<div class="line"><a id="l04461" name="l04461"></a><span class="lineno"> 4461</span>            <a class="code hl_function" href="gl__backend_8c.html#a5d98d0078d5c884b3e382d6ddd7eb2e1">GL_DepthFunc</a>(<a class="code hl_define" href="glquake_8h.html#a065314e6648fa794d9cf5872ebb9d776">GL_ALWAYS</a>);</div>
<div class="line"><a id="l04462" name="l04462"></a><span class="lineno"> 4462</span>            <a class="code hl_function" href="gl__rmain_8c.html#ab095e44ba81e415f6b29e8a3bf0fb7e7">R_CalcSprite_Vertex3f</a>(vertex3f, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">centerorigin</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a3310bef30f5ee5f2e5504e6abbabc4f4">right</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae1bd25ebdf975e2daba47f7367d8323b">up</a>, scale, -scale, -scale, scale);</div>
<div class="line"><a id="l04463" name="l04463"></a><span class="lineno"> 4463</span>            <a class="code hl_function" href="gl__backend_8c.html#a160faabf0f2b8616f192c5d3046ac477">R_Mesh_PrepareVertices_Vertex3f</a>(4, vertex3f, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a id="l04464" name="l04464"></a><span class="lineno"> 4464</span>            <a class="code hl_function" href="gl__backend_8c.html#a5fd11a8a3e5cbb27690e870134b36675">R_Mesh_Draw</a>(0, 4, 0, 2, <a class="code hl_variable" href="gl__backend_8c.html#a5691f389c9e452441b81b36bd486580e">polygonelement3i</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code hl_variable" href="gl__backend_8c.html#a2df502b95da3bc0f89296df1e7ade4d0">polygonelement3s</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a id="l04465" name="l04465"></a><span class="lineno"> 4465</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglEndQuery</a>(<a class="code hl_define" href="glquake_8h.html#ab0f6ab004415a67dd3d9be86546c0391">GL_SAMPLES_PASSED</a>);</div>
<div class="line"><a id="l04466" name="l04466"></a><span class="lineno"> 4466</span>            <a class="code hl_function" href="gl__backend_8c.html#a5d98d0078d5c884b3e382d6ddd7eb2e1">GL_DepthFunc</a>(<a class="code hl_define" href="glquake_8h.html#a8b778a06f153b4d59ebc6aa1d0996191">GL_LEQUAL</a>);</div>
<div class="line"><a id="l04467" name="l04467"></a><span class="lineno"> 4467</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglBeginQuery</a>(<a class="code hl_define" href="glquake_8h.html#ab0f6ab004415a67dd3d9be86546c0391">GL_SAMPLES_PASSED</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a6f77db5ffb8d85d3cef6e9e77c7533a9">corona_queryindex_visiblepixels</a>);</div>
<div class="line"><a id="l04468" name="l04468"></a><span class="lineno"> 4468</span>            <a class="code hl_function" href="gl__rmain_8c.html#ab095e44ba81e415f6b29e8a3bf0fb7e7">R_CalcSprite_Vertex3f</a>(vertex3f, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a3310bef30f5ee5f2e5504e6abbabc4f4">right</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae1bd25ebdf975e2daba47f7367d8323b">up</a>, scale, -scale, -scale, scale);</div>
<div class="line"><a id="l04469" name="l04469"></a><span class="lineno"> 4469</span>            <a class="code hl_function" href="gl__backend_8c.html#a160faabf0f2b8616f192c5d3046ac477">R_Mesh_PrepareVertices_Vertex3f</a>(4, vertex3f, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a id="l04470" name="l04470"></a><span class="lineno"> 4470</span>            <a class="code hl_function" href="gl__backend_8c.html#a5fd11a8a3e5cbb27690e870134b36675">R_Mesh_Draw</a>(0, 4, 0, 2, <a class="code hl_variable" href="gl__backend_8c.html#a5691f389c9e452441b81b36bd486580e">polygonelement3i</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code hl_variable" href="gl__backend_8c.html#a2df502b95da3bc0f89296df1e7ade4d0">polygonelement3s</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a id="l04471" name="l04471"></a><span class="lineno"> 4471</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglEndQuery</a>(<a class="code hl_define" href="glquake_8h.html#ab0f6ab004415a67dd3d9be86546c0391">GL_SAMPLES_PASSED</a>);</div>
<div class="line"><a id="l04472" name="l04472"></a><span class="lineno"> 4472</span>            <a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l04473" name="l04473"></a><span class="lineno"> 4473</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04474" name="l04474"></a><span class="lineno"> 4474</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04475" name="l04475"></a><span class="lineno"> 4475</span>        }</div>
<div class="line"><a id="l04476" name="l04476"></a><span class="lineno"> 4476</span>    }</div>
<div class="line"><a id="l04477" name="l04477"></a><span class="lineno"> 4477</span>    rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b9ae30e140634dfb0f1543ca4f5cf4c">corona_visibility</a> = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(0, (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">zdist</a> - 32) / 32, 1);</div>
<div class="line"><a id="l04478" name="l04478"></a><span class="lineno"> 4478</span>}</div>
</div>
<div class="line"><a id="l04479" name="l04479"></a><span class="lineno"> 4479</span> </div>
<div class="line"><a id="l04480" name="l04480"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a02387b9e26d871fb6674f3f91dffb692"> 4480</a></span><span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="r__shadow_8c.html#a02387b9e26d871fb6674f3f91dffb692">spritetexcoord2f</a>[4*2] = {0, 1, 0, 0, 1, 0, 1, 1};</div>
<div class="line"><a id="l04481" name="l04481"></a><span class="lineno"> 4481</span> </div>
<div class="foldopen" id="foldopen04482" data-start="{" data-end="}">
<div class="line"><a id="l04482" name="l04482"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#af6dbcb2e63297485b66f235a60ae39cb"> 4482</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#af6dbcb2e63297485b66f235a60ae39cb">R_DrawCorona</a>(<a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight, <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cscale</a>, <span class="keywordtype">float</span> scale)</div>
<div class="line"><a id="l04483" name="l04483"></a><span class="lineno"> 4483</span>{</div>
<div class="line"><a id="l04484" name="l04484"></a><span class="lineno"> 4484</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>;</div>
<div class="line"><a id="l04485" name="l04485"></a><span class="lineno"> 4485</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">occlude</a> = 0;</div>
<div class="line"><a id="l04486" name="l04486"></a><span class="lineno"> 4486</span> </div>
<div class="line"><a id="l04487" name="l04487"></a><span class="lineno"> 4487</span>    <span class="comment">// now we have to check the query result</span></div>
<div class="line"><a id="l04488" name="l04488"></a><span class="lineno"> 4488</span>    <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a6f77db5ffb8d85d3cef6e9e77c7533a9">corona_queryindex_visiblepixels</a>)</div>
<div class="line"><a id="l04489" name="l04489"></a><span class="lineno"> 4489</span>    {</div>
<div class="line"><a id="l04490" name="l04490"></a><span class="lineno"> 4490</span>        <span class="keywordflow">switch</span>(<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a77ee51e56202df8258781a0aa1dc1a2d">renderpath</a>)</div>
<div class="line"><a id="l04491" name="l04491"></a><span class="lineno"> 4491</span>        {</div>
<div class="line"><a id="l04492" name="l04492"></a><span class="lineno"> 4492</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafcfef4a81b353e6ad9bfee33f0c6076a">RENDERPATH_GL32</a>:</div>
<div class="line"><a id="l04493" name="l04493"></a><span class="lineno"> 4493</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafbfa84c8848e1c609691f76637da178b">RENDERPATH_GLES2</a>:</div>
<div class="line"><a id="l04494" name="l04494"></a><span class="lineno"> 4494</span><span class="preprocessor">#ifndef USE_GLES2</span></div>
<div class="line"><a id="l04495" name="l04495"></a><span class="lineno"> 4495</span>            <span class="comment">// store the pixel counts into a uniform buffer for the shader to</span></div>
<div class="line"><a id="l04496" name="l04496"></a><span class="lineno"> 4496</span>            <span class="comment">// use - we&#39;ll never know the results on the cpu without</span></div>
<div class="line"><a id="l04497" name="l04497"></a><span class="lineno"> 4497</span>            <span class="comment">// synchronizing and we don&#39;t want that</span></div>
<div class="line"><a id="l04498" name="l04498"></a><span class="lineno"> 4498</span><span class="preprocessor">#define BUFFER_OFFSET(i)    ((GLint *)((unsigned char*)NULL + (i)))</span></div>
<div class="line"><a id="l04499" name="l04499"></a><span class="lineno"> 4499</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#ae814fd537c2109a56aa92fc4c493f616">r_shadow_occlusion_buf</a>) {</div>
<div class="line"><a id="l04500" name="l04500"></a><span class="lineno"> 4500</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglGenBuffers</a>(1, &amp;<a class="code hl_variable" href="r__shadow_8c.html#ae814fd537c2109a56aa92fc4c493f616">r_shadow_occlusion_buf</a>);</div>
<div class="line"><a id="l04501" name="l04501"></a><span class="lineno"> 4501</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglBindBuffer</a>(<a class="code hl_define" href="glquake_8h.html#aa418a9e2bb6b3683dfbe5cda953f0e45">GL_QUERY_BUFFER</a>, <a class="code hl_variable" href="r__shadow_8c.html#ae814fd537c2109a56aa92fc4c493f616">r_shadow_occlusion_buf</a>);</div>
<div class="line"><a id="l04502" name="l04502"></a><span class="lineno"> 4502</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglBufferData</a>(<a class="code hl_define" href="glquake_8h.html#aa418a9e2bb6b3683dfbe5cda953f0e45">GL_QUERY_BUFFER</a>, 8, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="glquake_8h.html#ad35941788a5c3ad4a19c3263fff294e8">GL_DYNAMIC_COPY</a>);</div>
<div class="line"><a id="l04503" name="l04503"></a><span class="lineno"> 4503</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04504" name="l04504"></a><span class="lineno"> 4504</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglBindBuffer</a>(<a class="code hl_define" href="glquake_8h.html#aa418a9e2bb6b3683dfbe5cda953f0e45">GL_QUERY_BUFFER</a>, <a class="code hl_variable" href="r__shadow_8c.html#ae814fd537c2109a56aa92fc4c493f616">r_shadow_occlusion_buf</a>);</div>
<div class="line"><a id="l04505" name="l04505"></a><span class="lineno"> 4505</span>            }</div>
<div class="line"><a id="l04506" name="l04506"></a><span class="lineno"> 4506</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglGetQueryObjectiv</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a6f77db5ffb8d85d3cef6e9e77c7533a9">corona_queryindex_visiblepixels</a>, <a class="code hl_define" href="glquake_8h.html#a5f22b4318913632dfd529bc7536fa1d6">GL_QUERY_RESULT</a>, <a class="code hl_define" href="r__shadow_8c.html#a063a3af905ecefe83d76ca3f0fe0653e">BUFFER_OFFSET</a>(0));</div>
<div class="line"><a id="l04507" name="l04507"></a><span class="lineno"> 4507</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglGetQueryObjectiv</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#af545270adf7443a1d5e85912b1fc17a2">corona_queryindex_allpixels</a>, <a class="code hl_define" href="glquake_8h.html#a5f22b4318913632dfd529bc7536fa1d6">GL_QUERY_RESULT</a>, <a class="code hl_define" href="r__shadow_8c.html#a063a3af905ecefe83d76ca3f0fe0653e">BUFFER_OFFSET</a>(4));</div>
<div class="line"><a id="l04508" name="l04508"></a><span class="lineno"> 4508</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglBindBufferBase</a>(<a class="code hl_define" href="glquake_8h.html#a1c4b88c4550196906d866a7dbda7bce8">GL_UNIFORM_BUFFER</a>, 0, <a class="code hl_variable" href="r__shadow_8c.html#ae814fd537c2109a56aa92fc4c493f616">r_shadow_occlusion_buf</a>);</div>
<div class="line"><a id="l04509" name="l04509"></a><span class="lineno"> 4509</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">occlude</a> = <a class="code hl_define" href="model__brush_8h.html#a87ced6e5f1513ab17d69df9bfe55bb78">MATERIALFLAG_OCCLUDE</a>;</div>
<div class="line"><a id="l04510" name="l04510"></a><span class="lineno"> 4510</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cscale</a> *= rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b9ae30e140634dfb0f1543ca4f5cf4c">corona_visibility</a>;</div>
<div class="line"><a id="l04511" name="l04511"></a><span class="lineno"> 4511</span>            <a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l04512" name="l04512"></a><span class="lineno"> 4512</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04513" name="l04513"></a><span class="lineno"> 4513</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l04514" name="l04514"></a><span class="lineno"> 4514</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04515" name="l04515"></a><span class="lineno"> 4515</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04516" name="l04516"></a><span class="lineno"> 4516</span>        }</div>
<div class="line"><a id="l04517" name="l04517"></a><span class="lineno"> 4517</span>    }</div>
<div class="line"><a id="l04518" name="l04518"></a><span class="lineno"> 4518</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l04519" name="l04519"></a><span class="lineno"> 4519</span>    {</div>
<div class="line"><a id="l04520" name="l04520"></a><span class="lineno"> 4520</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cl__collision_8c.html#afaf23d22697d0f04fa66b5ee89b6157d">CL_Cache_TraceLineSurfaces</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, <a class="code hl_define" href="world_8h.html#ac85dd5b7c1be8faf715803a4a921a313">MOVE_NORMAL</a>, <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a>, 0, <a class="code hl_define" href="model__brush_8h.html#a92eb2c00b3276aef285cf43b305a43da">MATERIALFLAGMASK_TRANSLUCENT</a>).<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a> &lt; 1)</div>
<div class="line"><a id="l04521" name="l04521"></a><span class="lineno"> 4521</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04522" name="l04522"></a><span class="lineno"> 4522</span>    }</div>
<div class="line"><a id="l04523" name="l04523"></a><span class="lineno"> 4523</span>    <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cscale</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l04524" name="l04524"></a><span class="lineno"> 4524</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>) &gt; (1.0f / 256.0f))</div>
<div class="line"><a id="l04525" name="l04525"></a><span class="lineno"> 4525</span>    {</div>
<div class="line"><a id="l04526" name="l04526"></a><span class="lineno"> 4526</span>        <span class="keywordtype">float</span> vertex3f[12];</div>
<div class="line"><a id="l04527" name="l04527"></a><span class="lineno"> 4527</span>        <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">negated</a> = (<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] + <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] + <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] &lt; 0);</div>
<div class="line"><a id="l04528" name="l04528"></a><span class="lineno"> 4528</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">negated</a>)</div>
<div class="line"><a id="l04529" name="l04529"></a><span class="lineno"> 4529</span>        {</div>
<div class="line"><a id="l04530" name="l04530"></a><span class="lineno"> 4530</span>            <a class="code hl_define" href="mathlib_8h.html#a28f9f1fe5f50e359e016f7e4e04f8cf1">VectorNegate</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l04531" name="l04531"></a><span class="lineno"> 4531</span>            <a class="code hl_function" href="gl__backend_8c.html#a23c98d4ba5a86391a8ecb2363252e874">GL_BlendEquationSubtract</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l04532" name="l04532"></a><span class="lineno"> 4532</span>        }</div>
<div class="line"><a id="l04533" name="l04533"></a><span class="lineno"> 4533</span>        <a class="code hl_function" href="gl__rmain_8c.html#ab095e44ba81e415f6b29e8a3bf0fb7e7">R_CalcSprite_Vertex3f</a>(vertex3f, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a3310bef30f5ee5f2e5504e6abbabc4f4">right</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae1bd25ebdf975e2daba47f7367d8323b">up</a>, scale, -scale, -scale, scale);</div>
<div class="line"><a id="l04534" name="l04534"></a><span class="lineno"> 4534</span>        <a class="code hl_function" href="gl__rmain_8c.html#af224655903019505e9e0a05624281315">RSurf_ActiveCustomEntity</a>(&amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>, &amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>, <a class="code hl_define" href="protocol_8h.html#ae2c7aecd2cda4506a82ed52edf2124fe">RENDER_NODEPTHTEST</a>, 0, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0], <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1], <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2], 1, 4, vertex3f, <a class="code hl_variable" href="r__shadow_8c.html#a02387b9e26d871fb6674f3f91dffb692">spritetexcoord2f</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 2, <a class="code hl_variable" href="gl__backend_8c.html#a5691f389c9e452441b81b36bd486580e">polygonelement3i</a>, <a class="code hl_variable" href="gl__backend_8c.html#a2df502b95da3bc0f89296df1e7ade4d0">polygonelement3s</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l04535" name="l04535"></a><span class="lineno"> 4535</span>        <a class="code hl_function" href="gl__rmain_8c.html#a36f19cdd7a555b8122917b8c887d7750">R_DrawCustomSurface</a>(<a class="code hl_variable" href="r__shadow_8c.html#aed09fab0c0feac12235fc7fd4be8ab96">r_shadow_lightcorona</a>, &amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>, <a class="code hl_define" href="model__brush_8h.html#a01917ff9223bf5f764ea1c9150d8b72d">MATERIALFLAG_ADD</a> | <a class="code hl_define" href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a> | <a class="code hl_define" href="model__brush_8h.html#a15a12ade8170812bc1a3b5455f26e114">MATERIALFLAG_FULLBRIGHT</a> | <a class="code hl_define" href="model__brush_8h.html#af441c2813089fb0c1b35a05e888369be">MATERIALFLAG_NOCULLFACE</a> | <a class="code hl_define" href="model__brush_8h.html#a9253d0a5f545e0dbe55388deee9624ec">MATERIALFLAG_NODEPTHTEST</a> | <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">occlude</a>, 0, 4, 0, 2, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l04536" name="l04536"></a><span class="lineno"> 4536</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">negated</a>)</div>
<div class="line"><a id="l04537" name="l04537"></a><span class="lineno"> 4537</span>            <a class="code hl_function" href="gl__backend_8c.html#a23c98d4ba5a86391a8ecb2363252e874">GL_BlendEquationSubtract</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l04538" name="l04538"></a><span class="lineno"> 4538</span>    }</div>
<div class="line"><a id="l04539" name="l04539"></a><span class="lineno"> 4539</span>}</div>
</div>
<div class="line"><a id="l04540" name="l04540"></a><span class="lineno"> 4540</span> </div>
<div class="foldopen" id="foldopen04541" data-start="{" data-end="}">
<div class="line"><a id="l04541" name="l04541"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac15da7c84d84c53979d4b9d1a9302d67"> 4541</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ac15da7c84d84c53979d4b9d1a9302d67">R_Shadow_DrawCoronas</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l04542" name="l04542"></a><span class="lineno"> 4542</span>{</div>
<div class="line"><a id="l04543" name="l04543"></a><span class="lineno"> 4543</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, flag;</div>
<div class="line"><a id="l04544" name="l04544"></a><span class="lineno"> 4544</span>    <a class="code hl_typedef" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">usequery</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04545" name="l04545"></a><span class="lineno"> 4545</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>;</div>
<div class="line"><a id="l04546" name="l04546"></a><span class="lineno"> 4546</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light;</div>
<div class="line"><a id="l04547" name="l04547"></a><span class="lineno"> 4547</span>    <a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight;</div>
<div class="line"><a id="l04548" name="l04548"></a><span class="lineno"> 4548</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;</div>
<div class="line"><a id="l04549" name="l04549"></a><span class="lineno"> 4549</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a59782962755e6de424ec4559cf4577a3">r_coronas</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> &lt; (1.0f / 256.0f) &amp;&amp; !<a class="code hl_variable" href="r__shadow_8c.html#afdc165beb3e731178a1ba98872bee3b8">gl_flashblend</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l04550" name="l04550"></a><span class="lineno"> 4550</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04551" name="l04551"></a><span class="lineno"> 4551</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a>.<a class="code hl_variable" href="structr__framebufferstate__t.html#a7bb7258ead2e059a68d6cb6109e8c2e4">water</a>.<a class="code hl_variable" href="structr__waterstate__t.html#a0f912ea33e125b99cfd8372d10ef4863">renderingscene</a>)</div>
<div class="line"><a id="l04552" name="l04552"></a><span class="lineno"> 4552</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04553" name="l04553"></a><span class="lineno"> 4553</span>    flag = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ad6fc2a07d8d706f5daf13c5849db84fc">rtworld</a> ? <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a> : <a class="code hl_define" href="client_8h.html#a02b341fb62e7f8268a5f7f684ab0f2f2">LIGHTFLAG_NORMALMODE</a>;</div>
<div class="line"><a id="l04554" name="l04554"></a><span class="lineno"> 4554</span>    <a class="code hl_function" href="gl__backend_8h.html#a13799234825714fe81a6a09d9c9c0548">R_EntityMatrix</a>(&amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>);</div>
<div class="line"><a id="l04555" name="l04555"></a><span class="lineno"> 4555</span> </div>
<div class="line"><a id="l04556" name="l04556"></a><span class="lineno"> 4556</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> = <a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>); <span class="comment">// checked</span></div>
<div class="line"><a id="l04557" name="l04557"></a><span class="lineno"> 4557</span> </div>
<div class="line"><a id="l04558" name="l04558"></a><span class="lineno"> 4558</span>    <span class="comment">// check occlusion of coronas, using occlusion queries or raytraces</span></div>
<div class="line"><a id="l04559" name="l04559"></a><span class="lineno"> 4559</span>    <a class="code hl_variable" href="gl__rmain_8c.html#a84ee03d338f553e5d384e10073d105dd">r_numqueries</a> = 0;</div>
<div class="line"><a id="l04560" name="l04560"></a><span class="lineno"> 4560</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a77ee51e56202df8258781a0aa1dc1a2d">renderpath</a>)</div>
<div class="line"><a id="l04561" name="l04561"></a><span class="lineno"> 4561</span>    {</div>
<div class="line"><a id="l04562" name="l04562"></a><span class="lineno"> 4562</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafcfef4a81b353e6ad9bfee33f0c6076a">RENDERPATH_GL32</a>:</div>
<div class="line"><a id="l04563" name="l04563"></a><span class="lineno"> 4563</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafbfa84c8848e1c609691f76637da178b">RENDERPATH_GLES2</a>:</div>
<div class="line"><a id="l04564" name="l04564"></a><span class="lineno"> 4564</span>        <span class="comment">// buffer binding target GL_QUERY_BUFFER: Core since version 4.4</span></div>
<div class="line"><a id="l04565" name="l04565"></a><span class="lineno"> 4565</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">usequery</a> = <a class="code hl_variable" href="r__shadow_8c.html#accca61ee7412c65bb90ee0c7c09e6949">r_coronas_occlusionquery</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &amp;&amp; <a class="code hl_variable" href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a>.<a class="code hl_variable" href="structviddef__t.html#a993a26a349fe3edd4be4cc65b42d261e">support</a>.<a class="code hl_variable" href="structviddef__support__t.html#ab5ad9719e8b68b38021df72a87d37ab2">glversion</a> &gt;= 44;</div>
<div class="line"><a id="l04566" name="l04566"></a><span class="lineno"> 4566</span><span class="preprocessor">#ifndef USE_GLES2</span></div>
<div class="line"><a id="l04567" name="l04567"></a><span class="lineno"> 4567</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">usequery</a>)</div>
<div class="line"><a id="l04568" name="l04568"></a><span class="lineno"> 4568</span>        {</div>
<div class="line"><a id="l04569" name="l04569"></a><span class="lineno"> 4569</span>            <a class="code hl_function" href="gl__backend_8c.html#a2a511f73b51c9eca7a2e20b21b543944">GL_ColorMask</a>(0,0,0,0);</div>
<div class="line"><a id="l04570" name="l04570"></a><span class="lineno"> 4570</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#a1fc9307fe84d14cbfeebbf3d59ecef25">r_maxqueries</a> &lt; ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> + <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a0d2e420f14635b0aff07275fa6b74d82">numlights</a>) * 2)</div>
<div class="line"><a id="l04571" name="l04571"></a><span class="lineno"> 4571</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#a1fc9307fe84d14cbfeebbf3d59ecef25">r_maxqueries</a> &lt; <a class="code hl_define" href="qdefs_8h.html#accb2d83fbdb6bb14a39cf196f893b92e">MAX_OCCLUSION_QUERIES</a>)</div>
<div class="line"><a id="l04572" name="l04572"></a><span class="lineno"> 4572</span>            {</div>
<div class="line"><a id="l04573" name="l04573"></a><span class="lineno"> 4573</span>                <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code hl_variable" href="gl__rmain_8c.html#a1fc9307fe84d14cbfeebbf3d59ecef25">r_maxqueries</a>;</div>
<div class="line"><a id="l04574" name="l04574"></a><span class="lineno"> 4574</span>                <a class="code hl_variable" href="gl__rmain_8c.html#a1fc9307fe84d14cbfeebbf3d59ecef25">r_maxqueries</a> = ((<span class="keywordtype">unsigned</span> <a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> + <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a0d2e420f14635b0aff07275fa6b74d82">numlights</a>) * 4;</div>
<div class="line"><a id="l04575" name="l04575"></a><span class="lineno"> 4575</span>                <a class="code hl_variable" href="gl__rmain_8c.html#a1fc9307fe84d14cbfeebbf3d59ecef25">r_maxqueries</a> = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a1fc9307fe84d14cbfeebbf3d59ecef25">r_maxqueries</a>, <a class="code hl_define" href="qdefs_8h.html#accb2d83fbdb6bb14a39cf196f893b92e">MAX_OCCLUSION_QUERIES</a>);</div>
<div class="line"><a id="l04576" name="l04576"></a><span class="lineno"> 4576</span>                <a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l04577" name="l04577"></a><span class="lineno"> 4577</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">qglGenQueries</a>(<a class="code hl_variable" href="gl__rmain_8c.html#a1fc9307fe84d14cbfeebbf3d59ecef25">r_maxqueries</a> - <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code hl_variable" href="gl__rmain_8c.html#aff92062082d530fb0baab83bf5269420">r_queries</a> + <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a id="l04578" name="l04578"></a><span class="lineno"> 4578</span>                <a class="code hl_define" href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div>
<div class="line"><a id="l04579" name="l04579"></a><span class="lineno"> 4579</span>            }</div>
<div class="line"><a id="l04580" name="l04580"></a><span class="lineno"> 4580</span>            <a class="code hl_function" href="gl__rmain_8c.html#ab91218d4fb985f2c4ffc9622a4e28fe2">RSurf_ActiveModelEntity</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ae4dfd0ad65bd2cecac4d12f329e331ca">worldentity</a>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l04581" name="l04581"></a><span class="lineno"> 4581</span>            <a class="code hl_function" href="gl__backend_8c.html#aca3e3f9f03357db16ce588778b258020">GL_BlendFunc</a>(<a class="code hl_define" href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>, <a class="code hl_define" href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>);</div>
<div class="line"><a id="l04582" name="l04582"></a><span class="lineno"> 4582</span>            <a class="code hl_function" href="gl__backend_8c.html#a28f12ab6551743428797e62bf183ebde">GL_CullFace</a>(<a class="code hl_define" href="glquake_8h.html#a089a3736e5280b9c7cc50129e2659974">GL_NONE</a>);</div>
<div class="line"><a id="l04583" name="l04583"></a><span class="lineno"> 4583</span>            <a class="code hl_function" href="gl__backend_8c.html#a369132de82d4015a01e164c63255403f">GL_DepthMask</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l04584" name="l04584"></a><span class="lineno"> 4584</span>            <a class="code hl_function" href="gl__backend_8c.html#a736b5d13ba47fb7de5dafb73b3026e1a">GL_DepthRange</a>(0, 1);</div>
<div class="line"><a id="l04585" name="l04585"></a><span class="lineno"> 4585</span>            <a class="code hl_function" href="gl__backend_8c.html#a888e5667bc275712bc1407f459c9e67e">GL_PolygonOffset</a>(0, 0);</div>
<div class="line"><a id="l04586" name="l04586"></a><span class="lineno"> 4586</span>            <a class="code hl_function" href="gl__backend_8c.html#a712c082566b5939b265260c5cd929033">GL_DepthTest</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l04587" name="l04587"></a><span class="lineno"> 4587</span>            <a class="code hl_function" href="gl__backend_8c.html#ab0845d5ed92717ad1158e8a559db073d">R_Mesh_ResetTextureState</a>();</div>
<div class="line"><a id="l04588" name="l04588"></a><span class="lineno"> 4588</span>            <a class="code hl_function" href="gl__rmain_8c.html#a0948c688f9095e3c6e7a16c53636696f">R_SetupShader_Generic_NoTexture</a>(<span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l04589" name="l04589"></a><span class="lineno"> 4589</span>        }</div>
<div class="line"><a id="l04590" name="l04590"></a><span class="lineno"> 4590</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04591" name="l04591"></a><span class="lineno"> 4591</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04592" name="l04592"></a><span class="lineno"> 4592</span>    }</div>
<div class="line"><a id="l04593" name="l04593"></a><span class="lineno"> 4593</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l04594" name="l04594"></a><span class="lineno"> 4594</span>    {</div>
<div class="line"><a id="l04595" name="l04595"></a><span class="lineno"> 4595</span>        light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l04596" name="l04596"></a><span class="lineno"> 4596</span>        <span class="keywordflow">if</span> (!light)</div>
<div class="line"><a id="l04597" name="l04597"></a><span class="lineno"> 4597</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04598" name="l04598"></a><span class="lineno"> 4598</span>        rtlight = &amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>;</div>
<div class="line"><a id="l04599" name="l04599"></a><span class="lineno"> 4599</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b9ae30e140634dfb0f1543ca4f5cf4c">corona_visibility</a> = 0;</div>
<div class="line"><a id="l04600" name="l04600"></a><span class="lineno"> 4600</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a6f77db5ffb8d85d3cef6e9e77c7533a9">corona_queryindex_visiblepixels</a> = 0;</div>
<div class="line"><a id="l04601" name="l04601"></a><span class="lineno"> 4601</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#af545270adf7443a1d5e85912b1fc17a2">corona_queryindex_allpixels</a> = 0;</div>
<div class="line"><a id="l04602" name="l04602"></a><span class="lineno"> 4602</span>        <span class="keywordflow">if</span> (!(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a78fc39a7fe3cda236c6209eebcde22c9">flags</a> &amp; flag))</div>
<div class="line"><a id="l04603" name="l04603"></a><span class="lineno"> 4603</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04604" name="l04604"></a><span class="lineno"> 4604</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a613df3791630f957d8826553a01f9a83">corona</a> &lt;= 0)</div>
<div class="line"><a id="l04605" name="l04605"></a><span class="lineno"> 4605</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04606" name="l04606"></a><span class="lineno"> 4606</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a374db1ed8684badcb0995878fc9b4300">r_shadow_debuglight</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &gt;= 0 &amp;&amp; <a class="code hl_variable" href="r__shadow_8c.html#a374db1ed8684badcb0995878fc9b4300">r_shadow_debuglight</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> != (<span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>)</div>
<div class="line"><a id="l04607" name="l04607"></a><span class="lineno"> 4607</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04608" name="l04608"></a><span class="lineno"> 4608</span>        <a class="code hl_function" href="r__shadow_8c.html#ab9700b21ff398060ec0f612ba4b22de3">R_BeginCoronaQuery</a>(rtlight, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a> * rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa823bfc56c4908849e655db66dbdab89">coronasizescale</a> * <a class="code hl_variable" href="r__shadow_8c.html#afc049e9c0dc0d7e168e556a238dc2fbf">r_coronas_occlusionsizescale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">usequery</a>);</div>
<div class="line"><a id="l04609" name="l04609"></a><span class="lineno"> 4609</span>    }</div>
<div class="line"><a id="l04610" name="l04610"></a><span class="lineno"> 4610</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a0d2e420f14635b0aff07275fa6b74d82">numlights</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04611" name="l04611"></a><span class="lineno"> 4611</span>    {</div>
<div class="line"><a id="l04612" name="l04612"></a><span class="lineno"> 4612</span>        rtlight = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aec6438e3812387c92681237d33bfe46f">lights</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l04613" name="l04613"></a><span class="lineno"> 4613</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b9ae30e140634dfb0f1543ca4f5cf4c">corona_visibility</a> = 0;</div>
<div class="line"><a id="l04614" name="l04614"></a><span class="lineno"> 4614</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a6f77db5ffb8d85d3cef6e9e77c7533a9">corona_queryindex_visiblepixels</a> = 0;</div>
<div class="line"><a id="l04615" name="l04615"></a><span class="lineno"> 4615</span>        rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#af545270adf7443a1d5e85912b1fc17a2">corona_queryindex_allpixels</a> = 0;</div>
<div class="line"><a id="l04616" name="l04616"></a><span class="lineno"> 4616</span>        <span class="keywordflow">if</span> (!(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a78fc39a7fe3cda236c6209eebcde22c9">flags</a> &amp; flag))</div>
<div class="line"><a id="l04617" name="l04617"></a><span class="lineno"> 4617</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04618" name="l04618"></a><span class="lineno"> 4618</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a613df3791630f957d8826553a01f9a83">corona</a> &lt;= 0)</div>
<div class="line"><a id="l04619" name="l04619"></a><span class="lineno"> 4619</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04620" name="l04620"></a><span class="lineno"> 4620</span>        <a class="code hl_function" href="r__shadow_8c.html#ab9700b21ff398060ec0f612ba4b22de3">R_BeginCoronaQuery</a>(rtlight, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a> * rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa823bfc56c4908849e655db66dbdab89">coronasizescale</a> * <a class="code hl_variable" href="r__shadow_8c.html#afc049e9c0dc0d7e168e556a238dc2fbf">r_coronas_occlusionsizescale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">usequery</a>);</div>
<div class="line"><a id="l04621" name="l04621"></a><span class="lineno"> 4621</span>    }</div>
<div class="line"><a id="l04622" name="l04622"></a><span class="lineno"> 4622</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">usequery</a>)</div>
<div class="line"><a id="l04623" name="l04623"></a><span class="lineno"> 4623</span>        <a class="code hl_function" href="gl__backend_8c.html#a2a511f73b51c9eca7a2e20b21b543944">GL_ColorMask</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ab7a5e64bc6069ece5f689252683d5e9b">colormask</a>[0], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ab7a5e64bc6069ece5f689252683d5e9b">colormask</a>[1], <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ab7a5e64bc6069ece5f689252683d5e9b">colormask</a>[2], 1);</div>
<div class="line"><a id="l04624" name="l04624"></a><span class="lineno"> 4624</span> </div>
<div class="line"><a id="l04625" name="l04625"></a><span class="lineno"> 4625</span>    <span class="comment">// now draw the coronas using the query data for intensity info</span></div>
<div class="line"><a id="l04626" name="l04626"></a><span class="lineno"> 4626</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l04627" name="l04627"></a><span class="lineno"> 4627</span>    {</div>
<div class="line"><a id="l04628" name="l04628"></a><span class="lineno"> 4628</span>        light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l04629" name="l04629"></a><span class="lineno"> 4629</span>        <span class="keywordflow">if</span> (!light)</div>
<div class="line"><a id="l04630" name="l04630"></a><span class="lineno"> 4630</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04631" name="l04631"></a><span class="lineno"> 4631</span>        rtlight = &amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>;</div>
<div class="line"><a id="l04632" name="l04632"></a><span class="lineno"> 4632</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b9ae30e140634dfb0f1543ca4f5cf4c">corona_visibility</a> &lt;= 0)</div>
<div class="line"><a id="l04633" name="l04633"></a><span class="lineno"> 4633</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04634" name="l04634"></a><span class="lineno"> 4634</span>        <a class="code hl_function" href="r__shadow_8c.html#af6dbcb2e63297485b66f235a60ae39cb">R_DrawCorona</a>(rtlight, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a613df3791630f957d8826553a01f9a83">corona</a> * <a class="code hl_variable" href="r__shadow_8c.html#a59782962755e6de424ec4559cf4577a3">r_coronas</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * 0.25f, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a> * rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa823bfc56c4908849e655db66dbdab89">coronasizescale</a>);</div>
<div class="line"><a id="l04635" name="l04635"></a><span class="lineno"> 4635</span>    }</div>
<div class="line"><a id="l04636" name="l04636"></a><span class="lineno"> 4636</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a0d2e420f14635b0aff07275fa6b74d82">numlights</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l04637" name="l04637"></a><span class="lineno"> 4637</span>    {</div>
<div class="line"><a id="l04638" name="l04638"></a><span class="lineno"> 4638</span>        rtlight = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aec6438e3812387c92681237d33bfe46f">lights</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l04639" name="l04639"></a><span class="lineno"> 4639</span>        <span class="keywordflow">if</span> (rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a1b9ae30e140634dfb0f1543ca4f5cf4c">corona_visibility</a> &lt;= 0)</div>
<div class="line"><a id="l04640" name="l04640"></a><span class="lineno"> 4640</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04641" name="l04641"></a><span class="lineno"> 4641</span>        <a class="code hl_function" href="r__shadow_8c.html#af6dbcb2e63297485b66f235a60ae39cb">R_DrawCorona</a>(rtlight, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a613df3791630f957d8826553a01f9a83">corona</a> * <a class="code hl_variable" href="r__shadow_8c.html#a59782962755e6de424ec4559cf4577a3">r_coronas</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * 0.25f, rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a> * rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#aa823bfc56c4908849e655db66dbdab89">coronasizescale</a>);</div>
<div class="line"><a id="l04642" name="l04642"></a><span class="lineno"> 4642</span>    }</div>
<div class="line"><a id="l04643" name="l04643"></a><span class="lineno"> 4643</span>}</div>
</div>
<div class="line"><a id="l04644" name="l04644"></a><span class="lineno"> 4644</span> </div>
<div class="line"><a id="l04645" name="l04645"></a><span class="lineno"> 4645</span> </div>
<div class="line"><a id="l04646" name="l04646"></a><span class="lineno"> 4646</span> </div>
<div class="foldopen" id="foldopen04647" data-start="{" data-end="}">
<div class="line"><a id="l04647" name="l04647"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa576ab139fb12bd530a37b2710500086"> 4647</a></span><span class="keyword">static</span> <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *<a class="code hl_function" href="r__shadow_8c.html#aa576ab139fb12bd530a37b2710500086">R_Shadow_NewWorldLight</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l04648" name="l04648"></a><span class="lineno"> 4648</span>{</div>
<div class="line"><a id="l04649" name="l04649"></a><span class="lineno"> 4649</span>    <span class="keywordflow">return</span> (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *)<a class="code hl_function" href="zone_8c.html#a6e8351ce990cc9c3c7eb1c6ac8c91921">Mem_ExpandableArray_AllocRecord</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>);</div>
<div class="line"><a id="l04650" name="l04650"></a><span class="lineno"> 4650</span>}</div>
</div>
<div class="line"><a id="l04651" name="l04651"></a><span class="lineno"> 4651</span> </div>
<div class="foldopen" id="foldopen04652" data-start="{" data-end="}">
<div class="line"><a id="l04652" name="l04652"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#af8b412ff853a18ec537a9a8f40c12b29"> 4652</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#af8b412ff853a18ec537a9a8f40c12b29">R_Shadow_UpdateWorldLight</a>(<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light, <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> origin, <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> angles, <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> radius, <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> corona, <span class="keywordtype">int</span> style, <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowenable</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *cubemapname, <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> coronasizescale, <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> ambientscale, <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> diffusescale, <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> specularscale, <span class="keywordtype">int</span> flags)</div>
<div class="line"><a id="l04653" name="l04653"></a><span class="lineno"> 4653</span>{</div>
<div class="line"><a id="l04654" name="l04654"></a><span class="lineno"> 4654</span>    <a class="code hl_struct" href="structmatrix4x4__t.html">matrix4x4_t</a> matrix;</div>
<div class="line"><a id="l04655" name="l04655"></a><span class="lineno"> 4655</span> </div>
<div class="line"><a id="l04656" name="l04656"></a><span class="lineno"> 4656</span>    <span class="comment">// note that style is no longer validated here, -1 is used for unstyled lights and &gt;= MAX_LIGHTSTYLES is accepted for sake of editing rtlights files that might be out of bounds but perfectly formatted</span></div>
<div class="line"><a id="l04657" name="l04657"></a><span class="lineno"> 4657</span> </div>
<div class="line"><a id="l04658" name="l04658"></a><span class="lineno"> 4658</span>    <span class="comment">// validate parameters</span></div>
<div class="line"><a id="l04659" name="l04659"></a><span class="lineno"> 4659</span>    <span class="keywordflow">if</span> (!cubemapname)</div>
<div class="line"><a id="l04660" name="l04660"></a><span class="lineno"> 4660</span>        cubemapname = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l04661" name="l04661"></a><span class="lineno"> 4661</span> </div>
<div class="line"><a id="l04662" name="l04662"></a><span class="lineno"> 4662</span>    <span class="comment">// copy to light properties</span></div>
<div class="line"><a id="l04663" name="l04663"></a><span class="lineno"> 4663</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(origin, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>);</div>
<div class="line"><a id="l04664" name="l04664"></a><span class="lineno"> 4664</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[0] = angles[0] - 360 * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(angles[0] / 360);</div>
<div class="line"><a id="l04665" name="l04665"></a><span class="lineno"> 4665</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[1] = angles[1] - 360 * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(angles[1] / 360);</div>
<div class="line"><a id="l04666" name="l04666"></a><span class="lineno"> 4666</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[2] = angles[2] - 360 * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(angles[2] / 360);</div>
<div class="line"><a id="l04667" name="l04667"></a><span class="lineno"> 4667</span>    <span class="comment">/*</span></div>
<div class="line"><a id="l04668" name="l04668"></a><span class="lineno"> 4668</span><span class="comment">    light-&gt;color[0] = max(color[0], 0);</span></div>
<div class="line"><a id="l04669" name="l04669"></a><span class="lineno"> 4669</span><span class="comment">    light-&gt;color[1] = max(color[1], 0);</span></div>
<div class="line"><a id="l04670" name="l04670"></a><span class="lineno"> 4670</span><span class="comment">    light-&gt;color[2] = max(color[2], 0);</span></div>
<div class="line"><a id="l04671" name="l04671"></a><span class="lineno"> 4671</span><span class="comment">    */</span></div>
<div class="line"><a id="l04672" name="l04672"></a><span class="lineno"> 4672</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[0] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0];</div>
<div class="line"><a id="l04673" name="l04673"></a><span class="lineno"> 4673</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[1] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1];</div>
<div class="line"><a id="l04674" name="l04674"></a><span class="lineno"> 4674</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[2] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2];</div>
<div class="line"><a id="l04675" name="l04675"></a><span class="lineno"> 4675</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a> = <a class="code hl_define" href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a>(radius, 0);</div>
<div class="line"><a id="l04676" name="l04676"></a><span class="lineno"> 4676</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a> = style;</div>
<div class="line"><a id="l04677" name="l04677"></a><span class="lineno"> 4677</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadowenable</a>;</div>
<div class="line"><a id="l04678" name="l04678"></a><span class="lineno"> 4678</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a> = corona;</div>
<div class="line"><a id="l04679" name="l04679"></a><span class="lineno"> 4679</span>    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(light-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>, cubemapname, <span class="keyword">sizeof</span>(light-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>));</div>
<div class="line"><a id="l04680" name="l04680"></a><span class="lineno"> 4680</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">coronasizescale</a> = coronasizescale;</div>
<div class="line"><a id="l04681" name="l04681"></a><span class="lineno"> 4681</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">ambientscale</a> = ambientscale;</div>
<div class="line"><a id="l04682" name="l04682"></a><span class="lineno"> 4682</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">diffusescale</a> = diffusescale;</div>
<div class="line"><a id="l04683" name="l04683"></a><span class="lineno"> 4683</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">specularscale</a> = specularscale;</div>
<div class="line"><a id="l04684" name="l04684"></a><span class="lineno"> 4684</span>    light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a> = flags;</div>
<div class="line"><a id="l04685" name="l04685"></a><span class="lineno"> 4685</span> </div>
<div class="line"><a id="l04686" name="l04686"></a><span class="lineno"> 4686</span>    <span class="comment">// update renderable light data</span></div>
<div class="line"><a id="l04687" name="l04687"></a><span class="lineno"> 4687</span>    <a class="code hl_function" href="matrixlib_8c.html#a80867fbbc3b77b40fb8349d1e694a2de">Matrix4x4_CreateFromQuakeEntity</a>(&amp;matrix, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[0], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[1], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[2], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[0], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[1], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[2], light-&gt;<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a>);</div>
<div class="line"><a id="l04688" name="l04688"></a><span class="lineno"> 4688</span>    <a class="code hl_function" href="r__shadow_8c.html#a808b4850191116867f66c1e6fb2ced6a">R_RTLight_Update</a>(&amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>, <span class="keyword">true</span>, &amp;matrix, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>[0] ? light-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a> : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">coronasizescale</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">ambientscale</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">diffusescale</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">specularscale</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a>);</div>
<div class="line"><a id="l04689" name="l04689"></a><span class="lineno"> 4689</span>}</div>
</div>
<div class="line"><a id="l04690" name="l04690"></a><span class="lineno"> 4690</span> </div>
<div class="foldopen" id="foldopen04691" data-start="{" data-end="}">
<div class="line"><a id="l04691" name="l04691"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#afaad26a7103dc4357b063cbcc81fcb64"> 4691</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#afaad26a7103dc4357b063cbcc81fcb64">R_Shadow_FreeWorldLight</a>(<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light)</div>
<div class="line"><a id="l04692" name="l04692"></a><span class="lineno"> 4692</span>{</div>
<div class="line"><a id="l04693" name="l04693"></a><span class="lineno"> 4693</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a> == light)</div>
<div class="line"><a id="l04694" name="l04694"></a><span class="lineno"> 4694</span>        <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04695" name="l04695"></a><span class="lineno"> 4695</span>    <a class="code hl_function" href="r__shadow_8c.html#a7ea0ca4b83d5a9b2d6168c80253b6324">R_RTLight_Uncompile</a>(&amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>);</div>
<div class="line"><a id="l04696" name="l04696"></a><span class="lineno"> 4696</span>    <a class="code hl_function" href="zone_8c.html#a6809e6e38abd59c5583dc9b83843a7ee">Mem_ExpandableArray_FreeRecord</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, light);</div>
<div class="line"><a id="l04697" name="l04697"></a><span class="lineno"> 4697</span>}</div>
</div>
<div class="line"><a id="l04698" name="l04698"></a><span class="lineno"> 4698</span> </div>
<div class="foldopen" id="foldopen04699" data-start="{" data-end="}">
<div class="line"><a id="l04699" name="l04699"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aa8fe16360e95a6a6658c7519cebf0b97"> 4699</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#aa8fe16360e95a6a6658c7519cebf0b97">R_Shadow_ClearWorldLights</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l04700" name="l04700"></a><span class="lineno"> 4700</span>{</div>
<div class="line"><a id="l04701" name="l04701"></a><span class="lineno"> 4701</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>;</div>
<div class="line"><a id="l04702" name="l04702"></a><span class="lineno"> 4702</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light;</div>
<div class="line"><a id="l04703" name="l04703"></a><span class="lineno"> 4703</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> = <a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>); <span class="comment">// checked</span></div>
<div class="line"><a id="l04704" name="l04704"></a><span class="lineno"> 4704</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l04705" name="l04705"></a><span class="lineno"> 4705</span>    {</div>
<div class="line"><a id="l04706" name="l04706"></a><span class="lineno"> 4706</span>        light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l04707" name="l04707"></a><span class="lineno"> 4707</span>        <span class="keywordflow">if</span> (light)</div>
<div class="line"><a id="l04708" name="l04708"></a><span class="lineno"> 4708</span>            <a class="code hl_function" href="r__shadow_8c.html#afaad26a7103dc4357b063cbcc81fcb64">R_Shadow_FreeWorldLight</a>(light);</div>
<div class="line"><a id="l04709" name="l04709"></a><span class="lineno"> 4709</span>    }</div>
<div class="line"><a id="l04710" name="l04710"></a><span class="lineno"> 4710</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04711" name="l04711"></a><span class="lineno"> 4711</span>}</div>
</div>
<div class="line"><a id="l04712" name="l04712"></a><span class="lineno"> 4712</span> </div>
<div class="foldopen" id="foldopen04713" data-start="{" data-end="}">
<div class="line"><a id="l04713" name="l04713"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0b1626383078bb86e99de41bce584220"> 4713</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a0b1626383078bb86e99de41bce584220">R_Shadow_SelectLight</a>(<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light)</div>
<div class="line"><a id="l04714" name="l04714"></a><span class="lineno"> 4714</span>{</div>
<div class="line"><a id="l04715" name="l04715"></a><span class="lineno"> 4715</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>)</div>
<div class="line"><a id="l04716" name="l04716"></a><span class="lineno"> 4716</span>        <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#af5dad81679e7b427bf826b2bfddf182b">selected</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04717" name="l04717"></a><span class="lineno"> 4717</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a> = light;</div>
<div class="line"><a id="l04718" name="l04718"></a><span class="lineno"> 4718</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>)</div>
<div class="line"><a id="l04719" name="l04719"></a><span class="lineno"> 4719</span>        <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#af5dad81679e7b427bf826b2bfddf182b">selected</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04720" name="l04720"></a><span class="lineno"> 4720</span>}</div>
</div>
<div class="line"><a id="l04721" name="l04721"></a><span class="lineno"> 4721</span> </div>
<div class="foldopen" id="foldopen04722" data-start="{" data-end="}">
<div class="line"><a id="l04722" name="l04722"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a44818a4103882989f8fac7b02fdeaf9c"> 4722</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a44818a4103882989f8fac7b02fdeaf9c">R_Shadow_DrawCursor_TransparentCallback</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *ent, <span class="keyword">const</span> <a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight, <span class="keywordtype">int</span> numsurfaces, <span class="keywordtype">int</span> *surfacelist)</div>
<div class="line"><a id="l04723" name="l04723"></a><span class="lineno"> 4723</span>{</div>
<div class="line"><a id="l04724" name="l04724"></a><span class="lineno"> 4724</span>    <span class="comment">// this is never batched (there can be only one)</span></div>
<div class="line"><a id="l04725" name="l04725"></a><span class="lineno"> 4725</span>    <span class="keywordtype">float</span> vertex3f[12];</div>
<div class="line"><a id="l04726" name="l04726"></a><span class="lineno"> 4726</span>    <a class="code hl_function" href="gl__rmain_8c.html#ab095e44ba81e415f6b29e8a3bf0fb7e7">R_CalcSprite_Vertex3f</a>(vertex3f, <a class="code hl_variable" href="r__shadow_8c.html#a231b12d52440fde590bcee63e4d07d64">r_editlights_cursorlocation</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a3310bef30f5ee5f2e5504e6abbabc4f4">right</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae1bd25ebdf975e2daba47f7367d8323b">up</a>, <a class="code hl_define" href="r__shadow_8c.html#a846335344e4cccc5dad99d5778bd8ed4">EDLIGHTSPRSIZE</a>, -<a class="code hl_define" href="r__shadow_8c.html#a846335344e4cccc5dad99d5778bd8ed4">EDLIGHTSPRSIZE</a>, -<a class="code hl_define" href="r__shadow_8c.html#a846335344e4cccc5dad99d5778bd8ed4">EDLIGHTSPRSIZE</a>, <a class="code hl_define" href="r__shadow_8c.html#a846335344e4cccc5dad99d5778bd8ed4">EDLIGHTSPRSIZE</a>);</div>
<div class="line"><a id="l04727" name="l04727"></a><span class="lineno"> 4727</span>    <a class="code hl_function" href="gl__rmain_8c.html#af224655903019505e9e0a05624281315">RSurf_ActiveCustomEntity</a>(&amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>, &amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>, 0, 0, 1, 1, 1, 1, 4, vertex3f, <a class="code hl_variable" href="r__shadow_8c.html#a02387b9e26d871fb6674f3f91dffb692">spritetexcoord2f</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 2, <a class="code hl_variable" href="gl__backend_8c.html#a5691f389c9e452441b81b36bd486580e">polygonelement3i</a>, <a class="code hl_variable" href="gl__backend_8c.html#a2df502b95da3bc0f89296df1e7ade4d0">polygonelement3s</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l04728" name="l04728"></a><span class="lineno"> 4728</span>    <a class="code hl_function" href="gl__rmain_8c.html#a36f19cdd7a555b8122917b8c887d7750">R_DrawCustomSurface</a>(<a class="code hl_variable" href="r__shadow_8c.html#a77fcab02591cf32e02c8e5651e323d87">r_editlights_sprcursor</a>, &amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>, <a class="code hl_define" href="model__brush_8h.html#a9253d0a5f545e0dbe55388deee9624ec">MATERIALFLAG_NODEPTHTEST</a> | <a class="code hl_define" href="model__brush_8h.html#a226c2113f3731bc223694bd3e391504a">MATERIALFLAG_ALPHA</a> | <a class="code hl_define" href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a> | <a class="code hl_define" href="model__brush_8h.html#a15a12ade8170812bc1a3b5455f26e114">MATERIALFLAG_FULLBRIGHT</a> | <a class="code hl_define" href="model__brush_8h.html#af441c2813089fb0c1b35a05e888369be">MATERIALFLAG_NOCULLFACE</a>, 0, 4, 0, 2, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l04729" name="l04729"></a><span class="lineno"> 4729</span>}</div>
</div>
<div class="line"><a id="l04730" name="l04730"></a><span class="lineno"> 4730</span> </div>
<div class="foldopen" id="foldopen04731" data-start="{" data-end="}">
<div class="line"><a id="l04731" name="l04731"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a99c26d99dad94a24c996fa2602fd940a"> 4731</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a99c26d99dad94a24c996fa2602fd940a">R_Shadow_DrawLightSprite_TransparentCallback</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *ent, <span class="keyword">const</span> <a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight, <span class="keywordtype">int</span> numsurfaces, <span class="keywordtype">int</span> *surfacelist)</div>
<div class="line"><a id="l04732" name="l04732"></a><span class="lineno"> 4732</span>{</div>
<div class="line"><a id="l04733" name="l04733"></a><span class="lineno"> 4733</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>;</div>
<div class="line"><a id="l04734" name="l04734"></a><span class="lineno"> 4734</span>    <span class="keywordtype">float</span> s;</div>
<div class="line"><a id="l04735" name="l04735"></a><span class="lineno"> 4735</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spritecolor</a>;</div>
<div class="line"><a id="l04736" name="l04736"></a><span class="lineno"> 4736</span>    <a class="code hl_struct" href="structskinframe__t.html">skinframe_t</a> *skinframe;</div>
<div class="line"><a id="l04737" name="l04737"></a><span class="lineno"> 4737</span>    <span class="keywordtype">float</span> vertex3f[12];</div>
<div class="line"><a id="l04738" name="l04738"></a><span class="lineno"> 4738</span> </div>
<div class="line"><a id="l04739" name="l04739"></a><span class="lineno"> 4739</span>    <span class="comment">// this is never batched (due to the ent parameter changing every time)</span></div>
<div class="line"><a id="l04740" name="l04740"></a><span class="lineno"> 4740</span>    <span class="comment">// so numsurfaces == 1 and surfacelist[0] == lightnumber</span></div>
<div class="line"><a id="l04741" name="l04741"></a><span class="lineno"> 4741</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *)ent;</div>
<div class="line"><a id="l04742" name="l04742"></a><span class="lineno"> 4742</span>    s = <a class="code hl_define" href="r__shadow_8c.html#a846335344e4cccc5dad99d5778bd8ed4">EDLIGHTSPRSIZE</a>;</div>
<div class="line"><a id="l04743" name="l04743"></a><span class="lineno"> 4743</span> </div>
<div class="line"><a id="l04744" name="l04744"></a><span class="lineno"> 4744</span>    <a class="code hl_function" href="gl__rmain_8c.html#ab095e44ba81e415f6b29e8a3bf0fb7e7">R_CalcSprite_Vertex3f</a>(vertex3f, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a3310bef30f5ee5f2e5504e6abbabc4f4">right</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae1bd25ebdf975e2daba47f7367d8323b">up</a>, s, -s, -s, s);</div>
<div class="line"><a id="l04745" name="l04745"></a><span class="lineno"> 4745</span> </div>
<div class="line"><a id="l04746" name="l04746"></a><span class="lineno"> 4746</span>    <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> = 0.5f;</div>
<div class="line"><a id="l04747" name="l04747"></a><span class="lineno"> 4747</span>    <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>, <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spritecolor</a>);</div>
<div class="line"><a id="l04748" name="l04748"></a><span class="lineno"> 4748</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spritecolor</a>) &lt; 0.1732f)</div>
<div class="line"><a id="l04749" name="l04749"></a><span class="lineno"> 4749</span>        <a class="code hl_define" href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spritecolor</a>, 0.1f, 0.1f, 0.1f);</div>
<div class="line"><a id="l04750" name="l04750"></a><span class="lineno"> 4750</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spritecolor</a>) &gt; 1.0f)</div>
<div class="line"><a id="l04751" name="l04751"></a><span class="lineno"> 4751</span>        <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spritecolor</a>);</div>
<div class="line"><a id="l04752" name="l04752"></a><span class="lineno"> 4752</span> </div>
<div class="line"><a id="l04753" name="l04753"></a><span class="lineno"> 4753</span>    <span class="comment">// draw light sprite</span></div>
<div class="line"><a id="l04754" name="l04754"></a><span class="lineno"> 4754</span>    <span class="keywordflow">if</span> (light-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>[0] &amp;&amp; !light-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a>)</div>
<div class="line"><a id="l04755" name="l04755"></a><span class="lineno"> 4755</span>        skinframe = <a class="code hl_variable" href="r__shadow_8c.html#ae8447729362c0b4859f595ec86e15d6c">r_editlights_sprcubemapnoshadowlight</a>;</div>
<div class="line"><a id="l04756" name="l04756"></a><span class="lineno"> 4756</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (light-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>[0])</div>
<div class="line"><a id="l04757" name="l04757"></a><span class="lineno"> 4757</span>        skinframe = <a class="code hl_variable" href="r__shadow_8c.html#aa8a7722a93e47750076d60e003e825b5">r_editlights_sprcubemaplight</a>;</div>
<div class="line"><a id="l04758" name="l04758"></a><span class="lineno"> 4758</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!light-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a>)</div>
<div class="line"><a id="l04759" name="l04759"></a><span class="lineno"> 4759</span>        skinframe = <a class="code hl_variable" href="r__shadow_8c.html#a23892b3c16ceec91c2a8df49795ec2e2">r_editlights_sprnoshadowlight</a>;</div>
<div class="line"><a id="l04760" name="l04760"></a><span class="lineno"> 4760</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l04761" name="l04761"></a><span class="lineno"> 4761</span>        skinframe = <a class="code hl_variable" href="r__shadow_8c.html#a4996623220b790e7682c23e4de6fc237">r_editlights_sprlight</a>;</div>
<div class="line"><a id="l04762" name="l04762"></a><span class="lineno"> 4762</span> </div>
<div class="line"><a id="l04763" name="l04763"></a><span class="lineno"> 4763</span>    <a class="code hl_function" href="gl__rmain_8c.html#af224655903019505e9e0a05624281315">RSurf_ActiveCustomEntity</a>(&amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>, &amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>, 0, 0, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spritecolor</a>[0], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spritecolor</a>[1], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spritecolor</a>[2], 1, 4, vertex3f, <a class="code hl_variable" href="r__shadow_8c.html#a02387b9e26d871fb6674f3f91dffb692">spritetexcoord2f</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 2, <a class="code hl_variable" href="gl__backend_8c.html#a5691f389c9e452441b81b36bd486580e">polygonelement3i</a>, <a class="code hl_variable" href="gl__backend_8c.html#a2df502b95da3bc0f89296df1e7ade4d0">polygonelement3s</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l04764" name="l04764"></a><span class="lineno"> 4764</span>    <a class="code hl_function" href="gl__rmain_8c.html#a36f19cdd7a555b8122917b8c887d7750">R_DrawCustomSurface</a>(skinframe, &amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>, <a class="code hl_define" href="model__brush_8h.html#a226c2113f3731bc223694bd3e391504a">MATERIALFLAG_ALPHA</a> | <a class="code hl_define" href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a> | <a class="code hl_define" href="model__brush_8h.html#a15a12ade8170812bc1a3b5455f26e114">MATERIALFLAG_FULLBRIGHT</a> | <a class="code hl_define" href="model__brush_8h.html#af441c2813089fb0c1b35a05e888369be">MATERIALFLAG_NOCULLFACE</a>, 0, 4, 0, 2, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l04765" name="l04765"></a><span class="lineno"> 4765</span> </div>
<div class="line"><a id="l04766" name="l04766"></a><span class="lineno"> 4766</span>    <span class="comment">// draw selection sprite if light is selected</span></div>
<div class="line"><a id="l04767" name="l04767"></a><span class="lineno"> 4767</span>    <span class="keywordflow">if</span> (light-&gt;<a class="code hl_variable" href="structdlight__t.html#af5dad81679e7b427bf826b2bfddf182b">selected</a>)</div>
<div class="line"><a id="l04768" name="l04768"></a><span class="lineno"> 4768</span>    {</div>
<div class="line"><a id="l04769" name="l04769"></a><span class="lineno"> 4769</span>        <a class="code hl_function" href="gl__rmain_8c.html#af224655903019505e9e0a05624281315">RSurf_ActiveCustomEntity</a>(&amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>, &amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>, 0, 0, 1, 1, 1, 1, 4, vertex3f, <a class="code hl_variable" href="r__shadow_8c.html#a02387b9e26d871fb6674f3f91dffb692">spritetexcoord2f</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 2, <a class="code hl_variable" href="gl__backend_8c.html#a5691f389c9e452441b81b36bd486580e">polygonelement3i</a>, <a class="code hl_variable" href="gl__backend_8c.html#a2df502b95da3bc0f89296df1e7ade4d0">polygonelement3s</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l04770" name="l04770"></a><span class="lineno"> 4770</span>        <a class="code hl_function" href="gl__rmain_8c.html#a36f19cdd7a555b8122917b8c887d7750">R_DrawCustomSurface</a>(<a class="code hl_variable" href="r__shadow_8c.html#a9941c1f23ab960b05549dacb0426ae71">r_editlights_sprselection</a>, &amp;<a class="code hl_variable" href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a>, <a class="code hl_define" href="model__brush_8h.html#a226c2113f3731bc223694bd3e391504a">MATERIALFLAG_ALPHA</a> | <a class="code hl_define" href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a> | <a class="code hl_define" href="model__brush_8h.html#a15a12ade8170812bc1a3b5455f26e114">MATERIALFLAG_FULLBRIGHT</a> | <a class="code hl_define" href="model__brush_8h.html#af441c2813089fb0c1b35a05e888369be">MATERIALFLAG_NOCULLFACE</a>, 0, 4, 0, 2, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l04771" name="l04771"></a><span class="lineno"> 4771</span>        <span class="comment">// VorteX todo: add normalmode/realtime mode light overlay sprites?</span></div>
<div class="line"><a id="l04772" name="l04772"></a><span class="lineno"> 4772</span>    }</div>
<div class="line"><a id="l04773" name="l04773"></a><span class="lineno"> 4773</span>}</div>
</div>
<div class="line"><a id="l04774" name="l04774"></a><span class="lineno"> 4774</span> </div>
<div class="foldopen" id="foldopen04775" data-start="{" data-end="}">
<div class="line"><a id="l04775" name="l04775"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a1eb35da16c1f26b84c7e7b4817203936"> 4775</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a1eb35da16c1f26b84c7e7b4817203936">R_Shadow_DrawLightSprites</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l04776" name="l04776"></a><span class="lineno"> 4776</span>{</div>
<div class="line"><a id="l04777" name="l04777"></a><span class="lineno"> 4777</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>;</div>
<div class="line"><a id="l04778" name="l04778"></a><span class="lineno"> 4778</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light;</div>
<div class="line"><a id="l04779" name="l04779"></a><span class="lineno"> 4779</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> = <a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>); <span class="comment">// checked</span></div>
<div class="line"><a id="l04780" name="l04780"></a><span class="lineno"> 4780</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l04781" name="l04781"></a><span class="lineno"> 4781</span>    {</div>
<div class="line"><a id="l04782" name="l04782"></a><span class="lineno"> 4782</span>        light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l04783" name="l04783"></a><span class="lineno"> 4783</span>        <span class="keywordflow">if</span> (light)</div>
<div class="line"><a id="l04784" name="l04784"></a><span class="lineno"> 4784</span>            <a class="code hl_function" href="meshqueue_8c.html#a407895e2984e8902bc64d8221e2e6e4d">R_MeshQueue_AddTransparent</a>(<a class="code hl_enumvalue" href="r__qshader_8h.html#a72d5e32663fb1b0c369079ca0be01f37a2a635f265dd33d939e6dcd1482147080">TRANSPARENTSORT_DISTANCE</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>, <a class="code hl_function" href="r__shadow_8c.html#a99c26d99dad94a24c996fa2602fd940a">R_Shadow_DrawLightSprite_TransparentCallback</a>, (<a class="code hl_struct" href="structentity__render__t.html">entity_render_t</a> *)light, 5, &amp;light-&gt;rtlight);</div>
<div class="line"><a id="l04785" name="l04785"></a><span class="lineno"> 4785</span>    }</div>
<div class="line"><a id="l04786" name="l04786"></a><span class="lineno"> 4786</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#afe65ae6d734367fc70f16e1eb6df80c6">r_editlights_lockcursor</a>)</div>
<div class="line"><a id="l04787" name="l04787"></a><span class="lineno"> 4787</span>        <a class="code hl_function" href="meshqueue_8c.html#a407895e2984e8902bc64d8221e2e6e4d">R_MeshQueue_AddTransparent</a>(<a class="code hl_enumvalue" href="r__qshader_8h.html#a72d5e32663fb1b0c369079ca0be01f37a2a635f265dd33d939e6dcd1482147080">TRANSPARENTSORT_DISTANCE</a>, <a class="code hl_variable" href="r__shadow_8c.html#a231b12d52440fde590bcee63e4d07d64">r_editlights_cursorlocation</a>, <a class="code hl_function" href="r__shadow_8c.html#a44818a4103882989f8fac7b02fdeaf9c">R_Shadow_DrawCursor_TransparentCallback</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04788" name="l04788"></a><span class="lineno"> 4788</span>}</div>
</div>
<div class="line"><a id="l04789" name="l04789"></a><span class="lineno"> 4789</span> </div>
<div class="foldopen" id="foldopen04790" data-start="{" data-end="}">
<div class="line"><a id="l04790" name="l04790"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a50c834f5bd9d9a7195c3c89d359c0f44"> 4790</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="r__shadow_8c.html#a50c834f5bd9d9a7195c3c89d359c0f44">R_Shadow_GetRTLightInfo</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>, <span class="keywordtype">float</span> *origin, <span class="keywordtype">float</span> *radius, <span class="keywordtype">float</span> *<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>)</div>
<div class="line"><a id="l04791" name="l04791"></a><span class="lineno"> 4791</span>{</div>
<div class="line"><a id="l04792" name="l04792"></a><span class="lineno"> 4792</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;</div>
<div class="line"><a id="l04793" name="l04793"></a><span class="lineno"> 4793</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light;</div>
<div class="line"><a id="l04794" name="l04794"></a><span class="lineno"> 4794</span>    <a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *rtlight;</div>
<div class="line"><a id="l04795" name="l04795"></a><span class="lineno"> 4795</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> = (<span class="keywordtype">unsigned</span> <a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>);</div>
<div class="line"><a id="l04796" name="l04796"></a><span class="lineno"> 4796</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>)</div>
<div class="line"><a id="l04797" name="l04797"></a><span class="lineno"> 4797</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l04798" name="l04798"></a><span class="lineno"> 4798</span>    light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l04799" name="l04799"></a><span class="lineno"> 4799</span>    <span class="keywordflow">if</span> (!light)</div>
<div class="line"><a id="l04800" name="l04800"></a><span class="lineno"> 4800</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l04801" name="l04801"></a><span class="lineno"> 4801</span>    rtlight = &amp;light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>;</div>
<div class="line"><a id="l04802" name="l04802"></a><span class="lineno"> 4802</span>    <span class="comment">//if (!(rtlight-&gt;flags &amp; flag))</span></div>
<div class="line"><a id="l04803" name="l04803"></a><span class="lineno"> 4803</span>    <span class="comment">//  return 0;</span></div>
<div class="line"><a id="l04804" name="l04804"></a><span class="lineno"> 4804</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, origin);</div>
<div class="line"><a id="l04805" name="l04805"></a><span class="lineno"> 4805</span>    *radius = rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l04806" name="l04806"></a><span class="lineno"> 4806</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(rtlight-&gt;<a class="code hl_variable" href="structrtlight__t.html#a478dcfe9a294410ade3e764a7905d597">color</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l04807" name="l04807"></a><span class="lineno"> 4807</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l04808" name="l04808"></a><span class="lineno"> 4808</span>}</div>
</div>
<div class="line"><a id="l04809" name="l04809"></a><span class="lineno"> 4809</span> </div>
<div class="foldopen" id="foldopen04810" data-start="{" data-end="}">
<div class="line"><a id="l04810" name="l04810"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#af2a481b08e5fc0f7597647c72211dd7a"> 4810</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#af2a481b08e5fc0f7597647c72211dd7a">R_Shadow_SelectLightInView</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l04811" name="l04811"></a><span class="lineno"> 4811</span>{</div>
<div class="line"><a id="l04812" name="l04812"></a><span class="lineno"> 4812</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bestrating</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rating</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>[3];</div>
<div class="line"><a id="l04813" name="l04813"></a><span class="lineno"> 4813</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">best</a>;</div>
<div class="line"><a id="l04814" name="l04814"></a><span class="lineno"> 4814</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>;</div>
<div class="line"><a id="l04815" name="l04815"></a><span class="lineno"> 4815</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light;</div>
<div class="line"><a id="l04816" name="l04816"></a><span class="lineno"> 4816</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> = <a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>); <span class="comment">// checked</span></div>
<div class="line"><a id="l04817" name="l04817"></a><span class="lineno"> 4817</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">best</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04818" name="l04818"></a><span class="lineno"> 4818</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bestrating</a> = 0;</div>
<div class="line"><a id="l04819" name="l04819"></a><span class="lineno"> 4819</span> </div>
<div class="line"><a id="l04820" name="l04820"></a><span class="lineno"> 4820</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#afe65ae6d734367fc70f16e1eb6df80c6">r_editlights_lockcursor</a>)</div>
<div class="line"><a id="l04821" name="l04821"></a><span class="lineno"> 4821</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04822" name="l04822"></a><span class="lineno"> 4822</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l04823" name="l04823"></a><span class="lineno"> 4823</span>    {</div>
<div class="line"><a id="l04824" name="l04824"></a><span class="lineno"> 4824</span>        light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l04825" name="l04825"></a><span class="lineno"> 4825</span>        <span class="keywordflow">if</span> (!light)</div>
<div class="line"><a id="l04826" name="l04826"></a><span class="lineno"> 4826</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04827" name="l04827"></a><span class="lineno"> 4827</span>        <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>);</div>
<div class="line"><a id="l04828" name="l04828"></a><span class="lineno"> 4828</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rating</a> = (<a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae77b6ccbb4e40b1132239a12c91438f9">forward</a>) / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>)));</div>
<div class="line"><a id="l04829" name="l04829"></a><span class="lineno"> 4829</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rating</a> &gt;= 0.95)</div>
<div class="line"><a id="l04830" name="l04830"></a><span class="lineno"> 4830</span>        {</div>
<div class="line"><a id="l04831" name="l04831"></a><span class="lineno"> 4831</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rating</a> /= (1 + 0.0625f * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>)));</div>
<div class="line"><a id="l04832" name="l04832"></a><span class="lineno"> 4832</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bestrating</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rating</a> &amp;&amp; <a class="code hl_function" href="cl__collision_8c.html#a3844376c9cc74935d902373d216acc75">CL_TraceLine</a>(light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, <a class="code hl_define" href="world_8h.html#ac85dd5b7c1be8faf715803a4a921a313">MOVE_NORMAL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a>, 0, <a class="code hl_define" href="model__brush_8h.html#a92eb2c00b3276aef285cf43b305a43da">MATERIALFLAGMASK_TRANSLUCENT</a>, <a class="code hl_variable" href="collision_8c.html#ac0a2160fccec6a28f98e2df5e39d1f7c">collision_extendmovelength</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">false</span>, <span class="keyword">true</span>).<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a> == 1.0f)</div>
<div class="line"><a id="l04833" name="l04833"></a><span class="lineno"> 4833</span>            {</div>
<div class="line"><a id="l04834" name="l04834"></a><span class="lineno"> 4834</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bestrating</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rating</a>;</div>
<div class="line"><a id="l04835" name="l04835"></a><span class="lineno"> 4835</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">best</a> = light;</div>
<div class="line"><a id="l04836" name="l04836"></a><span class="lineno"> 4836</span>            }</div>
<div class="line"><a id="l04837" name="l04837"></a><span class="lineno"> 4837</span>        }</div>
<div class="line"><a id="l04838" name="l04838"></a><span class="lineno"> 4838</span>    }</div>
<div class="line"><a id="l04839" name="l04839"></a><span class="lineno"> 4839</span>    <a class="code hl_function" href="r__shadow_8c.html#a0b1626383078bb86e99de41bce584220">R_Shadow_SelectLight</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">best</a>);</div>
<div class="line"><a id="l04840" name="l04840"></a><span class="lineno"> 4840</span>}</div>
</div>
<div class="line"><a id="l04841" name="l04841"></a><span class="lineno"> 4841</span> </div>
<div class="foldopen" id="foldopen04842" data-start="{" data-end="}">
<div class="line"><a id="l04842" name="l04842"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac94cccbef6ba7a6684c29ac1746a4370"> 4842</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ac94cccbef6ba7a6684c29ac1746a4370">R_Shadow_LoadWorldLights</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l04843" name="l04843"></a><span class="lineno"> 4843</span>{</div>
<div class="line"><a id="l04844" name="l04844"></a><span class="lineno"> 4844</span>    <span class="keywordtype">int</span> <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>, <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>, style, shadow, flags;</div>
<div class="line"><a id="l04845" name="l04845"></a><span class="lineno"> 4845</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempchar</a>, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightsstring</a>, *s, *t, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>], cubemapname[<a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div>
<div class="line"><a id="l04846" name="l04846"></a><span class="lineno"> 4846</span>    <span class="keywordtype">float</span> origin[3], radius, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[3], angles[3], corona, coronasizescale, ambientscale, diffusescale, specularscale;</div>
<div class="line"><a id="l04847" name="l04847"></a><span class="lineno"> 4847</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l04848" name="l04848"></a><span class="lineno"> 4848</span>    {</div>
<div class="line"><a id="l04849" name="l04849"></a><span class="lineno"> 4849</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;No map loaded.\n&quot;</span>);</div>
<div class="line"><a id="l04850" name="l04850"></a><span class="lineno"> 4850</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04851" name="l04851"></a><span class="lineno"> 4851</span>    }</div>
<div class="line"><a id="l04852" name="l04852"></a><span class="lineno"> 4852</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>), <span class="stringliteral">&quot;%s.rtlights&quot;</span>, <a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#af57ffbd05e98d81d460b2c1b18f46149">worldnamenoextension</a>);</div>
<div class="line"><a id="l04853" name="l04853"></a><span class="lineno"> 4853</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightsstring</a> = (<span class="keywordtype">char</span> *)<a class="code hl_function" href="fs_8c.html#a46b9b5ad3cc14f77ae63016505163128">FS_LoadFile</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, <span class="keyword">false</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l04854" name="l04854"></a><span class="lineno"> 4854</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightsstring</a>)</div>
<div class="line"><a id="l04855" name="l04855"></a><span class="lineno"> 4855</span>    {</div>
<div class="line"><a id="l04856" name="l04856"></a><span class="lineno"> 4856</span>        s = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightsstring</a>;</div>
<div class="line"><a id="l04857" name="l04857"></a><span class="lineno"> 4857</span>        <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a> = 0;</div>
<div class="line"><a id="l04858" name="l04858"></a><span class="lineno"> 4858</span>        <span class="keywordflow">while</span> (*s)</div>
<div class="line"><a id="l04859" name="l04859"></a><span class="lineno"> 4859</span>        {</div>
<div class="line"><a id="l04860" name="l04860"></a><span class="lineno"> 4860</span>            <span class="comment">/*</span></div>
<div class="line"><a id="l04861" name="l04861"></a><span class="lineno"> 4861</span><span class="comment">            t = s;</span></div>
<div class="line"><a id="l04862" name="l04862"></a><span class="lineno"> 4862</span><span class="comment">            shadow = true;</span></div>
<div class="line"><a id="l04863" name="l04863"></a><span class="lineno"> 4863</span><span class="comment">            for (;COM_Parse(t, true) &amp;&amp; strcmp(</span></div>
<div class="line"><a id="l04864" name="l04864"></a><span class="lineno"> 4864</span><span class="comment">            if (COM_Parse(t, true))</span></div>
<div class="line"><a id="l04865" name="l04865"></a><span class="lineno"> 4865</span><span class="comment">            {</span></div>
<div class="line"><a id="l04866" name="l04866"></a><span class="lineno"> 4866</span><span class="comment">                if (com_token[0] == &#39;!&#39;)</span></div>
<div class="line"><a id="l04867" name="l04867"></a><span class="lineno"> 4867</span><span class="comment">                {</span></div>
<div class="line"><a id="l04868" name="l04868"></a><span class="lineno"> 4868</span><span class="comment">                    shadow = false;</span></div>
<div class="line"><a id="l04869" name="l04869"></a><span class="lineno"> 4869</span><span class="comment">                    origin[0] = atof(com_token+1);</span></div>
<div class="line"><a id="l04870" name="l04870"></a><span class="lineno"> 4870</span><span class="comment">                }</span></div>
<div class="line"><a id="l04871" name="l04871"></a><span class="lineno"> 4871</span><span class="comment">                else</span></div>
<div class="line"><a id="l04872" name="l04872"></a><span class="lineno"> 4872</span><span class="comment">                    origin[0] = atof(com_token);</span></div>
<div class="line"><a id="l04873" name="l04873"></a><span class="lineno"> 4873</span><span class="comment">                if (Com_Parse(t</span></div>
<div class="line"><a id="l04874" name="l04874"></a><span class="lineno"> 4874</span><span class="comment">            }</span></div>
<div class="line"><a id="l04875" name="l04875"></a><span class="lineno"> 4875</span><span class="comment">            */</span></div>
<div class="line"><a id="l04876" name="l04876"></a><span class="lineno"> 4876</span>            t = s;</div>
<div class="line"><a id="l04877" name="l04877"></a><span class="lineno"> 4877</span>            <span class="keywordflow">while</span> (*s &amp;&amp; *s != <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; *s != <span class="charliteral">&#39;\r&#39;</span>)</div>
<div class="line"><a id="l04878" name="l04878"></a><span class="lineno"> 4878</span>                s++;</div>
<div class="line"><a id="l04879" name="l04879"></a><span class="lineno"> 4879</span>            <span class="keywordflow">if</span> (!*s)</div>
<div class="line"><a id="l04880" name="l04880"></a><span class="lineno"> 4880</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04881" name="l04881"></a><span class="lineno"> 4881</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempchar</a> = *s;</div>
<div class="line"><a id="l04882" name="l04882"></a><span class="lineno"> 4882</span>            shadow = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04883" name="l04883"></a><span class="lineno"> 4883</span>            <span class="comment">// check for modifier flags</span></div>
<div class="line"><a id="l04884" name="l04884"></a><span class="lineno"> 4884</span>            <span class="keywordflow">if</span> (*t == <span class="charliteral">&#39;!&#39;</span>)</div>
<div class="line"><a id="l04885" name="l04885"></a><span class="lineno"> 4885</span>            {</div>
<div class="line"><a id="l04886" name="l04886"></a><span class="lineno"> 4886</span>                shadow = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04887" name="l04887"></a><span class="lineno"> 4887</span>                t++;</div>
<div class="line"><a id="l04888" name="l04888"></a><span class="lineno"> 4888</span>            }</div>
<div class="line"><a id="l04889" name="l04889"></a><span class="lineno"> 4889</span>            *s = 0;</div>
<div class="line"><a id="l04890" name="l04890"></a><span class="lineno"> 4890</span><span class="preprocessor">#if _MSC_VER &gt;= 1400</span></div>
<div class="line"><a id="l04891" name="l04891"></a><span class="lineno"> 4891</span><span class="preprocessor">#define sscanf sscanf_s</span></div>
<div class="line"><a id="l04892" name="l04892"></a><span class="lineno"> 4892</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04893" name="l04893"></a><span class="lineno"> 4893</span>            cubemapname[<span class="keyword">sizeof</span>(cubemapname)-1] = 0;</div>
<div class="line"><a id="l04894" name="l04894"></a><span class="lineno"> 4894</span><span class="preprocessor">#if MAX_QPATH != 128</span></div>
<div class="line"><a id="l04895" name="l04895"></a><span class="lineno"> 4895</span><span class="preprocessor">#error update this code if MAX_QPATH changes</span></div>
<div class="line"><a id="l04896" name="l04896"></a><span class="lineno"> 4896</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04897" name="l04897"></a><span class="lineno"> 4897</span>            <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sscanf</a>(t, <span class="stringliteral">&quot;%f %f %f %f %f %f %f %d %127s %f %f %f %f %f %f %f %f %i&quot;</span>, &amp;origin[0], &amp;origin[1], &amp;origin[2], &amp;radius, &amp;<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0], &amp;<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1], &amp;<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2], &amp;style, cubemapname</div>
<div class="line"><a id="l04898" name="l04898"></a><span class="lineno"> 4898</span>#<span class="keywordflow">if</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">_MSC_VER</a> &gt;= 1400</div>
<div class="line"><a id="l04899" name="l04899"></a><span class="lineno"> 4899</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(cubemapname)</div>
<div class="line"><a id="l04900" name="l04900"></a><span class="lineno"> 4900</span>#<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">endif</a></div>
<div class="line"><a id="l04901" name="l04901"></a><span class="lineno"> 4901</span>, &amp;corona, &amp;angles[0], &amp;angles[1], &amp;angles[2], &amp;coronasizescale, &amp;ambientscale, &amp;diffusescale, &amp;specularscale, &amp;flags);</div>
<div class="line"><a id="l04902" name="l04902"></a><span class="lineno"> 4902</span>            *s = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempchar</a>;</div>
<div class="line"><a id="l04903" name="l04903"></a><span class="lineno"> 4903</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> &lt; 18)</div>
<div class="line"><a id="l04904" name="l04904"></a><span class="lineno"> 4904</span>                flags = <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a>;</div>
<div class="line"><a id="l04905" name="l04905"></a><span class="lineno"> 4905</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> &lt; 17)</div>
<div class="line"><a id="l04906" name="l04906"></a><span class="lineno"> 4906</span>                specularscale = 1;</div>
<div class="line"><a id="l04907" name="l04907"></a><span class="lineno"> 4907</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> &lt; 16)</div>
<div class="line"><a id="l04908" name="l04908"></a><span class="lineno"> 4908</span>                diffusescale = 1;</div>
<div class="line"><a id="l04909" name="l04909"></a><span class="lineno"> 4909</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> &lt; 15)</div>
<div class="line"><a id="l04910" name="l04910"></a><span class="lineno"> 4910</span>                ambientscale = 0;</div>
<div class="line"><a id="l04911" name="l04911"></a><span class="lineno"> 4911</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> &lt; 14)</div>
<div class="line"><a id="l04912" name="l04912"></a><span class="lineno"> 4912</span>                coronasizescale = 0.25f;</div>
<div class="line"><a id="l04913" name="l04913"></a><span class="lineno"> 4913</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> &lt; 13)</div>
<div class="line"><a id="l04914" name="l04914"></a><span class="lineno"> 4914</span>                <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>(angles);</div>
<div class="line"><a id="l04915" name="l04915"></a><span class="lineno"> 4915</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> &lt; 10)</div>
<div class="line"><a id="l04916" name="l04916"></a><span class="lineno"> 4916</span>                corona = 0;</div>
<div class="line"><a id="l04917" name="l04917"></a><span class="lineno"> 4917</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> &lt; 9 || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(cubemapname, <span class="stringliteral">&quot;\&quot;\&quot;&quot;</span>))</div>
<div class="line"><a id="l04918" name="l04918"></a><span class="lineno"> 4918</span>                cubemapname[0] = 0;</div>
<div class="line"><a id="l04919" name="l04919"></a><span class="lineno"> 4919</span>            <span class="comment">// remove quotes on cubemapname</span></div>
<div class="line"><a id="l04920" name="l04920"></a><span class="lineno"> 4920</span>            <span class="keywordflow">if</span> (cubemapname[0] == <span class="charliteral">&#39;&quot;&#39;</span> &amp;&amp; cubemapname[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(cubemapname) - 1] == <span class="charliteral">&#39;&quot;&#39;</span>)</div>
<div class="line"><a id="l04921" name="l04921"></a><span class="lineno"> 4921</span>            {</div>
<div class="line"><a id="l04922" name="l04922"></a><span class="lineno"> 4922</span>                <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>;</div>
<div class="line"><a id="l04923" name="l04923"></a><span class="lineno"> 4923</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(cubemapname) - 2;</div>
<div class="line"><a id="l04924" name="l04924"></a><span class="lineno"> 4924</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memmove</a>(cubemapname, cubemapname + 1, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>);</div>
<div class="line"><a id="l04925" name="l04925"></a><span class="lineno"> 4925</span>                cubemapname[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">namelen</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a id="l04926" name="l04926"></a><span class="lineno"> 4926</span>            }</div>
<div class="line"><a id="l04927" name="l04927"></a><span class="lineno"> 4927</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> &lt; 8)</div>
<div class="line"><a id="l04928" name="l04928"></a><span class="lineno"> 4928</span>            {</div>
<div class="line"><a id="l04929" name="l04929"></a><span class="lineno"> 4929</span>                <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;found %d parameters on line %i, should be 8 or more parameters (origin[0] origin[1] origin[2] radius color[0] color[1] color[2] style \&quot;cubemapname\&quot; corona angles[0] angles[1] angles[2] coronasizescale ambientscale diffusescale specularscale flags)\n&quot;</span>, <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>, <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a> + 1);</div>
<div class="line"><a id="l04930" name="l04930"></a><span class="lineno"> 4930</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04931" name="l04931"></a><span class="lineno"> 4931</span>            }</div>
<div class="line"><a id="l04932" name="l04932"></a><span class="lineno"> 4932</span>            <a class="code hl_function" href="r__shadow_8c.html#af8b412ff853a18ec537a9a8f40c12b29">R_Shadow_UpdateWorldLight</a>(<a class="code hl_function" href="r__shadow_8c.html#aa576ab139fb12bd530a37b2710500086">R_Shadow_NewWorldLight</a>(), origin, angles, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, radius, corona, style, shadow, cubemapname, coronasizescale, ambientscale, diffusescale, specularscale, flags);</div>
<div class="line"><a id="l04933" name="l04933"></a><span class="lineno"> 4933</span>            <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;\r&#39;</span>)</div>
<div class="line"><a id="l04934" name="l04934"></a><span class="lineno"> 4934</span>                s++;</div>
<div class="line"><a id="l04935" name="l04935"></a><span class="lineno"> 4935</span>            <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><a id="l04936" name="l04936"></a><span class="lineno"> 4936</span>                s++;</div>
<div class="line"><a id="l04937" name="l04937"></a><span class="lineno"> 4937</span>            <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>++;</div>
<div class="line"><a id="l04938" name="l04938"></a><span class="lineno"> 4938</span>        }</div>
<div class="line"><a id="l04939" name="l04939"></a><span class="lineno"> 4939</span>        <span class="keywordflow">if</span> (*s)</div>
<div class="line"><a id="l04940" name="l04940"></a><span class="lineno"> 4940</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;invalid rtlights file \&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>);</div>
<div class="line"><a id="l04941" name="l04941"></a><span class="lineno"> 4941</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightsstring</a>);</div>
<div class="line"><a id="l04942" name="l04942"></a><span class="lineno"> 4942</span>    }</div>
<div class="line"><a id="l04943" name="l04943"></a><span class="lineno"> 4943</span>}</div>
</div>
<div class="line"><a id="l04944" name="l04944"></a><span class="lineno"> 4944</span> </div>
<div class="foldopen" id="foldopen04945" data-start="{" data-end="}">
<div class="line"><a id="l04945" name="l04945"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ac864259a133582c8ceb11c08505e0c31"> 4945</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ac864259a133582c8ceb11c08505e0c31">R_Shadow_SaveWorldLights</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l04946" name="l04946"></a><span class="lineno"> 4946</span>{</div>
<div class="line"><a id="l04947" name="l04947"></a><span class="lineno"> 4947</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>;</div>
<div class="line"><a id="l04948" name="l04948"></a><span class="lineno"> 4948</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light;</div>
<div class="line"><a id="l04949" name="l04949"></a><span class="lineno"> 4949</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufchars</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufmaxchars</a>;</div>
<div class="line"><a id="l04950" name="l04950"></a><span class="lineno"> 4950</span>    <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuf</a>;</div>
<div class="line"><a id="l04951" name="l04951"></a><span class="lineno"> 4951</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div>
<div class="line"><a id="l04952" name="l04952"></a><span class="lineno"> 4952</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>[<a class="code hl_define" href="qdefs_8h.html#a119f8457078d7390fb45ea0838adb806">MAX_INPUTLINE</a>];</div>
<div class="line"><a id="l04953" name="l04953"></a><span class="lineno"> 4953</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> = <a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>); <span class="comment">// checked, assuming the dpsnprintf mess doesn&#39;t screw it up...</span></div>
<div class="line"><a id="l04954" name="l04954"></a><span class="lineno"> 4954</span>    <span class="comment">// I hate lines which are 3 times my screen size :( --blub</span></div>
<div class="line"><a id="l04955" name="l04955"></a><span class="lineno"> 4955</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>)</div>
<div class="line"><a id="l04956" name="l04956"></a><span class="lineno"> 4956</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04957" name="l04957"></a><span class="lineno"> 4957</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l04958" name="l04958"></a><span class="lineno"> 4958</span>    {</div>
<div class="line"><a id="l04959" name="l04959"></a><span class="lineno"> 4959</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;No map loaded.\n&quot;</span>);</div>
<div class="line"><a id="l04960" name="l04960"></a><span class="lineno"> 4960</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04961" name="l04961"></a><span class="lineno"> 4961</span>    }</div>
<div class="line"><a id="l04962" name="l04962"></a><span class="lineno"> 4962</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>), <span class="stringliteral">&quot;%s.rtlights&quot;</span>, <a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#af57ffbd05e98d81d460b2c1b18f46149">worldnamenoextension</a>);</div>
<div class="line"><a id="l04963" name="l04963"></a><span class="lineno"> 4963</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufchars</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufmaxchars</a> = 0;</div>
<div class="line"><a id="l04964" name="l04964"></a><span class="lineno"> 4964</span>    <a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04965" name="l04965"></a><span class="lineno"> 4965</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l04966" name="l04966"></a><span class="lineno"> 4966</span>    {</div>
<div class="line"><a id="l04967" name="l04967"></a><span class="lineno"> 4967</span>        light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l04968" name="l04968"></a><span class="lineno"> 4968</span>        <span class="keywordflow">if</span> (!light)</div>
<div class="line"><a id="l04969" name="l04969"></a><span class="lineno"> 4969</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04970" name="l04970"></a><span class="lineno"> 4970</span>        <span class="keywordflow">if</span> (light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">coronasizescale</a> != 0.25f || light-&gt;<a class="code hl_variable" href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">ambientscale</a> != 0 || light-&gt;<a class="code hl_variable" href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">diffusescale</a> != 1 || light-&gt;<a class="code hl_variable" href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">specularscale</a> != 1 || light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a> != <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a>)</div>
<div class="line"><a id="l04971" name="l04971"></a><span class="lineno"> 4971</span>            <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>), <span class="stringliteral">&quot;%s%f %f %f %f %f %f %f %d \&quot;%s\&quot; %f %f %f %f %f %f %f %f %i\n&quot;</span>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;!&quot;</span>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[0], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[1], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[2], light-&gt;<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[0], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[1], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[2], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[0], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[1], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[2], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">coronasizescale</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">ambientscale</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">diffusescale</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">specularscale</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a>);</div>
<div class="line"><a id="l04972" name="l04972"></a><span class="lineno"> 4972</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (light-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>[0] || light-&gt;<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a> || light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[0] || light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[1] || light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[2])</div>
<div class="line"><a id="l04973" name="l04973"></a><span class="lineno"> 4973</span>            <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>), <span class="stringliteral">&quot;%s%f %f %f %f %f %f %f %d \&quot;%s\&quot; %f %f %f %f\n&quot;</span>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;!&quot;</span>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[0], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[1], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[2], light-&gt;<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[0], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[1], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[2], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[0], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[1], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[2]);</div>
<div class="line"><a id="l04974" name="l04974"></a><span class="lineno"> 4974</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l04975" name="l04975"></a><span class="lineno"> 4975</span>            <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>), <span class="stringliteral">&quot;%s%f %f %f %f %f %f %f %d\n&quot;</span>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;!&quot;</span>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[0], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[1], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[2], light-&gt;<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a>, light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[0], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[1], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[2], light-&gt;<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a>);</div>
<div class="line"><a id="l04976" name="l04976"></a><span class="lineno"> 4976</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufchars</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>) &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufmaxchars</a>)</div>
<div class="line"><a id="l04977" name="l04977"></a><span class="lineno"> 4977</span>        {</div>
<div class="line"><a id="l04978" name="l04978"></a><span class="lineno"> 4978</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufmaxchars</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufchars</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>) + 2048;</div>
<div class="line"><a id="l04979" name="l04979"></a><span class="lineno"> 4979</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuf</a> = <a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>;</div>
<div class="line"><a id="l04980" name="l04980"></a><span class="lineno"> 4980</span>            <a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a> = (<span class="keywordtype">char</span> *)<a class="code hl_define" href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a>(<a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufmaxchars</a>);</div>
<div class="line"><a id="l04981" name="l04981"></a><span class="lineno"> 4981</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuf</a>)</div>
<div class="line"><a id="l04982" name="l04982"></a><span class="lineno"> 4982</span>            {</div>
<div class="line"><a id="l04983" name="l04983"></a><span class="lineno"> 4983</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufchars</a>)</div>
<div class="line"><a id="l04984" name="l04984"></a><span class="lineno"> 4984</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuf</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufchars</a>);</div>
<div class="line"><a id="l04985" name="l04985"></a><span class="lineno"> 4985</span>                <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldbuf</a>);</div>
<div class="line"><a id="l04986" name="l04986"></a><span class="lineno"> 4986</span>            }</div>
<div class="line"><a id="l04987" name="l04987"></a><span class="lineno"> 4987</span>        }</div>
<div class="line"><a id="l04988" name="l04988"></a><span class="lineno"> 4988</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>))</div>
<div class="line"><a id="l04989" name="l04989"></a><span class="lineno"> 4989</span>        {</div>
<div class="line"><a id="l04990" name="l04990"></a><span class="lineno"> 4990</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">memcpy</a>(<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a> + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufchars</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>));</div>
<div class="line"><a id="l04991" name="l04991"></a><span class="lineno"> 4991</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufchars</a> += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">line</a>);</div>
<div class="line"><a id="l04992" name="l04992"></a><span class="lineno"> 4992</span>        }</div>
<div class="line"><a id="l04993" name="l04993"></a><span class="lineno"> 4993</span>    }</div>
<div class="line"><a id="l04994" name="l04994"></a><span class="lineno"> 4994</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufchars</a>)</div>
<div class="line"><a id="l04995" name="l04995"></a><span class="lineno"> 4995</span>        <a class="code hl_function" href="fs_8c.html#a2a2eae59234c2478341fea0a380e99ac">FS_WriteFile</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>, (<a class="code hl_typedef" href="fs_8h.html#a5bcbce6d6c29888adf596671d6acd44b">fs_offset_t</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bufchars</a>);</div>
<div class="line"><a id="l04996" name="l04996"></a><span class="lineno"> 4996</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>)</div>
<div class="line"><a id="l04997" name="l04997"></a><span class="lineno"> 4997</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a>);</div>
<div class="line"><a id="l04998" name="l04998"></a><span class="lineno"> 4998</span>}</div>
</div>
<div class="line"><a id="l04999" name="l04999"></a><span class="lineno"> 4999</span> </div>
<div class="foldopen" id="foldopen05000" data-start="{" data-end="}">
<div class="line"><a id="l05000" name="l05000"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a2ad6f119241bf55bc48f5e3225b68638"> 5000</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a2ad6f119241bf55bc48f5e3225b68638">R_Shadow_LoadLightsFile</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l05001" name="l05001"></a><span class="lineno"> 5001</span>{</div>
<div class="line"><a id="l05002" name="l05002"></a><span class="lineno"> 5002</span>    <span class="keywordtype">int</span> <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>, <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>, style;</div>
<div class="line"><a id="l05003" name="l05003"></a><span class="lineno"> 5003</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempchar</a>, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightsstring</a>, *s, *t, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[<a class="code hl_define" href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div>
<div class="line"><a id="l05004" name="l05004"></a><span class="lineno"> 5004</span>    <span class="keywordtype">float</span> origin[3], radius, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">subtract</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spotdir</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spotcone</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">falloff</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">distbias</a>;</div>
<div class="line"><a id="l05005" name="l05005"></a><span class="lineno"> 5005</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l05006" name="l05006"></a><span class="lineno"> 5006</span>    {</div>
<div class="line"><a id="l05007" name="l05007"></a><span class="lineno"> 5007</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;No map loaded.\n&quot;</span>);</div>
<div class="line"><a id="l05008" name="l05008"></a><span class="lineno"> 5008</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05009" name="l05009"></a><span class="lineno"> 5009</span>    }</div>
<div class="line"><a id="l05010" name="l05010"></a><span class="lineno"> 5010</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>), <span class="stringliteral">&quot;%s.lights&quot;</span>, <a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#af57ffbd05e98d81d460b2c1b18f46149">worldnamenoextension</a>);</div>
<div class="line"><a id="l05011" name="l05011"></a><span class="lineno"> 5011</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightsstring</a> = (<span class="keywordtype">char</span> *)<a class="code hl_function" href="fs_8c.html#a46b9b5ad3cc14f77ae63016505163128">FS_LoadFile</a>(<a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>, <a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, <span class="keyword">false</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l05012" name="l05012"></a><span class="lineno"> 5012</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightsstring</a>)</div>
<div class="line"><a id="l05013" name="l05013"></a><span class="lineno"> 5013</span>    {</div>
<div class="line"><a id="l05014" name="l05014"></a><span class="lineno"> 5014</span>        s = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightsstring</a>;</div>
<div class="line"><a id="l05015" name="l05015"></a><span class="lineno"> 5015</span>        <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a> = 0;</div>
<div class="line"><a id="l05016" name="l05016"></a><span class="lineno"> 5016</span>        <span class="keywordflow">while</span> (*s)</div>
<div class="line"><a id="l05017" name="l05017"></a><span class="lineno"> 5017</span>        {</div>
<div class="line"><a id="l05018" name="l05018"></a><span class="lineno"> 5018</span>            t = s;</div>
<div class="line"><a id="l05019" name="l05019"></a><span class="lineno"> 5019</span>            <span class="keywordflow">while</span> (*s &amp;&amp; *s != <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; *s != <span class="charliteral">&#39;\r&#39;</span>)</div>
<div class="line"><a id="l05020" name="l05020"></a><span class="lineno"> 5020</span>                s++;</div>
<div class="line"><a id="l05021" name="l05021"></a><span class="lineno"> 5021</span>            <span class="keywordflow">if</span> (!*s)</div>
<div class="line"><a id="l05022" name="l05022"></a><span class="lineno"> 5022</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05023" name="l05023"></a><span class="lineno"> 5023</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempchar</a> = *s;</div>
<div class="line"><a id="l05024" name="l05024"></a><span class="lineno"> 5024</span>            *s = 0;</div>
<div class="line"><a id="l05025" name="l05025"></a><span class="lineno"> 5025</span>            <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sscanf</a>(t, <span class="stringliteral">&quot;%f %f %f %f %f %f %f %f %f %f %f %f %f %d&quot;</span>, &amp;origin[0], &amp;origin[1], &amp;origin[2], &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">falloff</a>, &amp;<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0], &amp;<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1], &amp;<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2], &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">subtract</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spotdir</a>[0], &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spotdir</a>[1], &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spotdir</a>[2], &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">spotcone</a>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">distbias</a>, &amp;style);</div>
<div class="line"><a id="l05026" name="l05026"></a><span class="lineno"> 5026</span>            *s = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempchar</a>;</div>
<div class="line"><a id="l05027" name="l05027"></a><span class="lineno"> 5027</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a> &lt; 14)</div>
<div class="line"><a id="l05028" name="l05028"></a><span class="lineno"> 5028</span>            {</div>
<div class="line"><a id="l05029" name="l05029"></a><span class="lineno"> 5029</span>                <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;invalid lights file, found %d parameters on line %i, should be 14 parameters (origin[0] origin[1] origin[2] falloff light[0] light[1] light[2] subtract spotdir[0] spotdir[1] spotdir[2] spotcone distancebias style)\n&quot;</span>, <a class="code hl_variable" href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a>, <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a> + 1);</div>
<div class="line"><a id="l05030" name="l05030"></a><span class="lineno"> 5030</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05031" name="l05031"></a><span class="lineno"> 5031</span>            }</div>
<div class="line"><a id="l05032" name="l05032"></a><span class="lineno"> 5032</span>            radius = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_define" href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>) / (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">falloff</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">falloff</a> * 8192.0f * 8192.0f));</div>
<div class="line"><a id="l05033" name="l05033"></a><span class="lineno"> 5033</span>            radius = <a class="code hl_define" href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a>(15, radius, 4096);</div>
<div class="line"><a id="l05034" name="l05034"></a><span class="lineno"> 5034</span>            <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, (2.0f / (8388608.0f)), <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l05035" name="l05035"></a><span class="lineno"> 5035</span>            <a class="code hl_function" href="r__shadow_8c.html#af8b412ff853a18ec537a9a8f40c12b29">R_Shadow_UpdateWorldLight</a>(<a class="code hl_function" href="r__shadow_8c.html#aa576ab139fb12bd530a37b2710500086">R_Shadow_NewWorldLight</a>(), origin, <a class="code hl_variable" href="mathlib_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, radius, 0, style, <span class="keyword">true</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.25, 0, 1, 1, <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a>);</div>
<div class="line"><a id="l05036" name="l05036"></a><span class="lineno"> 5036</span>            <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;\r&#39;</span>)</div>
<div class="line"><a id="l05037" name="l05037"></a><span class="lineno"> 5037</span>                s++;</div>
<div class="line"><a id="l05038" name="l05038"></a><span class="lineno"> 5038</span>            <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><a id="l05039" name="l05039"></a><span class="lineno"> 5039</span>                s++;</div>
<div class="line"><a id="l05040" name="l05040"></a><span class="lineno"> 5040</span>            <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>++;</div>
<div class="line"><a id="l05041" name="l05041"></a><span class="lineno"> 5041</span>        }</div>
<div class="line"><a id="l05042" name="l05042"></a><span class="lineno"> 5042</span>        <span class="keywordflow">if</span> (*s)</div>
<div class="line"><a id="l05043" name="l05043"></a><span class="lineno"> 5043</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;invalid lights file \&quot;%s\&quot;\n&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>);</div>
<div class="line"><a id="l05044" name="l05044"></a><span class="lineno"> 5044</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightsstring</a>);</div>
<div class="line"><a id="l05045" name="l05045"></a><span class="lineno"> 5045</span>    }</div>
<div class="line"><a id="l05046" name="l05046"></a><span class="lineno"> 5046</span>}</div>
</div>
<div class="line"><a id="l05047" name="l05047"></a><span class="lineno"> 5047</span> </div>
<div class="line"><a id="l05048" name="l05048"></a><span class="lineno"> 5048</span><span class="comment">// tyrlite/hmap2 light types in the delay field</span></div>
<div class="line"><a id="l05049" name="l05049"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fa4dac314f1c5a9de20d4e04cd29b4bcfc"> 5049</a></span><span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lighttype_e</a> {<a class="code hl_enumvalue" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fa4dac314f1c5a9de20d4e04cd29b4bcfc">LIGHTTYPE_MINUSX</a>, <a class="code hl_enumvalue" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897faf25513086216f002e0a75f013727d560">LIGHTTYPE_RECIPX</a>, <a class="code hl_enumvalue" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fa74e625abe920b6c615ec09645ff593c8">LIGHTTYPE_RECIPXX</a>, <a class="code hl_enumvalue" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897facbbc939d067e520b9016a940895325dc">LIGHTTYPE_NONE</a>, <a class="code hl_enumvalue" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fad580177fb80251d2e719f1d01ebe181c">LIGHTTYPE_SUN</a>, <a class="code hl_enumvalue" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fa9ea923a73e3ba388ffa6a60267b84286">LIGHTTYPE_MINUSXX</a>} <a class="code hl_enumeration" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897f">lighttype_t</a>;</div>
<div class="line"><a id="l05050" name="l05050"></a><span class="lineno"> 5050</span> </div>
<div class="foldopen" id="foldopen05051" data-start="{" data-end="}">
<div class="line"><a id="l05051" name="l05051"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aef0cd091bb977ece766820b8f107f53e"> 5051</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#aef0cd091bb977ece766820b8f107f53e">R_Shadow_LoadWorldLightsFromMap_LightArghliteTyrlite</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l05052" name="l05052"></a><span class="lineno"> 5052</span>{</div>
<div class="line"><a id="l05053" name="l05053"></a><span class="lineno"> 5053</span>    <span class="keywordtype">int</span> entnum;</div>
<div class="line"><a id="l05054" name="l05054"></a><span class="lineno"> 5054</span>    <span class="keywordtype">int</span> style;</div>
<div class="line"><a id="l05055" name="l05055"></a><span class="lineno"> 5055</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">islight</a>;</div>
<div class="line"><a id="l05056" name="l05056"></a><span class="lineno"> 5056</span>    <span class="keywordtype">int</span> skin;</div>
<div class="line"><a id="l05057" name="l05057"></a><span class="lineno"> 5057</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pflags</a>;</div>
<div class="line"><a id="l05058" name="l05058"></a><span class="lineno"> 5058</span>    <span class="comment">//int effects;</span></div>
<div class="line"><a id="l05059" name="l05059"></a><span class="lineno"> 5059</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#affda859b376cb8300c60fa496eb99df0">type</a>;</div>
<div class="line"><a id="l05060" name="l05060"></a><span class="lineno"> 5060</span>    <span class="keywordtype">int</span> <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a>;</div>
<div class="line"><a id="l05061" name="l05061"></a><span class="lineno"> 5061</span>    <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entfiledata</a>;</div>
<div class="line"><a id="l05062" name="l05062"></a><span class="lineno"> 5062</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>;</div>
<div class="line"><a id="l05063" name="l05063"></a><span class="lineno"> 5063</span>    <span class="keywordtype">float</span> origin[3], angles[3], radius, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[3], light[4], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fadescale</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightscale</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vec</a>[4];</div>
<div class="line"><a id="l05064" name="l05064"></a><span class="lineno"> 5064</span>    <span class="keywordtype">char</span> key[256], <a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>[<a class="code hl_define" href="qdefs_8h.html#a119f8457078d7390fb45ea0838adb806">MAX_INPUTLINE</a>];</div>
<div class="line"><a id="l05065" name="l05065"></a><span class="lineno"> 5065</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>[1024];</div>
<div class="line"><a id="l05066" name="l05066"></a><span class="lineno"> 5066</span> </div>
<div class="line"><a id="l05067" name="l05067"></a><span class="lineno"> 5067</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l05068" name="l05068"></a><span class="lineno"> 5068</span>    {</div>
<div class="line"><a id="l05069" name="l05069"></a><span class="lineno"> 5069</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;No map loaded.\n&quot;</span>);</div>
<div class="line"><a id="l05070" name="l05070"></a><span class="lineno"> 5070</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05071" name="l05071"></a><span class="lineno"> 5071</span>    }</div>
<div class="line"><a id="l05072" name="l05072"></a><span class="lineno"> 5072</span>    <span class="comment">// try to load a .ent file first</span></div>
<div class="line"><a id="l05073" name="l05073"></a><span class="lineno"> 5073</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(key, <span class="keyword">sizeof</span>(key), <span class="stringliteral">&quot;%s.ent&quot;</span>, <a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#af57ffbd05e98d81d460b2c1b18f46149">worldnamenoextension</a>);</div>
<div class="line"><a id="l05074" name="l05074"></a><span class="lineno"> 5074</span>    <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entfiledata</a> = (<span class="keywordtype">char</span> *)<a class="code hl_function" href="fs_8c.html#a46b9b5ad3cc14f77ae63016505163128">FS_LoadFile</a>(key, <a class="code hl_variable" href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a>, <span class="keyword">true</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l05075" name="l05075"></a><span class="lineno"> 5075</span>    <span class="comment">// and if that is not found, fall back to the bsp file entity string</span></div>
<div class="line"><a id="l05076" name="l05076"></a><span class="lineno"> 5076</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>)</div>
<div class="line"><a id="l05077" name="l05077"></a><span class="lineno"> 5077</span>        <a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a> = <a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a>-&gt;brush.entities;</div>
<div class="line"><a id="l05078" name="l05078"></a><span class="lineno"> 5078</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>)</div>
<div class="line"><a id="l05079" name="l05079"></a><span class="lineno"> 5079</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05080" name="l05080"></a><span class="lineno"> 5080</span>    <span class="keywordflow">for</span> (entnum = 0;<a class="code hl_function" href="common_8c.html#acc99aea15e3d929ef5cfac822ee7040d">COM_ParseToken_Simple</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>) &amp;&amp; <a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>[0] == <span class="charliteral">&#39;{&#39;</span>;entnum++)</div>
<div class="line"><a id="l05081" name="l05081"></a><span class="lineno"> 5081</span>    {</div>
<div class="line"><a id="l05082" name="l05082"></a><span class="lineno"> 5082</span>        <a class="code hl_variable" href="glquake_8h.html#affda859b376cb8300c60fa496eb99df0">type</a> = <a class="code hl_enumvalue" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fa4dac314f1c5a9de20d4e04cd29b4bcfc">LIGHTTYPE_MINUSX</a>;</div>
<div class="line"><a id="l05083" name="l05083"></a><span class="lineno"> 5083</span>        origin[0] = origin[1] = origin[2] = 0;</div>
<div class="line"><a id="l05084" name="l05084"></a><span class="lineno"> 5084</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[2] = 0;</div>
<div class="line"><a id="l05085" name="l05085"></a><span class="lineno"> 5085</span>        angles[0] = angles[1] = angles[2] = 0;</div>
<div class="line"><a id="l05086" name="l05086"></a><span class="lineno"> 5086</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] = 1;</div>
<div class="line"><a id="l05087" name="l05087"></a><span class="lineno"> 5087</span>        light[0] = light[1] = light[2] = 1;light[3] = 300;</div>
<div class="line"><a id="l05088" name="l05088"></a><span class="lineno"> 5088</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[2] = 1;</div>
<div class="line"><a id="l05089" name="l05089"></a><span class="lineno"> 5089</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fadescale</a> = 1;</div>
<div class="line"><a id="l05090" name="l05090"></a><span class="lineno"> 5090</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightscale</a> = 1;</div>
<div class="line"><a id="l05091" name="l05091"></a><span class="lineno"> 5091</span>        style = 0;</div>
<div class="line"><a id="l05092" name="l05092"></a><span class="lineno"> 5092</span>        skin = 0;</div>
<div class="line"><a id="l05093" name="l05093"></a><span class="lineno"> 5093</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pflags</a> = 0;</div>
<div class="line"><a id="l05094" name="l05094"></a><span class="lineno"> 5094</span>        <span class="comment">//effects = 0;</span></div>
<div class="line"><a id="l05095" name="l05095"></a><span class="lineno"> 5095</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">islight</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05096" name="l05096"></a><span class="lineno"> 5096</span>        <span class="keywordflow">while</span> (1)</div>
<div class="line"><a id="l05097" name="l05097"></a><span class="lineno"> 5097</span>        {</div>
<div class="line"><a id="l05098" name="l05098"></a><span class="lineno"> 5098</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="common_8c.html#acc99aea15e3d929ef5cfac822ee7040d">COM_ParseToken_Simple</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>))</div>
<div class="line"><a id="l05099" name="l05099"></a><span class="lineno"> 5099</span>                <span class="keywordflow">break</span>; <span class="comment">// error</span></div>
<div class="line"><a id="l05100" name="l05100"></a><span class="lineno"> 5100</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>[0] == <span class="charliteral">&#39;}&#39;</span>)</div>
<div class="line"><a id="l05101" name="l05101"></a><span class="lineno"> 5101</span>                <span class="keywordflow">break</span>; <span class="comment">// end of entity</span></div>
<div class="line"><a id="l05102" name="l05102"></a><span class="lineno"> 5102</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>[0] == <span class="charliteral">&#39;_&#39;</span>)</div>
<div class="line"><a id="l05103" name="l05103"></a><span class="lineno"> 5103</span>                <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(key, <a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a> + 1, <span class="keyword">sizeof</span>(key));</div>
<div class="line"><a id="l05104" name="l05104"></a><span class="lineno"> 5104</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l05105" name="l05105"></a><span class="lineno"> 5105</span>                <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(key, <a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="keyword">sizeof</span>(key));</div>
<div class="line"><a id="l05106" name="l05106"></a><span class="lineno"> 5106</span>            <span class="keywordflow">while</span> (key[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(key)-1] == <span class="charliteral">&#39; &#39;</span>) <span class="comment">// remove trailing spaces</span></div>
<div class="line"><a id="l05107" name="l05107"></a><span class="lineno"> 5107</span>                key[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strlen</a>(key)-1] = 0;</div>
<div class="line"><a id="l05108" name="l05108"></a><span class="lineno"> 5108</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="common_8c.html#acc99aea15e3d929ef5cfac822ee7040d">COM_ParseToken_Simple</a>(&amp;<a class="code hl_variable" href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>))</div>
<div class="line"><a id="l05109" name="l05109"></a><span class="lineno"> 5109</span>                <span class="keywordflow">break</span>; <span class="comment">// error</span></div>
<div class="line"><a id="l05110" name="l05110"></a><span class="lineno"> 5110</span>            <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>, <a class="code hl_variable" href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>));</div>
<div class="line"><a id="l05111" name="l05111"></a><span class="lineno"> 5111</span> </div>
<div class="line"><a id="l05112" name="l05112"></a><span class="lineno"> 5112</span>            <span class="comment">// now that we have the key pair worked out...</span></div>
<div class="line"><a id="l05113" name="l05113"></a><span class="lineno"> 5113</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<span class="stringliteral">&quot;light&quot;</span>, key))</div>
<div class="line"><a id="l05114" name="l05114"></a><span class="lineno"> 5114</span>            {</div>
<div class="line"><a id="l05115" name="l05115"></a><span class="lineno"> 5115</span>                <a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sscanf</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>, <span class="stringliteral">&quot;%f %f %f %f&quot;</span>, &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vec</a>[0], &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vec</a>[1], &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vec</a>[2], &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vec</a>[3]);</div>
<div class="line"><a id="l05116" name="l05116"></a><span class="lineno"> 5116</span>                <span class="keywordflow">if</span> (<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a> == 1)</div>
<div class="line"><a id="l05117" name="l05117"></a><span class="lineno"> 5117</span>                {</div>
<div class="line"><a id="l05118" name="l05118"></a><span class="lineno"> 5118</span>                    <span class="comment">// quake</span></div>
<div class="line"><a id="l05119" name="l05119"></a><span class="lineno"> 5119</span>                    light[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vec</a>[0] * (1.0f / 256.0f);</div>
<div class="line"><a id="l05120" name="l05120"></a><span class="lineno"> 5120</span>                    light[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vec</a>[0] * (1.0f / 256.0f);</div>
<div class="line"><a id="l05121" name="l05121"></a><span class="lineno"> 5121</span>                    light[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vec</a>[0] * (1.0f / 256.0f);</div>
<div class="line"><a id="l05122" name="l05122"></a><span class="lineno"> 5122</span>                    light[3] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vec</a>[0];</div>
<div class="line"><a id="l05123" name="l05123"></a><span class="lineno"> 5123</span>                }</div>
<div class="line"><a id="l05124" name="l05124"></a><span class="lineno"> 5124</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_define" href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a> == 4)</div>
<div class="line"><a id="l05125" name="l05125"></a><span class="lineno"> 5125</span>                {</div>
<div class="line"><a id="l05126" name="l05126"></a><span class="lineno"> 5126</span>                    <span class="comment">// halflife</span></div>
<div class="line"><a id="l05127" name="l05127"></a><span class="lineno"> 5127</span>                    light[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vec</a>[0] * (1.0f / 255.0f);</div>
<div class="line"><a id="l05128" name="l05128"></a><span class="lineno"> 5128</span>                    light[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vec</a>[1] * (1.0f / 255.0f);</div>
<div class="line"><a id="l05129" name="l05129"></a><span class="lineno"> 5129</span>                    light[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vec</a>[2] * (1.0f / 255.0f);</div>
<div class="line"><a id="l05130" name="l05130"></a><span class="lineno"> 5130</span>                    light[3] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vec</a>[3];</div>
<div class="line"><a id="l05131" name="l05131"></a><span class="lineno"> 5131</span>                }</div>
<div class="line"><a id="l05132" name="l05132"></a><span class="lineno"> 5132</span>            }</div>
<div class="line"><a id="l05133" name="l05133"></a><span class="lineno"> 5133</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<span class="stringliteral">&quot;delay&quot;</span>, key))</div>
<div class="line"><a id="l05134" name="l05134"></a><span class="lineno"> 5134</span>                <a class="code hl_variable" href="glquake_8h.html#affda859b376cb8300c60fa496eb99df0">type</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>);</div>
<div class="line"><a id="l05135" name="l05135"></a><span class="lineno"> 5135</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<span class="stringliteral">&quot;origin&quot;</span>, key))</div>
<div class="line"><a id="l05136" name="l05136"></a><span class="lineno"> 5136</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sscanf</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>, <span class="stringliteral">&quot;%f %f %f&quot;</span>, &amp;origin[0], &amp;origin[1], &amp;origin[2]);</div>
<div class="line"><a id="l05137" name="l05137"></a><span class="lineno"> 5137</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<span class="stringliteral">&quot;angle&quot;</span>, key))</div>
<div class="line"><a id="l05138" name="l05138"></a><span class="lineno"> 5138</span>                angles[0] = 0, angles[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>), angles[2] = 0;</div>
<div class="line"><a id="l05139" name="l05139"></a><span class="lineno"> 5139</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<span class="stringliteral">&quot;angles&quot;</span>, key))</div>
<div class="line"><a id="l05140" name="l05140"></a><span class="lineno"> 5140</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sscanf</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>, <span class="stringliteral">&quot;%f %f %f&quot;</span>, &amp;angles[0], &amp;angles[1], &amp;angles[2]);</div>
<div class="line"><a id="l05141" name="l05141"></a><span class="lineno"> 5141</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<span class="stringliteral">&quot;color&quot;</span>, key))</div>
<div class="line"><a id="l05142" name="l05142"></a><span class="lineno"> 5142</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sscanf</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>, <span class="stringliteral">&quot;%f %f %f&quot;</span>, &amp;<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0], &amp;<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1], &amp;<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2]);</div>
<div class="line"><a id="l05143" name="l05143"></a><span class="lineno"> 5143</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<span class="stringliteral">&quot;wait&quot;</span>, key))</div>
<div class="line"><a id="l05144" name="l05144"></a><span class="lineno"> 5144</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fadescale</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>);</div>
<div class="line"><a id="l05145" name="l05145"></a><span class="lineno"> 5145</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<span class="stringliteral">&quot;classname&quot;</span>, key))</div>
<div class="line"><a id="l05146" name="l05146"></a><span class="lineno"> 5146</span>            {</div>
<div class="line"><a id="l05147" name="l05147"></a><span class="lineno"> 5147</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strncmp</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>, <span class="stringliteral">&quot;light&quot;</span>, 5))</div>
<div class="line"><a id="l05148" name="l05148"></a><span class="lineno"> 5148</span>                {</div>
<div class="line"><a id="l05149" name="l05149"></a><span class="lineno"> 5149</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">islight</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05150" name="l05150"></a><span class="lineno"> 5150</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>, <span class="stringliteral">&quot;light_fluoro&quot;</span>))</div>
<div class="line"><a id="l05151" name="l05151"></a><span class="lineno"> 5151</span>                    {</div>
<div class="line"><a id="l05152" name="l05152"></a><span class="lineno"> 5152</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[0] = 0;</div>
<div class="line"><a id="l05153" name="l05153"></a><span class="lineno"> 5153</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[1] = 0;</div>
<div class="line"><a id="l05154" name="l05154"></a><span class="lineno"> 5154</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[2] = 0;</div>
<div class="line"><a id="l05155" name="l05155"></a><span class="lineno"> 5155</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[0] = 1;</div>
<div class="line"><a id="l05156" name="l05156"></a><span class="lineno"> 5156</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[1] = 1;</div>
<div class="line"><a id="l05157" name="l05157"></a><span class="lineno"> 5157</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[2] = 1;</div>
<div class="line"><a id="l05158" name="l05158"></a><span class="lineno"> 5158</span>                    }</div>
<div class="line"><a id="l05159" name="l05159"></a><span class="lineno"> 5159</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>, <span class="stringliteral">&quot;light_fluorospark&quot;</span>))</div>
<div class="line"><a id="l05160" name="l05160"></a><span class="lineno"> 5160</span>                    {</div>
<div class="line"><a id="l05161" name="l05161"></a><span class="lineno"> 5161</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[0] = 0;</div>
<div class="line"><a id="l05162" name="l05162"></a><span class="lineno"> 5162</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[1] = 0;</div>
<div class="line"><a id="l05163" name="l05163"></a><span class="lineno"> 5163</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[2] = 0;</div>
<div class="line"><a id="l05164" name="l05164"></a><span class="lineno"> 5164</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[0] = 1;</div>
<div class="line"><a id="l05165" name="l05165"></a><span class="lineno"> 5165</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[1] = 1;</div>
<div class="line"><a id="l05166" name="l05166"></a><span class="lineno"> 5166</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[2] = 1;</div>
<div class="line"><a id="l05167" name="l05167"></a><span class="lineno"> 5167</span>                    }</div>
<div class="line"><a id="l05168" name="l05168"></a><span class="lineno"> 5168</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>, <span class="stringliteral">&quot;light_globe&quot;</span>))</div>
<div class="line"><a id="l05169" name="l05169"></a><span class="lineno"> 5169</span>                    {</div>
<div class="line"><a id="l05170" name="l05170"></a><span class="lineno"> 5170</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[0] = 0;</div>
<div class="line"><a id="l05171" name="l05171"></a><span class="lineno"> 5171</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[1] = 0;</div>
<div class="line"><a id="l05172" name="l05172"></a><span class="lineno"> 5172</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[2] = 0;</div>
<div class="line"><a id="l05173" name="l05173"></a><span class="lineno"> 5173</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[0] = 1;</div>
<div class="line"><a id="l05174" name="l05174"></a><span class="lineno"> 5174</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[1] = 0.8;</div>
<div class="line"><a id="l05175" name="l05175"></a><span class="lineno"> 5175</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[2] = 0.4;</div>
<div class="line"><a id="l05176" name="l05176"></a><span class="lineno"> 5176</span>                    }</div>
<div class="line"><a id="l05177" name="l05177"></a><span class="lineno"> 5177</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>, <span class="stringliteral">&quot;light_flame_large_yellow&quot;</span>))</div>
<div class="line"><a id="l05178" name="l05178"></a><span class="lineno"> 5178</span>                    {</div>
<div class="line"><a id="l05179" name="l05179"></a><span class="lineno"> 5179</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[0] = 0;</div>
<div class="line"><a id="l05180" name="l05180"></a><span class="lineno"> 5180</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[1] = 0;</div>
<div class="line"><a id="l05181" name="l05181"></a><span class="lineno"> 5181</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[2] = 0;</div>
<div class="line"><a id="l05182" name="l05182"></a><span class="lineno"> 5182</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[0] = 1;</div>
<div class="line"><a id="l05183" name="l05183"></a><span class="lineno"> 5183</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[1] = 0.5;</div>
<div class="line"><a id="l05184" name="l05184"></a><span class="lineno"> 5184</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[2] = 0.1;</div>
<div class="line"><a id="l05185" name="l05185"></a><span class="lineno"> 5185</span>                    }</div>
<div class="line"><a id="l05186" name="l05186"></a><span class="lineno"> 5186</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>, <span class="stringliteral">&quot;light_flame_small_yellow&quot;</span>))</div>
<div class="line"><a id="l05187" name="l05187"></a><span class="lineno"> 5187</span>                    {</div>
<div class="line"><a id="l05188" name="l05188"></a><span class="lineno"> 5188</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[0] = 0;</div>
<div class="line"><a id="l05189" name="l05189"></a><span class="lineno"> 5189</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[1] = 0;</div>
<div class="line"><a id="l05190" name="l05190"></a><span class="lineno"> 5190</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[2] = 0;</div>
<div class="line"><a id="l05191" name="l05191"></a><span class="lineno"> 5191</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[0] = 1;</div>
<div class="line"><a id="l05192" name="l05192"></a><span class="lineno"> 5192</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[1] = 0.5;</div>
<div class="line"><a id="l05193" name="l05193"></a><span class="lineno"> 5193</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[2] = 0.1;</div>
<div class="line"><a id="l05194" name="l05194"></a><span class="lineno"> 5194</span>                    }</div>
<div class="line"><a id="l05195" name="l05195"></a><span class="lineno"> 5195</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>, <span class="stringliteral">&quot;light_torch_small_white&quot;</span>))</div>
<div class="line"><a id="l05196" name="l05196"></a><span class="lineno"> 5196</span>                    {</div>
<div class="line"><a id="l05197" name="l05197"></a><span class="lineno"> 5197</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[0] = 0;</div>
<div class="line"><a id="l05198" name="l05198"></a><span class="lineno"> 5198</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[1] = 0;</div>
<div class="line"><a id="l05199" name="l05199"></a><span class="lineno"> 5199</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[2] = 0;</div>
<div class="line"><a id="l05200" name="l05200"></a><span class="lineno"> 5200</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[0] = 1;</div>
<div class="line"><a id="l05201" name="l05201"></a><span class="lineno"> 5201</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[1] = 0.5;</div>
<div class="line"><a id="l05202" name="l05202"></a><span class="lineno"> 5202</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[2] = 0.1;</div>
<div class="line"><a id="l05203" name="l05203"></a><span class="lineno"> 5203</span>                    }</div>
<div class="line"><a id="l05204" name="l05204"></a><span class="lineno"> 5204</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>, <span class="stringliteral">&quot;light_torch_small_walltorch&quot;</span>))</div>
<div class="line"><a id="l05205" name="l05205"></a><span class="lineno"> 5205</span>                    {</div>
<div class="line"><a id="l05206" name="l05206"></a><span class="lineno"> 5206</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[0] = 0;</div>
<div class="line"><a id="l05207" name="l05207"></a><span class="lineno"> 5207</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[1] = 0;</div>
<div class="line"><a id="l05208" name="l05208"></a><span class="lineno"> 5208</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>[2] = 0;</div>
<div class="line"><a id="l05209" name="l05209"></a><span class="lineno"> 5209</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[0] = 1;</div>
<div class="line"><a id="l05210" name="l05210"></a><span class="lineno"> 5210</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[1] = 0.5;</div>
<div class="line"><a id="l05211" name="l05211"></a><span class="lineno"> 5211</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[2] = 0.1;</div>
<div class="line"><a id="l05212" name="l05212"></a><span class="lineno"> 5212</span>                    }</div>
<div class="line"><a id="l05213" name="l05213"></a><span class="lineno"> 5213</span>                }</div>
<div class="line"><a id="l05214" name="l05214"></a><span class="lineno"> 5214</span>            }</div>
<div class="line"><a id="l05215" name="l05215"></a><span class="lineno"> 5215</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<span class="stringliteral">&quot;style&quot;</span>, key))</div>
<div class="line"><a id="l05216" name="l05216"></a><span class="lineno"> 5216</span>                style = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>);</div>
<div class="line"><a id="l05217" name="l05217"></a><span class="lineno"> 5217</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<span class="stringliteral">&quot;skin&quot;</span>, key))</div>
<div class="line"><a id="l05218" name="l05218"></a><span class="lineno"> 5218</span>                skin = (<span class="keywordtype">int</span>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>);</div>
<div class="line"><a id="l05219" name="l05219"></a><span class="lineno"> 5219</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<span class="stringliteral">&quot;pflags&quot;</span>, key))</div>
<div class="line"><a id="l05220" name="l05220"></a><span class="lineno"> 5220</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pflags</a> = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>);</div>
<div class="line"><a id="l05221" name="l05221"></a><span class="lineno"> 5221</span>            <span class="comment">//else if (!strcmp(&quot;effects&quot;, key))</span></div>
<div class="line"><a id="l05222" name="l05222"></a><span class="lineno"> 5222</span>            <span class="comment">//  effects = (int)atof(value);</span></div>
<div class="line"><a id="l05223" name="l05223"></a><span class="lineno"> 5223</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a>-&gt;type == <a class="code hl_enumvalue" href="model__shared_8h.html#ae8881adaf7dff7ff012ef751075434f4a58b2db2924e69f9aa69dcb90446199e8">mod_brushq3</a>)</div>
<div class="line"><a id="l05224" name="l05224"></a><span class="lineno"> 5224</span>            {</div>
<div class="line"><a id="l05225" name="l05225"></a><span class="lineno"> 5225</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<span class="stringliteral">&quot;scale&quot;</span>, key))</div>
<div class="line"><a id="l05226" name="l05226"></a><span class="lineno"> 5226</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightscale</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>);</div>
<div class="line"><a id="l05227" name="l05227"></a><span class="lineno"> 5227</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<span class="stringliteral">&quot;fade&quot;</span>, key))</div>
<div class="line"><a id="l05228" name="l05228"></a><span class="lineno"> 5228</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fadescale</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_variable" href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a>);</div>
<div class="line"><a id="l05229" name="l05229"></a><span class="lineno"> 5229</span>            }</div>
<div class="line"><a id="l05230" name="l05230"></a><span class="lineno"> 5230</span>        }</div>
<div class="line"><a id="l05231" name="l05231"></a><span class="lineno"> 5231</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">islight</a>)</div>
<div class="line"><a id="l05232" name="l05232"></a><span class="lineno"> 5232</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05233" name="l05233"></a><span class="lineno"> 5233</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightscale</a> &lt;= 0)</div>
<div class="line"><a id="l05234" name="l05234"></a><span class="lineno"> 5234</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightscale</a> = 1;</div>
<div class="line"><a id="l05235" name="l05235"></a><span class="lineno"> 5235</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fadescale</a> &lt;= 0)</div>
<div class="line"><a id="l05236" name="l05236"></a><span class="lineno"> 5236</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fadescale</a> = 1;</div>
<div class="line"><a id="l05237" name="l05237"></a><span class="lineno"> 5237</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] == <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] &amp;&amp; <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] == <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2])</div>
<div class="line"><a id="l05238" name="l05238"></a><span class="lineno"> 5238</span>        {</div>
<div class="line"><a id="l05239" name="l05239"></a><span class="lineno"> 5239</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] *= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[0];</div>
<div class="line"><a id="l05240" name="l05240"></a><span class="lineno"> 5240</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] *= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[1];</div>
<div class="line"><a id="l05241" name="l05241"></a><span class="lineno"> 5241</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] *= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">overridecolor</a>[2];</div>
<div class="line"><a id="l05242" name="l05242"></a><span class="lineno"> 5242</span>        }</div>
<div class="line"><a id="l05243" name="l05243"></a><span class="lineno"> 5243</span>        radius = light[3] * <a class="code hl_variable" href="r__shadow_8c.html#a672a9d1cc4dc2c152a25e8b2a1c5caae">r_editlights_quakelightsizescale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightscale</a> / <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fadescale</a>;</div>
<div class="line"><a id="l05244" name="l05244"></a><span class="lineno"> 5244</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] * light[0];</div>
<div class="line"><a id="l05245" name="l05245"></a><span class="lineno"> 5245</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] * light[1];</div>
<div class="line"><a id="l05246" name="l05246"></a><span class="lineno"> 5246</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] * light[2];</div>
<div class="line"><a id="l05247" name="l05247"></a><span class="lineno"> 5247</span>        <span class="keywordflow">switch</span> (<a class="code hl_variable" href="glquake_8h.html#affda859b376cb8300c60fa496eb99df0">type</a>)</div>
<div class="line"><a id="l05248" name="l05248"></a><span class="lineno"> 5248</span>        {</div>
<div class="line"><a id="l05249" name="l05249"></a><span class="lineno"> 5249</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fa4dac314f1c5a9de20d4e04cd29b4bcfc">LIGHTTYPE_MINUSX</a>:</div>
<div class="line"><a id="l05250" name="l05250"></a><span class="lineno"> 5250</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05251" name="l05251"></a><span class="lineno"> 5251</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897faf25513086216f002e0a75f013727d560">LIGHTTYPE_RECIPX</a>:</div>
<div class="line"><a id="l05252" name="l05252"></a><span class="lineno"> 5252</span>            radius *= 2;</div>
<div class="line"><a id="l05253" name="l05253"></a><span class="lineno"> 5253</span>            <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, (1.0f / 16.0f), <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l05254" name="l05254"></a><span class="lineno"> 5254</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05255" name="l05255"></a><span class="lineno"> 5255</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fa74e625abe920b6c615ec09645ff593c8">LIGHTTYPE_RECIPXX</a>:</div>
<div class="line"><a id="l05256" name="l05256"></a><span class="lineno"> 5256</span>            radius *= 2;</div>
<div class="line"><a id="l05257" name="l05257"></a><span class="lineno"> 5257</span>            <a class="code hl_define" href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, (1.0f / 16.0f), <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l05258" name="l05258"></a><span class="lineno"> 5258</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05259" name="l05259"></a><span class="lineno"> 5259</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l05260" name="l05260"></a><span class="lineno"> 5260</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897facbbc939d067e520b9016a940895325dc">LIGHTTYPE_NONE</a>:</div>
<div class="line"><a id="l05261" name="l05261"></a><span class="lineno"> 5261</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05262" name="l05262"></a><span class="lineno"> 5262</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fad580177fb80251d2e719f1d01ebe181c">LIGHTTYPE_SUN</a>:</div>
<div class="line"><a id="l05263" name="l05263"></a><span class="lineno"> 5263</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05264" name="l05264"></a><span class="lineno"> 5264</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fa9ea923a73e3ba388ffa6a60267b84286">LIGHTTYPE_MINUSXX</a>:</div>
<div class="line"><a id="l05265" name="l05265"></a><span class="lineno"> 5265</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05266" name="l05266"></a><span class="lineno"> 5266</span>        }</div>
<div class="line"><a id="l05267" name="l05267"></a><span class="lineno"> 5267</span>        <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a>(origin, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">originhack</a>, origin);</div>
<div class="line"><a id="l05268" name="l05268"></a><span class="lineno"> 5268</span>        <span class="keywordflow">if</span> (radius &gt;= 1)</div>
<div class="line"><a id="l05269" name="l05269"></a><span class="lineno"> 5269</span>            <a class="code hl_function" href="r__shadow_8c.html#af8b412ff853a18ec537a9a8f40c12b29">R_Shadow_UpdateWorldLight</a>(<a class="code hl_function" href="r__shadow_8c.html#aa576ab139fb12bd530a37b2710500086">R_Shadow_NewWorldLight</a>(), origin, angles, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, radius, (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pflags</a> &amp; <a class="code hl_define" href="protocol_8h.html#afe110f92a7e1036db7f401885f5e0334">PFLAGS_CORONA</a>) != 0, style, (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">pflags</a> &amp; <a class="code hl_define" href="protocol_8h.html#a5b3a68ed950bcfc8025be976f91e4723">PFLAGS_NOSHADOW</a>) == 0, skin &gt;= 16 ? <a class="code hl_function" href="common_8c.html#a4a8220fa88226bf9cf39b12a051a20d7">va</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">vabuf</a>), <span class="stringliteral">&quot;cubemaps/%i&quot;</span>, skin) : <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.25, 0, 1, 1, <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a>);</div>
<div class="line"><a id="l05270" name="l05270"></a><span class="lineno"> 5270</span>    }</div>
<div class="line"><a id="l05271" name="l05271"></a><span class="lineno"> 5271</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entfiledata</a>)</div>
<div class="line"><a id="l05272" name="l05272"></a><span class="lineno"> 5272</span>        <a class="code hl_define" href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entfiledata</a>);</div>
<div class="line"><a id="l05273" name="l05273"></a><span class="lineno"> 5273</span>}</div>
</div>
<div class="line"><a id="l05274" name="l05274"></a><span class="lineno"> 5274</span> </div>
<div class="line"><a id="l05275" name="l05275"></a><span class="lineno"> 5275</span> </div>
<div class="foldopen" id="foldopen05276" data-start="{" data-end="}">
<div class="line"><a id="l05276" name="l05276"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a6113dbf9501981051ebb6447c6b38099"> 5276</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a6113dbf9501981051ebb6447c6b38099">R_Shadow_SetCursorLocationForView</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l05277" name="l05277"></a><span class="lineno"> 5277</span>{</div>
<div class="line"><a id="l05278" name="l05278"></a><span class="lineno"> 5278</span>    <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> dist, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">push</a>;</div>
<div class="line"><a id="l05279" name="l05279"></a><span class="lineno"> 5279</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> dest, endpos;</div>
<div class="line"><a id="l05280" name="l05280"></a><span class="lineno"> 5280</span>    <a class="code hl_struct" href="structtrace__t.html">trace_t</a> trace;</div>
<div class="line"><a id="l05281" name="l05281"></a><span class="lineno"> 5281</span>    <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, <a class="code hl_variable" href="r__shadow_8c.html#a63dc439382d15f2dd4a7a884047bcbfd">r_editlights_cursordistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae77b6ccbb4e40b1132239a12c91438f9">forward</a>, dest);</div>
<div class="line"><a id="l05282" name="l05282"></a><span class="lineno"> 5282</span>    trace = <a class="code hl_function" href="cl__collision_8c.html#a3844376c9cc74935d902373d216acc75">CL_TraceLine</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">origin</a>, dest, <a class="code hl_define" href="world_8h.html#ac85dd5b7c1be8faf715803a4a921a313">MOVE_NORMAL</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a>, 0, <a class="code hl_define" href="model__brush_8h.html#a92eb2c00b3276aef285cf43b305a43da">MATERIALFLAGMASK_TRANSLUCENT</a>, <a class="code hl_variable" href="collision_8c.html#ac0a2160fccec6a28f98e2df5e39d1f7c">collision_extendmovelength</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l05283" name="l05283"></a><span class="lineno"> 5283</span>    <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a> &lt; 1)</div>
<div class="line"><a id="l05284" name="l05284"></a><span class="lineno"> 5284</span>    {</div>
<div class="line"><a id="l05285" name="l05285"></a><span class="lineno"> 5285</span>        dist = trace.<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a> * <a class="code hl_variable" href="r__shadow_8c.html#a63dc439382d15f2dd4a7a884047bcbfd">r_editlights_cursordistance</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l05286" name="l05286"></a><span class="lineno"> 5286</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">push</a> = <a class="code hl_variable" href="r__shadow_8c.html#a8f1db553ca88c636f59323f60b06e0b3">r_editlights_cursorpushback</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l05287" name="l05287"></a><span class="lineno"> 5287</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">push</a> &gt; dist)</div>
<div class="line"><a id="l05288" name="l05288"></a><span class="lineno"> 5288</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">push</a> = dist;</div>
<div class="line"><a id="l05289" name="l05289"></a><span class="lineno"> 5289</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">push</a> = -<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">push</a>;</div>
<div class="line"><a id="l05290" name="l05290"></a><span class="lineno"> 5290</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(trace.<a class="code hl_variable" href="structtrace__t.html#a45b22da9e5e28fb83aa691ffb1909a4a">endpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">push</a>, <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">view</a>.<a class="code hl_variable" href="structr__refdef__view__t.html#ae77b6ccbb4e40b1132239a12c91438f9">forward</a>, endpos);</div>
<div class="line"><a id="l05291" name="l05291"></a><span class="lineno"> 5291</span>        <a class="code hl_define" href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a>(endpos, <a class="code hl_variable" href="r__shadow_8c.html#a3ce848ab57627ac008049d2e6e768821">r_editlights_cursorpushoff</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, trace.<a class="code hl_variable" href="structtrace__t.html#a9a6651d4c1d97c4e6959a696184b25cd">plane</a>.<a class="code hl_variable" href="unionplane__t.html#ade810b5e8f7db899dee445447a58edeb">normal</a>, endpos);</div>
<div class="line"><a id="l05292" name="l05292"></a><span class="lineno"> 5292</span>    }</div>
<div class="line"><a id="l05293" name="l05293"></a><span class="lineno"> 5293</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l05294" name="l05294"></a><span class="lineno"> 5294</span>    {</div>
<div class="line"><a id="l05295" name="l05295"></a><span class="lineno"> 5295</span>        <a class="code hl_define" href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a>( endpos );</div>
<div class="line"><a id="l05296" name="l05296"></a><span class="lineno"> 5296</span>    }</div>
<div class="line"><a id="l05297" name="l05297"></a><span class="lineno"> 5297</span>    <a class="code hl_variable" href="r__shadow_8c.html#a231b12d52440fde590bcee63e4d07d64">r_editlights_cursorlocation</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(endpos[0] / <a class="code hl_variable" href="r__shadow_8c.html#a8f7f45586c012211b7be74ce606e574c">r_editlights_cursorgrid</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> + 0.5f) * <a class="code hl_variable" href="r__shadow_8c.html#a8f7f45586c012211b7be74ce606e574c">r_editlights_cursorgrid</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l05298" name="l05298"></a><span class="lineno"> 5298</span>    <a class="code hl_variable" href="r__shadow_8c.html#a231b12d52440fde590bcee63e4d07d64">r_editlights_cursorlocation</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(endpos[1] / <a class="code hl_variable" href="r__shadow_8c.html#a8f7f45586c012211b7be74ce606e574c">r_editlights_cursorgrid</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> + 0.5f) * <a class="code hl_variable" href="r__shadow_8c.html#a8f7f45586c012211b7be74ce606e574c">r_editlights_cursorgrid</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l05299" name="l05299"></a><span class="lineno"> 5299</span>    <a class="code hl_variable" href="r__shadow_8c.html#a231b12d52440fde590bcee63e4d07d64">r_editlights_cursorlocation</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">floor</a>(endpos[2] / <a class="code hl_variable" href="r__shadow_8c.html#a8f7f45586c012211b7be74ce606e574c">r_editlights_cursorgrid</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> + 0.5f) * <a class="code hl_variable" href="r__shadow_8c.html#a8f7f45586c012211b7be74ce606e574c">r_editlights_cursorgrid</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l05300" name="l05300"></a><span class="lineno"> 5300</span>}</div>
</div>
<div class="line"><a id="l05301" name="l05301"></a><span class="lineno"> 5301</span> </div>
<div class="foldopen" id="foldopen05302" data-start="{" data-end="}">
<div class="line"><a id="l05302" name="l05302"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ae7b723244f280d3a8ca8858bc9aa1994"> 5302</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ae7b723244f280d3a8ca8858bc9aa1994">R_Shadow_UpdateWorldLightSelection</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l05303" name="l05303"></a><span class="lineno"> 5303</span>{</div>
<div class="line"><a id="l05304" name="l05304"></a><span class="lineno"> 5304</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l05305" name="l05305"></a><span class="lineno"> 5305</span>    {</div>
<div class="line"><a id="l05306" name="l05306"></a><span class="lineno"> 5306</span>        <a class="code hl_function" href="r__shadow_8c.html#a6113dbf9501981051ebb6447c6b38099">R_Shadow_SetCursorLocationForView</a>();</div>
<div class="line"><a id="l05307" name="l05307"></a><span class="lineno"> 5307</span>        <a class="code hl_function" href="r__shadow_8c.html#af2a481b08e5fc0f7597647c72211dd7a">R_Shadow_SelectLightInView</a>();</div>
<div class="line"><a id="l05308" name="l05308"></a><span class="lineno"> 5308</span>    }</div>
<div class="line"><a id="l05309" name="l05309"></a><span class="lineno"> 5309</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l05310" name="l05310"></a><span class="lineno"> 5310</span>        <a class="code hl_function" href="r__shadow_8c.html#a0b1626383078bb86e99de41bce584220">R_Shadow_SelectLight</a>(<a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l05311" name="l05311"></a><span class="lineno"> 5311</span>}</div>
</div>
<div class="line"><a id="l05312" name="l05312"></a><span class="lineno"> 5312</span> </div>
<div class="foldopen" id="foldopen05313" data-start="{" data-end="}">
<div class="line"><a id="l05313" name="l05313"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0661b28147bd9200b312775efc1dc7cd"> 5313</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a0661b28147bd9200b312775efc1dc7cd">R_Shadow_EditLights_Clear_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05314" name="l05314"></a><span class="lineno"> 5314</span>{</div>
<div class="line"><a id="l05315" name="l05315"></a><span class="lineno"> 5315</span>    <a class="code hl_function" href="r__shadow_8c.html#aa8fe16360e95a6a6658c7519cebf0b97">R_Shadow_ClearWorldLights</a>();</div>
<div class="line"><a id="l05316" name="l05316"></a><span class="lineno"> 5316</span>}</div>
</div>
<div class="line"><a id="l05317" name="l05317"></a><span class="lineno"> 5317</span> </div>
<div class="foldopen" id="foldopen05318" data-start="{" data-end="}">
<div class="line"><a id="l05318" name="l05318"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a06ac0a27bc6888c17169add1450b26e4"> 5318</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a06ac0a27bc6888c17169add1450b26e4">R_Shadow_EditLights_Reload_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05319" name="l05319"></a><span class="lineno"> 5319</span>{</div>
<div class="line"><a id="l05320" name="l05320"></a><span class="lineno"> 5320</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a>)</div>
<div class="line"><a id="l05321" name="l05321"></a><span class="lineno"> 5321</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05322" name="l05322"></a><span class="lineno"> 5322</span>    <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="r__shadow_8c.html#a33b81d2dcd1d3054facf713441473db3">r_shadow_mapname</a>, <a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#acda413bc16dea281731c311e05f5132b">worldname</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="r__shadow_8c.html#a33b81d2dcd1d3054facf713441473db3">r_shadow_mapname</a>));</div>
<div class="line"><a id="l05323" name="l05323"></a><span class="lineno"> 5323</span>    <a class="code hl_function" href="r__shadow_8c.html#aa8fe16360e95a6a6658c7519cebf0b97">R_Shadow_ClearWorldLights</a>();</div>
<div class="line"><a id="l05324" name="l05324"></a><span class="lineno"> 5324</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a61890ab94397eb127ab265b6dca41722">r_shadow_realtime_world_importlightentitiesfrommap</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &lt;= 1)</div>
<div class="line"><a id="l05325" name="l05325"></a><span class="lineno"> 5325</span>    {</div>
<div class="line"><a id="l05326" name="l05326"></a><span class="lineno"> 5326</span>        <a class="code hl_function" href="r__shadow_8c.html#ac94cccbef6ba7a6684c29ac1746a4370">R_Shadow_LoadWorldLights</a>();</div>
<div class="line"><a id="l05327" name="l05327"></a><span class="lineno"> 5327</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>))</div>
<div class="line"><a id="l05328" name="l05328"></a><span class="lineno"> 5328</span>            <a class="code hl_function" href="r__shadow_8c.html#a2ad6f119241bf55bc48f5e3225b68638">R_Shadow_LoadLightsFile</a>();</div>
<div class="line"><a id="l05329" name="l05329"></a><span class="lineno"> 5329</span>    }</div>
<div class="line"><a id="l05330" name="l05330"></a><span class="lineno"> 5330</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a61890ab94397eb127ab265b6dca41722">r_shadow_realtime_world_importlightentitiesfrommap</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> &gt;= 1)</div>
<div class="line"><a id="l05331" name="l05331"></a><span class="lineno"> 5331</span>    {</div>
<div class="line"><a id="l05332" name="l05332"></a><span class="lineno"> 5332</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>))</div>
<div class="line"><a id="l05333" name="l05333"></a><span class="lineno"> 5333</span>            <a class="code hl_function" href="r__shadow_8c.html#aef0cd091bb977ece766820b8f107f53e">R_Shadow_LoadWorldLightsFromMap_LightArghliteTyrlite</a>();</div>
<div class="line"><a id="l05334" name="l05334"></a><span class="lineno"> 5334</span>    }</div>
<div class="line"><a id="l05335" name="l05335"></a><span class="lineno"> 5335</span>}</div>
</div>
<div class="line"><a id="l05336" name="l05336"></a><span class="lineno"> 5336</span> </div>
<div class="foldopen" id="foldopen05337" data-start="{" data-end="}">
<div class="line"><a id="l05337" name="l05337"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a36bcfbf7432d611eb5e8041f2b1a38c4"> 5337</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a36bcfbf7432d611eb5e8041f2b1a38c4">R_Shadow_EditLights_Save_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05338" name="l05338"></a><span class="lineno"> 5338</span>{</div>
<div class="line"><a id="l05339" name="l05339"></a><span class="lineno"> 5339</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a>.<a class="code hl_variable" href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">worldmodel</a>)</div>
<div class="line"><a id="l05340" name="l05340"></a><span class="lineno"> 5340</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05341" name="l05341"></a><span class="lineno"> 5341</span>    <a class="code hl_function" href="r__shadow_8c.html#ac864259a133582c8ceb11c08505e0c31">R_Shadow_SaveWorldLights</a>();</div>
<div class="line"><a id="l05342" name="l05342"></a><span class="lineno"> 5342</span>}</div>
</div>
<div class="line"><a id="l05343" name="l05343"></a><span class="lineno"> 5343</span> </div>
<div class="foldopen" id="foldopen05344" data-start="{" data-end="}">
<div class="line"><a id="l05344" name="l05344"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a573b63d83258093494303255e0f33e8a"> 5344</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a573b63d83258093494303255e0f33e8a">R_Shadow_EditLights_ImportLightEntitiesFromMap_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05345" name="l05345"></a><span class="lineno"> 5345</span>{</div>
<div class="line"><a id="l05346" name="l05346"></a><span class="lineno"> 5346</span>    <a class="code hl_function" href="r__shadow_8c.html#aa8fe16360e95a6a6658c7519cebf0b97">R_Shadow_ClearWorldLights</a>();</div>
<div class="line"><a id="l05347" name="l05347"></a><span class="lineno"> 5347</span>    <a class="code hl_function" href="r__shadow_8c.html#aef0cd091bb977ece766820b8f107f53e">R_Shadow_LoadWorldLightsFromMap_LightArghliteTyrlite</a>();</div>
<div class="line"><a id="l05348" name="l05348"></a><span class="lineno"> 5348</span>}</div>
</div>
<div class="line"><a id="l05349" name="l05349"></a><span class="lineno"> 5349</span> </div>
<div class="foldopen" id="foldopen05350" data-start="{" data-end="}">
<div class="line"><a id="l05350" name="l05350"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#ad6a16e2c9f35d89a6416e60ec54509f4"> 5350</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#ad6a16e2c9f35d89a6416e60ec54509f4">R_Shadow_EditLights_ImportLightsFile_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05351" name="l05351"></a><span class="lineno"> 5351</span>{</div>
<div class="line"><a id="l05352" name="l05352"></a><span class="lineno"> 5352</span>    <a class="code hl_function" href="r__shadow_8c.html#aa8fe16360e95a6a6658c7519cebf0b97">R_Shadow_ClearWorldLights</a>();</div>
<div class="line"><a id="l05353" name="l05353"></a><span class="lineno"> 5353</span>    <a class="code hl_function" href="r__shadow_8c.html#a2ad6f119241bf55bc48f5e3225b68638">R_Shadow_LoadLightsFile</a>();</div>
<div class="line"><a id="l05354" name="l05354"></a><span class="lineno"> 5354</span>}</div>
</div>
<div class="line"><a id="l05355" name="l05355"></a><span class="lineno"> 5355</span> </div>
<div class="foldopen" id="foldopen05356" data-start="{" data-end="}">
<div class="line"><a id="l05356" name="l05356"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#af8021999d534e4dbbe86fc1108f9d3ce"> 5356</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#af8021999d534e4dbbe86fc1108f9d3ce">R_Shadow_EditLights_Spawn_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05357" name="l05357"></a><span class="lineno"> 5357</span>{</div>
<div class="line"><a id="l05358" name="l05358"></a><span class="lineno"> 5358</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>;</div>
<div class="line"><a id="l05359" name="l05359"></a><span class="lineno"> 5359</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l05360" name="l05360"></a><span class="lineno"> 5360</span>    {</div>
<div class="line"><a id="l05361" name="l05361"></a><span class="lineno"> 5361</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Cannot spawn light when not in editing mode.  Set r_editlights to 1.\n&quot;</span>);</div>
<div class="line"><a id="l05362" name="l05362"></a><span class="lineno"> 5362</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05363" name="l05363"></a><span class="lineno"> 5363</span>    }</div>
<div class="line"><a id="l05364" name="l05364"></a><span class="lineno"> 5364</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 1)</div>
<div class="line"><a id="l05365" name="l05365"></a><span class="lineno"> 5365</span>    {</div>
<div class="line"><a id="l05366" name="l05366"></a><span class="lineno"> 5366</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;r_editlights_spawn does not take parameters\n&quot;</span>);</div>
<div class="line"><a id="l05367" name="l05367"></a><span class="lineno"> 5367</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05368" name="l05368"></a><span class="lineno"> 5368</span>    }</div>
<div class="line"><a id="l05369" name="l05369"></a><span class="lineno"> 5369</span>    <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] = 1;</div>
<div class="line"><a id="l05370" name="l05370"></a><span class="lineno"> 5370</span>    <a class="code hl_function" href="r__shadow_8c.html#af8b412ff853a18ec537a9a8f40c12b29">R_Shadow_UpdateWorldLight</a>(<a class="code hl_function" href="r__shadow_8c.html#aa576ab139fb12bd530a37b2710500086">R_Shadow_NewWorldLight</a>(), <a class="code hl_variable" href="r__shadow_8c.html#a231b12d52440fde590bcee63e4d07d64">r_editlights_cursorlocation</a>, <a class="code hl_variable" href="mathlib_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, 200, 0, 0, <span class="keyword">true</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0.25, 0, 1, 1, <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a>);</div>
<div class="line"><a id="l05371" name="l05371"></a><span class="lineno"> 5371</span>}</div>
</div>
<div class="line"><a id="l05372" name="l05372"></a><span class="lineno"> 5372</span> </div>
<div class="foldopen" id="foldopen05373" data-start="{" data-end="}">
<div class="line"><a id="l05373" name="l05373"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a55f56f45cb9e5ba448db1b360cc826f0"> 5373</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a55f56f45cb9e5ba448db1b360cc826f0">R_Shadow_EditLights_Edit_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05374" name="l05374"></a><span class="lineno"> 5374</span>{</div>
<div class="line"><a id="l05375" name="l05375"></a><span class="lineno"> 5375</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> origin, angles, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>;</div>
<div class="line"><a id="l05376" name="l05376"></a><span class="lineno"> 5376</span>    <a class="code hl_typedef" href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a> radius, corona, coronasizescale, ambientscale, diffusescale, specularscale;</div>
<div class="line"><a id="l05377" name="l05377"></a><span class="lineno"> 5377</span>    <span class="keywordtype">int</span> style, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadows</a>, flags, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">normalmode</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">realtimemode</a>;</div>
<div class="line"><a id="l05378" name="l05378"></a><span class="lineno"> 5378</span>    <span class="keywordtype">char</span> cubemapname[<a class="code hl_define" href="qdefs_8h.html#a119f8457078d7390fb45ea0838adb806">MAX_INPUTLINE</a>];</div>
<div class="line"><a id="l05379" name="l05379"></a><span class="lineno"> 5379</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l05380" name="l05380"></a><span class="lineno"> 5380</span>    {</div>
<div class="line"><a id="l05381" name="l05381"></a><span class="lineno"> 5381</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Cannot spawn light when not in editing mode.  Set r_editlights to 1.\n&quot;</span>);</div>
<div class="line"><a id="l05382" name="l05382"></a><span class="lineno"> 5382</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05383" name="l05383"></a><span class="lineno"> 5383</span>    }</div>
<div class="line"><a id="l05384" name="l05384"></a><span class="lineno"> 5384</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>)</div>
<div class="line"><a id="l05385" name="l05385"></a><span class="lineno"> 5385</span>    {</div>
<div class="line"><a id="l05386" name="l05386"></a><span class="lineno"> 5386</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;No selected light.\n&quot;</span>);</div>
<div class="line"><a id="l05387" name="l05387"></a><span class="lineno"> 5387</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05388" name="l05388"></a><span class="lineno"> 5388</span>    }</div>
<div class="line"><a id="l05389" name="l05389"></a><span class="lineno"> 5389</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>, origin);</div>
<div class="line"><a id="l05390" name="l05390"></a><span class="lineno"> 5390</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>, angles);</div>
<div class="line"><a id="l05391" name="l05391"></a><span class="lineno"> 5391</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l05392" name="l05392"></a><span class="lineno"> 5392</span>    radius = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a>;</div>
<div class="line"><a id="l05393" name="l05393"></a><span class="lineno"> 5393</span>    style = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a>;</div>
<div class="line"><a id="l05394" name="l05394"></a><span class="lineno"> 5394</span>    <span class="keywordflow">if</span> (*<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>)</div>
<div class="line"><a id="l05395" name="l05395"></a><span class="lineno"> 5395</span>        <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(cubemapname, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>, <span class="keyword">sizeof</span>(cubemapname));</div>
<div class="line"><a id="l05396" name="l05396"></a><span class="lineno"> 5396</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l05397" name="l05397"></a><span class="lineno"> 5397</span>        cubemapname[0] = 0;</div>
<div class="line"><a id="l05398" name="l05398"></a><span class="lineno"> 5398</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadows</a> = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a>;</div>
<div class="line"><a id="l05399" name="l05399"></a><span class="lineno"> 5399</span>    corona = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a>;</div>
<div class="line"><a id="l05400" name="l05400"></a><span class="lineno"> 5400</span>    coronasizescale = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">coronasizescale</a>;</div>
<div class="line"><a id="l05401" name="l05401"></a><span class="lineno"> 5401</span>    ambientscale = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">ambientscale</a>;</div>
<div class="line"><a id="l05402" name="l05402"></a><span class="lineno"> 5402</span>    diffusescale = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">diffusescale</a>;</div>
<div class="line"><a id="l05403" name="l05403"></a><span class="lineno"> 5403</span>    specularscale = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">specularscale</a>;</div>
<div class="line"><a id="l05404" name="l05404"></a><span class="lineno"> 5404</span>    flags = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a>;</div>
<div class="line"><a id="l05405" name="l05405"></a><span class="lineno"> 5405</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">normalmode</a> = (flags &amp; <a class="code hl_define" href="client_8h.html#a02b341fb62e7f8268a5f7f684ab0f2f2">LIGHTFLAG_NORMALMODE</a>) != 0;</div>
<div class="line"><a id="l05406" name="l05406"></a><span class="lineno"> 5406</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">realtimemode</a> = (flags &amp; <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a>) != 0;</div>
<div class="line"><a id="l05407" name="l05407"></a><span class="lineno"> 5407</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;origin&quot;</span>))</div>
<div class="line"><a id="l05408" name="l05408"></a><span class="lineno"> 5408</span>    {</div>
<div class="line"><a id="l05409" name="l05409"></a><span class="lineno"> 5409</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 5)</div>
<div class="line"><a id="l05410" name="l05410"></a><span class="lineno"> 5410</span>        {</div>
<div class="line"><a id="l05411" name="l05411"></a><span class="lineno"> 5411</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s x y z\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05412" name="l05412"></a><span class="lineno"> 5412</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05413" name="l05413"></a><span class="lineno"> 5413</span>        }</div>
<div class="line"><a id="l05414" name="l05414"></a><span class="lineno"> 5414</span>        origin[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05415" name="l05415"></a><span class="lineno"> 5415</span>        origin[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 3));</div>
<div class="line"><a id="l05416" name="l05416"></a><span class="lineno"> 5416</span>        origin[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 4));</div>
<div class="line"><a id="l05417" name="l05417"></a><span class="lineno"> 5417</span>    }</div>
<div class="line"><a id="l05418" name="l05418"></a><span class="lineno"> 5418</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;originscale&quot;</span>))</div>
<div class="line"><a id="l05419" name="l05419"></a><span class="lineno"> 5419</span>    {</div>
<div class="line"><a id="l05420" name="l05420"></a><span class="lineno"> 5420</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 5)</div>
<div class="line"><a id="l05421" name="l05421"></a><span class="lineno"> 5421</span>        {</div>
<div class="line"><a id="l05422" name="l05422"></a><span class="lineno"> 5422</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s x y z\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05423" name="l05423"></a><span class="lineno"> 5423</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05424" name="l05424"></a><span class="lineno"> 5424</span>        }</div>
<div class="line"><a id="l05425" name="l05425"></a><span class="lineno"> 5425</span>        origin[0] *= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05426" name="l05426"></a><span class="lineno"> 5426</span>        origin[1] *= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 3));</div>
<div class="line"><a id="l05427" name="l05427"></a><span class="lineno"> 5427</span>        origin[2] *= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 4));</div>
<div class="line"><a id="l05428" name="l05428"></a><span class="lineno"> 5428</span>    }</div>
<div class="line"><a id="l05429" name="l05429"></a><span class="lineno"> 5429</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;originx&quot;</span>))</div>
<div class="line"><a id="l05430" name="l05430"></a><span class="lineno"> 5430</span>    {</div>
<div class="line"><a id="l05431" name="l05431"></a><span class="lineno"> 5431</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05432" name="l05432"></a><span class="lineno"> 5432</span>        {</div>
<div class="line"><a id="l05433" name="l05433"></a><span class="lineno"> 5433</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05434" name="l05434"></a><span class="lineno"> 5434</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05435" name="l05435"></a><span class="lineno"> 5435</span>        }</div>
<div class="line"><a id="l05436" name="l05436"></a><span class="lineno"> 5436</span>        origin[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05437" name="l05437"></a><span class="lineno"> 5437</span>    }</div>
<div class="line"><a id="l05438" name="l05438"></a><span class="lineno"> 5438</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;originy&quot;</span>))</div>
<div class="line"><a id="l05439" name="l05439"></a><span class="lineno"> 5439</span>    {</div>
<div class="line"><a id="l05440" name="l05440"></a><span class="lineno"> 5440</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05441" name="l05441"></a><span class="lineno"> 5441</span>        {</div>
<div class="line"><a id="l05442" name="l05442"></a><span class="lineno"> 5442</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05443" name="l05443"></a><span class="lineno"> 5443</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05444" name="l05444"></a><span class="lineno"> 5444</span>        }</div>
<div class="line"><a id="l05445" name="l05445"></a><span class="lineno"> 5445</span>        origin[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05446" name="l05446"></a><span class="lineno"> 5446</span>    }</div>
<div class="line"><a id="l05447" name="l05447"></a><span class="lineno"> 5447</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;originz&quot;</span>))</div>
<div class="line"><a id="l05448" name="l05448"></a><span class="lineno"> 5448</span>    {</div>
<div class="line"><a id="l05449" name="l05449"></a><span class="lineno"> 5449</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05450" name="l05450"></a><span class="lineno"> 5450</span>        {</div>
<div class="line"><a id="l05451" name="l05451"></a><span class="lineno"> 5451</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05452" name="l05452"></a><span class="lineno"> 5452</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05453" name="l05453"></a><span class="lineno"> 5453</span>        }</div>
<div class="line"><a id="l05454" name="l05454"></a><span class="lineno"> 5454</span>        origin[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05455" name="l05455"></a><span class="lineno"> 5455</span>    }</div>
<div class="line"><a id="l05456" name="l05456"></a><span class="lineno"> 5456</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;move&quot;</span>))</div>
<div class="line"><a id="l05457" name="l05457"></a><span class="lineno"> 5457</span>    {</div>
<div class="line"><a id="l05458" name="l05458"></a><span class="lineno"> 5458</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 5)</div>
<div class="line"><a id="l05459" name="l05459"></a><span class="lineno"> 5459</span>        {</div>
<div class="line"><a id="l05460" name="l05460"></a><span class="lineno"> 5460</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s x y z\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05461" name="l05461"></a><span class="lineno"> 5461</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05462" name="l05462"></a><span class="lineno"> 5462</span>        }</div>
<div class="line"><a id="l05463" name="l05463"></a><span class="lineno"> 5463</span>        origin[0] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05464" name="l05464"></a><span class="lineno"> 5464</span>        origin[1] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 3));</div>
<div class="line"><a id="l05465" name="l05465"></a><span class="lineno"> 5465</span>        origin[2] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 4));</div>
<div class="line"><a id="l05466" name="l05466"></a><span class="lineno"> 5466</span>    }</div>
<div class="line"><a id="l05467" name="l05467"></a><span class="lineno"> 5467</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;movex&quot;</span>))</div>
<div class="line"><a id="l05468" name="l05468"></a><span class="lineno"> 5468</span>    {</div>
<div class="line"><a id="l05469" name="l05469"></a><span class="lineno"> 5469</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05470" name="l05470"></a><span class="lineno"> 5470</span>        {</div>
<div class="line"><a id="l05471" name="l05471"></a><span class="lineno"> 5471</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05472" name="l05472"></a><span class="lineno"> 5472</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05473" name="l05473"></a><span class="lineno"> 5473</span>        }</div>
<div class="line"><a id="l05474" name="l05474"></a><span class="lineno"> 5474</span>        origin[0] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05475" name="l05475"></a><span class="lineno"> 5475</span>    }</div>
<div class="line"><a id="l05476" name="l05476"></a><span class="lineno"> 5476</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;movey&quot;</span>))</div>
<div class="line"><a id="l05477" name="l05477"></a><span class="lineno"> 5477</span>    {</div>
<div class="line"><a id="l05478" name="l05478"></a><span class="lineno"> 5478</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05479" name="l05479"></a><span class="lineno"> 5479</span>        {</div>
<div class="line"><a id="l05480" name="l05480"></a><span class="lineno"> 5480</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05481" name="l05481"></a><span class="lineno"> 5481</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05482" name="l05482"></a><span class="lineno"> 5482</span>        }</div>
<div class="line"><a id="l05483" name="l05483"></a><span class="lineno"> 5483</span>        origin[1] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05484" name="l05484"></a><span class="lineno"> 5484</span>    }</div>
<div class="line"><a id="l05485" name="l05485"></a><span class="lineno"> 5485</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;movez&quot;</span>))</div>
<div class="line"><a id="l05486" name="l05486"></a><span class="lineno"> 5486</span>    {</div>
<div class="line"><a id="l05487" name="l05487"></a><span class="lineno"> 5487</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05488" name="l05488"></a><span class="lineno"> 5488</span>        {</div>
<div class="line"><a id="l05489" name="l05489"></a><span class="lineno"> 5489</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05490" name="l05490"></a><span class="lineno"> 5490</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05491" name="l05491"></a><span class="lineno"> 5491</span>        }</div>
<div class="line"><a id="l05492" name="l05492"></a><span class="lineno"> 5492</span>        origin[2] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05493" name="l05493"></a><span class="lineno"> 5493</span>    }</div>
<div class="line"><a id="l05494" name="l05494"></a><span class="lineno"> 5494</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;angles&quot;</span>))</div>
<div class="line"><a id="l05495" name="l05495"></a><span class="lineno"> 5495</span>    {</div>
<div class="line"><a id="l05496" name="l05496"></a><span class="lineno"> 5496</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 5)</div>
<div class="line"><a id="l05497" name="l05497"></a><span class="lineno"> 5497</span>        {</div>
<div class="line"><a id="l05498" name="l05498"></a><span class="lineno"> 5498</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s x y z\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05499" name="l05499"></a><span class="lineno"> 5499</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05500" name="l05500"></a><span class="lineno"> 5500</span>        }</div>
<div class="line"><a id="l05501" name="l05501"></a><span class="lineno"> 5501</span>        angles[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05502" name="l05502"></a><span class="lineno"> 5502</span>        angles[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 3));</div>
<div class="line"><a id="l05503" name="l05503"></a><span class="lineno"> 5503</span>        angles[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 4));</div>
<div class="line"><a id="l05504" name="l05504"></a><span class="lineno"> 5504</span>    }</div>
<div class="line"><a id="l05505" name="l05505"></a><span class="lineno"> 5505</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;anglesx&quot;</span>))</div>
<div class="line"><a id="l05506" name="l05506"></a><span class="lineno"> 5506</span>    {</div>
<div class="line"><a id="l05507" name="l05507"></a><span class="lineno"> 5507</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05508" name="l05508"></a><span class="lineno"> 5508</span>        {</div>
<div class="line"><a id="l05509" name="l05509"></a><span class="lineno"> 5509</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05510" name="l05510"></a><span class="lineno"> 5510</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05511" name="l05511"></a><span class="lineno"> 5511</span>        }</div>
<div class="line"><a id="l05512" name="l05512"></a><span class="lineno"> 5512</span>        angles[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05513" name="l05513"></a><span class="lineno"> 5513</span>    }</div>
<div class="line"><a id="l05514" name="l05514"></a><span class="lineno"> 5514</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;anglesy&quot;</span>))</div>
<div class="line"><a id="l05515" name="l05515"></a><span class="lineno"> 5515</span>    {</div>
<div class="line"><a id="l05516" name="l05516"></a><span class="lineno"> 5516</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05517" name="l05517"></a><span class="lineno"> 5517</span>        {</div>
<div class="line"><a id="l05518" name="l05518"></a><span class="lineno"> 5518</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05519" name="l05519"></a><span class="lineno"> 5519</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05520" name="l05520"></a><span class="lineno"> 5520</span>        }</div>
<div class="line"><a id="l05521" name="l05521"></a><span class="lineno"> 5521</span>        angles[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05522" name="l05522"></a><span class="lineno"> 5522</span>    }</div>
<div class="line"><a id="l05523" name="l05523"></a><span class="lineno"> 5523</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;anglesz&quot;</span>))</div>
<div class="line"><a id="l05524" name="l05524"></a><span class="lineno"> 5524</span>    {</div>
<div class="line"><a id="l05525" name="l05525"></a><span class="lineno"> 5525</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05526" name="l05526"></a><span class="lineno"> 5526</span>        {</div>
<div class="line"><a id="l05527" name="l05527"></a><span class="lineno"> 5527</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05528" name="l05528"></a><span class="lineno"> 5528</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05529" name="l05529"></a><span class="lineno"> 5529</span>        }</div>
<div class="line"><a id="l05530" name="l05530"></a><span class="lineno"> 5530</span>        angles[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05531" name="l05531"></a><span class="lineno"> 5531</span>    }</div>
<div class="line"><a id="l05532" name="l05532"></a><span class="lineno"> 5532</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;color&quot;</span>))</div>
<div class="line"><a id="l05533" name="l05533"></a><span class="lineno"> 5533</span>    {</div>
<div class="line"><a id="l05534" name="l05534"></a><span class="lineno"> 5534</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 5)</div>
<div class="line"><a id="l05535" name="l05535"></a><span class="lineno"> 5535</span>        {</div>
<div class="line"><a id="l05536" name="l05536"></a><span class="lineno"> 5536</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s red green blue\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05537" name="l05537"></a><span class="lineno"> 5537</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05538" name="l05538"></a><span class="lineno"> 5538</span>        }</div>
<div class="line"><a id="l05539" name="l05539"></a><span class="lineno"> 5539</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05540" name="l05540"></a><span class="lineno"> 5540</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 3));</div>
<div class="line"><a id="l05541" name="l05541"></a><span class="lineno"> 5541</span>        <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 4));</div>
<div class="line"><a id="l05542" name="l05542"></a><span class="lineno"> 5542</span>    }</div>
<div class="line"><a id="l05543" name="l05543"></a><span class="lineno"> 5543</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;radius&quot;</span>))</div>
<div class="line"><a id="l05544" name="l05544"></a><span class="lineno"> 5544</span>    {</div>
<div class="line"><a id="l05545" name="l05545"></a><span class="lineno"> 5545</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05546" name="l05546"></a><span class="lineno"> 5546</span>        {</div>
<div class="line"><a id="l05547" name="l05547"></a><span class="lineno"> 5547</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05548" name="l05548"></a><span class="lineno"> 5548</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05549" name="l05549"></a><span class="lineno"> 5549</span>        }</div>
<div class="line"><a id="l05550" name="l05550"></a><span class="lineno"> 5550</span>        radius = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05551" name="l05551"></a><span class="lineno"> 5551</span>    }</div>
<div class="line"><a id="l05552" name="l05552"></a><span class="lineno"> 5552</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;colorscale&quot;</span>))</div>
<div class="line"><a id="l05553" name="l05553"></a><span class="lineno"> 5553</span>    {</div>
<div class="line"><a id="l05554" name="l05554"></a><span class="lineno"> 5554</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) == 3)</div>
<div class="line"><a id="l05555" name="l05555"></a><span class="lineno"> 5555</span>        {</div>
<div class="line"><a id="l05556" name="l05556"></a><span class="lineno"> 5556</span>            <span class="keywordtype">double</span> scale = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05557" name="l05557"></a><span class="lineno"> 5557</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] *= scale;</div>
<div class="line"><a id="l05558" name="l05558"></a><span class="lineno"> 5558</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] *= scale;</div>
<div class="line"><a id="l05559" name="l05559"></a><span class="lineno"> 5559</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] *= scale;</div>
<div class="line"><a id="l05560" name="l05560"></a><span class="lineno"> 5560</span>        }</div>
<div class="line"><a id="l05561" name="l05561"></a><span class="lineno"> 5561</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l05562" name="l05562"></a><span class="lineno"> 5562</span>        {</div>
<div class="line"><a id="l05563" name="l05563"></a><span class="lineno"> 5563</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 5)</div>
<div class="line"><a id="l05564" name="l05564"></a><span class="lineno"> 5564</span>            {</div>
<div class="line"><a id="l05565" name="l05565"></a><span class="lineno"> 5565</span>                <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s red green blue  (OR grey instead of red green blue)\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05566" name="l05566"></a><span class="lineno"> 5566</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05567" name="l05567"></a><span class="lineno"> 5567</span>            }</div>
<div class="line"><a id="l05568" name="l05568"></a><span class="lineno"> 5568</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[0] *= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05569" name="l05569"></a><span class="lineno"> 5569</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[1] *= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 3));</div>
<div class="line"><a id="l05570" name="l05570"></a><span class="lineno"> 5570</span>            <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[2] *= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 4));</div>
<div class="line"><a id="l05571" name="l05571"></a><span class="lineno"> 5571</span>        }</div>
<div class="line"><a id="l05572" name="l05572"></a><span class="lineno"> 5572</span>    }</div>
<div class="line"><a id="l05573" name="l05573"></a><span class="lineno"> 5573</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;radiusscale&quot;</span>) || !<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;sizescale&quot;</span>))</div>
<div class="line"><a id="l05574" name="l05574"></a><span class="lineno"> 5574</span>    {</div>
<div class="line"><a id="l05575" name="l05575"></a><span class="lineno"> 5575</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05576" name="l05576"></a><span class="lineno"> 5576</span>        {</div>
<div class="line"><a id="l05577" name="l05577"></a><span class="lineno"> 5577</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05578" name="l05578"></a><span class="lineno"> 5578</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05579" name="l05579"></a><span class="lineno"> 5579</span>        }</div>
<div class="line"><a id="l05580" name="l05580"></a><span class="lineno"> 5580</span>        radius *= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05581" name="l05581"></a><span class="lineno"> 5581</span>    }</div>
<div class="line"><a id="l05582" name="l05582"></a><span class="lineno"> 5582</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;style&quot;</span>))</div>
<div class="line"><a id="l05583" name="l05583"></a><span class="lineno"> 5583</span>    {</div>
<div class="line"><a id="l05584" name="l05584"></a><span class="lineno"> 5584</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05585" name="l05585"></a><span class="lineno"> 5585</span>        {</div>
<div class="line"><a id="l05586" name="l05586"></a><span class="lineno"> 5586</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05587" name="l05587"></a><span class="lineno"> 5587</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05588" name="l05588"></a><span class="lineno"> 5588</span>        }</div>
<div class="line"><a id="l05589" name="l05589"></a><span class="lineno"> 5589</span>        style = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05590" name="l05590"></a><span class="lineno"> 5590</span>    }</div>
<div class="line"><a id="l05591" name="l05591"></a><span class="lineno"> 5591</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;cubemap&quot;</span>))</div>
<div class="line"><a id="l05592" name="l05592"></a><span class="lineno"> 5592</span>    {</div>
<div class="line"><a id="l05593" name="l05593"></a><span class="lineno"> 5593</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) &gt; 3)</div>
<div class="line"><a id="l05594" name="l05594"></a><span class="lineno"> 5594</span>        {</div>
<div class="line"><a id="l05595" name="l05595"></a><span class="lineno"> 5595</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05596" name="l05596"></a><span class="lineno"> 5596</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05597" name="l05597"></a><span class="lineno"> 5597</span>        }</div>
<div class="line"><a id="l05598" name="l05598"></a><span class="lineno"> 5598</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) == 3)</div>
<div class="line"><a id="l05599" name="l05599"></a><span class="lineno"> 5599</span>            <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(cubemapname, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2), <span class="keyword">sizeof</span>(cubemapname));</div>
<div class="line"><a id="l05600" name="l05600"></a><span class="lineno"> 5600</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l05601" name="l05601"></a><span class="lineno"> 5601</span>            cubemapname[0] = 0;</div>
<div class="line"><a id="l05602" name="l05602"></a><span class="lineno"> 5602</span>    }</div>
<div class="line"><a id="l05603" name="l05603"></a><span class="lineno"> 5603</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;shadows&quot;</span>))</div>
<div class="line"><a id="l05604" name="l05604"></a><span class="lineno"> 5604</span>    {</div>
<div class="line"><a id="l05605" name="l05605"></a><span class="lineno"> 5605</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05606" name="l05606"></a><span class="lineno"> 5606</span>        {</div>
<div class="line"><a id="l05607" name="l05607"></a><span class="lineno"> 5607</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05608" name="l05608"></a><span class="lineno"> 5608</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05609" name="l05609"></a><span class="lineno"> 5609</span>        }</div>
<div class="line"><a id="l05610" name="l05610"></a><span class="lineno"> 5610</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadows</a> = <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2)[0] == <span class="charliteral">&#39;y&#39;</span> || <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2)[0] == <span class="charliteral">&#39;Y&#39;</span> || <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2)[0] == <span class="charliteral">&#39;t&#39;</span> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05611" name="l05611"></a><span class="lineno"> 5611</span>    }</div>
<div class="line"><a id="l05612" name="l05612"></a><span class="lineno"> 5612</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;corona&quot;</span>))</div>
<div class="line"><a id="l05613" name="l05613"></a><span class="lineno"> 5613</span>    {</div>
<div class="line"><a id="l05614" name="l05614"></a><span class="lineno"> 5614</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05615" name="l05615"></a><span class="lineno"> 5615</span>        {</div>
<div class="line"><a id="l05616" name="l05616"></a><span class="lineno"> 5616</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05617" name="l05617"></a><span class="lineno"> 5617</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05618" name="l05618"></a><span class="lineno"> 5618</span>        }</div>
<div class="line"><a id="l05619" name="l05619"></a><span class="lineno"> 5619</span>        corona = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05620" name="l05620"></a><span class="lineno"> 5620</span>    }</div>
<div class="line"><a id="l05621" name="l05621"></a><span class="lineno"> 5621</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;coronasize&quot;</span>))</div>
<div class="line"><a id="l05622" name="l05622"></a><span class="lineno"> 5622</span>    {</div>
<div class="line"><a id="l05623" name="l05623"></a><span class="lineno"> 5623</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05624" name="l05624"></a><span class="lineno"> 5624</span>        {</div>
<div class="line"><a id="l05625" name="l05625"></a><span class="lineno"> 5625</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05626" name="l05626"></a><span class="lineno"> 5626</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05627" name="l05627"></a><span class="lineno"> 5627</span>        }</div>
<div class="line"><a id="l05628" name="l05628"></a><span class="lineno"> 5628</span>        coronasizescale = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05629" name="l05629"></a><span class="lineno"> 5629</span>    }</div>
<div class="line"><a id="l05630" name="l05630"></a><span class="lineno"> 5630</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;ambient&quot;</span>))</div>
<div class="line"><a id="l05631" name="l05631"></a><span class="lineno"> 5631</span>    {</div>
<div class="line"><a id="l05632" name="l05632"></a><span class="lineno"> 5632</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05633" name="l05633"></a><span class="lineno"> 5633</span>        {</div>
<div class="line"><a id="l05634" name="l05634"></a><span class="lineno"> 5634</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05635" name="l05635"></a><span class="lineno"> 5635</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05636" name="l05636"></a><span class="lineno"> 5636</span>        }</div>
<div class="line"><a id="l05637" name="l05637"></a><span class="lineno"> 5637</span>        ambientscale = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05638" name="l05638"></a><span class="lineno"> 5638</span>    }</div>
<div class="line"><a id="l05639" name="l05639"></a><span class="lineno"> 5639</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;diffuse&quot;</span>))</div>
<div class="line"><a id="l05640" name="l05640"></a><span class="lineno"> 5640</span>    {</div>
<div class="line"><a id="l05641" name="l05641"></a><span class="lineno"> 5641</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05642" name="l05642"></a><span class="lineno"> 5642</span>        {</div>
<div class="line"><a id="l05643" name="l05643"></a><span class="lineno"> 5643</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05644" name="l05644"></a><span class="lineno"> 5644</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05645" name="l05645"></a><span class="lineno"> 5645</span>        }</div>
<div class="line"><a id="l05646" name="l05646"></a><span class="lineno"> 5646</span>        diffusescale = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05647" name="l05647"></a><span class="lineno"> 5647</span>    }</div>
<div class="line"><a id="l05648" name="l05648"></a><span class="lineno"> 5648</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;specular&quot;</span>))</div>
<div class="line"><a id="l05649" name="l05649"></a><span class="lineno"> 5649</span>    {</div>
<div class="line"><a id="l05650" name="l05650"></a><span class="lineno"> 5650</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05651" name="l05651"></a><span class="lineno"> 5651</span>        {</div>
<div class="line"><a id="l05652" name="l05652"></a><span class="lineno"> 5652</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05653" name="l05653"></a><span class="lineno"> 5653</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05654" name="l05654"></a><span class="lineno"> 5654</span>        }</div>
<div class="line"><a id="l05655" name="l05655"></a><span class="lineno"> 5655</span>        specularscale = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atof</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05656" name="l05656"></a><span class="lineno"> 5656</span>    }</div>
<div class="line"><a id="l05657" name="l05657"></a><span class="lineno"> 5657</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;normalmode&quot;</span>))</div>
<div class="line"><a id="l05658" name="l05658"></a><span class="lineno"> 5658</span>    {</div>
<div class="line"><a id="l05659" name="l05659"></a><span class="lineno"> 5659</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05660" name="l05660"></a><span class="lineno"> 5660</span>        {</div>
<div class="line"><a id="l05661" name="l05661"></a><span class="lineno"> 5661</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05662" name="l05662"></a><span class="lineno"> 5662</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05663" name="l05663"></a><span class="lineno"> 5663</span>        }</div>
<div class="line"><a id="l05664" name="l05664"></a><span class="lineno"> 5664</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">normalmode</a> = <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2)[0] == <span class="charliteral">&#39;y&#39;</span> || <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2)[0] == <span class="charliteral">&#39;Y&#39;</span> || <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2)[0] == <span class="charliteral">&#39;t&#39;</span> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05665" name="l05665"></a><span class="lineno"> 5665</span>    }</div>
<div class="line"><a id="l05666" name="l05666"></a><span class="lineno"> 5666</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">strcmp</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1), <span class="stringliteral">&quot;realtimemode&quot;</span>))</div>
<div class="line"><a id="l05667" name="l05667"></a><span class="lineno"> 5667</span>    {</div>
<div class="line"><a id="l05668" name="l05668"></a><span class="lineno"> 5668</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a>(cmd) != 3)</div>
<div class="line"><a id="l05669" name="l05669"></a><span class="lineno"> 5669</span>        {</div>
<div class="line"><a id="l05670" name="l05670"></a><span class="lineno"> 5670</span>            <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;usage: r_editlights_edit %s value\n&quot;</span>, <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 1));</div>
<div class="line"><a id="l05671" name="l05671"></a><span class="lineno"> 5671</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05672" name="l05672"></a><span class="lineno"> 5672</span>        }</div>
<div class="line"><a id="l05673" name="l05673"></a><span class="lineno"> 5673</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">realtimemode</a> = <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2)[0] == <span class="charliteral">&#39;y&#39;</span> || <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2)[0] == <span class="charliteral">&#39;Y&#39;</span> || <a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2)[0] == <span class="charliteral">&#39;t&#39;</span> || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">atoi</a>(<a class="code hl_function" href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a>(cmd, 2));</div>
<div class="line"><a id="l05674" name="l05674"></a><span class="lineno"> 5674</span>    }</div>
<div class="line"><a id="l05675" name="l05675"></a><span class="lineno"> 5675</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l05676" name="l05676"></a><span class="lineno"> 5676</span>    {</div>
<div class="line"><a id="l05677" name="l05677"></a><span class="lineno"> 5677</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;usage: r_editlights_edit [property] [value]\n&quot;</span>);</div>
<div class="line"><a id="l05678" name="l05678"></a><span class="lineno"> 5678</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Selected light&#39;s properties:\n&quot;</span>);</div>
<div class="line"><a id="l05679" name="l05679"></a><span class="lineno"> 5679</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Origin       : %f %f %f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[0], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[1], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[2]);</div>
<div class="line"><a id="l05680" name="l05680"></a><span class="lineno"> 5680</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Angles       : %f %f %f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[0], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[1], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[2]);</div>
<div class="line"><a id="l05681" name="l05681"></a><span class="lineno"> 5681</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Color        : %f %f %f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[0], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[1], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[2]);</div>
<div class="line"><a id="l05682" name="l05682"></a><span class="lineno"> 5682</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Radius       : %f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a>);</div>
<div class="line"><a id="l05683" name="l05683"></a><span class="lineno"> 5683</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Corona       : %f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a>);</div>
<div class="line"><a id="l05684" name="l05684"></a><span class="lineno"> 5684</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Style        : %i\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a>);</div>
<div class="line"><a id="l05685" name="l05685"></a><span class="lineno"> 5685</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Shadows      : %s\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a> ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div>
<div class="line"><a id="l05686" name="l05686"></a><span class="lineno"> 5686</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Cubemap      : %s\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>);</div>
<div class="line"><a id="l05687" name="l05687"></a><span class="lineno"> 5687</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;CoronaSize   : %f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">coronasizescale</a>);</div>
<div class="line"><a id="l05688" name="l05688"></a><span class="lineno"> 5688</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Ambient      : %f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">ambientscale</a>);</div>
<div class="line"><a id="l05689" name="l05689"></a><span class="lineno"> 5689</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Diffuse      : %f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">diffusescale</a>);</div>
<div class="line"><a id="l05690" name="l05690"></a><span class="lineno"> 5690</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;Specular     : %f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">specularscale</a>);</div>
<div class="line"><a id="l05691" name="l05691"></a><span class="lineno"> 5691</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;NormalMode   : %s\n&quot;</span>, (<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a> &amp; <a class="code hl_define" href="client_8h.html#a02b341fb62e7f8268a5f7f684ab0f2f2">LIGHTFLAG_NORMALMODE</a>) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div>
<div class="line"><a id="l05692" name="l05692"></a><span class="lineno"> 5692</span>        <a class="code hl_function" href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a>(<span class="stringliteral">&quot;RealTimeMode : %s\n&quot;</span>, (<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a> &amp; <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a>) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div>
<div class="line"><a id="l05693" name="l05693"></a><span class="lineno"> 5693</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05694" name="l05694"></a><span class="lineno"> 5694</span>    }</div>
<div class="line"><a id="l05695" name="l05695"></a><span class="lineno"> 5695</span>    flags = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">normalmode</a> ? <a class="code hl_define" href="client_8h.html#a02b341fb62e7f8268a5f7f684ab0f2f2">LIGHTFLAG_NORMALMODE</a> : 0) | (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">realtimemode</a> ? <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a> : 0);</div>
<div class="line"><a id="l05696" name="l05696"></a><span class="lineno"> 5696</span>    <a class="code hl_function" href="r__shadow_8c.html#af8b412ff853a18ec537a9a8f40c12b29">R_Shadow_UpdateWorldLight</a>(<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>, origin, angles, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, radius, corona, style, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">shadows</a>, cubemapname, coronasizescale, ambientscale, diffusescale, specularscale, flags);</div>
<div class="line"><a id="l05697" name="l05697"></a><span class="lineno"> 5697</span>}</div>
</div>
<div class="line"><a id="l05698" name="l05698"></a><span class="lineno"> 5698</span> </div>
<div class="foldopen" id="foldopen05699" data-start="{" data-end="}">
<div class="line"><a id="l05699" name="l05699"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a0e5a8082e8b4c9ea719a863f5fb2091e"> 5699</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a0e5a8082e8b4c9ea719a863f5fb2091e">R_Shadow_EditLights_EditAll_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05700" name="l05700"></a><span class="lineno"> 5700</span>{</div>
<div class="line"><a id="l05701" name="l05701"></a><span class="lineno"> 5701</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>;</div>
<div class="line"><a id="l05702" name="l05702"></a><span class="lineno"> 5702</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldselected</a>;</div>
<div class="line"><a id="l05703" name="l05703"></a><span class="lineno"> 5703</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;</div>
<div class="line"><a id="l05704" name="l05704"></a><span class="lineno"> 5704</span> </div>
<div class="line"><a id="l05705" name="l05705"></a><span class="lineno"> 5705</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l05706" name="l05706"></a><span class="lineno"> 5706</span>    {</div>
<div class="line"><a id="l05707" name="l05707"></a><span class="lineno"> 5707</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Cannot edit lights when not in editing mode. Set r_editlights to 1.\n&quot;</span>);</div>
<div class="line"><a id="l05708" name="l05708"></a><span class="lineno"> 5708</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05709" name="l05709"></a><span class="lineno"> 5709</span>    }</div>
<div class="line"><a id="l05710" name="l05710"></a><span class="lineno"> 5710</span> </div>
<div class="line"><a id="l05711" name="l05711"></a><span class="lineno"> 5711</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldselected</a> = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>;</div>
<div class="line"><a id="l05712" name="l05712"></a><span class="lineno"> 5712</span>    <span class="comment">// EditLights doesn&#39;t seem to have a &quot;remove&quot; command or something so:</span></div>
<div class="line"><a id="l05713" name="l05713"></a><span class="lineno"> 5713</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> = <a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>); <span class="comment">// checked</span></div>
<div class="line"><a id="l05714" name="l05714"></a><span class="lineno"> 5714</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l05715" name="l05715"></a><span class="lineno"> 5715</span>    {</div>
<div class="line"><a id="l05716" name="l05716"></a><span class="lineno"> 5716</span>        light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l05717" name="l05717"></a><span class="lineno"> 5717</span>        <span class="keywordflow">if</span> (!light)</div>
<div class="line"><a id="l05718" name="l05718"></a><span class="lineno"> 5718</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05719" name="l05719"></a><span class="lineno"> 5719</span>        <a class="code hl_function" href="r__shadow_8c.html#a0b1626383078bb86e99de41bce584220">R_Shadow_SelectLight</a>(light);</div>
<div class="line"><a id="l05720" name="l05720"></a><span class="lineno"> 5720</span>        <a class="code hl_function" href="r__shadow_8c.html#a55f56f45cb9e5ba448db1b360cc826f0">R_Shadow_EditLights_Edit_f</a>(<a class="code hl_variable" href="cmd_8c.html#aa617fb9e2fe1edc8bd6ce0fafccd3626">cmd_local</a>);</div>
<div class="line"><a id="l05721" name="l05721"></a><span class="lineno"> 5721</span>    }</div>
<div class="line"><a id="l05722" name="l05722"></a><span class="lineno"> 5722</span>    <span class="comment">// return to old selected (to not mess editing once selection is locked)</span></div>
<div class="line"><a id="l05723" name="l05723"></a><span class="lineno"> 5723</span>    <a class="code hl_function" href="r__shadow_8c.html#a0b1626383078bb86e99de41bce584220">R_Shadow_SelectLight</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldselected</a>);</div>
<div class="line"><a id="l05724" name="l05724"></a><span class="lineno"> 5724</span>}</div>
</div>
<div class="line"><a id="l05725" name="l05725"></a><span class="lineno"> 5725</span> </div>
<div class="foldopen" id="foldopen05726" data-start="{" data-end="}">
<div class="line"><a id="l05726" name="l05726"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a1b1a262e49e3a2230f800a256672388c"> 5726</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a1b1a262e49e3a2230f800a256672388c">R_Shadow_EditLights_DrawSelectedLightProperties</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l05727" name="l05727"></a><span class="lineno"> 5727</span>{</div>
<div class="line"><a id="l05728" name="l05728"></a><span class="lineno"> 5728</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightnumber</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightcount</a>;</div>
<div class="line"><a id="l05729" name="l05729"></a><span class="lineno"> 5729</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;</div>
<div class="line"><a id="l05730" name="l05730"></a><span class="lineno"> 5730</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *light;</div>
<div class="line"><a id="l05731" name="l05731"></a><span class="lineno"> 5731</span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>[256];</div>
<div class="line"><a id="l05732" name="l05732"></a><span class="lineno"> 5732</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>;</div>
<div class="line"><a id="l05733" name="l05733"></a><span class="lineno"> 5733</span> </div>
<div class="line"><a id="l05734" name="l05734"></a><span class="lineno"> 5734</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l05735" name="l05735"></a><span class="lineno"> 5735</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05736" name="l05736"></a><span class="lineno"> 5736</span> </div>
<div class="line"><a id="l05737" name="l05737"></a><span class="lineno"> 5737</span>    <span class="comment">// update cvars so QC can query them</span></div>
<div class="line"><a id="l05738" name="l05738"></a><span class="lineno"> 5738</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>)</div>
<div class="line"><a id="l05739" name="l05739"></a><span class="lineno"> 5739</span>    {</div>
<div class="line"><a id="l05740" name="l05740"></a><span class="lineno"> 5740</span>        <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;%f %f %f&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[0], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[1], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[2]);</div>
<div class="line"><a id="l05741" name="l05741"></a><span class="lineno"> 5741</span>        <a class="code hl_function" href="cvar_8c.html#a6f37a084abf4715928f1a004181866f8">Cvar_SetQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a76b3a862e8e0f84844f788e717f412fb">r_editlights_current_origin</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>);</div>
<div class="line"><a id="l05742" name="l05742"></a><span class="lineno"> 5742</span>        <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;%f %f %f&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[0], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[1], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[2]);</div>
<div class="line"><a id="l05743" name="l05743"></a><span class="lineno"> 5743</span>        <a class="code hl_function" href="cvar_8c.html#a6f37a084abf4715928f1a004181866f8">Cvar_SetQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a11bc0f6e4a8eae1a369b249b999fefb1">r_editlights_current_angles</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>);</div>
<div class="line"><a id="l05744" name="l05744"></a><span class="lineno"> 5744</span>        <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;%f %f %f&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[0], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[1], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[2]);</div>
<div class="line"><a id="l05745" name="l05745"></a><span class="lineno"> 5745</span>        <a class="code hl_function" href="cvar_8c.html#a6f37a084abf4715928f1a004181866f8">Cvar_SetQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a228f216a9270733c064700839e9fa188">r_editlights_current_color</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>);</div>
<div class="line"><a id="l05746" name="l05746"></a><span class="lineno"> 5746</span>        <a class="code hl_function" href="cvar_8c.html#a65b55ce35a5bd18e379065651d5d6e15">Cvar_SetValueQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ae150b57d6c0612f7709e613e7aced1d3">r_editlights_current_radius</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a>);</div>
<div class="line"><a id="l05747" name="l05747"></a><span class="lineno"> 5747</span>        <a class="code hl_function" href="cvar_8c.html#a65b55ce35a5bd18e379065651d5d6e15">Cvar_SetValueQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a8944edc1e16483db6f1dabdaaaf491b8">r_editlights_current_corona</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a>);</div>
<div class="line"><a id="l05748" name="l05748"></a><span class="lineno"> 5748</span>        <a class="code hl_function" href="cvar_8c.html#a65b55ce35a5bd18e379065651d5d6e15">Cvar_SetValueQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a72a967a1ed0fa627326360f636a767ca">r_editlights_current_coronasize</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">coronasizescale</a>);</div>
<div class="line"><a id="l05749" name="l05749"></a><span class="lineno"> 5749</span>        <a class="code hl_function" href="cvar_8c.html#a65b55ce35a5bd18e379065651d5d6e15">Cvar_SetValueQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a327b768a966dbb9b7b2b9ed48fe87c40">r_editlights_current_style</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a>);</div>
<div class="line"><a id="l05750" name="l05750"></a><span class="lineno"> 5750</span>        <a class="code hl_function" href="cvar_8c.html#a65b55ce35a5bd18e379065651d5d6e15">Cvar_SetValueQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af2a4d49ec984ad0127331cba8e7debf1">r_editlights_current_shadows</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a>);</div>
<div class="line"><a id="l05751" name="l05751"></a><span class="lineno"> 5751</span>        <a class="code hl_function" href="cvar_8c.html#a6f37a084abf4715928f1a004181866f8">Cvar_SetQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a6b2ce902beafb95b38fcdd788ddab802">r_editlights_current_cubemap</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>);</div>
<div class="line"><a id="l05752" name="l05752"></a><span class="lineno"> 5752</span>        <a class="code hl_function" href="cvar_8c.html#a65b55ce35a5bd18e379065651d5d6e15">Cvar_SetValueQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a9b257bcf33a5e2829102f091b0981006">r_editlights_current_ambient</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">ambientscale</a>);</div>
<div class="line"><a id="l05753" name="l05753"></a><span class="lineno"> 5753</span>        <a class="code hl_function" href="cvar_8c.html#a65b55ce35a5bd18e379065651d5d6e15">Cvar_SetValueQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#acd95c1f96dfaf981d25cc90ffe63f8eb">r_editlights_current_diffuse</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">diffusescale</a>);</div>
<div class="line"><a id="l05754" name="l05754"></a><span class="lineno"> 5754</span>        <a class="code hl_function" href="cvar_8c.html#a65b55ce35a5bd18e379065651d5d6e15">Cvar_SetValueQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aeb7fd587e0d07d10f6a425cb693d08e2">r_editlights_current_specular</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">specularscale</a>);</div>
<div class="line"><a id="l05755" name="l05755"></a><span class="lineno"> 5755</span>        <a class="code hl_function" href="cvar_8c.html#a65b55ce35a5bd18e379065651d5d6e15">Cvar_SetValueQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a491dbf84ab84d3d9a981d56f82d626f3">r_editlights_current_normalmode</a>, (<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a> &amp; <a class="code hl_define" href="client_8h.html#a02b341fb62e7f8268a5f7f684ab0f2f2">LIGHTFLAG_NORMALMODE</a>) ? 1 : 0);</div>
<div class="line"><a id="l05756" name="l05756"></a><span class="lineno"> 5756</span>        <a class="code hl_function" href="cvar_8c.html#a65b55ce35a5bd18e379065651d5d6e15">Cvar_SetValueQuick</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a0a5c0469e4a2bdc175d837d81184f8a0">r_editlights_current_realtimemode</a>, (<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a> &amp; <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a>) ? 1 : 0);</div>
<div class="line"><a id="l05757" name="l05757"></a><span class="lineno"> 5757</span>    }</div>
<div class="line"><a id="l05758" name="l05758"></a><span class="lineno"> 5758</span> </div>
<div class="line"><a id="l05759" name="l05759"></a><span class="lineno"> 5759</span>    <span class="comment">// draw properties on screen</span></div>
<div class="line"><a id="l05760" name="l05760"></a><span class="lineno"> 5760</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#afeed6d6e238decaa3133bc5414df66d2">r_editlights_drawproperties</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l05761" name="l05761"></a><span class="lineno"> 5761</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05762" name="l05762"></a><span class="lineno"> 5762</span>    <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> = <a class="code hl_variable" href="cl__screen_8c.html#ae58b44b922d5902939340cd2f0bd7a38">vid_conwidth</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> - 320;</div>
<div class="line"><a id="l05763" name="l05763"></a><span class="lineno"> 5763</span>    <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> = 5;</div>
<div class="line"><a id="l05764" name="l05764"></a><span class="lineno"> 5764</span>    <a class="code hl_function" href="draw_8h.html#a42f38f468dbff7db26f70058ed779b06">DrawQ_Pic</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>-5, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>-5, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 250, 243, 0, 0, 0, 0.75, 0);</div>
<div class="line"><a id="l05765" name="l05765"></a><span class="lineno"> 5765</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightnumber</a> = -1;</div>
<div class="line"><a id="l05766" name="l05766"></a><span class="lineno"> 5766</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightcount</a> = 0;</div>
<div class="line"><a id="l05767" name="l05767"></a><span class="lineno"> 5767</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a> = <a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>); <span class="comment">// checked</span></div>
<div class="line"><a id="l05768" name="l05768"></a><span class="lineno"> 5768</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> = 0;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a> &lt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">range</a>;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>++)</div>
<div class="line"><a id="l05769" name="l05769"></a><span class="lineno"> 5769</span>    {</div>
<div class="line"><a id="l05770" name="l05770"></a><span class="lineno"> 5770</span>        light = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>);</div>
<div class="line"><a id="l05771" name="l05771"></a><span class="lineno"> 5771</span>        <span class="keywordflow">if</span> (!light)</div>
<div class="line"><a id="l05772" name="l05772"></a><span class="lineno"> 5772</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05773" name="l05773"></a><span class="lineno"> 5773</span>        <span class="keywordflow">if</span> (light == <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>)</div>
<div class="line"><a id="l05774" name="l05774"></a><span class="lineno"> 5774</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightnumber</a> = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightindex</a>;</div>
<div class="line"><a id="l05775" name="l05775"></a><span class="lineno"> 5775</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightcount</a>++;</div>
<div class="line"><a id="l05776" name="l05776"></a><span class="lineno"> 5776</span>    }</div>
<div class="line"><a id="l05777" name="l05777"></a><span class="lineno"> 5777</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Cursor origin: %.0f %.0f %.0f&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a231b12d52440fde590bcee63e4d07d64">r_editlights_cursorlocation</a>[0], <a class="code hl_variable" href="r__shadow_8c.html#a231b12d52440fde590bcee63e4d07d64">r_editlights_cursorlocation</a>[1], <a class="code hl_variable" href="r__shadow_8c.html#a231b12d52440fde590bcee63e4d07d64">r_editlights_cursorlocation</a>[2]); <a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">false</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05778" name="l05778"></a><span class="lineno"> 5778</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Total lights : %i active (%i total)&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightcount</a>, (<span class="keywordtype">int</span>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>)); <a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">false</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05779" name="l05779"></a><span class="lineno"> 5779</span>    <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05780" name="l05780"></a><span class="lineno"> 5780</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a> == <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l05781" name="l05781"></a><span class="lineno"> 5781</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05782" name="l05782"></a><span class="lineno"> 5782</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Light #%i properties:&quot;</span>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightnumber</a>);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05783" name="l05783"></a><span class="lineno"> 5783</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Origin       : %.0f %.0f %.0f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[0], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[1], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>[2]);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05784" name="l05784"></a><span class="lineno"> 5784</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Angles       : %.0f %.0f %.0f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[0], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[1], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>[2]);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05785" name="l05785"></a><span class="lineno"> 5785</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Color        : %.2f %.2f %.2f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[0], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[1], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>[2]);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05786" name="l05786"></a><span class="lineno"> 5786</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Radius       : %.0f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a>);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05787" name="l05787"></a><span class="lineno"> 5787</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Corona       : %.0f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a>);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05788" name="l05788"></a><span class="lineno"> 5788</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Style        : %i\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a>);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05789" name="l05789"></a><span class="lineno"> 5789</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Shadows      : %s\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a> ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05790" name="l05790"></a><span class="lineno"> 5790</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Cubemap      : %s\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05791" name="l05791"></a><span class="lineno"> 5791</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;CoronaSize   : %.2f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">coronasizescale</a>);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05792" name="l05792"></a><span class="lineno"> 5792</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Ambient      : %.2f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">ambientscale</a>);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05793" name="l05793"></a><span class="lineno"> 5793</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Diffuse      : %.2f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">diffusescale</a>);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05794" name="l05794"></a><span class="lineno"> 5794</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Specular     : %.2f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">specularscale</a>);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05795" name="l05795"></a><span class="lineno"> 5795</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;NormalMode   : %s\n&quot;</span>, (<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a> &amp; <a class="code hl_define" href="client_8h.html#a02b341fb62e7f8268a5f7f684ab0f2f2">LIGHTFLAG_NORMALMODE</a>) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05796" name="l05796"></a><span class="lineno"> 5796</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;RealTimeMode : %s\n&quot;</span>, (<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a> &amp; <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a>) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);<a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>);<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05797" name="l05797"></a><span class="lineno"> 5797</span>    <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05798" name="l05798"></a><span class="lineno"> 5798</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Render stats\n&quot;</span>); <a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>); <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05799" name="l05799"></a><span class="lineno"> 5799</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Current color: %.3f %.3f %.3f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>[0], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>[1], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>[2]); <a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>); <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05800" name="l05800"></a><span class="lineno"> 5800</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Shadow size  : %ix%ix6\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#a241dacf73c783ce200946897b338ca04">shadowmapatlassidesize</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#a241dacf73c783ce200946897b338ca04">shadowmapatlassidesize</a>); <a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>); <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05801" name="l05801"></a><span class="lineno"> 5801</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;World surfs  : %i\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#abd7dcefaa62c6eefd09f6f80de65487a">cached_numsurfaces</a>); <a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>); <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05802" name="l05802"></a><span class="lineno"> 5802</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Shadow ents  : %i + %i noself\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#a853096703e9ec8500de7c912cba40084">cached_numshadowentities</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#adae53566fd63b1633f5f3110dd8048c4">cached_numshadowentities_noselfshadow</a>); <a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>); <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05803" name="l05803"></a><span class="lineno"> 5803</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;Lit ents     : %i + %i noself\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#a3288a752fb67a0bb1b531a3230b9cb60">cached_numlightentities</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#a70f4709295c5b83a5ed0c472f7b7a24d">cached_numlightentities_noselfshadow</a>); <a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>); <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05804" name="l05804"></a><span class="lineno"> 5804</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;BG photons   : %.3f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#ac93c51702312e67d26a545caaea9a286">bouncegrid_photons</a>); <a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>); <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05805" name="l05805"></a><span class="lineno"> 5805</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;BG radius    : %.0f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#a9e0c20f5fffcd612cff745e2bd7a8fa7">bouncegrid_effectiveradius</a>); <a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>); <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05806" name="l05806"></a><span class="lineno"> 5806</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;BG color     : %.3f %.3f %.3f\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#ad693ee6a96c479120992214f8a3702f5">bouncegrid_photoncolor</a>[0], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#ad693ee6a96c479120992214f8a3702f5">bouncegrid_photoncolor</a>[1], <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#ad693ee6a96c479120992214f8a3702f5">bouncegrid_photoncolor</a>[2]); <a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>); <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05807" name="l05807"></a><span class="lineno"> 5807</span>    <a class="code hl_function" href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>), <span class="stringliteral">&quot;BG stats     : %i traces %i hits\n&quot;</span>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#a33614e6f1e8d62a71d79e57a9b3cf80e">bouncegrid_traces</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">rtlight</a>.<a class="code hl_variable" href="structrtlight__t.html#ac87b49cfb5af0aa6822590972ed574d1">bouncegrid_hits</a>); <a class="code hl_function" href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a>(<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">temp</a>, 0, 8, 8, 1, 1, 1, 1, 0, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, <a class="code hl_define" href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a>); <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> += 8;</div>
<div class="line"><a id="l05808" name="l05808"></a><span class="lineno"> 5808</span>}</div>
</div>
<div class="line"><a id="l05809" name="l05809"></a><span class="lineno"> 5809</span> </div>
<div class="foldopen" id="foldopen05810" data-start="{" data-end="}">
<div class="line"><a id="l05810" name="l05810"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a7b925a5e9129dd0f8df1851c169ad312"> 5810</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a7b925a5e9129dd0f8df1851c169ad312">R_Shadow_EditLights_ToggleShadow_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05811" name="l05811"></a><span class="lineno"> 5811</span>{</div>
<div class="line"><a id="l05812" name="l05812"></a><span class="lineno"> 5812</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l05813" name="l05813"></a><span class="lineno"> 5813</span>    {</div>
<div class="line"><a id="l05814" name="l05814"></a><span class="lineno"> 5814</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Cannot spawn light when not in editing mode.  Set r_editlights to 1.\n&quot;</span>);</div>
<div class="line"><a id="l05815" name="l05815"></a><span class="lineno"> 5815</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05816" name="l05816"></a><span class="lineno"> 5816</span>    }</div>
<div class="line"><a id="l05817" name="l05817"></a><span class="lineno"> 5817</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>)</div>
<div class="line"><a id="l05818" name="l05818"></a><span class="lineno"> 5818</span>    {</div>
<div class="line"><a id="l05819" name="l05819"></a><span class="lineno"> 5819</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;No selected light.\n&quot;</span>);</div>
<div class="line"><a id="l05820" name="l05820"></a><span class="lineno"> 5820</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05821" name="l05821"></a><span class="lineno"> 5821</span>    }</div>
<div class="line"><a id="l05822" name="l05822"></a><span class="lineno"> 5822</span>    <a class="code hl_function" href="r__shadow_8c.html#af8b412ff853a18ec537a9a8f40c12b29">R_Shadow_UpdateWorldLight</a>(<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a>, !<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">coronasizescale</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">ambientscale</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">diffusescale</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">specularscale</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a>);</div>
<div class="line"><a id="l05823" name="l05823"></a><span class="lineno"> 5823</span>}</div>
</div>
<div class="line"><a id="l05824" name="l05824"></a><span class="lineno"> 5824</span> </div>
<div class="foldopen" id="foldopen05825" data-start="{" data-end="}">
<div class="line"><a id="l05825" name="l05825"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a49f9ee527a2c26bb7d24cb81ba976b21"> 5825</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a49f9ee527a2c26bb7d24cb81ba976b21">R_Shadow_EditLights_ToggleCorona_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05826" name="l05826"></a><span class="lineno"> 5826</span>{</div>
<div class="line"><a id="l05827" name="l05827"></a><span class="lineno"> 5827</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l05828" name="l05828"></a><span class="lineno"> 5828</span>    {</div>
<div class="line"><a id="l05829" name="l05829"></a><span class="lineno"> 5829</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Cannot spawn light when not in editing mode.  Set r_editlights to 1.\n&quot;</span>);</div>
<div class="line"><a id="l05830" name="l05830"></a><span class="lineno"> 5830</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05831" name="l05831"></a><span class="lineno"> 5831</span>    }</div>
<div class="line"><a id="l05832" name="l05832"></a><span class="lineno"> 5832</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>)</div>
<div class="line"><a id="l05833" name="l05833"></a><span class="lineno"> 5833</span>    {</div>
<div class="line"><a id="l05834" name="l05834"></a><span class="lineno"> 5834</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;No selected light.\n&quot;</span>);</div>
<div class="line"><a id="l05835" name="l05835"></a><span class="lineno"> 5835</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05836" name="l05836"></a><span class="lineno"> 5836</span>    }</div>
<div class="line"><a id="l05837" name="l05837"></a><span class="lineno"> 5837</span>    <a class="code hl_function" href="r__shadow_8c.html#af8b412ff853a18ec537a9a8f40c12b29">R_Shadow_UpdateWorldLight</a>(<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a>, !<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">coronasizescale</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">ambientscale</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">diffusescale</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">specularscale</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a>);</div>
<div class="line"><a id="l05838" name="l05838"></a><span class="lineno"> 5838</span>}</div>
</div>
<div class="line"><a id="l05839" name="l05839"></a><span class="lineno"> 5839</span> </div>
<div class="foldopen" id="foldopen05840" data-start="{" data-end="}">
<div class="line"><a id="l05840" name="l05840"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a3d91a060d2b02ad488cd77f0fb266791"> 5840</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a3d91a060d2b02ad488cd77f0fb266791">R_Shadow_EditLights_Remove_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05841" name="l05841"></a><span class="lineno"> 5841</span>{</div>
<div class="line"><a id="l05842" name="l05842"></a><span class="lineno"> 5842</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l05843" name="l05843"></a><span class="lineno"> 5843</span>    {</div>
<div class="line"><a id="l05844" name="l05844"></a><span class="lineno"> 5844</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Cannot remove light when not in editing mode.  Set r_editlights to 1.\n&quot;</span>);</div>
<div class="line"><a id="l05845" name="l05845"></a><span class="lineno"> 5845</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05846" name="l05846"></a><span class="lineno"> 5846</span>    }</div>
<div class="line"><a id="l05847" name="l05847"></a><span class="lineno"> 5847</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>)</div>
<div class="line"><a id="l05848" name="l05848"></a><span class="lineno"> 5848</span>    {</div>
<div class="line"><a id="l05849" name="l05849"></a><span class="lineno"> 5849</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;No selected light.\n&quot;</span>);</div>
<div class="line"><a id="l05850" name="l05850"></a><span class="lineno"> 5850</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05851" name="l05851"></a><span class="lineno"> 5851</span>    }</div>
<div class="line"><a id="l05852" name="l05852"></a><span class="lineno"> 5852</span>    <a class="code hl_function" href="r__shadow_8c.html#afaad26a7103dc4357b063cbcc81fcb64">R_Shadow_FreeWorldLight</a>(<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>);</div>
<div class="line"><a id="l05853" name="l05853"></a><span class="lineno"> 5853</span>    <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a> = <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l05854" name="l05854"></a><span class="lineno"> 5854</span>}</div>
</div>
<div class="line"><a id="l05855" name="l05855"></a><span class="lineno"> 5855</span> </div>
<div class="foldopen" id="foldopen05856" data-start="{" data-end="}">
<div class="line"><a id="l05856" name="l05856"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#aff01b51ea186b71010de0ddcf0b98855"> 5856</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#aff01b51ea186b71010de0ddcf0b98855">R_Shadow_EditLights_Help_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05857" name="l05857"></a><span class="lineno"> 5857</span>{</div>
<div class="line"><a id="l05858" name="l05858"></a><span class="lineno"> 5858</span>    <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(</div>
<div class="line"><a id="l05859" name="l05859"></a><span class="lineno"> 5859</span><span class="stringliteral">&quot;Documentation on r_editlights system:\n&quot;</span></div>
<div class="line"><a id="l05860" name="l05860"></a><span class="lineno"> 5860</span><span class="stringliteral">&quot;Settings:\n&quot;</span></div>
<div class="line"><a id="l05861" name="l05861"></a><span class="lineno"> 5861</span><span class="stringliteral">&quot;r_editlights : enable/disable editing mode\n&quot;</span></div>
<div class="line"><a id="l05862" name="l05862"></a><span class="lineno"> 5862</span><span class="stringliteral">&quot;r_editlights_cursordistance : maximum distance of cursor from eye\n&quot;</span></div>
<div class="line"><a id="l05863" name="l05863"></a><span class="lineno"> 5863</span><span class="stringliteral">&quot;r_editlights_cursorpushback : push back cursor this far from surface\n&quot;</span></div>
<div class="line"><a id="l05864" name="l05864"></a><span class="lineno"> 5864</span><span class="stringliteral">&quot;r_editlights_cursorpushoff : push cursor off surface this far\n&quot;</span></div>
<div class="line"><a id="l05865" name="l05865"></a><span class="lineno"> 5865</span><span class="stringliteral">&quot;r_editlights_cursorgrid : snap cursor to grid of this size\n&quot;</span></div>
<div class="line"><a id="l05866" name="l05866"></a><span class="lineno"> 5866</span><span class="stringliteral">&quot;r_editlights_quakelightsizescale : imported quake light entity size scaling\n&quot;</span></div>
<div class="line"><a id="l05867" name="l05867"></a><span class="lineno"> 5867</span><span class="stringliteral">&quot;Commands:\n&quot;</span></div>
<div class="line"><a id="l05868" name="l05868"></a><span class="lineno"> 5868</span><span class="stringliteral">&quot;r_editlights_help : this help\n&quot;</span></div>
<div class="line"><a id="l05869" name="l05869"></a><span class="lineno"> 5869</span><span class="stringliteral">&quot;r_editlights_clear : remove all lights\n&quot;</span></div>
<div class="line"><a id="l05870" name="l05870"></a><span class="lineno"> 5870</span><span class="stringliteral">&quot;r_editlights_reload : reload .rtlights, .lights file, or entities\n&quot;</span></div>
<div class="line"><a id="l05871" name="l05871"></a><span class="lineno"> 5871</span><span class="stringliteral">&quot;r_editlights_lock : lock selection to current light, if already locked - unlock\n&quot;</span></div>
<div class="line"><a id="l05872" name="l05872"></a><span class="lineno"> 5872</span><span class="stringliteral">&quot;r_editlights_save : save to .rtlights file\n&quot;</span></div>
<div class="line"><a id="l05873" name="l05873"></a><span class="lineno"> 5873</span><span class="stringliteral">&quot;r_editlights_spawn : create a light with default settings\n&quot;</span></div>
<div class="line"><a id="l05874" name="l05874"></a><span class="lineno"> 5874</span><span class="stringliteral">&quot;r_editlights_edit command : edit selected light - more documentation below\n&quot;</span></div>
<div class="line"><a id="l05875" name="l05875"></a><span class="lineno"> 5875</span><span class="stringliteral">&quot;r_editlights_remove : remove selected light\n&quot;</span></div>
<div class="line"><a id="l05876" name="l05876"></a><span class="lineno"> 5876</span><span class="stringliteral">&quot;r_editlights_toggleshadow : toggles on/off selected light&#39;s shadow property\n&quot;</span></div>
<div class="line"><a id="l05877" name="l05877"></a><span class="lineno"> 5877</span><span class="stringliteral">&quot;r_editlights_importlightentitiesfrommap : reload light entities\n&quot;</span></div>
<div class="line"><a id="l05878" name="l05878"></a><span class="lineno"> 5878</span><span class="stringliteral">&quot;r_editlights_importlightsfile : reload .light file (produced by hlight)\n&quot;</span></div>
<div class="line"><a id="l05879" name="l05879"></a><span class="lineno"> 5879</span><span class="stringliteral">&quot;Edit commands:\n&quot;</span></div>
<div class="line"><a id="l05880" name="l05880"></a><span class="lineno"> 5880</span><span class="stringliteral">&quot;origin x y z : set light location\n&quot;</span></div>
<div class="line"><a id="l05881" name="l05881"></a><span class="lineno"> 5881</span><span class="stringliteral">&quot;originx x: set x component of light location\n&quot;</span></div>
<div class="line"><a id="l05882" name="l05882"></a><span class="lineno"> 5882</span><span class="stringliteral">&quot;originy y: set y component of light location\n&quot;</span></div>
<div class="line"><a id="l05883" name="l05883"></a><span class="lineno"> 5883</span><span class="stringliteral">&quot;originz z: set z component of light location\n&quot;</span></div>
<div class="line"><a id="l05884" name="l05884"></a><span class="lineno"> 5884</span><span class="stringliteral">&quot;move x y z : adjust light location\n&quot;</span></div>
<div class="line"><a id="l05885" name="l05885"></a><span class="lineno"> 5885</span><span class="stringliteral">&quot;movex x: adjust x component of light location\n&quot;</span></div>
<div class="line"><a id="l05886" name="l05886"></a><span class="lineno"> 5886</span><span class="stringliteral">&quot;movey y: adjust y component of light location\n&quot;</span></div>
<div class="line"><a id="l05887" name="l05887"></a><span class="lineno"> 5887</span><span class="stringliteral">&quot;movez z: adjust z component of light location\n&quot;</span></div>
<div class="line"><a id="l05888" name="l05888"></a><span class="lineno"> 5888</span><span class="stringliteral">&quot;angles x y z : set light angles\n&quot;</span></div>
<div class="line"><a id="l05889" name="l05889"></a><span class="lineno"> 5889</span><span class="stringliteral">&quot;anglesx x: set x component of light angles\n&quot;</span></div>
<div class="line"><a id="l05890" name="l05890"></a><span class="lineno"> 5890</span><span class="stringliteral">&quot;anglesy y: set y component of light angles\n&quot;</span></div>
<div class="line"><a id="l05891" name="l05891"></a><span class="lineno"> 5891</span><span class="stringliteral">&quot;anglesz z: set z component of light angles\n&quot;</span></div>
<div class="line"><a id="l05892" name="l05892"></a><span class="lineno"> 5892</span><span class="stringliteral">&quot;color r g b : set color of light (can be brighter than 1 1 1)\n&quot;</span></div>
<div class="line"><a id="l05893" name="l05893"></a><span class="lineno"> 5893</span><span class="stringliteral">&quot;radius radius : set radius (size) of light\n&quot;</span></div>
<div class="line"><a id="l05894" name="l05894"></a><span class="lineno"> 5894</span><span class="stringliteral">&quot;colorscale grey : multiply color of light (1 does nothing)\n&quot;</span></div>
<div class="line"><a id="l05895" name="l05895"></a><span class="lineno"> 5895</span><span class="stringliteral">&quot;colorscale r g b : multiply color of light (1 1 1 does nothing)\n&quot;</span></div>
<div class="line"><a id="l05896" name="l05896"></a><span class="lineno"> 5896</span><span class="stringliteral">&quot;radiusscale scale : multiply radius (size) of light (1 does nothing)\n&quot;</span></div>
<div class="line"><a id="l05897" name="l05897"></a><span class="lineno"> 5897</span><span class="stringliteral">&quot;sizescale scale : multiply radius (size) of light (1 does nothing)\n&quot;</span></div>
<div class="line"><a id="l05898" name="l05898"></a><span class="lineno"> 5898</span><span class="stringliteral">&quot;originscale x y z : multiply origin of light (1 1 1 does nothing)\n&quot;</span></div>
<div class="line"><a id="l05899" name="l05899"></a><span class="lineno"> 5899</span><span class="stringliteral">&quot;style style : set lightstyle of light (flickering patterns, switches, etc)\n&quot;</span></div>
<div class="line"><a id="l05900" name="l05900"></a><span class="lineno"> 5900</span><span class="stringliteral">&quot;cubemap basename : set filter cubemap of light\n&quot;</span></div>
<div class="line"><a id="l05901" name="l05901"></a><span class="lineno"> 5901</span><span class="stringliteral">&quot;shadows 1/0 : turn on/off shadows\n&quot;</span></div>
<div class="line"><a id="l05902" name="l05902"></a><span class="lineno"> 5902</span><span class="stringliteral">&quot;corona n : set corona intensity\n&quot;</span></div>
<div class="line"><a id="l05903" name="l05903"></a><span class="lineno"> 5903</span><span class="stringliteral">&quot;coronasize n : set corona size (0-1)\n&quot;</span></div>
<div class="line"><a id="l05904" name="l05904"></a><span class="lineno"> 5904</span><span class="stringliteral">&quot;ambient n : set ambient intensity (0-1)\n&quot;</span></div>
<div class="line"><a id="l05905" name="l05905"></a><span class="lineno"> 5905</span><span class="stringliteral">&quot;diffuse n : set diffuse intensity (0-1)\n&quot;</span></div>
<div class="line"><a id="l05906" name="l05906"></a><span class="lineno"> 5906</span><span class="stringliteral">&quot;specular n : set specular intensity (0-1)\n&quot;</span></div>
<div class="line"><a id="l05907" name="l05907"></a><span class="lineno"> 5907</span><span class="stringliteral">&quot;normalmode 1/0 : turn on/off rendering of this light in rtworld 0 mode\n&quot;</span></div>
<div class="line"><a id="l05908" name="l05908"></a><span class="lineno"> 5908</span><span class="stringliteral">&quot;realtimemode 1/0 : turn on/off rendering of this light in rtworld 1 mode\n&quot;</span></div>
<div class="line"><a id="l05909" name="l05909"></a><span class="lineno"> 5909</span><span class="stringliteral">&quot;&lt;nothing&gt; : print light properties to console\n&quot;</span></div>
<div class="line"><a id="l05910" name="l05910"></a><span class="lineno"> 5910</span>    );</div>
<div class="line"><a id="l05911" name="l05911"></a><span class="lineno"> 5911</span>}</div>
</div>
<div class="line"><a id="l05912" name="l05912"></a><span class="lineno"> 5912</span> </div>
<div class="foldopen" id="foldopen05913" data-start="{" data-end="}">
<div class="line"><a id="l05913" name="l05913"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a54df0fcf12a70775bd530311ee848a42"> 5913</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a54df0fcf12a70775bd530311ee848a42">R_Shadow_EditLights_CopyInfo_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05914" name="l05914"></a><span class="lineno"> 5914</span>{</div>
<div class="line"><a id="l05915" name="l05915"></a><span class="lineno"> 5915</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l05916" name="l05916"></a><span class="lineno"> 5916</span>    {</div>
<div class="line"><a id="l05917" name="l05917"></a><span class="lineno"> 5917</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Cannot copy light info when not in editing mode.  Set r_editlights to 1.\n&quot;</span>);</div>
<div class="line"><a id="l05918" name="l05918"></a><span class="lineno"> 5918</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05919" name="l05919"></a><span class="lineno"> 5919</span>    }</div>
<div class="line"><a id="l05920" name="l05920"></a><span class="lineno"> 5920</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>)</div>
<div class="line"><a id="l05921" name="l05921"></a><span class="lineno"> 5921</span>    {</div>
<div class="line"><a id="l05922" name="l05922"></a><span class="lineno"> 5922</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;No selected light.\n&quot;</span>);</div>
<div class="line"><a id="l05923" name="l05923"></a><span class="lineno"> 5923</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05924" name="l05924"></a><span class="lineno"> 5924</span>    }</div>
<div class="line"><a id="l05925" name="l05925"></a><span class="lineno"> 5925</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>);</div>
<div class="line"><a id="l05926" name="l05926"></a><span class="lineno"> 5926</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>);</div>
<div class="line"><a id="l05927" name="l05927"></a><span class="lineno"> 5927</span>    <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a> = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a>;</div>
<div class="line"><a id="l05928" name="l05928"></a><span class="lineno"> 5928</span>    <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a> = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a>;</div>
<div class="line"><a id="l05929" name="l05929"></a><span class="lineno"> 5929</span>    <span class="keywordflow">if</span> (*<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>)</div>
<div class="line"><a id="l05930" name="l05930"></a><span class="lineno"> 5930</span>        <a class="code hl_define" href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a>(<a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>));</div>
<div class="line"><a id="l05931" name="l05931"></a><span class="lineno"> 5931</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l05932" name="l05932"></a><span class="lineno"> 5932</span>        <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>[0] = 0;</div>
<div class="line"><a id="l05933" name="l05933"></a><span class="lineno"> 5933</span>    <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a> = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a>;</div>
<div class="line"><a id="l05934" name="l05934"></a><span class="lineno"> 5934</span>    <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a> = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a>;</div>
<div class="line"><a id="l05935" name="l05935"></a><span class="lineno"> 5935</span>    <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">coronasizescale</a> = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">coronasizescale</a>;</div>
<div class="line"><a id="l05936" name="l05936"></a><span class="lineno"> 5936</span>    <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">ambientscale</a> = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">ambientscale</a>;</div>
<div class="line"><a id="l05937" name="l05937"></a><span class="lineno"> 5937</span>    <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">diffusescale</a> = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">diffusescale</a>;</div>
<div class="line"><a id="l05938" name="l05938"></a><span class="lineno"> 5938</span>    <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">specularscale</a> = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">specularscale</a>;</div>
<div class="line"><a id="l05939" name="l05939"></a><span class="lineno"> 5939</span>    <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a> = <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a>;</div>
<div class="line"><a id="l05940" name="l05940"></a><span class="lineno"> 5940</span>}</div>
</div>
<div class="line"><a id="l05941" name="l05941"></a><span class="lineno"> 5941</span> </div>
<div class="foldopen" id="foldopen05942" data-start="{" data-end="}">
<div class="line"><a id="l05942" name="l05942"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a9bdc226cb243cbaf2f365a6cf0e77f54"> 5942</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a9bdc226cb243cbaf2f365a6cf0e77f54">R_Shadow_EditLights_PasteInfo_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05943" name="l05943"></a><span class="lineno"> 5943</span>{</div>
<div class="line"><a id="l05944" name="l05944"></a><span class="lineno"> 5944</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l05945" name="l05945"></a><span class="lineno"> 5945</span>    {</div>
<div class="line"><a id="l05946" name="l05946"></a><span class="lineno"> 5946</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Cannot paste light info when not in editing mode.  Set r_editlights to 1.\n&quot;</span>);</div>
<div class="line"><a id="l05947" name="l05947"></a><span class="lineno"> 5947</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05948" name="l05948"></a><span class="lineno"> 5948</span>    }</div>
<div class="line"><a id="l05949" name="l05949"></a><span class="lineno"> 5949</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>)</div>
<div class="line"><a id="l05950" name="l05950"></a><span class="lineno"> 5950</span>    {</div>
<div class="line"><a id="l05951" name="l05951"></a><span class="lineno"> 5951</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;No selected light.\n&quot;</span>);</div>
<div class="line"><a id="l05952" name="l05952"></a><span class="lineno"> 5952</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05953" name="l05953"></a><span class="lineno"> 5953</span>    }</div>
<div class="line"><a id="l05954" name="l05954"></a><span class="lineno"> 5954</span>    <a class="code hl_function" href="r__shadow_8c.html#af8b412ff853a18ec537a9a8f40c12b29">R_Shadow_UpdateWorldLight</a>(<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>, <a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>-&gt;<a class="code hl_variable" href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">origin</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">angles</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">color</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">radius</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">corona</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">style</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">shadow</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">cubemapname</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">coronasizescale</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">ambientscale</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">diffusescale</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">specularscale</a>, <a class="code hl_variable" href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a>.<a class="code hl_variable" href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">flags</a>);</div>
<div class="line"><a id="l05955" name="l05955"></a><span class="lineno"> 5955</span>}</div>
</div>
<div class="line"><a id="l05956" name="l05956"></a><span class="lineno"> 5956</span> </div>
<div class="foldopen" id="foldopen05957" data-start="{" data-end="}">
<div class="line"><a id="l05957" name="l05957"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a1716d37c9d63e6a32c388a02c738cedf"> 5957</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a1716d37c9d63e6a32c388a02c738cedf">R_Shadow_EditLights_Lock_f</a>(<a class="code hl_struct" href="structcmd__state__t.html">cmd_state_t</a> *cmd)</div>
<div class="line"><a id="l05958" name="l05958"></a><span class="lineno"> 5958</span>{</div>
<div class="line"><a id="l05959" name="l05959"></a><span class="lineno"> 5959</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a>)</div>
<div class="line"><a id="l05960" name="l05960"></a><span class="lineno"> 5960</span>    {</div>
<div class="line"><a id="l05961" name="l05961"></a><span class="lineno"> 5961</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;Cannot lock on light when not in editing mode.  Set r_editlights to 1.\n&quot;</span>);</div>
<div class="line"><a id="l05962" name="l05962"></a><span class="lineno"> 5962</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05963" name="l05963"></a><span class="lineno"> 5963</span>    }</div>
<div class="line"><a id="l05964" name="l05964"></a><span class="lineno"> 5964</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="r__shadow_8c.html#afe65ae6d734367fc70f16e1eb6df80c6">r_editlights_lockcursor</a>)</div>
<div class="line"><a id="l05965" name="l05965"></a><span class="lineno"> 5965</span>    {</div>
<div class="line"><a id="l05966" name="l05966"></a><span class="lineno"> 5966</span>        <a class="code hl_variable" href="r__shadow_8c.html#afe65ae6d734367fc70f16e1eb6df80c6">r_editlights_lockcursor</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05967" name="l05967"></a><span class="lineno"> 5967</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05968" name="l05968"></a><span class="lineno"> 5968</span>    }</div>
<div class="line"><a id="l05969" name="l05969"></a><span class="lineno"> 5969</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a>)</div>
<div class="line"><a id="l05970" name="l05970"></a><span class="lineno"> 5970</span>    {</div>
<div class="line"><a id="l05971" name="l05971"></a><span class="lineno"> 5971</span>        <a class="code hl_function" href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a>(<span class="stringliteral">&quot;No selected light to lock on.\n&quot;</span>);</div>
<div class="line"><a id="l05972" name="l05972"></a><span class="lineno"> 5972</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05973" name="l05973"></a><span class="lineno"> 5973</span>    }</div>
<div class="line"><a id="l05974" name="l05974"></a><span class="lineno"> 5974</span>    <a class="code hl_variable" href="r__shadow_8c.html#afe65ae6d734367fc70f16e1eb6df80c6">r_editlights_lockcursor</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l05975" name="l05975"></a><span class="lineno"> 5975</span>}</div>
</div>
<div class="line"><a id="l05976" name="l05976"></a><span class="lineno"> 5976</span> </div>
<div class="foldopen" id="foldopen05977" data-start="{" data-end="}">
<div class="line"><a id="l05977" name="l05977"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#a5b8f19d6a9f6218c94730fb8dac80e07"> 5977</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#a5b8f19d6a9f6218c94730fb8dac80e07">R_Shadow_EditLights_Init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l05978" name="l05978"></a><span class="lineno"> 5978</span>{</div>
<div class="line"><a id="l05979" name="l05979"></a><span class="lineno"> 5979</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a>);</div>
<div class="line"><a id="l05980" name="l05980"></a><span class="lineno"> 5980</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a63dc439382d15f2dd4a7a884047bcbfd">r_editlights_cursordistance</a>);</div>
<div class="line"><a id="l05981" name="l05981"></a><span class="lineno"> 5981</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a8f1db553ca88c636f59323f60b06e0b3">r_editlights_cursorpushback</a>);</div>
<div class="line"><a id="l05982" name="l05982"></a><span class="lineno"> 5982</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a3ce848ab57627ac008049d2e6e768821">r_editlights_cursorpushoff</a>);</div>
<div class="line"><a id="l05983" name="l05983"></a><span class="lineno"> 5983</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a8f7f45586c012211b7be74ce606e574c">r_editlights_cursorgrid</a>);</div>
<div class="line"><a id="l05984" name="l05984"></a><span class="lineno"> 5984</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a672a9d1cc4dc2c152a25e8b2a1c5caae">r_editlights_quakelightsizescale</a>);</div>
<div class="line"><a id="l05985" name="l05985"></a><span class="lineno"> 5985</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#afeed6d6e238decaa3133bc5414df66d2">r_editlights_drawproperties</a>);</div>
<div class="line"><a id="l05986" name="l05986"></a><span class="lineno"> 5986</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a76b3a862e8e0f84844f788e717f412fb">r_editlights_current_origin</a>);</div>
<div class="line"><a id="l05987" name="l05987"></a><span class="lineno"> 5987</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a11bc0f6e4a8eae1a369b249b999fefb1">r_editlights_current_angles</a>);</div>
<div class="line"><a id="l05988" name="l05988"></a><span class="lineno"> 5988</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a228f216a9270733c064700839e9fa188">r_editlights_current_color</a>);</div>
<div class="line"><a id="l05989" name="l05989"></a><span class="lineno"> 5989</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ae150b57d6c0612f7709e613e7aced1d3">r_editlights_current_radius</a>);</div>
<div class="line"><a id="l05990" name="l05990"></a><span class="lineno"> 5990</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a8944edc1e16483db6f1dabdaaaf491b8">r_editlights_current_corona</a>);</div>
<div class="line"><a id="l05991" name="l05991"></a><span class="lineno"> 5991</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a72a967a1ed0fa627326360f636a767ca">r_editlights_current_coronasize</a>);</div>
<div class="line"><a id="l05992" name="l05992"></a><span class="lineno"> 5992</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a327b768a966dbb9b7b2b9ed48fe87c40">r_editlights_current_style</a>);</div>
<div class="line"><a id="l05993" name="l05993"></a><span class="lineno"> 5993</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#af2a4d49ec984ad0127331cba8e7debf1">r_editlights_current_shadows</a>);</div>
<div class="line"><a id="l05994" name="l05994"></a><span class="lineno"> 5994</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a6b2ce902beafb95b38fcdd788ddab802">r_editlights_current_cubemap</a>);</div>
<div class="line"><a id="l05995" name="l05995"></a><span class="lineno"> 5995</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a9b257bcf33a5e2829102f091b0981006">r_editlights_current_ambient</a>);</div>
<div class="line"><a id="l05996" name="l05996"></a><span class="lineno"> 5996</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#acd95c1f96dfaf981d25cc90ffe63f8eb">r_editlights_current_diffuse</a>);</div>
<div class="line"><a id="l05997" name="l05997"></a><span class="lineno"> 5997</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#aeb7fd587e0d07d10f6a425cb693d08e2">r_editlights_current_specular</a>);</div>
<div class="line"><a id="l05998" name="l05998"></a><span class="lineno"> 5998</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a491dbf84ab84d3d9a981d56f82d626f3">r_editlights_current_normalmode</a>);</div>
<div class="line"><a id="l05999" name="l05999"></a><span class="lineno"> 5999</span>    <a class="code hl_function" href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#a0a5c0469e4a2bdc175d837d81184f8a0">r_editlights_current_realtimemode</a>);</div>
<div class="line"><a id="l06000" name="l06000"></a><span class="lineno"> 6000</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_help&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#aff01b51ea186b71010de0ddcf0b98855">R_Shadow_EditLights_Help_f</a>, <span class="stringliteral">&quot;prints documentation on console commands and variables in rtlight editing system&quot;</span>);</div>
<div class="line"><a id="l06001" name="l06001"></a><span class="lineno"> 6001</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_clear&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#a0661b28147bd9200b312775efc1dc7cd">R_Shadow_EditLights_Clear_f</a>, <span class="stringliteral">&quot;removes all world lights (let there be darkness!)&quot;</span>);</div>
<div class="line"><a id="l06002" name="l06002"></a><span class="lineno"> 6002</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_reload&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#a06ac0a27bc6888c17169add1450b26e4">R_Shadow_EditLights_Reload_f</a>, <span class="stringliteral">&quot;reloads rtlights file (or imports from .lights file or .ent file or the map itself)&quot;</span>);</div>
<div class="line"><a id="l06003" name="l06003"></a><span class="lineno"> 6003</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_save&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#a36bcfbf7432d611eb5e8041f2b1a38c4">R_Shadow_EditLights_Save_f</a>, <span class="stringliteral">&quot;save .rtlights file for current level&quot;</span>);</div>
<div class="line"><a id="l06004" name="l06004"></a><span class="lineno"> 6004</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_spawn&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#af8021999d534e4dbbe86fc1108f9d3ce">R_Shadow_EditLights_Spawn_f</a>, <span class="stringliteral">&quot;creates a light with default properties (let there be light!)&quot;</span>);</div>
<div class="line"><a id="l06005" name="l06005"></a><span class="lineno"> 6005</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_edit&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#a55f56f45cb9e5ba448db1b360cc826f0">R_Shadow_EditLights_Edit_f</a>, <span class="stringliteral">&quot;changes a property on the selected light&quot;</span>);</div>
<div class="line"><a id="l06006" name="l06006"></a><span class="lineno"> 6006</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_editall&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#a0e5a8082e8b4c9ea719a863f5fb2091e">R_Shadow_EditLights_EditAll_f</a>, <span class="stringliteral">&quot;changes a property on ALL lights at once (tip: use radiusscale and colorscale to alter these properties)&quot;</span>);</div>
<div class="line"><a id="l06007" name="l06007"></a><span class="lineno"> 6007</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_remove&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#a3d91a060d2b02ad488cd77f0fb266791">R_Shadow_EditLights_Remove_f</a>, <span class="stringliteral">&quot;remove selected light&quot;</span>);</div>
<div class="line"><a id="l06008" name="l06008"></a><span class="lineno"> 6008</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_toggleshadow&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#a7b925a5e9129dd0f8df1851c169ad312">R_Shadow_EditLights_ToggleShadow_f</a>, <span class="stringliteral">&quot;toggle on/off the shadow option on the selected light&quot;</span>);</div>
<div class="line"><a id="l06009" name="l06009"></a><span class="lineno"> 6009</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_togglecorona&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#a49f9ee527a2c26bb7d24cb81ba976b21">R_Shadow_EditLights_ToggleCorona_f</a>, <span class="stringliteral">&quot;toggle on/off the corona option on the selected light&quot;</span>);</div>
<div class="line"><a id="l06010" name="l06010"></a><span class="lineno"> 6010</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_importlightentitiesfrommap&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#a573b63d83258093494303255e0f33e8a">R_Shadow_EditLights_ImportLightEntitiesFromMap_f</a>, <span class="stringliteral">&quot;load lights from .ent file or map entities (ignoring .rtlights or .lights file)&quot;</span>);</div>
<div class="line"><a id="l06011" name="l06011"></a><span class="lineno"> 6011</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_importlightsfile&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#ad6a16e2c9f35d89a6416e60ec54509f4">R_Shadow_EditLights_ImportLightsFile_f</a>, <span class="stringliteral">&quot;load lights from .lights file (ignoring .rtlights or .ent files and map entities)&quot;</span>);</div>
<div class="line"><a id="l06012" name="l06012"></a><span class="lineno"> 6012</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_copyinfo&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#a54df0fcf12a70775bd530311ee848a42">R_Shadow_EditLights_CopyInfo_f</a>, <span class="stringliteral">&quot;store a copy of all properties (except origin) of the selected light&quot;</span>);</div>
<div class="line"><a id="l06013" name="l06013"></a><span class="lineno"> 6013</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_pasteinfo&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#a9bdc226cb243cbaf2f365a6cf0e77f54">R_Shadow_EditLights_PasteInfo_f</a>, <span class="stringliteral">&quot;apply the stored properties onto the selected light (making it exactly identical except for origin)&quot;</span>);</div>
<div class="line"><a id="l06014" name="l06014"></a><span class="lineno"> 6014</span>    <a class="code hl_function" href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a>(<a class="code hl_define" href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a>, <span class="stringliteral">&quot;r_editlights_lock&quot;</span>, <a class="code hl_function" href="r__shadow_8c.html#a1716d37c9d63e6a32c388a02c738cedf">R_Shadow_EditLights_Lock_f</a>, <span class="stringliteral">&quot;lock selection to current light, if already locked - unlock&quot;</span>);</div>
<div class="line"><a id="l06015" name="l06015"></a><span class="lineno"> 6015</span>}</div>
</div>
<div class="line"><a id="l06016" name="l06016"></a><span class="lineno"> 6016</span> </div>
<div class="line"><a id="l06017" name="l06017"></a><span class="lineno"> 6017</span> </div>
<div class="line"><a id="l06018" name="l06018"></a><span class="lineno"> 6018</span> </div>
<div class="line"><a id="l06019" name="l06019"></a><span class="lineno"> 6019</span><span class="comment">/*</span></div>
<div class="line"><a id="l06020" name="l06020"></a><span class="lineno"> 6020</span><span class="comment">=============================================================================</span></div>
<div class="line"><a id="l06021" name="l06021"></a><span class="lineno"> 6021</span><span class="comment"></span> </div>
<div class="line"><a id="l06022" name="l06022"></a><span class="lineno"> 6022</span><span class="comment">LIGHT SAMPLING</span></div>
<div class="line"><a id="l06023" name="l06023"></a><span class="lineno"> 6023</span><span class="comment"></span> </div>
<div class="line"><a id="l06024" name="l06024"></a><span class="lineno"> 6024</span><span class="comment">=============================================================================</span></div>
<div class="line"><a id="l06025" name="l06025"></a><span class="lineno"> 6025</span><span class="comment">*/</span></div>
<div class="line"><a id="l06026" name="l06026"></a><span class="lineno"> 6026</span> </div>
<div class="foldopen" id="foldopen06027" data-start="{" data-end="}">
<div class="line"><a id="l06027" name="l06027"></a><span class="lineno"><a class="line" href="r__shadow_8c.html#af9aa50577998ce10555d0ad5b39fb5e5"> 6027</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="r__shadow_8c.html#af9aa50577998ce10555d0ad5b39fb5e5">R_CompleteLightPoint</a>(<span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambient</a>, <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>, <span class="keywordtype">float</span> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightdir</a>, <span class="keyword">const</span> <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> p, <span class="keyword">const</span> <span class="keywordtype">int</span> flags, <span class="keywordtype">float</span> lightmapintensity, <span class="keywordtype">float</span> ambientintensity)</div>
<div class="line"><a id="l06028" name="l06028"></a><span class="lineno"> 6028</span>{</div>
<div class="line"><a id="l06029" name="l06029"></a><span class="lineno"> 6029</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, numlights, flag, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>;</div>
<div class="line"><a id="l06030" name="l06030"></a><span class="lineno"> 6030</span>    <a class="code hl_struct" href="structrtlight__t.html">rtlight_t</a> *light;</div>
<div class="line"><a id="l06031" name="l06031"></a><span class="lineno"> 6031</span>    <a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dlight</a>;</div>
<div class="line"><a id="l06032" name="l06032"></a><span class="lineno"> 6032</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[3];</div>
<div class="line"><a id="l06033" name="l06033"></a><span class="lineno"> 6033</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[3];</div>
<div class="line"><a id="l06034" name="l06034"></a><span class="lineno"> 6034</span>    <span class="keywordtype">float</span> dist;</div>
<div class="line"><a id="l06035" name="l06035"></a><span class="lineno"> 6035</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a>;</div>
<div class="line"><a id="l06036" name="l06036"></a><span class="lineno"> 6036</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>;</div>
<div class="line"><a id="l06037" name="l06037"></a><span class="lineno"> 6037</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sa</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sx</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sy</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sz</a>[3], <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sd</a>[3];</div>
<div class="line"><a id="l06038" name="l06038"></a><span class="lineno"> 6038</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightradius2</a>;</div>
<div class="line"><a id="l06039" name="l06039"></a><span class="lineno"> 6039</span> </div>
<div class="line"><a id="l06040" name="l06040"></a><span class="lineno"> 6040</span>    <span class="comment">// use first order spherical harmonics to combine directional lights</span></div>
<div class="line"><a id="l06041" name="l06041"></a><span class="lineno"> 6041</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> &lt; 3; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>++)</div>
<div class="line"><a id="l06042" name="l06042"></a><span class="lineno"> 6042</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sa</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sx</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sy</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sz</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sd</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] = 0;</div>
<div class="line"><a id="l06043" name="l06043"></a><span class="lineno"> 6043</span> </div>
<div class="line"><a id="l06044" name="l06044"></a><span class="lineno"> 6044</span>    <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="r__shadow_8h.html#a58b6c06882dc55d62d28fcf098e8ea9f">LP_LIGHTMAP</a>)</div>
<div class="line"><a id="l06045" name="l06045"></a><span class="lineno"> 6045</span>    {</div>
<div class="line"><a id="l06046" name="l06046"></a><span class="lineno"> 6046</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a> &amp;&amp; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a2fd867d2779bb6e6b6f7348fc47c5948">lit</a> &amp;&amp; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a7dcb6ad152fbb5148b1830e79839b197">LightPoint</a>)</div>
<div class="line"><a id="l06047" name="l06047"></a><span class="lineno"> 6047</span>        {</div>
<div class="line"><a id="l06048" name="l06048"></a><span class="lineno"> 6048</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempambient</a>[3];</div>
<div class="line"><a id="l06049" name="l06049"></a><span class="lineno"> 6049</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> &lt; 3; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>++)</div>
<div class="line"><a id="l06050" name="l06050"></a><span class="lineno"> 6050</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempambient</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] = <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] = 0;</div>
<div class="line"><a id="l06051" name="l06051"></a><span class="lineno"> 6051</span>            <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>-&gt;<a class="code hl_variable" href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">brush</a>.<a class="code hl_variable" href="structmodel__brush__t.html#a7dcb6ad152fbb5148b1830e79839b197">LightPoint</a>(<a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">worldmodel</a>, p, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempambient</a>, <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>);</div>
<div class="line"><a id="l06052" name="l06052"></a><span class="lineno"> 6052</span>            <span class="comment">// calculate a weighted average light direction as well</span></div>
<div class="line"><a id="l06053" name="l06053"></a><span class="lineno"> 6053</span>            <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> = <a class="code hl_define" href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l06054" name="l06054"></a><span class="lineno"> 6054</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> &lt; 3; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>++)</div>
<div class="line"><a id="l06055" name="l06055"></a><span class="lineno"> 6055</span>            {</div>
<div class="line"><a id="l06056" name="l06056"></a><span class="lineno"> 6056</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sa</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += (0.5f * <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tempambient</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>]) * lightmapintensity;</div>
<div class="line"><a id="l06057" name="l06057"></a><span class="lineno"> 6057</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sx</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[0] * <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>]) * lightmapintensity;</div>
<div class="line"><a id="l06058" name="l06058"></a><span class="lineno"> 6058</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sy</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[1] * <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>]) * lightmapintensity;</div>
<div class="line"><a id="l06059" name="l06059"></a><span class="lineno"> 6059</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sz</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[2] * <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>]) * lightmapintensity;</div>
<div class="line"><a id="l06060" name="l06060"></a><span class="lineno"> 6060</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sd</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += (<a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>]) * lightmapintensity;</div>
<div class="line"><a id="l06061" name="l06061"></a><span class="lineno"> 6061</span>            }</div>
<div class="line"><a id="l06062" name="l06062"></a><span class="lineno"> 6062</span>        }</div>
<div class="line"><a id="l06063" name="l06063"></a><span class="lineno"> 6063</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l06064" name="l06064"></a><span class="lineno"> 6064</span>        {</div>
<div class="line"><a id="l06065" name="l06065"></a><span class="lineno"> 6065</span>            <span class="comment">// unlit map - fullbright but scaled by lightmapintensity</span></div>
<div class="line"><a id="l06066" name="l06066"></a><span class="lineno"> 6066</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> &lt; 3; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>++)</div>
<div class="line"><a id="l06067" name="l06067"></a><span class="lineno"> 6067</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sa</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += lightmapintensity;</div>
<div class="line"><a id="l06068" name="l06068"></a><span class="lineno"> 6068</span>        }</div>
<div class="line"><a id="l06069" name="l06069"></a><span class="lineno"> 6069</span>    }</div>
<div class="line"><a id="l06070" name="l06070"></a><span class="lineno"> 6070</span> </div>
<div class="line"><a id="l06071" name="l06071"></a><span class="lineno"> 6071</span>    <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="r__shadow_8h.html#ae2a999ea230517becaea5dbe53b0b64e">LP_RTWORLD</a>)</div>
<div class="line"><a id="l06072" name="l06072"></a><span class="lineno"> 6072</span>    {</div>
<div class="line"><a id="l06073" name="l06073"></a><span class="lineno"> 6073</span>        flag = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#ad6fc2a07d8d706f5daf13c5849db84fc">rtworld</a> ? <a class="code hl_define" href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a> : <a class="code hl_define" href="client_8h.html#a02b341fb62e7f8268a5f7f684ab0f2f2">LIGHTFLAG_NORMALMODE</a>;</div>
<div class="line"><a id="l06074" name="l06074"></a><span class="lineno"> 6074</span>        numlights = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_function" href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>);</div>
<div class="line"><a id="l06075" name="l06075"></a><span class="lineno"> 6075</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numlights; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l06076" name="l06076"></a><span class="lineno"> 6076</span>        {</div>
<div class="line"><a id="l06077" name="l06077"></a><span class="lineno"> 6077</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dlight</a> = (<a class="code hl_struct" href="structdlight__t.html">dlight_t</a> *) <a class="code hl_function" href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a>(&amp;<a class="code hl_variable" href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a>, <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a id="l06078" name="l06078"></a><span class="lineno"> 6078</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dlight</a>)</div>
<div class="line"><a id="l06079" name="l06079"></a><span class="lineno"> 6079</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06080" name="l06080"></a><span class="lineno"> 6080</span>            light = &amp;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dlight</a>-&gt;rtlight;</div>
<div class="line"><a id="l06081" name="l06081"></a><span class="lineno"> 6081</span>            <span class="keywordflow">if</span> (!(light-&gt;<a class="code hl_variable" href="structrtlight__t.html#a78fc39a7fe3cda236c6209eebcde22c9">flags</a> &amp; flag))</div>
<div class="line"><a id="l06082" name="l06082"></a><span class="lineno"> 6082</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06083" name="l06083"></a><span class="lineno"> 6083</span>            <span class="comment">// sample</span></div>
<div class="line"><a id="l06084" name="l06084"></a><span class="lineno"> 6084</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightradius2</a> = light-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a> * light-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l06085" name="l06085"></a><span class="lineno"> 6085</span>            <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(light-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, p, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>);</div>
<div class="line"><a id="l06086" name="l06086"></a><span class="lineno"> 6086</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a> = <a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>);</div>
<div class="line"><a id="l06087" name="l06087"></a><span class="lineno"> 6087</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightradius2</a>)</div>
<div class="line"><a id="l06088" name="l06088"></a><span class="lineno"> 6088</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06089" name="l06089"></a><span class="lineno"> 6089</span>            dist = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a>) / light-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l06090" name="l06090"></a><span class="lineno"> 6090</span>            <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> = <a class="code hl_define" href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a>(1.0f, (1.0f - dist) * <a class="code hl_variable" href="r__shadow_8c.html#ac983b35605fe044369c676ce33b58061">r_shadow_lightattenuationlinearscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> / (<a class="code hl_variable" href="r__shadow_8c.html#a0f3acc72b271530ae45ed8b06f011976">r_shadow_lightattenuationdividebias</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> + dist*dist)) * <a class="code hl_variable" href="r__shadow_8c.html#a8b27974ce25cb2c28bbdc15bfb50f20f">r_shadow_lightintensityscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l06091" name="l06091"></a><span class="lineno"> 6091</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> &lt;= 0.0f)</div>
<div class="line"><a id="l06092" name="l06092"></a><span class="lineno"> 6092</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06093" name="l06093"></a><span class="lineno"> 6093</span>            <span class="keywordflow">if</span> (light-&gt;<a class="code hl_variable" href="structrtlight__t.html#a24a17e99722f1493e45d4a240584a80c">shadow</a> &amp;&amp; <a class="code hl_function" href="cl__collision_8c.html#a3844376c9cc74935d902373d216acc75">CL_TraceLine</a>(p, light-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, <a class="code hl_define" href="world_8h.html#ad9b31bede6128044de93b93641630437">MOVE_NOMONSTERS</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a>, 0, <a class="code hl_define" href="model__brush_8h.html#a92eb2c00b3276aef285cf43b305a43da">MATERIALFLAGMASK_TRANSLUCENT</a>, <a class="code hl_variable" href="collision_8c.html#ac0a2160fccec6a28f98e2df5e39d1f7c">collision_extendmovelength</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">false</span>, <span class="keyword">true</span>).<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a> &lt; 1)</div>
<div class="line"><a id="l06094" name="l06094"></a><span class="lineno"> 6094</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06095" name="l06095"></a><span class="lineno"> 6095</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> &lt; 3; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>++)</div>
<div class="line"><a id="l06096" name="l06096"></a><span class="lineno"> 6096</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] = light-&gt;<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] * <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>;</div>
<div class="line"><a id="l06097" name="l06097"></a><span class="lineno"> 6097</span>            <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> = <a class="code hl_define" href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l06098" name="l06098"></a><span class="lineno"> 6098</span>            <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>);</div>
<div class="line"><a id="l06099" name="l06099"></a><span class="lineno"> 6099</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> &lt; 3; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>++)</div>
<div class="line"><a id="l06100" name="l06100"></a><span class="lineno"> 6100</span>            {</div>
<div class="line"><a id="l06101" name="l06101"></a><span class="lineno"> 6101</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sa</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += 0.5f * <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>];</div>
<div class="line"><a id="l06102" name="l06102"></a><span class="lineno"> 6102</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sx</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[0] * <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>];</div>
<div class="line"><a id="l06103" name="l06103"></a><span class="lineno"> 6103</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sy</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[1] * <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>];</div>
<div class="line"><a id="l06104" name="l06104"></a><span class="lineno"> 6104</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sz</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[2] * <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>];</div>
<div class="line"><a id="l06105" name="l06105"></a><span class="lineno"> 6105</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sd</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>];</div>
<div class="line"><a id="l06106" name="l06106"></a><span class="lineno"> 6106</span>            }</div>
<div class="line"><a id="l06107" name="l06107"></a><span class="lineno"> 6107</span>        }</div>
<div class="line"><a id="l06108" name="l06108"></a><span class="lineno"> 6108</span>        <span class="comment">// FIXME: sample bouncegrid too!</span></div>
<div class="line"><a id="l06109" name="l06109"></a><span class="lineno"> 6109</span>    }</div>
<div class="line"><a id="l06110" name="l06110"></a><span class="lineno"> 6110</span> </div>
<div class="line"><a id="l06111" name="l06111"></a><span class="lineno"> 6111</span>    <span class="keywordflow">if</span> (flags &amp; <a class="code hl_define" href="r__shadow_8h.html#a39a8894bad7a0da2edbbdfd1a8a0b281">LP_DYNLIGHT</a>)</div>
<div class="line"><a id="l06112" name="l06112"></a><span class="lineno"> 6112</span>    {</div>
<div class="line"><a id="l06113" name="l06113"></a><span class="lineno"> 6113</span>        <span class="comment">// sample dlights</span></div>
<div class="line"><a id="l06114" name="l06114"></a><span class="lineno"> 6114</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#a0d2e420f14635b0aff07275fa6b74d82">numlights</a>;<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a id="l06115" name="l06115"></a><span class="lineno"> 6115</span>        {</div>
<div class="line"><a id="l06116" name="l06116"></a><span class="lineno"> 6116</span>            light = <a class="code hl_variable" href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a>.<a class="code hl_variable" href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">scene</a>.<a class="code hl_variable" href="structr__refdef__scene__t.html#aec6438e3812387c92681237d33bfe46f">lights</a>[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a id="l06117" name="l06117"></a><span class="lineno"> 6117</span>            <span class="comment">// sample</span></div>
<div class="line"><a id="l06118" name="l06118"></a><span class="lineno"> 6118</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightradius2</a> = light-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a> * light-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l06119" name="l06119"></a><span class="lineno"> 6119</span>            <a class="code hl_define" href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a>(light-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, p, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>);</div>
<div class="line"><a id="l06120" name="l06120"></a><span class="lineno"> 6120</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a> = <a class="code hl_define" href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>);</div>
<div class="line"><a id="l06121" name="l06121"></a><span class="lineno"> 6121</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a> &gt;= <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightradius2</a>)</div>
<div class="line"><a id="l06122" name="l06122"></a><span class="lineno"> 6122</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06123" name="l06123"></a><span class="lineno"> 6123</span>            dist = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sqrt</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dist2</a>) / light-&gt;<a class="code hl_variable" href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">radius</a>;</div>
<div class="line"><a id="l06124" name="l06124"></a><span class="lineno"> 6124</span>            <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> = (1.0f - dist) * <a class="code hl_variable" href="r__shadow_8c.html#ac983b35605fe044369c676ce33b58061">r_shadow_lightattenuationlinearscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> / (<a class="code hl_variable" href="r__shadow_8c.html#a0f3acc72b271530ae45ed8b06f011976">r_shadow_lightattenuationdividebias</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a> + dist*dist) * <a class="code hl_variable" href="r__shadow_8c.html#a8b27974ce25cb2c28bbdc15bfb50f20f">r_shadow_lightintensityscale</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><a id="l06125" name="l06125"></a><span class="lineno"> 6125</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> &lt;= 0.0f)</div>
<div class="line"><a id="l06126" name="l06126"></a><span class="lineno"> 6126</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06127" name="l06127"></a><span class="lineno"> 6127</span>            <span class="keywordflow">if</span> (light-&gt;<a class="code hl_variable" href="structrtlight__t.html#a24a17e99722f1493e45d4a240584a80c">shadow</a> &amp;&amp; <a class="code hl_function" href="cl__collision_8c.html#a3844376c9cc74935d902373d216acc75">CL_TraceLine</a>(p, light-&gt;<a class="code hl_variable" href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">shadoworigin</a>, <a class="code hl_define" href="world_8h.html#ad9b31bede6128044de93b93641630437">MOVE_NOMONSTERS</a>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a>, 0, <a class="code hl_define" href="model__brush_8h.html#a92eb2c00b3276aef285cf43b305a43da">MATERIALFLAGMASK_TRANSLUCENT</a>, <a class="code hl_variable" href="collision_8c.html#ac0a2160fccec6a28f98e2df5e39d1f7c">collision_extendmovelength</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <a class="code hl_define" href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">false</span>, <span class="keyword">true</span>).<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a> &lt; 1)</div>
<div class="line"><a id="l06128" name="l06128"></a><span class="lineno"> 6128</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06129" name="l06129"></a><span class="lineno"> 6129</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> &lt; 3; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>++)</div>
<div class="line"><a id="l06130" name="l06130"></a><span class="lineno"> 6130</span>                <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] = light-&gt;<a class="code hl_variable" href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">currentcolor</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] * <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a>;</div>
<div class="line"><a id="l06131" name="l06131"></a><span class="lineno"> 6131</span>            <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> = <a class="code hl_define" href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a>(<a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>);</div>
<div class="line"><a id="l06132" name="l06132"></a><span class="lineno"> 6132</span>            <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>);</div>
<div class="line"><a id="l06133" name="l06133"></a><span class="lineno"> 6133</span>            <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> &lt; 3; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>++)</div>
<div class="line"><a id="l06134" name="l06134"></a><span class="lineno"> 6134</span>            {</div>
<div class="line"><a id="l06135" name="l06135"></a><span class="lineno"> 6135</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sa</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += 0.5f * <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>];</div>
<div class="line"><a id="l06136" name="l06136"></a><span class="lineno"> 6136</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sx</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[0] * <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>];</div>
<div class="line"><a id="l06137" name="l06137"></a><span class="lineno"> 6137</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sy</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[1] * <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>];</div>
<div class="line"><a id="l06138" name="l06138"></a><span class="lineno"> 6138</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sz</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[2] * <a class="code hl_variable" href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>];</div>
<div class="line"><a id="l06139" name="l06139"></a><span class="lineno"> 6139</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sd</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] += <a class="code hl_variable" href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a> * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relativepoint</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>];</div>
<div class="line"><a id="l06140" name="l06140"></a><span class="lineno"> 6140</span>            }</div>
<div class="line"><a id="l06141" name="l06141"></a><span class="lineno"> 6141</span>        }</div>
<div class="line"><a id="l06142" name="l06142"></a><span class="lineno"> 6142</span>    }</div>
<div class="line"><a id="l06143" name="l06143"></a><span class="lineno"> 6143</span> </div>
<div class="line"><a id="l06144" name="l06144"></a><span class="lineno"> 6144</span>    <span class="comment">// calculate the weighted-average light direction (bentnormal)</span></div>
<div class="line"><a id="l06145" name="l06145"></a><span class="lineno"> 6145</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> &lt; 3; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>++)</div>
<div class="line"><a id="l06146" name="l06146"></a><span class="lineno"> 6146</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightdir</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sd</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>];</div>
<div class="line"><a id="l06147" name="l06147"></a><span class="lineno"> 6147</span>    <a class="code hl_define" href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightdir</a>);</div>
<div class="line"><a id="l06148" name="l06148"></a><span class="lineno"> 6148</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> = 0; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a> &lt; 3; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>++)</div>
<div class="line"><a id="l06149" name="l06149"></a><span class="lineno"> 6149</span>    {</div>
<div class="line"><a id="l06150" name="l06150"></a><span class="lineno"> 6150</span>        <span class="comment">// extract the diffuse color along the chosen direction and scale it</span></div>
<div class="line"><a id="l06151" name="l06151"></a><span class="lineno"> 6151</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] = (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightdir</a>[0] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sx</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightdir</a>[1] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sy</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] + <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">lightdir</a>[2] * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sz</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>]);</div>
<div class="line"><a id="l06152" name="l06152"></a><span class="lineno"> 6152</span>        <span class="comment">// subtract some of diffuse from ambient</span></div>
<div class="line"><a id="l06153" name="l06153"></a><span class="lineno"> 6153</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">ambient</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sa</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] + -0.333f * <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">diffuse</a>[<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">q</a>] + ambientintensity;</div>
<div class="line"><a id="l06154" name="l06154"></a><span class="lineno"> 6154</span>    }</div>
<div class="line"><a id="l06155" name="l06155"></a><span class="lineno"> 6155</span>}</div>
</div>
<div class="ttc" id="abspfile_8h_html_a85f0acbb100ce4dc3c63037496d631d6"><div class="ttname"><a href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a></div><div class="ttdeci">#define SUPERCONTENTS_SOLID</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00196">bspfile.h:196</a></div></div>
<div class="ttc" id="abspfile_8h_html_a86cebf49778299337e696bf0abc2d046"><div class="ttname"><a href="bspfile_8h.html#a86cebf49778299337e696bf0abc2d046">SUPERCONTENTS_LIQUIDSMASK</a></div><div class="ttdeci">#define SUPERCONTENTS_LIQUIDSMASK</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00218">bspfile.h:218</a></div></div>
<div class="ttc" id="acl__collision_8c_html_a3844376c9cc74935d902373d216acc75"><div class="ttname"><a href="cl__collision_8c.html#a3844376c9cc74935d902373d216acc75">CL_TraceLine</a></div><div class="ttdeci">trace_t CL_TraceLine(const vec3_t start, const vec3_t end, int type, prvm_edict_t *passedict, int hitsupercontentsmask, int skipsupercontentsmask, int skipmaterialflagsmask, float extend, qbool hitnetworkbrushmodels, qbool hitnetworkplayers, int *hitnetworkentity, qbool hitcsqcentities, qbool hitsurfaces)</div><div class="ttdef"><b>Definition</b> <a href="cl__collision_8c_source.html#l00427">cl_collision.c:427</a></div></div>
<div class="ttc" id="acl__collision_8c_html_a7ff233acc35349210e7a5790cabbf8ee"><div class="ttname"><a href="cl__collision_8c.html#a7ff233acc35349210e7a5790cabbf8ee">CL_TracePoint</a></div><div class="ttdeci">trace_t CL_TracePoint(const vec3_t start, int type, prvm_edict_t *passedict, int hitsupercontentsmask, int skipsupercontentsmask, int skipmaterialflagsmask, qbool hitnetworkbrushmodels, qbool hitnetworkplayers, int *hitnetworkentity, qbool hitcsqcentities)</div><div class="ttdef"><b>Definition</b> <a href="cl__collision_8c_source.html#l00206">cl_collision.c:206</a></div></div>
<div class="ttc" id="acl__collision_8c_html_afaf23d22697d0f04fa66b5ee89b6157d"><div class="ttname"><a href="cl__collision_8c.html#afaf23d22697d0f04fa66b5ee89b6157d">CL_Cache_TraceLineSurfaces</a></div><div class="ttdeci">trace_t CL_Cache_TraceLineSurfaces(const vec3_t start, const vec3_t end, int type, int hitsupercontentsmask, int skipsupercontentsmask, int skipmaterialflagsmask)</div><div class="ttdef"><b>Definition</b> <a href="cl__collision_8c_source.html#l00902">cl_collision.c:902</a></div></div>
<div class="ttc" id="acl__collision_8h_html"><div class="ttname"><a href="cl__collision_8h.html">cl_collision.h</a></div></div>
<div class="ttc" id="acl__main_8c_html_aa07d17cda937753e8e976ea3c9c5c312"><div class="ttname"><a href="cl__main_8c.html#aa07d17cda937753e8e976ea3c9c5c312">cl</a></div><div class="ttdeci">client_state_t cl</div><div class="ttdef"><b>Definition</b> <a href="cl__main_8c_source.html#l00115">cl_main.c:115</a></div></div>
<div class="ttc" id="acl__screen_8c_html_ae58b44b922d5902939340cd2f0bd7a38"><div class="ttname"><a href="cl__screen_8c.html#ae58b44b922d5902939340cd2f0bd7a38">vid_conwidth</a></div><div class="ttdeci">cvar_t vid_conwidth</div><div class="ttdef"><b>Definition</b> <a href="cl__screen_8c_source.html#l00055">cl_screen.c:55</a></div></div>
<div class="ttc" id="aclient_8h_html_a02b341fb62e7f8268a5f7f684ab0f2f2"><div class="ttname"><a href="client_8h.html#a02b341fb62e7f8268a5f7f684ab0f2f2">LIGHTFLAG_NORMALMODE</a></div><div class="ttdeci">#define LIGHTFLAG_NORMALMODE</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00034">client.h:34</a></div></div>
<div class="ttc" id="aclient_8h_html_a1b1a580519a269d1d752b2d643b80f6a"><div class="ttname"><a href="client_8h.html#a1b1a580519a269d1d752b2d643b80f6a">LIGHTFLAG_REALTIMEMODE</a></div><div class="ttdeci">#define LIGHTFLAG_REALTIMEMODE</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00035">client.h:35</a></div></div>
<div class="ttc" id="acmd_8c_html_a86fa905462db75436af48f27298204e5"><div class="ttname"><a href="cmd_8c.html#a86fa905462db75436af48f27298204e5">Cmd_AddCommand</a></div><div class="ttdeci">void Cmd_AddCommand(unsigned flags, const char *cmd_name, xcommand_t function, const char *description)</div><div class="ttdoc">called by the init functions of other parts of the program to register commands and functions to call...</div><div class="ttdef"><b>Definition</b> <a href="cmd_8c_source.html#l01754">cmd.c:1754</a></div></div>
<div class="ttc" id="acmd_8c_html_aa617fb9e2fe1edc8bd6ce0fafccd3626"><div class="ttname"><a href="cmd_8c.html#aa617fb9e2fe1edc8bd6ce0fafccd3626">cmd_local</a></div><div class="ttdeci">cmd_state_t * cmd_local</div><div class="ttdoc">command interpreter for local commands injected by SVQC, CSQC, MQC, server or client engine code uses...</div><div class="ttdef"><b>Definition</b> <a href="cmd_8c_source.html#l00025">cmd.c:25</a></div></div>
<div class="ttc" id="acmd_8h_html_ab070abb7f2ebb842c8e67bef4e317314"><div class="ttname"><a href="cmd_8h.html#ab070abb7f2ebb842c8e67bef4e317314">Cmd_Argc</a></div><div class="ttdeci">static int Cmd_Argc(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="cmd_8h_source.html#l00248">cmd.h:248</a></div></div>
<div class="ttc" id="acmd_8h_html_ab49017bdcb3104823452a9ed7597aaf5"><div class="ttname"><a href="cmd_8h.html#ab49017bdcb3104823452a9ed7597aaf5">Cmd_Argv</a></div><div class="ttdeci">static const char * Cmd_Argv(cmd_state_t *cmd, int arg)</div><div class="ttdoc">Cmd_Argv(cmd, ) will return an empty string (not a NULL) if arg &gt; argc, so string operations are alwa...</div><div class="ttdef"><b>Definition</b> <a href="cmd_8h_source.html#l00253">cmd.h:253</a></div></div>
<div class="ttc" id="acmd_8h_html_abba64dce6a45541317c5508aa83436e5"><div class="ttname"><a href="cmd_8h.html#abba64dce6a45541317c5508aa83436e5">CF_CLIENT</a></div><div class="ttdeci">#define CF_CLIENT</div><div class="ttdoc">cvar/command that only the client can change/execute</div><div class="ttdef"><b>Definition</b> <a href="cmd_8h_source.html#l00048">cmd.h:48</a></div></div>
<div class="ttc" id="acmd_8h_html_aeeecb68995736ab90434173e64fd14e5"><div class="ttname"><a href="cmd_8h.html#aeeecb68995736ab90434173e64fd14e5">CF_ARCHIVE</a></div><div class="ttdeci">#define CF_ARCHIVE</div><div class="ttdoc">cvar should have its set value saved to config.cfg and persist across sessions</div><div class="ttdef"><b>Definition</b> <a href="cmd_8h_source.html#l00053">cmd.h:53</a></div></div>
<div class="ttc" id="acollision_8c_html_ac0a2160fccec6a28f98e2df5e39d1f7c"><div class="ttname"><a href="collision_8c.html#ac0a2160fccec6a28f98e2df5e39d1f7c">collision_extendmovelength</a></div><div class="ttdeci">cvar_t collision_extendmovelength</div><div class="ttdef"><b>Definition</b> <a href="collision_8c_source.html#l00014">collision.c:14</a></div></div>
<div class="ttc" id="acommon_8c_html_a3eb222dff7f3bc0f6ce47f1e02df175e"><div class="ttname"><a href="common_8c.html#a3eb222dff7f3bc0f6ce47f1e02df175e">com_token</a></div><div class="ttdeci">char com_token[MAX_INPUTLINE]</div><div class="ttdef"><b>Definition</b> <a href="common_8c_source.html#l00039">common.c:39</a></div></div>
<div class="ttc" id="acommon_8c_html_a4a8220fa88226bf9cf39b12a051a20d7"><div class="ttname"><a href="common_8c.html#a4a8220fa88226bf9cf39b12a051a20d7">va</a></div><div class="ttdeci">char * va(char *buf, size_t buflen, const char *format,...)</div><div class="ttdef"><b>Definition</b> <a href="common_8c_source.html#l00972">common.c:972</a></div></div>
<div class="ttc" id="acommon_8c_html_acc99aea15e3d929ef5cfac822ee7040d"><div class="ttname"><a href="common_8c.html#acc99aea15e3d929ef5cfac822ee7040d">COM_ParseToken_Simple</a></div><div class="ttdeci">qbool COM_ParseToken_Simple(const char **datapointer, qbool returnnewline, qbool parsebackslash, qbool parsecomments)</div><div class="ttdef"><b>Definition</b> <a href="common_8c_source.html#l00463">common.c:463</a></div></div>
<div class="ttc" id="acommon_8c_html_ae36050083f45e395189fee6aa45fbb0c"><div class="ttname"><a href="common_8c.html#ae36050083f45e395189fee6aa45fbb0c">dpsnprintf</a></div><div class="ttdeci">int dpsnprintf(char *buffer, size_t buffersize, const char *format,...)</div><div class="ttdoc">Returns the number of printed characters, excluding the final '\0' or returns -1 if the buffer isn't ...</div><div class="ttdef"><b>Definition</b> <a href="common_8c_source.html#l00997">common.c:997</a></div></div>
<div class="ttc" id="acommon_8h_html_aaef80d6b72e2476c82258733a8c4eced"><div class="ttname"><a href="common_8h.html#aaef80d6b72e2476c82258733a8c4eced">dp_strlcpy</a></div><div class="ttdeci">#define dp_strlcpy(dst, src, dsize)</div><div class="ttdef"><b>Definition</b> <a href="common_8h_source.html#l00298">common.h:298</a></div></div>
<div class="ttc" id="aconsole_8c_html_a1cf9711475097b11dc41f743254ec77e"><div class="ttname"><a href="console_8c.html#a1cf9711475097b11dc41f743254ec77e">Con_Print</a></div><div class="ttdeci">void Con_Print(const char *msg)</div><div class="ttdoc">Prints to all appropriate console targets, and adds timestamps.</div><div class="ttdef"><b>Definition</b> <a href="console_8c_source.html#l01450">console.c:1450</a></div></div>
<div class="ttc" id="aconsole_8c_html_a2696300802453d9333e9f52e5fae15bc"><div class="ttname"><a href="console_8c.html#a2696300802453d9333e9f52e5fae15bc">Con_DPrintf</a></div><div class="ttdeci">void Con_DPrintf(const char *fmt,...)</div><div class="ttdoc">A Con_Printf that only shows up if the &quot;developer&quot; cvar is set.</div><div class="ttdef"><b>Definition</b> <a href="console_8c_source.html#l01490">console.c:1490</a></div></div>
<div class="ttc" id="aconsole_8c_html_a49b71fe9a87e57a440e07af4a869a9f6"><div class="ttname"><a href="console_8c.html#a49b71fe9a87e57a440e07af4a869a9f6">Con_Printf</a></div><div class="ttdeci">void Con_Printf(const char *fmt,...)</div><div class="ttdoc">Prints to all appropriate console targets.</div><div class="ttdef"><b>Definition</b> <a href="console_8c_source.html#l01460">console.c:1460</a></div></div>
<div class="ttc" id="acvar_8c_html_a65b55ce35a5bd18e379065651d5d6e15"><div class="ttname"><a href="cvar_8c.html#a65b55ce35a5bd18e379065651d5d6e15">Cvar_SetValueQuick</a></div><div class="ttdeci">void Cvar_SetValueQuick(cvar_t *var, float value)</div><div class="ttdef"><b>Definition</b> <a href="cvar_8c_source.html#l00473">cvar.c:473</a></div></div>
<div class="ttc" id="acvar_8c_html_a6f37a084abf4715928f1a004181866f8"><div class="ttname"><a href="cvar_8c.html#a6f37a084abf4715928f1a004181866f8">Cvar_SetQuick</a></div><div class="ttdeci">void Cvar_SetQuick(cvar_t *var, const char *value)</div><div class="ttdef"><b>Definition</b> <a href="cvar_8c_source.html#l00436">cvar.c:436</a></div></div>
<div class="ttc" id="acvar_8c_html_a9bd27026ed325ffe5276549c11c7379d"><div class="ttname"><a href="cvar_8c.html#a9bd27026ed325ffe5276549c11c7379d">Cvar_RegisterVariable</a></div><div class="ttdeci">void Cvar_RegisterVariable(cvar_t *variable)</div><div class="ttdoc">registers a cvar that already has the name, string, and optionally the archive elements set.</div><div class="ttdef"><b>Definition</b> <a href="cvar_8c_source.html#l00599">cvar.c:599</a></div></div>
<div class="ttc" id="adraw_8h_html_a42f38f468dbff7db26f70058ed779b06"><div class="ttname"><a href="draw_8h.html#a42f38f468dbff7db26f70058ed779b06">DrawQ_Pic</a></div><div class="ttdeci">void DrawQ_Pic(float x, float y, cachepic_t *pic, float width, float height, float red, float green, float blue, float alpha, int flags)</div><div class="ttdef"><b>Definition</b> <a href="gl__draw_8c_source.html#l00796">gl_draw.c:796</a></div></div>
<div class="ttc" id="adraw_8h_html_a4eb1b5ac9032ef0b8c36c1a7d8d99f8e"><div class="ttname"><a href="draw_8h.html#a4eb1b5ac9032ef0b8c36c1a7d8d99f8e">FONT_DEFAULT</a></div><div class="ttdeci">#define FONT_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="draw_8h_source.html#l00128">draw.h:128</a></div></div>
<div class="ttc" id="adraw_8h_html_a76f1009f2386b42dfad25268af32b1d3"><div class="ttname"><a href="draw_8h.html#a76f1009f2386b42dfad25268af32b1d3">DrawQ_String</a></div><div class="ttdeci">float DrawQ_String(float x, float y, const char *text, size_t maxlen, float scalex, float scaley, float basered, float basegreen, float baseblue, float basealpha, int flags, int *outcolor, qbool ignorecolorcodes, const dp_font_t *fnt)</div><div class="ttdef"><b>Definition</b> <a href="gl__draw_8c_source.html#l01318">gl_draw.c:1318</a></div></div>
<div class="ttc" id="afractalnoise_8c_html_a86fdeed0593c5e3b95d1f2447350ca96"><div class="ttname"><a href="fractalnoise_8c.html#a86fdeed0593c5e3b95d1f2447350ca96">n</a></div><div class="ttdeci">#define n(x, y)</div></div>
<div class="ttc" id="afs_8c_html_a2a2eae59234c2478341fea0a380e99ac"><div class="ttname"><a href="fs_8c.html#a2a2eae59234c2478341fea0a380e99ac">FS_WriteFile</a></div><div class="ttdeci">qbool FS_WriteFile(const char *filename, const void *data, fs_offset_t len)</div><div class="ttdef"><b>Definition</b> <a href="fs_8c_source.html#l03577">fs.c:3577</a></div></div>
<div class="ttc" id="afs_8c_html_a46b9b5ad3cc14f77ae63016505163128"><div class="ttname"><a href="fs_8c.html#a46b9b5ad3cc14f77ae63016505163128">FS_LoadFile</a></div><div class="ttdeci">unsigned char * FS_LoadFile(const char *path, mempool_t *pool, qbool quiet, fs_offset_t *filesizepointer)</div><div class="ttdef"><b>Definition</b> <a href="fs_8c_source.html#l03525">fs.c:3525</a></div></div>
<div class="ttc" id="afs_8c_html_a93257bedba32e45fc3f07bea139c0604"><div class="ttname"><a href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a></div><div class="ttdeci">static int(ZEXPORT *qz_inflate)(z_stream *strm</div></div>
<div class="ttc" id="afs_8h_html_a5bcbce6d6c29888adf596671d6acd44b"><div class="ttname"><a href="fs_8h.html#a5bcbce6d6c29888adf596671d6acd44b">fs_offset_t</a></div><div class="ttdeci">int64_t fs_offset_t</div><div class="ttdef"><b>Definition</b> <a href="fs_8h_source.html#l00037">fs.h:37</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a160faabf0f2b8616f192c5d3046ac477"><div class="ttname"><a href="gl__backend_8c.html#a160faabf0f2b8616f192c5d3046ac477">R_Mesh_PrepareVertices_Vertex3f</a></div><div class="ttdeci">void R_Mesh_PrepareVertices_Vertex3f(int numvertices, const float *vertex3f, const r_meshbuffer_t *vertexbuffer, int bufferoffset)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l02120">gl_backend.c:2120</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a202e06e98ec098852ac82ee767c8f770"><div class="ttname"><a href="gl__backend_8c.html#a202e06e98ec098852ac82ee767c8f770">GL_Clear</a></div><div class="ttdeci">void GL_Clear(int mask, const float *colorvalue, float depthvalue, int stencilvalue)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01477">gl_backend.c:1477</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a23c98d4ba5a86391a8ecb2363252e874"><div class="ttname"><a href="gl__backend_8c.html#a23c98d4ba5a86391a8ecb2363252e874">GL_BlendEquationSubtract</a></div><div class="ttdeci">void GL_BlendEquationSubtract(qbool negated)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l02205">gl_backend.c:2205</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a28f12ab6551743428797e62bf183ebde"><div class="ttname"><a href="gl__backend_8c.html#a28f12ab6551743428797e62bf183ebde">GL_CullFace</a></div><div class="ttdeci">void GL_CullFace(int state)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01339">gl_backend.c:1339</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a2a511f73b51c9eca7a2e20b21b543944"><div class="ttname"><a href="gl__backend_8c.html#a2a511f73b51c9eca7a2e20b21b543944">GL_ColorMask</a></div><div class="ttdeci">void GL_ColorMask(int r, int g, int b, int a)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01409">gl_backend.c:1409</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a2df502b95da3bc0f89296df1e7ade4d0"><div class="ttname"><a href="gl__backend_8c.html#a2df502b95da3bc0f89296df1e7ade4d0">polygonelement3s</a></div><div class="ttdeci">unsigned short polygonelement3s[(POLYGONELEMENTS_MAXPOINTS-2) *3]</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l00242">gl_backend.c:242</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a369132de82d4015a01e164c63255403f"><div class="ttname"><a href="gl__backend_8c.html#a369132de82d4015a01e164c63255403f">GL_DepthMask</a></div><div class="ttdeci">void GL_DepthMask(int state)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01201">gl_backend.c:1201</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a5691f389c9e452441b81b36bd486580e"><div class="ttname"><a href="gl__backend_8c.html#a5691f389c9e452441b81b36bd486580e">polygonelement3i</a></div><div class="ttdeci">int polygonelement3i[(POLYGONELEMENTS_MAXPOINTS-2) *3]</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l00241">gl_backend.c:241</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a5d98d0078d5c884b3e382d6ddd7eb2e1"><div class="ttname"><a href="gl__backend_8c.html#a5d98d0078d5c884b3e382d6ddd7eb2e1">GL_DepthFunc</a></div><div class="ttdeci">void GL_DepthFunc(int state)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01240">gl_backend.c:1240</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a5fd11a8a3e5cbb27690e870134b36675"><div class="ttname"><a href="gl__backend_8c.html#a5fd11a8a3e5cbb27690e870134b36675">R_Mesh_Draw</a></div><div class="ttdeci">void R_Mesh_Draw(int firstvertex, int numvertices, int firsttriangle, int numtriangles, const int *element3i, const r_meshbuffer_t *element3i_indexbuffer, int element3i_bufferoffset, const unsigned short *element3s, const r_meshbuffer_t *element3s_indexbuffer, int element3s_bufferoffset)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01666">gl_backend.c:1666</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a5fe02ffa3b291e192588223026a0a13b"><div class="ttname"><a href="gl__backend_8c.html#a5fe02ffa3b291e192588223026a0a13b">R_Viewport_InitRectSideView</a></div><div class="ttdeci">void R_Viewport_InitRectSideView(r_viewport_t *v, const matrix4x4_t *cameramatrix, int side, int size, int border, float nearclip, float farclip, const float *nearplane, int offsetx, int offsety)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l00868">gl_backend.c:868</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a712c082566b5939b265260c5cd929033"><div class="ttname"><a href="gl__backend_8c.html#a712c082566b5939b265260c5cd929033">GL_DepthTest</a></div><div class="ttdeci">void GL_DepthTest(int state)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01217">gl_backend.c:1217</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a736b5d13ba47fb7de5dafb73b3026e1a"><div class="ttname"><a href="gl__backend_8c.html#a736b5d13ba47fb7de5dafb73b3026e1a">GL_DepthRange</a></div><div class="ttdeci">void GL_DepthRange(float nearfrac, float farfrac)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01256">gl_backend.c:1256</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a888e5667bc275712bc1407f459c9e67e"><div class="ttname"><a href="gl__backend_8c.html#a888e5667bc275712bc1407f459c9e67e">GL_PolygonOffset</a></div><div class="ttdeci">void GL_PolygonOffset(float planeoffset, float depthoffset)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01300">gl_backend.c:1300</a></div></div>
<div class="ttc" id="agl__backend_8c_html_a8e8660f06000abab66f3d141de416092"><div class="ttname"><a href="gl__backend_8c.html#a8e8660f06000abab66f3d141de416092">R_Mesh_CreateFramebufferObject</a></div><div class="ttdeci">int R_Mesh_CreateFramebufferObject(rtexture_t *depthtexture, rtexture_t *colortexture, rtexture_t *colortexture2, rtexture_t *colortexture3, rtexture_t *colortexture4)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l00959">gl_backend.c:959</a></div></div>
<div class="ttc" id="agl__backend_8c_html_aa241fd9a2ecba640ec39c782948c9916"><div class="ttname"><a href="gl__backend_8c.html#aa241fd9a2ecba640ec39c782948c9916">R_SetViewport</a></div><div class="ttdeci">void R_SetViewport(const r_viewport_t *v)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l00896">gl_backend.c:896</a></div></div>
<div class="ttc" id="agl__backend_8c_html_aa367cce31c9af183e5fc889eb5f818d9"><div class="ttname"><a href="gl__backend_8c.html#aa367cce31c9af183e5fc889eb5f818d9">R_Viewport_InitOrtho</a></div><div class="ttdeci">void R_Viewport_InitOrtho(r_viewport_t *v, const matrix4x4_t *cameramatrix, int x, int y, int width, int height, float x1, float y1, float x2, float y2, float nearclip, float farclip, const float *nearplane)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l00586">gl_backend.c:586</a></div></div>
<div class="ttc" id="agl__backend_8c_html_ab0845d5ed92717ad1158e8a559db073d"><div class="ttname"><a href="gl__backend_8c.html#ab0845d5ed92717ad1158e8a559db073d">R_Mesh_ResetTextureState</a></div><div class="ttdeci">void R_Mesh_ResetTextureState(void)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l02108">gl_backend.c:2108</a></div></div>
<div class="ttc" id="agl__backend_8c_html_ab838ec7c7331d12af34180a8b19a9b15"><div class="ttname"><a href="gl__backend_8c.html#ab838ec7c7331d12af34180a8b19a9b15">GL_Color</a></div><div class="ttdeci">void GL_Color(float cr, float cg, float cb, float ca)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01427">gl_backend.c:1427</a></div></div>
<div class="ttc" id="agl__backend_8c_html_ab9979b96d01546862e3ea80ab069c614"><div class="ttname"><a href="gl__backend_8c.html#ab9979b96d01546862e3ea80ab069c614">R_Mesh_SetRenderTargets</a></div><div class="ttdeci">void R_Mesh_SetRenderTargets(int fbo, rtexture_t *depthtexture, rtexture_t *colortexture, rtexture_t *colortexture2, rtexture_t *colortexture3, rtexture_t *colortexture4)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01053">gl_backend.c:1053</a></div></div>
<div class="ttc" id="agl__backend_8c_html_aca3e3f9f03357db16ce588778b258020"><div class="ttname"><a href="gl__backend_8c.html#aca3e3f9f03357db16ce588778b258020">GL_BlendFunc</a></div><div class="ttdeci">void GL_BlendFunc(int blendfunc1, int blendfunc2)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01163">gl_backend.c:1163</a></div></div>
<div class="ttc" id="agl__backend_8c_html_acb01973bd77bf8b8275950e1cd2a3249"><div class="ttname"><a href="gl__backend_8c.html#acb01973bd77bf8b8275950e1cd2a3249">R_ScissorForBBox</a></div><div class="ttdeci">qbool R_ScissorForBBox(const float *mins, const float *maxs, int *scissor)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l00429">gl_backend.c:429</a></div></div>
<div class="ttc" id="agl__backend_8c_html_adadda08f98e1c2d849d38d6885073148"><div class="ttname"><a href="gl__backend_8c.html#adadda08f98e1c2d849d38d6885073148">GL_Scissor</a></div><div class="ttdeci">void GL_Scissor(int x, int y, int width, int height)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01445">gl_backend.c:1445</a></div></div>
<div class="ttc" id="agl__backend_8c_html_add6233d245d2e22c748e7d0e03204acd"><div class="ttname"><a href="gl__backend_8c.html#add6233d245d2e22c748e7d0e03204acd">R_Mesh_PrepareVertices_Generic_Arrays</a></div><div class="ttdeci">void R_Mesh_PrepareVertices_Generic_Arrays(int numvertices, const float *vertex3f, const float *color4f, const float *texcoord2f)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l02137">gl_backend.c:2137</a></div></div>
<div class="ttc" id="agl__backend_8c_html_afc361a7676a518ccccc3f0bb3b38b9c0"><div class="ttname"><a href="gl__backend_8c.html#afc361a7676a518ccccc3f0bb3b38b9c0">R_Mesh_DestroyFramebufferObject</a></div><div class="ttdeci">void R_Mesh_DestroyFramebufferObject(int fbo)</div><div class="ttdef"><b>Definition</b> <a href="gl__backend_8c_source.html#l01036">gl_backend.c:1036</a></div></div>
<div class="ttc" id="agl__backend_8h_html_a13799234825714fe81a6a09d9c9c0548"><div class="ttname"><a href="gl__backend_8h.html#a13799234825714fe81a6a09d9c9c0548">R_EntityMatrix</a></div><div class="ttdeci">void R_EntityMatrix(const matrix4x4_t *matrix)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l04425">gl_rmain.c:4425</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a00905d7477a75b0ba23ce9bf00d167b1"><div class="ttname"><a href="gl__rmain_8c.html#a00905d7477a75b0ba23ce9bf00d167b1">r_texture_whitecube</a></div><div class="ttdeci">rtexture_t * r_texture_whitecube</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00277">gl_rmain.c:277</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a01cb2adf1d532722b7b349786a3d55f3"><div class="ttname"><a href="gl__rmain_8c.html#a01cb2adf1d532722b7b349786a3d55f3">R_FrameData_SetMark</a></div><div class="ttdeci">void R_FrameData_SetMark(void)</div><div class="ttdoc">set a marker that allows you to discard the following temporary memory allocations</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l03589">gl_rmain.c:3589</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a02cb1671919ce8b41440de9ff892d074"><div class="ttname"><a href="gl__rmain_8c.html#a02cb1671919ce8b41440de9ff892d074">r_shadows_castfrombmodels</a></div><div class="ttdeci">cvar_t r_shadows_castfrombmodels</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00128">gl_rmain.c:128</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a06a2f8c2455e92727760628c72f15b18"><div class="ttname"><a href="gl__rmain_8c.html#a06a2f8c2455e92727760628c72f15b18">r_showlighting</a></div><div class="ttdeci">cvar_t r_showlighting</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00088">gl_rmain.c:88</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a0753494883ac11a96bbf58c57312d691"><div class="ttname"><a href="gl__rmain_8c.html#a0753494883ac11a96bbf58c57312d691">r_shadows_shadowmapbias</a></div><div class="ttdeci">cvar_t r_shadows_shadowmapbias</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00131">gl_rmain.c:131</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a082032c84c6ef04defd86078638debce"><div class="ttname"><a href="gl__rmain_8c.html#a082032c84c6ef04defd86078638debce">R_GLSL_Restart_f</a></div><div class="ttdeci">void R_GLSL_Restart_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l01394">gl_rmain.c:1394</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a0948c688f9095e3c6e7a16c53636696f"><div class="ttname"><a href="gl__rmain_8c.html#a0948c688f9095e3c6e7a16c53636696f">R_SetupShader_Generic_NoTexture</a></div><div class="ttdeci">void R_SetupShader_Generic_NoTexture(qbool usegamma, qbool notrippy)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l01487">gl_rmain.c:1487</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a0c00b6cff8149799615236dd08a34616"><div class="ttname"><a href="gl__rmain_8c.html#a0c00b6cff8149799615236dd08a34616">R_CanSeeBox</a></div><div class="ttdeci">qbool R_CanSeeBox(int numsamples, vec_t eyejitter, vec_t entboxenlarge, vec_t entboxexpand, vec_t pad, vec3_t eye, vec3_t entboxmins, vec3_t entboxmaxs)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l03896">gl_rmain.c:3896</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a0ca297a89eef7f0e1dcf0c12676700da"><div class="ttname"><a href="gl__rmain_8c.html#a0ca297a89eef7f0e1dcf0c12676700da">RSurf_PrepareVerticesForBatch</a></div><div class="ttdeci">void RSurf_PrepareVerticesForBatch(int batchneed, int texturenumsurfaces, const msurface_t **texturesurfacelist)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l07424">gl_rmain.c:7424</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a13b4f59e3ee0aaddd39baf188b714b08"><div class="ttname"><a href="gl__rmain_8c.html#a13b4f59e3ee0aaddd39baf188b714b08">R_FrameData_ReturnToMark</a></div><div class="ttdeci">void R_FrameData_ReturnToMark(void)</div><div class="ttdoc">discard recent memory allocations (rewind to marker)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l03596">gl_rmain.c:3596</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a1fc9307fe84d14cbfeebbf3d59ecef25"><div class="ttname"><a href="gl__rmain_8c.html#a1fc9307fe84d14cbfeebbf3d59ecef25">r_maxqueries</a></div><div class="ttdeci">unsigned int r_maxqueries</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00299">gl_rmain.c:299</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a239a0e33d1c93c5fda8c6d1a2b10830b"><div class="ttname"><a href="gl__rmain_8c.html#a239a0e33d1c93c5fda8c6d1a2b10830b">R_SetupShader_DepthOrShadow</a></div><div class="ttdeci">void R_SetupShader_DepthOrShadow(qbool notrippy, qbool depthrgb, qbool skeletal)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l01492">gl_rmain.c:1492</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a283516ef65f48b279a6b19fb3ac53a40"><div class="ttname"><a href="gl__rmain_8c.html#a283516ef65f48b279a6b19fb3ac53a40">r_shadows_focus</a></div><div class="ttdeci">cvar_t r_shadows_focus</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00129">gl_rmain.c:129</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a2d60da38c87bb227441e6c71449e940d"><div class="ttname"><a href="gl__rmain_8c.html#a2d60da38c87bb227441e6c71449e940d">r_shadows_darken</a></div><div class="ttdeci">cvar_t r_shadows_darken</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00124">gl_rmain.c:124</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a2ebd69dd33cef88cb5280d6a31e0a5d6"><div class="ttname"><a href="gl__rmain_8c.html#a2ebd69dd33cef88cb5280d6a31e0a5d6">R_AnimCache_GetEntity</a></div><div class="ttdeci">qbool R_AnimCache_GetEntity(entity_render_t *ent, qbool wantnormals, qbool wanttangents)</div><div class="ttdoc">get the skeletal data or cached animated mesh data for an entity (optionally with normals and tangent...</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l03797">gl_rmain.c:3797</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a36f19cdd7a555b8122917b8c887d7750"><div class="ttname"><a href="gl__rmain_8c.html#a36f19cdd7a555b8122917b8c887d7750">R_DrawCustomSurface</a></div><div class="ttdeci">void R_DrawCustomSurface(skinframe_t *skinframe, const matrix4x4_t *texmatrix, int materialflags, int firstvertex, int numvertices, int firsttriangle, int numtriangles, qbool writedepth, qbool prepass, qbool ui)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l10216">gl_rmain.c:10216</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a3ad0995fdb9cf4e470aea8263aa2bf50"><div class="ttname"><a href="gl__rmain_8c.html#a3ad0995fdb9cf4e470aea8263aa2bf50">r_test</a></div><div class="ttdeci">cvar_t r_test</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00235">gl_rmain.c:235</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a3c92f82dffe53dad2abf31a6b878de6a"><div class="ttname"><a href="gl__rmain_8c.html#a3c92f82dffe53dad2abf31a6b878de6a">r_shadows_throwdirection</a></div><div class="ttdeci">cvar_t r_shadows_throwdirection</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00126">gl_rmain.c:126</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a3d9e4102d980a25f2241b1801076ee19"><div class="ttname"><a href="gl__rmain_8c.html#a3d9e4102d980a25f2241b1801076ee19">RSurf_DrawBatch</a></div><div class="ttdeci">void RSurf_DrawBatch(void)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l08513">gl_rmain.c:8513</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a4c5a17db9ede9320416c2bf2df6a06e8"><div class="ttname"><a href="gl__rmain_8c.html#a4c5a17db9ede9320416c2bf2df6a06e8">r_shadows</a></div><div class="ttdeci">cvar_t r_shadows</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00123">gl_rmain.c:123</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a608abdd487d5b19b2608a9c66df6a317"><div class="ttname"><a href="gl__rmain_8c.html#a608abdd487d5b19b2608a9c66df6a317">r_fb</a></div><div class="ttdeci">r_framebufferstate_t r_fb</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00265">gl_rmain.c:265</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a6254a8f908da05ab79804175be40aec9"><div class="ttname"><a href="gl__rmain_8c.html#a6254a8f908da05ab79804175be40aec9">R_SkinFrame_LoadInternalBGRA</a></div><div class="ttdeci">skinframe_t * R_SkinFrame_LoadInternalBGRA(const char *name, int textureflags, const unsigned char *skindata, int width, int height, int comparewidth, int compareheight, int comparecrc, qbool sRGB)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l02545">gl_rmain.c:2545</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a6a9a1d6b87daf4b5991847cd90c0887d"><div class="ttname"><a href="gl__rmain_8c.html#a6a9a1d6b87daf4b5991847cd90c0887d">R_SetupShader_DeferredLight</a></div><div class="ttdeci">void R_SetupShader_DeferredLight(const rtlight_t *rtlight)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l02090">gl_rmain.c:2090</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a6e37b2293f5414887ac4300d77b36371"><div class="ttname"><a href="gl__rmain_8c.html#a6e37b2293f5414887ac4300d77b36371">rsurface</a></div><div class="ttdeci">rsurfacestate_t rsurface</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l06955">gl_rmain.c:6955</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a81ebc50273bdefa2ce1d9395013efb23"><div class="ttname"><a href="gl__rmain_8c.html#a81ebc50273bdefa2ce1d9395013efb23">r_main_mempool</a></div><div class="ttdeci">mempool_t * r_main_mempool</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00042">gl_rmain.c:42</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a84ee03d338f553e5d384e10073d105dd"><div class="ttname"><a href="gl__rmain_8c.html#a84ee03d338f553e5d384e10073d105dd">r_numqueries</a></div><div class="ttdeci">unsigned int r_numqueries</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00298">gl_rmain.c:298</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a95ff76317961bca4d507e2a301cc3278"><div class="ttname"><a href="gl__rmain_8c.html#a95ff76317961bca4d507e2a301cc3278">RSurf_SetupDepthAndCulling</a></div><div class="ttdeci">void RSurf_SetupDepthAndCulling(bool ui)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l08612">gl_rmain.c:8612</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a9b65dfdb28f6b15ccc9a666c82662ba8"><div class="ttname"><a href="gl__rmain_8c.html#a9b65dfdb28f6b15ccc9a666c82662ba8">r_shadows_shadowmapscale</a></div><div class="ttdeci">cvar_t r_shadows_shadowmapscale</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00130">gl_rmain.c:130</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_a9f892d1cf76c82c30d00abdd0187301a"><div class="ttname"><a href="gl__rmain_8c.html#a9f892d1cf76c82c30d00abdd0187301a">R_GetCubemap</a></div><div class="ttdeci">rtexture_t * R_GetCubemap(const char *basename)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l02981">gl_rmain.c:2981</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_aa05549217fc8dd06da062b617140ffe6"><div class="ttname"><a href="gl__rmain_8c.html#aa05549217fc8dd06da062b617140ffe6">R_CullBox</a></div><div class="ttdeci">qbool R_CullBox(const vec3_t mins, const vec3_t maxs, int numplanes, const mplane_t *planes)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l03478">gl_rmain.c:3478</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_aa29b4395183d58569d13e4e40db33629"><div class="ttname"><a href="gl__rmain_8c.html#aa29b4395183d58569d13e4e40db33629">R_CompileShader_CheckStaticParms</a></div><div class="ttdeci">qbool R_CompileShader_CheckStaticParms(void)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00861">gl_rmain.c:861</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_ab095e44ba81e415f6b29e8a3bf0fb7e7"><div class="ttname"><a href="gl__rmain_8c.html#ab095e44ba81e415f6b29e8a3bf0fb7e7">R_CalcSprite_Vertex3f</a></div><div class="ttdeci">void R_CalcSprite_Vertex3f(float *vertex3f, const vec3_t origin, const vec3_t left, const vec3_t up, float scalex1, float scalex2, float scaley1, float scaley2)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l06319">gl_rmain.c:6319</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_ab4193f961fb97c64ca6fe1067b74477e"><div class="ttname"><a href="gl__rmain_8c.html#ab4193f961fb97c64ca6fe1067b74477e">r_shadows_throwdistance</a></div><div class="ttdeci">cvar_t r_shadows_throwdistance</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00125">gl_rmain.c:125</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_ab91218d4fb985f2c4ffc9622a4e28fe2"><div class="ttname"><a href="gl__rmain_8c.html#ab91218d4fb985f2c4ffc9622a4e28fe2">RSurf_ActiveModelEntity</a></div><div class="ttdeci">void RSurf_ActiveModelEntity(const entity_render_t *ent, qbool wantnormals, qbool wanttangents, qbool prepass)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l06957">gl_rmain.c:6957</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_ac068333f6656190ddd5836765acdffe0"><div class="ttname"><a href="gl__rmain_8c.html#ac068333f6656190ddd5836765acdffe0">R_SkinFrame_MarkUsed</a></div><div class="ttdeci">void R_SkinFrame_MarkUsed(skinframe_t *skinframe)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l02175">gl_rmain.c:2175</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_ac8946f774e762f253a86b6a8171a7aba"><div class="ttname"><a href="gl__rmain_8c.html#ac8946f774e762f253a86b6a8171a7aba">r_showdisabledepthtest</a></div><div class="ttdeci">cvar_t r_showdisabledepthtest</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00092">gl_rmain.c:92</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_ace4a2750caaa0bcbe5bbaa56e8fd306d"><div class="ttname"><a href="gl__rmain_8c.html#ace4a2750caaa0bcbe5bbaa56e8fd306d">R_SetupShader_Surface</a></div><div class="ttdeci">void R_SetupShader_Surface(const float rtlightambient[3], const float rtlightdiffuse[3], const float rtlightspecular[3], rsurfacepass_t rsurfacepass, int texturenumsurfaces, const msurface_t **texturesurfacelist, void *surfacewaterplane, qbool notrippy, qbool ui)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l01562">gl_rmain.c:1562</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_ad828a2865ae4baf75678ea5ba4e74242"><div class="ttname"><a href="gl__rmain_8c.html#ad828a2865ae4baf75678ea5ba4e74242">R_CullFrustum</a></div><div class="ttdeci">qbool R_CullFrustum(const vec3_t mins, const vec3_t maxs)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l03472">gl_rmain.c:3472</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_ae1fda69f1ff6edbb96f5d16b8db0d825"><div class="ttname"><a href="gl__rmain_8c.html#ae1fda69f1ff6edbb96f5d16b8db0d825">r_refdef</a></div><div class="ttdeci">r_refdef_t r_refdef</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00057">gl_rmain.c:57</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_aefbad90ca99fed9fd3be95f04f07eb08"><div class="ttname"><a href="gl__rmain_8c.html#aefbad90ca99fed9fd3be95f04f07eb08">R_FrameData_Store</a></div><div class="ttdeci">void * R_FrameData_Store(size_t size, void *data)</div><div class="ttdoc">allocate some temporary memory and copy this data into it</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l03581">gl_rmain.c:3581</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_af224655903019505e9e0a05624281315"><div class="ttname"><a href="gl__rmain_8c.html#af224655903019505e9e0a05624281315">RSurf_ActiveCustomEntity</a></div><div class="ttdeci">void RSurf_ActiveCustomEntity(const matrix4x4_t *matrix, const matrix4x4_t *inversematrix, int entflags, double shadertime, float r, float g, float b, float a, int numvertices, const float *vertex3f, const float *texcoord2f, const float *normal3f, const float *svector3f, const float *tvector3f, const float *color4f, int numtriangles, const int *element3i, const unsigned short *element3s, qbool wantnormals, qbool wanttangents)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l07182">gl_rmain.c:7182</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_af718c071d07fd4a6fc7a524a2edd641e"><div class="ttname"><a href="gl__rmain_8c.html#af718c071d07fd4a6fc7a524a2edd641e">R_SkinFrame_LoadInternal8bit</a></div><div class="ttdeci">skinframe_t * R_SkinFrame_LoadInternal8bit(const char *name, int textureflags, const unsigned char *skindata, int width, int height, const unsigned int *palette, const unsigned int *alphapalette)</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l02748">gl_rmain.c:2748</a></div></div>
<div class="ttc" id="agl__rmain_8c_html_aff92062082d530fb0baab83bf5269420"><div class="ttname"><a href="gl__rmain_8c.html#aff92062082d530fb0baab83bf5269420">r_queries</a></div><div class="ttdeci">unsigned int r_queries[MAX_OCCLUSION_QUERIES]</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00297">gl_rmain.c:297</a></div></div>
<div class="ttc" id="agl__textures_8c_html_a114f2477dc7b969704fce4025b2a4b1b"><div class="ttname"><a href="gl__textures_8c.html#a114f2477dc7b969704fce4025b2a4b1b">R_FreeTexturePool</a></div><div class="ttdeci">void R_FreeTexturePool(rtexturepool_t **rtexturepool)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l00403">gl_textures.c:403</a></div></div>
<div class="ttc" id="agl__textures_8c_html_a347f3b0720f84542111247e0033f768e"><div class="ttname"><a href="gl__textures_8c.html#a347f3b0720f84542111247e0033f768e">R_LoadTextureRenderBuffer</a></div><div class="ttdeci">rtexture_t * R_LoadTextureRenderBuffer(rtexturepool_t *rtexturepool, const char *identifier, int width, int height, textype_t textype)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l01372">gl_textures.c:1372</a></div></div>
<div class="ttc" id="agl__textures_8c_html_a4bc984e9e2d032d8cd37aaa4fef168bd"><div class="ttname"><a href="gl__textures_8c.html#a4bc984e9e2d032d8cd37aaa4fef168bd">R_TextureHeight</a></div><div class="ttdeci">int R_TextureHeight(rtexture_t *rt)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l02275">gl_textures.c:2275</a></div></div>
<div class="ttc" id="agl__textures_8c_html_a558d3efbd11eedd4f9e47c0dbc704090"><div class="ttname"><a href="gl__textures_8c.html#a558d3efbd11eedd4f9e47c0dbc704090">R_UpdateTexture</a></div><div class="ttdeci">void R_UpdateTexture(rtexture_t *rt, const unsigned char *data, int x, int y, int z, int width, int height, int depth, int combine)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l02285">gl_textures.c:2285</a></div></div>
<div class="ttc" id="agl__textures_8c_html_a626964d959ef3a7dbf9bb4800d519a0d"><div class="ttname"><a href="gl__textures_8c.html#a626964d959ef3a7dbf9bb4800d519a0d">R_LoadTextureShadowMap2D</a></div><div class="ttdeci">rtexture_t * R_LoadTextureShadowMap2D(rtexturepool_t *rtexturepool, const char *identifier, int width, int height, textype_t textype, qbool filter)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l01367">gl_textures.c:1367</a></div></div>
<div class="ttc" id="agl__textures_8c_html_a738ec012beff0c3bc4bfb9b023130534"><div class="ttname"><a href="gl__textures_8c.html#a738ec012beff0c3bc4bfb9b023130534">R_TextureWidth</a></div><div class="ttdeci">int R_TextureWidth(rtexture_t *rt)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l02270">gl_textures.c:2270</a></div></div>
<div class="ttc" id="agl__textures_8c_html_aae064c0cd5965363555303294ef23873"><div class="ttname"><a href="gl__textures_8c.html#aae064c0cd5965363555303294ef23873">R_LoadTextureCubeMap</a></div><div class="ttdeci">rtexture_t * R_LoadTextureCubeMap(rtexturepool_t *rtexturepool, const char *identifier, int width, const unsigned char *data, textype_t textype, int flags, int miplevel, const unsigned int *palette)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l01362">gl_textures.c:1362</a></div></div>
<div class="ttc" id="agl__textures_8c_html_ab60a02391841e828427f5cc24cb5dd29"><div class="ttname"><a href="gl__textures_8c.html#ab60a02391841e828427f5cc24cb5dd29">R_AllocTexturePool</a></div><div class="ttdeci">rtexturepool_t * R_AllocTexturePool(void)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l00389">gl_textures.c:389</a></div></div>
<div class="ttc" id="agl__textures_8c_html_ab79bf8e042a462735d6d70f02822d98d"><div class="ttname"><a href="gl__textures_8c.html#ab79bf8e042a462735d6d70f02822d98d">R_FreeTexture</a></div><div class="ttdeci">void R_FreeTexture(rtexture_t *rt)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l00351">gl_textures.c:351</a></div></div>
<div class="ttc" id="agl__textures_8c_html_ad4df59df0b150a5f85d36b5f3f8be05d"><div class="ttname"><a href="gl__textures_8c.html#ad4df59df0b150a5f85d36b5f3f8be05d">R_LoadTexture3D</a></div><div class="ttdeci">rtexture_t * R_LoadTexture3D(rtexturepool_t *rtexturepool, const char *identifier, int width, int height, int depth, const unsigned char *data, textype_t textype, int flags, int miplevel, const unsigned int *palette)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l01357">gl_textures.c:1357</a></div></div>
<div class="ttc" id="agl__textures_8c_html_afe6f33ec05da1bce9cd3a847610e7384"><div class="ttname"><a href="gl__textures_8c.html#afe6f33ec05da1bce9cd3a847610e7384">R_LoadTexture2D</a></div><div class="ttdeci">rtexture_t * R_LoadTexture2D(rtexturepool_t *rtexturepool, const char *identifier, int width, int height, const unsigned char *data, textype_t textype, int flags, int miplevel, const unsigned int *palette)</div><div class="ttdef"><b>Definition</b> <a href="gl__textures_8c_source.html#l01352">gl_textures.c:1352</a></div></div>
<div class="ttc" id="aglquake_8h_html_a0208b298f4c65e680a58434efb699fe8"><div class="ttname"><a href="glquake_8h.html#a0208b298f4c65e680a58434efb699fe8">size</a></div><div class="ttdeci">GLuint GLuint GLintptr GLsizeiptr size</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00631">glquake.h:631</a></div></div>
<div class="ttc" id="aglquake_8h_html_a0462a1894bf0c9123d1e81d1234b62fc"><div class="ttname"><a href="glquake_8h.html#a0462a1894bf0c9123d1e81d1234b62fc">z</a></div><div class="ttdeci">GLubyte GLubyte GLubyte z</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00781">glquake.h:781</a></div></div>
<div class="ttc" id="aglquake_8h_html_a065314e6648fa794d9cf5872ebb9d776"><div class="ttname"><a href="glquake_8h.html#a065314e6648fa794d9cf5872ebb9d776">GL_ALWAYS</a></div><div class="ttdeci">#define GL_ALWAYS</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00165">glquake.h:165</a></div></div>
<div class="ttc" id="aglquake_8h_html_a087030f771e19c7145d9de2db60d773b"><div class="ttname"><a href="glquake_8h.html#a087030f771e19c7145d9de2db60d773b">GLuint</a></div><div class="ttdeci">unsigned int GLuint</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00054">glquake.h:54</a></div></div>
<div class="ttc" id="aglquake_8h_html_a089a3736e5280b9c7cc50129e2659974"><div class="ttname"><a href="glquake_8h.html#a089a3736e5280b9c7cc50129e2659974">GL_NONE</a></div><div class="ttdeci">#define GL_NONE</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00127">glquake.h:127</a></div></div>
<div class="ttc" id="aglquake_8h_html_a0e843e6cb4b0547b3a2b414af3d53a53"><div class="ttname"><a href="glquake_8h.html#a0e843e6cb4b0547b3a2b414af3d53a53">width</a></div><div class="ttdeci">GLenum GLsizei width</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00621">glquake.h:621</a></div></div>
<div class="ttc" id="aglquake_8h_html_a136cce2f78c36b837ec3c8cf72c96aad"><div class="ttname"><a href="glquake_8h.html#a136cce2f78c36b837ec3c8cf72c96aad">height</a></div><div class="ttdeci">GLenum GLsizei GLsizei height</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00621">glquake.h:621</a></div></div>
<div class="ttc" id="aglquake_8h_html_a13d5b3c6abcb5d2aa1a2b479fabbe779"><div class="ttname"><a href="glquake_8h.html#a13d5b3c6abcb5d2aa1a2b479fabbe779">CHECKGLERROR</a></div><div class="ttdeci">#define CHECKGLERROR</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l01058">glquake.h:1058</a></div></div>
<div class="ttc" id="aglquake_8h_html_a14289b163cbea770a67c4766fd91d6f4"><div class="ttname"><a href="glquake_8h.html#a14289b163cbea770a67c4766fd91d6f4">border</a></div><div class="ttdeci">GLint GLenum GLsizei GLsizei GLint border</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00646">glquake.h:646</a></div></div>
<div class="ttc" id="aglquake_8h_html_a161f4efd20c5f2bfc9a7c49c07be7ed7"><div class="ttname"><a href="glquake_8h.html#a161f4efd20c5f2bfc9a7c49c07be7ed7">w</a></div><div class="ttdeci">GLubyte GLubyte GLubyte GLubyte w</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00781">glquake.h:781</a></div></div>
<div class="ttc" id="aglquake_8h_html_a1c4b88c4550196906d866a7dbda7bce8"><div class="ttname"><a href="glquake_8h.html#a1c4b88c4550196906d866a7dbda7bce8">GL_UNIFORM_BUFFER</a></div><div class="ttdeci">#define GL_UNIFORM_BUFFER</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00412">glquake.h:412</a></div></div>
<div class="ttc" id="aglquake_8h_html_a1df7fac5bc539d8661f0690e59a3c1b8"><div class="ttname"><a href="glquake_8h.html#a1df7fac5bc539d8661f0690e59a3c1b8">GLint</a></div><div class="ttdeci">int GLint</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00051">glquake.h:51</a></div></div>
<div class="ttc" id="aglquake_8h_html_a1f94d24932a88c1767fcea5e56bfef73"><div class="ttname"><a href="glquake_8h.html#a1f94d24932a88c1767fcea5e56bfef73">samples</a></div><div class="ttdeci">GLsizei samples</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00622">glquake.h:622</a></div></div>
<div class="ttc" id="aglquake_8h_html_a2c9b7a4e54811e2f08046acf2ad8f2d5"><div class="ttname"><a href="glquake_8h.html#a2c9b7a4e54811e2f08046acf2ad8f2d5">mask</a></div><div class="ttdeci">GLint GLint GLint GLint GLint GLint GLint GLbitfield mask</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00608">glquake.h:608</a></div></div>
<div class="ttc" id="aglquake_8h_html_a303f3de7a8816217b5a6987c647164b1"><div class="ttname"><a href="glquake_8h.html#a303f3de7a8816217b5a6987c647164b1">value</a></div><div class="ttdeci">GLsizei const GLfloat * value</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00739">glquake.h:739</a></div></div>
<div class="ttc" id="aglquake_8h_html_a424bfd04f8f6ca1bb13ff143f64740e1"><div class="ttname"><a href="glquake_8h.html#a424bfd04f8f6ca1bb13ff143f64740e1">GL_READ_BUFFER</a></div><div class="ttdeci">#define GL_READ_BUFFER</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00194">glquake.h:194</a></div></div>
<div class="ttc" id="aglquake_8h_html_a4d1613b1e415f5e41c4651a1793b277a"><div class="ttname"><a href="glquake_8h.html#a4d1613b1e415f5e41c4651a1793b277a">v</a></div><div class="ttdeci">const GLdouble * v</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00761">glquake.h:761</a></div></div>
<div class="ttc" id="aglquake_8h_html_a51e6c75d54b3a9fb93fbc880463c212c"><div class="ttname"><a href="glquake_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a></div><div class="ttdeci">#define GL_SRC_ALPHA</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00079">glquake.h:79</a></div></div>
<div class="ttc" id="aglquake_8h_html_a563ae63395ca802a7c65b4f461fbf0d4"><div class="ttname"><a href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a></div><div class="ttdeci">GLint GLenum GLint GLint y</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00650">glquake.h:650</a></div></div>
<div class="ttc" id="aglquake_8h_html_a5f22b4318913632dfd529bc7536fa1d6"><div class="ttname"><a href="glquake_8h.html#a5f22b4318913632dfd529bc7536fa1d6">GL_QUERY_RESULT</a></div><div class="ttdeci">#define GL_QUERY_RESULT</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00537">glquake.h:537</a></div></div>
<div class="ttc" id="aglquake_8h_html_a6135619fa2b01798a441a929fd836e40"><div class="ttname"><a href="glquake_8h.html#a6135619fa2b01798a441a929fd836e40">lod</a></div><div class="ttdeci">GLint lod</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00691">glquake.h:691</a></div></div>
<div class="ttc" id="aglquake_8h_html_a69b1c02ba0bd93c643c6d82e0c16eb99"><div class="ttname"><a href="glquake_8h.html#a69b1c02ba0bd93c643c6d82e0c16eb99">GL_UNSIGNED_INT</a></div><div class="ttdeci">#define GL_UNSIGNED_INT</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00123">glquake.h:123</a></div></div>
<div class="ttc" id="aglquake_8h_html_a72086daeeb80e5eb5788f42a4eea050e"><div class="ttname"><a href="glquake_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a></div><div class="ttdeci">#define GL_ZERO</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00073">glquake.h:73</a></div></div>
<div class="ttc" id="aglquake_8h_html_a75c9c896e11dc1eed9f9f1180b86d099"><div class="ttname"><a href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a></div><div class="ttdeci">GLint GLenum GLint x</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00650">glquake.h:650</a></div></div>
<div class="ttc" id="aglquake_8h_html_a820662f5b80a48256e2503352e9f51b9"><div class="ttname"><a href="glquake_8h.html#a820662f5b80a48256e2503352e9f51b9">data</a></div><div class="ttdeci">GLsizeiptr const GLvoid * data</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00638">glquake.h:638</a></div></div>
<div class="ttc" id="aglquake_8h_html_a8b778a06f153b4d59ebc6aa1d0996191"><div class="ttname"><a href="glquake_8h.html#a8b778a06f153b4d59ebc6aa1d0996191">GL_LEQUAL</a></div><div class="ttdeci">#define GL_LEQUAL</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00161">glquake.h:161</a></div></div>
<div class="ttc" id="aglquake_8h_html_a947db9ff944c4b78e652144c3dd1060c"><div class="ttname"><a href="glquake_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a></div><div class="ttdeci">#define GL_COLOR_BUFFER_BIT</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00170">glquake.h:170</a></div></div>
<div class="ttc" id="aglquake_8h_html_aa3bfa1f454ff5072bc1b64e7d30e9584"><div class="ttname"><a href="glquake_8h.html#aa3bfa1f454ff5072bc1b64e7d30e9584">GL_GREATER</a></div><div class="ttdeci">#define GL_GREATER</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00162">glquake.h:162</a></div></div>
<div class="ttc" id="aglquake_8h_html_aa418a9e2bb6b3683dfbe5cda953f0e45"><div class="ttname"><a href="glquake_8h.html#aa418a9e2bb6b3683dfbe5cda953f0e45">GL_QUERY_BUFFER</a></div><div class="ttdeci">#define GL_QUERY_BUFFER</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00540">glquake.h:540</a></div></div>
<div class="ttc" id="aglquake_8h_html_aa92fae02a274fe856dad3362144f84dd"><div class="ttname"><a href="glquake_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a></div><div class="ttdeci">#define GL_ONE</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00074">glquake.h:74</a></div></div>
<div class="ttc" id="aglquake_8h_html_aaa55a0b4cbd9f55bae7800161588d229"><div class="ttname"><a href="glquake_8h.html#aaa55a0b4cbd9f55bae7800161588d229">pixels</a></div><div class="ttdeci">GLint GLenum GLenum GLvoid * pixels</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00705">glquake.h:705</a></div></div>
<div class="ttc" id="aglquake_8h_html_aac16527902deb1ddf6b84a9ce3da6e84"><div class="ttname"><a href="glquake_8h.html#aac16527902deb1ddf6b84a9ce3da6e84">GL_DEPTH_COMPONENT</a></div><div class="ttdeci">#define GL_DEPTH_COMPONENT</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00191">glquake.h:191</a></div></div>
<div class="ttc" id="aglquake_8h_html_ab0f6ab004415a67dd3d9be86546c0391"><div class="ttname"><a href="glquake_8h.html#ab0f6ab004415a67dd3d9be86546c0391">GL_SAMPLES_PASSED</a></div><div class="ttdeci">#define GL_SAMPLES_PASSED</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00534">glquake.h:534</a></div></div>
<div class="ttc" id="aglquake_8h_html_abe3e281237b175db178879e0988f5a78"><div class="ttname"><a href="glquake_8h.html#abe3e281237b175db178879e0988f5a78">GL_STENCIL_BUFFER_BIT</a></div><div class="ttdeci">#define GL_STENCIL_BUFFER_BIT</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00169">glquake.h:169</a></div></div>
<div class="ttc" id="aglquake_8h_html_ac0759919bfcf4c7222738ba583673a9e"><div class="ttname"><a href="glquake_8h.html#ac0759919bfcf4c7222738ba583673a9e">buf</a></div><div class="ttdeci">GLenum GLuint GLenum GLsizei const GLchar * buf</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00656">glquake.h:656</a></div></div>
<div class="ttc" id="aglquake_8h_html_ac58908ecadcf6f35d3fd58fc26e3ef18"><div class="ttname"><a href="glquake_8h.html#ac58908ecadcf6f35d3fd58fc26e3ef18">GL_DRAW_BUFFER</a></div><div class="ttdeci">#define GL_DRAW_BUFFER</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00193">glquake.h:193</a></div></div>
<div class="ttc" id="aglquake_8h_html_ac615821e7cf9469189648617cb1275be"><div class="ttname"><a href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a></div><div class="ttdeci">const GLchar * name</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00600">glquake.h:600</a></div></div>
<div class="ttc" id="aglquake_8h_html_ac71bf5145721bbb6c3286c70834f4394"><div class="ttname"><a href="glquake_8h.html#ac71bf5145721bbb6c3286c70834f4394">GL_EQUAL</a></div><div class="ttdeci">#define GL_EQUAL</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00160">glquake.h:160</a></div></div>
<div class="ttc" id="aglquake_8h_html_ad35941788a5c3ad4a19c3263fff294e8"><div class="ttname"><a href="glquake_8h.html#ad35941788a5c3ad4a19c3263fff294e8">GL_DYNAMIC_COPY</a></div><div class="ttdeci">#define GL_DYNAMIC_COPY</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00307">glquake.h:307</a></div></div>
<div class="ttc" id="aglquake_8h_html_aef2a9e9a4b130bc4de57514327847b4f"><div class="ttname"><a href="glquake_8h.html#aef2a9e9a4b130bc4de57514327847b4f">GL_DEPTH_BUFFER_BIT</a></div><div class="ttdeci">#define GL_DEPTH_BUFFER_BIT</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00168">glquake.h:168</a></div></div>
<div class="ttc" id="aglquake_8h_html_af7ca775b6d9354291c4d7d01b8b2a8bc"><div class="ttname"><a href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a></div><div class="ttdeci">GLuint index</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00628">glquake.h:628</a></div></div>
<div class="ttc" id="aglquake_8h_html_affda859b376cb8300c60fa496eb99df0"><div class="ttname"><a href="glquake_8h.html#affda859b376cb8300c60fa496eb99df0">type</a></div><div class="ttdeci">GLenum type</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00655">glquake.h:655</a></div></div>
<div class="ttc" id="ahost_8c_html_a18cf3cec0ecbf5cc14125f494c49023d"><div class="ttname"><a href="host_8c.html#a18cf3cec0ecbf5cc14125f494c49023d">host</a></div><div class="ttdeci">host_static_t host</div><div class="ttdef"><b>Definition</b> <a href="host_8c_source.html#l00041">host.c:41</a></div></div>
<div class="ttc" id="ahost_8c_html_a2d29d0100dc86ae96b813350bb2b6c32"><div class="ttname"><a href="host_8c.html#a2d29d0100dc86ae96b813350bb2b6c32">developer_extra</a></div><div class="ttdeci">cvar_t developer_extra</div><div class="ttdef"><b>Definition</b> <a href="host_8c_source.html#l00050">host.c:50</a></div></div>
<div class="ttc" id="aimage_8c_html_ab44ad0eba0b665ae7af8b13c9513cc71"><div class="ttname"><a href="image_8c.html#ab44ad0eba0b665ae7af8b13c9513cc71">Image_WriteTGABGRA</a></div><div class="ttdeci">qbool Image_WriteTGABGRA(const char *filename, int width, int height, const unsigned char *data)</div><div class="ttdef"><b>Definition</b> <a href="image_8c_source.html#l01436">image.c:1436</a></div></div>
<div class="ttc" id="aimage_8h_html"><div class="ttname"><a href="image_8h.html">image.h</a></div></div>
<div class="ttc" id="amathlib_8c_html_a29120a8a83f3d44b83c77ee8c508055f"><div class="ttname"><a href="mathlib_8c.html#a29120a8a83f3d44b83c77ee8c508055f">Math_RandomSeed_FromInts</a></div><div class="ttdeci">void Math_RandomSeed_FromInts(randomseed_t *r, unsigned int s0, unsigned int s1, unsigned int s2, unsigned int s3)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8c_source.html#l01034">mathlib.c:1034</a></div></div>
<div class="ttc" id="amathlib_8c_html_a3908446890b894f65fcd556040fddccc"><div class="ttname"><a href="mathlib_8c.html#a3908446890b894f65fcd556040fddccc">vec3_origin</a></div><div class="ttdeci">vec3_t vec3_origin</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8c_source.html#l00026">mathlib.c:26</a></div></div>
<div class="ttc" id="amathlib_8c_html_a492f2a8698bdd39461dc8560cced2db1"><div class="ttname"><a href="mathlib_8c.html#a492f2a8698bdd39461dc8560cced2db1">Math_atov</a></div><div class="ttdeci">int Math_atov(const char *s, prvm_vec3_t out)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8c_source.html#l00856">mathlib.c:856</a></div></div>
<div class="ttc" id="amathlib_8c_html_aa0f8c2537c1cf8bd8c418b1a9a854de5"><div class="ttname"><a href="mathlib_8c.html#aa0f8c2537c1cf8bd8c418b1a9a854de5">VectorNormalizeLength</a></div><div class="ttdeci">float VectorNormalizeLength(vec3_t v)</div><div class="ttdoc">returns vector length</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8c_source.html#l00763">mathlib.c:763</a></div></div>
<div class="ttc" id="amathlib_8c_html_ac6346bdac2617a1fce578c20b3520a79"><div class="ttname"><a href="mathlib_8c.html#ac6346bdac2617a1fce578c20b3520a79">PlaneClassify</a></div><div class="ttdeci">void PlaneClassify(mplane_t *p)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8c_source.html#l00310">mathlib.c:310</a></div></div>
<div class="ttc" id="amathlib_8h_html_a05bb88eaf46949f56cfec7ebef8fc5d9"><div class="ttname"><a href="mathlib_8h.html#a05bb88eaf46949f56cfec7ebef8fc5d9">VectorReflect</a></div><div class="ttdeci">#define VectorReflect(a, r, b, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00120">mathlib.h:120</a></div></div>
<div class="ttc" id="amathlib_8h_html_a14557f9ae9e8f7db1736479bc3eccc4b"><div class="ttname"><a href="mathlib_8h.html#a14557f9ae9e8f7db1736479bc3eccc4b">Vector4Set</a></div><div class="ttdeci">#define Vector4Set(a, b, c, d, e)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00085">mathlib.h:85</a></div></div>
<div class="ttc" id="amathlib_8h_html_a24e753bacac6be5f30e18f8a2bdefda4"><div class="ttname"><a href="mathlib_8h.html#a24e753bacac6be5f30e18f8a2bdefda4">max</a></div><div class="ttdeci">#define max(A, B)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00038">mathlib.h:38</a></div></div>
<div class="ttc" id="amathlib_8h_html_a28f9f1fe5f50e359e016f7e4e04f8cf1"><div class="ttname"><a href="mathlib_8h.html#a28f9f1fe5f50e359e016f7e4e04f8cf1">VectorNegate</a></div><div class="ttdeci">#define VectorNegate(a, b)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00094">mathlib.h:94</a></div></div>
<div class="ttc" id="amathlib_8h_html_a2d017cd3beb218080a7988e2deed2a11"><div class="ttname"><a href="mathlib_8h.html#a2d017cd3beb218080a7988e2deed2a11">min</a></div><div class="ttdeci">#define min(A, B)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00037">mathlib.h:37</a></div></div>
<div class="ttc" id="amathlib_8h_html_a3f4b2cfbd3195eddeb10b2e14b7e4d8c"><div class="ttname"><a href="mathlib_8h.html#a3f4b2cfbd3195eddeb10b2e14b7e4d8c">BoxesOverlap</a></div><div class="ttdeci">#define BoxesOverlap(a, b, c, d)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00121">mathlib.h:121</a></div></div>
<div class="ttc" id="amathlib_8h_html_a49b70428785f62ca69e1547c6ba09bb0"><div class="ttname"><a href="mathlib_8h.html#a49b70428785f62ca69e1547c6ba09bb0">VectorNormalize</a></div><div class="ttdeci">#define VectorNormalize(v)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00103">mathlib.h:103</a></div></div>
<div class="ttc" id="amathlib_8h_html_a4d2bc0c336e3e2a9b13448341ab83c10"><div class="ttname"><a href="mathlib_8h.html#a4d2bc0c336e3e2a9b13448341ab83c10">VectorLerp</a></div><div class="ttdeci">#define VectorLerp(v1, lerp, v2, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00119">mathlib.h:119</a></div></div>
<div class="ttc" id="amathlib_8h_html_a4e677405f1faea6a9d9dc644d366b646"><div class="ttname"><a href="mathlib_8h.html#a4e677405f1faea6a9d9dc644d366b646">BoxInsideBox</a></div><div class="ttdeci">#define BoxInsideBox(a, b, c, d)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00122">mathlib.h:122</a></div></div>
<div class="ttc" id="amathlib_8h_html_a547609f6e7dbcd2c93a0adf5430ef665"><div class="ttname"><a href="mathlib_8h.html#a547609f6e7dbcd2c93a0adf5430ef665">VectorClear</a></div><div class="ttdeci">#define VectorClear(a)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00096">mathlib.h:96</a></div></div>
<div class="ttc" id="amathlib_8h_html_a553641b2aac0b2a7c43f9f74f8333fd5"><div class="ttname"><a href="mathlib_8h.html#a553641b2aac0b2a7c43f9f74f8333fd5">bound</a></div><div class="ttdeci">#define bound(min, num, max)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00034">mathlib.h:34</a></div></div>
<div class="ttc" id="amathlib_8h_html_a56e5c6bf818028304d48fb1b9ca6f53a"><div class="ttname"><a href="mathlib_8h.html#a56e5c6bf818028304d48fb1b9ca6f53a">VectorLength</a></div><div class="ttdeci">#define VectorLength(a)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00108">mathlib.h:108</a></div></div>
<div class="ttc" id="amathlib_8h_html_a87789aa9d422deb982e0e65c6104a032"><div class="ttname"><a href="mathlib_8h.html#a87789aa9d422deb982e0e65c6104a032">VectorLength2</a></div><div class="ttdeci">#define VectorLength2(a)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00109">mathlib.h:109</a></div></div>
<div class="ttc" id="amathlib_8h_html_a95f7e689aded79b60b2aceb26116025c"><div class="ttname"><a href="mathlib_8h.html#a95f7e689aded79b60b2aceb26116025c">VectorLehmerRandom</a></div><div class="ttdeci">#define VectorLehmerRandom(seed, v)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00172">mathlib.h:172</a></div></div>
<div class="ttc" id="amathlib_8h_html_a98b9777201ede3788372b98e190aed44"><div class="ttname"><a href="mathlib_8h.html#a98b9777201ede3788372b98e190aed44">VectorMultiply</a></div><div class="ttdeci">#define VectorMultiply(a, b, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00101">mathlib.h:101</a></div></div>
<div class="ttc" id="amathlib_8h_html_a9a5748d2424dee5c44d5d358e1944125"><div class="ttname"><a href="mathlib_8h.html#a9a5748d2424dee5c44d5d358e1944125">VectorDistance2</a></div><div class="ttdeci">#define VectorDistance2(a, b)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00106">mathlib.h:106</a></div></div>
<div class="ttc" id="amathlib_8h_html_aa13eeb7bc310534b8ba5ea92d6e540a3"><div class="ttname"><a href="mathlib_8h.html#aa13eeb7bc310534b8ba5ea92d6e540a3">PointInfrontOfTriangle</a></div><div class="ttdeci">#define PointInfrontOfTriangle(p, a, b, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00142">mathlib.h:142</a></div></div>
<div class="ttc" id="amathlib_8h_html_aa3c5114e57f89ea32ef8f41e00631e44"><div class="ttname"><a href="mathlib_8h.html#aa3c5114e57f89ea32ef8f41e00631e44">CrossProduct</a></div><div class="ttdeci">#define CrossProduct(a, b, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00102">mathlib.h:102</a></div></div>
<div class="ttc" id="amathlib_8h_html_aa81f0bf735070a2a0876095e289c0e9b"><div class="ttname"><a href="mathlib_8h.html#aa81f0bf735070a2a0876095e289c0e9b">VectorMAM</a></div><div class="ttdeci">#define VectorMAM(scale1, b1, scale2, b2, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00115">mathlib.h:115</a></div></div>
<div class="ttc" id="amathlib_8h_html_ab686767cbceb9857beed1888e7ed58be"><div class="ttname"><a href="mathlib_8h.html#ab686767cbceb9857beed1888e7ed58be">VectorCheeseRandom</a></div><div class="ttdeci">#define VectorCheeseRandom(seed, v)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00171">mathlib.h:171</a></div></div>
<div class="ttc" id="amathlib_8h_html_abd107e00eca870c28df1518302fee3df"><div class="ttname"><a href="mathlib_8h.html#abd107e00eca870c28df1518302fee3df">TriangleNormal</a></div><div class="ttdeci">#define TriangleNormal(a, b, c, n)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00125">mathlib.h:125</a></div></div>
<div class="ttc" id="amathlib_8h_html_ac1dbe9174f905df05e0d9c896cc4f877"><div class="ttname"><a href="mathlib_8h.html#ac1dbe9174f905df05e0d9c896cc4f877">PlaneDiff</a></div><div class="ttdeci">#define PlaneDiff(point, plane)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00256">mathlib.h:256</a></div></div>
<div class="ttc" id="amathlib_8h_html_ac5e3717306036960d4619258d3d4bca2"><div class="ttname"><a href="mathlib_8h.html#ac5e3717306036960d4619258d3d4bca2">VectorDistance</a></div><div class="ttdeci">#define VectorDistance(a, b)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00107">mathlib.h:107</a></div></div>
<div class="ttc" id="amathlib_8h_html_ac7c7d40fe22eeaffb66c24bd718f655d"><div class="ttname"><a href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a></div><div class="ttdeci">#define VectorAdd(a, b, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00099">mathlib.h:99</a></div></div>
<div class="ttc" id="amathlib_8h_html_ac892cc77f8b6dd3dd543d3f637d63bd1"><div class="ttname"><a href="mathlib_8h.html#ac892cc77f8b6dd3dd543d3f637d63bd1">DotProduct</a></div><div class="ttdeci">#define DotProduct(a, b)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00097">mathlib.h:97</a></div></div>
<div class="ttc" id="amathlib_8h_html_accb62c1cf8b53e0446be03f3d5899a68"><div class="ttname"><a href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a></div><div class="ttdeci">#define VectorCopy(a, b)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00100">mathlib.h:100</a></div></div>
<div class="ttc" id="amathlib_8h_html_ad3cbbdfa4ea0dddf1026ffc640644d79"><div class="ttname"><a href="mathlib_8h.html#ad3cbbdfa4ea0dddf1026ffc640644d79">VectorSet</a></div><div class="ttdeci">#define VectorSet(a, b, c, d)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00095">mathlib.h:95</a></div></div>
<div class="ttc" id="amathlib_8h_html_adb186b506beeecc27d7222f69e4496f5"><div class="ttname"><a href="mathlib_8h.html#adb186b506beeecc27d7222f69e4496f5">VectorSubtract</a></div><div class="ttdeci">#define VectorSubtract(a, b, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00098">mathlib.h:98</a></div></div>
<div class="ttc" id="amathlib_8h_html_adbe75a286ee7ac6c3064ae518ab7d936"><div class="ttname"><a href="mathlib_8h.html#adbe75a286ee7ac6c3064ae518ab7d936">VectorScale</a></div><div class="ttdeci">#define VectorScale(in, scale, out)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00110">mathlib.h:110</a></div></div>
<div class="ttc" id="amathlib_8h_html_ae0ab782cffa212723ac17c32ab8f4332"><div class="ttname"><a href="mathlib_8h.html#ae0ab782cffa212723ac17c32ab8f4332">VectorMA</a></div><div class="ttdeci">#define VectorMA(a, scale, b, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00113">mathlib.h:113</a></div></div>
<div class="ttc" id="amathlib_8h_html_aef97643f8b42714785136050d7fcea9f"><div class="ttname"><a href="mathlib_8h.html#aef97643f8b42714785136050d7fcea9f">VectorCopy4</a></div><div class="ttdeci">#define VectorCopy4(a, b)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00219">mathlib.h:219</a></div></div>
<div class="ttc" id="amathlib_8h_html_af70318c5d2e391de8700dad56d5db315"><div class="ttname"><a href="mathlib_8h.html#af70318c5d2e391de8700dad56d5db315">VectorM</a></div><div class="ttdeci">#define VectorM(scale1, b1, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00114">mathlib.h:114</a></div></div>
<div class="ttc" id="amathlib_8h_html_afe288980104408902300b9e7f523e08a"><div class="ttname"><a href="mathlib_8h.html#afe288980104408902300b9e7f523e08a">TriangleBBoxOverlapsBox</a></div><div class="ttdeci">#define TriangleBBoxOverlapsBox(a, b, c, d, e)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00123">mathlib.h:123</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_a0a9887ddef6db16c10e2c79fa01854b0"><div class="ttname"><a href="matrixlib_8c.html#a0a9887ddef6db16c10e2c79fa01854b0">Matrix4x4_AdjustOrigin</a></div><div class="ttdeci">void Matrix4x4_AdjustOrigin(matrix4x4_t *out, double x, double y, double z)</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l01824">matrixlib.c:1824</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_a0f17f61f7e6dd5b4f8dc94ff587526c0"><div class="ttname"><a href="matrixlib_8c.html#a0f17f61f7e6dd5b4f8dc94ff587526c0">Matrix4x4_Concat</a></div><div class="ttdeci">void Matrix4x4_Concat(matrix4x4_t *out, const matrix4x4_t *in1, const matrix4x4_t *in2)</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l00083">matrixlib.c:83</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_a2c67a69e5ad398eda2624c8507e8b5fa"><div class="ttname"><a href="matrixlib_8c.html#a2c67a69e5ad398eda2624c8507e8b5fa">Matrix4x4_Transform</a></div><div class="ttdeci">void Matrix4x4_Transform(const matrix4x4_t *in, const float v[3], float out[3])</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l01657">matrixlib.c:1657</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_a4ca4d9f16fd1375dcec70c1411b5cb52"><div class="ttname"><a href="matrixlib_8c.html#a4ca4d9f16fd1375dcec70c1411b5cb52">Matrix4x4_FromArrayFloatD3D</a></div><div class="ttdeci">void Matrix4x4_FromArrayFloatD3D(matrix4x4_t *out, const float in[16])</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l01282">matrixlib.c:1282</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_a6cbe1d5f8ba3bfc1d91f98c4eb01ea5f"><div class="ttname"><a href="matrixlib_8c.html#a6cbe1d5f8ba3bfc1d91f98c4eb01ea5f">Matrix4x4_Transform3x3</a></div><div class="ttdeci">void Matrix4x4_Transform3x3(const matrix4x4_t *in, const float v[3], float out[3])</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l01685">matrixlib.c:1685</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_a80867fbbc3b77b40fb8349d1e694a2de"><div class="ttname"><a href="matrixlib_8c.html#a80867fbbc3b77b40fb8349d1e694a2de">Matrix4x4_CreateFromQuakeEntity</a></div><div class="ttdeci">void Matrix4x4_CreateFromQuakeEntity(matrix4x4_t *out, double x, double y, double z, double pitch, double yaw, double roll, double scale)</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l00715">matrixlib.c:715</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_a8226adb345f8fce3f139f2c3db5ca71e"><div class="ttname"><a href="matrixlib_8c.html#a8226adb345f8fce3f139f2c3db5ca71e">Matrix4x4_Invert_Full</a></div><div class="ttdeci">int Matrix4x4_Invert_Full(matrix4x4_t *out, const matrix4x4_t *in1)</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l00145">matrixlib.c:145</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_a822f29c5872a6c4908bfea0a2cb481d2"><div class="ttname"><a href="matrixlib_8c.html#a822f29c5872a6c4908bfea0a2cb481d2">Matrix4x4_CreateScale3</a></div><div class="ttdeci">void Matrix4x4_CreateScale3(matrix4x4_t *out, double x, double y, double z)</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l00695">matrixlib.c:695</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_a932d1dfd93e2a0a52fc4f63ff07c3d1f"><div class="ttname"><a href="matrixlib_8c.html#a932d1dfd93e2a0a52fc4f63ff07c3d1f">Matrix4x4_FromArray12FloatD3D</a></div><div class="ttdeci">void Matrix4x4_FromArray12FloatD3D(matrix4x4_t *out, const float in[12])</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l01422">matrixlib.c:1422</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_aa9b7b6f7c5bbf266334f17a9c5e125bc"><div class="ttname"><a href="matrixlib_8c.html#aa9b7b6f7c5bbf266334f17a9c5e125bc">Matrix4x4_Invert_Simple</a></div><div class="ttdeci">void Matrix4x4_Invert_Simple(matrix4x4_t *out, const matrix4x4_t *in1)</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l00422">matrixlib.c:422</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_ab47e78509c43b39508fcf65d042437f3"><div class="ttname"><a href="matrixlib_8c.html#ab47e78509c43b39508fcf65d042437f3">Matrix4x4_Abs</a></div><div class="ttdeci">void Matrix4x4_Abs(matrix4x4_t *out)</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l01859">matrixlib.c:1859</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_ab6b9fb4e085d3cd32f5e9043d3d884ec"><div class="ttname"><a href="matrixlib_8c.html#ab6b9fb4e085d3cd32f5e9043d3d884ec">Matrix4x4_ScaleFromMatrix</a></div><div class="ttdeci">double Matrix4x4_ScaleFromMatrix(const matrix4x4_t *in)</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l01805">matrixlib.c:1805</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_abfa14316d0f36aca55d7b5d440999dfa"><div class="ttname"><a href="matrixlib_8c.html#abfa14316d0f36aca55d7b5d440999dfa">identitymatrix</a></div><div class="ttdeci">const matrix4x4_t identitymatrix</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l00009">matrixlib.c:9</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_af65cf0cf8374d8107db25a439fbd2d94"><div class="ttname"><a href="matrixlib_8c.html#af65cf0cf8374d8107db25a439fbd2d94">Matrix4x4_Scale</a></div><div class="ttdeci">void Matrix4x4_Scale(matrix4x4_t *out, double rotatescale, double originscale)</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l01837">matrixlib.c:1837</a></div></div>
<div class="ttc" id="amatrixlib_8c_html_afa5873e4026ae22dd9e6aa9177930ef0"><div class="ttname"><a href="matrixlib_8c.html#afa5873e4026ae22dd9e6aa9177930ef0">Matrix4x4_OriginFromMatrix</a></div><div class="ttdeci">void Matrix4x4_OriginFromMatrix(const matrix4x4_t *in, float *out)</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8c_source.html#l01792">matrixlib.c:1792</a></div></div>
<div class="ttc" id="ameshqueue_8c_html_a407895e2984e8902bc64d8221e2e6e4d"><div class="ttname"><a href="meshqueue_8c.html#a407895e2984e8902bc64d8221e2e6e4d">R_MeshQueue_AddTransparent</a></div><div class="ttdeci">void R_MeshQueue_AddTransparent(dptransparentsortcategory_t category, const vec3_t center, void(*callback)(const entity_render_t *ent, const rtlight_t *rtlight, int numsurfaces, int *surfacelist), const entity_render_t *ent, int surfacenumber, const rtlight_t *rtlight)</div><div class="ttdef"><b>Definition</b> <a href="meshqueue_8c_source.html#l00033">meshqueue.c:33</a></div></div>
<div class="ttc" id="amodel__brush_8c_html_ad36726f56533f8ed61f03c9bf2faa194"><div class="ttname"><a href="model__brush_8c.html#ad36726f56533f8ed61f03c9bf2faa194">r_trippy</a></div><div class="ttdeci">cvar_t r_trippy</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8c_source.html#l00029">model_brush.c:29</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a01917ff9223bf5f764ea1c9150d8b72d"><div class="ttname"><a href="model__brush_8h.html#a01917ff9223bf5f764ea1c9150d8b72d">MATERIALFLAG_ADD</a></div><div class="ttdeci">#define MATERIALFLAG_ADD</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00081">model_brush.h:81</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a15a12ade8170812bc1a3b5455f26e114"><div class="ttname"><a href="model__brush_8h.html#a15a12ade8170812bc1a3b5455f26e114">MATERIALFLAG_FULLBRIGHT</a></div><div class="ttdeci">#define MATERIALFLAG_FULLBRIGHT</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00087">model_brush.h:87</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a226c2113f3731bc223694bd3e391504a"><div class="ttname"><a href="model__brush_8h.html#a226c2113f3731bc223694bd3e391504a">MATERIALFLAG_ALPHA</a></div><div class="ttdeci">#define MATERIALFLAG_ALPHA</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00079">model_brush.h:79</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a22de374860637bd38095828d776a3028"><div class="ttname"><a href="model__brush_8h.html#a22de374860637bd38095828d776a3028">MATERIALFLAG_REFRACTION</a></div><div class="ttdeci">#define MATERIALFLAG_REFRACTION</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00117">model_brush.h:117</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a37fea1966eaa92d59dfa7f277d4a82a5"><div class="ttname"><a href="model__brush_8h.html#a37fea1966eaa92d59dfa7f277d4a82a5">MATERIALFLAG_ALPHATEST</a></div><div class="ttdeci">#define MATERIALFLAG_ALPHATEST</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00100">model_brush.h:100</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a42368df686065f708f6eed1c1fa8e1cc"><div class="ttname"><a href="model__brush_8h.html#a42368df686065f708f6eed1c1fa8e1cc">MATERIALFLAG_BLENDED</a></div><div class="ttdeci">#define MATERIALFLAG_BLENDED</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00103">model_brush.h:103</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a6aaa281ecfff2614bfd32a87a353ad5f"><div class="ttname"><a href="model__brush_8h.html#a6aaa281ecfff2614bfd32a87a353ad5f">CHECKPVSBIT</a></div><div class="ttdeci">#define CHECKPVSBIT(pvs, b)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00361">model_brush.h:361</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a7055dcfb7e841b4f8df429bc32e9212f"><div class="ttname"><a href="model__brush_8h.html#a7055dcfb7e841b4f8df429bc32e9212f">MATERIALFLAG_WATERSHADER</a></div><div class="ttdeci">#define MATERIALFLAG_WATERSHADER</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00115">model_brush.h:115</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a87ced6e5f1513ab17d69df9bfe55bb78"><div class="ttname"><a href="model__brush_8h.html#a87ced6e5f1513ab17d69df9bfe55bb78">MATERIALFLAG_OCCLUDE</a></div><div class="ttdeci">#define MATERIALFLAG_OCCLUDE</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00133">model_brush.h:133</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a9253d0a5f545e0dbe55388deee9624ec"><div class="ttname"><a href="model__brush_8h.html#a9253d0a5f545e0dbe55388deee9624ec">MATERIALFLAG_NODEPTHTEST</a></div><div class="ttdeci">#define MATERIALFLAG_NODEPTHTEST</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00083">model_brush.h:83</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_a92eb2c00b3276aef285cf43b305a43da"><div class="ttname"><a href="model__brush_8h.html#a92eb2c00b3276aef285cf43b305a43da">MATERIALFLAGMASK_TRANSLUCENT</a></div><div class="ttdeci">#define MATERIALFLAGMASK_TRANSLUCENT</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00141">model_brush.h:141</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_af441c2813089fb0c1b35a05e888369be"><div class="ttname"><a href="model__brush_8h.html#af441c2813089fb0c1b35a05e888369be">MATERIALFLAG_NOCULLFACE</a></div><div class="ttdeci">#define MATERIALFLAG_NOCULLFACE</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00111">model_brush.h:111</a></div></div>
<div class="ttc" id="amodel__brush_8h_html_afd200d146636dc15acd310fa22c6b279"><div class="ttname"><a href="model__brush_8h.html#afd200d146636dc15acd310fa22c6b279">MATERIALFLAG_CUSTOMBLEND</a></div><div class="ttdeci">#define MATERIALFLAG_CUSTOMBLEND</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00105">model_brush.h:105</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a1e063ce17b7be8462ffafa0f8f8ff8b1"><div class="ttname"><a href="model__shared_8c.html#a1e063ce17b7be8462ffafa0f8f8ff8b1">Mod_AllocLightmap_Reset</a></div><div class="ttdeci">void Mod_AllocLightmap_Reset(mod_alloclightmap_state_t *state)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03464">model_shared.c:3464</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a27be267e2cf2666a18e976df520e625b"><div class="ttname"><a href="model__shared_8c.html#a27be267e2cf2666a18e976df520e625b">Mod_AllocLightmap_Init</a></div><div class="ttdeci">void Mod_AllocLightmap_Init(mod_alloclightmap_state_t *state, mempool_t *mempool, int width, int height)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03449">model_shared.c:3449</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a2a3016fba1c91f35365a48717811edc3"><div class="ttname"><a href="model__shared_8c.html#a2a3016fba1c91f35365a48717811edc3">Mod_AllocLightmap_Free</a></div><div class="ttdeci">void Mod_AllocLightmap_Free(mod_alloclightmap_state_t *state)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03475">model_shared.c:3475</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a3ec29c084356454f725c32198d27544d"><div class="ttname"><a href="model__shared_8c.html#a3ec29c084356454f725c32198d27544d">Mod_ShadowMesh_Free</a></div><div class="ttdeci">void Mod_ShadowMesh_Free(shadowmesh_t *mesh)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01175">model_shared.c:1175</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_a835cf8e835979953163e64c7eea95186"><div class="ttname"><a href="model__shared_8c.html#a835cf8e835979953163e64c7eea95186">Mod_AllocLightmap_Block</a></div><div class="ttdeci">qbool Mod_AllocLightmap_Block(mod_alloclightmap_state_t *state, int blockwidth, int blockheight, int *outx, int *outy)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l03482">model_shared.c:3482</a></div></div>
<div class="ttc" id="amodel__shared_8c_html_ab807c8ef48ac23255f9e8b7a7ab5caf0"><div class="ttname"><a href="model__shared_8c.html#ab807c8ef48ac23255f9e8b7a7ab5caf0">Mod_ShadowMesh_AddMesh</a></div><div class="ttdeci">void Mod_ShadowMesh_AddMesh(shadowmesh_t *mesh, const float *vertex3f, int numtris, const int *element3i)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8c_source.html#l01041">model_shared.c:1041</a></div></div>
<div class="ttc" id="amodel__shared_8h_html_ae8881adaf7dff7ff012ef751075434f4a58b2db2924e69f9aa69dcb90446199e8"><div class="ttname"><a href="model__shared_8h.html#ae8881adaf7dff7ff012ef751075434f4a58b2db2924e69f9aa69dcb90446199e8">mod_brushq3</a></div><div class="ttdeci">@ mod_brushq3</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00043">model_shared.h:43</a></div></div>
<div class="ttc" id="apalette_8c_html_a8cfd13040e568d58482cc9070a6b0e39"><div class="ttname"><a href="palette_8c.html#a8cfd13040e568d58482cc9070a6b0e39">palette_bgra_embeddedpic</a></div><div class="ttdeci">unsigned int palette_bgra_embeddedpic[256]</div><div class="ttdef"><b>Definition</b> <a href="palette_8c_source.html#l00025">palette.c:25</a></div></div>
<div class="ttc" id="aportals_8h_html"><div class="ttname"><a href="portals_8h.html">portals.h</a></div></div>
<div class="ttc" id="aprotocol_8h_html_a10e582f2bc1acafa1be980bfcfa31a03"><div class="ttname"><a href="protocol_8h.html#a10e582f2bc1acafa1be980bfcfa31a03">RENDER_EXTERIORMODEL</a></div><div class="ttdeci">#define RENDER_EXTERIORMODEL</div><div class="ttdef"><b>Definition</b> <a href="protocol_8h_source.html#l00360">protocol.h:360</a></div></div>
<div class="ttc" id="aprotocol_8h_html_a5b3a68ed950bcfc8025be976f91e4723"><div class="ttname"><a href="protocol_8h.html#a5b3a68ed950bcfc8025be976f91e4723">PFLAGS_NOSHADOW</a></div><div class="ttdeci">#define PFLAGS_NOSHADOW</div><div class="ttdef"><b>Definition</b> <a href="protocol_8h_source.html#l00107">protocol.h:107</a></div></div>
<div class="ttc" id="aprotocol_8h_html_a73aa38a060145a0da1a2bd3a54c12cd6"><div class="ttname"><a href="protocol_8h.html#a73aa38a060145a0da1a2bd3a54c12cd6">RENDER_SHADOW</a></div><div class="ttdeci">#define RENDER_SHADOW</div><div class="ttdef"><b>Definition</b> <a href="protocol_8h_source.html#l00366">protocol.h:366</a></div></div>
<div class="ttc" id="aprotocol_8h_html_ac2914ad7842a27f20404bdd38f2e25a1"><div class="ttname"><a href="protocol_8h.html#ac2914ad7842a27f20404bdd38f2e25a1">RENDER_NOSELFSHADOW</a></div><div class="ttdeci">#define RENDER_NOSELFSHADOW</div><div class="ttdef"><b>Definition</b> <a href="protocol_8h_source.html#l00368">protocol.h:368</a></div></div>
<div class="ttc" id="aprotocol_8h_html_ac71e31bc2b5436d508b25b444d60783e"><div class="ttname"><a href="protocol_8h.html#ac71e31bc2b5436d508b25b444d60783e">RENDER_LIGHT</a></div><div class="ttdeci">#define RENDER_LIGHT</div><div class="ttdef"><b>Definition</b> <a href="protocol_8h_source.html#l00367">protocol.h:367</a></div></div>
<div class="ttc" id="aprotocol_8h_html_ae2c7aecd2cda4506a82ed52edf2124fe"><div class="ttname"><a href="protocol_8h.html#ae2c7aecd2cda4506a82ed52edf2124fe">RENDER_NODEPTHTEST</a></div><div class="ttdeci">#define RENDER_NODEPTHTEST</div><div class="ttdef"><b>Definition</b> <a href="protocol_8h_source.html#l00370">protocol.h:370</a></div></div>
<div class="ttc" id="aprotocol_8h_html_afe110f92a7e1036db7f401885f5e0334"><div class="ttname"><a href="protocol_8h.html#afe110f92a7e1036db7f401885f5e0334">PFLAGS_CORONA</a></div><div class="ttdeci">#define PFLAGS_CORONA</div><div class="ttdef"><b>Definition</b> <a href="protocol_8h_source.html#l00108">protocol.h:108</a></div></div>
<div class="ttc" id="aprvm__execprogram_8h_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition</b> <a href="prvm__execprogram_8h_source.html#l00002">prvm_execprogram.h:2</a></div></div>
<div class="ttc" id="aqdefs_8h_html_a119f8457078d7390fb45ea0838adb806"><div class="ttname"><a href="qdefs_8h.html#a119f8457078d7390fb45ea0838adb806">MAX_INPUTLINE</a></div><div class="ttdeci">#define MAX_INPUTLINE</div><div class="ttdoc">maximum size of console commandline, QuakeC strings, and many other text processing buffers</div><div class="ttdef"><b>Definition</b> <a href="qdefs_8h_source.html#l00094">qdefs.h:94</a></div></div>
<div class="ttc" id="aqdefs_8h_html_a31ca9f5408b1f7610882c97c3db48826"><div class="ttname"><a href="qdefs_8h.html#a31ca9f5408b1f7610882c97c3db48826">MAX_EDICTS</a></div><div class="ttdeci">#define MAX_EDICTS</div><div class="ttdoc">max number of objects in game world at once (32768 protocol limit)</div><div class="ttdef"><b>Definition</b> <a href="qdefs_8h_source.html#l00105">qdefs.h:105</a></div></div>
<div class="ttc" id="aqdefs_8h_html_a48b85f1ccb414316c117e943ba927f19"><div class="ttname"><a href="qdefs_8h.html#a48b85f1ccb414316c117e943ba927f19">MAX_LIGHTSTYLES</a></div><div class="ttdeci">#define MAX_LIGHTSTYLES</div><div class="ttdoc">max flickering light styles in level (note: affects savegame format)</div><div class="ttdef"><b>Definition</b> <a href="qdefs_8h_source.html#l00108">qdefs.h:108</a></div></div>
<div class="ttc" id="aqdefs_8h_html_abd4ae30fcfdcbbff51bbf3f4e6daeee7"><div class="ttname"><a href="qdefs_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a></div><div class="ttdeci">#define MAX_QPATH</div><div class="ttdoc">max length of a quake game pathname</div><div class="ttdef"><b>Definition</b> <a href="qdefs_8h_source.html#l00169">qdefs.h:169</a></div></div>
<div class="ttc" id="aqdefs_8h_html_accb2d83fbdb6bb14a39cf196f893b92e"><div class="ttname"><a href="qdefs_8h.html#accb2d83fbdb6bb14a39cf196f893b92e">MAX_OCCLUSION_QUERIES</a></div><div class="ttdeci">#define MAX_OCCLUSION_QUERIES</div><div class="ttdoc">max number of query objects that can be used in one frame</div><div class="ttdef"><b>Definition</b> <a href="qdefs_8h_source.html#l00124">qdefs.h:124</a></div></div>
<div class="ttc" id="aqtypes_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="qtypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00012">qtypes.h:12</a></div></div>
<div class="ttc" id="aqtypes_8h_html_a34b8d82aced6931bd3a572041e59aa7d"><div class="ttname"><a href="qtypes_8h.html#a34b8d82aced6931bd3a572041e59aa7d">vec_t</a></div><div class="ttdeci">float vec_t</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00064">qtypes.h:64</a></div></div>
<div class="ttc" id="aqtypes_8h_html_a5fab60d2366b4888d93d5814eb04c9e9"><div class="ttname"><a href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a></div><div class="ttdeci">vec_t vec3_t[3]</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00067">qtypes.h:67</a></div></div>
<div class="ttc" id="aqtypes_8h_html_a74bc4b300862fe52bf3d855e89caff65"><div class="ttname"><a href="qtypes_8h.html#a74bc4b300862fe52bf3d855e89caff65">prvm_vec3_t</a></div><div class="ttdeci">prvm_vec_t prvm_vec3_t[3]</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00059">qtypes.h:59</a></div></div>
<div class="ttc" id="aqtypes_8h_html_aa250998bce2dc350e4f644297bb579c3"><div class="ttname"><a href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a></div><div class="ttdeci">bool qbool</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00009">qtypes.h:9</a></div></div>
<div class="ttc" id="aquakedef_8h_html"><div class="ttname"><a href="quakedef_8h.html">quakedef.h</a></div></div>
<div class="ttc" id="ar__modules_8c_html_a7f982eee49a26b26f015596ac96edea0"><div class="ttname"><a href="r__modules_8c.html#a7f982eee49a26b26f015596ac96edea0">R_RegisterModule</a></div><div class="ttdeci">void R_RegisterModule(const char *name, void(*start)(void), void(*shutdown)(void), void(*newmap)(void), void(*devicelost)(void), void(*devicerestored)(void))</div><div class="ttdef"><b>Definition</b> <a href="r__modules_8c_source.html#l00025">r_modules.c:25</a></div></div>
<div class="ttc" id="ar__qshader_8h_html_a72d5e32663fb1b0c369079ca0be01f37a2a635f265dd33d939e6dcd1482147080"><div class="ttname"><a href="r__qshader_8h.html#a72d5e32663fb1b0c369079ca0be01f37a2a635f265dd33d939e6dcd1482147080">TRANSPARENTSORT_DISTANCE</a></div><div class="ttdeci">@ TRANSPARENTSORT_DISTANCE</div><div class="ttdef"><b>Definition</b> <a href="r__qshader_8h_source.html#l00194">r_qshader.h:194</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a00187bb13a24fc962ee8a462b07c6249"><div class="ttname"><a href="r__shadow_8c.html#a00187bb13a24fc962ee8a462b07c6249">r_shadow_glossintensity</a></div><div class="ttdeci">cvar_t r_shadow_glossintensity</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00149">r_shadow.c:149</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a002be2a22d2ec51fb6a09ca24fe3ff25"><div class="ttname"><a href="r__shadow_8c.html#a002be2a22d2ec51fb6a09ca24fe3ff25">R_Shadow_RenderMode_Begin</a></div><div class="ttdeci">void R_Shadow_RenderMode_Begin(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01369">r_shadow.c:1369</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a00485eb415b8d269b0b411106ca73297"><div class="ttname"><a href="r__shadow_8c.html#a00485eb415b8d269b0b411106ca73297">r_shadow_shadowmapping_filterquality</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping_filterquality</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00173">r_shadow.c:173</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0079ca9804591c3f0dc035fdcae085b5"><div class="ttname"><a href="r__shadow_8c.html#a0079ca9804591c3f0dc035fdcae085b5">R_Shadow_RenderLighting_VisibleLighting</a></div><div class="ttdeci">static void R_Shadow_RenderLighting_VisibleLighting(int texturenumsurfaces, const msurface_t **texturesurfacelist)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02920">r_shadow.c:2920</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a00d0fbb6cc4becc92625bcea3a857507"><div class="ttname"><a href="r__shadow_8c.html#a00d0fbb6cc4becc92625bcea3a857507">R_Shadow_RenderMode_Lighting</a></div><div class="ttdeci">void R_Shadow_RenderMode_Lighting(qbool transparent, qbool shadowmapping, qbool noselfshadowpass)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01597">r_shadow.c:1597</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a01ac7c513ed4e93f4ad227ca6592b63a"><div class="ttname"><a href="r__shadow_8c.html#a01ac7c513ed4e93f4ad227ca6592b63a">r_shadow_lightradiusscale</a></div><div class="ttdeci">cvar_t r_shadow_lightradiusscale</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00156">r_shadow.c:156</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a020aca21f20ded8f0e7b7cfafcc52dcb"><div class="ttname"><a href="r__shadow_8c.html#a020aca21f20ded8f0e7b7cfafcc52dcb">r_shadow_shadowmapping_maxsize</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping_maxsize</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00178">r_shadow.c:178</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a02387b9e26d871fb6674f3f91dffb692"><div class="ttname"><a href="r__shadow_8c.html#a02387b9e26d871fb6674f3f91dffb692">spritetexcoord2f</a></div><div class="ttdeci">static float spritetexcoord2f[4 *2]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04480">r_shadow.c:4480</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a02b2e2feca78908352ada34d75d81317"><div class="ttname"><a href="r__shadow_8c.html#a02b2e2feca78908352ada34d75d81317">r_shadow_culllights_trace</a></div><div class="ttdeci">cvar_t r_shadow_culllights_trace</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00190">r_shadow.c:190</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a03ef6db3d64682913c33034c6fa47ff3"><div class="ttname"><a href="r__shadow_8c.html#a03ef6db3d64682913c33034c6fa47ff3">R_Shadow_SetShadowmapParametersForLight</a></div><div class="ttdeci">static void R_Shadow_SetShadowmapParametersForLight(qbool noselfshadowpass)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01527">r_shadow.c:1527</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a04d629dcbf12096a83779b9384b4fa91"><div class="ttname"><a href="r__shadow_8c.html#a04d629dcbf12096a83779b9384b4fa91">R_Shadow_CalcBBoxSideMask</a></div><div class="ttdeci">static int R_Shadow_CalcBBoxSideMask(const vec3_t mins, const vec3_t maxs, const matrix4x4_t *worldtolight, const matrix4x4_t *radiustolight, float bias)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00914">r_shadow.c:914</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a063a3af905ecefe83d76ca3f0fe0653e"><div class="ttname"><a href="r__shadow_8c.html#a063a3af905ecefe83d76ca3f0fe0653e">BUFFER_OFFSET</a></div><div class="ttdeci">#define BUFFER_OFFSET(i)</div></div>
<div class="ttc" id="ar__shadow_8c_html_a064f7d12ba68cca46e785786d48e8985"><div class="ttname"><a href="r__shadow_8c.html#a064f7d12ba68cca46e785786d48e8985">r_shadow_buffer_surfacesides</a></div><div class="ttdeci">unsigned char * r_shadow_buffer_surfacesides</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00100">r_shadow.c:100</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0661b28147bd9200b312775efc1dc7cd"><div class="ttname"><a href="r__shadow_8c.html#a0661b28147bd9200b312775efc1dc7cd">R_Shadow_EditLights_Clear_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_Clear_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05313">r_shadow.c:5313</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a06ac0a27bc6888c17169add1450b26e4"><div class="ttname"><a href="r__shadow_8c.html#a06ac0a27bc6888c17169add1450b26e4">R_Shadow_EditLights_Reload_f</a></div><div class="ttdeci">void R_Shadow_EditLights_Reload_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05318">r_shadow.c:5318</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a06ed82798679b64d1f947f15368cbe72"><div class="ttname"><a href="r__shadow_8c.html#a06ed82798679b64d1f947f15368cbe72">r_shadow_buffer_leaflist</a></div><div class="ttdeci">int * r_shadow_buffer_leaflist</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00095">r_shadow.c:95</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a07bb28e3a7e40d974a1f8677ca40e8a2"><div class="ttname"><a href="r__shadow_8c.html#a07bb28e3a7e40d974a1f8677ca40e8a2">r_shadow_viewx</a></div><div class="ttdeci">int r_shadow_viewx</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00127">r_shadow.c:127</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a081a16409450b472945fffe89f208cf5"><div class="ttname"><a href="r__shadow_8c.html#a081a16409450b472945fffe89f208cf5">R_Shadow_MakeTextures_MakeCorona</a></div><div class="ttdeci">static void R_Shadow_MakeTextures_MakeCorona(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01202">r_shadow.c:1202</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a081c49802042fb9793a40bd22709f433"><div class="ttname"><a href="r__shadow_8c.html#a081c49802042fb9793a40bd22709f433">r_shadow_bumpscale_bumpmap</a></div><div class="ttdeci">cvar_t r_shadow_bumpscale_bumpmap</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00142">r_shadow.c:142</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0a5c0469e4a2bdc175d837d81184f8a0"><div class="ttname"><a href="r__shadow_8c.html#a0a5c0469e4a2bdc175d837d81184f8a0">r_editlights_current_realtimemode</a></div><div class="ttdeci">cvar_t r_editlights_current_realtimemode</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00257">r_shadow.c:257</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0aa00614f3fcc1ca6f96c666ad0c9709"><div class="ttname"><a href="r__shadow_8c.html#a0aa00614f3fcc1ca6f96c666ad0c9709">r_shadow_realtime_world_compileportalculling</a></div><div class="ttdeci">cvar_t r_shadow_realtime_world_compileportalculling</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00170">r_shadow.c:170</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0b1626383078bb86e99de41bce584220"><div class="ttname"><a href="r__shadow_8c.html#a0b1626383078bb86e99de41bce584220">R_Shadow_SelectLight</a></div><div class="ttdeci">static void R_Shadow_SelectLight(dlight_t *light)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04713">r_shadow.c:4713</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0bf0a59428f24e0a923392d83630bd0b"><div class="ttname"><a href="r__shadow_8c.html#a0bf0a59428f24e0a923392d83630bd0b">r_shadow_shadowmapping_vsdct</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping_vsdct</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00176">r_shadow.c:176</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0d465ed0b81809e1263706defa298e46"><div class="ttname"><a href="r__shadow_8c.html#a0d465ed0b81809e1263706defa298e46">r_shadow_buffer_numlighttrispvsbytes</a></div><div class="ttdeci">int r_shadow_buffer_numlighttrispvsbytes</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00104">r_shadow.c:104</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0d70e8d1786aa6910f4584bbe64b3105"><div class="ttname"><a href="r__shadow_8c.html#a0d70e8d1786aa6910f4584bbe64b3105">r_shadow_modelshadowmap_parameters</a></div><div class="ttdeci">float r_shadow_modelshadowmap_parameters[4]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00043">r_shadow.c:43</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0dbe98d5b5b0ab64f5a82216b6b914ea"><div class="ttname"><a href="r__shadow_8c.html#a0dbe98d5b5b0ab64f5a82216b6b914ea">r_shadow_culllights_trace_enlarge</a></div><div class="ttdeci">cvar_t r_shadow_culllights_trace_enlarge</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00192">r_shadow.c:192</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0e0cbe65920fb236c82e2c50f4f7880b"><div class="ttname"><a href="r__shadow_8c.html#a0e0cbe65920fb236c82e2c50f4f7880b">r_shadow_usenormalmap</a></div><div class="ttdeci">cvar_t r_shadow_usenormalmap</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00146">r_shadow.c:146</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0e5a8082e8b4c9ea719a863f5fb2091e"><div class="ttname"><a href="r__shadow_8c.html#a0e5a8082e8b4c9ea719a863f5fb2091e">R_Shadow_EditLights_EditAll_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_EditAll_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05699">r_shadow.c:5699</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0e9d92e272adc56f7011415d517e134f"><div class="ttname"><a href="r__shadow_8c.html#a0e9d92e272adc56f7011415d517e134f">R_Shadow_BounceGrid_BlurPixels_Task</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_BlurPixels_Task(taskqueue_task_t *t)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02391">r_shadow.c:2391</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0f3acc72b271530ae45ed8b06f011976"><div class="ttname"><a href="r__shadow_8c.html#a0f3acc72b271530ae45ed8b06f011976">r_shadow_lightattenuationdividebias</a></div><div class="ttdeci">cvar_t r_shadow_lightattenuationdividebias</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00153">r_shadow.c:153</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0f3e0637f87b72439d92141be7304aa6"><div class="ttname"><a href="r__shadow_8c.html#a0f3e0637f87b72439d92141be7304aa6">R_Shadow_BounceGrid_ClearTex_Task</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_ClearTex_Task(taskqueue_task_t *t)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02592">r_shadow.c:2592</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0f4e79d1205f1a8874a83c26b7aa4934"><div class="ttname"><a href="r__shadow_8c.html#a0f4e79d1205f1a8874a83c26b7aa4934">r_shadow_buffer_leafpvs</a></div><div class="ttdeci">unsigned char * r_shadow_buffer_leafpvs</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00094">r_shadow.c:94</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a0f9ba7a3fe1f071a82dbd0329c8fd6d1"><div class="ttname"><a href="r__shadow_8c.html#a0f9ba7a3fe1f071a82dbd0329c8fd6d1">R_Shadow_SetupEntityLight</a></div><div class="ttdeci">void R_Shadow_SetupEntityLight(const entity_render_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03357">r_shadow.c:3357</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a11bc0f6e4a8eae1a369b249b999fefb1"><div class="ttname"><a href="r__shadow_8c.html#a11bc0f6e4a8eae1a369b249b999fefb1">r_editlights_current_angles</a></div><div class="ttdeci">cvar_t r_editlights_current_angles</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00245">r_shadow.c:245</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a11c04eaa165865bb30ace640532be7ff"><div class="ttname"><a href="r__shadow_8c.html#a11c04eaa165865bb30ace640532be7ff">r_shadow_culllights_trace_expand</a></div><div class="ttdeci">cvar_t r_shadow_culllights_trace_expand</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00193">r_shadow.c:193</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a1308d1080c8d50afd01f7201682dee79"><div class="ttname"><a href="r__shadow_8c.html#a1308d1080c8d50afd01f7201682dee79">R_Shadow_PrepareShadowSides</a></div><div class="ttdeci">void R_Shadow_PrepareShadowSides(int numtris)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00848">r_shadow.c:848</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a153a099b2f9e5dff97df9e62c223d4d5"><div class="ttname"><a href="r__shadow_8c.html#a153a099b2f9e5dff97df9e62c223d4d5">bboxedges</a></div><div class="ttdeci">int bboxedges[12][2]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02881">r_shadow.c:2881</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a162a37b012229cefcc5ee45d146e20ff"><div class="ttname"><a href="r__shadow_8c.html#a162a37b012229cefcc5ee45d146e20ff">R_Shadow_BounceGrid_UpdateSpacing</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_UpdateSpacing(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01751">r_shadow.c:1751</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a1716d37c9d63e6a32c388a02c738cedf"><div class="ttname"><a href="r__shadow_8c.html#a1716d37c9d63e6a32c388a02c738cedf">R_Shadow_EditLights_Lock_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_Lock_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05957">r_shadow.c:5957</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a172880f0c24e4e10a2321b58c15aa385"><div class="ttname"><a href="r__shadow_8c.html#a172880f0c24e4e10a2321b58c15aa385">r_shadow_shadowmappcf</a></div><div class="ttdeci">int r_shadow_shadowmappcf</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00060">r_shadow.c:60</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a1797156202d8d7e1a2442610a777970a"><div class="ttname"><a href="r__shadow_8c.html#a1797156202d8d7e1a2442610a777970a">r_shadow_bouncegrid_static</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_static</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00223">r_shadow.c:223</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a18b21bd08b92f0b79427462d3f874828"><div class="ttname"><a href="r__shadow_8c.html#a18b21bd08b92f0b79427462d3f874828">R_Shadow_CalcTriangleSideMask</a></div><div class="ttdeci">int R_Shadow_CalcTriangleSideMask(const vec3_t p1, const vec3_t p2, const vec3_t p3, float bias)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00863">r_shadow.c:863</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a19d274f4a09f26bc63ac80625ede0fb3"><div class="ttname"><a href="r__shadow_8c.html#a19d274f4a09f26bc63ac80625ede0fb3">r_shadow_bouncegrid_static_maxbounce</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_static_maxbounce</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00227">r_shadow.c:227</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a1b1a262e49e3a2230f800a256672388c"><div class="ttname"><a href="r__shadow_8c.html#a1b1a262e49e3a2230f800a256672388c">R_Shadow_EditLights_DrawSelectedLightProperties</a></div><div class="ttdeci">void R_Shadow_EditLights_DrawSelectedLightProperties(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05726">r_shadow.c:5726</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a1b6befd427ebd6277712a04a925f58e1"><div class="ttname"><a href="r__shadow_8c.html#a1b6befd427ebd6277712a04a925f58e1">r_shadow_bouncegrid_static_lightradiusscale</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_static_lightradiusscale</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00226">r_shadow.c:226</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a1deb1046f27ec5ac942ae8e7374a3f22"><div class="ttname"><a href="r__shadow_8c.html#a1deb1046f27ec5ac942ae8e7374a3f22">maxshadowmark</a></div><div class="ttdeci">int maxshadowmark</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00076">r_shadow.c:76</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a1e111165716559406b80ea14d95ec0dd"><div class="ttname"><a href="r__shadow_8c.html#a1e111165716559406b80ea14d95ec0dd">R_Shadow_ChooseSidesFromBox</a></div><div class="ttdeci">int R_Shadow_ChooseSidesFromBox(int firsttriangle, int numtris, const float *invertex3f, const int *elements, const matrix4x4_t *worldtolight, const vec3_t projectorigin, const vec3_t projectdirection, const vec3_t lightmins, const vec3_t lightmaxs, const vec3_t surfacemins, const vec3_t surfacemaxs, int *totals)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01058">r_shadow.c:1058</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a1e147e72bbae8ca02ec9ae2568a00566"><div class="ttname"><a href="r__shadow_8c.html#a1e147e72bbae8ca02ec9ae2568a00566">r_shadow_shadowmapping_nearclip</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping_nearclip</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00184">r_shadow.c:184</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a1eb35da16c1f26b84c7e7b4817203936"><div class="ttname"><a href="r__shadow_8c.html#a1eb35da16c1f26b84c7e7b4817203936">R_Shadow_DrawLightSprites</a></div><div class="ttdeci">void R_Shadow_DrawLightSprites(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04775">r_shadow.c:4775</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a20d4a825a2a263eec0869a8372fac5e2"><div class="ttname"><a href="r__shadow_8c.html#a20d4a825a2a263eec0869a8372fac5e2">R_Shadow_ScissorForBBox</a></div><div class="ttdeci">qbool R_Shadow_ScissorForBBox(const float *mins, const float *maxs)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02900">r_shadow.c:2900</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a2243a862a201b55113ee9b9dc3e1eb61"><div class="ttname"><a href="r__shadow_8c.html#a2243a862a201b55113ee9b9dc3e1eb61">r_shadow_usebihculling</a></div><div class="ttdeci">cvar_t r_shadow_usebihculling</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00145">r_shadow.c:145</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a228f216a9270733c064700839e9fa188"><div class="ttname"><a href="r__shadow_8c.html#a228f216a9270733c064700839e9fa188">r_editlights_current_color</a></div><div class="ttdeci">cvar_t r_editlights_current_color</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00246">r_shadow.c:246</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a229a2a5570cb5633155c748b02fd6a2c"><div class="ttname"><a href="r__shadow_8c.html#a229a2a5570cb5633155c748b02fd6a2c">r_shadow_prepassgeometrynormalmaptexture</a></div><div class="ttdeci">rtexture_t * r_shadow_prepassgeometrynormalmaptexture</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00120">r_shadow.c:120</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a22ac54cfb268b98642e9d1e877028208"><div class="ttname"><a href="r__shadow_8c.html#a22ac54cfb268b98642e9d1e877028208">r_shadow_prepasslightingdiffusetexture</a></div><div class="ttdeci">rtexture_t * r_shadow_prepasslightingdiffusetexture</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00121">r_shadow.c:121</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a22ca04d5d569346da0fd14fd3d3f99cd"><div class="ttname"><a href="r__shadow_8c.html#a22ca04d5d569346da0fd14fd3d3f99cd">r_shadow_lightscissor</a></div><div class="ttdeci">int r_shadow_lightscissor[4]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00063">r_shadow.c:63</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a231b12d52440fde590bcee63e4d07d64"><div class="ttname"><a href="r__shadow_8c.html#a231b12d52440fde590bcee63e4d07d64">r_editlights_cursorlocation</a></div><div class="ttdeci">vec3_t r_editlights_cursorlocation</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00276">r_shadow.c:276</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a23892b3c16ceec91c2a8df49795ec2e2"><div class="ttname"><a href="r__shadow_8c.html#a23892b3c16ceec91c2a8df49795ec2e2">r_editlights_sprnoshadowlight</a></div><div class="ttdeci">skinframe_t * r_editlights_sprnoshadowlight</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00293">r_shadow.c:293</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a23ec7667fc510c98e441b42587cf0e12"><div class="ttname"><a href="r__shadow_8c.html#a23ec7667fc510c98e441b42587cf0e12">R_Shadow_ClearStencil</a></div><div class="ttdeci">void R_Shadow_ClearStencil(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01430">r_shadow.c:1430</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a240b7bb15f06d555fd4c6e03d511e88a"><div class="ttname"><a href="r__shadow_8c.html#a240b7bb15f06d555fd4c6e03d511e88a">r_shadow_prepasslightingdiffusefbo</a></div><div class="ttdeci">GLuint r_shadow_prepasslightingdiffusefbo</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00116">r_shadow.c:116</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a24e3d35efcffd1452bf8b5d900a08d2c"><div class="ttname"><a href="r__shadow_8c.html#a24e3d35efcffd1452bf8b5d900a08d2c">R_Shadow_FreeDeferred</a></div><div class="ttdeci">static void R_Shadow_FreeDeferred(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03938">r_shadow.c:3938</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a25e217236f416451ebf1be392ad48b0c"><div class="ttname"><a href="r__shadow_8c.html#a25e217236f416451ebf1be392ad48b0c">R_Shadow_BounceGrid_EnqueueSlices_Task</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_EnqueueSlices_Task(taskqueue_task_t *t)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02341">r_shadow.c:2341</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a25e49340cbedaaa28d6bacc42c9a5a42"><div class="ttname"><a href="r__shadow_8c.html#a25e49340cbedaaa28d6bacc42c9a5a42">R_Shadow_DrawShadowMaps</a></div><div class="ttdeci">void R_Shadow_DrawShadowMaps(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04212">r_shadow.c:4212</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a29e4d44cd6610693db5aaeab62cace4e"><div class="ttname"><a href="r__shadow_8c.html#a29e4d44cd6610693db5aaeab62cace4e">r_shadow_realtime_dlight</a></div><div class="ttdeci">cvar_t r_shadow_realtime_dlight</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00159">r_shadow.c:159</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a2a9dc185bb3db2a01214f2f16a0a8143"><div class="ttname"><a href="r__shadow_8c.html#a2a9dc185bb3db2a01214f2f16a0a8143">R_Shadow_UncompileWorldLights</a></div><div class="ttdeci">void R_Shadow_UncompileWorldLights(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03133">r_shadow.c:3133</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a2ac98c9ce0bd2f311fece91216a3dc60"><div class="ttname"><a href="r__shadow_8c.html#a2ac98c9ce0bd2f311fece91216a3dc60">R_Shadow_BounceGrid_Slice</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_Slice(int zi)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02170">r_shadow.c:2170</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a2acc73bfba472354d3cb6c2998628eb0"><div class="ttname"><a href="r__shadow_8c.html#a2acc73bfba472354d3cb6c2998628eb0">r_shadow_shadowmapmaxsize</a></div><div class="ttdeci">int r_shadow_shadowmapmaxsize</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00055">r_shadow.c:55</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a2ad6f119241bf55bc48f5e3225b68638"><div class="ttname"><a href="r__shadow_8c.html#a2ad6f119241bf55bc48f5e3225b68638">R_Shadow_LoadLightsFile</a></div><div class="ttdeci">void R_Shadow_LoadLightsFile(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05000">r_shadow.c:5000</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a2b7bcd906c1cdb64193eb99dd589abee"><div class="ttname"><a href="r__shadow_8c.html#a2b7bcd906c1cdb64193eb99dd589abee">r_shadow_bouncegrid_dynamic_hitmodels</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_hitmodels</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00204">r_shadow.c:204</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a2d392398ed943f5b31fb70a9be2ecdd2"><div class="ttname"><a href="r__shadow_8c.html#a2d392398ed943f5b31fb70a9be2ecdd2">R_Shadow_CalcEntitySideMask</a></div><div class="ttdeci">#define R_Shadow_CalcEntitySideMask(ent, worldtolight, radiustolight, bias)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00964">r_shadow.c:964</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a2e12c3123d6cad1786cdbf7001ce3207"><div class="ttname"><a href="r__shadow_8c.html#a2e12c3123d6cad1786cdbf7001ce3207">R_Shadow_BounceGrid_FreeHighPixels</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_FreeHighPixels(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00490">r_shadow.c:490</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a3003a3ce413694b402afb0f5418d14aa"><div class="ttname"><a href="r__shadow_8c.html#a3003a3ce413694b402afb0f5418d14aa">r_shadow_bouncegrid_includedirectlighting</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_includedirectlighting</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00215">r_shadow.c:215</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a310939d55b4b4314782679eb0381c248"><div class="ttname"><a href="r__shadow_8c.html#a310939d55b4b4314782679eb0381c248">r_shadow_shadowmapping_bordersize</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping_bordersize</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00183">r_shadow.c:183</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a310e9dd8d8c461f6ac69699be5a35a96"><div class="ttname"><a href="r__shadow_8c.html#a310e9dd8d8c461f6ac69699be5a35a96">r_shadow_scenenumlights</a></div><div class="ttdeci">int r_shadow_scenenumlights</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00035">r_shadow.c:35</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a31e6522610c02f09559b7bd8bd75c558"><div class="ttname"><a href="r__shadow_8c.html#a31e6522610c02f09559b7bd8bd75c558">r_shadow_buffer_surfacepvs</a></div><div class="ttdeci">unsigned char * r_shadow_buffer_surfacepvs</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00098">r_shadow.c:98</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a327b768a966dbb9b7b2b9ed48fe87c40"><div class="ttname"><a href="r__shadow_8c.html#a327b768a966dbb9b7b2b9ed48fe87c40">r_editlights_current_style</a></div><div class="ttdeci">cvar_t r_editlights_current_style</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00250">r_shadow.c:250</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a331b3d66802cecbb5b26ed13a429b8b6"><div class="ttname"><a href="r__shadow_8c.html#a331b3d66802cecbb5b26ed13a429b8b6">r_shadow_prepasslightingspeculartexture</a></div><div class="ttdeci">rtexture_t * r_shadow_prepasslightingspeculartexture</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00122">r_shadow.c:122</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a3360a755216b12b0928cf4e3e3842d0e"><div class="ttname"><a href="r__shadow_8c.html#a3360a755216b12b0928cf4e3e3842d0e">maxshadowsides</a></div><div class="ttdeci">int maxshadowsides</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00082">r_shadow.c:82</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a33b81d2dcd1d3054facf713441473db3"><div class="ttname"><a href="r__shadow_8c.html#a33b81d2dcd1d3054facf713441473db3">r_shadow_mapname</a></div><div class="ttdeci">char r_shadow_mapname[MAX_QPATH]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00133">r_shadow.c:133</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a33e0b1cd3a48411ab9e255e226d63c8b"><div class="ttname"><a href="r__shadow_8c.html#a33e0b1cd3a48411ab9e255e226d63c8b">R_Shadow_PrepareShadowMark</a></div><div class="ttdeci">void R_Shadow_PrepareShadowMark(int numtris)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00824">r_shadow.c:824</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a358d50682355dd070731495eb5ccd19c"><div class="ttname"><a href="r__shadow_8c.html#a358d50682355dd070731495eb5ccd19c">r_shadow_buffer_visitingleafpvs</a></div><div class="ttdeci">unsigned char * r_shadow_buffer_visitingleafpvs</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00093">r_shadow.c:93</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a3597c68e03b049937f0a8d1f48b2d155"><div class="ttname"><a href="r__shadow_8c.html#a3597c68e03b049937f0a8d1f48b2d155">r_shadow_shadowmapshadowsampler</a></div><div class="ttdeci">qbool r_shadow_shadowmapshadowsampler</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00059">r_shadow.c:59</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a36bcfbf7432d611eb5e8041f2b1a38c4"><div class="ttname"><a href="r__shadow_8c.html#a36bcfbf7432d611eb5e8041f2b1a38c4">R_Shadow_EditLights_Save_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_Save_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05337">r_shadow.c:5337</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a374db1ed8684badcb0995878fc9b4300"><div class="ttname"><a href="r__shadow_8c.html#a374db1ed8684badcb0995878fc9b4300">r_shadow_debuglight</a></div><div class="ttdeci">cvar_t r_shadow_debuglight</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00143">r_shadow.c:143</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a37be7284dc0c2e90696440ee3ced0f12"><div class="ttname"><a href="r__shadow_8c.html#a37be7284dc0c2e90696440ee3ced0f12">r_shadow_shadowmapping_minsize</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping_minsize</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00177">r_shadow.c:177</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a39536fb5625169cacb76dad160685d55"><div class="ttname"><a href="r__shadow_8c.html#a39536fb5625169cacb76dad160685d55">r_shadow_buffer_numshadowtrispvsbytes</a></div><div class="ttdeci">int r_shadow_buffer_numshadowtrispvsbytes</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00102">r_shadow.c:102</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a3b04167aa9a5166d946d7a2ad69c0cfb"><div class="ttname"><a href="r__shadow_8c.html#a3b04167aa9a5166d946d7a2ad69c0cfb">vertexupdate</a></div><div class="ttdeci">int * vertexupdate</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00088">r_shadow.c:88</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a3bd90b680c3721ed0124b660332bd3f3"><div class="ttname"><a href="r__shadow_8c.html#a3bd90b680c3721ed0124b660332bd3f3">ATTEN2DSIZE</a></div><div class="ttdeci">#define ATTEN2DSIZE</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00265">r_shadow.c:265</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a3ce848ab57627ac008049d2e6e768821"><div class="ttname"><a href="r__shadow_8c.html#a3ce848ab57627ac008049d2e6e768821">r_editlights_cursorpushoff</a></div><div class="ttdeci">cvar_t r_editlights_cursorpushoff</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00240">r_shadow.c:240</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a3d32cd502c430d47379019c578c9375e"><div class="ttname"><a href="r__shadow_8c.html#a3d32cd502c430d47379019c578c9375e">r_shadow_culllights_trace_samples</a></div><div class="ttdeci">cvar_t r_shadow_culllights_trace_samples</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00195">r_shadow.c:195</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a3d91a060d2b02ad488cd77f0fb266791"><div class="ttname"><a href="r__shadow_8c.html#a3d91a060d2b02ad488cd77f0fb266791">R_Shadow_EditLights_Remove_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_Remove_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05840">r_shadow.c:5840</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a411af1b46d0021a05736ed8d916cd89f"><div class="ttname"><a href="r__shadow_8c.html#a411af1b46d0021a05736ed8d916cd89f">r_shadow_realtime_world_shadows</a></div><div class="ttdeci">cvar_t r_shadow_realtime_world_shadows</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00166">r_shadow.c:166</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a437cdd8c6d29ebd4b03f259f20e14415"><div class="ttname"><a href="r__shadow_8c.html#a437cdd8c6d29ebd4b03f259f20e14415">r_shadow_shadowmapping_depthbits</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping_depthbits</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00175">r_shadow.c:175</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a43e8c7a380aad0c6b987befbc9950b20"><div class="ttname"><a href="r__shadow_8c.html#a43e8c7a380aad0c6b987befbc9950b20">r_shadow_shadowmapvsdct</a></div><div class="ttdeci">qbool r_shadow_shadowmapvsdct</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00057">r_shadow.c:57</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a43ef251f8f1845074774c5f7306bd0c0"><div class="ttname"><a href="r__shadow_8c.html#a43ef251f8f1845074774c5f7306bd0c0">r_shadow_bouncegrid_dynamic_dlightparticlemultiplier</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_dlightparticlemultiplier</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00203">r_shadow.c:203</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a44818a4103882989f8fac7b02fdeaf9c"><div class="ttname"><a href="r__shadow_8c.html#a44818a4103882989f8fac7b02fdeaf9c">R_Shadow_DrawCursor_TransparentCallback</a></div><div class="ttdeci">static void R_Shadow_DrawCursor_TransparentCallback(const entity_render_t *ent, const rtlight_t *rtlight, int numsurfaces, int *surfacelist)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04722">r_shadow.c:4722</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a44a028698612a93a390f119598e82ec8"><div class="ttname"><a href="r__shadow_8c.html#a44a028698612a93a390f119598e82ec8">r_shadow_bouncegrid_dynamic_maxbounce</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_maxbounce</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00206">r_shadow.c:206</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a45077a7e2910775a9f6a02179a55a44b"><div class="ttname"><a href="r__shadow_8c.html#a45077a7e2910775a9f6a02179a55a44b">R_Shadow_FreeShadowMaps</a></div><div class="ttdeci">static void R_Shadow_FreeShadowMaps(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00390">r_shadow.c:390</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a48ad88d635e756c61dc92673ee055a9d"><div class="ttname"><a href="r__shadow_8c.html#a48ad88d635e756c61dc92673ee055a9d">r_shadow_cullface_front</a></div><div class="ttdeci">int r_shadow_cullface_front</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00048">r_shadow.c:48</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a491dbf84ab84d3d9a981d56f82d626f3"><div class="ttname"><a href="r__shadow_8c.html#a491dbf84ab84d3d9a981d56f82d626f3">r_editlights_current_normalmode</a></div><div class="ttdeci">cvar_t r_editlights_current_normalmode</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00256">r_shadow.c:256</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a493f9b14dcdf6b9e807dd7bf5b6007cc"><div class="ttname"><a href="r__shadow_8c.html#a493f9b14dcdf6b9e807dd7bf5b6007cc">r_shadow_sortsurfaces</a></div><div class="ttdeci">cvar_t r_shadow_sortsurfaces</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00188">r_shadow.c:188</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a494d7f51c8713574c3d2b2585354b9e3"><div class="ttname"><a href="r__shadow_8c.html#a494d7f51c8713574c3d2b2585354b9e3">r_shadow_shadowmode_shadowmapping</a></div><div class="ttdeci">int r_shadow_shadowmode_shadowmapping</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00050">r_shadow.c:50</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a4996623220b790e7682c23e4de6fc237"><div class="ttname"><a href="r__shadow_8c.html#a4996623220b790e7682c23e4de6fc237">r_editlights_sprlight</a></div><div class="ttdeci">skinframe_t * r_editlights_sprlight</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00292">r_shadow.c:292</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a49f9ee527a2c26bb7d24cb81ba976b21"><div class="ttname"><a href="r__shadow_8c.html#a49f9ee527a2c26bb7d24cb81ba976b21">R_Shadow_EditLights_ToggleCorona_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_ToggleCorona_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05825">r_shadow.c:5825</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a4b5a72c38504bc6ea78e695f2ed16aca"><div class="ttname"><a href="r__shadow_8c.html#a4b5a72c38504bc6ea78e695f2ed16aca">r_shadow_usingdeferredprepass</a></div><div class="ttdeci">qbool r_shadow_usingdeferredprepass</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00064">r_shadow.c:64</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a4c785a1add44a23930cb620359737c4e"><div class="ttname"><a href="r__shadow_8c.html#a4c785a1add44a23930cb620359737c4e">r_shadow_realtime_world</a></div><div class="ttdeci">cvar_t r_shadow_realtime_world</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00163">r_shadow.c:163</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a4e6dc58667f284a549e3dde6d0b7bf7c"><div class="ttname"><a href="r__shadow_8c.html#a4e6dc58667f284a549e3dde6d0b7bf7c">R_Shadow_DrawEntityLight</a></div><div class="ttdeci">static void R_Shadow_DrawEntityLight(entity_render_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03384">r_shadow.c:3384</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a4e765d143e27a63f01b4818eec6d17ad"><div class="ttname"><a href="r__shadow_8c.html#a4e765d143e27a63f01b4818eec6d17ad">r_shadow_bouncegrid_static_quality</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_static_quality</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00229">r_shadow.c:229</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a4e9b8a0c895ff2c589edb7590378f6a7"><div class="ttname"><a href="r__shadow_8c.html#a4e9b8a0c895ff2c589edb7590378f6a7">r_shadow_viewdepthtexture</a></div><div class="ttdeci">rtexture_t * r_shadow_viewdepthtexture</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00125">r_shadow.c:125</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5078f7b2b8e1ef5cfcefa05402f06831"><div class="ttname"><a href="r__shadow_8c.html#a5078f7b2b8e1ef5cfcefa05402f06831">R_Shadow_BounceGrid_RefractiveIndexAtPoint</a></div><div class="ttdeci">static float R_Shadow_BounceGrid_RefractiveIndexAtPoint(vec3_t point)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01902">r_shadow.c:1902</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a50840da8047197b7b97ae48568ce04a1"><div class="ttname"><a href="r__shadow_8c.html#a50840da8047197b7b97ae48568ce04a1">maxshadowtriangles</a></div><div class="ttdeci">int maxshadowtriangles</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00070">r_shadow.c:70</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a50c834f5bd9d9a7195c3c89d359c0f44"><div class="ttname"><a href="r__shadow_8c.html#a50c834f5bd9d9a7195c3c89d359c0f44">R_Shadow_GetRTLightInfo</a></div><div class="ttdeci">int R_Shadow_GetRTLightInfo(unsigned int lightindex, float *origin, float *radius, float *color)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04790">r_shadow.c:4790</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a51a3a6319e814d45b0966c62c46b7528"><div class="ttname"><a href="r__shadow_8c.html#a51a3a6319e814d45b0966c62c46b7528">r_shadow_bouncegrid_static_directionalshading</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_static_directionalshading</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00225">r_shadow.c:225</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5342d8e75e7cda04b07dc16c8b2ea400"><div class="ttname"><a href="r__shadow_8c.html#a5342d8e75e7cda04b07dc16c8b2ea400">r_shadow_realtime_dlight_svbspculling</a></div><div class="ttdeci">cvar_t r_shadow_realtime_dlight_svbspculling</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00161">r_shadow.c:161</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5363c849518fc64d491c1f7c6f612655"><div class="ttname"><a href="r__shadow_8c.html#a5363c849518fc64d491c1f7c6f612655">r_shadow_shadowmapping</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00172">r_shadow.c:172</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a53f4535c03dadf6efe7d7ac109a5c2d3"><div class="ttname"><a href="r__shadow_8c.html#a53f4535c03dadf6efe7d7ac109a5c2d3">r_shadow_scissor</a></div><div class="ttdeci">cvar_t r_shadow_scissor</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00171">r_shadow.c:171</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a54df0fcf12a70775bd530311ee848a42"><div class="ttname"><a href="r__shadow_8c.html#a54df0fcf12a70775bd530311ee848a42">R_Shadow_EditLights_CopyInfo_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_CopyInfo_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05913">r_shadow.c:5913</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a55f56f45cb9e5ba448db1b360cc826f0"><div class="ttname"><a href="r__shadow_8c.html#a55f56f45cb9e5ba448db1b360cc826f0">R_Shadow_EditLights_Edit_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_Edit_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05373">r_shadow.c:5373</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a55fd1afc983c3d9e9a6a5d703b8f5d1d"><div class="ttname"><a href="r__shadow_8c.html#a55fd1afc983c3d9e9a6a5d703b8f5d1d">r_shadow_viewfbo</a></div><div class="ttdeci">int r_shadow_viewfbo</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00124">r_shadow.c:124</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5654cc1c30edf8ffa1b071e08c5d1e53"><div class="ttname"><a href="r__shadow_8c.html#a5654cc1c30edf8ffa1b071e08c5d1e53">r_shadow_bouncegrid_particleintensity</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_particleintensity</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00220">r_shadow.c:220</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a566ec440d28d0ebea734f64b463ad372"><div class="ttname"><a href="r__shadow_8c.html#a566ec440d28d0ebea734f64b463ad372">r_shadow_shadowmapatlas_state</a></div><div class="ttdeci">mod_alloclightmap_state_t r_shadow_shadowmapatlas_state</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00066">r_shadow.c:66</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a56bd32784edad8eaa9a2e95494b5f929"><div class="ttname"><a href="r__shadow_8c.html#a56bd32784edad8eaa9a2e95494b5f929">r_shadow_shadowmapping_precision</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping_precision</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00180">r_shadow.c:180</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a573b63d83258093494303255e0f33e8a"><div class="ttname"><a href="r__shadow_8c.html#a573b63d83258093494303255e0f33e8a">R_Shadow_EditLights_ImportLightEntitiesFromMap_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_ImportLightEntitiesFromMap_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05344">r_shadow.c:5344</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a57a59322c075e1870bd1a4ded513c051"><div class="ttname"><a href="r__shadow_8c.html#a57a59322c075e1870bd1a4ded513c051">R_Shadow_MakeTextures</a></div><div class="ttdeci">static void R_Shadow_MakeTextures(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01232">r_shadow.c:1232</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a57db2fbafb97b199438f93788c8e7034"><div class="ttname"><a href="r__shadow_8c.html#a57db2fbafb97b199438f93788c8e7034">R_Shadow_CalcSphereSideMask</a></div><div class="ttdeci">int R_Shadow_CalcSphereSideMask(const vec3_t p, float radius, float bias)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00966">r_shadow.c:966</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a57dd3198772dbe610732098d0b78726d"><div class="ttname"><a href="r__shadow_8c.html#a57dd3198772dbe610732098d0b78726d">r_shadow_bouncegrid_lightpathsize</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_lightpathsize</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00217">r_shadow.c:217</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a580c6f162a1e9c2a526f1bc8b0a3dcf4"><div class="ttname"><a href="r__shadow_8c.html#a580c6f162a1e9c2a526f1bc8b0a3dcf4">r_shadow_projectdistance</a></div><div class="ttdeci">cvar_t r_shadow_projectdistance</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00157">r_shadow.c:157</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a58f22ad2c088cb0bed84c43287259fa5"><div class="ttname"><a href="r__shadow_8c.html#a58f22ad2c088cb0bed84c43287259fa5">r_shadow_shadowmapfilterquality</a></div><div class="ttdeci">int r_shadow_shadowmapfilterquality</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00053">r_shadow.c:53</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a59782962755e6de424ec4559cf4577a3"><div class="ttname"><a href="r__shadow_8c.html#a59782962755e6de424ec4559cf4577a3">r_coronas</a></div><div class="ttdeci">cvar_t r_coronas</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00233">r_shadow.c:233</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5a1b9f3c2977cc5264499e8871d516c8"><div class="ttname"><a href="r__shadow_8c.html#a5a1b9f3c2977cc5264499e8871d516c8">r_shadow_shadowmapping_useshadowsampler</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping_useshadowsampler</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00174">r_shadow.c:174</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5a392abd3660ffeddcd31d617d756ef9"><div class="ttname"><a href="r__shadow_8c.html#a5a392abd3660ffeddcd31d617d756ef9">ATTENTABLESIZE</a></div><div class="ttdeci">#define ATTENTABLESIZE</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00262">r_shadow.c:262</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5a85e2f80e3549ff22d7f598d55cd02f"><div class="ttname"><a href="r__shadow_8c.html#a5a85e2f80e3549ff22d7f598d55cd02f">R_Shadow_ResizeShadowArrays</a></div><div class="ttdeci">static void R_Shadow_ResizeShadowArrays(int numvertices, int numtriangles, int vertscale, int triscale)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00754">r_shadow.c:754</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5ab42593459491484d9d54f1b51fef48"><div class="ttname"><a href="r__shadow_8c.html#a5ab42593459491484d9d54f1b51fef48">r_shadow_modelshadows</a></div><div class="ttdeci">static entity_render_t * r_shadow_modelshadows[MAX_MODELSHADOWS]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04253">r_shadow.c:4253</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5ab901070f430b33bd3e0bf48d525ad5"><div class="ttname"><a href="r__shadow_8c.html#a5ab901070f430b33bd3e0bf48d525ad5">r_shadow_shadowmapside</a></div><div class="ttdeci">int r_shadow_shadowmapside</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00039">r_shadow.c:39</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5ad3d09f95b7dd878da14406490e7a0a"><div class="ttname"><a href="r__shadow_8c.html#a5ad3d09f95b7dd878da14406490e7a0a">r_shadow_rendermode</a></div><div class="ttdeci">r_shadow_rendermode_t r_shadow_rendermode</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00032">r_shadow.c:32</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5b73004bfb2234722770d895bc736f11"><div class="ttname"><a href="r__shadow_8c.html#a5b73004bfb2234722770d895bc736f11">r_shadow_attenuationgradienttexture</a></div><div class="ttdeci">rtexture_t * r_shadow_attenuationgradienttexture</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00108">r_shadow.c:108</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5b8f19d6a9f6218c94730fb8dac80e07"><div class="ttname"><a href="r__shadow_8c.html#a5b8f19d6a9f6218c94730fb8dac80e07">R_Shadow_EditLights_Init</a></div><div class="ttdeci">static void R_Shadow_EditLights_Init(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05977">r_shadow.c:5977</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5c941f548ba907619ec1fb2adb801c46"><div class="ttname"><a href="r__shadow_8c.html#a5c941f548ba907619ec1fb2adb801c46">r_shadow_selectedlight</a></div><div class="ttdeci">dlight_t * r_shadow_selectedlight</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00274">r_shadow.c:274</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a5f84bc2df94d65ff2f737bda1199bf87"><div class="ttname"><a href="r__shadow_8c.html#a5f84bc2df94d65ff2f737bda1199bf87">numshadowsides</a></div><div class="ttdeci">int numshadowsides</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00083">r_shadow.c:83</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a610c2953bf7e57ec697532f1d3135447"><div class="ttname"><a href="r__shadow_8c.html#a610c2953bf7e57ec697532f1d3135447">R_Shadow_EnlargeLeafSurfaceTrisBuffer</a></div><div class="ttdeci">static void R_Shadow_EnlargeLeafSurfaceTrisBuffer(int numleafs, int numsurfaces, int numshadowtriangles, int numlighttriangles)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00776">r_shadow.c:776</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a6113dbf9501981051ebb6447c6b38099"><div class="ttname"><a href="r__shadow_8c.html#a6113dbf9501981051ebb6447c6b38099">R_Shadow_SetCursorLocationForView</a></div><div class="ttdeci">static void R_Shadow_SetCursorLocationForView(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05276">r_shadow.c:5276</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a61890ab94397eb127ab265b6dca41722"><div class="ttname"><a href="r__shadow_8c.html#a61890ab94397eb127ab265b6dca41722">r_shadow_realtime_world_importlightentitiesfrommap</a></div><div class="ttdeci">cvar_t r_shadow_realtime_world_importlightentitiesfrommap</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00164">r_shadow.c:164</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a63dc439382d15f2dd4a7a884047bcbfd"><div class="ttname"><a href="r__shadow_8c.html#a63dc439382d15f2dd4a7a884047bcbfd">r_editlights_cursordistance</a></div><div class="ttdeci">cvar_t r_editlights_cursordistance</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00238">r_shadow.c:238</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a63faf6a233a9783c2374780dd741a9ea"><div class="ttname"><a href="r__shadow_8c.html#a63faf6a233a9783c2374780dd741a9ea">R_Shadow_MakeVSDCT</a></div><div class="ttdeci">static void R_Shadow_MakeVSDCT(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01436">r_shadow.c:1436</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a6538a2021d0ed79281be83552a020f24"><div class="ttname"><a href="r__shadow_8c.html#a6538a2021d0ed79281be83552a020f24">r_shadow_shadowmapsampler</a></div><div class="ttdeci">qbool r_shadow_shadowmapsampler</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00058">r_shadow.c:58</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a65dfd4a4235d767e35c6be9c52b67cc8"><div class="ttname"><a href="r__shadow_8c.html#a65dfd4a4235d767e35c6be9c52b67cc8">maxshadowvertices</a></div><div class="ttdeci">int maxshadowvertices</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00073">r_shadow.c:73</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a672a9d1cc4dc2c152a25e8b2a1c5caae"><div class="ttname"><a href="r__shadow_8c.html#a672a9d1cc4dc2c152a25e8b2a1c5caae">r_editlights_quakelightsizescale</a></div><div class="ttdeci">cvar_t r_editlights_quakelightsizescale</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00242">r_shadow.c:242</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a67409f727e6f049f035e240153f81678"><div class="ttname"><a href="r__shadow_8c.html#a67409f727e6f049f035e240153f81678">r_shadow_shadowmapdepthbits</a></div><div class="ttdeci">int r_shadow_shadowmapdepthbits</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00054">r_shadow.c:54</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a6756c2a0bed93299d516312dbd9b834d"><div class="ttname"><a href="r__shadow_8c.html#a6756c2a0bed93299d516312dbd9b834d">R_Shadow_RenderMode_DrawDeferredLight</a></div><div class="ttdeci">void R_Shadow_RenderMode_DrawDeferredLight(qbool shadowmapping)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01642">r_shadow.c:1642</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a683ab93525d4a7b22f04fd013961a33b"><div class="ttname"><a href="r__shadow_8c.html#a683ab93525d4a7b22f04fd013961a33b">R_Shadow_PrepareLights</a></div><div class="ttdeci">void R_Shadow_PrepareLights(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04039">r_shadow.c:4039</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a69929cbc19f8c80baa748a9cb1217769"><div class="ttname"><a href="r__shadow_8c.html#a69929cbc19f8c80baa748a9cb1217769">maxvertexupdate</a></div><div class="ttdeci">int maxvertexupdate</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00087">r_shadow.c:87</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a6a2b6b4ed69e837e20c465b31226b9e4"><div class="ttname"><a href="r__shadow_8c.html#a6a2b6b4ed69e837e20c465b31226b9e4">R_Shadow_ShadowMappingEnabled</a></div><div class="ttdeci">qbool R_Shadow_ShadowMappingEnabled(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00378">r_shadow.c:378</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a6b2ce902beafb95b38fcdd788ddab802"><div class="ttname"><a href="r__shadow_8c.html#a6b2ce902beafb95b38fcdd788ddab802">r_editlights_current_cubemap</a></div><div class="ttdeci">cvar_t r_editlights_current_cubemap</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00252">r_shadow.c:252</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a6db869294ff9626fbff8440312c677bb"><div class="ttname"><a href="r__shadow_8c.html#a6db869294ff9626fbff8440312c677bb">r_shadow_bouncegrid_intensity</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_intensity</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00216">r_shadow.c:216</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a70712833e104b0bcd7eec639054bd164"><div class="ttname"><a href="r__shadow_8c.html#a70712833e104b0bcd7eec639054bd164">R_Shadow_BounceGrid_TracePhotons_ShotTask</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_TracePhotons_ShotTask(taskqueue_task_t *t)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02727">r_shadow.c:2727</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a70932854c8f99ab9913429d34d170a35"><div class="ttname"><a href="r__shadow_8c.html#a70932854c8f99ab9913429d34d170a35">r_shadow_buffer_lighttrispvs</a></div><div class="ttdeci">unsigned char * r_shadow_buffer_lighttrispvs</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00105">r_shadow.c:105</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a71be92ad152f9abe030afe08648c86ba"><div class="ttname"><a href="r__shadow_8c.html#a71be92ad152f9abe030afe08648c86ba">bboxelements</a></div><div class="ttdeci">static const unsigned short bboxelements[36]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01620">r_shadow.c:1620</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a71d4dcf305db6ece81ac479cf58e1921"><div class="ttname"><a href="r__shadow_8c.html#a71d4dcf305db6ece81ac479cf58e1921">shadowmark</a></div><div class="ttdeci">int * shadowmark</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00078">r_shadow.c:78</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7239c53ebcb3083ca7bc8d5c2eac37dc"><div class="ttname"><a href="r__shadow_8c.html#a7239c53ebcb3083ca7bc8d5c2eac37dc">r_shadow_prepasslightingdiffusespecularfbo</a></div><div class="ttdeci">GLuint r_shadow_prepasslightingdiffusespecularfbo</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00115">r_shadow.c:115</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a72a967a1ed0fa627326360f636a767ca"><div class="ttname"><a href="r__shadow_8c.html#a72a967a1ed0fa627326360f636a767ca">r_editlights_current_coronasize</a></div><div class="ttdeci">cvar_t r_editlights_current_coronasize</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00249">r_shadow.c:249</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a72c84bfc3be828d0925b5aa7bd163541"><div class="ttname"><a href="r__shadow_8c.html#a72c84bfc3be828d0925b5aa7bd163541">r_shadow_lightshadowmap_parameters</a></div><div class="ttdeci">float r_shadow_lightshadowmap_parameters[4]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00041">r_shadow.c:41</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7383997584e9a05d0d1016ec4fa517cd"><div class="ttname"><a href="r__shadow_8c.html#a7383997584e9a05d0d1016ec4fa517cd">R_Shadow_BounceGrid_TracePhotons_Shot</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_TracePhotons_Shot(r_shadow_bouncegrid_photon_t *p, int remainingbounces, vec3_t shotstart, vec3_t shotend, vec3_t shotcolor, float bounceminimumintensity2, float previousrefractiveindex)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02598">r_shadow.c:2598</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a74c912ec2e1a65ea07fbb99ad2197498"><div class="ttname"><a href="r__shadow_8c.html#a74c912ec2e1a65ea07fbb99ad2197498">r_shadow_bouncegrid_dynamic_bounceminimumintensity</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_bounceminimumintensity</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00200">r_shadow.c:200</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a759be8bd0eb80e949a7e4bf28247922b"><div class="ttname"><a href="r__shadow_8c.html#a759be8bd0eb80e949a7e4bf28247922b">r_shadow_buffer_surfacelist</a></div><div class="ttdeci">int * r_shadow_buffer_surfacelist</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00099">r_shadow.c:99</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a767d01ae9fb1a276469a264ffdf4f1bf"><div class="ttname"><a href="r__shadow_8c.html#a767d01ae9fb1a276469a264ffdf4f1bf">R_Shadow_PrepareModelShadows</a></div><div class="ttdeci">void R_Shadow_PrepareModelShadows(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04255">r_shadow.c:4255</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a76b3a862e8e0f84844f788e717f412fb"><div class="ttname"><a href="r__shadow_8c.html#a76b3a862e8e0f84844f788e717f412fb">r_editlights_current_origin</a></div><div class="ttdeci">cvar_t r_editlights_current_origin</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00244">r_shadow.c:244</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a77e03f6897836ffeafb2826cf903cdbd"><div class="ttname"><a href="r__shadow_8c.html#a77e03f6897836ffeafb2826cf903cdbd">r_shadow_bouncegrid_rng_seed</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_rng_seed</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00221">r_shadow.c:221</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a77fcab02591cf32e02c8e5651e323d87"><div class="ttname"><a href="r__shadow_8c.html#a77fcab02591cf32e02c8e5651e323d87">r_editlights_sprcursor</a></div><div class="ttdeci">skinframe_t * r_editlights_sprcursor</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00291">r_shadow.c:291</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a781d512dfbb08f081776ec0a6d7ec186"><div class="ttname"><a href="r__shadow_8c.html#a781d512dfbb08f081776ec0a6d7ec186">r_editlights</a></div><div class="ttdeci">cvar_t r_editlights</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00237">r_shadow.c:237</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a784709ef5ba6a70c0ca0d66976289e9c"><div class="ttname"><a href="r__shadow_8c.html#a784709ef5ba6a70c0ca0d66976289e9c">R_Shadow_PrepareLights_AddSceneLight</a></div><div class="ttdeci">static qbool R_Shadow_PrepareLights_AddSceneLight(rtlight_t *rtlight)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04024">r_shadow.c:4024</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7873c73de31a3ad5a895f2c13befcd36"><div class="ttname"><a href="r__shadow_8c.html#a7873c73de31a3ad5a895f2c13befcd36">r_shadow_bouncegrid_static_bounceminimumintensity</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_static_bounceminimumintensity</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00224">r_shadow.c:224</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7939d31dd5a7d473fb7625b64eae3509"><div class="ttname"><a href="r__shadow_8c.html#a7939d31dd5a7d473fb7625b64eae3509">r_shadow_usingshadowmap2d</a></div><div class="ttdeci">qbool r_shadow_usingshadowmap2d</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00037">r_shadow.c:37</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7a09edeeb5508e0a09dbf3c9ebc425d3"><div class="ttname"><a href="r__shadow_8c.html#a7a09edeeb5508e0a09dbf3c9ebc425d3">r_shadow_culllights_trace_eyejitter</a></div><div class="ttdeci">cvar_t r_shadow_culllights_trace_eyejitter</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00191">r_shadow.c:191</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7b5a86f8c2c4c9c0d35c4b8d80bf005b"><div class="ttname"><a href="r__shadow_8c.html#a7b5a86f8c2c4c9c0d35c4b8d80bf005b">r_shadow_bouncegrid_dynamic_lightradiusscale</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_lightradiusscale</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00205">r_shadow.c:205</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7b925a5e9129dd0f8df1851c169ad312"><div class="ttname"><a href="r__shadow_8c.html#a7b925a5e9129dd0f8df1851c169ad312">R_Shadow_EditLights_ToggleShadow_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_ToggleShadow_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05810">r_shadow.c:5810</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7c6008b845bf6e182e4ae65068e0ee31"><div class="ttname"><a href="r__shadow_8c.html#a7c6008b845bf6e182e4ae65068e0ee31">r_shadow_culllights_trace_pad</a></div><div class="ttdeci">cvar_t r_shadow_culllights_trace_pad</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00194">r_shadow.c:194</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7c9977ce102ee53957a2d53860228c44"><div class="ttname"><a href="r__shadow_8c.html#a7c9977ce102ee53957a2d53860228c44">r_shadow_bouncegrid_dynamic_updateinterval</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_updateinterval</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00210">r_shadow.c:210</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7db4718ae3dafbce2b3223bb80fbc640"><div class="ttname"><a href="r__shadow_8c.html#a7db4718ae3dafbce2b3223bb80fbc640">r_shadow_prepassgeometrydepthbuffer</a></div><div class="ttdeci">rtexture_t * r_shadow_prepassgeometrydepthbuffer</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00119">r_shadow.c:119</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7e5e31d59f5e714bffcbd0aede762f1b"><div class="ttname"><a href="r__shadow_8c.html#a7e5e31d59f5e714bffcbd0aede762f1b">r_shadow_bouncegrid_static_spacing</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_static_spacing</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00230">r_shadow.c:230</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7e7d3d0fc2652b9a90b0be78f4757835"><div class="ttname"><a href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835">r_shadow_shadowmode_t</a></div><div class="ttdeci">r_shadow_shadowmode_t</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00025">r_shadow.c:26</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7e7d3d0fc2652b9a90b0be78f4757835a502b4eb32a6583fccaeaeca27674d5a3"><div class="ttname"><a href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835a502b4eb32a6583fccaeaeca27674d5a3">R_SHADOW_SHADOWMODE_DISABLED</a></div><div class="ttdeci">@ R_SHADOW_SHADOWMODE_DISABLED</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00027">r_shadow.c:27</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7e7d3d0fc2652b9a90b0be78f4757835aca635c2eb9b6d41bf36cc8ab01f4444b"><div class="ttname"><a href="r__shadow_8c.html#a7e7d3d0fc2652b9a90b0be78f4757835aca635c2eb9b6d41bf36cc8ab01f4444b">R_SHADOW_SHADOWMODE_SHADOWMAP2D</a></div><div class="ttdeci">@ R_SHADOW_SHADOWMODE_SHADOWMAP2D</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00029">r_shadow.c:28</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7e9c22b3ec6affd555dada90f6bbdfb7"><div class="ttname"><a href="r__shadow_8c.html#a7e9c22b3ec6affd555dada90f6bbdfb7">shadowvertex3f</a></div><div class="ttdeci">float * shadowvertex3f</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00074">r_shadow.c:74</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7ea0ca4b83d5a9b2d6168c80253b6324"><div class="ttname"><a href="r__shadow_8c.html#a7ea0ca4b83d5a9b2d6168c80253b6324">R_RTLight_Uncompile</a></div><div class="ttdeci">void R_RTLight_Uncompile(rtlight_t *rtlight)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03109">r_shadow.c:3109</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7f5a67a5e4958c92207104d85f286e59"><div class="ttname"><a href="r__shadow_8c.html#a7f5a67a5e4958c92207104d85f286e59">R_Shadow_MakeShadowMap</a></div><div class="ttdeci">static void R_Shadow_MakeShadowMap(int texturesize)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01456">r_shadow.c:1456</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7f5f1f765846f78d7ed9b5c104f67b85"><div class="ttname"><a href="r__shadow_8c.html#a7f5f1f765846f78d7ed9b5c104f67b85">r_shadow_shadowmaptexturesize</a></div><div class="ttdeci">int r_shadow_shadowmaptexturesize</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00056">r_shadow.c:56</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a7fec1caa52c4f5971aec39a0d950218c"><div class="ttname"><a href="r__shadow_8c.html#a7fec1caa52c4f5971aec39a0d950218c">r_shadow_glossexact</a></div><div class="ttdeci">cvar_t r_shadow_glossexact</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00152">r_shadow.c:152</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a808b4850191116867f66c1e6fb2ced6a"><div class="ttname"><a href="r__shadow_8c.html#a808b4850191116867f66c1e6fb2ced6a">R_RTLight_Update</a></div><div class="ttdeci">void R_RTLight_Update(rtlight_t *rtlight, int isstatic, matrix4x4_t *matrix, vec3_t color, int style, const char *cubemapname, int shadow, vec_t corona, vec_t coronasizescale, vec_t ambientscale, vec_t diffusescale, vec_t specularscale, int flags)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02980">r_shadow.c:2980</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a8180b5361a778c8f61f1b0b1dc844077"><div class="ttname"><a href="r__shadow_8c.html#a8180b5361a778c8f61f1b0b1dc844077">numshadowmark</a></div><div class="ttdeci">int numshadowmark</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00077">r_shadow.c:77</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a83b983e2608dba70436eb85cdaf33e5a"><div class="ttname"><a href="r__shadow_8c.html#a83b983e2608dba70436eb85cdaf33e5a">R_Shadow_RenderLighting_Light_GLSL</a></div><div class="ttdeci">static void R_Shadow_RenderLighting_Light_GLSL(int texturenumsurfaces, const msurface_t **texturesurfacelist, const float ambientcolor[3], const float diffusecolor[3], const float specularcolor[3])</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02928">r_shadow.c:2928</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a846335344e4cccc5dad99d5778bd8ed4"><div class="ttname"><a href="r__shadow_8c.html#a846335344e4cccc5dad99d5778bd8ed4">EDLIGHTSPRSIZE</a></div><div class="ttdeci">#define EDLIGHTSPRSIZE</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00290">r_shadow.c:290</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a85c48b5fadf41ff35eb2c65a2feb4212"><div class="ttname"><a href="r__shadow_8c.html#a85c48b5fadf41ff35eb2c65a2feb4212">R_Shadow_DrawLightShadowMaps</a></div><div class="ttdeci">static void R_Shadow_DrawLightShadowMaps(rtlight_t *rtlight)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03700">r_shadow.c:3700</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a8806bf00c50d87c860dce157ae250a48"><div class="ttname"><a href="r__shadow_8c.html#a8806bf00c50d87c860dce157ae250a48">r_shadow_shadowmode</a></div><div class="ttdeci">r_shadow_shadowmode_t r_shadow_shadowmode</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00052">r_shadow.c:52</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a8944edc1e16483db6f1dabdaaaf491b8"><div class="ttname"><a href="r__shadow_8c.html#a8944edc1e16483db6f1dabdaaaf491b8">r_editlights_current_corona</a></div><div class="ttdeci">cvar_t r_editlights_current_corona</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00248">r_shadow.c:248</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a8ab5df521017cffa6ec59d0a9e7038fa"><div class="ttname"><a href="r__shadow_8c.html#a8ab5df521017cffa6ec59d0a9e7038fa">r_shadow_shutdown</a></div><div class="ttdeci">static void r_shadow_shutdown(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00503">r_shadow.c:503</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a8abd158068709262d7ae098c70cebc67"><div class="ttname"><a href="r__shadow_8c.html#a8abd158068709262d7ae098c70cebc67">r_shadow_lightshadowmap_texturescale</a></div><div class="ttdeci">float r_shadow_lightshadowmap_texturescale[4]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00040">r_shadow.c:40</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a8b27974ce25cb2c28bbdc15bfb50f20f"><div class="ttname"><a href="r__shadow_8c.html#a8b27974ce25cb2c28bbdc15bfb50f20f">r_shadow_lightintensityscale</a></div><div class="ttdeci">cvar_t r_shadow_lightintensityscale</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00155">r_shadow.c:155</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a8c4f4f24a1d9fdc0e94394241efc163f"><div class="ttname"><a href="r__shadow_8c.html#a8c4f4f24a1d9fdc0e94394241efc163f">R_Shadow_RenderLighting</a></div><div class="ttdeci">void R_Shadow_RenderLighting(int texturenumsurfaces, const msurface_t **texturesurfacelist)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02936">r_shadow.c:2936</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a8ecdf1edcd01493fadea346e2d63d1ea"><div class="ttname"><a href="r__shadow_8c.html#a8ecdf1edcd01493fadea346e2d63d1ea">r_shadow_viewcolortexture</a></div><div class="ttdeci">rtexture_t * r_shadow_viewcolortexture</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00126">r_shadow.c:126</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a8f1db553ca88c636f59323f60b06e0b3"><div class="ttname"><a href="r__shadow_8c.html#a8f1db553ca88c636f59323f60b06e0b3">r_editlights_cursorpushback</a></div><div class="ttdeci">cvar_t r_editlights_cursorpushback</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00239">r_shadow.c:239</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a8f7f45586c012211b7be74ce606e574c"><div class="ttname"><a href="r__shadow_8c.html#a8f7f45586c012211b7be74ce606e574c">r_editlights_cursorgrid</a></div><div class="ttdeci">cvar_t r_editlights_cursorgrid</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00241">r_shadow.c:241</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a90c936b84616d29559d3335016cfebdf"><div class="ttname"><a href="r__shadow_8c.html#a90c936b84616d29559d3335016cfebdf">r_shadow_bouncegrid_subsamples</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_subsamples</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00231">r_shadow.c:231</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9234de8299b3999ded95f169ddc07c90"><div class="ttname"><a href="r__shadow_8c.html#a9234de8299b3999ded95f169ddc07c90">r_shadow_bouncegrid_particlebounceintensity</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_particlebounceintensity</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00219">r_shadow.c:219</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9429102ae0af5f4dff64c9134595d8f0"><div class="ttname"><a href="r__shadow_8c.html#a9429102ae0af5f4dff64c9134595d8f0">r_shadow_scenelightlist</a></div><div class="ttdeci">rtlight_t ** r_shadow_scenelightlist</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00036">r_shadow.c:36</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a943c8cbc0aadf4d127032a1b6ad27329"><div class="ttname"><a href="r__shadow_8c.html#a943c8cbc0aadf4d127032a1b6ad27329">matrix_attenuationz</a></div><div class="ttdeci">matrix4x4_t matrix_attenuationz</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00744">r_shadow.c:744</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a96bc72dc79c1396d6213950a2819381d"><div class="ttname"><a href="r__shadow_8c.html#a96bc72dc79c1396d6213950a2819381d">r_shadow_realtime_world_compile</a></div><div class="ttdeci">cvar_t r_shadow_realtime_world_compile</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00167">r_shadow.c:167</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a96d768bd137d35cb7fa6377b54ec9063"><div class="ttname"><a href="r__shadow_8c.html#a96d768bd137d35cb7fa6377b54ec9063">bboxpoints</a></div><div class="ttdeci">static const float bboxpoints[8][3]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01630">r_shadow.c:1630</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9726bbf07d8b90fc592f1ec058584ba8"><div class="ttname"><a href="r__shadow_8c.html#a9726bbf07d8b90fc592f1ec058584ba8">R_Shadow_RenderMode_VisibleLighting</a></div><div class="ttdeci">void R_Shadow_RenderMode_VisibleLighting(qbool transparent)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02860">r_shadow.c:2860</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a98692eae6f52e4fb205ee47f6e6cf56a"><div class="ttname"><a href="r__shadow_8c.html#a98692eae6f52e4fb205ee47f6e6cf56a">R_Shadow_DrawModelShadowMaps</a></div><div class="ttdeci">static void R_Shadow_DrawModelShadowMaps(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04324">r_shadow.c:4324</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a98acf1f7275f30b9e00c35d08366a033"><div class="ttname"><a href="r__shadow_8c.html#a98acf1f7275f30b9e00c35d08366a033">r_shadow_lightingrendermode</a></div><div class="ttdeci">r_shadow_rendermode_t r_shadow_lightingrendermode</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00033">r_shadow.c:33</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a98c82189f2291563db33e4a6d35757e8"><div class="ttname"><a href="r__shadow_8c.html#a98c82189f2291563db33e4a6d35757e8">matrix_attenuationxyz</a></div><div class="ttdeci">matrix4x4_t matrix_attenuationxyz</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00734">r_shadow.c:734</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9901644fc65dc0afb8aad4c76f6669e0"><div class="ttname"><a href="r__shadow_8c.html#a9901644fc65dc0afb8aad4c76f6669e0">r_shadow_viewy</a></div><div class="ttdeci">int r_shadow_viewy</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00128">r_shadow.c:128</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9941c1f23ab960b05549dacb0426ae71"><div class="ttname"><a href="r__shadow_8c.html#a9941c1f23ab960b05549dacb0426ae71">r_editlights_sprselection</a></div><div class="ttdeci">skinframe_t * r_editlights_sprselection</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00296">r_shadow.c:296</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a99c26d99dad94a24c996fa2602fd940a"><div class="ttname"><a href="r__shadow_8c.html#a99c26d99dad94a24c996fa2602fd940a">R_Shadow_DrawLightSprite_TransparentCallback</a></div><div class="ttdeci">static void R_Shadow_DrawLightSprite_TransparentCallback(const entity_render_t *ent, const rtlight_t *rtlight, int numsurfaces, int *surfacelist)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04731">r_shadow.c:4731</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a99d38a120a6bd9f7d41a417371ded304"><div class="ttname"><a href="r__shadow_8c.html#a99d38a120a6bd9f7d41a417371ded304">R_Shadow_DrawEntityShadow</a></div><div class="ttdeci">static void R_Shadow_DrawEntityShadow(entity_render_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03339">r_shadow.c:3339</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9a3fe0d597026f41083557ae9f030a11"><div class="ttname"><a href="r__shadow_8c.html#a9a3fe0d597026f41083557ae9f030a11">r_shadow_buffer_numleafpvsbytes</a></div><div class="ttdeci">int r_shadow_buffer_numleafpvsbytes</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00092">r_shadow.c:92</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9ab5dac5aed1eab9783f6f731c4c5853"><div class="ttname"><a href="r__shadow_8c.html#a9ab5dac5aed1eab9783f6f731c4c5853">r_shadow_prepassgeometryfbo</a></div><div class="ttdeci">GLuint r_shadow_prepassgeometryfbo</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00114">r_shadow.c:114</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9b257bcf33a5e2829102f091b0981006"><div class="ttname"><a href="r__shadow_8c.html#a9b257bcf33a5e2829102f091b0981006">r_editlights_current_ambient</a></div><div class="ttdeci">cvar_t r_editlights_current_ambient</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00253">r_shadow.c:253</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9b2e5213a19ac569c1e89d8ffaaa7626"><div class="ttname"><a href="r__shadow_8c.html#a9b2e5213a19ac569c1e89d8ffaaa7626">r_shadow_gloss</a></div><div class="ttdeci">cvar_t r_shadow_gloss</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00147">r_shadow.c:147</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9bdae801d1f2a6704de0754b19adf5d1"><div class="ttname"><a href="r__shadow_8c.html#a9bdae801d1f2a6704de0754b19adf5d1">R_Shadow_BounceGrid_EnqueuePhotons_Task</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_EnqueuePhotons_Task(taskqueue_task_t *t)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02734">r_shadow.c:2734</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9bdc226cb243cbaf2f365a6cf0e77f54"><div class="ttname"><a href="r__shadow_8c.html#a9bdc226cb243cbaf2f365a6cf0e77f54">R_Shadow_EditLights_PasteInfo_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_PasteInfo_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05942">r_shadow.c:5942</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9cdd48988e7e20a19511a5ea5d0b1f4f"><div class="ttname"><a href="r__shadow_8c.html#a9cdd48988e7e20a19511a5ea5d0b1f4f">r_shadow_nummodelshadows</a></div><div class="ttdeci">static int r_shadow_nummodelshadows</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04252">r_shadow.c:4252</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9e29d3ec8a4a146a8d90e096096f4e37"><div class="ttname"><a href="r__shadow_8c.html#a9e29d3ec8a4a146a8d90e096096f4e37">r_shadow_realtime_world_compilesvbsp</a></div><div class="ttdeci">cvar_t r_shadow_realtime_world_compilesvbsp</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00169">r_shadow.c:169</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9e657a20931acb0ccfca4a4a7013d858"><div class="ttname"><a href="r__shadow_8c.html#a9e657a20931acb0ccfca4a4a7013d858">R_Shadow_RenderMode_ShadowMap</a></div><div class="ttdeci">static void R_Shadow_RenderMode_ShadowMap(int side, int size, int x, int y)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01549">r_shadow.c:1549</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_a9fdf894159a51ec01ebcce8ec90bb3e8"><div class="ttname"><a href="r__shadow_8c.html#a9fdf894159a51ec01ebcce8ec90bb3e8">r_shadow_bouncegrid_dynamic_y</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_y</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00212">r_shadow.c:212</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa05e61ca09411882a73c20031098d7a9"><div class="ttname"><a href="r__shadow_8c.html#aa05e61ca09411882a73c20031098d7a9">r_shadow_attendividebias</a></div><div class="ttdeci">static float r_shadow_attendividebias</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00268">r_shadow.c:268</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa07187db7c3c253b48338fc55201564e"><div class="ttname"><a href="r__shadow_8c.html#aa07187db7c3c253b48338fc55201564e">r_shadow_prepass_width</a></div><div class="ttdeci">int r_shadow_prepass_width</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00117">r_shadow.c:117</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa248184b1d78dff49d490c33284d5bd8"><div class="ttname"><a href="r__shadow_8c.html#aa248184b1d78dff49d490c33284d5bd8">r_shadow_bouncegrid_rng_type</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_rng_type</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00222">r_shadow.c:222</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa270795a82b2335cb10e2c83f5e9aa76"><div class="ttname"><a href="r__shadow_8c.html#aa270795a82b2335cb10e2c83f5e9aa76">r_shadow_compilingrtlight</a></div><div class="ttdeci">rtlight_t * r_shadow_compilingrtlight</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00272">r_shadow.c:272</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa3823db1be08fa2c34a3b428b40ada80"><div class="ttname"><a href="r__shadow_8c.html#aa3823db1be08fa2c34a3b428b40ada80">r_shadow_usingshadowmaportho</a></div><div class="ttdeci">qbool r_shadow_usingshadowmaportho</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00038">r_shadow.c:38</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa3b405a28c2d6f9a6c99fe8707970f7c"><div class="ttname"><a href="r__shadow_8c.html#aa3b405a28c2d6f9a6c99fe8707970f7c">shadowsides</a></div><div class="ttdeci">unsigned char * shadowsides</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00084">r_shadow.c:84</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa420c92e6cafd52c46b38a0813d94357"><div class="ttname"><a href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357">r_shadow_rendermode_t</a></div><div class="ttdeci">r_shadow_rendermode_t</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00009">r_shadow.c:10</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa420c92e6cafd52c46b38a0813d94357a026dc2e973b145d60c64058bbe6519fd"><div class="ttname"><a href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a026dc2e973b145d60c64058bbe6519fd">R_SHADOW_RENDERMODE_VISIBLEVOLUMES</a></div><div class="ttdeci">@ R_SHADOW_RENDERMODE_VISIBLEVOLUMES</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00019">r_shadow.c:19</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa420c92e6cafd52c46b38a0813d94357a1f38e678baa61a27d802e5327188da61"><div class="ttname"><a href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a1f38e678baa61a27d802e5327188da61">R_SHADOW_RENDERMODE_NONE</a></div><div class="ttdeci">@ R_SHADOW_RENDERMODE_NONE</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00011">r_shadow.c:11</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa420c92e6cafd52c46b38a0813d94357a52928463af97761079255bdc89fe8c0a"><div class="ttname"><a href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a52928463af97761079255bdc89fe8c0a">R_SHADOW_RENDERMODE_ZPASS_STENCIL</a></div><div class="ttdeci">@ R_SHADOW_RENDERMODE_ZPASS_STENCIL</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00012">r_shadow.c:12</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa420c92e6cafd52c46b38a0813d94357a5fd9a94cedc2d458310fca10cd3124b9"><div class="ttname"><a href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a5fd9a94cedc2d458310fca10cd3124b9">R_SHADOW_RENDERMODE_SHADOWMAP2D</a></div><div class="ttdeci">@ R_SHADOW_RENDERMODE_SHADOWMAP2D</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00022">r_shadow.c:21</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa420c92e6cafd52c46b38a0813d94357a73153195db3588e9cbacca71f0cc151b"><div class="ttname"><a href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a73153195db3588e9cbacca71f0cc151b">R_SHADOW_RENDERMODE_ZFAIL_STENCIL</a></div><div class="ttdeci">@ R_SHADOW_RENDERMODE_ZFAIL_STENCIL</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00015">r_shadow.c:15</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa420c92e6cafd52c46b38a0813d94357a74b70befe054db54ea9abc789e04ed50"><div class="ttname"><a href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a74b70befe054db54ea9abc789e04ed50">R_SHADOW_RENDERMODE_VISIBLELIGHTING</a></div><div class="ttdeci">@ R_SHADOW_RENDERMODE_VISIBLELIGHTING</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00020">r_shadow.c:20</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa420c92e6cafd52c46b38a0813d94357a8a705347d610f9d1611a45d02d370181"><div class="ttname"><a href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a8a705347d610f9d1611a45d02d370181">R_SHADOW_RENDERMODE_LIGHT_GLSL</a></div><div class="ttdeci">@ R_SHADOW_RENDERMODE_LIGHT_GLSL</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00018">r_shadow.c:18</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa420c92e6cafd52c46b38a0813d94357a8d5f3d61939ea9b79cfd4e6d69079266"><div class="ttname"><a href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357a8d5f3d61939ea9b79cfd4e6d69079266">R_SHADOW_RENDERMODE_ZFAIL_SEPARATESTENCIL</a></div><div class="ttdeci">@ R_SHADOW_RENDERMODE_ZFAIL_SEPARATESTENCIL</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00016">r_shadow.c:16</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa420c92e6cafd52c46b38a0813d94357ab68a02fb6cfea001216fdc11460daff3"><div class="ttname"><a href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357ab68a02fb6cfea001216fdc11460daff3">R_SHADOW_RENDERMODE_ZPASS_SEPARATESTENCIL</a></div><div class="ttdeci">@ R_SHADOW_RENDERMODE_ZPASS_SEPARATESTENCIL</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00013">r_shadow.c:13</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa420c92e6cafd52c46b38a0813d94357ac53277841ac0f3cf0de1eff665e82ee4"><div class="ttname"><a href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357ac53277841ac0f3cf0de1eff665e82ee4">R_SHADOW_RENDERMODE_ZFAIL_STENCILTWOSIDE</a></div><div class="ttdeci">@ R_SHADOW_RENDERMODE_ZFAIL_STENCILTWOSIDE</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00017">r_shadow.c:17</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa420c92e6cafd52c46b38a0813d94357af313eb167acd53efc7b840e05e684d9c"><div class="ttname"><a href="r__shadow_8c.html#aa420c92e6cafd52c46b38a0813d94357af313eb167acd53efc7b840e05e684d9c">R_SHADOW_RENDERMODE_ZPASS_STENCILTWOSIDE</a></div><div class="ttdeci">@ R_SHADOW_RENDERMODE_ZPASS_STENCILTWOSIDE</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00014">r_shadow.c:14</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa447ed7042deafbe5c45a3f0e1571df0"><div class="ttname"><a href="r__shadow_8c.html#aa447ed7042deafbe5c45a3f0e1571df0">MAX_SCENELIGHTS</a></div><div class="ttdeci">#define MAX_SCENELIGHTS</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04023">r_shadow.c:4023</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa576ab139fb12bd530a37b2710500086"><div class="ttname"><a href="r__shadow_8c.html#aa576ab139fb12bd530a37b2710500086">R_Shadow_NewWorldLight</a></div><div class="ttdeci">static dlight_t * R_Shadow_NewWorldLight(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04647">r_shadow.c:4647</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa689749e561af4254355f6a9d83df692"><div class="ttname"><a href="r__shadow_8c.html#aa689749e561af4254355f6a9d83df692">r_shadow_frontsidecasting</a></div><div class="ttdeci">cvar_t r_shadow_frontsidecasting</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00158">r_shadow.c:158</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa7e690d5ac165d8522a86fada3f43350"><div class="ttname"><a href="r__shadow_8c.html#aa7e690d5ac165d8522a86fada3f43350">R_Shadow_BounceGrid_ConvertPixelsAndUpload</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_ConvertPixelsAndUpload(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02418">r_shadow.c:2418</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa8a7722a93e47750076d60e003e825b5"><div class="ttname"><a href="r__shadow_8c.html#aa8a7722a93e47750076d60e003e825b5">r_editlights_sprcubemaplight</a></div><div class="ttdeci">skinframe_t * r_editlights_sprcubemaplight</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00294">r_shadow.c:294</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aa8fe16360e95a6a6658c7519cebf0b97"><div class="ttname"><a href="r__shadow_8c.html#aa8fe16360e95a6a6658c7519cebf0b97">R_Shadow_ClearWorldLights</a></div><div class="ttdeci">void R_Shadow_ClearWorldLights(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04699">r_shadow.c:4699</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aaa039f9dc919793ae9ef89aa5b82027e"><div class="ttname"><a href="r__shadow_8c.html#aaa039f9dc919793ae9ef89aa5b82027e">r_shadow_texturepool</a></div><div class="ttdeci">rtexturepool_t * r_shadow_texturepool</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00107">r_shadow.c:107</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aab2089c6c18575adf51a542d79af6576"><div class="ttname"><a href="r__shadow_8c.html#aab2089c6c18575adf51a542d79af6576">r_shadow_culllights_pvs</a></div><div class="ttdeci">cvar_t r_shadow_culllights_pvs</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00189">r_shadow.c:189</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aab41b3558585dce98a0da4bf121d88f9"><div class="ttname"><a href="r__shadow_8c.html#aab41b3558585dce98a0da4bf121d88f9">R_Shadow_UpdateBounceGridTexture</a></div><div class="ttdeci">void R_Shadow_UpdateBounceGridTexture(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02755">r_shadow.c:2755</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aab840c0d105f7951bbafe35dd8f2f1cc"><div class="ttname"><a href="r__shadow_8c.html#aab840c0d105f7951bbafe35dd8f2f1cc">R_Shadow_RenderMode_Reset</a></div><div class="ttdeci">void R_Shadow_RenderMode_Reset(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01409">r_shadow.c:1409</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aac84d2ea256326d01ea2710316bb47ad"><div class="ttname"><a href="r__shadow_8c.html#aac84d2ea256326d01ea2710316bb47ad">shadowmarkcount</a></div><div class="ttdeci">int shadowmarkcount</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00080">r_shadow.c:80</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aae98730caa3cd73c0376ee07db2e4f23"><div class="ttname"><a href="r__shadow_8c.html#aae98730caa3cd73c0376ee07db2e4f23">r_shadow_realtime_world_compileshadow</a></div><div class="ttdeci">cvar_t r_shadow_realtime_world_compileshadow</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00168">r_shadow.c:168</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aaeaf212888c09948eb55ec732a83d835"><div class="ttname"><a href="r__shadow_8c.html#aaeaf212888c09948eb55ec732a83d835">shadowsideslist</a></div><div class="ttdeci">int * shadowsideslist</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00085">r_shadow.c:85</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aaf4fb1a43b7e6335253c0f3a68d6e8ca"><div class="ttname"><a href="r__shadow_8c.html#aaf4fb1a43b7e6335253c0f3a68d6e8ca">R_Shadow_BounceGrid_AssignPhotons_Task</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_AssignPhotons_Task(taskqueue_task_t *t)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01922">r_shadow.c:1922</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aafa9a61a3167b93b7e3db2a8e48d5812"><div class="ttname"><a href="r__shadow_8c.html#aafa9a61a3167b93b7e3db2a8e48d5812">r_shadow_bouncegrid_blur</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_blur</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00199">r_shadow.c:199</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aaff87c16eef046720942b85894fb74b2"><div class="ttname"><a href="r__shadow_8c.html#aaff87c16eef046720942b85894fb74b2">R_Shadow_MakeTextures_SamplePoint</a></div><div class="ttdeci">static unsigned int R_Shadow_MakeTextures_SamplePoint(float x, float y, float z)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01224">r_shadow.c:1224</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ab04b93fe59cc8947d98de66c740eda01"><div class="ttname"><a href="r__shadow_8c.html#ab04b93fe59cc8947d98de66c740eda01">r_shadow_shadowmapvsdcttexture</a></div><div class="ttdeci">rtexture_t * r_shadow_shadowmapvsdcttexture</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00112">r_shadow.c:112</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ab18407dfca8827e6dd2e204f6fcd4765"><div class="ttname"><a href="r__shadow_8c.html#ab18407dfca8827e6dd2e204f6fcd4765">r_shadow_bouncegrid_dynamic_maxphotons</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_maxphotons</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00207">r_shadow.c:207</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ab24c07551e3ecf58f94909820aaa2bfd"><div class="ttname"><a href="r__shadow_8c.html#ab24c07551e3ecf58f94909820aaa2bfd">r_shadow_scenemaxlights</a></div><div class="ttdeci">int r_shadow_scenemaxlights</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00034">r_shadow.c:34</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ab26bbb86c9c9e2871e0e6a4d85db1e77"><div class="ttname"><a href="r__shadow_8c.html#ab26bbb86c9c9e2871e0e6a4d85db1e77">r_shadow_bouncegrid_normalizevectors</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_normalizevectors</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00218">r_shadow.c:218</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ab48847f5962cf96e707a015ec3e4630b"><div class="ttname"><a href="r__shadow_8c.html#ab48847f5962cf96e707a015ec3e4630b">r_shadow_deferred</a></div><div class="ttdeci">cvar_t r_shadow_deferred</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00144">r_shadow.c:144</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ab586eaf6c1873d6f552adffc83869980"><div class="ttname"><a href="r__shadow_8c.html#ab586eaf6c1873d6f552adffc83869980">gl_lightmaps</a></div><div class="ttdeci">cvar_t gl_lightmaps</div><div class="ttdef"><b>Definition</b> <a href="gl__rmain_8c_source.html#l00233">gl_rmain.c:233</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ab5e08902e85373b0756014349a87f244"><div class="ttname"><a href="r__shadow_8c.html#ab5e08902e85373b0756014349a87f244">r_shadow_culllights_trace_delay</a></div><div class="ttdeci">cvar_t r_shadow_culllights_trace_delay</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00197">r_shadow.c:197</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ab66706337b89653db9c8a613cb44879b"><div class="ttname"><a href="r__shadow_8c.html#ab66706337b89653db9c8a613cb44879b">r_shadow_shadowmap2ddepthtexture</a></div><div class="ttdeci">rtexture_t * r_shadow_shadowmap2ddepthtexture</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00111">r_shadow.c:111</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ab7911866703760b0f6f217fb2abb54aa"><div class="ttname"><a href="r__shadow_8c.html#ab7911866703760b0f6f217fb2abb54aa">r_shadow_buffer_shadowtrispvs</a></div><div class="ttdeci">unsigned char * r_shadow_buffer_shadowtrispvs</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00103">r_shadow.c:103</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ab9700b21ff398060ec0f612ba4b22de3"><div class="ttname"><a href="r__shadow_8c.html#ab9700b21ff398060ec0f612ba4b22de3">R_BeginCoronaQuery</a></div><div class="ttdeci">static void R_BeginCoronaQuery(rtlight_t *rtlight, float scale, qbool usequery)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04433">r_shadow.c:4433</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_abcd3a00e258b83fb536152a846a9c4a5"><div class="ttname"><a href="r__shadow_8c.html#abcd3a00e258b83fb536152a846a9c4a5">r_shadow_shadowmapatlas_modelshadows_size</a></div><div class="ttdeci">int r_shadow_shadowmapatlas_modelshadows_size</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00069">r_shadow.c:69</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_abe85cac9d47b95845357d5b059ad085c"><div class="ttname"><a href="r__shadow_8c.html#abe85cac9d47b95845357d5b059ad085c">r_shadow_attenlinearscale</a></div><div class="ttdeci">static float r_shadow_attenlinearscale</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00269">r_shadow.c:269</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_abfb9569e9c4eb3d7d902bbea591a24d4"><div class="ttname"><a href="r__shadow_8c.html#abfb9569e9c4eb3d7d902bbea591a24d4">r_shadow_bouncegrid</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00198">r_shadow.c:198</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac02a3fba96cd698322ace2b608553089"><div class="ttname"><a href="r__shadow_8c.html#ac02a3fba96cd698322ace2b608553089">r_shadow_shadowmapmatrix</a></div><div class="ttdeci">matrix4x4_t r_shadow_shadowmapmatrix</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00062">r_shadow.c:62</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac15da7c84d84c53979d4b9d1a9302d67"><div class="ttname"><a href="r__shadow_8c.html#ac15da7c84d84c53979d4b9d1a9302d67">R_Shadow_DrawCoronas</a></div><div class="ttdeci">void R_Shadow_DrawCoronas(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04541">r_shadow.c:4541</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac1653dcecac621abba0ed8a8f2ea8b07"><div class="ttname"><a href="r__shadow_8c.html#ac1653dcecac621abba0ed8a8f2ea8b07">R_Shadow_Init</a></div><div class="ttdeci">void R_Shadow_Init(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00601">r_shadow.c:601</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac301c7bf5ab0840e76847ec294d41841"><div class="ttname"><a href="r__shadow_8c.html#ac301c7bf5ab0840e76847ec294d41841">r_shadow_prepass_height</a></div><div class="ttdeci">int r_shadow_prepass_height</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00118">r_shadow.c:118</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac362e58a7bea0632e15053a1e21b6d2c"><div class="ttname"><a href="r__shadow_8c.html#ac362e58a7bea0632e15053a1e21b6d2c">r_shadow_fbo2d</a></div><div class="ttdeci">GLuint r_shadow_fbo2d</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00049">r_shadow.c:49</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac3bf8e273436551219a3b874ca5f29a3"><div class="ttname"><a href="r__shadow_8c.html#ac3bf8e273436551219a3b874ca5f29a3">r_shadow_shadowmapatlas_modelshadows_y</a></div><div class="ttdeci">int r_shadow_shadowmapatlas_modelshadows_y</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00068">r_shadow.c:68</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac41307501be00f584997e2b3d255c5d4"><div class="ttname"><a href="r__shadow_8c.html#ac41307501be00f584997e2b3d255c5d4">r_shadow_realtime_dlight_portalculling</a></div><div class="ttdeci">cvar_t r_shadow_realtime_dlight_portalculling</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00162">r_shadow.c:162</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac4b2df0e099c868e3a37a10e3845fde5"><div class="ttname"><a href="r__shadow_8c.html#ac4b2df0e099c868e3a37a10e3845fde5">r_shadow_worldlightsarray</a></div><div class="ttdeci">static memexpandablearray_t r_shadow_worldlightsarray</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00273">r_shadow.c:273</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac539c896d573c08c20b0a2c6b7eb7fba"><div class="ttname"><a href="r__shadow_8c.html#ac539c896d573c08c20b0a2c6b7eb7fba">r_shadow_start</a></div><div class="ttdeci">static void r_shadow_start(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00416">r_shadow.c:416</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac66be86206739f14d3c6035c32d28b26"><div class="ttname"><a href="r__shadow_8c.html#ac66be86206739f14d3c6035c32d28b26">R_Shadow_BounceGrid_GenerateSettings</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_GenerateSettings(r_shadow_bouncegrid_settings_t *settings)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01708">r_shadow.c:1708</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac6934d9ab2fa894a14f01d84961e15ca"><div class="ttname"><a href="r__shadow_8c.html#ac6934d9ab2fa894a14f01d84961e15ca">R_Shadow_CullFrustumSides</a></div><div class="ttdeci">static int R_Shadow_CullFrustumSides(rtlight_t *rtlight, float size, float border)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00983">r_shadow.c:983</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac715ef2e77ddf2827ab304c2dbe6e17e"><div class="ttname"><a href="r__shadow_8c.html#ac715ef2e77ddf2827ab304c2dbe6e17e">R_Shadow_DrawWorldShadow_ShadowMap</a></div><div class="ttdeci">static void R_Shadow_DrawWorldShadow_ShadowMap(int numsurfaces, int *surfacelist, const unsigned char *trispvs, const unsigned char *surfacesides)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03316">r_shadow.c:3316</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac726c73e2b460a67406cfec8729bd07e"><div class="ttname"><a href="r__shadow_8c.html#ac726c73e2b460a67406cfec8729bd07e">r_shadow_gloss2intensity</a></div><div class="ttdeci">cvar_t r_shadow_gloss2intensity</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00148">r_shadow.c:148</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac864259a133582c8ceb11c08505e0c31"><div class="ttname"><a href="r__shadow_8c.html#ac864259a133582c8ceb11c08505e0c31">R_Shadow_SaveWorldLights</a></div><div class="ttdeci">void R_Shadow_SaveWorldLights(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04945">r_shadow.c:4945</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac8fae18c7ee489ebfaf1c8b0532edc99"><div class="ttname"><a href="r__shadow_8c.html#ac8fae18c7ee489ebfaf1c8b0532edc99">R_Shadow_ComputeShadowCasterCullingPlanes</a></div><div class="ttdeci">static void R_Shadow_ComputeShadowCasterCullingPlanes(rtlight_t *rtlight)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03147">r_shadow.c:3147</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac93991e2e64a1b25ff5438c33122286d"><div class="ttname"><a href="r__shadow_8c.html#ac93991e2e64a1b25ff5438c33122286d">r_shadow_buffer_numsurfacepvsbytes</a></div><div class="ttdeci">int r_shadow_buffer_numsurfacepvsbytes</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00097">r_shadow.c:97</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac94cccbef6ba7a6684c29ac1746a4370"><div class="ttname"><a href="r__shadow_8c.html#ac94cccbef6ba7a6684c29ac1746a4370">R_Shadow_LoadWorldLights</a></div><div class="ttdeci">void R_Shadow_LoadWorldLights(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04842">r_shadow.c:4842</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac972f0aabe9dc399b9e0400d60c69c3f"><div class="ttname"><a href="r__shadow_8c.html#ac972f0aabe9dc399b9e0400d60c69c3f">shadowmarklist</a></div><div class="ttdeci">int * shadowmarklist</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00079">r_shadow.c:79</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ac983b35605fe044369c676ce33b58061"><div class="ttname"><a href="r__shadow_8c.html#ac983b35605fe044369c676ce33b58061">r_shadow_lightattenuationlinearscale</a></div><div class="ttdeci">cvar_t r_shadow_lightattenuationlinearscale</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00154">r_shadow.c:154</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aca5a5c3ed528732c5986a853d0d5ddd3"><div class="ttname"><a href="r__shadow_8c.html#aca5a5c3ed528732c5986a853d0d5ddd3">r_shadow_bouncegrid_dynamic_z</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_z</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00213">r_shadow.c:213</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_acbb193b8edbb12870c5197611ea4f357"><div class="ttname"><a href="r__shadow_8c.html#acbb193b8edbb12870c5197611ea4f357">r_shadow_shadowmap2ddepthbuffer</a></div><div class="ttdeci">rtexture_t * r_shadow_shadowmap2ddepthbuffer</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00110">r_shadow.c:110</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_acc215d32de9b6b594936ef19c07bcefc"><div class="ttname"><a href="r__shadow_8c.html#acc215d32de9b6b594936ef19c07bcefc">r_shadow_realtime_dlight_shadows</a></div><div class="ttdeci">cvar_t r_shadow_realtime_dlight_shadows</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00160">r_shadow.c:160</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_acc41388e78420294a69dbcfc20a3dbd4"><div class="ttname"><a href="r__shadow_8c.html#acc41388e78420294a69dbcfc20a3dbd4">r_shadow_bouncegrid_dynamic_spacing</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_spacing</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00209">r_shadow.c:209</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_accca61ee7412c65bb90ee0c7c09e6949"><div class="ttname"><a href="r__shadow_8c.html#accca61ee7412c65bb90ee0c7c09e6949">r_coronas_occlusionquery</a></div><div class="ttdeci">cvar_t r_coronas_occlusionquery</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00235">r_shadow.c:235</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_acd48963351e3b59fcea0383c095ce28b"><div class="ttname"><a href="r__shadow_8c.html#acd48963351e3b59fcea0383c095ce28b">r_shadow_bouncegrid_dynamic_culllightpaths</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_culllightpaths</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00201">r_shadow.c:201</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_acd95c1f96dfaf981d25cc90ffe63f8eb"><div class="ttname"><a href="r__shadow_8c.html#acd95c1f96dfaf981d25cc90ffe63f8eb">r_editlights_current_diffuse</a></div><div class="ttdeci">cvar_t r_editlights_current_diffuse</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00254">r_shadow.c:254</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_acdae77962f6ca032365eb4681a73a4a7"><div class="ttname"><a href="r__shadow_8c.html#acdae77962f6ca032365eb4681a73a4a7">con_vislines</a></div><div class="ttdeci">int con_vislines</div><div class="ttdef"><b>Definition</b> <a href="console_8c_source.html#l00099">console.c:99</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_acde2bdd647e19d4b5e2789d569068fb1"><div class="ttname"><a href="r__shadow_8c.html#acde2bdd647e19d4b5e2789d569068fb1">R_Shadow_DrawLights</a></div><div class="ttdeci">void R_Shadow_DrawLights(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04239">r_shadow.c:4239</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_acf36a18c76e1f03dffe52f49b5c63f5c"><div class="ttname"><a href="r__shadow_8c.html#acf36a18c76e1f03dffe52f49b5c63f5c">r_shadow_glossexponent</a></div><div class="ttdeci">cvar_t r_shadow_glossexponent</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00150">r_shadow.c:150</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_acf3856ee38d8738a7617d3781f384683"><div class="ttname"><a href="r__shadow_8c.html#acf3856ee38d8738a7617d3781f384683">R_Shadow_DrawLight</a></div><div class="ttdeci">static void R_Shadow_DrawLight(rtlight_t *rtlight)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03842">r_shadow.c:3842</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_acf4f5f168d0d5b4008cc00b2d3d69542"><div class="ttname"><a href="r__shadow_8c.html#acf4f5f168d0d5b4008cc00b2d3d69542">r_shadow_shadowmapping_bias</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping_bias</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00185">r_shadow.c:185</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ad00b3696f6e3de1322809fba41c3408f"><div class="ttname"><a href="r__shadow_8c.html#ad00b3696f6e3de1322809fba41c3408f">r_shadow_bufferlight</a></div><div class="ttdeci">dlight_t r_shadow_bufferlight</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00275">r_shadow.c:275</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ad03146a33674d1c4a225d77b41e3c296"><div class="ttname"><a href="r__shadow_8c.html#ad03146a33674d1c4a225d77b41e3c296">r_shadow_shadowmapdepthtexture</a></div><div class="ttdeci">qbool r_shadow_shadowmapdepthtexture</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00065">r_shadow.c:65</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ad077a8bcfd564f016dc4f5ee589c36b9"><div class="ttname"><a href="r__shadow_8c.html#ad077a8bcfd564f016dc4f5ee589c36b9">ATTEN3DSIZE</a></div><div class="ttdeci">#define ATTEN3DSIZE</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00266">r_shadow.c:266</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ad0ac3912153c4fc807b0455777f3b0c6"><div class="ttname"><a href="r__shadow_8c.html#ad0ac3912153c4fc807b0455777f3b0c6">R_Shadow_ClearShadowMapTexture</a></div><div class="ttdeci">void R_Shadow_ClearShadowMapTexture(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01480">r_shadow.c:1480</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ad141da34e49308e0bdb1acff3d24b7ab"><div class="ttname"><a href="r__shadow_8c.html#ad141da34e49308e0bdb1acff3d24b7ab">MAX_MODELSHADOWS</a></div><div class="ttdeci">#define MAX_MODELSHADOWS</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04251">r_shadow.c:4251</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ad25ca00832ef2ab9633a450d3ede66cb"><div class="ttname"><a href="r__shadow_8c.html#ad25ca00832ef2ab9633a450d3ede66cb">r_shadow_bouncegrid_floatcolors</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_floatcolors</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00214">r_shadow.c:214</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ad30e7b118fedfa505d770ffb922a7969"><div class="ttname"><a href="r__shadow_8c.html#ad30e7b118fedfa505d770ffb922a7969">r_shadow_cullface_back</a></div><div class="ttdeci">int r_shadow_cullface_back</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00048">r_shadow.c:48</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ad4611b2c12dc964c3c778185d5ea6d94"><div class="ttname"><a href="r__shadow_8c.html#ad4611b2c12dc964c3c778185d5ea6d94">r_shadow_gloss2exponent</a></div><div class="ttdeci">cvar_t r_shadow_gloss2exponent</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00151">r_shadow.c:151</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ad693ecd5b97a8657e668145bd0249b75"><div class="ttname"><a href="r__shadow_8c.html#ad693ecd5b97a8657e668145bd0249b75">R_Shadow_BounceGrid_CheckEnable</a></div><div class="ttdeci">static qbool R_Shadow_BounceGrid_CheckEnable(int flag)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01674">r_shadow.c:1674</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ad6a16e2c9f35d89a6416e60ec54509f4"><div class="ttname"><a href="r__shadow_8c.html#ad6a16e2c9f35d89a6416e60ec54509f4">R_Shadow_EditLights_ImportLightsFile_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_ImportLightsFile_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05350">r_shadow.c:5350</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ad84a092c3f4d913bd1e68b718b3b5d99"><div class="ttname"><a href="r__shadow_8c.html#ad84a092c3f4d913bd1e68b718b3b5d99">r_shadow_bouncegrid_dynamic_quality</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_quality</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00208">r_shadow.c:208</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_adb5a65642fd1aa308f7337470538897f"><div class="ttname"><a href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897f">lighttype_t</a></div><div class="ttdeci">lighttype_t</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05049">r_shadow.c:5049</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_adb5a65642fd1aa308f7337470538897fa4dac314f1c5a9de20d4e04cd29b4bcfc"><div class="ttname"><a href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fa4dac314f1c5a9de20d4e04cd29b4bcfc">LIGHTTYPE_MINUSX</a></div><div class="ttdeci">@ LIGHTTYPE_MINUSX</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05049">r_shadow.c:5049</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_adb5a65642fd1aa308f7337470538897fa74e625abe920b6c615ec09645ff593c8"><div class="ttname"><a href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fa74e625abe920b6c615ec09645ff593c8">LIGHTTYPE_RECIPXX</a></div><div class="ttdeci">@ LIGHTTYPE_RECIPXX</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05049">r_shadow.c:5049</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_adb5a65642fd1aa308f7337470538897fa9ea923a73e3ba388ffa6a60267b84286"><div class="ttname"><a href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fa9ea923a73e3ba388ffa6a60267b84286">LIGHTTYPE_MINUSXX</a></div><div class="ttdeci">@ LIGHTTYPE_MINUSXX</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05049">r_shadow.c:5049</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_adb5a65642fd1aa308f7337470538897facbbc939d067e520b9016a940895325dc"><div class="ttname"><a href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897facbbc939d067e520b9016a940895325dc">LIGHTTYPE_NONE</a></div><div class="ttdeci">@ LIGHTTYPE_NONE</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05049">r_shadow.c:5049</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_adb5a65642fd1aa308f7337470538897fad580177fb80251d2e719f1d01ebe181c"><div class="ttname"><a href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897fad580177fb80251d2e719f1d01ebe181c">LIGHTTYPE_SUN</a></div><div class="ttdeci">@ LIGHTTYPE_SUN</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05049">r_shadow.c:5049</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_adb5a65642fd1aa308f7337470538897faf25513086216f002e0a75f013727d560"><div class="ttname"><a href="r__shadow_8c.html#adb5a65642fd1aa308f7337470538897faf25513086216f002e0a75f013727d560">LIGHTTYPE_RECIPX</a></div><div class="ttdeci">@ LIGHTTYPE_RECIPX</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05049">r_shadow.c:5049</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_adc00d2dcd8b227ce97e063580c41c269"><div class="ttname"><a href="r__shadow_8c.html#adc00d2dcd8b227ce97e063580c41c269">R_Shadow_BounceGrid_BlurPixelsInDirection</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_BlurPixelsInDirection(const float *inpixels, float *outpixels, int off)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02359">r_shadow.c:2359</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_adc0e191cf49d4f681d6e13a49d338c54"><div class="ttname"><a href="r__shadow_8c.html#adc0e191cf49d4f681d6e13a49d338c54">R_Shadow_SetShadowMode</a></div><div class="ttdeci">static void R_Shadow_SetShadowMode(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00301">r_shadow.c:301</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_adc3c945c3bc028142dddad245179892f"><div class="ttname"><a href="r__shadow_8c.html#adc3c945c3bc028142dddad245179892f">R_Shadow_RenderMode_ActiveLight</a></div><div class="ttdeci">void R_Shadow_RenderMode_ActiveLight(const rtlight_t *rtlight)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01404">r_shadow.c:1404</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_adf403909f42eb98bfa60734c71778bba"><div class="ttname"><a href="r__shadow_8c.html#adf403909f42eb98bfa60734c71778bba">r_shadow_attentable</a></div><div class="ttdeci">static float r_shadow_attentable[ATTENTABLESIZE+1]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00270">r_shadow.c:270</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_adff96119013e5218f435422f7b13cee7"><div class="ttname"><a href="r__shadow_8c.html#adff96119013e5218f435422f7b13cee7">r_shadow_newmap</a></div><div class="ttdeci">static void r_shadow_newmap(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00585">r_shadow.c:585</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ae150b57d6c0612f7709e613e7aced1d3"><div class="ttname"><a href="r__shadow_8c.html#ae150b57d6c0612f7709e613e7aced1d3">r_editlights_current_radius</a></div><div class="ttdeci">cvar_t r_editlights_current_radius</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00247">r_shadow.c:247</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ae2175aaad1171cce1dd9f531909c7732"><div class="ttname"><a href="r__shadow_8c.html#ae2175aaad1171cce1dd9f531909c7732">R_Shadow_RenderMode_End</a></div><div class="ttdeci">void R_Shadow_RenderMode_End(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02872">r_shadow.c:2872</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ae2644f027256da38698199b0785682af"><div class="ttname"><a href="r__shadow_8c.html#ae2644f027256da38698199b0785682af">r_shadow_culllights_trace_tempsamples</a></div><div class="ttdeci">cvar_t r_shadow_culllights_trace_tempsamples</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00196">r_shadow.c:196</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ae416b570a296feba69cecddc8ddbafea"><div class="ttname"><a href="r__shadow_8c.html#ae416b570a296feba69cecddc8ddbafea">R_Shadow_DrawPrepass</a></div><div class="ttdeci">void R_Shadow_DrawPrepass(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03966">r_shadow.c:3966</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ae5a80c33adccf8968cc4bd5ae656e805"><div class="ttname"><a href="r__shadow_8c.html#ae5a80c33adccf8968cc4bd5ae656e805">r_shadow_bouncegrid_threaded</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_threaded</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00232">r_shadow.c:232</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ae68f51fb59bece8e8a35a996f527c889"><div class="ttname"><a href="r__shadow_8c.html#ae68f51fb59bece8e8a35a996f527c889">R_Shadow_BounceGrid_Slice_Task</a></div><div class="ttdeci">static void R_Shadow_BounceGrid_Slice_Task(taskqueue_task_t *t)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l02335">r_shadow.c:2335</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ae6a16264f1d993fbf7030849abb5ac2a"><div class="ttname"><a href="r__shadow_8c.html#ae6a16264f1d993fbf7030849abb5ac2a">r_shadow_bouncegrid_dynamic_x</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_x</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00211">r_shadow.c:211</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ae7b723244f280d3a8ca8858bc9aa1994"><div class="ttname"><a href="r__shadow_8c.html#ae7b723244f280d3a8ca8858bc9aa1994">R_Shadow_UpdateWorldLightSelection</a></div><div class="ttdeci">void R_Shadow_UpdateWorldLightSelection(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05302">r_shadow.c:5302</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ae7c6f57d2c079948874a1052332c8daf"><div class="ttname"><a href="r__shadow_8c.html#ae7c6f57d2c079948874a1052332c8daf">r_shadow_shadowmode_deferred</a></div><div class="ttdeci">int r_shadow_shadowmode_deferred</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00051">r_shadow.c:51</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ae80021a5fcf124eec120c9e71805c23d"><div class="ttname"><a href="r__shadow_8c.html#ae80021a5fcf124eec120c9e71805c23d">r_shadow_shadowmapborder</a></div><div class="ttdeci">int r_shadow_shadowmapborder</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00061">r_shadow.c:61</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ae814fd537c2109a56aa92fc4c493f616"><div class="ttname"><a href="r__shadow_8c.html#ae814fd537c2109a56aa92fc4c493f616">r_shadow_occlusion_buf</a></div><div class="ttdeci">unsigned int r_shadow_occlusion_buf</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00136">r_shadow.c:136</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ae8447729362c0b4859f595ec86e15d6c"><div class="ttname"><a href="r__shadow_8c.html#ae8447729362c0b4859f595ec86e15d6c">r_editlights_sprcubemapnoshadowlight</a></div><div class="ttdeci">skinframe_t * r_editlights_sprcubemapnoshadowlight</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00295">r_shadow.c:295</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_ae87aa6ea0cfb5bc265f8ef7c1ddcd227"><div class="ttname"><a href="r__shadow_8c.html#ae87aa6ea0cfb5bc265f8ef7c1ddcd227">r_shadow_bouncegrid_dynamic_directionalshading</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_dynamic_directionalshading</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00202">r_shadow.c:202</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aeb1bb97aa2a8b56c567074f7a1ae93ff"><div class="ttname"><a href="r__shadow_8c.html#aeb1bb97aa2a8b56c567074f7a1ae93ff">R_RTLight_Compile</a></div><div class="ttdeci">void R_RTLight_Compile(rtlight_t *rtlight)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03023">r_shadow.c:3023</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aeb6886bbd1cf0b2d264895c983ac5d40"><div class="ttname"><a href="r__shadow_8c.html#aeb6886bbd1cf0b2d264895c983ac5d40">ATTEN1DSIZE</a></div><div class="ttdeci">#define ATTEN1DSIZE</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00264">r_shadow.c:264</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aeb7fd587e0d07d10f6a425cb693d08e2"><div class="ttname"><a href="r__shadow_8c.html#aeb7fd587e0d07d10f6a425cb693d08e2">r_editlights_current_specular</a></div><div class="ttdeci">cvar_t r_editlights_current_specular</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00255">r_shadow.c:255</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aec39f8a22b4eabdbc1debd36c5f70211"><div class="ttname"><a href="r__shadow_8c.html#aec39f8a22b4eabdbc1debd36c5f70211">r_shadow_realtime_world_lightmaps</a></div><div class="ttdeci">cvar_t r_shadow_realtime_world_lightmaps</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00165">r_shadow.c:165</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aec7193132dc9c1651fce671d2cfb4841"><div class="ttname"><a href="r__shadow_8c.html#aec7193132dc9c1651fce671d2cfb4841">r_shadow_viewwidth</a></div><div class="ttdeci">int r_shadow_viewwidth</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00129">r_shadow.c:129</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aec9f83716e02d5827f1414d2e99633dc"><div class="ttname"><a href="r__shadow_8c.html#aec9f83716e02d5827f1414d2e99633dc">shadowelements</a></div><div class="ttdeci">int * shadowelements</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00071">r_shadow.c:71</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aed09fab0c0feac12235fc7fd4be8ab96"><div class="ttname"><a href="r__shadow_8c.html#aed09fab0c0feac12235fc7fd4be8ab96">r_shadow_lightcorona</a></div><div class="ttdeci">skinframe_t * r_shadow_lightcorona</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00109">r_shadow.c:109</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aed63693950ee25ff00f040d8980f52cd"><div class="ttname"><a href="r__shadow_8c.html#aed63693950ee25ff00f040d8980f52cd">r_shadow_bumpscale_basetexture</a></div><div class="ttdeci">cvar_t r_shadow_bumpscale_basetexture</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00141">r_shadow.c:141</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aedef61baead60ec7acf0d0cef86d158e"><div class="ttname"><a href="r__shadow_8c.html#aedef61baead60ec7acf0d0cef86d158e">r_shadow_filters_texturepool</a></div><div class="ttdeci">rtexturepool_t * r_shadow_filters_texturepool</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00139">r_shadow.c:139</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aeead9091a82d97411391b129adccdc1d"><div class="ttname"><a href="r__shadow_8c.html#aeead9091a82d97411391b129adccdc1d">r_shadow_shadowmapping_polygonoffset</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping_polygonoffset</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00187">r_shadow.c:187</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aef0c5abaa045d60cd80ee60646257abd"><div class="ttname"><a href="r__shadow_8c.html#aef0c5abaa045d60cd80ee60646257abd">r_shadow_viewheight</a></div><div class="ttdeci">int r_shadow_viewheight</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00130">r_shadow.c:130</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aef0cd091bb977ece766820b8f107f53e"><div class="ttname"><a href="r__shadow_8c.html#aef0cd091bb977ece766820b8f107f53e">R_Shadow_LoadWorldLightsFromMap_LightArghliteTyrlite</a></div><div class="ttdeci">void R_Shadow_LoadWorldLightsFromMap_LightArghliteTyrlite(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05051">r_shadow.c:5051</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_af065abef516db94b9a4185099ddb92ab"><div class="ttname"><a href="r__shadow_8c.html#af065abef516db94b9a4185099ddb92ab">R_Shadow_DrawWorldLight</a></div><div class="ttdeci">static void R_Shadow_DrawWorldLight(int numsurfaces, int *surfacelist, const unsigned char *lighttrispvs)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03367">r_shadow.c:3367</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_af06c93abec80f9e5931fd21fd440b977"><div class="ttname"><a href="r__shadow_8c.html#af06c93abec80f9e5931fd21fd440b977">r_shadow_bouncegrid_static_maxphotons</a></div><div class="ttdeci">cvar_t r_shadow_bouncegrid_static_maxphotons</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00228">r_shadow.c:228</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_af20ac9c28e45c74931539d36c4af3129"><div class="ttname"><a href="r__shadow_8c.html#af20ac9c28e45c74931539d36c4af3129">r_shadow_shadowmapatlas_modelshadows_x</a></div><div class="ttdeci">int r_shadow_shadowmapatlas_modelshadows_x</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00067">r_shadow.c:67</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_af2a481b08e5fc0f7597647c72211dd7a"><div class="ttname"><a href="r__shadow_8c.html#af2a481b08e5fc0f7597647c72211dd7a">R_Shadow_SelectLightInView</a></div><div class="ttdeci">static void R_Shadow_SelectLightInView(void)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04810">r_shadow.c:4810</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_af2a4d49ec984ad0127331cba8e7debf1"><div class="ttname"><a href="r__shadow_8c.html#af2a4d49ec984ad0127331cba8e7debf1">r_editlights_current_shadows</a></div><div class="ttdeci">cvar_t r_editlights_current_shadows</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00251">r_shadow.c:251</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_af3b133ac1cbd4a3def2c2ebd4d750073"><div class="ttname"><a href="r__shadow_8c.html#af3b133ac1cbd4a3def2c2ebd4d750073">vertexupdatenum</a></div><div class="ttdeci">int vertexupdatenum</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00090">r_shadow.c:90</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_af447ee4df75ad54b8f31d00ecd6ef765"><div class="ttname"><a href="r__shadow_8c.html#af447ee4df75ad54b8f31d00ecd6ef765">R_Shadow_PrepareLight</a></div><div class="ttdeci">static void R_Shadow_PrepareLight(rtlight_t *rtlight)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l03397">r_shadow.c:3397</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_af68f9b04e8943ef4226c2e76e530238a"><div class="ttname"><a href="r__shadow_8c.html#af68f9b04e8943ef4226c2e76e530238a">r_shadow_shadowmapping_texturesize</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping_texturesize</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00179">r_shadow.c:179</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_af697ac24817c63467c5fbbd3d012256d"><div class="ttname"><a href="r__shadow_8c.html#af697ac24817c63467c5fbbd3d012256d">r_shadow_bouncegrid_state</a></div><div class="ttdeci">r_shadow_bouncegrid_state_t r_shadow_bouncegrid_state</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00259">r_shadow.c:259</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_af6dbcb2e63297485b66f235a60ae39cb"><div class="ttname"><a href="r__shadow_8c.html#af6dbcb2e63297485b66f235a60ae39cb">R_DrawCorona</a></div><div class="ttdeci">static void R_DrawCorona(rtlight_t *rtlight, float cscale, float scale)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04482">r_shadow.c:4482</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_af8021999d534e4dbbe86fc1108f9d3ce"><div class="ttname"><a href="r__shadow_8c.html#af8021999d534e4dbbe86fc1108f9d3ce">R_Shadow_EditLights_Spawn_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_Spawn_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05356">r_shadow.c:5356</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_af8b412ff853a18ec537a9a8f40c12b29"><div class="ttname"><a href="r__shadow_8c.html#af8b412ff853a18ec537a9a8f40c12b29">R_Shadow_UpdateWorldLight</a></div><div class="ttdeci">static void R_Shadow_UpdateWorldLight(dlight_t *light, vec3_t origin, vec3_t angles, vec3_t color, vec_t radius, vec_t corona, int style, int shadowenable, const char *cubemapname, vec_t coronasizescale, vec_t ambientscale, vec_t diffusescale, vec_t specularscale, int flags)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04652">r_shadow.c:4652</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_af9aa50577998ce10555d0ad5b39fb5e5"><div class="ttname"><a href="r__shadow_8c.html#af9aa50577998ce10555d0ad5b39fb5e5">R_CompleteLightPoint</a></div><div class="ttdeci">void R_CompleteLightPoint(float *ambient, float *diffuse, float *lightdir, const vec3_t p, const int flags, float lightmapintensity, float ambientintensity)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l06027">r_shadow.c:6027</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_afaad26a7103dc4357b063cbcc81fcb64"><div class="ttname"><a href="r__shadow_8c.html#afaad26a7103dc4357b063cbcc81fcb64">R_Shadow_FreeWorldLight</a></div><div class="ttdeci">static void R_Shadow_FreeWorldLight(dlight_t *light)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l04691">r_shadow.c:4691</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_afc049e9c0dc0d7e168e556a238dc2fbf"><div class="ttname"><a href="r__shadow_8c.html#afc049e9c0dc0d7e168e556a238dc2fbf">r_coronas_occlusionsizescale</a></div><div class="ttdeci">cvar_t r_coronas_occlusionsizescale</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00234">r_shadow.c:234</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_afdc165beb3e731178a1ba98872bee3b8"><div class="ttname"><a href="r__shadow_8c.html#afdc165beb3e731178a1ba98872bee3b8">gl_flashblend</a></div><div class="ttdeci">cvar_t gl_flashblend</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00236">r_shadow.c:236</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_afddb236d36a82641a3c15b996f5ca9d4"><div class="ttname"><a href="r__shadow_8c.html#afddb236d36a82641a3c15b996f5ca9d4">r_shadow_shadowmapping_polygonfactor</a></div><div class="ttdeci">cvar_t r_shadow_shadowmapping_polygonfactor</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00186">r_shadow.c:186</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_afe5c326cb87dc3516112a9f12607f3fb"><div class="ttname"><a href="r__shadow_8c.html#afe5c326cb87dc3516112a9f12607f3fb">R_Shadow_ShadowMapFromList</a></div><div class="ttdeci">void R_Shadow_ShadowMapFromList(int numverts, int numtris, const float *vertex3f, const int *elements, int numsidetris, const int *sidetotals, const unsigned char *sides, const int *sidetris)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l01162">r_shadow.c:1162</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_afe65ae6d734367fc70f16e1eb6df80c6"><div class="ttname"><a href="r__shadow_8c.html#afe65ae6d734367fc70f16e1eb6df80c6">r_editlights_lockcursor</a></div><div class="ttdeci">qbool r_editlights_lockcursor</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00277">r_shadow.c:277</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_afeed6d6e238decaa3133bc5414df66d2"><div class="ttname"><a href="r__shadow_8c.html#afeed6d6e238decaa3133bc5414df66d2">r_editlights_drawproperties</a></div><div class="ttdeci">cvar_t r_editlights_drawproperties</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00243">r_shadow.c:243</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aff01b51ea186b71010de0ddcf0b98855"><div class="ttname"><a href="r__shadow_8c.html#aff01b51ea186b71010de0ddcf0b98855">R_Shadow_EditLights_Help_f</a></div><div class="ttdeci">static void R_Shadow_EditLights_Help_f(cmd_state_t *cmd)</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l05856">r_shadow.c:5856</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_aff1170b5b07317b3b313b87f253d17dd"><div class="ttname"><a href="r__shadow_8c.html#aff1170b5b07317b3b313b87f253d17dd">vertexremap</a></div><div class="ttdeci">int * vertexremap</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00089">r_shadow.c:89</a></div></div>
<div class="ttc" id="ar__shadow_8c_html_afff8388ead8104ed51bceb8103cf1a60"><div class="ttname"><a href="r__shadow_8c.html#afff8388ead8104ed51bceb8103cf1a60">r_shadow_modelshadowmap_texturescale</a></div><div class="ttdeci">float r_shadow_modelshadowmap_texturescale[4]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8c_source.html#l00042">r_shadow.c:42</a></div></div>
<div class="ttc" id="ar__shadow_8h_html"><div class="ttname"><a href="r__shadow_8h.html">r_shadow.h</a></div></div>
<div class="ttc" id="ar__shadow_8h_html_a1d973c91b725371a9e677426dd722cba"><div class="ttname"><a href="r__shadow_8h.html#a1d973c91b725371a9e677426dd722cba">PHOTON_MAX_PATHS</a></div><div class="ttdeci">#define PHOTON_MAX_PATHS</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00068">r_shadow.h:68</a></div></div>
<div class="ttc" id="ar__shadow_8h_html_a39a8894bad7a0da2edbbdfd1a8a0b281"><div class="ttname"><a href="r__shadow_8h.html#a39a8894bad7a0da2edbbdfd1a8a0b281">LP_DYNLIGHT</a></div><div class="ttdeci">#define LP_DYNLIGHT</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00194">r_shadow.h:194</a></div></div>
<div class="ttc" id="ar__shadow_8h_html_a58b6c06882dc55d62d28fcf098e8ea9f"><div class="ttname"><a href="r__shadow_8h.html#a58b6c06882dc55d62d28fcf098e8ea9f">LP_LIGHTMAP</a></div><div class="ttdeci">#define LP_LIGHTMAP</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00192">r_shadow.h:192</a></div></div>
<div class="ttc" id="ar__shadow_8h_html_ae2a999ea230517becaea5dbe53b0b64e"><div class="ttname"><a href="r__shadow_8h.html#ae2a999ea230517becaea5dbe53b0b64e">LP_RTWORLD</a></div><div class="ttdeci">#define LP_RTWORLD</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00193">r_shadow.h:193</a></div></div>
<div class="ttc" id="ar__stats_8c_html_a31430a1fcc7d583a077f671156662c73"><div class="ttname"><a href="r__stats_8c.html#a31430a1fcc7d583a077f671156662c73">r_timereport_active</a></div><div class="ttdeci">int r_timereport_active</div><div class="ttdef"><b>Definition</b> <a href="r__stats_8c_source.html#l00189">r_stats.c:189</a></div></div>
<div class="ttc" id="ar__stats_8c_html_a37d0d0ea10d6d220c6c01e86f944704c"><div class="ttname"><a href="r__stats_8c.html#a37d0d0ea10d6d220c6c01e86f944704c">R_TimeReport</a></div><div class="ttdeci">void R_TimeReport(const char *desc)</div><div class="ttdef"><b>Definition</b> <a href="r__stats_8c_source.html#l00193">r_stats.c:193</a></div></div>
<div class="ttc" id="ar__stats_8h_html_ae611154931c203d788794752dda991f8a1380d12ec2d5d6a01857e928761fd3cc"><div class="ttname"><a href="r__stats_8h.html#ae611154931c203d788794752dda991f8a1380d12ec2d5d6a01857e928761fd3cc">r_stat_bouncegrid_particles</a></div><div class="ttdeci">@ r_stat_bouncegrid_particles</div><div class="ttdef"><b>Definition</b> <a href="r__stats_8h_source.html#l00034">r_stats.h:34</a></div></div>
<div class="ttc" id="ar__stats_8h_html_ae611154931c203d788794752dda991f8a3a2af959be4b0acf8b543e4eb8618407"><div class="ttname"><a href="r__stats_8h.html#ae611154931c203d788794752dda991f8a3a2af959be4b0acf8b543e4eb8618407">r_stat_bouncegrid_lights</a></div><div class="ttdeci">@ r_stat_bouncegrid_lights</div><div class="ttdef"><b>Definition</b> <a href="r__stats_8h_source.html#l00033">r_stats.h:33</a></div></div>
<div class="ttc" id="ar__stats_8h_html_ae611154931c203d788794752dda991f8a47d6bd851ff5b01df7552b6721944992"><div class="ttname"><a href="r__stats_8h.html#ae611154931c203d788794752dda991f8a47d6bd851ff5b01df7552b6721944992">r_stat_lights_clears</a></div><div class="ttdeci">@ r_stat_lights_clears</div><div class="ttdef"><b>Definition</b> <a href="r__stats_8h_source.html#l00028">r_stats.h:28</a></div></div>
<div class="ttc" id="ar__stats_8h_html_ae611154931c203d788794752dda991f8ab3b2f10ad08dae9618178b8c6942b972"><div class="ttname"><a href="r__stats_8h.html#ae611154931c203d788794752dda991f8ab3b2f10ad08dae9618178b8c6942b972">r_stat_lights</a></div><div class="ttdeci">@ r_stat_lights</div><div class="ttdef"><b>Definition</b> <a href="r__stats_8h_source.html#l00027">r_stats.h:27</a></div></div>
<div class="ttc" id="ar__stats_8h_html_ae611154931c203d788794752dda991f8ab6e706a1e0de55074264af370a89ff7b"><div class="ttname"><a href="r__stats_8h.html#ae611154931c203d788794752dda991f8ab6e706a1e0de55074264af370a89ff7b">r_stat_lights_scissored</a></div><div class="ttdeci">@ r_stat_lights_scissored</div><div class="ttdef"><b>Definition</b> <a href="r__stats_8h_source.html#l00029">r_stats.h:29</a></div></div>
<div class="ttc" id="ar__stats_8h_html_ae611154931c203d788794752dda991f8ab7c04c35cb8be16e1f757d5b8b45bfc5"><div class="ttname"><a href="r__stats_8h.html#ae611154931c203d788794752dda991f8ab7c04c35cb8be16e1f757d5b8b45bfc5">r_stat_lights_shadowtriangles</a></div><div class="ttdeci">@ r_stat_lights_shadowtriangles</div><div class="ttdef"><b>Definition</b> <a href="r__stats_8h_source.html#l00031">r_stats.h:31</a></div></div>
<div class="ttc" id="ar__textures_8h_html_a7e88b1d25d2969b53f6e967801f991ca"><div class="ttname"><a href="r__textures_8h.html#a7e88b1d25d2969b53f6e967801f991ca">TEXF_ALPHA</a></div><div class="ttdeci">#define TEXF_ALPHA</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00009">r_textures.h:9</a></div></div>
<div class="ttc" id="ar__textures_8h_html_a7ebf18782aefc1f1ff9fc5cb169e2dbb"><div class="ttname"><a href="r__textures_8h.html#a7ebf18782aefc1f1ff9fc5cb169e2dbb">TEXF_FORCELINEAR</a></div><div class="ttdeci">#define TEXF_FORCELINEAR</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00019">r_textures.h:19</a></div></div>
<div class="ttc" id="ar__textures_8h_html_aa97b4aaf90cefe1dff4cb00f2b232127"><div class="ttname"><a href="r__textures_8h.html#aa97b4aaf90cefe1dff4cb00f2b232127">TEXF_FORCENEAREST</a></div><div class="ttdeci">#define TEXF_FORCENEAREST</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00017">r_textures.h:17</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ab388bb02f3e8f998bf84eba7404aec49a3de163d8565fc8aabd0cf9c6b8a09f3e"><div class="ttname"><a href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49a3de163d8565fc8aabd0cf9c6b8a09f3e">TEXTYPE_SHADOWMAP16_RAW</a></div><div class="ttdeci">@ TEXTYPE_SHADOWMAP16_RAW</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00098">r_textures.h:98</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ab388bb02f3e8f998bf84eba7404aec49a78217cdbd846be90ada3c3e6e34b54e2"><div class="ttname"><a href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49a78217cdbd846be90ada3c3e6e34b54e2">TEXTYPE_COLORBUFFER</a></div><div class="ttdeci">@ TEXTYPE_COLORBUFFER</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00084">r_textures.h:84</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ab388bb02f3e8f998bf84eba7404aec49a8aa45b002c0da7b51b90b3d980dde237"><div class="ttname"><a href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49a8aa45b002c0da7b51b90b3d980dde237">TEXTYPE_SHADOWMAP16_COMP</a></div><div class="ttdeci">@ TEXTYPE_SHADOWMAP16_COMP</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00096">r_textures.h:96</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ab388bb02f3e8f998bf84eba7404aec49a99bf132eb3b3d5fedaa8e07719e126ed"><div class="ttname"><a href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49a99bf132eb3b3d5fedaa8e07719e126ed">TEXTYPE_COLORBUFFER32F</a></div><div class="ttdeci">@ TEXTYPE_COLORBUFFER32F</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00088">r_textures.h:88</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ab388bb02f3e8f998bf84eba7404aec49aa2466cecf47c58a7989d45c5b45273f3"><div class="ttname"><a href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49aa2466cecf47c58a7989d45c5b45273f3">TEXTYPE_DEPTHBUFFER24</a></div><div class="ttdeci">@ TEXTYPE_DEPTHBUFFER24</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00092">r_textures.h:92</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ab388bb02f3e8f998bf84eba7404aec49ab1c740b5f5da1c8392ab8615a7f786e5"><div class="ttname"><a href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49ab1c740b5f5da1c8392ab8615a7f786e5">TEXTYPE_DEPTHBUFFER16</a></div><div class="ttdeci">@ TEXTYPE_DEPTHBUFFER16</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00090">r_textures.h:90</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ab388bb02f3e8f998bf84eba7404aec49ab887b36a912241930415c7f1db44d094"><div class="ttname"><a href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49ab887b36a912241930415c7f1db44d094">TEXTYPE_BGRA</a></div><div class="ttdeci">@ TEXTYPE_BGRA</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00053">r_textures.h:53</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ab388bb02f3e8f998bf84eba7404aec49adbde783f57a05c835bacd7edfcde1536"><div class="ttname"><a href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49adbde783f57a05c835bacd7edfcde1536">TEXTYPE_RGBA</a></div><div class="ttdeci">@ TEXTYPE_RGBA</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00051">r_textures.h:51</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ab388bb02f3e8f998bf84eba7404aec49addcdfd96b68683438678b6a2a4d5f298"><div class="ttname"><a href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49addcdfd96b68683438678b6a2a4d5f298">TEXTYPE_SHADOWMAP24_RAW</a></div><div class="ttdeci">@ TEXTYPE_SHADOWMAP24_RAW</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00102">r_textures.h:102</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ab388bb02f3e8f998bf84eba7404aec49aebd75dc810a90799cf24bc6a2b1fdd86"><div class="ttname"><a href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49aebd75dc810a90799cf24bc6a2b1fdd86">TEXTYPE_SHADOWMAP24_COMP</a></div><div class="ttdeci">@ TEXTYPE_SHADOWMAP24_COMP</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00100">r_textures.h:100</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ab388bb02f3e8f998bf84eba7404aec49aff2b1b2f2f1450232e4c087a7ef6df1b"><div class="ttname"><a href="r__textures_8h.html#ab388bb02f3e8f998bf84eba7404aec49aff2b1b2f2f1450232e4c087a7ef6df1b">TEXTYPE_COLORBUFFER16F</a></div><div class="ttdeci">@ TEXTYPE_COLORBUFFER16F</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00086">r_textures.h:86</a></div></div>
<div class="ttc" id="ar__textures_8h_html_abe4e0ad1d375c912287a2f199bf6352a"><div class="ttname"><a href="r__textures_8h.html#abe4e0ad1d375c912287a2f199bf6352a">TEXF_CLAMP</a></div><div class="ttdeci">#define TEXF_CLAMP</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00015">r_textures.h:15</a></div></div>
<div class="ttc" id="ar__textures_8h_html_ae7321fcd751438a62912cc8cf7715d6e"><div class="ttname"><a href="r__textures_8h.html#ae7321fcd751438a62912cc8cf7715d6e">TEXF_RENDERTARGET</a></div><div class="ttdeci">#define TEXF_RENDERTARGET</div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00037">r_textures.h:37</a></div></div>
<div class="ttc" id="arender_8h_html_a7b49f2edb9fa235d6b832598b25ee37a"><div class="ttname"><a href="render_8h.html#a7b49f2edb9fa235d6b832598b25ee37a">BATCHNEED_NOGAPS</a></div><div class="ttdeci">#define BATCHNEED_NOGAPS</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00798">render.h:798</a></div></div>
<div class="ttc" id="arender_8h_html_ad1829856c3a0d7372af1a488c10ac60c"><div class="ttname"><a href="render_8h.html#ad1829856c3a0d7372af1a488c10ac60c">BATCHNEED_ARRAY_VERTEX</a></div><div class="ttdeci">#define BATCHNEED_ARRAY_VERTEX</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00790">render.h:790</a></div></div>
<div class="ttc" id="arender_8h_html_ae4703cc674971877b867746f23b8fbdaab5c42761f33d7c34e8d72203c78cee84"><div class="ttname"><a href="render_8h.html#ae4703cc674971877b867746f23b8fbdaab5c42761f33d7c34e8d72203c78cee84">RSURFPASS_RTLIGHT</a></div><div class="ttdeci">@ RSURFPASS_RTLIGHT</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00811">render.h:811</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a03ca83118c1fa655b5ac93cfd43efa5e"><div class="ttname"><a href="shader__glsl_8h.html#a03ca83118c1fa655b5ac93cfd43efa5e">refractcolor</a></div><div class="ttdeci">vec4 refractcolor</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00569">shader_glsl.h:569</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a25f2e1fef7cecde0255a3dde64ab4979"><div class="ttname"><a href="shader__glsl_8h.html#a25f2e1fef7cecde0255a3dde64ab4979">color</a></div><div class="ttdeci">vec3 color</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00505">shader_glsl.h:505</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a2ab77c89eb79b49ccd22bb1b2ad48bf1"><div class="ttname"><a href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a></div><div class="ttdeci">precision highp float</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00045">shader_glsl.h:45</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a43c562cd4d69a6398eab1369a808653e"><div class="ttname"><a href="shader__glsl_8h.html#a43c562cd4d69a6398eab1369a808653e">Fresnel</a></div><div class="ttdeci">float Fresnel</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00701">shader_glsl.h:701</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a731feb93da8dc28ee53e37b43daabd06"><div class="ttname"><a href="shader__glsl_8h.html#a731feb93da8dc28ee53e37b43daabd06">f</a></div><div class="ttdeci">float f</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00586">shader_glsl.h:586</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a7f9900a7305f0a389e52eb9aef7b1f13"><div class="ttname"><a href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a></div><div class="ttdeci">vec3 normal</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00575">shader_glsl.h:575</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_ada7daae51ef1e670767c18b83ea78044"><div class="ttname"><a href="shader__glsl_8h.html#ada7daae51ef1e670767c18b83ea78044">a</a></div><div class="ttdeci">ret a</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00296">shader_glsl.h:296</a></div></div>
<div class="ttc" id="asnd__main_8c_html_ac8f1d491f70a504540240cbb8c97b7a4"><div class="ttname"><a href="snd__main_8c.html#ac8f1d491f70a504540240cbb8c97b7a4">S_ExtraUpdate</a></div><div class="ttdeci">void S_ExtraUpdate(void)</div><div class="ttdef"><b>Definition</b> <a href="snd__main_8c_source.html#l02245">snd_main.c:2245</a></div></div>
<div class="ttc" id="asnd__mix_8c_html_a2dfe87f3417747242e8f043dd4f3fb59"><div class="ttname"><a href="snd__mix_8c.html#a2dfe87f3417747242e8f043dd4f3fb59">intensity</a></div><div class="ttdeci">float intensity</div><div class="ttdef"><b>Definition</b> <a href="snd__mix_8c_source.html#l00326">snd_mix.c:326</a></div></div>
<div class="ttc" id="astructclient__state__t_html_a8ab19b0b9d4e96dc0220d846226e4283"><div class="ttname"><a href="structclient__state__t.html#a8ab19b0b9d4e96dc0220d846226e4283">client_state_t::worldmodel</a></div><div class="ttdeci">struct model_s * worldmodel</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00935">client.h:935</a></div></div>
<div class="ttc" id="astructclient__state__t_html_acda413bc16dea281731c311e05f5132b"><div class="ttname"><a href="structclient__state__t.html#acda413bc16dea281731c311e05f5132b">client_state_t::worldname</a></div><div class="ttdeci">char worldname[MAX_QPATH]</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00900">client.h:900</a></div></div>
<div class="ttc" id="astructclient__state__t_html_ae7a60c16f01b15d307b2bce38ff6c75d"><div class="ttname"><a href="structclient__state__t.html#ae7a60c16f01b15d307b2bce38ff6c75d">client_state_t::csqc_vidvars</a></div><div class="ttdeci">csqc_vidvars_t csqc_vidvars</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00835">client.h:835</a></div></div>
<div class="ttc" id="astructclient__state__t_html_af57ffbd05e98d81d460b2c1b18f46149"><div class="ttname"><a href="structclient__state__t.html#af57ffbd05e98d81d460b2c1b18f46149">client_state_t::worldnamenoextension</a></div><div class="ttdeci">char worldnamenoextension[MAX_QPATH]</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00901">client.h:901</a></div></div>
<div class="ttc" id="astructcmd__state__t_html"><div class="ttname"><a href="structcmd__state__t.html">cmd_state_t</a></div><div class="ttdoc">command interpreter state - the tokenizing and execution of commands, as well as pointers to which cv...</div><div class="ttdef"><b>Definition</b> <a href="cmd_8h_source.html#l00126">cmd.h:127</a></div></div>
<div class="ttc" id="astructcsqc__vidvars__t_html_a6efd082defb0698bbacc6c89285df092"><div class="ttname"><a href="structcsqc__vidvars__t.html#a6efd082defb0698bbacc6c89285df092">csqc_vidvars_t::drawworld</a></div><div class="ttdeci">qbool drawworld</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00707">client.h:707</a></div></div>
<div class="ttc" id="astructcvar__t_html"><div class="ttname"><a href="structcvar__t.html">cvar_t</a></div><div class="ttdef"><b>Definition</b> <a href="cvar_8h_source.html#l00065">cvar.h:66</a></div></div>
<div class="ttc" id="astructcvar__t_html_a305faa0167494135297f1b8e6216d469"><div class="ttname"><a href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">cvar_t::value</a></div><div class="ttdeci">float value</div><div class="ttdef"><b>Definition</b> <a href="cvar_8h_source.html#l00074">cvar.h:74</a></div></div>
<div class="ttc" id="astructcvar__t_html_a376ca13f147f306d71edbe7670e138b0"><div class="ttname"><a href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">cvar_t::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition</b> <a href="cvar_8h_source.html#l00073">cvar.h:73</a></div></div>
<div class="ttc" id="astructcvar__t_html_aa8b859b9332810d238c09b51ea54a2f4"><div class="ttname"><a href="structcvar__t.html#aa8b859b9332810d238c09b51ea54a2f4">cvar_t::string</a></div><div class="ttdeci">const char * string</div><div class="ttdef"><b>Definition</b> <a href="cvar_8h_source.html#l00071">cvar.h:71</a></div></div>
<div class="ttc" id="astructdlight__t_html"><div class="ttname"><a href="structdlight__t.html">dlight_t</a></div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00233">client.h:234</a></div></div>
<div class="ttc" id="astructdlight__t_html_a009183a597923cdb1b3f4724898e4aae"><div class="ttname"><a href="structdlight__t.html#a009183a597923cdb1b3f4724898e4aae">dlight_t::angles</a></div><div class="ttdeci">vec3_t angles</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00247">client.h:247</a></div></div>
<div class="ttc" id="astructdlight__t_html_a0381227767f2212ce5e3d7f25927a9c5"><div class="ttname"><a href="structdlight__t.html#a0381227767f2212ce5e3d7f25927a9c5">dlight_t::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00296">client.h:296</a></div></div>
<div class="ttc" id="astructdlight__t_html_a0f1cda7ca2828e507e02338e207c008a"><div class="ttname"><a href="structdlight__t.html#a0f1cda7ca2828e507e02338e207c008a">dlight_t::coronasizescale</a></div><div class="ttdeci">vec_t coronasizescale</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00284">client.h:284</a></div></div>
<div class="ttc" id="astructdlight__t_html_a0fd49d0987dbb02d764e37b3da3d52a9"><div class="ttname"><a href="structdlight__t.html#a0fd49d0987dbb02d764e37b3da3d52a9">dlight_t::rtlight</a></div><div class="ttdeci">rtlight_t rtlight</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00302">client.h:302</a></div></div>
<div class="ttc" id="astructdlight__t_html_a18dafed1466de01c08238971a40f5a0c"><div class="ttname"><a href="structdlight__t.html#a18dafed1466de01c08238971a40f5a0c">dlight_t::origin</a></div><div class="ttdeci">vec3_t origin</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00243">client.h:243</a></div></div>
<div class="ttc" id="astructdlight__t_html_a24fa5ff0a261949edc364e03870bb7c7"><div class="ttname"><a href="structdlight__t.html#a24fa5ff0a261949edc364e03870bb7c7">dlight_t::style</a></div><div class="ttdeci">int style</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00275">client.h:275</a></div></div>
<div class="ttc" id="astructdlight__t_html_a2fe3d12b89d2273840d647e3c93c945a"><div class="ttname"><a href="structdlight__t.html#a2fe3d12b89d2273840d647e3c93c945a">dlight_t::corona</a></div><div class="ttdeci">vec_t corona</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00281">client.h:281</a></div></div>
<div class="ttc" id="astructdlight__t_html_a3721fc9bd1fcd9e1b04dfcb997657892"><div class="ttname"><a href="structdlight__t.html#a3721fc9bd1fcd9e1b04dfcb997657892">dlight_t::shadow</a></div><div class="ttdeci">int shadow</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00278">client.h:278</a></div></div>
<div class="ttc" id="astructdlight__t_html_a4cc64dc21f7ca9660cfd16456ab2dc17"><div class="ttname"><a href="structdlight__t.html#a4cc64dc21f7ca9660cfd16456ab2dc17">dlight_t::color</a></div><div class="ttdeci">vec3_t color</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00253">client.h:253</a></div></div>
<div class="ttc" id="astructdlight__t_html_a72f243f8c925ddbce2418a8a68a09aa8"><div class="ttname"><a href="structdlight__t.html#a72f243f8c925ddbce2418a8a68a09aa8">dlight_t::ambientscale</a></div><div class="ttdeci">vec_t ambientscale</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00287">client.h:287</a></div></div>
<div class="ttc" id="astructdlight__t_html_a8e74e7af17eed7d4eb98120bff101ce8"><div class="ttname"><a href="structdlight__t.html#a8e74e7af17eed7d4eb98120bff101ce8">dlight_t::cubemapname</a></div><div class="ttdeci">char cubemapname[64]</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00256">client.h:256</a></div></div>
<div class="ttc" id="astructdlight__t_html_ab088c1ee9aa47945db3138ab995be194"><div class="ttname"><a href="structdlight__t.html#ab088c1ee9aa47945db3138ab995be194">dlight_t::diffusescale</a></div><div class="ttdeci">vec_t diffusescale</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00290">client.h:290</a></div></div>
<div class="ttc" id="astructdlight__t_html_aba1c14226d0eda5524cd4bce8fa08ba6"><div class="ttname"><a href="structdlight__t.html#aba1c14226d0eda5524cd4bce8fa08ba6">dlight_t::specularscale</a></div><div class="ttdeci">vec_t specularscale</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00293">client.h:293</a></div></div>
<div class="ttc" id="astructdlight__t_html_ae766a5758dec2bff346406b341a35870"><div class="ttname"><a href="structdlight__t.html#ae766a5758dec2bff346406b341a35870">dlight_t::radius</a></div><div class="ttdeci">vec_t radius</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00262">client.h:262</a></div></div>
<div class="ttc" id="astructdlight__t_html_af5dad81679e7b427bf826b2bfddf182b"><div class="ttname"><a href="structdlight__t.html#af5dad81679e7b427bf826b2bfddf182b">dlight_t::selected</a></div><div class="ttdeci">int selected</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00259">client.h:259</a></div></div>
<div class="ttc" id="astructentity__render__t_html"><div class="ttname"><a href="structentity__render__t.html">entity_render_t</a></div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00326">client.h:327</a></div></div>
<div class="ttc" id="astructentity__render__t_html_a2a953613d4d38178f6b4b662aace412d"><div class="ttname"><a href="structentity__render__t.html#a2a953613d4d38178f6b4b662aace412d">entity_render_t::inversematrix</a></div><div class="ttdeci">matrix4x4_t inversematrix</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00335">client.h:335</a></div></div>
<div class="ttc" id="astructentity__render__t_html_a35e44e80da95a4aad81a3fcec2aa3fab"><div class="ttname"><a href="structentity__render__t.html#a35e44e80da95a4aad81a3fcec2aa3fab">entity_render_t::matrix</a></div><div class="ttdeci">matrix4x4_t matrix</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00333">client.h:333</a></div></div>
<div class="ttc" id="astructentity__render__t_html_a44bb671562e49c023bd13ebcae8d29a1"><div class="ttname"><a href="structentity__render__t.html#a44bb671562e49c023bd13ebcae8d29a1">entity_render_t::mins</a></div><div class="ttdeci">vec3_t mins</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00372">client.h:372</a></div></div>
<div class="ttc" id="astructentity__render__t_html_a6024a3b96bed16ae71b47de5848060b1"><div class="ttname"><a href="structentity__render__t.html#a6024a3b96bed16ae71b47de5848060b1">entity_render_t::model</a></div><div class="ttdeci">model_t * model</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00344">client.h:344</a></div></div>
<div class="ttc" id="astructentity__render__t_html_a771a7b129ac67f0139f5b4920a722360"><div class="ttname"><a href="structentity__render__t.html#a771a7b129ac67f0139f5b4920a722360">entity_render_t::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00357">client.h:357</a></div></div>
<div class="ttc" id="astructentity__render__t_html_a8bf8aaa8b5264bb089f446bf09c75338"><div class="ttname"><a href="structentity__render__t.html#a8bf8aaa8b5264bb089f446bf09c75338">entity_render_t::scale</a></div><div class="ttdeci">float scale</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00339">client.h:339</a></div></div>
<div class="ttc" id="astructentity__render__t_html_af3bede297910947fd1b34ab74bbc690a"><div class="ttname"><a href="structentity__render__t.html#af3bede297910947fd1b34ab74bbc690a">entity_render_t::maxs</a></div><div class="ttdeci">vec3_t maxs</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00372">client.h:372</a></div></div>
<div class="ttc" id="astructhost__static__t_html_ac38d937c03a5f5f973a77641c0ae1280"><div class="ttname"><a href="structhost__static__t.html#ac38d937c03a5f5f973a77641c0ae1280">host_static_t::realtime</a></div><div class="ttdeci">double realtime</div><div class="ttdef"><b>Definition</b> <a href="host_8h_source.html#l00037">host.h:37</a></div></div>
<div class="ttc" id="astructmatrix4x4__t_html"><div class="ttname"><a href="structmatrix4x4__t.html">matrix4x4_t</a></div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8h_source.html#l00009">matrixlib.h:10</a></div></div>
<div class="ttc" id="astructmatrix4x4__t_html_a87e53ca6a2e9235ffd666f220abd9b87"><div class="ttname"><a href="structmatrix4x4__t.html#a87e53ca6a2e9235ffd666f220abd9b87">matrix4x4_t::m</a></div><div class="ttdeci">vec_t m[4][4]</div><div class="ttdef"><b>Definition</b> <a href="matrixlib_8h_source.html#l00011">matrixlib.h:11</a></div></div>
<div class="ttc" id="astructmemexpandablearray__t_html"><div class="ttname"><a href="structmemexpandablearray__t.html">memexpandablearray_t</a></div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00128">zone.h:129</a></div></div>
<div class="ttc" id="astructmod__alloclightmap__state__t_html"><div class="ttname"><a href="structmod__alloclightmap__state__t.html">mod_alloclightmap_state_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00673">model_shared.h:674</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_a03c8c1a0218fe2b32ea5d039ad0e1932"><div class="ttname"><a href="structmodel__brush__t.html#a03c8c1a0218fe2b32ea5d039ad0e1932">model_brush_t::BoxTouchingVisibleLeafs</a></div><div class="ttdeci">int(* BoxTouchingVisibleLeafs)(struct model_s *model, const unsigned char *visibleleafs, const vec3_t mins, const vec3_t maxs)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00336">model_brush.h:336</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_a1bb35c00721be56c390df0b877791cac"><div class="ttname"><a href="structmodel__brush__t.html#a1bb35c00721be56c390df0b877791cac">model_brush_t::submodel</a></div><div class="ttdeci">int submodel</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00271">model_brush.h:271</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_a7dcb6ad152fbb5148b1830e79839b197"><div class="ttname"><a href="structmodel__brush__t.html#a7dcb6ad152fbb5148b1830e79839b197">model_brush_t::LightPoint</a></div><div class="ttdeci">void(* LightPoint)(struct model_s *model, const vec3_t p, vec3_t ambientcolor, vec3_t diffusecolor, vec3_t diffusenormal)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00338">model_brush.h:338</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_ad2ccc84f01460e7bde735898ed077860"><div class="ttname"><a href="structmodel__brush__t.html#ad2ccc84f01460e7bde735898ed077860">model_brush_t::num_leafs</a></div><div class="ttdeci">int num_leafs</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00288">model_brush.h:288</a></div></div>
<div class="ttc" id="astructmodel__brush__t_html_ad61f56d9901c3877d3cc297d41f6118b"><div class="ttname"><a href="structmodel__brush__t.html#ad61f56d9901c3877d3cc297d41f6118b">model_brush_t::BoxTouchingLeafPVS</a></div><div class="ttdeci">int(* BoxTouchingLeafPVS)(struct model_s *model, const unsigned char *pvs, const vec3_t mins, const vec3_t maxs)</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00335">model_brush.h:335</a></div></div>
<div class="ttc" id="astructmodel__t_html"><div class="ttname"><a href="structmodel__t.html">model_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00428">model_shared.h:429</a></div></div>
<div class="ttc" id="astructmodel__t_html_a04530a5055aa78902f674f53fa284a37"><div class="ttname"><a href="structmodel__t.html#a04530a5055aa78902f674f53fa284a37">model_t::brush</a></div><div class="ttdeci">model_brush_t brush</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00541">model_shared.h:541</a></div></div>
<div class="ttc" id="astructmodel__t_html_a1c55fbbffd372358dd464cbdad16db70"><div class="ttname"><a href="structmodel__t.html#a1c55fbbffd372358dd464cbdad16db70">model_t::surfmesh</a></div><div class="ttdeci">surfmesh_t surfmesh</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00503">model_shared.h:503</a></div></div>
<div class="ttc" id="astructmodel__t_html_a2fd867d2779bb6e6b6f7348fc47c5948"><div class="ttname"><a href="structmodel__t.html#a2fd867d2779bb6e6b6f7348fc47c5948">model_t::lit</a></div><div class="ttdeci">qbool lit</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00548">model_shared.h:548</a></div></div>
<div class="ttc" id="astructmodel__t_html_a37ed77c0d67434b15280684a8ba42814"><div class="ttname"><a href="structmodel__t.html#a37ed77c0d67434b15280684a8ba42814">model_t::modelsurfaces_sorted</a></div><div class="ttdeci">int * modelsurfaces_sorted</div><div class="ttdoc">surface indices of model in an optimal draw order (submodelindex -&gt; texture -&gt; lightmap -&gt; index)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00470">model_shared.h:470</a></div></div>
<div class="ttc" id="astructmodel__t_html_a3cf3f78e305583268585ef7bde7aaa16"><div class="ttname"><a href="structmodel__t.html#a3cf3f78e305583268585ef7bde7aaa16">model_t::submodelsurfaces_end</a></div><div class="ttdeci">int submodelsurfaces_end</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00468">model_shared.h:468</a></div></div>
<div class="ttc" id="astructmodel__t_html_a438c22283046e832aba6c3a7b1a92feb"><div class="ttname"><a href="structmodel__t.html#a438c22283046e832aba6c3a7b1a92feb">model_t::data_surfaces</a></div><div class="ttdeci">msurface_t * data_surfaces</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00499">model_shared.h:499</a></div></div>
<div class="ttc" id="astructmodel__t_html_a4f2bc211fd845ff46f40e2a8c098b7ad"><div class="ttname"><a href="structmodel__t.html#a4f2bc211fd845ff46f40e2a8c098b7ad">model_t::submodelsurfaces_start</a></div><div class="ttdeci">int submodelsurfaces_start</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00467">model_shared.h:467</a></div></div>
<div class="ttc" id="astructmodel__t_html_a5a5b038598ccef5f670521d169edb025"><div class="ttname"><a href="structmodel__t.html#a5a5b038598ccef5f670521d169edb025">model_t::DrawPrepass</a></div><div class="ttdeci">void(* DrawPrepass)(struct entity_render_s *ent)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00519">model_shared.h:519</a></div></div>
<div class="ttc" id="astructmodel__t_html_a64d99f5cddde13a76e3cf4629b818d8e"><div class="ttname"><a href="structmodel__t.html#a64d99f5cddde13a76e3cf4629b818d8e">model_t::normalmaxs</a></div><div class="ttdeci">vec3_t normalmaxs</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00453">model_shared.h:453</a></div></div>
<div class="ttc" id="astructmodel__t_html_a71121e7ef28a949af258f4611ce21e9c"><div class="ttname"><a href="structmodel__t.html#a71121e7ef28a949af258f4611ce21e9c">model_t::DrawShadowMap</a></div><div class="ttdeci">void(* DrawShadowMap)(int side, struct entity_render_s *ent, const vec3_t relativelightorigin, const vec3_t relativelightdirection, float lightradius, int numsurfaces, const int *surfacelist, const unsigned char *surfacesides, const vec3_t lightmins, const vec3_t lightmaxs)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00523">model_shared.h:523</a></div></div>
<div class="ttc" id="astructmodel__t_html_a7a0081b6e77854bd75ae206afba89148"><div class="ttname"><a href="structmodel__t.html#a7a0081b6e77854bd75ae206afba89148">model_t::GetLightInfo</a></div><div class="ttdeci">void(* GetLightInfo)(struct entity_render_s *ent, vec3_t relativelightorigin, float lightradius, vec3_t outmins, vec3_t outmaxs, int *outleaflist, unsigned char *outleafpvs, int *outnumleafspointer, int *outsurfacelist, unsigned char *outsurfacepvs, int *outnumsurfacespointer, unsigned char *outshadowtrispvs, unsigned char *outlighttrispvs, unsigned char *visitingleafpvs, int numfrustumplanes, const mplane_t *frustumplanes, qbool noocclusion)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00525">model_shared.h:525</a></div></div>
<div class="ttc" id="astructmodel__t_html_aaba719ee8f91d844c266a62e4661aad9"><div class="ttname"><a href="structmodel__t.html#aaba719ee8f91d844c266a62e4661aad9">model_t::CompileShadowMap</a></div><div class="ttdeci">void(* CompileShadowMap)(struct entity_render_s *ent, vec3_t relativelightorigin, vec3_t relativelightdirection, float lightradius, int numsurfaces, const int *surfacelist)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00521">model_shared.h:521</a></div></div>
<div class="ttc" id="astructmodel__t_html_ab1e3cb6ca3cb7d53debac5661d033b1f"><div class="ttname"><a href="structmodel__t.html#ab1e3cb6ca3cb7d53debac5661d033b1f">model_t::normalmins</a></div><div class="ttdeci">vec3_t normalmins</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00453">model_shared.h:453</a></div></div>
<div class="ttc" id="astructmodel__t_html_ab77f5d2c5064c2e726a590bcdc440ccf"><div class="ttname"><a href="structmodel__t.html#ab77f5d2c5064c2e726a590bcdc440ccf">model_t::num_surfaces</a></div><div class="ttdeci">int num_surfaces</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00497">model_shared.h:497</a></div></div>
<div class="ttc" id="astructmodel__t_html_af206eaa0040c5a5e297fa1c0191b22dd"><div class="ttname"><a href="structmodel__t.html#af206eaa0040c5a5e297fa1c0191b22dd">model_t::DrawLight</a></div><div class="ttdeci">void(* DrawLight)(struct entity_render_s *ent, int numsurfaces, const int *surfacelist, const unsigned char *trispvs)</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00527">model_shared.h:527</a></div></div>
<div class="ttc" id="astructmplane__t_html"><div class="ttname"><a href="structmplane__t.html">mplane_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00053">model_brush.h:54</a></div></div>
<div class="ttc" id="astructmplane__t_html_a3f00ad54cea46a900371a541456b210e"><div class="ttname"><a href="structmplane__t.html#a3f00ad54cea46a900371a541456b210e">mplane_t::normal</a></div><div class="ttdeci">vec3_t normal</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00059">model_brush.h:59</a></div></div>
<div class="ttc" id="astructmplane__t_html_a72369d2eb517748a74711956e158ea91"><div class="ttname"><a href="structmplane__t.html#a72369d2eb517748a74711956e158ea91">mplane_t::dist</a></div><div class="ttdeci">vec_t dist</div><div class="ttdef"><b>Definition</b> <a href="model__brush_8h_source.html#l00060">model_brush.h:60</a></div></div>
<div class="ttc" id="astructmsurface__t_html"><div class="ttname"><a href="structmsurface__t.html">msurface_t</a></div><div class="ttdoc">describes the textures to use on a range of triangles in the model, and mins/maxs (AABB) for culling.</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00377">model_shared.h:378</a></div></div>
<div class="ttc" id="astructr__framebufferstate__t_html_a43e7d7c5065855167a45d14f3ec4a89e"><div class="ttname"><a href="structr__framebufferstate__t.html#a43e7d7c5065855167a45d14f3ec4a89e">r_framebufferstate_t::usedepthtextures</a></div><div class="ttdeci">qbool usedepthtextures</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00906">render.h:906</a></div></div>
<div class="ttc" id="astructr__framebufferstate__t_html_a7bb7258ead2e059a68d6cb6109e8c2e4"><div class="ttname"><a href="structr__framebufferstate__t.html#a7bb7258ead2e059a68d6cb6109e8c2e4">r_framebufferstate_t::water</a></div><div class="ttdeci">r_waterstate_t water</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00903">render.h:903</a></div></div>
<div class="ttc" id="astructr__framebufferstate__t_html_ac83e72c3e227b127efcf573fc2e3aba9"><div class="ttname"><a href="structr__framebufferstate__t.html#ac83e72c3e227b127efcf573fc2e3aba9">r_framebufferstate_t::screentexturewidth</a></div><div class="ttdeci">int screentexturewidth</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00889">render.h:889</a></div></div>
<div class="ttc" id="astructr__framebufferstate__t_html_af69aa65b1f80238f380733bafd91cf24"><div class="ttname"><a href="structr__framebufferstate__t.html#af69aa65b1f80238f380733bafd91cf24">r_framebufferstate_t::screentextureheight</a></div><div class="ttdeci">int screentextureheight</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00889">render.h:889</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_a0d2e420f14635b0aff07275fa6b74d82"><div class="ttname"><a href="structr__refdef__scene__t.html#a0d2e420f14635b0aff07275fa6b74d82">r_refdef_scene_t::numlights</a></div><div class="ttdeci">int numlights</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00379">render.h:379</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_a4cb3e4b7d463102f104be9f3af762fc1"><div class="ttname"><a href="structr__refdef__scene__t.html#a4cb3e4b7d463102f104be9f3af762fc1">r_refdef_scene_t::lightmapintensity</a></div><div class="ttdeci">float lightmapintensity</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00392">render.h:392</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_a5e522da90373661c46825181a717d610"><div class="ttname"><a href="structr__refdef__scene__t.html#a5e522da90373661c46825181a717d610">r_refdef_scene_t::extraupdate</a></div><div class="ttdeci">qbool extraupdate</div><div class="ttdoc">whether to call S_ExtraUpdate during render to reduce sound chop</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00354">render.h:354</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_a660519b32b5ce0399970d9869890ab87"><div class="ttname"><a href="structr__refdef__scene__t.html#a660519b32b5ce0399970d9869890ab87">r_refdef_scene_t::rtlightstylevalue</a></div><div class="ttdeci">float rtlightstylevalue[MAX_LIGHTSTYLES]</div><div class="ttdoc">float fraction of base light value</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00382">render.h:382</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_a6e9b9caf2253fce60dcd0c86d1400c63"><div class="ttname"><a href="structr__refdef__scene__t.html#a6e9b9caf2253fce60dcd0c86d1400c63">r_refdef_scene_t::entities</a></div><div class="ttdeci">entity_render_t ** entities</div><div class="ttdoc">renderable entities (excluding world)</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00366">render.h:366</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_aa2dcfd41f0bab5977bed85951106fd29"><div class="ttname"><a href="structr__refdef__scene__t.html#aa2dcfd41f0bab5977bed85951106fd29">r_refdef_scene_t::worldmodel</a></div><div class="ttdeci">model_t * worldmodel</div><div class="ttdoc">same as worldentity-&gt;model</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00363">render.h:363</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_ab8c4efc627714dd8b1d5840851b45220"><div class="ttname"><a href="structr__refdef__scene__t.html#ab8c4efc627714dd8b1d5840851b45220">r_refdef_scene_t::numentities</a></div><div class="ttdeci">int numentities</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00367">render.h:367</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_abc931d4756002d9eac83fc0f292adc09"><div class="ttname"><a href="structr__refdef__scene__t.html#abc931d4756002d9eac83fc0f292adc09">r_refdef_scene_t::rtdlight</a></div><div class="ttdeci">qbool rtdlight</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00396">render.h:396</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_ac261c344d37b7155ff7421f98b48e36b"><div class="ttname"><a href="structr__refdef__scene__t.html#ac261c344d37b7155ff7421f98b48e36b">r_refdef_scene_t::rtworldshadows</a></div><div class="ttdeci">qbool rtworldshadows</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00395">render.h:395</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_ac37d87f99c54b619604ddbe0fddd3c94"><div class="ttname"><a href="structr__refdef__scene__t.html#ac37d87f99c54b619604ddbe0fddd3c94">r_refdef_scene_t::rtdlightshadows</a></div><div class="ttdeci">qbool rtdlightshadows</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00397">render.h:397</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_ac62427e93af8fe1079c18d69619fb699"><div class="ttname"><a href="structr__refdef__scene__t.html#ac62427e93af8fe1079c18d69619fb699">r_refdef_scene_t::lightstylevalue</a></div><div class="ttdeci">unsigned short lightstylevalue[MAX_LIGHTSTYLES]</div><div class="ttdoc">8.8 fraction of base light value</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00385">render.h:385</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_ad6fc2a07d8d706f5daf13c5849db84fc"><div class="ttname"><a href="structr__refdef__scene__t.html#ad6fc2a07d8d706f5daf13c5849db84fc">r_refdef_scene_t::rtworld</a></div><div class="ttdeci">qbool rtworld</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00394">render.h:394</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_ae4dfd0ad65bd2cecac4d12f329e331ca"><div class="ttname"><a href="structr__refdef__scene__t.html#ae4dfd0ad65bd2cecac4d12f329e331ca">r_refdef_scene_t::worldentity</a></div><div class="ttdeci">entity_render_t * worldentity</div><div class="ttdoc">the world</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00360">render.h:360</a></div></div>
<div class="ttc" id="astructr__refdef__scene__t_html_aec6438e3812387c92681237d33bfe46f"><div class="ttname"><a href="structr__refdef__scene__t.html#aec6438e3812387c92681237d33bfe46f">r_refdef_scene_t::lights</a></div><div class="ttdeci">rtlight_t * lights[MAX_DLIGHTS]</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00377">render.h:377</a></div></div>
<div class="ttc" id="astructr__refdef__t_html_a1fe645bfc26ff5aef11c6be3db359a11"><div class="ttname"><a href="structr__refdef__t.html#a1fe645bfc26ff5aef11c6be3db359a11">r_refdef_t::viewcache</a></div><div class="ttdeci">r_refdef_viewcache_t viewcache</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00412">render.h:412</a></div></div>
<div class="ttc" id="astructr__refdef__t_html_a59c35765795980fa3607ecbbff7f3f31"><div class="ttname"><a href="structr__refdef__t.html#a59c35765795980fa3607ecbbff7f3f31">r_refdef_t::polygonoffset</a></div><div class="ttdeci">float polygonoffset</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00464">render.h:464</a></div></div>
<div class="ttc" id="astructr__refdef__t_html_a7792d42f39399df17a1e5362c659cea2"><div class="ttname"><a href="structr__refdef__t.html#a7792d42f39399df17a1e5362c659cea2">r_refdef_t::view</a></div><div class="ttdeci">r_refdef_view_t view</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00411">render.h:411</a></div></div>
<div class="ttc" id="astructr__refdef__t_html_ac522677f57df403dc99a8c3880ac7d61"><div class="ttname"><a href="structr__refdef__t.html#ac522677f57df403dc99a8c3880ac7d61">r_refdef_t::farclip</a></div><div class="ttdeci">double farclip</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00418">render.h:418</a></div></div>
<div class="ttc" id="astructr__refdef__t_html_acb0c53994baa529557477269d81d5507"><div class="ttname"><a href="structr__refdef__t.html#acb0c53994baa529557477269d81d5507">r_refdef_t::stats</a></div><div class="ttdeci">int stats[r_stat_count]</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00471">render.h:471</a></div></div>
<div class="ttc" id="astructr__refdef__t_html_ad1fea7c0925ed7d0709c8d15409db6f8"><div class="ttname"><a href="structr__refdef__t.html#ad1fea7c0925ed7d0709c8d15409db6f8">r_refdef_t::scene</a></div><div class="ttdeci">r_refdef_scene_t scene</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00423">render.h:423</a></div></div>
<div class="ttc" id="astructr__refdef__t_html_ad3541c997b97332df8f4b39a5178aa09"><div class="ttname"><a href="structr__refdef__t.html#ad3541c997b97332df8f4b39a5178aa09">r_refdef_t::nearclip</a></div><div class="ttdeci">double nearclip</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00415">render.h:415</a></div></div>
<div class="ttc" id="astructr__refdef__t_html_ad9a34d0ef198367c33d316bba0c6d3b7"><div class="ttname"><a href="structr__refdef__t.html#ad9a34d0ef198367c33d316bba0c6d3b7">r_refdef_t::polygonfactor</a></div><div class="ttdeci">float polygonfactor</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00463">render.h:463</a></div></div>
<div class="ttc" id="astructr__refdef__view__t_html_a1e8124ff88085c5f0235fe55d7c874b5"><div class="ttname"><a href="structr__refdef__view__t.html#a1e8124ff88085c5f0235fe55d7c874b5">r_refdef_view_t::colorscale</a></div><div class="ttdeci">float colorscale</div><div class="ttdoc">global RGB color multiplier for rendering</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00302">render.h:302</a></div></div>
<div class="ttc" id="astructr__refdef__view__t_html_a2049dafdd8ddecb20619b9771392876e"><div class="ttname"><a href="structr__refdef__view__t.html#a2049dafdd8ddecb20619b9771392876e">r_refdef_view_t::showdebug</a></div><div class="ttdeci">qbool showdebug</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00314">render.h:314</a></div></div>
<div class="ttc" id="astructr__refdef__view__t_html_a3310bef30f5ee5f2e5504e6abbabc4f4"><div class="ttname"><a href="structr__refdef__view__t.html#a3310bef30f5ee5f2e5504e6abbabc4f4">r_refdef_view_t::right</a></div><div class="ttdeci">vec3_t right</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00270">render.h:270</a></div></div>
<div class="ttc" id="astructr__refdef__view__t_html_a482a3499822c3f36801b146269f2db2c"><div class="ttname"><a href="structr__refdef__view__t.html#a482a3499822c3f36801b146269f2db2c">r_refdef_view_t::cullface_back</a></div><div class="ttdeci">int cullface_back</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00318">render.h:318</a></div></div>
<div class="ttc" id="astructr__refdef__view__t_html_a7231a4f45a0c95a676aefaae30a2cb61"><div class="ttname"><a href="structr__refdef__view__t.html#a7231a4f45a0c95a676aefaae30a2cb61">r_refdef_view_t::origin</a></div><div class="ttdeci">vec3_t origin</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00267">render.h:267</a></div></div>
<div class="ttc" id="astructr__refdef__view__t_html_a7b16684d5900ba97b0545874a31df5fb"><div class="ttname"><a href="structr__refdef__view__t.html#a7b16684d5900ba97b0545874a31df5fb">r_refdef_view_t::useperspective</a></div><div class="ttdeci">int useperspective</div><div class="ttdoc">if turned off it renders an ortho view</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00280">render.h:280</a></div></div>
<div class="ttc" id="astructr__refdef__view__t_html_a87269e10a2b3ecce1e0d83986f2ebdac"><div class="ttname"><a href="structr__refdef__view__t.html#a87269e10a2b3ecce1e0d83986f2ebdac">r_refdef_view_t::frustum</a></div><div class="ttdeci">mplane_t frustum[6]</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00273">render.h:273</a></div></div>
<div class="ttc" id="astructr__refdef__view__t_html_aa0faec8a80ec82a314e5f234b1c933a6"><div class="ttname"><a href="structr__refdef__view__t.html#aa0faec8a80ec82a314e5f234b1c933a6">r_refdef_view_t::viewport</a></div><div class="ttdeci">r_viewport_t viewport</div><div class="ttdoc">note: if r_viewscale is used, the viewport.width and viewport.height may be less than width and heigh...</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00296">render.h:296</a></div></div>
<div class="ttc" id="astructr__refdef__view__t_html_ab7a5e64bc6069ece5f689252683d5e9b"><div class="ttname"><a href="structr__refdef__view__t.html#ab7a5e64bc6069ece5f689252683d5e9b">r_refdef_view_t::colormask</a></div><div class="ttdeci">int colormask[4]</div><div class="ttdoc">which color components to allow (for anaglyph glasses)</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00299">render.h:299</a></div></div>
<div class="ttc" id="astructr__refdef__view__t_html_aca6bf405fb02edf2857333ad5a939f59"><div class="ttname"><a href="structr__refdef__view__t.html#aca6bf405fb02edf2857333ad5a939f59">r_refdef_view_t::cullface_front</a></div><div class="ttdeci">int cullface_front</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00317">render.h:317</a></div></div>
<div class="ttc" id="astructr__refdef__view__t_html_ad4152067688a3e428ffeb16338def83f"><div class="ttname"><a href="structr__refdef__view__t.html#ad4152067688a3e428ffeb16338def83f">r_refdef_view_t::frustumcorner</a></div><div class="ttdeci">vec3_t frustumcorner[4]</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00278">render.h:278</a></div></div>
<div class="ttc" id="astructr__refdef__view__t_html_ae1bd25ebdf975e2daba47f7367d8323b"><div class="ttname"><a href="structr__refdef__view__t.html#ae1bd25ebdf975e2daba47f7367d8323b">r_refdef_view_t::up</a></div><div class="ttdeci">vec3_t up</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00271">render.h:271</a></div></div>
<div class="ttc" id="astructr__refdef__view__t_html_ae77b6ccbb4e40b1132239a12c91438f9"><div class="ttname"><a href="structr__refdef__view__t.html#ae77b6ccbb4e40b1132239a12c91438f9">r_refdef_view_t::forward</a></div><div class="ttdeci">vec3_t forward</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00268">render.h:268</a></div></div>
<div class="ttc" id="astructr__refdef__viewcache__t_html_a307e3b8919e542344422bf08579c7bfa"><div class="ttname"><a href="structr__refdef__viewcache__t.html#a307e3b8919e542344422bf08579c7bfa">r_refdef_viewcache_t::world_leafvisible</a></div><div class="ttdeci">unsigned char * world_leafvisible</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00343">render.h:343</a></div></div>
<div class="ttc" id="astructr__refdef__viewcache__t_html_abd40af0c9cb4c935c883e6135cd9d07d"><div class="ttname"><a href="structr__refdef__viewcache__t.html#abd40af0c9cb4c935c883e6135cd9d07d">r_refdef_viewcache_t::entityvisible</a></div><div class="ttdeci">unsigned char * entityvisible</div><div class="ttdoc">which entities are currently visible for this viewpoint (the used range is 0...r_refdef....</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00338">render.h:338</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__photon__path__t_html"><div class="ttname"><a href="structr__shadow__bouncegrid__photon__path__t.html">r_shadow_bouncegrid_photon_path_t</a></div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00070">r_shadow.h:71</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__photon__path__t_html_a09991f97df28c319435a858fdd6ab413"><div class="ttname"><a href="structr__shadow__bouncegrid__photon__path__t.html#a09991f97df28c319435a858fdd6ab413">r_shadow_bouncegrid_photon_path_t::color</a></div><div class="ttdeci">vec3_t color</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00074">r_shadow.h:74</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__photon__path__t_html_abd593ae4ee39b58e1a678fd522bc9dd8"><div class="ttname"><a href="structr__shadow__bouncegrid__photon__path__t.html#abd593ae4ee39b58e1a678fd522bc9dd8">r_shadow_bouncegrid_photon_path_t::start</a></div><div class="ttdeci">vec3_t start</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00072">r_shadow.h:72</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__photon__path__t_html_ac39875e3543070e359bb7de28bc3b713"><div class="ttname"><a href="structr__shadow__bouncegrid__photon__path__t.html#ac39875e3543070e359bb7de28bc3b713">r_shadow_bouncegrid_photon_path_t::end</a></div><div class="ttdeci">vec3_t end</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00073">r_shadow.h:73</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__photon__t_html"><div class="ttname"><a href="structr__shadow__bouncegrid__photon__t.html">r_shadow_bouncegrid_photon_t</a></div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00078">r_shadow.h:79</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__photon__t_html_a05571edab24da8207e4283a614e4e838"><div class="ttname"><a href="structr__shadow__bouncegrid__photon__t.html#a05571edab24da8207e4283a614e4e838">r_shadow_bouncegrid_photon_t::end</a></div><div class="ttdeci">vec3_t end</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00082">r_shadow.h:82</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__photon__t_html_a1e13b4d7780f918795fcef34a2c3b0e7"><div class="ttname"><a href="structr__shadow__bouncegrid__photon__t.html#a1e13b4d7780f918795fcef34a2c3b0e7">r_shadow_bouncegrid_photon_t::color</a></div><div class="ttdeci">float color[3]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00083">r_shadow.h:83</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__photon__t_html_a5e988471e4bdcfeb86b2dd0d87ee90d0"><div class="ttname"><a href="structr__shadow__bouncegrid__photon__t.html#a5e988471e4bdcfeb86b2dd0d87ee90d0">r_shadow_bouncegrid_photon_t::paths</a></div><div class="ttdeci">r_shadow_bouncegrid_photon_path_t paths[PHOTON_MAX_PATHS]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00089">r_shadow.h:89</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__photon__t_html_aa30adc25920a8d6a532d0aca3afdbc80"><div class="ttname"><a href="structr__shadow__bouncegrid__photon__t.html#aa30adc25920a8d6a532d0aca3afdbc80">r_shadow_bouncegrid_photon_t::start</a></div><div class="ttdeci">vec3_t start</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00081">r_shadow.h:81</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__photon__t_html_aae3b4c1ebab0d42c36562bff43664bec"><div class="ttname"><a href="structr__shadow__bouncegrid__photon__t.html#aae3b4c1ebab0d42c36562bff43664bec">r_shadow_bouncegrid_photon_t::startrefractiveindex</a></div><div class="ttdeci">float startrefractiveindex</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00085">r_shadow.h:85</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__photon__t_html_af71eecd31b7a6b25a935ea88e39c01f6"><div class="ttname"><a href="structr__shadow__bouncegrid__photon__t.html#af71eecd31b7a6b25a935ea88e39c01f6">r_shadow_bouncegrid_photon_t::numpaths</a></div><div class="ttdeci">int numpaths</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00088">r_shadow.h:88</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__photon__t_html_afda0df55b963c68e191aebd3bd734466"><div class="ttname"><a href="structr__shadow__bouncegrid__photon__t.html#afda0df55b963c68e191aebd3bd734466">r_shadow_bouncegrid_photon_t::bounceminimumintensity2</a></div><div class="ttdeci">float bounceminimumintensity2</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00084">r_shadow.h:84</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html">r_shadow_bouncegrid_settings_t</a></div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00043">r_shadow.h:44</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a199fb433d9cbe8e7bbe9f9fb78dcf7d2"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a199fb433d9cbe8e7bbe9f9fb78dcf7d2">r_shadow_bouncegrid_settings_t::directionalshading</a></div><div class="ttdeci">qbool directionalshading</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00046">r_shadow.h:46</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a21bf8c8e3f98bb0ba79f184fb2d2c12e"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a21bf8c8e3f98bb0ba79f184fb2d2c12e">r_shadow_bouncegrid_settings_t::normalizevectors</a></div><div class="ttdeci">qbool normalizevectors</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00049">r_shadow.h:49</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a29565246dc8e3108fa9f9825d3b57466"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a29565246dc8e3108fa9f9825d3b57466">r_shadow_bouncegrid_settings_t::bounceminimumintensity2</a></div><div class="ttdeci">float bounceminimumintensity2</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00063">r_shadow.h:63</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a3d4af418349fcebae46964f9963c2ac9"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a3d4af418349fcebae46964f9963c2ac9">r_shadow_bouncegrid_settings_t::spacing</a></div><div class="ttdeci">float spacing[3]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00060">r_shadow.h:60</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a45853ca9a1bfb1daf271e6e67c96f5a2"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a45853ca9a1bfb1daf271e6e67c96f5a2">r_shadow_bouncegrid_settings_t::floatcolors</a></div><div class="ttdeci">int floatcolors</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00050">r_shadow.h:50</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a557b9b58d79fcf90f89dd6e628000505"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a557b9b58d79fcf90f89dd6e628000505">r_shadow_bouncegrid_settings_t::rng_type</a></div><div class="ttdeci">int rng_type</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00061">r_shadow.h:61</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a5702438e73be1467f108b9e496ea6113"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a5702438e73be1467f108b9e496ea6113">r_shadow_bouncegrid_settings_t::maxbounce</a></div><div class="ttdeci">int maxbounce</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00054">r_shadow.h:54</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a67607d32867d1e30dabf30300545348e"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a67607d32867d1e30dabf30300545348e">r_shadow_bouncegrid_settings_t::energyperphoton</a></div><div class="ttdeci">float energyperphoton</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00059">r_shadow.h:59</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a6878511fe2646c944e266721092352dd"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a6878511fe2646c944e266721092352dd">r_shadow_bouncegrid_settings_t::blur</a></div><div class="ttdeci">qbool blur</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00048">r_shadow.h:48</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a72fe7e17dcb3ee2b40416366d245bad2"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a72fe7e17dcb3ee2b40416366d245bad2">r_shadow_bouncegrid_settings_t::dlightparticlemultiplier</a></div><div class="ttdeci">float dlightparticlemultiplier</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00051">r_shadow.h:51</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a7420ad1dbb6f581ce36460599c4732ca"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a7420ad1dbb6f581ce36460599c4732ca">r_shadow_bouncegrid_settings_t::lightradiusscale</a></div><div class="ttdeci">float lightradiusscale</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00053">r_shadow.h:53</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a813142ee855923b52968936abd4c1559"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a813142ee855923b52968936abd4c1559">r_shadow_bouncegrid_settings_t::particleintensity</a></div><div class="ttdeci">float particleintensity</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00057">r_shadow.h:57</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a84678707d62b536244f2ecc579e6cf1b"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a84678707d62b536244f2ecc579e6cf1b">r_shadow_bouncegrid_settings_t::includedirectlighting</a></div><div class="ttdeci">qbool includedirectlighting</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00047">r_shadow.h:47</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a8747973cb45c8fe9b496b43b7e087b34"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a8747973cb45c8fe9b496b43b7e087b34">r_shadow_bouncegrid_settings_t::hitmodels</a></div><div class="ttdeci">qbool hitmodels</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00052">r_shadow.h:52</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_a8d513a7e8aa112d3c13aff3b9c2e494c"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#a8d513a7e8aa112d3c13aff3b9c2e494c">r_shadow_bouncegrid_settings_t::staticmode</a></div><div class="ttdeci">qbool staticmode</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00045">r_shadow.h:45</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_ac297ceaa68f6a01dad6792ce83ed8968"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#ac297ceaa68f6a01dad6792ce83ed8968">r_shadow_bouncegrid_settings_t::particlebounceintensity</a></div><div class="ttdeci">float particlebounceintensity</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00056">r_shadow.h:56</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_ac4b95087fb9dd0229aef6517f29a1286"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#ac4b95087fb9dd0229aef6517f29a1286">r_shadow_bouncegrid_settings_t::maxphotons</a></div><div class="ttdeci">int maxphotons</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00058">r_shadow.h:58</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_ad756b38998171ce24997036307b95d4b"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#ad756b38998171ce24997036307b95d4b">r_shadow_bouncegrid_settings_t::lightpathsize</a></div><div class="ttdeci">float lightpathsize</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00055">r_shadow.h:55</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_adf0ef9fc9b1499f7bbb6c09b79d5e107"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#adf0ef9fc9b1499f7bbb6c09b79d5e107">r_shadow_bouncegrid_settings_t::subsamples</a></div><div class="ttdeci">int subsamples</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00064">r_shadow.h:64</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__settings__t_html_ae9f101140bddb1b46aa7621675818824"><div class="ttname"><a href="structr__shadow__bouncegrid__settings__t.html#ae9f101140bddb1b46aa7621675818824">r_shadow_bouncegrid_settings_t::rng_seed</a></div><div class="ttdeci">int rng_seed</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00062">r_shadow.h:62</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html">r_shadow_bouncegrid_state_t</a></div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00093">r_shadow.h:94</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a0b3c36a7a180aaa22c63a32977d365c7"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a0b3c36a7a180aaa22c63a32977d365c7">r_shadow_bouncegrid_state_t::size</a></div><div class="ttdeci">vec3_t size</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00113">r_shadow.h:113</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a16e391324a28bcb1fc08763122eb4349"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a16e391324a28bcb1fc08763122eb4349">r_shadow_bouncegrid_state_t::resolution</a></div><div class="ttdeci">int resolution[3]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00104">r_shadow.h:104</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a17f66a105879ac5abf878d9ec6ffadb0"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a17f66a105879ac5abf878d9ec6ffadb0">r_shadow_bouncegrid_state_t::maxs</a></div><div class="ttdeci">vec3_t maxs</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00112">r_shadow.h:112</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a1d2dad554d64fe89c965cea311414b51"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a1d2dad554d64fe89c965cea311414b51">r_shadow_bouncegrid_state_t::capable</a></div><div class="ttdeci">qbool capable</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00096">r_shadow.h:96</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a2494753cb5b6f582ea01eeb7581b9007"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a2494753cb5b6f582ea01eeb7581b9007">r_shadow_bouncegrid_state_t::enqueuephotons_task</a></div><div class="ttdeci">taskqueue_task_t enqueuephotons_task</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00128">r_shadow.h:128</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a26f1540c538f115e11043b6e05a8f540"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a26f1540c538f115e11043b6e05a8f540">r_shadow_bouncegrid_state_t::pixelbands</a></div><div class="ttdeci">int pixelbands</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00106">r_shadow.h:106</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a28178f6b78dc7dac499235f44acea3f8"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a28178f6b78dc7dac499235f44acea3f8">r_shadow_bouncegrid_state_t::mins</a></div><div class="ttdeci">vec3_t mins</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00111">r_shadow.h:111</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a2a1127f6d6a8017ef9f836a6c20749e1"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a2a1127f6d6a8017ef9f836a6c20749e1">r_shadow_bouncegrid_state_t::highpixels</a></div><div class="ttdeci">float * highpixels</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00117">r_shadow.h:117</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a42eda904d89aba6c648513454394944a"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a42eda904d89aba6c648513454394944a">r_shadow_bouncegrid_state_t::pixelsperband</a></div><div class="ttdeci">int pixelsperband</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00107">r_shadow.h:107</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a49e8545c0df81be7f4d06f06b4bf3777"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a49e8545c0df81be7f4d06f06b4bf3777">r_shadow_bouncegrid_state_t::highpixels_index</a></div><div class="ttdeci">int highpixels_index</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00116">r_shadow.h:116</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a513a8bcbc2369fbaf76f1ed6db270064"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a513a8bcbc2369fbaf76f1ed6db270064">r_shadow_bouncegrid_state_t::numpixels</a></div><div class="ttdeci">int numpixels</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00105">r_shadow.h:105</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a534c8d842134247332565592bba6be7a"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a534c8d842134247332565592bba6be7a">r_shadow_bouncegrid_state_t::enqueue_slices_task</a></div><div class="ttdeci">taskqueue_task_t enqueue_slices_task</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00131">r_shadow.h:131</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a6987ee55dc9d0685dacf0a70ef855efd"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a6987ee55dc9d0685dacf0a70ef855efd">r_shadow_bouncegrid_state_t::photons_done_task</a></div><div class="ttdeci">taskqueue_task_t photons_done_task</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00130">r_shadow.h:130</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a6a3baf0107986149aa2aecca4f18eae5"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a6a3baf0107986149aa2aecca4f18eae5">r_shadow_bouncegrid_state_t::slices_done_task</a></div><div class="ttdeci">taskqueue_task_t slices_done_task</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00133">r_shadow.h:133</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a6b14b6d8d898cec4fc16b67020812414"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a6b14b6d8d898cec4fc16b67020812414">r_shadow_bouncegrid_state_t::allowdirectionalshading</a></div><div class="ttdeci">qbool allowdirectionalshading</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00097">r_shadow.h:97</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a7e4e9f75b9619e00e9b290ff6c33f8ea"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a7e4e9f75b9619e00e9b290ff6c33f8ea">r_shadow_bouncegrid_state_t::photons_tasks</a></div><div class="ttdeci">taskqueue_task_t * photons_tasks</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00129">r_shadow.h:129</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a83026f8a045c783abf4bd2a10e1255a6"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a83026f8a045c783abf4bd2a10e1255a6">r_shadow_bouncegrid_state_t::u8pixels</a></div><div class="ttdeci">unsigned char * u8pixels</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00119">r_shadow.h:119</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a83cdb6ec9024bf830f01d09d9465124a"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a83cdb6ec9024bf830f01d09d9465124a">r_shadow_bouncegrid_state_t::bytesperband</a></div><div class="ttdeci">int bytesperband</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00108">r_shadow.h:108</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a8b67e9c1e43b650a0d46f9f9addcbba6"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a8b67e9c1e43b650a0d46f9f9addcbba6">r_shadow_bouncegrid_state_t::directional</a></div><div class="ttdeci">qbool directional</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00098">r_shadow.h:98</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a9239745a4812b4999787212e1b147163"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a9239745a4812b4999787212e1b147163">r_shadow_bouncegrid_state_t::settings</a></div><div class="ttdeci">r_shadow_bouncegrid_settings_t settings</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00095">r_shadow.h:95</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a9295daf41c7de4ed219bf71ab2946502"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a9295daf41c7de4ed219bf71ab2946502">r_shadow_bouncegrid_state_t::ispacing</a></div><div class="ttdeci">float ispacing[3]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00110">r_shadow.h:110</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_a945a52cdbccee0730a0dadd2424498d3"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#a945a52cdbccee0730a0dadd2424498d3">r_shadow_bouncegrid_state_t::lastupdatetime</a></div><div class="ttdeci">double lastupdatetime</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00103">r_shadow.h:103</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_aa1c90d5cebf0598c868db133746b1924"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#aa1c90d5cebf0598c868db133746b1924">r_shadow_bouncegrid_state_t::cleartex_task</a></div><div class="ttdeci">taskqueue_task_t cleartex_task</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00126">r_shadow.h:126</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_aa88f1872c4cfddb46de483f0eeb39f1d"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#aa88f1872c4cfddb46de483f0eeb39f1d">r_shadow_bouncegrid_state_t::fp16pixels</a></div><div class="ttdeci">unsigned short * fp16pixels</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00120">r_shadow.h:120</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_ab7132e4b1581f8b6d909662b7e5b0308"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#ab7132e4b1581f8b6d909662b7e5b0308">r_shadow_bouncegrid_state_t::slices_tasks</a></div><div class="ttdeci">taskqueue_task_t * slices_tasks</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00132">r_shadow.h:132</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_abff20fdcae2c335a310235f60e86197d"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#abff20fdcae2c335a310235f60e86197d">r_shadow_bouncegrid_state_t::spacing</a></div><div class="ttdeci">float spacing[3]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00109">r_shadow.h:109</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_ad2ea7273f11abfdc6b91ae64bfca6a52"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#ad2ea7273f11abfdc6b91ae64bfca6a52">r_shadow_bouncegrid_state_t::blurpixels</a></div><div class="ttdeci">float * blurpixels[2]</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00118">r_shadow.h:118</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_ad893c8dbd961ac662ee86363ae23b2d3"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#ad893c8dbd961ac662ee86363ae23b2d3">r_shadow_bouncegrid_state_t::blurpixels_task</a></div><div class="ttdeci">taskqueue_task_t blurpixels_task</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00134">r_shadow.h:134</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_adcd8cbf51a961fee119206a61479a320"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#adcd8cbf51a961fee119206a61479a320">r_shadow_bouncegrid_state_t::intensity</a></div><div class="ttdeci">vec_t intensity</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00102">r_shadow.h:102</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_ae4981b1554885bab7fd99847a44ecb23"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#ae4981b1554885bab7fd99847a44ecb23">r_shadow_bouncegrid_state_t::photons</a></div><div class="ttdeci">r_shadow_bouncegrid_photon_t * photons</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00123">r_shadow.h:123</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_aed7427c6db85135933b7f3d636a279a4"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#aed7427c6db85135933b7f3d636a279a4">r_shadow_bouncegrid_state_t::assignphotons_task</a></div><div class="ttdeci">taskqueue_task_t assignphotons_task</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00127">r_shadow.h:127</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_aeee3bca7fc4e2365e4f916ed115165a3"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#aeee3bca7fc4e2365e4f916ed115165a3">r_shadow_bouncegrid_state_t::numphotons</a></div><div class="ttdeci">int numphotons</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00122">r_shadow.h:122</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_af23bd533884cf387a5aac4b57d3fbbd7"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#af23bd533884cf387a5aac4b57d3fbbd7">r_shadow_bouncegrid_state_t::matrix</a></div><div class="ttdeci">matrix4x4_t matrix</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00101">r_shadow.h:101</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_af321cde76f0e6dd8daa85d0ffc2bd728"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#af321cde76f0e6dd8daa85d0ffc2bd728">r_shadow_bouncegrid_state_t::texture</a></div><div class="ttdeci">struct rtexture_s * texture</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00100">r_shadow.h:100</a></div></div>
<div class="ttc" id="astructr__shadow__bouncegrid__state__t_html_af6e42792358a36ee9d68ce5c5060e0fa"><div class="ttname"><a href="structr__shadow__bouncegrid__state__t.html#af6e42792358a36ee9d68ce5c5060e0fa">r_shadow_bouncegrid_state_t::createtexture</a></div><div class="ttdeci">qbool createtexture</div><div class="ttdef"><b>Definition</b> <a href="r__shadow_8h_source.html#l00099">r_shadow.h:99</a></div></div>
<div class="ttc" id="astructr__viewport__t_html"><div class="ttname"><a href="structr__viewport__t.html">r_viewport_t</a></div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00238">render.h:239</a></div></div>
<div class="ttc" id="astructr__viewport__t_html_a2c03a2d70555c2d93c2623dabd706a4d"><div class="ttname"><a href="structr__viewport__t.html#a2c03a2d70555c2d93c2623dabd706a4d">r_viewport_t::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00246">render.h:246</a></div></div>
<div class="ttc" id="astructr__viewport__t_html_a43bf621388acf637d4d3bbc2a2f2d1c0"><div class="ttname"><a href="structr__viewport__t.html#a43bf621388acf637d4d3bbc2a2f2d1c0">r_viewport_t::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00244">render.h:244</a></div></div>
<div class="ttc" id="astructr__viewport__t_html_a588496c0ad6b768495bee4c4d8f22979"><div class="ttname"><a href="structr__viewport__t.html#a588496c0ad6b768495bee4c4d8f22979">r_viewport_t::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00247">render.h:247</a></div></div>
<div class="ttc" id="astructr__viewport__t_html_a592300d55716a0e434c4e53f0d0a507d"><div class="ttname"><a href="structr__viewport__t.html#a592300d55716a0e434c4e53f0d0a507d">r_viewport_t::projectmatrix</a></div><div class="ttdeci">matrix4x4_t projectmatrix</div><div class="ttdoc">actual projection matrix (transforms from viewspace to screen)</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00242">render.h:242</a></div></div>
<div class="ttc" id="astructr__viewport__t_html_a6f1a80b8c8079cbf896e393bf1856147"><div class="ttname"><a href="structr__viewport__t.html#a6f1a80b8c8079cbf896e393bf1856147">r_viewport_t::viewmatrix</a></div><div class="ttdeci">matrix4x4_t viewmatrix</div><div class="ttdoc">actual matrix for rendering (transforms to viewspace)</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00241">render.h:241</a></div></div>
<div class="ttc" id="astructr__viewport__t_html_ab6e28cd0da86d0623897a480caf26aa8"><div class="ttname"><a href="structr__viewport__t.html#ab6e28cd0da86d0623897a480caf26aa8">r_viewport_t::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00243">render.h:243</a></div></div>
<div class="ttc" id="astructr__waterstate__t_html_a0f912ea33e125b99cfd8372d10ef4863"><div class="ttname"><a href="structr__waterstate__t.html#a0f912ea33e125b99cfd8372d10ef4863">r_waterstate_t::renderingscene</a></div><div class="ttdeci">qbool renderingscene</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00881">render.h:881</a></div></div>
<div class="ttc" id="astructrandomseed__t_html"><div class="ttname"><a href="structrandomseed__t.html">randomseed_t</a></div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00287">mathlib.h:288</a></div></div>
<div class="ttc" id="astructrsurfacestate__t_html_a21592e123d869e1f37e44d21be1863a4"><div class="ttname"><a href="structrsurfacestate__t.html#a21592e123d869e1f37e44d21be1863a4">rsurfacestate_t::rtlight</a></div><div class="ttdeci">const rtlight_t * rtlight</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00753">render.h:753</a></div></div>
<div class="ttc" id="astructrsurfacestate__t_html_a4078def0642eb8743b46ef5949e5c0e8"><div class="ttname"><a href="structrsurfacestate__t.html#a4078def0642eb8743b46ef5949e5c0e8">rsurfacestate_t::entitytolight</a></div><div class="ttdeci">matrix4x4_t entitytolight</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00759">render.h:759</a></div></div>
<div class="ttc" id="astructrsurfacestate__t_html_a4a767fb8bfbdd4b678f43f216a4c5f07"><div class="ttname"><a href="structrsurfacestate__t.html#a4a767fb8bfbdd4b678f43f216a4c5f07">rsurfacestate_t::entitytoattenuationz</a></div><div class="ttdeci">matrix4x4_t entitytoattenuationz</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00764">render.h:764</a></div></div>
<div class="ttc" id="astructrsurfacestate__t_html_a56b195e7a473f8b990268a1c669962f2"><div class="ttname"><a href="structrsurfacestate__t.html#a56b195e7a473f8b990268a1c669962f2">rsurfacestate_t::batchnumvertices</a></div><div class="ttdeci">int batchnumvertices</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00675">render.h:675</a></div></div>
<div class="ttc" id="astructrsurfacestate__t_html_a802a90bb31d5e1ba2ef6cbad52bb8c95"><div class="ttname"><a href="structrsurfacestate__t.html#a802a90bb31d5e1ba2ef6cbad52bb8c95">rsurfacestate_t::texture</a></div><div class="ttdeci">texture_t * texture</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00738">render.h:738</a></div></div>
<div class="ttc" id="astructrsurfacestate__t_html_a882f84c3c787f26a402cb48df0af7043"><div class="ttname"><a href="structrsurfacestate__t.html#a882f84c3c787f26a402cb48df0af7043">rsurfacestate_t::entity</a></div><div class="ttdeci">entity_render_t * entity</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00772">render.h:772</a></div></div>
<div class="ttc" id="astructrsurfacestate__t_html_a95dd0f0a018acf46efaa2cbed67d1553"><div class="ttname"><a href="structrsurfacestate__t.html#a95dd0f0a018acf46efaa2cbed67d1553">rsurfacestate_t::entitylightorigin</a></div><div class="ttdeci">vec3_t entitylightorigin</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00756">render.h:756</a></div></div>
<div class="ttc" id="astructrsurfacestate__t_html_aca7ab6778dd3874ae419ad80ff05e70d"><div class="ttname"><a href="structrsurfacestate__t.html#aca7ab6778dd3874ae419ad80ff05e70d">rsurfacestate_t::entitytoattenuationxyz</a></div><div class="ttdeci">matrix4x4_t entitytoattenuationxyz</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00762">render.h:762</a></div></div>
<div class="ttc" id="astructrsurfacestate__t_html_ad1645a9257b4f998f1b34ed4846d0e95"><div class="ttname"><a href="structrsurfacestate__t.html#ad1645a9257b4f998f1b34ed4846d0e95">rsurfacestate_t::batchvertex3f</a></div><div class="ttdeci">float * batchvertex3f</div><div class="ttdef"><b>Definition</b> <a href="render_8h_source.html#l00678">render.h:678</a></div></div>
<div class="ttc" id="astructrtexture__t_html"><div class="ttname"><a href="structrtexture__t.html">rtexture_t</a></div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00107">r_textures.h:108</a></div></div>
<div class="ttc" id="astructrtexturepool__t_html"><div class="ttname"><a href="structrtexturepool__t.html">rtexturepool_t</a></div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00119">r_textures.h:120</a></div></div>
<div class="ttc" id="astructrtlight__t_html"><div class="ttname"><a href="structrtlight__t.html">rtlight_t</a></div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00105">client.h:106</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a03ef425e5912ea3081d21e59478cd954"><div class="ttname"><a href="structrtlight__t.html#a03ef425e5912ea3081d21e59478cd954">rtlight_t::ambientscale</a></div><div class="ttdeci">vec_t ambientscale</div><div class="ttdoc">ambient intensity to render</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00129">client.h:129</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a048a9a61cd9f6dc84d8a4a14ce9b17aa"><div class="ttname"><a href="structrtlight__t.html#a048a9a61cd9f6dc84d8a4a14ce9b17aa">rtlight_t::currentcubemap</a></div><div class="ttdeci">rtexture_t * currentcubemap</div><div class="ttdoc">this is R_GetCubemap(rtlight-&gt;cubemapname)</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00154">client.h:154</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a152fd13cef8ce4d4c023b7186e858a8e"><div class="ttname"><a href="structrtlight__t.html#a152fd13cef8ce4d4c023b7186e858a8e">rtlight_t::currentcolor</a></div><div class="ttdeci">vec3_t currentcolor</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00148">client.h:148</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a198e5c2d343454e9a2526f2e2be5f669"><div class="ttname"><a href="structrtlight__t.html#a198e5c2d343454e9a2526f2e2be5f669">rtlight_t::cached_lightentities_noselfshadow</a></div><div class="ttdeci">struct entity_render_s ** cached_lightentities_noselfshadow</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00166">client.h:166</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a1b7caa4a8c1ab1b819c6eb978c746bd7"><div class="ttname"><a href="structrtlight__t.html#a1b7caa4a8c1ab1b819c6eb978c746bd7">rtlight_t::cached_cullmins</a></div><div class="ttdeci">vec3_t cached_cullmins</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00173">client.h:173</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a1b9ae30e140634dfb0f1543ca4f5cf4c"><div class="ttname"><a href="structrtlight__t.html#a1b9ae30e140634dfb0f1543ca4f5cf4c">rtlight_t::corona_visibility</a></div><div class="ttdeci">float corona_visibility</div><div class="ttdoc">used by corona updates, due to occlusion query</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00150">client.h:150</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a1ba178cb4540e85311afb777cff67eed"><div class="ttname"><a href="structrtlight__t.html#a1ba178cb4540e85311afb777cff67eed">rtlight_t::static_shadowtrispvs</a></div><div class="ttdeci">unsigned char * static_shadowtrispvs</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00209">client.h:209</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a241dacf73c783ce200946897b338ca04"><div class="ttname"><a href="structrtlight__t.html#a241dacf73c783ce200946897b338ca04">rtlight_t::shadowmapatlassidesize</a></div><div class="ttdeci">int shadowmapatlassidesize</div><div class="ttdoc">size of one side of this light in the shadowmap atlas (for omnidirectional shadowmaps this is the min...</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00191">client.h:191</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a24a17e99722f1493e45d4a240584a80c"><div class="ttname"><a href="structrtlight__t.html#a24a17e99722f1493e45d4a240584a80c">rtlight_t::shadow</a></div><div class="ttdeci">int shadow</div><div class="ttdoc">whether light should render shadows (see castshadows for whether it actually does this frame)</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00123">client.h:123</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a292c8a191142204ba5103e7ff65d126c"><div class="ttname"><a href="structrtlight__t.html#a292c8a191142204ba5103e7ff65d126c">rtlight_t::static_shadowmap_receivers</a></div><div class="ttdeci">int static_shadowmap_receivers</div><div class="ttdoc">masks of all shadowmap sides that have any potential static receivers or casters</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00216">client.h:216</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a3288a752fb67a0bb1b531a3230b9cb60"><div class="ttname"><a href="structrtlight__t.html#a3288a752fb67a0bb1b531a3230b9cb60">rtlight_t::cached_numlightentities</a></div><div class="ttdeci">int cached_numlightentities</div><div class="ttdoc">these fields are set by R_Shadow_PrepareLight for later drawing</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00160">client.h:160</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a33614e6f1e8d62a71d79e57a9b3cf80e"><div class="ttname"><a href="structrtlight__t.html#a33614e6f1e8d62a71d79e57a9b3cf80e">rtlight_t::bouncegrid_traces</a></div><div class="ttdeci">int bouncegrid_traces</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00228">client.h:228</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a3803b95ad10433c09d2974d5b58479f6"><div class="ttname"><a href="structrtlight__t.html#a3803b95ad10433c09d2974d5b58479f6">rtlight_t::static_leafpvs</a></div><div class="ttdeci">unsigned char * static_leafpvs</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00198">client.h:198</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a478dcfe9a294410ade3e764a7905d597"><div class="ttname"><a href="structrtlight__t.html#a478dcfe9a294410ade3e764a7905d597">rtlight_t::color</a></div><div class="ttdeci">vec3_t color</div><div class="ttdoc">typically 1 1 1, can be lower (dim) or higher (overbright)</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00115">client.h:115</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a48f75788286c6cc3afaf9b358836f60a"><div class="ttname"><a href="structrtlight__t.html#a48f75788286c6cc3afaf9b358836f60a">rtlight_t::static_shadowmap_casters</a></div><div class="ttdeci">int static_shadowmap_casters</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00217">client.h:217</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a51044efd43b63e9d1ae4cac917a88f36"><div class="ttname"><a href="structrtlight__t.html#a51044efd43b63e9d1ae4cac917a88f36">rtlight_t::trace_timer</a></div><div class="ttdeci">double trace_timer</div><div class="ttdoc">when r_shadow_culllights_trace is set, this is refreshed by each successful trace.</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00144">client.h:144</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a598222b04c5a637ad2a8dff2acb33806"><div class="ttname"><a href="structrtlight__t.html#a598222b04c5a637ad2a8dff2acb33806">rtlight_t::cached_shadowtrispvs</a></div><div class="ttdeci">unsigned char * cached_shadowtrispvs</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00169">client.h:169</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a613df3791630f957d8826553a01f9a83"><div class="ttname"><a href="structrtlight__t.html#a613df3791630f957d8826553a01f9a83">rtlight_t::corona</a></div><div class="ttdeci">vec_t corona</div><div class="ttdoc">intensity of corona to render</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00125">client.h:125</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a6855ee98352b318752d7700e87015c9f"><div class="ttname"><a href="structrtlight__t.html#a6855ee98352b318752d7700e87015c9f">rtlight_t::static_numleafpvsbytes</a></div><div class="ttdeci">int static_numleafpvsbytes</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00196">client.h:196</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a69efc0c4f5d373479bb9487d6bec228f"><div class="ttname"><a href="structrtlight__t.html#a69efc0c4f5d373479bb9487d6bec228f">rtlight_t::specularscale</a></div><div class="ttdeci">vec_t specularscale</div><div class="ttdoc">specular intensity to render</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00133">client.h:133</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a6f77db5ffb8d85d3cef6e9e77c7533a9"><div class="ttname"><a href="structrtlight__t.html#a6f77db5ffb8d85d3cef6e9e77c7533a9">rtlight_t::corona_queryindex_visiblepixels</a></div><div class="ttdeci">unsigned int corona_queryindex_visiblepixels</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00151">client.h:151</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a70f4709295c5b83a5ed0c472f7b7a24d"><div class="ttname"><a href="structrtlight__t.html#a70f4709295c5b83a5ed0c472f7b7a24d">rtlight_t::cached_numlightentities_noselfshadow</a></div><div class="ttdeci">int cached_numlightentities_noselfshadow</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00161">client.h:161</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a7482741f239f3f5c6aa766a9080ed00c"><div class="ttname"><a href="structrtlight__t.html#a7482741f239f3f5c6aa766a9080ed00c">rtlight_t::cullmins</a></div><div class="ttdeci">vec3_t cullmins</div><div class="ttdoc">culling</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00141">client.h:141</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a78fc39a7fe3cda236c6209eebcde22c9"><div class="ttname"><a href="structrtlight__t.html#a78fc39a7fe3cda236c6209eebcde22c9">rtlight_t::flags</a></div><div class="ttdeci">int flags</div><div class="ttdoc">LIGHTFLAG_* flags.</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00135">client.h:135</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a7be646e4e4d31db0c4e8dedaefdf5064"><div class="ttname"><a href="structrtlight__t.html#a7be646e4e4d31db0c4e8dedaefdf5064">rtlight_t::cached_frustumplanes</a></div><div class="ttdeci">mplane_t cached_frustumplanes[5]</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00179">client.h:179</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a7c0681e500106dd86254191a2605b83e"><div class="ttname"><a href="structrtlight__t.html#a7c0681e500106dd86254191a2605b83e">rtlight_t::compiled</a></div><div class="ttdeci">int compiled</div><div class="ttdoc">true if this is a compiled world light, cleared if the light changes</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00185">client.h:185</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a843540e766395ab0cf86fdb2976d3016"><div class="ttname"><a href="structrtlight__t.html#a843540e766395ab0cf86fdb2976d3016">rtlight_t::static_lighttrispvs</a></div><div class="ttdeci">unsigned char * static_lighttrispvs</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00214">client.h:214</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a853096703e9ec8500de7c912cba40084"><div class="ttname"><a href="structrtlight__t.html#a853096703e9ec8500de7c912cba40084">rtlight_t::cached_numshadowentities</a></div><div class="ttdeci">int cached_numshadowentities</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00162">client.h:162</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a86717e6c13a6c77eb41f0f0dd6d2fca6"><div class="ttname"><a href="structrtlight__t.html#a86717e6c13a6c77eb41f0f0dd6d2fca6">rtlight_t::style</a></div><div class="ttdeci">int style</div><div class="ttdoc">light style to monitor for brightness</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00121">client.h:121</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a96ebca5b533ab334f4a061fb1acfdd5b"><div class="ttname"><a href="structrtlight__t.html#a96ebca5b533ab334f4a061fb1acfdd5b">rtlight_t::draw</a></div><div class="ttdeci">qbool draw</div><div class="ttdoc">set by R_Shadow_PrepareLight to decide whether R_Shadow_DrawLight should draw it</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00156">client.h:156</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a98ea18bbb779ac1aa193be665e3f3142"><div class="ttname"><a href="structrtlight__t.html#a98ea18bbb779ac1aa193be665e3f3142">rtlight_t::static_meshchain_shadow_shadowmap</a></div><div class="ttdeci">shadowmesh_t * static_meshchain_shadow_shadowmap</div><div class="ttdoc">optimized and culled mesh to render for world entity shadows</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00193">client.h:193</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a990cb8cb7ce0d370cf1d14281b1b3360"><div class="ttname"><a href="structrtlight__t.html#a990cb8cb7ce0d370cf1d14281b1b3360">rtlight_t::cached_numfrustumplanes</a></div><div class="ttdeci">int cached_numfrustumplanes</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00178">client.h:178</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a9cc606ff4074b0bf4141c1d9f15d02ab"><div class="ttname"><a href="structrtlight__t.html#a9cc606ff4074b0bf4141c1d9f15d02ab">rtlight_t::shadoworigin</a></div><div class="ttdeci">vec3_t shadoworigin</div><div class="ttdoc">used only for casting shadows</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00139">client.h:139</a></div></div>
<div class="ttc" id="astructrtlight__t_html_a9e0c20f5fffcd612cff745e2bd7a8fa7"><div class="ttname"><a href="structrtlight__t.html#a9e0c20f5fffcd612cff745e2bd7a8fa7">rtlight_t::bouncegrid_effectiveradius</a></div><div class="ttdeci">float bouncegrid_effectiveradius</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00229">client.h:229</a></div></div>
<div class="ttc" id="astructrtlight__t_html_aa2160b1bf94f48ab6fad8b05a23f9ad4"><div class="ttname"><a href="structrtlight__t.html#aa2160b1bf94f48ab6fad8b05a23f9ad4">rtlight_t::isstatic</a></div><div class="ttdeci">int isstatic</div><div class="ttdoc">static light info true if this light should be compiled as a static light</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00183">client.h:183</a></div></div>
<div class="ttc" id="astructrtlight__t_html_aa7c4f77c4ff139744687e4e97370207c"><div class="ttname"><a href="structrtlight__t.html#aa7c4f77c4ff139744687e4e97370207c">rtlight_t::static_numlighttrispvsbytes</a></div><div class="ttdeci">int static_numlighttrispvsbytes</div><div class="ttdoc">this allows the lighting batch code to skip backfaces andother culled triangles not relevant for ligh...</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00213">client.h:213</a></div></div>
<div class="ttc" id="astructrtlight__t_html_aa823bfc56c4908849e655db66dbdab89"><div class="ttname"><a href="structrtlight__t.html#aa823bfc56c4908849e655db66dbdab89">rtlight_t::coronasizescale</a></div><div class="ttdeci">vec_t coronasizescale</div><div class="ttdoc">radius scale of corona to render (1.0 means same as light radius)</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00127">client.h:127</a></div></div>
<div class="ttc" id="astructrtlight__t_html_aaf33c55cde8363f4070be2acb1a55e1f"><div class="ttname"><a href="structrtlight__t.html#aaf33c55cde8363f4070be2acb1a55e1f">rtlight_t::static_leaflist</a></div><div class="ttdeci">int * static_leaflist</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00197">client.h:197</a></div></div>
<div class="ttc" id="astructrtlight__t_html_aafd3538635e6fe28af39579aee2ac8d1"><div class="ttname"><a href="structrtlight__t.html#aafd3538635e6fe28af39579aee2ac8d1">rtlight_t::cubemapname</a></div><div class="ttdeci">char cubemapname[64]</div><div class="ttdoc">light filter</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00119">client.h:119</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ab05c3b11158c2d4cb373e8e07c17cce6"><div class="ttname"><a href="structrtlight__t.html#ab05c3b11158c2d4cb373e8e07c17cce6">rtlight_t::static_numsurfaces</a></div><div class="ttdeci">int static_numsurfaces</div><div class="ttdoc">surfaces seen by light</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00200">client.h:200</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ab3450b2ecfa6eab9b7dbb12105dc370e"><div class="ttname"><a href="structrtlight__t.html#ab3450b2ecfa6eab9b7dbb12105dc370e">rtlight_t::shadowmapsidesize</a></div><div class="ttdeci">int shadowmapsidesize</div><div class="ttdoc">the size that this light should have (assuming no scene LOD kicking in to reduce it)</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00187">client.h:187</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ab89a43403b944e77e37a1e7433472964"><div class="ttname"><a href="structrtlight__t.html#ab89a43403b944e77e37a1e7433472964">rtlight_t::matrix_lighttoworld</a></div><div class="ttdeci">matrix4x4_t matrix_lighttoworld</div><div class="ttdoc">matrix for transforming light filter coordinates to world coordinates</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00111">client.h:111</a></div></div>
<div class="ttc" id="astructrtlight__t_html_abd7dcefaa62c6eefd09f6f80de65487a"><div class="ttname"><a href="structrtlight__t.html#abd7dcefaa62c6eefd09f6f80de65487a">rtlight_t::cached_numsurfaces</a></div><div class="ttdeci">int cached_numsurfaces</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00164">client.h:164</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ac2a168e331380b4b98189c89dfd0cb5d"><div class="ttname"><a href="structrtlight__t.html#ac2a168e331380b4b98189c89dfd0cb5d">rtlight_t::cullmaxs</a></div><div class="ttdeci">vec3_t cullmaxs</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00142">client.h:142</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ac68df87c216a55c350f962fda6f3ae2d"><div class="ttname"><a href="structrtlight__t.html#ac68df87c216a55c350f962fda6f3ae2d">rtlight_t::cached_shadowentities_noselfshadow</a></div><div class="ttdeci">struct entity_render_s ** cached_shadowentities_noselfshadow</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00168">client.h:168</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ac722e53d8102fab70494fd914b57616d"><div class="ttname"><a href="structrtlight__t.html#ac722e53d8102fab70494fd914b57616d">rtlight_t::matrix_worldtolight</a></div><div class="ttdeci">matrix4x4_t matrix_worldtolight</div><div class="ttdoc">matrix for transforming world coordinates to light filter coordinates</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00113">client.h:113</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ac7712a9c6887d6e456e70a0a2f1d4063"><div class="ttname"><a href="structrtlight__t.html#ac7712a9c6887d6e456e70a0a2f1d4063">rtlight_t::static_numshadowtrispvsbytes</a></div><div class="ttdeci">int static_numshadowtrispvsbytes</div><div class="ttdoc">flag bits indicating which triangles of the world model should cast shadows, and which ones should be...</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00208">client.h:208</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ac87b49cfb5af0aa6822590972ed574d1"><div class="ttname"><a href="structrtlight__t.html#ac87b49cfb5af0aa6822590972ed574d1">rtlight_t::bouncegrid_hits</a></div><div class="ttdeci">int bouncegrid_hits</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00227">client.h:227</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ac93c51702312e67d26a545caaea9a286"><div class="ttname"><a href="structrtlight__t.html#ac93c51702312e67d26a545caaea9a286">rtlight_t::bouncegrid_photons</a></div><div class="ttdeci">float bouncegrid_photons</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00226">client.h:226</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ad693ee6a96c479120992214f8a3702f5"><div class="ttname"><a href="structrtlight__t.html#ad693ee6a96c479120992214f8a3702f5">rtlight_t::bouncegrid_photoncolor</a></div><div class="ttdeci">float bouncegrid_photoncolor[3]</div><div class="ttdoc">bouncegrid light info</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00225">client.h:225</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ad8280f61360048850261e9c3e502c179"><div class="ttname"><a href="structrtlight__t.html#ad8280f61360048850261e9c3e502c179">rtlight_t::diffusescale</a></div><div class="ttdeci">vec_t diffusescale</div><div class="ttdoc">diffuse intensity to render</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00131">client.h:131</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ad9c05c79882566ece9814a3b20b4243f"><div class="ttname"><a href="structrtlight__t.html#ad9c05c79882566ece9814a3b20b4243f">rtlight_t::cached_lightentities</a></div><div class="ttdeci">struct entity_render_s ** cached_lightentities</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00165">client.h:165</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ad9e77f1a895bbf4a497b638012042312"><div class="ttname"><a href="structrtlight__t.html#ad9e77f1a895bbf4a497b638012042312">rtlight_t::static_numleafs</a></div><div class="ttdeci">int static_numleafs</div><div class="ttdoc">used for visibility testing (more exact than bbox)</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00195">client.h:195</a></div></div>
<div class="ttc" id="astructrtlight__t_html_adae53566fd63b1633f5f3110dd8048c4"><div class="ttname"><a href="structrtlight__t.html#adae53566fd63b1633f5f3110dd8048c4">rtlight_t::cached_numshadowentities_noselfshadow</a></div><div class="ttdeci">int cached_numshadowentities_noselfshadow</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00163">client.h:163</a></div></div>
<div class="ttc" id="astructrtlight__t_html_adbc1e51da19086eebde0e3d34a79f341"><div class="ttname"><a href="structrtlight__t.html#adbc1e51da19086eebde0e3d34a79f341">rtlight_t::cached_surfacelist</a></div><div class="ttdeci">int * cached_surfacelist</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00171">client.h:171</a></div></div>
<div class="ttc" id="astructrtlight__t_html_addf32d395978ac7b2aa14f3676ea420b"><div class="ttname"><a href="structrtlight__t.html#addf32d395978ac7b2aa14f3676ea420b">rtlight_t::cached_lighttrispvs</a></div><div class="ttdeci">unsigned char * cached_lighttrispvs</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00170">client.h:170</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ade7605138e2c6380603cdb402c62b3c8"><div class="ttname"><a href="structrtlight__t.html#ade7605138e2c6380603cdb402c62b3c8">rtlight_t::castshadows</a></div><div class="ttdeci">qbool castshadows</div><div class="ttdoc">set by R_Shadow_PrepareLight to indicate whether R_Shadow_DrawShadowMaps should do anything</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00158">client.h:158</a></div></div>
<div class="ttc" id="astructrtlight__t_html_adf1d2216d8b33952af76952b632e0cce"><div class="ttname"><a href="structrtlight__t.html#adf1d2216d8b33952af76952b632e0cce">rtlight_t::radius</a></div><div class="ttdeci">vec_t radius</div><div class="ttdoc">size of the light (remove?)</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00117">client.h:117</a></div></div>
<div class="ttc" id="astructrtlight__t_html_adfa63f879a3f5d78dc6b3c10b34c52b6"><div class="ttname"><a href="structrtlight__t.html#adfa63f879a3f5d78dc6b3c10b34c52b6">rtlight_t::static_surfacelist</a></div><div class="ttdeci">int * static_surfacelist</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00201">client.h:201</a></div></div>
<div class="ttc" id="astructrtlight__t_html_ae92ae64bc83b7ca422ee2f4897fa86aa"><div class="ttname"><a href="structrtlight__t.html#ae92ae64bc83b7ca422ee2f4897fa86aa">rtlight_t::shadowmapatlasposition</a></div><div class="ttdeci">int shadowmapatlasposition[2]</div><div class="ttdoc">position of this light in the shadowmap atlas</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00189">client.h:189</a></div></div>
<div class="ttc" id="astructrtlight__t_html_af22b957bb78c17bfd0a79f49abe3b8b0"><div class="ttname"><a href="structrtlight__t.html#af22b957bb78c17bfd0a79f49abe3b8b0">rtlight_t::cached_shadowentities</a></div><div class="ttdeci">struct entity_render_s ** cached_shadowentities</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00167">client.h:167</a></div></div>
<div class="ttc" id="astructrtlight__t_html_af545270adf7443a1d5e85912b1fc17a2"><div class="ttname"><a href="structrtlight__t.html#af545270adf7443a1d5e85912b1fc17a2">rtlight_t::corona_queryindex_allpixels</a></div><div class="ttdeci">unsigned int corona_queryindex_allpixels</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00152">client.h:152</a></div></div>
<div class="ttc" id="astructrtlight__t_html_afe6718535d8f949e1c6d6434734d8544"><div class="ttname"><a href="structrtlight__t.html#afe6718535d8f949e1c6d6434734d8544">rtlight_t::cached_cullmaxs</a></div><div class="ttdeci">vec3_t cached_cullmaxs</div><div class="ttdef"><b>Definition</b> <a href="client_8h_source.html#l00174">client.h:174</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html"><div class="ttname"><a href="structshadowmesh__t.html">shadowmesh_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00159">model_shared.h:160</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a2da5a556c5633f6fb998c3b8bae08d44"><div class="ttname"><a href="structshadowmesh__t.html#a2da5a556c5633f6fb998c3b8bae08d44">shadowmesh_t::element3s_bufferoffset</a></div><div class="ttdeci">int element3s_bufferoffset</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00176">model_shared.h:176</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a37799ba83637ae362f443fbacdf3ab1e"><div class="ttname"><a href="structshadowmesh__t.html#a37799ba83637ae362f443fbacdf3ab1e">shadowmesh_t::sidetotals</a></div><div class="ttdeci">int sidetotals[6]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00179">model_shared.h:179</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a5448fa0c2d0c1765fb988c37fc9b820a"><div class="ttname"><a href="structshadowmesh__t.html#a5448fa0c2d0c1765fb988c37fc9b820a">shadowmesh_t::element3i</a></div><div class="ttdeci">int * element3i</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00171">model_shared.h:171</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a5502672a6e19c8d5144a2143b8617ad3"><div class="ttname"><a href="structshadowmesh__t.html#a5502672a6e19c8d5144a2143b8617ad3">shadowmesh_t::element3i_bufferoffset</a></div><div class="ttdeci">int element3i_bufferoffset</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00173">model_shared.h:173</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a5683380ac9e160b2e899fe82aac36b90"><div class="ttname"><a href="structshadowmesh__t.html#a5683380ac9e160b2e899fe82aac36b90">shadowmesh_t::element3s_indexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * element3s_indexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00175">model_shared.h:175</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a6a9b587fbcf8ef7a44140c46c8d2f4e1"><div class="ttname"><a href="structshadowmesh__t.html#a6a9b587fbcf8ef7a44140c46c8d2f4e1">shadowmesh_t::vbo_vertexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * vbo_vertexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00166">model_shared.h:166</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_a9a1f3f13d9b1053376a8a5473c3c9986"><div class="ttname"><a href="structshadowmesh__t.html#a9a1f3f13d9b1053376a8a5473c3c9986">shadowmesh_t::sideoffsets</a></div><div class="ttdeci">int sideoffsets[6]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00179">model_shared.h:179</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_aa32211c31106d7f38d1404a7a3403d19"><div class="ttname"><a href="structshadowmesh__t.html#aa32211c31106d7f38d1404a7a3403d19">shadowmesh_t::vertex3f</a></div><div class="ttdeci">float * vertex3f</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00165">model_shared.h:165</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_ab541863376b7d50d86fc7e9feadfde42"><div class="ttname"><a href="structshadowmesh__t.html#ab541863376b7d50d86fc7e9feadfde42">shadowmesh_t::element3i_indexbuffer</a></div><div class="ttdeci">r_meshbuffer_t * element3i_indexbuffer</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00172">model_shared.h:172</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_ab619fa0351de28e3e85368c9f6919482"><div class="ttname"><a href="structshadowmesh__t.html#ab619fa0351de28e3e85368c9f6919482">shadowmesh_t::element3s</a></div><div class="ttdeci">unsigned short * element3s</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00174">model_shared.h:174</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_aba509bf2aa5e66a84b969a224f96d5d5"><div class="ttname"><a href="structshadowmesh__t.html#aba509bf2aa5e66a84b969a224f96d5d5">shadowmesh_t::vbooffset_vertex3f</a></div><div class="ttdeci">int vbooffset_vertex3f</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00167">model_shared.h:167</a></div></div>
<div class="ttc" id="astructshadowmesh__t_html_af413bcf52c779a36abce2af7ebfa31cf"><div class="ttname"><a href="structshadowmesh__t.html#af413bcf52c779a36abce2af7ebfa31cf">shadowmesh_t::numverts</a></div><div class="ttdeci">int numverts</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00163">model_shared.h:163</a></div></div>
<div class="ttc" id="astructskinframe__t_html"><div class="ttname"><a href="structskinframe__t.html">skinframe_t</a></div><div class="ttdef"><b>Definition</b> <a href="r__textures_8h_source.html#l00125">r_textures.h:126</a></div></div>
<div class="ttc" id="astructsurfmesh__t_html_ab1541bccdbf92ee0c4310417ddec6af1"><div class="ttname"><a href="structsurfmesh__t.html#ab1541bccdbf92ee0c4310417ddec6af1">surfmesh_t::num_triangles</a></div><div class="ttdeci">int num_triangles</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00089">model_shared.h:89</a></div></div>
<div class="ttc" id="astructtaskqueue__task__t_html"><div class="ttname"><a href="structtaskqueue__task__t.html">taskqueue_task_t</a></div><div class="ttdef"><b>Definition</b> <a href="taskqueue_8h_source.html#l00008">taskqueue.h:9</a></div></div>
<div class="ttc" id="astructtaskqueue__task__t_html_a21eb660d9178b732ea760772c8879f35"><div class="ttname"><a href="structtaskqueue__task__t.html#a21eb660d9178b732ea760772c8879f35">taskqueue_task_t::p</a></div><div class="ttdeci">void * p[2]</div><div class="ttdef"><b>Definition</b> <a href="taskqueue_8h_source.html#l00019">taskqueue.h:19</a></div></div>
<div class="ttc" id="astructtaskqueue__task__t_html_a23579f1d7ab68a87c93c8b034883301d"><div class="ttname"><a href="structtaskqueue__task__t.html#a23579f1d7ab68a87c93c8b034883301d">taskqueue_task_t::i</a></div><div class="ttdeci">size_t i[2]</div><div class="ttdef"><b>Definition</b> <a href="taskqueue_8h_source.html#l00020">taskqueue.h:20</a></div></div>
<div class="ttc" id="astructtaskqueue__task__t_html_abd75c1628f072fbcab8138627c465383"><div class="ttname"><a href="structtaskqueue__task__t.html#abd75c1628f072fbcab8138627c465383">taskqueue_task_t::done</a></div><div class="ttdeci">volatile int done</div><div class="ttdef"><b>Definition</b> <a href="taskqueue_8h_source.html#l00014">taskqueue.h:14</a></div></div>
<div class="ttc" id="astructtaskqueue__task__t_html_af186f8ae6d1ea8c0cc4a621e6f766e9f"><div class="ttname"><a href="structtaskqueue__task__t.html#af186f8ae6d1ea8c0cc4a621e6f766e9f">taskqueue_task_t::func</a></div><div class="ttdeci">void(* func)(struct taskqueue_task_s *task)</div><div class="ttdef"><b>Definition</b> <a href="taskqueue_8h_source.html#l00017">taskqueue.h:17</a></div></div>
<div class="ttc" id="astructtexture__t_html_a0e73ef069b96d5d2b8cbda0d336296f0"><div class="ttname"><a href="structtexture__t.html#a0e73ef069b96d5d2b8cbda0d336296f0">texture_t::render_rtlight_specular</a></div><div class="ttdeci">float render_rtlight_specular[3]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00284">model_shared.h:284</a></div></div>
<div class="ttc" id="astructtexture__t_html_a3cf738577a78c45a3c19a2e1e649f804"><div class="ttname"><a href="structtexture__t.html#a3cf738577a78c45a3c19a2e1e649f804">texture_t::currentmaterialflags</a></div><div class="ttdeci">int currentmaterialflags</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00201">model_shared.h:201</a></div></div>
<div class="ttc" id="astructtexture__t_html_a677b2d189df2a69c92cf8bd928cdcf2e"><div class="ttname"><a href="structtexture__t.html#a677b2d189df2a69c92cf8bd928cdcf2e">texture_t::render_rtlight_diffuse</a></div><div class="ttdeci">float render_rtlight_diffuse[3]</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00283">model_shared.h:283</a></div></div>
<div class="ttc" id="astructtexture__t_html_a8946bca9c9255580592833f2675de406"><div class="ttname"><a href="structtexture__t.html#a8946bca9c9255580592833f2675de406">texture_t::rtlightambient</a></div><div class="ttdeci">float rtlightambient</div><div class="ttdef"><b>Definition</b> <a href="model__shared_8h_source.html#l00333">model_shared.h:333</a></div></div>
<div class="ttc" id="astructtrace__t_html"><div class="ttname"><a href="structtrace__t.html">trace_t</a></div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00021">collision.h:22</a></div></div>
<div class="ttc" id="astructtrace__t_html_a37cb2b7f426f5a76265ddb8e7918a099"><div class="ttname"><a href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">trace_t::fraction</a></div><div class="ttdeci">double fraction</div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00040">collision.h:40</a></div></div>
<div class="ttc" id="astructtrace__t_html_a446c2c0421931cabc9e437e285453505"><div class="ttname"><a href="structtrace__t.html#a446c2c0421931cabc9e437e285453505">trace_t::starttexture</a></div><div class="ttdeci">const struct texture_s * starttexture</div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00070">collision.h:70</a></div></div>
<div class="ttc" id="astructtrace__t_html_a45b22da9e5e28fb83aa691ffb1909a4a"><div class="ttname"><a href="structtrace__t.html#a45b22da9e5e28fb83aa691ffb1909a4a">trace_t::endpos</a></div><div class="ttdeci">double endpos[3]</div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00042">collision.h:42</a></div></div>
<div class="ttc" id="astructtrace__t_html_a78edab108c78f91aaa4aec7aee8b898a"><div class="ttname"><a href="structtrace__t.html#a78edab108c78f91aaa4aec7aee8b898a">trace_t::startsupercontents</a></div><div class="ttdeci">int startsupercontents</div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00056">collision.h:56</a></div></div>
<div class="ttc" id="astructtrace__t_html_a9a6651d4c1d97c4e6959a696184b25cd"><div class="ttname"><a href="structtrace__t.html#a9a6651d4c1d97c4e6959a696184b25cd">trace_t::plane</a></div><div class="ttdeci">plane_t plane</div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00044">collision.h:44</a></div></div>
<div class="ttc" id="astructviddef__support__t_html_a19c7955d9a5a2ec5a8e240e304605c1f"><div class="ttname"><a href="structviddef__support__t.html#a19c7955d9a5a2ec5a8e240e304605c1f">viddef_support_t::amd_texture_texture4</a></div><div class="ttdeci">qbool amd_texture_texture4</div><div class="ttdef"><b>Definition</b> <a href="vid_8h_source.html#l00046">vid.h:46</a></div></div>
<div class="ttc" id="astructviddef__support__t_html_a1e47329aabd6e05c76a6309a6f487b00"><div class="ttname"><a href="structviddef__support__t.html#a1e47329aabd6e05c76a6309a6f487b00">viddef_support_t::arb_texture_gather</a></div><div class="ttdeci">qbool arb_texture_gather</div><div class="ttdef"><b>Definition</b> <a href="vid_8h_source.html#l00047">vid.h:47</a></div></div>
<div class="ttc" id="astructviddef__support__t_html_ab5ad9719e8b68b38021df72a87d37ab2"><div class="ttname"><a href="structviddef__support__t.html#ab5ad9719e8b68b38021df72a87d37ab2">viddef_support_t::glversion</a></div><div class="ttdeci">int glversion</div><div class="ttdef"><b>Definition</b> <a href="vid_8h_source.html#l00044">vid.h:44</a></div></div>
<div class="ttc" id="astructviddef__t_html_a06a669057f01a0d02c34aa0ebc781a54"><div class="ttname"><a href="structviddef__t.html#a06a669057f01a0d02c34aa0ebc781a54">viddef_t::maxtexturesize_2d</a></div><div class="ttdeci">unsigned int maxtexturesize_2d</div><div class="ttdef"><b>Definition</b> <a href="vid_8h_source.html#l00090">vid.h:90</a></div></div>
<div class="ttc" id="astructviddef__t_html_a1da5ca679bbe12b196fc8af97dac46be"><div class="ttname"><a href="structviddef__t.html#a1da5ca679bbe12b196fc8af97dac46be">viddef_t::maxtexturesize_3d</a></div><div class="ttdeci">unsigned int maxtexturesize_3d</div><div class="ttdef"><b>Definition</b> <a href="vid_8h_source.html#l00091">vid.h:91</a></div></div>
<div class="ttc" id="astructviddef__t_html_a77ee51e56202df8258781a0aa1dc1a2d"><div class="ttname"><a href="structviddef__t.html#a77ee51e56202df8258781a0aa1dc1a2d">viddef_t::renderpath</a></div><div class="ttdeci">renderpath_t renderpath</div><div class="ttdef"><b>Definition</b> <a href="vid_8h_source.html#l00087">vid.h:87</a></div></div>
<div class="ttc" id="astructviddef__t_html_a993a26a349fe3edd4be4cc65b42d261e"><div class="ttname"><a href="structviddef__t.html#a993a26a349fe3edd4be4cc65b42d261e">viddef_t::support</a></div><div class="ttdeci">viddef_support_t support</div><div class="ttdef"><b>Definition</b> <a href="vid_8h_source.html#l00096">vid.h:96</a></div></div>
<div class="ttc" id="astructviddef__t_html_ac81e1bd84e154919571ff6952fdf2f22"><div class="ttname"><a href="structviddef__t.html#ac81e1bd84e154919571ff6952fdf2f22">viddef_t::maxdrawbuffers</a></div><div class="ttdeci">unsigned int maxdrawbuffers</div><div class="ttdef"><b>Definition</b> <a href="vid_8h_source.html#l00094">vid.h:94</a></div></div>
<div class="ttc" id="ataskqueue_8c_html_a12dd9d26e317dc09afe48c6d5cc64051"><div class="ttname"><a href="taskqueue_8c.html#a12dd9d26e317dc09afe48c6d5cc64051">TaskQueue_Yield</a></div><div class="ttdeci">void TaskQueue_Yield(taskqueue_task_t *t)</div><div class="ttdef"><b>Definition</b> <a href="taskqueue_8c_source.html#l00133">taskqueue.c:133</a></div></div>
<div class="ttc" id="ataskqueue_8c_html_a63a391616e61b5636b93b6611ad65303"><div class="ttname"><a href="taskqueue_8c.html#a63a391616e61b5636b93b6611ad65303">TaskQueue_WaitForTaskDone</a></div><div class="ttdeci">void TaskQueue_WaitForTaskDone(taskqueue_task_t *t)</div><div class="ttdef"><b>Definition</b> <a href="taskqueue_8c_source.html#l00199">taskqueue.c:199</a></div></div>
<div class="ttc" id="ataskqueue_8c_html_a9d3bce934d8556370189575fc769691e"><div class="ttname"><a href="taskqueue_8c.html#a9d3bce934d8556370189575fc769691e">TaskQueue_Setup</a></div><div class="ttdeci">void TaskQueue_Setup(taskqueue_task_t *t, taskqueue_task_t *preceding, void(*func)(taskqueue_task_t *), size_t i0, size_t i1, void *p0, void *p1)</div><div class="ttdef"><b>Definition</b> <a href="taskqueue_8c_source.html#l00282">taskqueue.c:282</a></div></div>
<div class="ttc" id="ataskqueue_8c_html_ad3874e08e0963699402a0d894b9102df"><div class="ttname"><a href="taskqueue_8c.html#ad3874e08e0963699402a0d894b9102df">TaskQueue_Enqueue</a></div><div class="ttdeci">void TaskQueue_Enqueue(int numtasks, taskqueue_task_t *tasks)</div><div class="ttdef"><b>Definition</b> <a href="taskqueue_8c_source.html#l00105">taskqueue.c:105</a></div></div>
<div class="ttc" id="ataskqueue_8c_html_ae4ea029dfef884645b521265061de550"><div class="ttname"><a href="taskqueue_8c.html#ae4ea029dfef884645b521265061de550">TaskQueue_Task_CheckTasksDone</a></div><div class="ttdeci">void TaskQueue_Task_CheckTasksDone(taskqueue_task_t *t)</div><div class="ttdef"><b>Definition</b> <a href="taskqueue_8c_source.html#l00293">taskqueue.c:293</a></div></div>
<div class="ttc" id="aunionplane__t_html_ade810b5e8f7db899dee445447a58edeb"><div class="ttname"><a href="unionplane__t.html#ade810b5e8f7db899dee445447a58edeb">plane_t::normal</a></div><div class="ttdeci">vec3_t normal</div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00013">collision.h:13</a></div></div>
<div class="ttc" id="avid_8h_html_a04bc8150d67111633f687f346ef11213"><div class="ttname"><a href="vid_8h.html#a04bc8150d67111633f687f346ef11213">gl_vendor</a></div><div class="ttdeci">const char * gl_vendor</div><div class="ttdef"><b>Definition</b> <a href="vid__shared_8c_source.html#l00191">vid_shared.c:191</a></div></div>
<div class="ttc" id="avid_8h_html_a4af19c54ec30ae1e6978d5a46980c22fafbfa84c8848e1c609691f76637da178b"><div class="ttname"><a href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafbfa84c8848e1c609691f76637da178b">RENDERPATH_GLES2</a></div><div class="ttdeci">@ RENDERPATH_GLES2</div><div class="ttdef"><b>Definition</b> <a href="vid_8h_source.html#l00039">vid.h:38</a></div></div>
<div class="ttc" id="avid_8h_html_a4af19c54ec30ae1e6978d5a46980c22fafcfef4a81b353e6ad9bfee33f0c6076a"><div class="ttname"><a href="vid_8h.html#a4af19c54ec30ae1e6978d5a46980c22fafcfef4a81b353e6ad9bfee33f0c6076a">RENDERPATH_GL32</a></div><div class="ttdeci">@ RENDERPATH_GL32</div><div class="ttdef"><b>Definition</b> <a href="vid_8h_source.html#l00037">vid.h:37</a></div></div>
<div class="ttc" id="avid_8h_html_a8ad4fd4a0fc26d32b2587f36584ec528"><div class="ttname"><a href="vid_8h.html#a8ad4fd4a0fc26d32b2587f36584ec528">gl_version</a></div><div class="ttdeci">const char * gl_version</div><div class="ttdef"><b>Definition</b> <a href="vid__shared_8c_source.html#l00195">vid_shared.c:195</a></div></div>
<div class="ttc" id="avid_8h_html_a9d1815b351cd8efde55a93191fb6b5d7"><div class="ttname"><a href="vid_8h.html#a9d1815b351cd8efde55a93191fb6b5d7">gl_renderer</a></div><div class="ttdeci">const char * gl_renderer</div><div class="ttdef"><b>Definition</b> <a href="vid__shared_8c_source.html#l00193">vid_shared.c:193</a></div></div>
<div class="ttc" id="avid_8h_html_aa5f05f6f860c65da5834d6ff3d5655af"><div class="ttname"><a href="vid_8h.html#aa5f05f6f860c65da5834d6ff3d5655af">vid</a></div><div class="ttdeci">viddef_t vid</div><div class="ttdef"><b>Definition</b> <a href="vid__shared_8c_source.html#l00064">vid_shared.c:64</a></div></div>
<div class="ttc" id="aworld_8h_html_a7ee9b968e24c893e13a349b765b5096b"><div class="ttname"><a href="world_8h.html#a7ee9b968e24c893e13a349b765b5096b">MOVE_HITMODEL</a></div><div class="ttdeci">#define MOVE_HITMODEL</div><div class="ttdef"><b>Definition</b> <a href="world_8h_source.html#l00032">world.h:32</a></div></div>
<div class="ttc" id="aworld_8h_html_a90df952ad5c2daedd0295eb3a7ecae12"><div class="ttname"><a href="world_8h.html#a90df952ad5c2daedd0295eb3a7ecae12">MOVE_WORLDONLY</a></div><div class="ttdeci">#define MOVE_WORLDONLY</div><div class="ttdef"><b>Definition</b> <a href="world_8h_source.html#l00031">world.h:31</a></div></div>
<div class="ttc" id="aworld_8h_html_ac85dd5b7c1be8faf715803a4a921a313"><div class="ttname"><a href="world_8h.html#ac85dd5b7c1be8faf715803a4a921a313">MOVE_NORMAL</a></div><div class="ttdeci">#define MOVE_NORMAL</div><div class="ttdef"><b>Definition</b> <a href="world_8h_source.html#l00028">world.h:28</a></div></div>
<div class="ttc" id="aworld_8h_html_ad9b31bede6128044de93b93641630437"><div class="ttname"><a href="world_8h.html#ad9b31bede6128044de93b93641630437">MOVE_NOMONSTERS</a></div><div class="ttdeci">#define MOVE_NOMONSTERS</div><div class="ttdef"><b>Definition</b> <a href="world_8h_source.html#l00029">world.h:29</a></div></div>
<div class="ttc" id="azone_8c_html_a1b1599deb1c7db8a64afe5cf4cdbd539"><div class="ttname"><a href="zone_8c.html#a1b1599deb1c7db8a64afe5cf4cdbd539">Mem_ExpandableArray_IndexRange</a></div><div class="ttdeci">size_t Mem_ExpandableArray_IndexRange(const memexpandablearray_t *l)</div><div class="ttdef"><b>Definition</b> <a href="zone_8c_source.html#l00763">zone.c:763</a></div></div>
<div class="ttc" id="azone_8c_html_a211e7367323b1791e87715797bdee714"><div class="ttname"><a href="zone_8c.html#a211e7367323b1791e87715797bdee714">Mem_ExpandableArray_NewArray</a></div><div class="ttdeci">void Mem_ExpandableArray_NewArray(memexpandablearray_t *l, mempool_t *mempool, size_t recordsize, int numrecordsperarray)</div><div class="ttdef"><b>Definition</b> <a href="zone_8c_source.html#l00675">zone.c:675</a></div></div>
<div class="ttc" id="azone_8c_html_a6809e6e38abd59c5583dc9b83843a7ee"><div class="ttname"><a href="zone_8c.html#a6809e6e38abd59c5583dc9b83843a7ee">Mem_ExpandableArray_FreeRecord</a></div><div class="ttdeci">void Mem_ExpandableArray_FreeRecord(memexpandablearray_t *l, void *record)</div><div class="ttdef"><b>Definition</b> <a href="zone_8c_source.html#l00743">zone.c:743</a></div></div>
<div class="ttc" id="azone_8c_html_a6e8351ce990cc9c3c7eb1c6ac8c91921"><div class="ttname"><a href="zone_8c.html#a6e8351ce990cc9c3c7eb1c6ac8c91921">Mem_ExpandableArray_AllocRecord</a></div><div class="ttdeci">void * Mem_ExpandableArray_AllocRecord(memexpandablearray_t *l)</div><div class="ttdef"><b>Definition</b> <a href="zone_8c_source.html#l00695">zone.c:695</a></div></div>
<div class="ttc" id="azone_8c_html_ac3c570c2a60e19b44ed16e7e0ba844fa"><div class="ttname"><a href="zone_8c.html#ac3c570c2a60e19b44ed16e7e0ba844fa">Mem_ExpandableArray_RecordAtIndex</a></div><div class="ttdeci">void * Mem_ExpandableArray_RecordAtIndex(const memexpandablearray_t *l, size_t index)</div><div class="ttdef"><b>Definition</b> <a href="zone_8c_source.html#l00780">zone.c:780</a></div></div>
<div class="ttc" id="azone_8c_html_ac742acee1395c22ccf6d2370d465f844"><div class="ttname"><a href="zone_8c.html#ac742acee1395c22ccf6d2370d465f844">tempmempool</a></div><div class="ttdeci">mempool_t * tempmempool</div><div class="ttdef"><b>Definition</b> <a href="zone_8c_source.html#l00794">zone.c:794</a></div></div>
<div class="ttc" id="azone_8h_html_a06bb588bb8d0406e051f04c1ca723d28"><div class="ttname"><a href="zone_8h.html#a06bb588bb8d0406e051f04c1ca723d28">Mem_Free</a></div><div class="ttdeci">#define Mem_Free(mem)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00096">zone.h:96</a></div></div>
<div class="ttc" id="azone_8h_html_a1f8b0c54fe3d32858da2b13a4f7e5783"><div class="ttname"><a href="zone_8h.html#a1f8b0c54fe3d32858da2b13a4f7e5783">Mem_Alloc</a></div><div class="ttdeci">#define Mem_Alloc(pool, size)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00092">zone.h:92</a></div></div>
<div class="ttc" id="azone_8h_html_a35deb8ef816a08fb1bc8feac8db020c5"><div class="ttname"><a href="zone_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a></div><div class="ttdeci">#define Z_Malloc(size)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00154">zone.h:154</a></div></div>
<div class="ttc" id="azone_8h_html_aa613261ffbc429e7212d3e9e42de9644"><div class="ttname"><a href="zone_8h.html#aa613261ffbc429e7212d3e9e42de9644">Mem_Realloc</a></div><div class="ttdeci">#define Mem_Realloc(pool, data, size)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00094">zone.h:94</a></div></div>
<div class="ttc" id="azone_8h_html_abbce8ea44a12486a6b59f31f02bab5ee"><div class="ttname"><a href="zone_8h.html#abbce8ea44a12486a6b59f31f02bab5ee">Z_Free</a></div><div class="ttdeci">#define Z_Free(data)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00157">zone.h:157</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="r__shadow_8c.html">r_shadow.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
