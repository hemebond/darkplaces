<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DarkPlaces: sv_move.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-customisations.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="darkplaces48x48.png"/></td>
  <td id="projectalign">
   <div id="projectname">DarkPlaces
   </div>
   <div id="projectbrief">Game engine based on the Quake 1 engine by id Software, developed by LadyHavoc</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('sv__move_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">sv_move.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="quakedef_8h_source.html">quakedef.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="prvm__cmds_8h_source.html">prvm_cmds.h</a>&quot;</code><br />
</div>
<p><a href="sv__move_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5f596f718d18a1b8ccd15db3f2ed2cb0" id="r_a5f596f718d18a1b8ccd15db3f2ed2cb0"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sv__move_8c.html#a5f596f718d18a1b8ccd15db3f2ed2cb0">DI_NODIR</a>&#160;&#160;&#160;-1</td></tr>
<tr class="separator:a5f596f718d18a1b8ccd15db3f2ed2cb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a45af1c1e101ef98c720737301b347852" id="r_a45af1c1e101ef98c720737301b347852"><td class="memItemLeft" align="right" valign="top"><a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sv__move_8c.html#a45af1c1e101ef98c720737301b347852">SV_CheckBottom</a> (<a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *ent)</td></tr>
<tr class="separator:a45af1c1e101ef98c720737301b347852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee22d87cda57b0ad8ffdc9c01e4387da" id="r_aee22d87cda57b0ad8ffdc9c01e4387da"><td class="memItemLeft" align="right" valign="top"><a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sv__move_8c.html#aee22d87cda57b0ad8ffdc9c01e4387da">SV_movestep</a> (<a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *ent, <a class="el" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a> move, <a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relink</a>, <a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">noenemy</a>, <a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> <a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">settrace</a>)</td></tr>
<tr class="separator:aee22d87cda57b0ad8ffdc9c01e4387da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea6b6eba1509c2fbf56f06dae9aab8d5" id="r_aea6b6eba1509c2fbf56f06dae9aab8d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">static</a> <a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sv__move_8c.html#aea6b6eba1509c2fbf56f06dae9aab8d5">SV_StepDirection</a> (<a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *ent, <a class="el" href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a> yaw, <a class="el" href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a> dist)</td></tr>
<tr class="separator:aea6b6eba1509c2fbf56f06dae9aab8d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ed18caccfbaacd44b3c80dc2e2a1ea8" id="r_a8ed18caccfbaacd44b3c80dc2e2a1ea8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">static</a> <a class="el" href="glquake_8h.html#afa45fc0640b31002c1792c59eb062c59">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sv__move_8c.html#a8ed18caccfbaacd44b3c80dc2e2a1ea8">SV_FixCheckBottom</a> (<a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *ent)</td></tr>
<tr class="separator:a8ed18caccfbaacd44b3c80dc2e2a1ea8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0224e942b8a660315c586a68cece09d0" id="r_a0224e942b8a660315c586a68cece09d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">static</a> <a class="el" href="glquake_8h.html#afa45fc0640b31002c1792c59eb062c59">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sv__move_8c.html#a0224e942b8a660315c586a68cece09d0">SV_NewChaseDir</a> (<a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *<a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>, <a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *enemy, <a class="el" href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a> dist)</td></tr>
<tr class="separator:a0224e942b8a660315c586a68cece09d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bd8177290f78f062280a9676de7f7c7" id="r_a9bd8177290f78f062280a9676de7f7c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">static</a> <a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sv__move_8c.html#a9bd8177290f78f062280a9676de7f7c7">SV_CloseEnough</a> (<a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *ent, <a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *<a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">goal</a>, <a class="el" href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a> dist)</td></tr>
<tr class="separator:a9bd8177290f78f062280a9676de7f7c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a784c3056492c3d8521f7b0f4089cac39" id="r_a784c3056492c3d8521f7b0f4089cac39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glquake_8h.html#afa45fc0640b31002c1792c59eb062c59">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sv__move_8c.html#a784c3056492c3d8521f7b0f4089cac39">VM_SV_MoveToGoal</a> (<a class="el" href="structprvm__prog__t.html">prvm_prog_t</a> *prog)</td></tr>
<tr class="separator:a784c3056492c3d8521f7b0f4089cac39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5cd879a106ede99510d4c60e1ed32e1a" id="r_a5cd879a106ede99510d4c60e1ed32e1a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sv__move_8c.html#a5cd879a106ede99510d4c60e1ed32e1a">c_yes</a></td></tr>
<tr class="separator:a5cd879a106ede99510d4c60e1ed32e1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad2db161dd46036be97492c1ff92d247" id="r_aad2db161dd46036be97492c1ff92d247"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sv__move_8c.html#aad2db161dd46036be97492c1ff92d247">c_no</a></td></tr>
<tr class="separator:aad2db161dd46036be97492c1ff92d247"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a5f596f718d18a1b8ccd15db3f2ed2cb0" name="a5f596f718d18a1b8ccd15db3f2ed2cb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f596f718d18a1b8ccd15db3f2ed2cb0">&#9670;&#160;</a></span>DI_NODIR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">define</a> DI_NODIR&#160;&#160;&#160;-1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sv__move_8c_source.html#l00309">309</a> of file <a class="el" href="sv__move_8c_source.html">sv_move.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a45af1c1e101ef98c720737301b347852" name="a45af1c1e101ef98c720737301b347852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45af1c1e101ef98c720737301b347852">&#9670;&#160;</a></span>SV_CheckBottom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> SV_CheckBottom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *&#160;</td>
          <td class="paramname"><em>ent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sv__move_8c_source.html#l00036">36</a> of file <a class="el" href="sv__move_8c_source.html">sv_move.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   37</span>{</div>
<div class="line"><span class="lineno">   38</span>    <a class="code hl_struct" href="structprvm__prog__t.html">prvm_prog_t</a> *prog = <a class="code hl_define" href="progsvm_8h.html#af0488a3f2145e274c2d766ace6d1c0c8">SVVM_prog</a>;</div>
<div class="line"><span class="lineno">   39</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a>  mins, maxs, start, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stop</a>;</div>
<div class="line"><span class="lineno">   40</span>    <a class="code hl_struct" href="structtrace__t.html">trace_t</a> trace;</div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordtype">int</span>     <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>, <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>;</div>
<div class="line"><span class="lineno">   42</span>    <span class="keywordtype">float</span>   <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mid</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bottom</a>;</div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a> (<a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin), <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, mins), mins);</div>
<div class="line"><span class="lineno">   45</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a> (<a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin), <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, maxs), maxs);</div>
<div class="line"><span class="lineno">   46</span> </div>
<div class="line"><span class="lineno">   47</span><span class="comment">// if all of the points under the corners are solid world, don&#39;t bother</span></div>
<div class="line"><span class="lineno">   48</span><span class="comment">// with the tougher checks</span></div>
<div class="line"><span class="lineno">   49</span><span class="comment">// the corners must be within 16 of the midpoint</span></div>
<div class="line"><span class="lineno">   50</span>    start[2] = mins[2] - 1;</div>
<div class="line"><span class="lineno">   51</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>=0 ; <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>&lt;=1 ; <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>++)</div>
<div class="line"><span class="lineno">   52</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>=0 ; <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>&lt;=1 ; <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++)</div>
<div class="line"><span class="lineno">   53</span>        {</div>
<div class="line"><span class="lineno">   54</span>            start[0] = <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> ? maxs[0] : mins[0];</div>
<div class="line"><span class="lineno">   55</span>            start[1] = <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> ? maxs[1] : mins[1];</div>
<div class="line"><span class="lineno">   56</span>            <span class="keywordflow">if</span> (!(<a class="code hl_function" href="server_8h.html#abc73364265c2ee1c656afa098ebb712c">SV_PointSuperContents</a>(start) &amp; (<a class="code hl_define" href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a> | <a class="code hl_define" href="bspfile_8h.html#a141cf05726f903843bc66d2365f56bd2">SUPERCONTENTS_BODY</a>)))</div>
<div class="line"><span class="lineno">   57</span>                <span class="keywordflow">goto</span> <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">realcheck</a>;</div>
<div class="line"><span class="lineno">   58</span>        }</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>    <a class="code hl_variable" href="sv__move_8c.html#a5cd879a106ede99510d4c60e1ed32e1a">c_yes</a>++;</div>
<div class="line"><span class="lineno">   61</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;        <span class="comment">// we got out easy</span></div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">realcheck</a>:</div>
<div class="line"><span class="lineno">   64</span>    <a class="code hl_variable" href="sv__move_8c.html#aad2db161dd46036be97492c1ff92d247">c_no</a>++;</div>
<div class="line"><span class="lineno">   65</span><span class="comment">//</span></div>
<div class="line"><span class="lineno">   66</span><span class="comment">// check it for real...</span></div>
<div class="line"><span class="lineno">   67</span><span class="comment">//</span></div>
<div class="line"><span class="lineno">   68</span>    start[2] = mins[2];</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span><span class="comment">// the midpoint must be within 16 of the bottom</span></div>
<div class="line"><span class="lineno">   71</span>    start[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stop</a>[0] = (mins[0] + maxs[0])*0.5;</div>
<div class="line"><span class="lineno">   72</span>    start[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stop</a>[1] = (mins[1] + maxs[1])*0.5;</div>
<div class="line"><span class="lineno">   73</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stop</a>[2] = start[2] - 2*<a class="code hl_variable" href="server_8h.html#ab120386b567c58e1f310787964c52cb3">sv_stepheight</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><span class="lineno">   74</span>    trace = <a class="code hl_function" href="server_8h.html#a70632daf1b4426714e43ccb49d60368d">SV_TraceLine</a>(start, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stop</a>, <a class="code hl_define" href="world_8h.html#ad9b31bede6128044de93b93641630437">MOVE_NOMONSTERS</a>, ent, <a class="code hl_function" href="server_8h.html#aae05f83d170c92f3fb56632e86944b6c">SV_GenericHitSuperContentsMask</a>(ent), 0, 0, <a class="code hl_variable" href="collision_8c.html#ac0a2160fccec6a28f98e2df5e39d1f7c">collision_extendmovelength</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>);</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a> == 1.0)</div>
<div class="line"><span class="lineno">   77</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   78</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mid</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bottom</a> = trace.<a class="code hl_variable" href="structtrace__t.html#a45b22da9e5e28fb83aa691ffb1909a4a">endpos</a>[2];</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span><span class="comment">// the corners must be within 16 of the midpoint</span></div>
<div class="line"><span class="lineno">   81</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>=0 ; <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>&lt;=1 ; <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a>++)</div>
<div class="line"><span class="lineno">   82</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>=0 ; <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>&lt;=1 ; <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a>++)</div>
<div class="line"><span class="lineno">   83</span>        {</div>
<div class="line"><span class="lineno">   84</span>            start[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stop</a>[0] = <a class="code hl_variable" href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a> ? maxs[0] : mins[0];</div>
<div class="line"><span class="lineno">   85</span>            start[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stop</a>[1] = <a class="code hl_variable" href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a> ? maxs[1] : mins[1];</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>            trace = <a class="code hl_function" href="server_8h.html#a70632daf1b4426714e43ccb49d60368d">SV_TraceLine</a>(start, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">stop</a>, <a class="code hl_define" href="world_8h.html#ad9b31bede6128044de93b93641630437">MOVE_NOMONSTERS</a>, ent, <a class="code hl_function" href="server_8h.html#aae05f83d170c92f3fb56632e86944b6c">SV_GenericHitSuperContentsMask</a>(ent), 0, 0, <a class="code hl_variable" href="collision_8c.html#ac0a2160fccec6a28f98e2df5e39d1f7c">collision_extendmovelength</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>);</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>            <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a> != 1.0 &amp;&amp; trace.<a class="code hl_variable" href="structtrace__t.html#a45b22da9e5e28fb83aa691ffb1909a4a">endpos</a>[2] &gt; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bottom</a>)</div>
<div class="line"><span class="lineno">   90</span>                <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">bottom</a> = trace.<a class="code hl_variable" href="structtrace__t.html#a45b22da9e5e28fb83aa691ffb1909a4a">endpos</a>[2];</div>
<div class="line"><span class="lineno">   91</span>            <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a> == 1.0 || <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">mid</a> - trace.<a class="code hl_variable" href="structtrace__t.html#a45b22da9e5e28fb83aa691ffb1909a4a">endpos</a>[2] &gt; <a class="code hl_variable" href="server_8h.html#ab120386b567c58e1f310787964c52cb3">sv_stepheight</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>)</div>
<div class="line"><span class="lineno">   92</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   93</span>        }</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    <a class="code hl_variable" href="sv__move_8c.html#a5cd879a106ede99510d4c60e1ed32e1a">c_yes</a>++;</div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   97</span>}</div>
<div class="ttc" id="abspfile_8h_html_a141cf05726f903843bc66d2365f56bd2"><div class="ttname"><a href="bspfile_8h.html#a141cf05726f903843bc66d2365f56bd2">SUPERCONTENTS_BODY</a></div><div class="ttdeci">#define SUPERCONTENTS_BODY</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00201">bspfile.h:201</a></div></div>
<div class="ttc" id="abspfile_8h_html_a85f0acbb100ce4dc3c63037496d631d6"><div class="ttname"><a href="bspfile_8h.html#a85f0acbb100ce4dc3c63037496d631d6">SUPERCONTENTS_SOLID</a></div><div class="ttdeci">#define SUPERCONTENTS_SOLID</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00196">bspfile.h:196</a></div></div>
<div class="ttc" id="acollision_8c_html_ac0a2160fccec6a28f98e2df5e39d1f7c"><div class="ttname"><a href="collision_8c.html#ac0a2160fccec6a28f98e2df5e39d1f7c">collision_extendmovelength</a></div><div class="ttdeci">cvar_t collision_extendmovelength</div><div class="ttdef"><b>Definition</b> <a href="collision_8c_source.html#l00014">collision.c:14</a></div></div>
<div class="ttc" id="aglquake_8h_html_a563ae63395ca802a7c65b4f461fbf0d4"><div class="ttname"><a href="glquake_8h.html#a563ae63395ca802a7c65b4f461fbf0d4">y</a></div><div class="ttdeci">GLint GLenum GLint GLint y</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00650">glquake.h:650</a></div></div>
<div class="ttc" id="aglquake_8h_html_a75c9c896e11dc1eed9f9f1180b86d099"><div class="ttname"><a href="glquake_8h.html#a75c9c896e11dc1eed9f9f1180b86d099">x</a></div><div class="ttdeci">GLint GLenum GLint x</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00650">glquake.h:650</a></div></div>
<div class="ttc" id="aglquake_8h_html_af7ca775b6d9354291c4d7d01b8b2a8bc"><div class="ttname"><a href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a></div><div class="ttdeci">GLuint index</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00628">glquake.h:628</a></div></div>
<div class="ttc" id="amathlib_8h_html_ac7c7d40fe22eeaffb66c24bd718f655d"><div class="ttname"><a href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a></div><div class="ttdeci">#define VectorAdd(a, b, c)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00099">mathlib.h:99</a></div></div>
<div class="ttc" id="aprogsvm_8h_html_a16fa54cb588d80ed1cc30202c924de69"><div class="ttname"><a href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a></div><div class="ttdeci">#define PRVM_serveredictvector(ed, fieldname)</div><div class="ttdef"><b>Definition</b> <a href="progsvm_8h_source.html#l00172">progsvm.h:172</a></div></div>
<div class="ttc" id="aprogsvm_8h_html_af0488a3f2145e274c2d766ace6d1c0c8"><div class="ttname"><a href="progsvm_8h.html#af0488a3f2145e274c2d766ace6d1c0c8">SVVM_prog</a></div><div class="ttdeci">#define SVVM_prog</div><div class="ttdef"><b>Definition</b> <a href="progsvm_8h_source.html#l00765">progsvm.h:765</a></div></div>
<div class="ttc" id="aqtypes_8h_html_a5fab60d2366b4888d93d5814eb04c9e9"><div class="ttname"><a href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a></div><div class="ttdeci">vec_t vec3_t[3]</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00067">qtypes.h:67</a></div></div>
<div class="ttc" id="aserver_8h_html_a70632daf1b4426714e43ccb49d60368d"><div class="ttname"><a href="server_8h.html#a70632daf1b4426714e43ccb49d60368d">SV_TraceLine</a></div><div class="ttdeci">trace_t SV_TraceLine(const vec3_t start, const vec3_t end, int type, prvm_edict_t *passedict, int hitsupercontentsmask, int skipsupercontentsmask, int skipmaterialflagsmask, float extend)</div><div class="ttdef"><b>Definition</b> <a href="sv__phys_8c_source.html#l00256">sv_phys.c:256</a></div></div>
<div class="ttc" id="aserver_8h_html_aae05f83d170c92f3fb56632e86944b6c"><div class="ttname"><a href="server_8h.html#aae05f83d170c92f3fb56632e86944b6c">SV_GenericHitSuperContentsMask</a></div><div class="ttdeci">int SV_GenericHitSuperContentsMask(const prvm_edict_t *edict)</div><div class="ttdoc">calculates hitsupercontentsmask for a generic qc entity</div><div class="ttdef"><b>Definition</b> <a href="sv__phys_8c_source.html#l00073">sv_phys.c:73</a></div></div>
<div class="ttc" id="aserver_8h_html_ab120386b567c58e1f310787964c52cb3"><div class="ttname"><a href="server_8h.html#ab120386b567c58e1f310787964c52cb3">sv_stepheight</a></div><div class="ttdeci">cvar_t sv_stepheight</div><div class="ttdef"><b>Definition</b> <a href="sv__main_8c_source.html#l00152">sv_main.c:152</a></div></div>
<div class="ttc" id="aserver_8h_html_abc73364265c2ee1c656afa098ebb712c"><div class="ttname"><a href="server_8h.html#abc73364265c2ee1c656afa098ebb712c">SV_PointSuperContents</a></div><div class="ttdeci">int SV_PointSuperContents(const vec3_t point)</div><div class="ttdef"><b>Definition</b> <a href="sv__phys_8c_source.html#l00611">sv_phys.c:611</a></div></div>
<div class="ttc" id="astructcvar__t_html_a305faa0167494135297f1b8e6216d469"><div class="ttname"><a href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">cvar_t::value</a></div><div class="ttdeci">float value</div><div class="ttdef"><b>Definition</b> <a href="cvar_8h_source.html#l00074">cvar.h:74</a></div></div>
<div class="ttc" id="astructprvm__prog__t_html"><div class="ttname"><a href="structprvm__prog__t.html">prvm_prog_t</a></div><div class="ttdef"><b>Definition</b> <a href="progsvm_8h_source.html#l00535">progsvm.h:536</a></div></div>
<div class="ttc" id="astructtrace__t_html"><div class="ttname"><a href="structtrace__t.html">trace_t</a></div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00021">collision.h:22</a></div></div>
<div class="ttc" id="astructtrace__t_html_a37cb2b7f426f5a76265ddb8e7918a099"><div class="ttname"><a href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">trace_t::fraction</a></div><div class="ttdeci">double fraction</div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00040">collision.h:40</a></div></div>
<div class="ttc" id="astructtrace__t_html_a45b22da9e5e28fb83aa691ffb1909a4a"><div class="ttname"><a href="structtrace__t.html#a45b22da9e5e28fb83aa691ffb1909a4a">trace_t::endpos</a></div><div class="ttdeci">double endpos[3]</div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00042">collision.h:42</a></div></div>
<div class="ttc" id="asv__move_8c_html_a5cd879a106ede99510d4c60e1ed32e1a"><div class="ttname"><a href="sv__move_8c.html#a5cd879a106ede99510d4c60e1ed32e1a">c_yes</a></div><div class="ttdeci">int c_yes</div><div class="ttdef"><b>Definition</b> <a href="sv__move_8c_source.html#l00034">sv_move.c:34</a></div></div>
<div class="ttc" id="asv__move_8c_html_aad2db161dd46036be97492c1ff92d247"><div class="ttname"><a href="sv__move_8c.html#aad2db161dd46036be97492c1ff92d247">c_no</a></div><div class="ttdeci">int c_no</div><div class="ttdef"><b>Definition</b> <a href="sv__move_8c_source.html#l00034">sv_move.c:34</a></div></div>
<div class="ttc" id="aworld_8h_html_ad9b31bede6128044de93b93641630437"><div class="ttname"><a href="world_8h.html#ad9b31bede6128044de93b93641630437">MOVE_NOMONSTERS</a></div><div class="ttdeci">#define MOVE_NOMONSTERS</div><div class="ttdef"><b>Definition</b> <a href="world_8h_source.html#l00029">world.h:29</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="sv__move_8c_source.html#l00109">SV_movestep()</a>, <a class="el" href="sv__move_8c_source.html#l00310">SV_NewChaseDir()</a>, and <a class="el" href="svvm__cmds_8c_source.html#l01324">VM_SV_checkbottom()</a>.</p>

</div>
</div>
<a id="a9bd8177290f78f062280a9676de7f7c7" name="a9bd8177290f78f062280a9676de7f7c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bd8177290f78f062280a9676de7f7c7">&#9670;&#160;</a></span>SV_CloseEnough()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">static</a> <a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> SV_CloseEnough </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *&#160;</td>
          <td class="paramname"><em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *&#160;</td>
          <td class="paramname"><em>goal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a>&#160;</td>
          <td class="paramname"><em>dist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sv__move_8c_source.html#l00400">400</a> of file <a class="el" href="sv__move_8c_source.html">sv_move.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  401</span>{</div>
<div class="line"><span class="lineno">  402</span>    <span class="keywordtype">int</span>     <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0 ; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;3 ; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><span class="lineno">  405</span>    {</div>
<div class="line"><span class="lineno">  406</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">goal</a>-&gt;priv.server-&gt;areamins[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; ent-&gt;<a class="code hl_variable" href="structprvm__edict__t.html#a8c0db02020cee914e59175f91ec1bc20">priv</a>.<a class="code hl_variable" href="structprvm__edict__t.html#aa40346f2eb40e683c8294f13941e60bb">server</a>-&gt;areamaxs[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] + dist)</div>
<div class="line"><span class="lineno">  407</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  408</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">goal</a>-&gt;priv.server-&gt;areamaxs[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; ent-&gt;<a class="code hl_variable" href="structprvm__edict__t.html#a8c0db02020cee914e59175f91ec1bc20">priv</a>.<a class="code hl_variable" href="structprvm__edict__t.html#aa40346f2eb40e683c8294f13941e60bb">server</a>-&gt;areamins[<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] - dist)</div>
<div class="line"><span class="lineno">  409</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  410</span>    }</div>
<div class="line"><span class="lineno">  411</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  412</span>}</div>
<div class="ttc" id="aprvm__execprogram_8h_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition</b> <a href="prvm__execprogram_8h_source.html#l00002">prvm_execprogram.h:2</a></div></div>
<div class="ttc" id="astructprvm__edict__t_html_a8c0db02020cee914e59175f91ec1bc20"><div class="ttname"><a href="structprvm__edict__t.html#a8c0db02020cee914e59175f91ec1bc20">prvm_edict_t::priv</a></div><div class="ttdeci">union prvm_edict_t::@25 priv</div></div>
<div class="ttc" id="astructprvm__edict__t_html_aa40346f2eb40e683c8294f13941e60bb"><div class="ttname"><a href="structprvm__edict__t.html#aa40346f2eb40e683c8294f13941e60bb">prvm_edict_t::server</a></div><div class="ttdeci">struct edict_engineprivate_s * server</div><div class="ttdef"><b>Definition</b> <a href="progsvm_8h_source.html#l00105">progsvm.h:105</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="sv__move_8c_source.html#l00420">VM_SV_MoveToGoal()</a>.</p>

</div>
</div>
<a id="a8ed18caccfbaacd44b3c80dc2e2a1ea8" name="a8ed18caccfbaacd44b3c80dc2e2a1ea8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ed18caccfbaacd44b3c80dc2e2a1ea8">&#9670;&#160;</a></span>SV_FixCheckBottom()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">static</a> <a class="el" href="glquake_8h.html#afa45fc0640b31002c1792c59eb062c59">void</a> SV_FixCheckBottom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *&#160;</td>
          <td class="paramname"><em>ent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sv__move_8c_source.html#l00295">295</a> of file <a class="el" href="sv__move_8c_source.html">sv_move.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  296</span>{</div>
<div class="line"><span class="lineno">  297</span>    <a class="code hl_struct" href="structprvm__prog__t.html">prvm_prog_t</a> *prog = <a class="code hl_define" href="progsvm_8h.html#af0488a3f2145e274c2d766ace6d1c0c8">SVVM_prog</a>;</div>
<div class="line"><span class="lineno">  298</span>    <a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, flags) = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, flags) | <a class="code hl_define" href="server_8h.html#a8c2c6c23a31f80ade103e9dbf4e69b12">FL_PARTIALGROUND</a>;</div>
<div class="line"><span class="lineno">  299</span>}</div>
<div class="ttc" id="afs_8c_html_a93257bedba32e45fc3f07bea139c0604"><div class="ttname"><a href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a></div><div class="ttdeci">static int(ZEXPORT *qz_inflate)(z_stream *strm</div></div>
<div class="ttc" id="aprogsvm_8h_html_aa470b2bd6729775cb9581bb36c7ed73d"><div class="ttname"><a href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a></div><div class="ttdeci">#define PRVM_serveredictfloat(ed, fieldname)</div><div class="ttdef"><b>Definition</b> <a href="progsvm_8h_source.html#l00171">progsvm.h:171</a></div></div>
<div class="ttc" id="aserver_8h_html_a8c2c6c23a31f80ade103e9dbf4e69b12"><div class="ttname"><a href="server_8h.html#a8c2c6c23a31f80ade103e9dbf4e69b12">FL_PARTIALGROUND</a></div><div class="ttdeci">#define FL_PARTIALGROUND</div><div class="ttdoc">not all corners are valid</div><div class="ttdef"><b>Definition</b> <a href="server_8h_source.html#l00367">server.h:367</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="sv__move_8c_source.html#l00310">SV_NewChaseDir()</a>.</p>

</div>
</div>
<a id="aee22d87cda57b0ad8ffdc9c01e4387da" name="aee22d87cda57b0ad8ffdc9c01e4387da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee22d87cda57b0ad8ffdc9c01e4387da">&#9670;&#160;</a></span>SV_movestep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> SV_movestep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *&#160;</td>
          <td class="paramname"><em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a>&#160;</td>
          <td class="paramname"><em>move</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a>&#160;</td>
          <td class="paramname"><em>relink</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a>&#160;</td>
          <td class="paramname"><em>noenemy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a>&#160;</td>
          <td class="paramname"><em>settrace</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sv__move_8c_source.html#l00109">109</a> of file <a class="el" href="sv__move_8c_source.html">sv_move.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  110</span>{</div>
<div class="line"><span class="lineno">  111</span>    <a class="code hl_struct" href="structprvm__prog__t.html">prvm_prog_t</a> *prog = <a class="code hl_define" href="progsvm_8h.html#af0488a3f2145e274c2d766ace6d1c0c8">SVVM_prog</a>;</div>
<div class="line"><span class="lineno">  112</span>    <span class="keywordtype">float</span>       <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dz</a>;</div>
<div class="line"><span class="lineno">  113</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a>      <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldorg</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">neworg</a>, end, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">traceendpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entorigin</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entmins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entmaxs</a>;</div>
<div class="line"><span class="lineno">  114</span>    <a class="code hl_struct" href="structtrace__t.html">trace_t</a>     trace;</div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordtype">int</span>         <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><span class="lineno">  116</span>    <a class="code hl_struct" href="structprvm__edict__t.html">prvm_edict_t</a>        *enemy;</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span><span class="comment">// try the move</span></div>
<div class="line"><span class="lineno">  119</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a> (<a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldorg</a>);</div>
<div class="line"><span class="lineno">  120</span>    <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a> (<a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin), move, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">neworg</a>);</div>
<div class="line"><span class="lineno">  121</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, mins), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entmins</a>);</div>
<div class="line"><span class="lineno">  122</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, maxs), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entmaxs</a>);</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span><span class="comment">// flying monsters don&#39;t step up</span></div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">if</span> ( (<span class="keywordtype">int</span>)<a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, flags) &amp; (<a class="code hl_define" href="server_8h.html#af963d0ee02580269d763f683a7b3c2a3">FL_SWIM</a> | <a class="code hl_define" href="server_8h.html#a402e335ad7a4d335f13a1bc925d71c2f">FL_FLY</a>) )</div>
<div class="line"><span class="lineno">  126</span>    {</div>
<div class="line"><span class="lineno">  127</span>    <span class="comment">// try one move with vertical motion, then one without</span></div>
<div class="line"><span class="lineno">  128</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>=0 ; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;2 ; <a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><span class="lineno">  129</span>        {</div>
<div class="line"><span class="lineno">  130</span>            <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a> (<a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin), move, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">neworg</a>);</div>
<div class="line"><span class="lineno">  131</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">noenemy</a>)</div>
<div class="line"><span class="lineno">  132</span>                enemy = prog-&gt;<a class="code hl_variable" href="structprvm__prog__t.html#a8540c3dd146a4fc8b8a72e272edcbc5e">edicts</a>;</div>
<div class="line"><span class="lineno">  133</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  134</span>            {</div>
<div class="line"><span class="lineno">  135</span>                enemy = <a class="code hl_define" href="progsvm_8h.html#a97138ae5d960d8b55d8db396abd68d0e">PRVM_PROG_TO_EDICT</a>(<a class="code hl_define" href="progsvm_8h.html#a32c564348d1d90db218ed028294dee12">PRVM_serveredictedict</a>(ent, enemy));</div>
<div class="line"><span class="lineno">  136</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="prvm__execprogram_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0 &amp;&amp; enemy != prog-&gt;<a class="code hl_variable" href="structprvm__prog__t.html#a8540c3dd146a4fc8b8a72e272edcbc5e">edicts</a>)</div>
<div class="line"><span class="lineno">  137</span>                {</div>
<div class="line"><span class="lineno">  138</span>                    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dz</a> = <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin)[2] - <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(enemy, origin)[2];</div>
<div class="line"><span class="lineno">  139</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dz</a> &gt; 40)</div>
<div class="line"><span class="lineno">  140</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">neworg</a>[2] -= 8;</div>
<div class="line"><span class="lineno">  141</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dz</a> &lt; 30)</div>
<div class="line"><span class="lineno">  142</span>                        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">neworg</a>[2] += 8;</div>
<div class="line"><span class="lineno">  143</span>                }</div>
<div class="line"><span class="lineno">  144</span>            }</div>
<div class="line"><span class="lineno">  145</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(<a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin), <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entorigin</a>);</div>
<div class="line"><span class="lineno">  146</span>            trace = <a class="code hl_function" href="server_8h.html#af0c162bba7ef44fcfa201affd5c853ee">SV_TraceBox</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entorigin</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entmins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entmaxs</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">neworg</a>, <a class="code hl_define" href="world_8h.html#ac85dd5b7c1be8faf715803a4a921a313">MOVE_NORMAL</a>, ent, <a class="code hl_function" href="server_8h.html#aae05f83d170c92f3fb56632e86944b6c">SV_GenericHitSuperContentsMask</a>(ent), 0, 0, <a class="code hl_variable" href="collision_8c.html#ac0a2160fccec6a28f98e2df5e39d1f7c">collision_extendmovelength</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>);</div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>            <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a> == 1)</div>
<div class="line"><span class="lineno">  149</span>            {</div>
<div class="line"><span class="lineno">  150</span>                <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a>(trace.<a class="code hl_variable" href="structtrace__t.html#a45b22da9e5e28fb83aa691ffb1909a4a">endpos</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">traceendpos</a>);</div>
<div class="line"><span class="lineno">  151</span>                <span class="keywordflow">if</span> (((<span class="keywordtype">int</span>)<a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, flags) &amp; <a class="code hl_define" href="server_8h.html#af963d0ee02580269d763f683a7b3c2a3">FL_SWIM</a>) &amp;&amp; !(<a class="code hl_function" href="server_8h.html#abc73364265c2ee1c656afa098ebb712c">SV_PointSuperContents</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">traceendpos</a>) &amp; <a class="code hl_define" href="bspfile_8h.html#a86cebf49778299337e696bf0abc2d046">SUPERCONTENTS_LIQUIDSMASK</a>))</div>
<div class="line"><span class="lineno">  152</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// swim monster left water</span></div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>                <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">traceendpos</a>, <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin));</div>
<div class="line"><span class="lineno">  155</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relink</a>)</div>
<div class="line"><span class="lineno">  156</span>                {</div>
<div class="line"><span class="lineno">  157</span>                    <a class="code hl_function" href="server_8h.html#a7c9f31122176959d30eba9f864f843ef">SV_LinkEdict</a>(ent);</div>
<div class="line"><span class="lineno">  158</span>                    <a class="code hl_function" href="server_8h.html#afde235834ab0ac8d11bb81b9e14cff61">SV_LinkEdict_TouchAreaGrid</a>(ent);</div>
<div class="line"><span class="lineno">  159</span>                }</div>
<div class="line"><span class="lineno">  160</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  161</span>            }</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>            <span class="keywordflow">if</span> (enemy == prog-&gt;<a class="code hl_variable" href="structprvm__prog__t.html#a8540c3dd146a4fc8b8a72e272edcbc5e">edicts</a>)</div>
<div class="line"><span class="lineno">  164</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  165</span>        }</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  168</span>    }</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span><span class="comment">// push down from a step height above the wished position</span></div>
<div class="line"><span class="lineno">  171</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">neworg</a>[2] += <a class="code hl_variable" href="server_8h.html#ab120386b567c58e1f310787964c52cb3">sv_stepheight</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><span class="lineno">  172</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">neworg</a>, end);</div>
<div class="line"><span class="lineno">  173</span>    end[2] -= <a class="code hl_variable" href="server_8h.html#ab120386b567c58e1f310787964c52cb3">sv_stepheight</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>*2;</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>    trace = <a class="code hl_function" href="server_8h.html#af0c162bba7ef44fcfa201affd5c853ee">SV_TraceBox</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">neworg</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entmins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entmaxs</a>, end, <a class="code hl_define" href="world_8h.html#ac85dd5b7c1be8faf715803a4a921a313">MOVE_NORMAL</a>, ent, <a class="code hl_function" href="server_8h.html#aae05f83d170c92f3fb56632e86944b6c">SV_GenericHitSuperContentsMask</a>(ent), 0, 0, <a class="code hl_variable" href="collision_8c.html#ac0a2160fccec6a28f98e2df5e39d1f7c">collision_extendmovelength</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>);</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structtrace__t.html#acdb0fead79cd57e41a0131ce110ab1f6">startsolid</a>)</div>
<div class="line"><span class="lineno">  178</span>    {</div>
<div class="line"><span class="lineno">  179</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">neworg</a>[2] -= <a class="code hl_variable" href="server_8h.html#ab120386b567c58e1f310787964c52cb3">sv_stepheight</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>;</div>
<div class="line"><span class="lineno">  180</span>        trace = <a class="code hl_function" href="server_8h.html#af0c162bba7ef44fcfa201affd5c853ee">SV_TraceBox</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">neworg</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entmins</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">entmaxs</a>, end, <a class="code hl_define" href="world_8h.html#ac85dd5b7c1be8faf715803a4a921a313">MOVE_NORMAL</a>, ent, <a class="code hl_function" href="server_8h.html#aae05f83d170c92f3fb56632e86944b6c">SV_GenericHitSuperContentsMask</a>(ent), 0, 0, <a class="code hl_variable" href="collision_8c.html#ac0a2160fccec6a28f98e2df5e39d1f7c">collision_extendmovelength</a>.<a class="code hl_variable" href="structcvar__t.html#a305faa0167494135297f1b8e6216d469">value</a>);</div>
<div class="line"><span class="lineno">  181</span>        <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structtrace__t.html#acdb0fead79cd57e41a0131ce110ab1f6">startsolid</a>)</div>
<div class="line"><span class="lineno">  182</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  183</span>    }</div>
<div class="line"><span class="lineno">  184</span>    <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structtrace__t.html#a37cb2b7f426f5a76265ddb8e7918a099">fraction</a> == 1)</div>
<div class="line"><span class="lineno">  185</span>    {</div>
<div class="line"><span class="lineno">  186</span>    <span class="comment">// if monster had the ground pulled out, go ahead and fall</span></div>
<div class="line"><span class="lineno">  187</span>        <span class="keywordflow">if</span> ( (<span class="keywordtype">int</span>)<a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, flags) &amp; <a class="code hl_define" href="server_8h.html#a8c2c6c23a31f80ade103e9dbf4e69b12">FL_PARTIALGROUND</a> )</div>
<div class="line"><span class="lineno">  188</span>        {</div>
<div class="line"><span class="lineno">  189</span>            <a class="code hl_define" href="mathlib_8h.html#ac7c7d40fe22eeaffb66c24bd718f655d">VectorAdd</a> (<a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin), move, <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin));</div>
<div class="line"><span class="lineno">  190</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relink</a>)</div>
<div class="line"><span class="lineno">  191</span>            {</div>
<div class="line"><span class="lineno">  192</span>                <a class="code hl_function" href="server_8h.html#a7c9f31122176959d30eba9f864f843ef">SV_LinkEdict</a>(ent);</div>
<div class="line"><span class="lineno">  193</span>                <a class="code hl_function" href="server_8h.html#afde235834ab0ac8d11bb81b9e14cff61">SV_LinkEdict_TouchAreaGrid</a>(ent);</div>
<div class="line"><span class="lineno">  194</span>            }</div>
<div class="line"><span class="lineno">  195</span>            <a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, flags) = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, flags) &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">~FL_ONGROUND</a>;</div>
<div class="line"><span class="lineno">  196</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  197</span>        }</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;       <span class="comment">// walked off an edge</span></div>
<div class="line"><span class="lineno">  200</span>    }</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span><span class="comment">// check point traces down for dangling corners</span></div>
<div class="line"><span class="lineno">  203</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a> (trace.<a class="code hl_variable" href="structtrace__t.html#a45b22da9e5e28fb83aa691ffb1909a4a">endpos</a>, <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin));</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="sv__move_8c.html#a45af1c1e101ef98c720737301b347852">SV_CheckBottom</a> (ent))</div>
<div class="line"><span class="lineno">  206</span>    {</div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">if</span> ( (<span class="keywordtype">int</span>)<a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, flags) &amp; <a class="code hl_define" href="server_8h.html#a8c2c6c23a31f80ade103e9dbf4e69b12">FL_PARTIALGROUND</a> )</div>
<div class="line"><span class="lineno">  208</span>        {   <span class="comment">// entity had floor mostly pulled out from underneath it</span></div>
<div class="line"><span class="lineno">  209</span>            <span class="comment">// and is trying to correct</span></div>
<div class="line"><span class="lineno">  210</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relink</a>)</div>
<div class="line"><span class="lineno">  211</span>            {</div>
<div class="line"><span class="lineno">  212</span>                <a class="code hl_function" href="server_8h.html#a7c9f31122176959d30eba9f864f843ef">SV_LinkEdict</a>(ent);</div>
<div class="line"><span class="lineno">  213</span>                <a class="code hl_function" href="server_8h.html#afde235834ab0ac8d11bb81b9e14cff61">SV_LinkEdict_TouchAreaGrid</a>(ent);</div>
<div class="line"><span class="lineno">  214</span>            }</div>
<div class="line"><span class="lineno">  215</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  216</span>        }</div>
<div class="line"><span class="lineno">  217</span>        <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldorg</a>, <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin));</div>
<div class="line"><span class="lineno">  218</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  219</span>    }</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>    <span class="keywordflow">if</span> ( (<span class="keywordtype">int</span>)<a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, flags) &amp; <a class="code hl_define" href="server_8h.html#a8c2c6c23a31f80ade103e9dbf4e69b12">FL_PARTIALGROUND</a> )</div>
<div class="line"><span class="lineno">  222</span>        <a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, flags) = (<a class="code hl_function" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a>)<a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, flags) &amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">~FL_PARTIALGROUND</a>;</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span><span class="comment">// gameplayfix: check if reached pretty steep plane and bail</span></div>
<div class="line"><span class="lineno">  225</span>    <span class="keywordflow">if</span> ( ! ( (<span class="keywordtype">int</span>)<a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, flags) &amp; (<a class="code hl_define" href="server_8h.html#af963d0ee02580269d763f683a7b3c2a3">FL_SWIM</a> | <a class="code hl_define" href="server_8h.html#a402e335ad7a4d335f13a1bc925d71c2f">FL_FLY</a>) ) &amp;&amp; <a class="code hl_variable" href="server_8h.html#ae08301b7e11e3fb89042718108e855cc">sv_gameplayfix_nostepmoveonsteepslopes</a>.<a class="code hl_variable" href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">integer</a> )</div>
<div class="line"><span class="lineno">  226</span>    {</div>
<div class="line"><span class="lineno">  227</span>        <span class="keywordflow">if</span> (trace.<a class="code hl_variable" href="structtrace__t.html#a9a6651d4c1d97c4e6959a696184b25cd">plane</a>.<a class="code hl_variable" href="unionplane__t.html#ade810b5e8f7db899dee445447a58edeb">normal</a>[ 2 ] &lt; 0.5)</div>
<div class="line"><span class="lineno">  228</span>        {</div>
<div class="line"><span class="lineno">  229</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">oldorg</a>, <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin));</div>
<div class="line"><span class="lineno">  230</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  231</span>        }</div>
<div class="line"><span class="lineno">  232</span>    }</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>    <a class="code hl_define" href="progsvm_8h.html#a32c564348d1d90db218ed028294dee12">PRVM_serveredictedict</a>(ent, groundentity) = <a class="code hl_define" href="progsvm_8h.html#a45b837733ab601c2b34a4708f8868882">PRVM_EDICT_TO_PROG</a>(trace.<a class="code hl_variable" href="structtrace__t.html#a00f40ed37bd39dbb8f64e6c5b6f1ea51">ent</a>);</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span><span class="comment">// the move is ok</span></div>
<div class="line"><span class="lineno">  237</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">relink</a>)</div>
<div class="line"><span class="lineno">  238</span>    {</div>
<div class="line"><span class="lineno">  239</span>        <a class="code hl_function" href="server_8h.html#a7c9f31122176959d30eba9f864f843ef">SV_LinkEdict</a>(ent);</div>
<div class="line"><span class="lineno">  240</span>        <a class="code hl_function" href="server_8h.html#afde235834ab0ac8d11bb81b9e14cff61">SV_LinkEdict_TouchAreaGrid</a>(ent);</div>
<div class="line"><span class="lineno">  241</span>    }</div>
<div class="line"><span class="lineno">  242</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  243</span>}</div>
<div class="ttc" id="abspfile_8h_html_a86cebf49778299337e696bf0abc2d046"><div class="ttname"><a href="bspfile_8h.html#a86cebf49778299337e696bf0abc2d046">SUPERCONTENTS_LIQUIDSMASK</a></div><div class="ttdeci">#define SUPERCONTENTS_LIQUIDSMASK</div><div class="ttdef"><b>Definition</b> <a href="bspfile_8h_source.html#l00218">bspfile.h:218</a></div></div>
<div class="ttc" id="amathlib_8h_html_accb62c1cf8b53e0446be03f3d5899a68"><div class="ttname"><a href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a></div><div class="ttdeci">#define VectorCopy(a, b)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00100">mathlib.h:100</a></div></div>
<div class="ttc" id="aprogsvm_8h_html_a32c564348d1d90db218ed028294dee12"><div class="ttname"><a href="progsvm_8h.html#a32c564348d1d90db218ed028294dee12">PRVM_serveredictedict</a></div><div class="ttdeci">#define PRVM_serveredictedict(ed, fieldname)</div><div class="ttdef"><b>Definition</b> <a href="progsvm_8h_source.html#l00174">progsvm.h:174</a></div></div>
<div class="ttc" id="aprogsvm_8h_html_a45b837733ab601c2b34a4708f8868882"><div class="ttname"><a href="progsvm_8h.html#a45b837733ab601c2b34a4708f8868882">PRVM_EDICT_TO_PROG</a></div><div class="ttdeci">#define PRVM_EDICT_TO_PROG(e)</div><div class="ttdef"><b>Definition</b> <a href="progsvm_8h_source.html#l00874">progsvm.h:874</a></div></div>
<div class="ttc" id="aprogsvm_8h_html_a97138ae5d960d8b55d8db396abd68d0e"><div class="ttname"><a href="progsvm_8h.html#a97138ae5d960d8b55d8db396abd68d0e">PRVM_PROG_TO_EDICT</a></div><div class="ttdeci">#define PRVM_PROG_TO_EDICT(n)</div><div class="ttdef"><b>Definition</b> <a href="progsvm_8h_source.html#l00876">progsvm.h:876</a></div></div>
<div class="ttc" id="aserver_8h_html_a402e335ad7a4d335f13a1bc925d71c2f"><div class="ttname"><a href="server_8h.html#a402e335ad7a4d335f13a1bc925d71c2f">FL_FLY</a></div><div class="ttdeci">#define FL_FLY</div><div class="ttdef"><b>Definition</b> <a href="server_8h_source.html#l00357">server.h:357</a></div></div>
<div class="ttc" id="aserver_8h_html_a7c9f31122176959d30eba9f864f843ef"><div class="ttname"><a href="server_8h.html#a7c9f31122176959d30eba9f864f843ef">SV_LinkEdict</a></div><div class="ttdeci">void SV_LinkEdict(prvm_edict_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="sv__phys_8c_source.html#l00804">sv_phys.c:804</a></div></div>
<div class="ttc" id="aserver_8h_html_ae08301b7e11e3fb89042718108e855cc"><div class="ttname"><a href="server_8h.html#ae08301b7e11e3fb89042718108e855cc">sv_gameplayfix_nostepmoveonsteepslopes</a></div><div class="ttdeci">cvar_t sv_gameplayfix_nostepmoveonsteepslopes</div><div class="ttdef"><b>Definition</b> <a href="sv__main_8c_source.html#l00125">sv_main.c:125</a></div></div>
<div class="ttc" id="aserver_8h_html_af0c162bba7ef44fcfa201affd5c853ee"><div class="ttname"><a href="server_8h.html#af0c162bba7ef44fcfa201affd5c853ee">SV_TraceBox</a></div><div class="ttdeci">trace_t SV_TraceBox(const vec3_t start, const vec3_t mins, const vec3_t maxs, const vec3_t end, int type, prvm_edict_t *passedict, int hitsupercontentsmask, int skipsupercontentsmask, int skipmaterialflagsmask, float extend)</div><div class="ttdoc">traces a box move against worldmodel and all entities in the specified area</div><div class="ttdef"><b>Definition</b> <a href="sv__phys_8c_source.html#l00414">sv_phys.c:414</a></div></div>
<div class="ttc" id="aserver_8h_html_af963d0ee02580269d763f683a7b3c2a3"><div class="ttname"><a href="server_8h.html#af963d0ee02580269d763f683a7b3c2a3">FL_SWIM</a></div><div class="ttdeci">#define FL_SWIM</div><div class="ttdef"><b>Definition</b> <a href="server_8h_source.html#l00358">server.h:358</a></div></div>
<div class="ttc" id="aserver_8h_html_afde235834ab0ac8d11bb81b9e14cff61"><div class="ttname"><a href="server_8h.html#afde235834ab0ac8d11bb81b9e14cff61">SV_LinkEdict_TouchAreaGrid</a></div><div class="ttdeci">void SV_LinkEdict_TouchAreaGrid(prvm_edict_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="sv__phys_8c_source.html#l00727">sv_phys.c:727</a></div></div>
<div class="ttc" id="astructcvar__t_html_a376ca13f147f306d71edbe7670e138b0"><div class="ttname"><a href="structcvar__t.html#a376ca13f147f306d71edbe7670e138b0">cvar_t::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition</b> <a href="cvar_8h_source.html#l00073">cvar.h:73</a></div></div>
<div class="ttc" id="astructprvm__edict__t_html"><div class="ttname"><a href="structprvm__edict__t.html">prvm_edict_t</a></div><div class="ttdef"><b>Definition</b> <a href="progsvm_8h_source.html#l00089">progsvm.h:90</a></div></div>
<div class="ttc" id="astructprvm__prog__t_html_a8540c3dd146a4fc8b8a72e272edcbc5e"><div class="ttname"><a href="structprvm__prog__t.html#a8540c3dd146a4fc8b8a72e272edcbc5e">prvm_prog_t::edicts</a></div><div class="ttdeci">prvm_edict_t * edicts</div><div class="ttdef"><b>Definition</b> <a href="progsvm_8h_source.html#l00679">progsvm.h:679</a></div></div>
<div class="ttc" id="astructtrace__t_html_a00f40ed37bd39dbb8f64e6c5b6f1ea51"><div class="ttname"><a href="structtrace__t.html#a00f40ed37bd39dbb8f64e6c5b6f1ea51">trace_t::ent</a></div><div class="ttdeci">void * ent</div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00047">collision.h:47</a></div></div>
<div class="ttc" id="astructtrace__t_html_a9a6651d4c1d97c4e6959a696184b25cd"><div class="ttname"><a href="structtrace__t.html#a9a6651d4c1d97c4e6959a696184b25cd">trace_t::plane</a></div><div class="ttdeci">plane_t plane</div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00044">collision.h:44</a></div></div>
<div class="ttc" id="astructtrace__t_html_acdb0fead79cd57e41a0131ce110ab1f6"><div class="ttname"><a href="structtrace__t.html#acdb0fead79cd57e41a0131ce110ab1f6">trace_t::startsolid</a></div><div class="ttdeci">qbool startsolid</div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00026">collision.h:26</a></div></div>
<div class="ttc" id="asv__move_8c_html_a45af1c1e101ef98c720737301b347852"><div class="ttname"><a href="sv__move_8c.html#a45af1c1e101ef98c720737301b347852">SV_CheckBottom</a></div><div class="ttdeci">qbool SV_CheckBottom(prvm_edict_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="sv__move_8c_source.html#l00036">sv_move.c:36</a></div></div>
<div class="ttc" id="aunionplane__t_html_ade810b5e8f7db899dee445447a58edeb"><div class="ttname"><a href="unionplane__t.html#ade810b5e8f7db899dee445447a58edeb">plane_t::normal</a></div><div class="ttdeci">vec3_t normal</div><div class="ttdef"><b>Definition</b> <a href="collision_8h_source.html#l00013">collision.h:13</a></div></div>
<div class="ttc" id="aworld_8h_html_ac85dd5b7c1be8faf715803a4a921a313"><div class="ttname"><a href="world_8h.html#ac85dd5b7c1be8faf715803a4a921a313">MOVE_NORMAL</a></div><div class="ttdeci">#define MOVE_NORMAL</div><div class="ttdef"><b>Definition</b> <a href="world_8h_source.html#l00028">world.h:28</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="sv__move_8c_source.html#l00257">SV_StepDirection()</a>, and <a class="el" href="svvm__cmds_8c_source.html#l01124">VM_SV_walkmove()</a>.</p>

</div>
</div>
<a id="a0224e942b8a660315c586a68cece09d0" name="a0224e942b8a660315c586a68cece09d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0224e942b8a660315c586a68cece09d0">&#9670;&#160;</a></span>SV_NewChaseDir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">static</a> <a class="el" href="glquake_8h.html#afa45fc0640b31002c1792c59eb062c59">void</a> SV_NewChaseDir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *&#160;</td>
          <td class="paramname"><em>actor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *&#160;</td>
          <td class="paramname"><em>enemy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a>&#160;</td>
          <td class="paramname"><em>dist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sv__move_8c_source.html#l00310">310</a> of file <a class="el" href="sv__move_8c_source.html">sv_move.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  311</span>{</div>
<div class="line"><span class="lineno">  312</span>    <a class="code hl_struct" href="structprvm__prog__t.html">prvm_prog_t</a> *prog = <a class="code hl_define" href="progsvm_8h.html#af0488a3f2145e274c2d766ace6d1c0c8">SVVM_prog</a>;</div>
<div class="line"><span class="lineno">  313</span>    <span class="keywordtype">float</span>       <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deltax</a>,<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deltay</a>;</div>
<div class="line"><span class="lineno">  314</span>    <span class="keywordtype">float</span>           <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[3];</div>
<div class="line"><span class="lineno">  315</span>    <span class="keywordtype">float</span>       <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">olddir</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">turnaround</a>;</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">olddir</a> = <a class="code hl_define" href="mathlib_8h.html#a1948384e22abdb43ed374f311ccb13c7">ANGLEMOD</a>((<span class="keywordtype">int</span>)(<a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>, ideal_yaw)/45)*45);</div>
<div class="line"><span class="lineno">  318</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">turnaround</a> = <a class="code hl_define" href="mathlib_8h.html#a1948384e22abdb43ed374f311ccb13c7">ANGLEMOD</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">olddir</a> - 180);</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deltax</a> = <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(enemy, origin)[0] - <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>, origin)[0];</div>
<div class="line"><span class="lineno">  321</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deltay</a> = <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(enemy, origin)[1] - <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>, origin)[1];</div>
<div class="line"><span class="lineno">  322</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deltax</a>&gt;10)</div>
<div class="line"><span class="lineno">  323</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[1]= 0;</div>
<div class="line"><span class="lineno">  324</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deltax</a>&lt;-10)</div>
<div class="line"><span class="lineno">  325</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[1]= 180;</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  327</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[1]= <a class="code hl_define" href="sv__move_8c.html#a5f596f718d18a1b8ccd15db3f2ed2cb0">DI_NODIR</a>;</div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deltay</a>&lt;-10)</div>
<div class="line"><span class="lineno">  329</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[2]= 270;</div>
<div class="line"><span class="lineno">  330</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deltay</a>&gt;10)</div>
<div class="line"><span class="lineno">  331</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[2]= 90;</div>
<div class="line"><span class="lineno">  332</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  333</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[2]= <a class="code hl_define" href="sv__move_8c.html#a5f596f718d18a1b8ccd15db3f2ed2cb0">DI_NODIR</a>;</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span><span class="comment">// try direct route</span></div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[1] != <a class="code hl_define" href="sv__move_8c.html#a5f596f718d18a1b8ccd15db3f2ed2cb0">DI_NODIR</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[2] != <a class="code hl_define" href="sv__move_8c.html#a5f596f718d18a1b8ccd15db3f2ed2cb0">DI_NODIR</a>)</div>
<div class="line"><span class="lineno">  337</span>    {</div>
<div class="line"><span class="lineno">  338</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[1] == 0)</div>
<div class="line"><span class="lineno">  339</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[2] == 90 ? 45 : 315;</div>
<div class="line"><span class="lineno">  340</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  341</span>            <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a> = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[2] == 90 ? 135 : 215;</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a> != <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">turnaround</a> &amp;&amp; <a class="code hl_function" href="sv__move_8c.html#aea6b6eba1509c2fbf56f06dae9aab8d5">SV_StepDirection</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>, dist))</div>
<div class="line"><span class="lineno">  344</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  345</span>    }</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span><span class="comment">// try other directions</span></div>
<div class="line"><span class="lineno">  348</span>    <span class="keywordflow">if</span> ( ((<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rand</a>()&amp;3) &amp; 1) ||  <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deltay</a>)&gt;<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">fabs</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">deltax</a>))</div>
<div class="line"><span class="lineno">  349</span>    {</div>
<div class="line"><span class="lineno">  350</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>=<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[1];</div>
<div class="line"><span class="lineno">  351</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[1]=<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[2];</div>
<div class="line"><span class="lineno">  352</span>        <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[2]=<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>;</div>
<div class="line"><span class="lineno">  353</span>    }</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[1]!=<a class="code hl_define" href="sv__move_8c.html#a5f596f718d18a1b8ccd15db3f2ed2cb0">DI_NODIR</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[1]!=<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">turnaround</a></div>
<div class="line"><span class="lineno">  356</span>    &amp;&amp; <a class="code hl_function" href="sv__move_8c.html#aea6b6eba1509c2fbf56f06dae9aab8d5">SV_StepDirection</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[1], dist))</div>
<div class="line"><span class="lineno">  357</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[2]!=<a class="code hl_define" href="sv__move_8c.html#a5f596f718d18a1b8ccd15db3f2ed2cb0">DI_NODIR</a> &amp;&amp; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[2]!=<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">turnaround</a></div>
<div class="line"><span class="lineno">  360</span>    &amp;&amp; <a class="code hl_function" href="sv__move_8c.html#aea6b6eba1509c2fbf56f06dae9aab8d5">SV_StepDirection</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">d</a>[2], dist))</div>
<div class="line"><span class="lineno">  361</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span><span class="comment">/* there is no direct path to the player, so pick another direction */</span></div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">olddir</a>!=<a class="code hl_define" href="sv__move_8c.html#a5f596f718d18a1b8ccd15db3f2ed2cb0">DI_NODIR</a> &amp;&amp; <a class="code hl_function" href="sv__move_8c.html#aea6b6eba1509c2fbf56f06dae9aab8d5">SV_StepDirection</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">olddir</a>, dist))</div>
<div class="line"><span class="lineno">  366</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rand</a>()&amp;1)   <span class="comment">/*randomly determine direction of search*/</span></div>
<div class="line"><span class="lineno">  369</span>    {</div>
<div class="line"><span class="lineno">  370</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>=0 ; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>&lt;=315 ; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a> += 45)</div>
<div class="line"><span class="lineno">  371</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>!=<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">turnaround</a> &amp;&amp; <a class="code hl_function" href="sv__move_8c.html#aea6b6eba1509c2fbf56f06dae9aab8d5">SV_StepDirection</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>, dist) )</div>
<div class="line"><span class="lineno">  372</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  373</span>    }</div>
<div class="line"><span class="lineno">  374</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  375</span>    {</div>
<div class="line"><span class="lineno">  376</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>=315 ; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a> &gt;=0 ; <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a> -= 45)</div>
<div class="line"><span class="lineno">  377</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>!=<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">turnaround</a> &amp;&amp; <a class="code hl_function" href="sv__move_8c.html#aea6b6eba1509c2fbf56f06dae9aab8d5">SV_StepDirection</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">tdir</a>, dist) )</div>
<div class="line"><span class="lineno">  378</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  379</span>    }</div>
<div class="line"><span class="lineno">  380</span> </div>
<div class="line"><span class="lineno">  381</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">turnaround</a> != <a class="code hl_define" href="sv__move_8c.html#a5f596f718d18a1b8ccd15db3f2ed2cb0">DI_NODIR</a> &amp;&amp; <a class="code hl_function" href="sv__move_8c.html#aea6b6eba1509c2fbf56f06dae9aab8d5">SV_StepDirection</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">turnaround</a>, dist) )</div>
<div class="line"><span class="lineno">  382</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>    <a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>, ideal_yaw) = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">olddir</a>;       <span class="comment">// can&#39;t move</span></div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span><span class="comment">// if a bridge was pulled out from underneath a monster, it may not have</span></div>
<div class="line"><span class="lineno">  387</span><span class="comment">// a valid standing position at all</span></div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="sv__move_8c.html#a45af1c1e101ef98c720737301b347852">SV_CheckBottom</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>))</div>
<div class="line"><span class="lineno">  390</span>        <a class="code hl_function" href="sv__move_8c.html#a8ed18caccfbaacd44b3c80dc2e2a1ea8">SV_FixCheckBottom</a> (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">actor</a>);</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>}</div>
<div class="ttc" id="amathlib_8h_html_a1948384e22abdb43ed374f311ccb13c7"><div class="ttname"><a href="mathlib_8h.html#a1948384e22abdb43ed374f311ccb13c7">ANGLEMOD</a></div><div class="ttdeci">#define ANGLEMOD(a)</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00067">mathlib.h:67</a></div></div>
<div class="ttc" id="asv__move_8c_html_a5f596f718d18a1b8ccd15db3f2ed2cb0"><div class="ttname"><a href="sv__move_8c.html#a5f596f718d18a1b8ccd15db3f2ed2cb0">DI_NODIR</a></div><div class="ttdeci">#define DI_NODIR</div><div class="ttdef"><b>Definition</b> <a href="sv__move_8c_source.html#l00309">sv_move.c:309</a></div></div>
<div class="ttc" id="asv__move_8c_html_a8ed18caccfbaacd44b3c80dc2e2a1ea8"><div class="ttname"><a href="sv__move_8c.html#a8ed18caccfbaacd44b3c80dc2e2a1ea8">SV_FixCheckBottom</a></div><div class="ttdeci">static void SV_FixCheckBottom(prvm_edict_t *ent)</div><div class="ttdef"><b>Definition</b> <a href="sv__move_8c_source.html#l00295">sv_move.c:295</a></div></div>
<div class="ttc" id="asv__move_8c_html_aea6b6eba1509c2fbf56f06dae9aab8d5"><div class="ttname"><a href="sv__move_8c.html#aea6b6eba1509c2fbf56f06dae9aab8d5">SV_StepDirection</a></div><div class="ttdeci">static qbool SV_StepDirection(prvm_edict_t *ent, float yaw, float dist)</div><div class="ttdef"><b>Definition</b> <a href="sv__move_8c_source.html#l00257">sv_move.c:257</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="sv__move_8c_source.html#l00420">VM_SV_MoveToGoal()</a>.</p>

</div>
</div>
<a id="aea6b6eba1509c2fbf56f06dae9aab8d5" name="aea6b6eba1509c2fbf56f06dae9aab8d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea6b6eba1509c2fbf56f06dae9aab8d5">&#9670;&#160;</a></span>SV_StepDirection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">static</a> <a class="el" href="qtypes_8h.html#aa250998bce2dc350e4f644297bb579c3">qbool</a> SV_StepDirection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprvm__edict__t.html">prvm_edict_t</a> *&#160;</td>
          <td class="paramname"><em>ent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a>&#160;</td>
          <td class="paramname"><em>yaw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="shader__glsl_8h.html#a2ab77c89eb79b49ccd22bb1b2ad48bf1">float</a>&#160;</td>
          <td class="paramname"><em>dist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sv__move_8c_source.html#l00257">257</a> of file <a class="el" href="sv__move_8c_source.html">sv_move.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  258</span>{</div>
<div class="line"><span class="lineno">  259</span>    <a class="code hl_struct" href="structprvm__prog__t.html">prvm_prog_t</a> *prog = <a class="code hl_define" href="progsvm_8h.html#af0488a3f2145e274c2d766ace6d1c0c8">SVVM_prog</a>;</div>
<div class="line"><span class="lineno">  260</span>    <a class="code hl_typedef" href="qtypes_8h.html#a5fab60d2366b4888d93d5814eb04c9e9">vec3_t</a>      move, oldorigin;</div>
<div class="line"><span class="lineno">  261</span>    <span class="keywordtype">float</span>       delta;</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>    <a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, ideal_yaw) = yaw;</div>
<div class="line"><span class="lineno">  264</span>    <a class="code hl_function" href="prvm__cmds_8c.html#a8ee2675c2b4a182caafe974a645ce866">VM_changeyaw</a>(prog);</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>    yaw = yaw*<a class="code hl_define" href="mathlib_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>*2 / 360;</div>
<div class="line"><span class="lineno">  267</span>    move[0] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">cos</a>(yaw)*dist;</div>
<div class="line"><span class="lineno">  268</span>    move[1] = <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">sin</a>(yaw)*dist;</div>
<div class="line"><span class="lineno">  269</span>    move[2] = 0;</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>    <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a> (<a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin), oldorigin);</div>
<div class="line"><span class="lineno">  272</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="sv__move_8c.html#aee22d87cda57b0ad8ffdc9c01e4387da">SV_movestep</a> (ent, move, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  273</span>    {</div>
<div class="line"><span class="lineno">  274</span>        delta = <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, angles)[<a class="code hl_define" href="qtypes_8h.html#ac71b1e54b98dc1031873048bc61d0438">YAW</a>] - <a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, ideal_yaw);</div>
<div class="line"><span class="lineno">  275</span>        <span class="keywordflow">if</span> (delta &gt; 45 &amp;&amp; delta &lt; 315)</div>
<div class="line"><span class="lineno">  276</span>        {       <span class="comment">// not turned far enough, so don&#39;t take the step</span></div>
<div class="line"><span class="lineno">  277</span>            <a class="code hl_define" href="mathlib_8h.html#accb62c1cf8b53e0446be03f3d5899a68">VectorCopy</a> (oldorigin, <a class="code hl_define" href="progsvm_8h.html#a16fa54cb588d80ed1cc30202c924de69">PRVM_serveredictvector</a>(ent, origin));</div>
<div class="line"><span class="lineno">  278</span>        }</div>
<div class="line"><span class="lineno">  279</span>        <a class="code hl_function" href="server_8h.html#a7c9f31122176959d30eba9f864f843ef">SV_LinkEdict</a>(ent);</div>
<div class="line"><span class="lineno">  280</span>        <a class="code hl_function" href="server_8h.html#afde235834ab0ac8d11bb81b9e14cff61">SV_LinkEdict_TouchAreaGrid</a>(ent);</div>
<div class="line"><span class="lineno">  281</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  282</span>    }</div>
<div class="line"><span class="lineno">  283</span>    <a class="code hl_function" href="server_8h.html#a7c9f31122176959d30eba9f864f843ef">SV_LinkEdict</a>(ent);</div>
<div class="line"><span class="lineno">  284</span>    <a class="code hl_function" href="server_8h.html#afde235834ab0ac8d11bb81b9e14cff61">SV_LinkEdict_TouchAreaGrid</a>(ent);</div>
<div class="line"><span class="lineno">  285</span> </div>
<div class="line"><span class="lineno">  286</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  287</span>}</div>
<div class="ttc" id="amathlib_8h_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="mathlib_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition</b> <a href="mathlib_8h_source.html#l00028">mathlib.h:28</a></div></div>
<div class="ttc" id="aprvm__cmds_8c_html_a8ee2675c2b4a182caafe974a645ce866"><div class="ttname"><a href="prvm__cmds_8c.html#a8ee2675c2b4a182caafe974a645ce866">VM_changeyaw</a></div><div class="ttdeci">void VM_changeyaw(prvm_prog_t *prog)</div><div class="ttdef"><b>Definition</b> <a href="prvm__cmds_8c_source.html#l04747">prvm_cmds.c:4747</a></div></div>
<div class="ttc" id="aqtypes_8h_html_ac71b1e54b98dc1031873048bc61d0438"><div class="ttname"><a href="qtypes_8h.html#ac71b1e54b98dc1031873048bc61d0438">YAW</a></div><div class="ttdeci">#define YAW</div><div class="ttdef"><b>Definition</b> <a href="qtypes_8h_source.html#l00019">qtypes.h:19</a></div></div>
<div class="ttc" id="asv__move_8c_html_aee22d87cda57b0ad8ffdc9c01e4387da"><div class="ttname"><a href="sv__move_8c.html#aee22d87cda57b0ad8ffdc9c01e4387da">SV_movestep</a></div><div class="ttdeci">qbool SV_movestep(prvm_edict_t *ent, vec3_t move, qbool relink, qbool noenemy, qbool settrace)</div><div class="ttdef"><b>Definition</b> <a href="sv__move_8c_source.html#l00109">sv_move.c:109</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="sv__move_8c_source.html#l00310">SV_NewChaseDir()</a>, and <a class="el" href="sv__move_8c_source.html#l00420">VM_SV_MoveToGoal()</a>.</p>

</div>
</div>
<a id="a784c3056492c3d8521f7b0f4089cac39" name="a784c3056492c3d8521f7b0f4089cac39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a784c3056492c3d8521f7b0f4089cac39">&#9670;&#160;</a></span>VM_SV_MoveToGoal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glquake_8h.html#afa45fc0640b31002c1792c59eb062c59">void</a> VM_SV_MoveToGoal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprvm__prog__t.html">prvm_prog_t</a> *&#160;</td>
          <td class="paramname"><em>prog</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sv__move_8c_source.html#l00420">420</a> of file <a class="el" href="sv__move_8c_source.html">sv_move.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  421</span>{</div>
<div class="line"><span class="lineno">  422</span>    <a class="code hl_struct" href="structprvm__edict__t.html">prvm_edict_t</a>        *ent, *<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">goal</a>;</div>
<div class="line"><span class="lineno">  423</span>    <span class="keywordtype">float</span>       dist;</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>    <a class="code hl_define" href="prvm__cmds_8h.html#a9d64ebd7c778d96f68bd08d8e1adadbc">VM_SAFEPARMCOUNT</a>(1, <a class="code hl_function" href="sv__move_8c.html#a784c3056492c3d8521f7b0f4089cac39">VM_SV_MoveToGoal</a>);</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>    ent = <a class="code hl_define" href="progsvm_8h.html#a97138ae5d960d8b55d8db396abd68d0e">PRVM_PROG_TO_EDICT</a>(<a class="code hl_define" href="progsvm_8h.html#a25ac170152a31d9193ff7a844e51149e">PRVM_serverglobaledict</a>(self));</div>
<div class="line"><span class="lineno">  428</span>    <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">goal</a> = <a class="code hl_define" href="progsvm_8h.html#a97138ae5d960d8b55d8db396abd68d0e">PRVM_PROG_TO_EDICT</a>(<a class="code hl_define" href="progsvm_8h.html#a32c564348d1d90db218ed028294dee12">PRVM_serveredictedict</a>(ent, goalentity));</div>
<div class="line"><span class="lineno">  429</span>    dist = <a class="code hl_define" href="progsvm_8h.html#add057f87d55ed37e8b07ad5d34ffb427">PRVM_G_FLOAT</a>(<a class="code hl_define" href="pr__comp_8h.html#ae6550ffd28caf1794e06dcb314ddd2a5">OFS_PARM0</a>);</div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>    <span class="keywordflow">if</span> ( !( (<span class="keywordtype">int</span>)<a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, flags) &amp; (<a class="code hl_define" href="server_8h.html#ad205c8b0d262d85a16bb3d23272fe81d">FL_ONGROUND</a>|<a class="code hl_define" href="server_8h.html#a402e335ad7a4d335f13a1bc925d71c2f">FL_FLY</a>|<a class="code hl_define" href="server_8h.html#af963d0ee02580269d763f683a7b3c2a3">FL_SWIM</a>) ) )</div>
<div class="line"><span class="lineno">  432</span>    {</div>
<div class="line"><span class="lineno">  433</span>        <a class="code hl_define" href="progsvm_8h.html#add057f87d55ed37e8b07ad5d34ffb427">PRVM_G_FLOAT</a>(<a class="code hl_define" href="pr__comp_8h.html#a8dda97c1817f8bdc4c3ea15a65109eca">OFS_RETURN</a>) = 0;</div>
<div class="line"><span class="lineno">  434</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  435</span>    }</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span><span class="comment">// if the next step hits the enemy, return immediately</span></div>
<div class="line"><span class="lineno">  438</span>    <span class="keywordflow">if</span> ( <a class="code hl_define" href="progsvm_8h.html#a97138ae5d960d8b55d8db396abd68d0e">PRVM_PROG_TO_EDICT</a>(<a class="code hl_define" href="progsvm_8h.html#a32c564348d1d90db218ed028294dee12">PRVM_serveredictedict</a>(ent, enemy)) != prog-&gt;<a class="code hl_variable" href="structprvm__prog__t.html#a8540c3dd146a4fc8b8a72e272edcbc5e">edicts</a> &amp;&amp;  <a class="code hl_function" href="sv__move_8c.html#a9bd8177290f78f062280a9676de7f7c7">SV_CloseEnough</a> (ent, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">goal</a>, dist) )</div>
<div class="line"><span class="lineno">  439</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span><span class="comment">// bump around...</span></div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordflow">if</span> ( (<a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">rand</a>()&amp;3)==1 ||</div>
<div class="line"><span class="lineno">  443</span>    !<a class="code hl_function" href="sv__move_8c.html#aea6b6eba1509c2fbf56f06dae9aab8d5">SV_StepDirection</a> (ent, <a class="code hl_define" href="progsvm_8h.html#aa470b2bd6729775cb9581bb36c7ed73d">PRVM_serveredictfloat</a>(ent, ideal_yaw), dist))</div>
<div class="line"><span class="lineno">  444</span>    {</div>
<div class="line"><span class="lineno">  445</span>        <a class="code hl_function" href="sv__move_8c.html#a0224e942b8a660315c586a68cece09d0">SV_NewChaseDir</a> (ent, <a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">goal</a>, dist);</div>
<div class="line"><span class="lineno">  446</span>    }</div>
<div class="line"><span class="lineno">  447</span>}</div>
<div class="ttc" id="apr__comp_8h_html_a8dda97c1817f8bdc4c3ea15a65109eca"><div class="ttname"><a href="pr__comp_8h.html#a8dda97c1817f8bdc4c3ea15a65109eca">OFS_RETURN</a></div><div class="ttdeci">#define OFS_RETURN</div><div class="ttdef"><b>Definition</b> <a href="pr__comp_8h_source.html#l00033">pr_comp.h:33</a></div></div>
<div class="ttc" id="apr__comp_8h_html_ae6550ffd28caf1794e06dcb314ddd2a5"><div class="ttname"><a href="pr__comp_8h.html#ae6550ffd28caf1794e06dcb314ddd2a5">OFS_PARM0</a></div><div class="ttdeci">#define OFS_PARM0</div><div class="ttdef"><b>Definition</b> <a href="pr__comp_8h_source.html#l00034">pr_comp.h:34</a></div></div>
<div class="ttc" id="aprogsvm_8h_html_a25ac170152a31d9193ff7a844e51149e"><div class="ttname"><a href="progsvm_8h.html#a25ac170152a31d9193ff7a844e51149e">PRVM_serverglobaledict</a></div><div class="ttdeci">#define PRVM_serverglobaledict(fieldname)</div><div class="ttdef"><b>Definition</b> <a href="progsvm_8h_source.html#l00179">progsvm.h:179</a></div></div>
<div class="ttc" id="aprogsvm_8h_html_add057f87d55ed37e8b07ad5d34ffb427"><div class="ttname"><a href="progsvm_8h.html#add057f87d55ed37e8b07ad5d34ffb427">PRVM_G_FLOAT</a></div><div class="ttdeci">#define PRVM_G_FLOAT(o)</div><div class="ttdef"><b>Definition</b> <a href="progsvm_8h_source.html#l00881">progsvm.h:881</a></div></div>
<div class="ttc" id="aprvm__cmds_8h_html_a9d64ebd7c778d96f68bd08d8e1adadbc"><div class="ttname"><a href="prvm__cmds_8h.html#a9d64ebd7c778d96f68bd08d8e1adadbc">VM_SAFEPARMCOUNT</a></div><div class="ttdeci">#define VM_SAFEPARMCOUNT(p, f)</div><div class="ttdef"><b>Definition</b> <a href="prvm__cmds_8h_source.html#l00207">prvm_cmds.h:207</a></div></div>
<div class="ttc" id="aserver_8h_html_ad205c8b0d262d85a16bb3d23272fe81d"><div class="ttname"><a href="server_8h.html#ad205c8b0d262d85a16bb3d23272fe81d">FL_ONGROUND</a></div><div class="ttdeci">#define FL_ONGROUND</div><div class="ttdef"><b>Definition</b> <a href="server_8h_source.html#l00366">server.h:366</a></div></div>
<div class="ttc" id="asv__move_8c_html_a0224e942b8a660315c586a68cece09d0"><div class="ttname"><a href="sv__move_8c.html#a0224e942b8a660315c586a68cece09d0">SV_NewChaseDir</a></div><div class="ttdeci">static void SV_NewChaseDir(prvm_edict_t *actor, prvm_edict_t *enemy, float dist)</div><div class="ttdef"><b>Definition</b> <a href="sv__move_8c_source.html#l00310">sv_move.c:310</a></div></div>
<div class="ttc" id="asv__move_8c_html_a784c3056492c3d8521f7b0f4089cac39"><div class="ttname"><a href="sv__move_8c.html#a784c3056492c3d8521f7b0f4089cac39">VM_SV_MoveToGoal</a></div><div class="ttdeci">void VM_SV_MoveToGoal(prvm_prog_t *prog)</div><div class="ttdef"><b>Definition</b> <a href="sv__move_8c_source.html#l00420">sv_move.c:420</a></div></div>
<div class="ttc" id="asv__move_8c_html_a9bd8177290f78f062280a9676de7f7c7"><div class="ttname"><a href="sv__move_8c.html#a9bd8177290f78f062280a9676de7f7c7">SV_CloseEnough</a></div><div class="ttdeci">static qbool SV_CloseEnough(prvm_edict_t *ent, prvm_edict_t *goal, float dist)</div><div class="ttdef"><b>Definition</b> <a href="sv__move_8c_source.html#l00400">sv_move.c:400</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="sv__move_8c_source.html#l00420">VM_SV_MoveToGoal()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aad2db161dd46036be97492c1ff92d247" name="aad2db161dd46036be97492c1ff92d247"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad2db161dd46036be97492c1ff92d247">&#9670;&#160;</a></span>c_no</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a> c_no</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sv__move_8c_source.html#l00034">34</a> of file <a class="el" href="sv__move_8c_source.html">sv_move.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="sv__move_8c_source.html#l00036">SV_CheckBottom()</a>.</p>

</div>
</div>
<a id="a5cd879a106ede99510d4c60e1ed32e1a" name="a5cd879a106ede99510d4c60e1ed32e1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cd879a106ede99510d4c60e1ed32e1a">&#9670;&#160;</a></span>c_yes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fs_8c.html#a93257bedba32e45fc3f07bea139c0604">int</a> c_yes</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sv__move_8c_source.html#l00034">34</a> of file <a class="el" href="sv__move_8c_source.html">sv_move.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="sv__move_8c_source.html#l00036">SV_CheckBottom()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="sv__move_8c.html">sv_move.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
