<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DarkPlaces: model_dpmodel.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-customisations.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="darkplaces48x48.png"/></td>
  <td id="projectalign">
   <div id="projectname">DarkPlaces
   </div>
   <div id="projectbrief">Game engine based on the Quake 1 engine by id Software, developed by LadyHavoc</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('model__dpmodel_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">model_dpmodel.h</div></div>
</div><!--header-->
<div class="contents">
<a href="model__dpmodel_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="preprocessor">#ifndef MODEL_DPMODEL_H</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#define MODEL_DPMODEL_H</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">/*</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">type 2 model (hierarchical skeletal pose)</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">within this specification, int is assumed to be 32bit, float is assumed to be 32bit, char is assumed to be 8bit, text is assumed to be an array of chars with NULL termination</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">all values are big endian (also known as network byte ordering), NOT x86 little endian</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">general notes:</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">a pose is a 3x4 matrix (rotation matrix, and translate vector)</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">parent bones must always be lower in number than their children, models will be rejected if this is not obeyed (can be fixed by modelling utilities)</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">utility notes:</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">if a hard edge is desired (faceted lighting, or a jump to another set of skin coordinates), vertices must be duplicated</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">ability to visually edit groupids of triangles is highly recommended</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">bones should be markable as &#39;attach&#39; somehow (up to the utility) and thus protected from culling of unused resources</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">frame 0 is always the base pose (the one the skeleton was built for)</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">game notes:</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment">the loader should be very thorough about error checking, all vertex and bone indices should be validated, etc</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment">the gamecode can look up bone numbers by name using a builtin function, for use in attachment situations (the client should have the same model as the host of the gamecode in question - that is to say if the server gamecode is setting the bone number, the client and server must have vaguely compatible models so the client understands, and if the client gamecode is setting the bone number, the server could have a completely different model with no harm done)</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment">the triangle groupid values are up to the gamecode, it is recommended that gamecode process this in an object-oriented fashion (I.E. bullet hits entity, call that entity&#39;s function for getting properties of that groupid)</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="comment">frame 0 should be usable, not skipped</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="comment">speed optimizations for the saver to do:</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment">remove all unused data (unused bones, vertices, etc, be sure to check if bones are used for attachments however)</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="comment">sort triangles into strips</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="comment">sort vertices according to first use in a triangle (caching benefits) after sorting triangles</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="comment">speed optimizations for the loader to do:</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="comment">if the model only has one frame, process it at load time to create a simple static vertex mesh to render (this is a hassle, but it is rewarding to optimize all such models)</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="comment">rendering process:</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="comment">1*. one or two poses are looked up by number</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="comment">2*. boneposes (matrices) are interpolated, building bone matrix array</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="comment">3. bones are parsed sequentially, each bone&#39;s matrix is transformed by it&#39;s parent bone (which can be -1; the model to world matrix)</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="comment">4. meshs are parsed sequentially, as follows:</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="comment">  1. vertices are parsed sequentially and may be influenced by more than one bone (the results of the 3x4 matrix transform will be added together - weighting is already built into these)</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="comment">  2. shader is looked up and called, passing vertex buffer (temporary) and triangle indices (which are stored in the mesh)</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="comment">5. rendering is complete</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="comment">* - these stages can be replaced with completely dynamic animation instead of pose animations.</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="comment">*/</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="comment">// header for the entire file</span></div>
<div class="foldopen" id="foldopen00039" data-start="{" data-end="};">
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="structdpmheader__t.html">   39</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmheader_s</a></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>{</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno"><a class="line" href="structdpmheader__t.html#ae32589bc3a3ac7a955689981ed078c8f">   41</a></span>    <span class="keywordtype">char</span> <span class="keywordtype">id</span>[16]; <span class="comment">// &quot;DARKPLACESMODEL\0&quot;, length 16</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="structdpmheader__t.html#a77597340d8a59983d17e070507e4e774">   42</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmheader__t.html#a77597340d8a59983d17e070507e4e774">type</a>; <span class="comment">// 2 (hierarchical skeletal pose)</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="structdpmheader__t.html#ab847d8b86bf6f8364e01a21b4fab3d44">   43</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmheader__t.html#ab847d8b86bf6f8364e01a21b4fab3d44">filesize</a>; <span class="comment">// size of entire model file</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno"><a class="line" href="structdpmheader__t.html#ae70ccffb0e90b32c4e29a9d638115072">   44</a></span>    <span class="keywordtype">float</span> mins[3], maxs[3], yawradius, <a class="code hl_variable" href="structdpmheader__t.html#ae70ccffb0e90b32c4e29a9d638115072">allradius</a>; <span class="comment">// for clipping uses</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <span class="comment">// these offsets are relative to the file</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno"><a class="line" href="structdpmheader__t.html#ae06308db1eb25409ffbbec9208a0d020">   46</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmheader__t.html#ae06308db1eb25409ffbbec9208a0d020">num_bones</a>;</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="structdpmheader__t.html#a35f63a134d064b4f616197786412a710">   47</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmheader__t.html#a35f63a134d064b4f616197786412a710">num_meshs</a>;</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="structdpmheader__t.html#ae89405cc6a213fb31ccec1f45f5aa71b">   48</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmheader__t.html#ae89405cc6a213fb31ccec1f45f5aa71b">num_frames</a>;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="structdpmheader__t.html#a56bb6bac55b8ecfe9978ad5f33108edd">   49</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmheader__t.html#a56bb6bac55b8ecfe9978ad5f33108edd">ofs_bones</a>; <span class="comment">// dpmbone_t bone[num_bones];</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="structdpmheader__t.html#adbc2a29abe4ac2c02bf1f639c386ebaf">   50</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmheader__t.html#adbc2a29abe4ac2c02bf1f639c386ebaf">ofs_meshs</a>; <span class="comment">// dpmmesh_t mesh[num_meshs];</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="structdpmheader__t.html#a47bd9904c63a96764d7d54079289078f">   51</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmheader__t.html#a47bd9904c63a96764d7d54079289078f">ofs_frames</a>; <span class="comment">// dpmframe_t frame[num_frames];</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>}</div>
</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><a class="code hl_struct" href="structdpmheader__t.html">dpmheader_t</a>;</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="comment">// there may be more than one of these</span></div>
<div class="foldopen" id="foldopen00055" data-start="{" data-end="};">
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="structdpmmesh__t.html">   55</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmmesh_s</a></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>{</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    <span class="comment">// these offsets are relative to the file</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="structdpmmesh__t.html#afdff5e231b895f6113aae845dd2d8b0f">   58</a></span>    <span class="keywordtype">char</span> shadername[32]; <span class="comment">// name of the shader to use</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno"><a class="line" href="structdpmmesh__t.html#aa4e91170e4d6ea1669de6539a68938f0">   59</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmmesh__t.html#aa4e91170e4d6ea1669de6539a68938f0">num_verts</a>;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="structdpmmesh__t.html#ad3ffb309f28daa123a2be6d63ec25815">   60</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmmesh__t.html#ad3ffb309f28daa123a2be6d63ec25815">num_tris</a>;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno"><a class="line" href="structdpmmesh__t.html#a51799508f32a8a888ac8c51387d41950">   61</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmmesh__t.html#a51799508f32a8a888ac8c51387d41950">ofs_verts</a>; <span class="comment">// dpmvertex_t vert[numvertices]; // see vertex struct</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="structdpmmesh__t.html#afac5be85bfc089179ce662681dcdf079">   62</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmmesh__t.html#afac5be85bfc089179ce662681dcdf079">ofs_texcoords</a>; <span class="comment">// float texcoords[numvertices][2];</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="structdpmmesh__t.html#a0764ec0d0d47e72ce25dfc7c8f893137">   63</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmmesh__t.html#a0764ec0d0d47e72ce25dfc7c8f893137">ofs_indices</a>; <span class="comment">// unsigned int indices[numtris*3]; // designed for glDrawElements (each triangle is 3 unsigned int indices)</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="structdpmmesh__t.html#a0cd66d19d1ee8b2da5f03dbb27b51768">   64</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmmesh__t.html#a0cd66d19d1ee8b2da5f03dbb27b51768">ofs_groupids</a>; <span class="comment">// unsigned int groupids[numtris]; // the meaning of these values is entirely up to the gamecode and modeler</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>}</div>
</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><a class="code hl_struct" href="structdpmmesh__t.html">dpmmesh_t</a>;</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="comment">// if set on a bone, it must be protected from removal</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="model__dpmodel_8h.html#a58a5e61d47298d116e641d6f8636987f">   68</a></span><span class="preprocessor">#define DPMBONEFLAG_ATTACHMENT 1</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="comment">// one per bone</span></div>
<div class="foldopen" id="foldopen00070" data-start="{" data-end="};">
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="structdpmbone__t.html">   70</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmbone_s</a></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>{</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <span class="comment">// name examples: upperleftarm leftfinger1 leftfinger2 hand, etc</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="structdpmbone__t.html#afcf4ca6834302e3f5ad0f30336401e9b">   73</a></span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[32];</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <span class="comment">// parent bone number</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno"><a class="line" href="structdpmbone__t.html#a1d04d56d245dd97bcd189f92921f2091">   75</a></span>    <span class="keywordtype">signed</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmbone__t.html#a1d04d56d245dd97bcd189f92921f2091">parent</a>;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="comment">// flags for the bone</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno"><a class="line" href="structdpmbone__t.html#a07a8a51de6f344b303e17805b5c5cb90">   77</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmbone__t.html#a07a8a51de6f344b303e17805b5c5cb90">flags</a>;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>}</div>
</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><a class="code hl_struct" href="structdpmbone__t.html">dpmbone_t</a>;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="comment">// a bonepose matrix is intended to be used like this:</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="comment">// (n = output vertex, v = input vertex, m = matrix, f = influence)</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="comment">// n[0] = v[0] * m[0][0] + v[1] * m[0][1] + v[2] * m[0][2] + f * m[0][3];</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="comment">// n[1] = v[0] * m[1][0] + v[1] * m[1][1] + v[2] * m[1][2] + f * m[1][3];</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="comment">// n[2] = v[0] * m[2][0] + v[1] * m[2][1] + v[2] * m[2][2] + f * m[2][3];</span></div>
<div class="foldopen" id="foldopen00085" data-start="{" data-end="};">
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno"><a class="line" href="structdpmbonepose__t.html">   85</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmbonepose_s</a></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>{</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno"><a class="line" href="structdpmbonepose__t.html#a6154b37b89d2ce4e3f81bba92c5764cd">   87</a></span>    <span class="keywordtype">float</span> matrix[3][4];</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>}</div>
</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span><a class="code hl_struct" href="structdpmbonepose__t.html">dpmbonepose_t</a>;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="comment">// immediately followed by bone positions for the frame</span></div>
<div class="foldopen" id="foldopen00091" data-start="{" data-end="};">
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno"><a class="line" href="structdpmframe__t.html">   91</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmframe_s</a></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>{</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="comment">// name examples: idle_1 idle_2 idle_3 shoot_1 shoot_2 shoot_3, etc</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno"><a class="line" href="structdpmframe__t.html#a2963fd08ad4ac81c88799991ccf55bdf">   94</a></span>    <span class="keywordtype">char</span> <a class="code hl_variable" href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a>[32];</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="structdpmframe__t.html#a05fd0ebb7ff5ac5473ef49444df312f9">   95</a></span>    <span class="keywordtype">float</span> mins[3], maxs[3], yawradius, <a class="code hl_variable" href="structdpmframe__t.html#a05fd0ebb7ff5ac5473ef49444df312f9">allradius</a>;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno"><a class="line" href="structdpmframe__t.html#a140fd62fdf6c102b7ef6b46257024da9">   96</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmframe__t.html#a140fd62fdf6c102b7ef6b46257024da9">ofs_bonepositions</a>; <span class="comment">// dpmbonepose_t bonepositions[bones];</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>}</div>
</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><a class="code hl_struct" href="structdpmframe__t.html">dpmframe_t</a>;</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="comment">// one or more of these per vertex</span></div>
<div class="foldopen" id="foldopen00100" data-start="{" data-end="};">
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno"><a class="line" href="structdpmbonevert__t.html">  100</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmbonevert_s</a></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>{</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="comment">// this pairing of origin and influence is intentional</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="comment">// (in SSE or 3DNow! assembly it can be done as a quad vector op</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <span class="comment">//  (or two dual vector ops) very easily)</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="structdpmbonevert__t.html#a5567cd7279b9498c100717ac60d4e593">  105</a></span>    <span class="keywordtype">float</span> origin[3]; <span class="comment">// vertex location (these blend)</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno"><a class="line" href="structdpmbonevert__t.html#ad69ee08ef12fef22f64b8bd4f08248a4">  106</a></span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="structdpmbonevert__t.html#ad69ee08ef12fef22f64b8bd4f08248a4">influence</a>; <span class="comment">// influence fraction (these must add up to 1)</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <span class="comment">// this pairing of normal and bonenum is intentional</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <span class="comment">// (in SSE or 3DNow! assembly it can be done as a quad vector op</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <span class="comment">//  (or two dual vector ops) very easily, the bonenum is ignored)</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno"><a class="line" href="structdpmbonevert__t.html#af675bbdbda71ce60f629b0b22300bf90">  110</a></span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a>[3]; <span class="comment">// surface normal (these blend)</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno"><a class="line" href="structdpmbonevert__t.html#a34420fdc93da9d54a410692c511a0652">  111</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmbonevert__t.html#a34420fdc93da9d54a410692c511a0652">bonenum</a>; <span class="comment">// number of the bone</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>}</div>
</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><a class="code hl_struct" href="structdpmbonevert__t.html">dpmbonevert_t</a>;</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span><span class="comment">// variable size, parsed sequentially</span></div>
<div class="foldopen" id="foldopen00115" data-start="{" data-end="};">
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno"><a class="line" href="structdpmvertex__t.html">  115</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_variable" href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">dpmvertex_s</a></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>{</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno"><a class="line" href="structdpmvertex__t.html#ac45e81d24277f4920f52e801caafdedb">  117</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="structdpmvertex__t.html#ac45e81d24277f4920f52e801caafdedb">numbones</a>;</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="comment">// immediately followed by 1 or more dpmbonevert_t structures</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>}</div>
</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span><a class="code hl_struct" href="structdpmvertex__t.html">dpmvertex_t</a>;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="ttc" id="aglquake_8h_html_ac615821e7cf9469189648617cb1275be"><div class="ttname"><a href="glquake_8h.html#ac615821e7cf9469189648617cb1275be">name</a></div><div class="ttdeci">const GLchar * name</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00600">glquake.h:600</a></div></div>
<div class="ttc" id="aglquake_8h_html_af7ca775b6d9354291c4d7d01b8b2a8bc"><div class="ttname"><a href="glquake_8h.html#af7ca775b6d9354291c4d7d01b8b2a8bc">index</a></div><div class="ttdeci">GLuint index</div><div class="ttdef"><b>Definition</b> <a href="glquake_8h_source.html#l00628">glquake.h:628</a></div></div>
<div class="ttc" id="ashader__glsl_8h_html_a7f9900a7305f0a389e52eb9aef7b1f13"><div class="ttname"><a href="shader__glsl_8h.html#a7f9900a7305f0a389e52eb9aef7b1f13">normal</a></div><div class="ttdeci">vec3 normal</div><div class="ttdef"><b>Definition</b> <a href="shader__glsl_8h_source.html#l00575">shader_glsl.h:575</a></div></div>
<div class="ttc" id="astructdpmbone__t_html"><div class="ttname"><a href="structdpmbone__t.html">dpmbone_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00070">model_dpmodel.h:71</a></div></div>
<div class="ttc" id="astructdpmbone__t_html_a07a8a51de6f344b303e17805b5c5cb90"><div class="ttname"><a href="structdpmbone__t.html#a07a8a51de6f344b303e17805b5c5cb90">dpmbone_t::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00077">model_dpmodel.h:77</a></div></div>
<div class="ttc" id="astructdpmbone__t_html_a1d04d56d245dd97bcd189f92921f2091"><div class="ttname"><a href="structdpmbone__t.html#a1d04d56d245dd97bcd189f92921f2091">dpmbone_t::parent</a></div><div class="ttdeci">signed int parent</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00075">model_dpmodel.h:75</a></div></div>
<div class="ttc" id="astructdpmbonepose__t_html"><div class="ttname"><a href="structdpmbonepose__t.html">dpmbonepose_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00085">model_dpmodel.h:86</a></div></div>
<div class="ttc" id="astructdpmbonevert__t_html"><div class="ttname"><a href="structdpmbonevert__t.html">dpmbonevert_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00100">model_dpmodel.h:101</a></div></div>
<div class="ttc" id="astructdpmbonevert__t_html_a34420fdc93da9d54a410692c511a0652"><div class="ttname"><a href="structdpmbonevert__t.html#a34420fdc93da9d54a410692c511a0652">dpmbonevert_t::bonenum</a></div><div class="ttdeci">unsigned int bonenum</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00111">model_dpmodel.h:111</a></div></div>
<div class="ttc" id="astructdpmbonevert__t_html_ad69ee08ef12fef22f64b8bd4f08248a4"><div class="ttname"><a href="structdpmbonevert__t.html#ad69ee08ef12fef22f64b8bd4f08248a4">dpmbonevert_t::influence</a></div><div class="ttdeci">float influence</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00106">model_dpmodel.h:106</a></div></div>
<div class="ttc" id="astructdpmframe__t_html"><div class="ttname"><a href="structdpmframe__t.html">dpmframe_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00091">model_dpmodel.h:92</a></div></div>
<div class="ttc" id="astructdpmframe__t_html_a05fd0ebb7ff5ac5473ef49444df312f9"><div class="ttname"><a href="structdpmframe__t.html#a05fd0ebb7ff5ac5473ef49444df312f9">dpmframe_t::allradius</a></div><div class="ttdeci">float allradius</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00095">model_dpmodel.h:95</a></div></div>
<div class="ttc" id="astructdpmframe__t_html_a140fd62fdf6c102b7ef6b46257024da9"><div class="ttname"><a href="structdpmframe__t.html#a140fd62fdf6c102b7ef6b46257024da9">dpmframe_t::ofs_bonepositions</a></div><div class="ttdeci">int ofs_bonepositions</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00096">model_dpmodel.h:96</a></div></div>
<div class="ttc" id="astructdpmheader__t_html"><div class="ttname"><a href="structdpmheader__t.html">dpmheader_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00039">model_dpmodel.h:40</a></div></div>
<div class="ttc" id="astructdpmheader__t_html_a35f63a134d064b4f616197786412a710"><div class="ttname"><a href="structdpmheader__t.html#a35f63a134d064b4f616197786412a710">dpmheader_t::num_meshs</a></div><div class="ttdeci">unsigned int num_meshs</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00047">model_dpmodel.h:47</a></div></div>
<div class="ttc" id="astructdpmheader__t_html_a47bd9904c63a96764d7d54079289078f"><div class="ttname"><a href="structdpmheader__t.html#a47bd9904c63a96764d7d54079289078f">dpmheader_t::ofs_frames</a></div><div class="ttdeci">unsigned int ofs_frames</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00051">model_dpmodel.h:51</a></div></div>
<div class="ttc" id="astructdpmheader__t_html_a56bb6bac55b8ecfe9978ad5f33108edd"><div class="ttname"><a href="structdpmheader__t.html#a56bb6bac55b8ecfe9978ad5f33108edd">dpmheader_t::ofs_bones</a></div><div class="ttdeci">unsigned int ofs_bones</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00049">model_dpmodel.h:49</a></div></div>
<div class="ttc" id="astructdpmheader__t_html_a77597340d8a59983d17e070507e4e774"><div class="ttname"><a href="structdpmheader__t.html#a77597340d8a59983d17e070507e4e774">dpmheader_t::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00042">model_dpmodel.h:42</a></div></div>
<div class="ttc" id="astructdpmheader__t_html_ab847d8b86bf6f8364e01a21b4fab3d44"><div class="ttname"><a href="structdpmheader__t.html#ab847d8b86bf6f8364e01a21b4fab3d44">dpmheader_t::filesize</a></div><div class="ttdeci">unsigned int filesize</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00043">model_dpmodel.h:43</a></div></div>
<div class="ttc" id="astructdpmheader__t_html_adbc2a29abe4ac2c02bf1f639c386ebaf"><div class="ttname"><a href="structdpmheader__t.html#adbc2a29abe4ac2c02bf1f639c386ebaf">dpmheader_t::ofs_meshs</a></div><div class="ttdeci">unsigned int ofs_meshs</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00050">model_dpmodel.h:50</a></div></div>
<div class="ttc" id="astructdpmheader__t_html_ae06308db1eb25409ffbbec9208a0d020"><div class="ttname"><a href="structdpmheader__t.html#ae06308db1eb25409ffbbec9208a0d020">dpmheader_t::num_bones</a></div><div class="ttdeci">unsigned int num_bones</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00046">model_dpmodel.h:46</a></div></div>
<div class="ttc" id="astructdpmheader__t_html_ae70ccffb0e90b32c4e29a9d638115072"><div class="ttname"><a href="structdpmheader__t.html#ae70ccffb0e90b32c4e29a9d638115072">dpmheader_t::allradius</a></div><div class="ttdeci">float allradius</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00044">model_dpmodel.h:44</a></div></div>
<div class="ttc" id="astructdpmheader__t_html_ae89405cc6a213fb31ccec1f45f5aa71b"><div class="ttname"><a href="structdpmheader__t.html#ae89405cc6a213fb31ccec1f45f5aa71b">dpmheader_t::num_frames</a></div><div class="ttdeci">unsigned int num_frames</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00048">model_dpmodel.h:48</a></div></div>
<div class="ttc" id="astructdpmmesh__t_html"><div class="ttname"><a href="structdpmmesh__t.html">dpmmesh_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00055">model_dpmodel.h:56</a></div></div>
<div class="ttc" id="astructdpmmesh__t_html_a0764ec0d0d47e72ce25dfc7c8f893137"><div class="ttname"><a href="structdpmmesh__t.html#a0764ec0d0d47e72ce25dfc7c8f893137">dpmmesh_t::ofs_indices</a></div><div class="ttdeci">unsigned int ofs_indices</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00063">model_dpmodel.h:63</a></div></div>
<div class="ttc" id="astructdpmmesh__t_html_a0cd66d19d1ee8b2da5f03dbb27b51768"><div class="ttname"><a href="structdpmmesh__t.html#a0cd66d19d1ee8b2da5f03dbb27b51768">dpmmesh_t::ofs_groupids</a></div><div class="ttdeci">unsigned int ofs_groupids</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00064">model_dpmodel.h:64</a></div></div>
<div class="ttc" id="astructdpmmesh__t_html_a51799508f32a8a888ac8c51387d41950"><div class="ttname"><a href="structdpmmesh__t.html#a51799508f32a8a888ac8c51387d41950">dpmmesh_t::ofs_verts</a></div><div class="ttdeci">unsigned int ofs_verts</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00061">model_dpmodel.h:61</a></div></div>
<div class="ttc" id="astructdpmmesh__t_html_aa4e91170e4d6ea1669de6539a68938f0"><div class="ttname"><a href="structdpmmesh__t.html#aa4e91170e4d6ea1669de6539a68938f0">dpmmesh_t::num_verts</a></div><div class="ttdeci">unsigned int num_verts</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00059">model_dpmodel.h:59</a></div></div>
<div class="ttc" id="astructdpmmesh__t_html_ad3ffb309f28daa123a2be6d63ec25815"><div class="ttname"><a href="structdpmmesh__t.html#ad3ffb309f28daa123a2be6d63ec25815">dpmmesh_t::num_tris</a></div><div class="ttdeci">unsigned int num_tris</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00060">model_dpmodel.h:60</a></div></div>
<div class="ttc" id="astructdpmmesh__t_html_afac5be85bfc089179ce662681dcdf079"><div class="ttname"><a href="structdpmmesh__t.html#afac5be85bfc089179ce662681dcdf079">dpmmesh_t::ofs_texcoords</a></div><div class="ttdeci">unsigned int ofs_texcoords</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00062">model_dpmodel.h:62</a></div></div>
<div class="ttc" id="astructdpmvertex__t_html"><div class="ttname"><a href="structdpmvertex__t.html">dpmvertex_t</a></div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00115">model_dpmodel.h:116</a></div></div>
<div class="ttc" id="astructdpmvertex__t_html_ac45e81d24277f4920f52e801caafdedb"><div class="ttname"><a href="structdpmvertex__t.html#ac45e81d24277f4920f52e801caafdedb">dpmvertex_t::numbones</a></div><div class="ttdeci">unsigned int numbones</div><div class="ttdef"><b>Definition</b> <a href="model__dpmodel_8h_source.html#l00117">model_dpmodel.h:117</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="model__dpmodel_8h.html">model_dpmodel.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
