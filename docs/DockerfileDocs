#
# docker build -t doxygen-breathe-sphinx:latest -f docs/DockerfileDocs .
# docker run -it --rm -u $(id -u ${USER}):$(id -g ${USER}) -v $(pwd):/src doxygen-breathe-sphinx:latest sphinx-quickstart
# docker run -it --rm -u $(id -u ${USER}):$(id -g ${USER}) -v $(pwd):/src doxygen-breathe-sphinx:latest doxygen ./docs/Doxyfile
# docker run -it --rm -u $(id -u ${USER}):$(id -g ${USER}) -v $(pwd):/src doxygen-breathe-sphinx:latest doxygen ./docs/Doxyrest
# docker run -it --rm -u $(id -u ${USER}):$(id -g ${USER}) -v $(pwd):/src doxygen-breathe-sphinx:latest doxyrest -c docs/doxyrest-config.lua
# docker run -it --rm -u $(id -u ${USER}):$(id -g ${USER}) -v $(pwd):/src doxygen-breathe-sphinx:latest sphinx-build -b html ./docs/source ./docs/build
#

FROM sphinxdoc/sphinx

RUN apt update

# Doxygen
RUN apt install -y curl doxygen

# Doxyrest
RUN apt install -y xz-utils lua5.2 liblua5.2-0 expat

RUN pip install sphinx-sitemap

# Doxygen C++ theme
RUN pip install jinja2 Pygments

# Download and extract Doxyrest
RUN curl -SL https://github.com/vovkos/doxyrest/releases/download/doxyrest-2.1.3/doxyrest-2.1.3-linux-amd64.tar.xz \
  | tar --verbose --xz --directory=/usr --extract --strip-components=1

WORKDIR /src
